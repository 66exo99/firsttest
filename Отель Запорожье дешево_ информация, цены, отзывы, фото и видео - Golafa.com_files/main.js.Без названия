/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});
/**
 * Swiper 4.5.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * http://www.idangero.us/swiper/
 *
 * Copyright 2014-2019 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: February 22, 2019
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,function(){"use strict";var f="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,J="undefined"==typeof window?{document:f,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,l=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function L(e,t){var a=[],i=0;if(e&&!t&&e instanceof l)return e;if(e)if("string"==typeof e){var s,r,n=e.trim();if(0<=n.indexOf("<")&&0<=n.indexOf(">")){var o="div";for(0===n.indexOf("<li")&&(o="ul"),0===n.indexOf("<tr")&&(o="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(o="tr"),0===n.indexOf("<tbody")&&(o="table"),0===n.indexOf("<option")&&(o="select"),(r=f.createElement(o)).innerHTML=n,i=0;i<r.childNodes.length;i+=1)a.push(r.childNodes[i])}else for(s=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||f).querySelectorAll(e.trim()):[f.getElementById(e.trim().split("#")[1])],i=0;i<s.length;i+=1)s[i]&&a.push(s[i])}else if(e.nodeType||e===J||e===f)a.push(e);else if(0<e.length&&e[0].nodeType)for(i=0;i<e.length;i+=1)a.push(e[i]);return new l(a)}function r(e){for(var t=[],a=0;a<e.length;a+=1)-1===t.indexOf(e[a])&&t.push(e[a]);return t}L.fn=l.prototype,L.Class=l,L.Dom7=l;var t={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(t[a]);return this},removeClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(t[a]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(t[a]);return this},attr:function(e,t){var a=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i+=1)if(2===a.length)this[i].setAttribute(e,t);else for(var s in e)this[i][s]=e[s],this[i].setAttribute(s,e[s]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var a;if(void 0!==t){for(var i=0;i<this.length;i+=1)(a=this[i]).dom7ElementDataStorage||(a.dom7ElementDataStorage={}),a.dom7ElementDataStorage[e]=t;return this}if(a=this[0]){if(a.dom7ElementDataStorage&&e in a.dom7ElementDataStorage)return a.dom7ElementDataStorage[e];var s=a.getAttribute("data-"+e);return s||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransform=e,a.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransitionDuration=e,a.transitionDuration=e}return this},on:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];var i=t[0],r=t[1],n=t[2],s=t[3];function o(e){var t=e.target;if(t){var a=e.target.dom7EventData||[];if(a.indexOf(e)<0&&a.unshift(e),L(t).is(r))n.apply(t,a);else for(var i=L(t).parents(),s=0;s<i.length;s+=1)L(i[s]).is(r)&&n.apply(i[s],a)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),n.apply(this,t)}"function"==typeof t[1]&&(i=(e=t)[0],n=e[1],s=e[2],r=void 0),s||(s=!1);for(var d,p=i.split(" "),c=0;c<this.length;c+=1){var u=this[c];if(r)for(d=0;d<p.length;d+=1){var h=p[d];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[h]||(u.dom7LiveListeners[h]=[]),u.dom7LiveListeners[h].push({listener:n,proxyListener:o}),u.addEventListener(h,o,s)}else for(d=0;d<p.length;d+=1){var v=p[d];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[v]||(u.dom7Listeners[v]=[]),u.dom7Listeners[v].push({listener:n,proxyListener:l}),u.addEventListener(v,l,s)}}return this},off:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];var i=t[0],s=t[1],r=t[2],n=t[3];"function"==typeof t[1]&&(i=(e=t)[0],r=e[1],n=e[2],s=void 0),n||(n=!1);for(var o=i.split(" "),l=0;l<o.length;l+=1)for(var d=o[l],p=0;p<this.length;p+=1){var c=this[p],u=void 0;if(!s&&c.dom7Listeners?u=c.dom7Listeners[d]:s&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[d]),u&&u.length)for(var h=u.length-1;0<=h;h-=1){var v=u[h];r&&v.listener===r?(c.removeEventListener(d,v.proxyListener,n),u.splice(h,1)):r&&v.listener&&v.listener.dom7proxy&&v.listener.dom7proxy===r?(c.removeEventListener(d,v.proxyListener,n),u.splice(h,1)):r||(c.removeEventListener(d,v.proxyListener,n),u.splice(h,1))}}return this},trigger:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=e[0].split(" "),i=e[1],s=0;s<a.length;s+=1)for(var r=a[s],n=0;n<this.length;n+=1){var o=this[n],l=void 0;try{l=new J.CustomEvent(r,{detail:i,bubbles:!0,cancelable:!0})}catch(e){(l=f.createEvent("Event")).initEvent(r,!0,!0),l.detail=i}o.dom7EventData=e.filter(function(e,t){return 0<t}),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}return this},transitionEnd:function(t){var a,i=["webkitTransitionEnd","transitionend"],s=this;function r(e){if(e.target===this)for(t.call(this,e),a=0;a<i.length;a+=1)s.off(i[a],r)}if(t)for(a=0;a<i.length;a+=1)s.on(i[a],r);return this},outerWidth:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(0<this.length){var e=this[0],t=e.getBoundingClientRect(),a=f.body,i=e.clientTop||a.clientTop||0,s=e.clientLeft||a.clientLeft||0,r=e===J?J.scrollY:e.scrollTop,n=e===J?J.scrollX:e.scrollLeft;return{top:t.top+r-i,left:t.left+n-s}}return null},css:function(e,t){var a;if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a+=1)for(var i in e)this[a].style[i]=e[i];return this}if(this[0])return J.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,a,i=this[0];if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=L(e),a=0;a<t.length;a+=1)if(t[a]===i)return!0;return!1}if(e===f)return i===f;if(e===J)return i===J;if(e.nodeType||e instanceof l){for(t=e.nodeType?[e]:e,a=0;a<t.length;a+=1)if(t[a]===i)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,a=this.length;return new l(a-1<e?[]:e<0?(t=a+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];for(var i=0;i<t.length;i+=1){e=t[i];for(var s=0;s<this.length;s+=1)if("string"==typeof e){var r=f.createElement("div");for(r.innerHTML=e;r.firstChild;)this[s].appendChild(r.firstChild)}else if(e instanceof l)for(var n=0;n<e.length;n+=1)this[s].appendChild(e[n]);else this[s].appendChild(e)}return this},prepend:function(e){var t,a;for(t=0;t<this.length;t+=1)if("string"==typeof e){var i=f.createElement("div");for(i.innerHTML=e,a=i.childNodes.length-1;0<=a;a-=1)this[t].insertBefore(i.childNodes[a],this[t].childNodes[0])}else if(e instanceof l)for(a=0;a<e.length;a+=1)this[t].insertBefore(e[a],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return 0<this.length?e?this[0].nextElementSibling&&L(this[0].nextElementSibling).is(e)?new l([this[0].nextElementSibling]):new l([]):this[0].nextElementSibling?new l([this[0].nextElementSibling]):new l([]):new l([])},nextAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.nextElementSibling;){var i=a.nextElementSibling;e?L(i).is(e)&&t.push(i):t.push(i),a=i}return new l(t)},prev:function(e){if(0<this.length){var t=this[0];return e?t.previousElementSibling&&L(t.previousElementSibling).is(e)?new l([t.previousElementSibling]):new l([]):t.previousElementSibling?new l([t.previousElementSibling]):new l([])}return new l([])},prevAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.previousElementSibling;){var i=a.previousElementSibling;e?L(i).is(e)&&t.push(i):t.push(i),a=i}return new l(t)},parent:function(e){for(var t=[],a=0;a<this.length;a+=1)null!==this[a].parentNode&&(e?L(this[a].parentNode).is(e)&&t.push(this[a].parentNode):t.push(this[a].parentNode));return L(r(t))},parents:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].parentNode;i;)e?L(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return L(r(t))},closest:function(e){var t=this;return void 0===e?new l([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].querySelectorAll(e),s=0;s<i.length;s+=1)t.push(i[s]);return new l(t)},children:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].childNodes,s=0;s<i.length;s+=1)e?1===i[s].nodeType&&L(i[s]).is(e)&&t.push(i[s]):1===i[s].nodeType&&t.push(i[s]);return new l(r(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a,i;for(a=0;a<e.length;a+=1){var s=L(e[a]);for(i=0;i<s.length;i+=1)this[this.length]=s[i],this.length+=1}return this},styles:function(){return this[0]?J.getComputedStyle(this[0],null):{}}};Object.keys(t).forEach(function(e){L.fn[e]=t[e]});var e,a,i,s,ee={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,t){var a,i,s;void 0===t&&(t="x");var r=J.getComputedStyle(e,null);return J.WebKitCSSMatrix?(6<(i=r.transform||r.webkitTransform).split(",").length&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),s=new J.WebKitCSSMatrix("none"===i?"":i)):a=(s=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=J.WebKitCSSMatrix?s.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(i=J.WebKitCSSMatrix?s.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5])),i||0},parseUrlQuery:function(e){var t,a,i,s,r={},n=e||J.location.href;if("string"==typeof n&&n.length)for(s=(a=(n=-1<n.indexOf("?")?n.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,t=0;t<s;t+=1)i=a[t].replace(/#\S+/g,"").split("="),r[decodeURIComponent(i[0])]=void 0===i[1]?void 0:decodeURIComponent(i[1])||"";return r},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=Object(e[0]),i=1;i<e.length;i+=1){var s=e[i];if(null!=s)for(var r=Object.keys(Object(s)),n=0,o=r.length;n<o;n+=1){var l=r[n],d=Object.getOwnPropertyDescriptor(s,l);void 0!==d&&d.enumerable&&(ee.isObject(a[l])&&ee.isObject(s[l])?ee.extend(a[l],s[l]):!ee.isObject(a[l])&&ee.isObject(s[l])?(a[l]={},ee.extend(a[l],s[l])):a[l]=s[l])}}return a}},te=(i=f.createElement("div"),{touch:J.Modernizr&&!0===J.Modernizr.touch||!!(0<J.navigator.maxTouchPoints||"ontouchstart"in J||J.DocumentTouch&&f instanceof J.DocumentTouch),pointerEvents:!!(J.navigator.pointerEnabled||J.PointerEvent||"maxTouchPoints"in J.navigator&&0<J.navigator.maxTouchPoints),prefixedPointerEvents:!!J.navigator.msPointerEnabled,transition:(a=i.style,"transition"in a||"webkitTransition"in a||"MozTransition"in a),transforms3d:J.Modernizr&&!0===J.Modernizr.csstransforms3d||(e=i.style,"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e),flexbox:function(){for(var e=i.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),a=0;a<t.length;a+=1)if(t[a]in e)return!0;return!1}(),observer:"MutationObserver"in J||"WebkitMutationObserver"in J,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});J.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in J}),I={isIE:!!J.navigator.userAgent.match(/Trident/g)||!!J.navigator.userAgent.match(/MSIE/g),isEdge:!!J.navigator.userAgent.match(/Edge/g),isSafari:(s=J.navigator.userAgent.toLowerCase(),0<=s.indexOf("safari")&&s.indexOf("chrome")<0&&s.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(J.navigator.userAgent)},n=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})},o={components:{configurable:!0}};n.prototype.on=function(e,t,a){var i=this;if("function"!=typeof t)return i;var s=a?"unshift":"push";return e.split(" ").forEach(function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][s](t)}),i},n.prototype.once=function(a,i,e){var s=this;if("function"!=typeof i)return s;function r(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];i.apply(s,e),s.off(a,r),r.f7proxy&&delete r.f7proxy}return r.f7proxy=i,s.on(a,r,e)},n.prototype.off=function(e,i){var s=this;return s.eventsListeners&&e.split(" ").forEach(function(a){void 0===i?s.eventsListeners[a]=[]:s.eventsListeners[a]&&s.eventsListeners[a].length&&s.eventsListeners[a].forEach(function(e,t){(e===i||e.f7proxy&&e.f7proxy===i)&&s.eventsListeners[a].splice(t,1)})}),s},n.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a,i,s,r=this;return r.eventsListeners&&("string"==typeof e[0]||Array.isArray(e[0])?(a=e[0],i=e.slice(1,e.length),s=r):(a=e[0].events,i=e[0].data,s=e[0].context||r),(Array.isArray(a)?a:a.split(" ")).forEach(function(e){if(r.eventsListeners&&r.eventsListeners[e]){var t=[];r.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(s,i)})}})),r},n.prototype.useModulesParams=function(a){var i=this;i.modules&&Object.keys(i.modules).forEach(function(e){var t=i.modules[e];t.params&&ee.extend(a,t.params)})},n.prototype.useModules=function(i){void 0===i&&(i={});var s=this;s.modules&&Object.keys(s.modules).forEach(function(e){var a=s.modules[e],t=i[e]||{};a.instance&&Object.keys(a.instance).forEach(function(e){var t=a.instance[e];s[e]="function"==typeof t?t.bind(s):t}),a.on&&s.on&&Object.keys(a.on).forEach(function(e){s.on(e,a.on[e])}),a.create&&a.create.bind(s)(t)})},o.components.set=function(e){this.use&&this.use(e)},n.installModule=function(t){for(var e=[],a=arguments.length-1;0<a--;)e[a]=arguments[a+1];var i=this;i.prototype.modules||(i.prototype.modules={});var s=t.name||Object.keys(i.prototype.modules).length+"_"+ee.now();return(i.prototype.modules[s]=t).proto&&Object.keys(t.proto).forEach(function(e){i.prototype[e]=t.proto[e]}),t.static&&Object.keys(t.static).forEach(function(e){i[e]=t.static[e]}),t.install&&t.install.apply(i,e),i},n.use=function(e){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];var i=this;return Array.isArray(e)?(e.forEach(function(e){return i.installModule(e)}),i):i.installModule.apply(i,[e].concat(t))},Object.defineProperties(n,o);var d={updateSize:function(){var e,t,a=this,i=a.$el;e=void 0!==a.params.width?a.params.width:i[0].clientWidth,t=void 0!==a.params.height?a.params.height:i[0].clientHeight,0===e&&a.isHorizontal()||0===t&&a.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),ee.extend(a,{width:e,height:t,size:a.isHorizontal()?e:t}))},updateSlides:function(){var e=this,t=e.params,a=e.$wrapperEl,i=e.size,s=e.rtlTranslate,r=e.wrongRTL,n=e.virtual&&t.virtual.enabled,o=n?e.virtual.slides.length:e.slides.length,l=a.children("."+e.params.slideClass),d=n?e.virtual.slides.length:l.length,p=[],c=[],u=[],h=t.slidesOffsetBefore;"function"==typeof h&&(h=t.slidesOffsetBefore.call(e));var v=t.slidesOffsetAfter;"function"==typeof v&&(v=t.slidesOffsetAfter.call(e));var f=e.snapGrid.length,m=e.snapGrid.length,g=t.spaceBetween,b=-h,w=0,y=0;if(void 0!==i){var x,T;"string"==typeof g&&0<=g.indexOf("%")&&(g=parseFloat(g.replace("%",""))/100*i),e.virtualSize=-g,s?l.css({marginLeft:"",marginTop:""}):l.css({marginRight:"",marginBottom:""}),1<t.slidesPerColumn&&(x=Math.floor(d/t.slidesPerColumn)===d/e.params.slidesPerColumn?d:Math.ceil(d/t.slidesPerColumn)*t.slidesPerColumn,"auto"!==t.slidesPerView&&"row"===t.slidesPerColumnFill&&(x=Math.max(x,t.slidesPerView*t.slidesPerColumn)));for(var E,S=t.slidesPerColumn,C=x/S,M=Math.floor(d/t.slidesPerColumn),z=0;z<d;z+=1){T=0;var P=l.eq(z);if(1<t.slidesPerColumn){var k=void 0,$=void 0,L=void 0;"column"===t.slidesPerColumnFill?(L=z-($=Math.floor(z/S))*S,(M<$||$===M&&L===S-1)&&S<=(L+=1)&&(L=0,$+=1),k=$+L*x/S,P.css({"-webkit-box-ordinal-group":k,"-moz-box-ordinal-group":k,"-ms-flex-order":k,"-webkit-order":k,order:k})):$=z-(L=Math.floor(z/C))*C,P.css("margin-"+(e.isHorizontal()?"top":"left"),0!==L&&t.spaceBetween&&t.spaceBetween+"px").attr("data-swiper-column",$).attr("data-swiper-row",L)}if("none"!==P.css("display")){if("auto"===t.slidesPerView){var I=J.getComputedStyle(P[0],null),D=P[0].style.transform,O=P[0].style.webkitTransform;if(D&&(P[0].style.transform="none"),O&&(P[0].style.webkitTransform="none"),t.roundLengths)T=e.isHorizontal()?P.outerWidth(!0):P.outerHeight(!0);else if(e.isHorizontal()){var A=parseFloat(I.getPropertyValue("width")),H=parseFloat(I.getPropertyValue("padding-left")),N=parseFloat(I.getPropertyValue("padding-right")),G=parseFloat(I.getPropertyValue("margin-left")),B=parseFloat(I.getPropertyValue("margin-right")),X=I.getPropertyValue("box-sizing");T=X&&"border-box"===X?A+G+B:A+H+N+G+B}else{var Y=parseFloat(I.getPropertyValue("height")),V=parseFloat(I.getPropertyValue("padding-top")),F=parseFloat(I.getPropertyValue("padding-bottom")),R=parseFloat(I.getPropertyValue("margin-top")),q=parseFloat(I.getPropertyValue("margin-bottom")),W=I.getPropertyValue("box-sizing");T=W&&"border-box"===W?Y+R+q:Y+V+F+R+q}D&&(P[0].style.transform=D),O&&(P[0].style.webkitTransform=O),t.roundLengths&&(T=Math.floor(T))}else T=(i-(t.slidesPerView-1)*g)/t.slidesPerView,t.roundLengths&&(T=Math.floor(T)),l[z]&&(e.isHorizontal()?l[z].style.width=T+"px":l[z].style.height=T+"px");l[z]&&(l[z].swiperSlideSize=T),u.push(T),t.centeredSlides?(b=b+T/2+w/2+g,0===w&&0!==z&&(b=b-i/2-g),0===z&&(b=b-i/2-g),Math.abs(b)<.001&&(b=0),t.roundLengths&&(b=Math.floor(b)),y%t.slidesPerGroup==0&&p.push(b),c.push(b)):(t.roundLengths&&(b=Math.floor(b)),y%t.slidesPerGroup==0&&p.push(b),c.push(b),b=b+T+g),e.virtualSize+=T+g,w=T,y+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+v,s&&r&&("slide"===t.effect||"coverflow"===t.effect)&&a.css({width:e.virtualSize+t.spaceBetween+"px"}),te.flexbox&&!t.setWrapperSize||(e.isHorizontal()?a.css({width:e.virtualSize+t.spaceBetween+"px"}):a.css({height:e.virtualSize+t.spaceBetween+"px"})),1<t.slidesPerColumn&&(e.virtualSize=(T+t.spaceBetween)*x,e.virtualSize=Math.ceil(e.virtualSize/t.slidesPerColumn)-t.spaceBetween,e.isHorizontal()?a.css({width:e.virtualSize+t.spaceBetween+"px"}):a.css({height:e.virtualSize+t.spaceBetween+"px"}),t.centeredSlides)){E=[];for(var j=0;j<p.length;j+=1){var U=p[j];t.roundLengths&&(U=Math.floor(U)),p[j]<e.virtualSize+p[0]&&E.push(U)}p=E}if(!t.centeredSlides){E=[];for(var K=0;K<p.length;K+=1){var _=p[K];t.roundLengths&&(_=Math.floor(_)),p[K]<=e.virtualSize-i&&E.push(_)}p=E,1<Math.floor(e.virtualSize-i)-Math.floor(p[p.length-1])&&p.push(e.virtualSize-i)}if(0===p.length&&(p=[0]),0!==t.spaceBetween&&(e.isHorizontal()?s?l.css({marginLeft:g+"px"}):l.css({marginRight:g+"px"}):l.css({marginBottom:g+"px"})),t.centerInsufficientSlides){var Z=0;if(u.forEach(function(e){Z+=e+(t.spaceBetween?t.spaceBetween:0)}),(Z-=t.spaceBetween)<i){var Q=(i-Z)/2;p.forEach(function(e,t){p[t]=e-Q}),c.forEach(function(e,t){c[t]=e+Q})}}ee.extend(e,{slides:l,snapGrid:p,slidesGrid:c,slidesSizesGrid:u}),d!==o&&e.emit("slidesLengthChange"),p.length!==f&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),c.length!==m&&e.emit("slidesGridLengthChange"),(t.watchSlidesProgress||t.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,a=this,i=[],s=0;if("number"==typeof e?a.setTransition(e):!0===e&&a.setTransition(a.params.speed),"auto"!==a.params.slidesPerView&&1<a.params.slidesPerView)for(t=0;t<Math.ceil(a.params.slidesPerView);t+=1){var r=a.activeIndex+t;if(r>a.slides.length)break;i.push(a.slides.eq(r)[0])}else i.push(a.slides.eq(a.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var n=i[t].offsetHeight;s=s<n?n:s}s&&a.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.slides,s=t.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();var r=-e;s&&(r=e),i.removeClass(a.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var n=0;n<i.length;n+=1){var o=i[n],l=(r+(a.centeredSlides?t.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+a.spaceBetween);if(a.watchSlidesVisibility){var d=-(r-o.swiperSlideOffset),p=d+t.slidesSizesGrid[n];(0<=d&&d<t.size||0<p&&p<=t.size||d<=0&&p>=t.size)&&(t.visibleSlides.push(o),t.visibleSlidesIndexes.push(n),i.eq(n).addClass(a.slideVisibleClass))}o.progress=s?-l:l}t.visibleSlides=L(t.visibleSlides)}},updateProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.maxTranslate()-t.minTranslate(),s=t.progress,r=t.isBeginning,n=t.isEnd,o=r,l=n;0===i?n=r=!(s=0):(r=(s=(e-t.minTranslate())/i)<=0,n=1<=s),ee.extend(t,{progress:s,isBeginning:r,isEnd:n}),(a.watchSlidesProgress||a.watchSlidesVisibility)&&t.updateSlidesProgress(e),r&&!o&&t.emit("reachBeginning toEdge"),n&&!l&&t.emit("reachEnd toEdge"),(o&&!r||l&&!n)&&t.emit("fromEdge"),t.emit("progress",s)},updateSlidesClasses:function(){var e,t=this,a=t.slides,i=t.params,s=t.$wrapperEl,r=t.activeIndex,n=t.realIndex,o=t.virtual&&i.virtual.enabled;a.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=o?t.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):a.eq(r)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass));var l=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=a.eq(0)).addClass(i.slideNextClass);var d=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===d.length&&(d=a.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),d.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,a=this,i=a.rtlTranslate?a.translate:-a.translate,s=a.slidesGrid,r=a.snapGrid,n=a.params,o=a.activeIndex,l=a.realIndex,d=a.snapIndex,p=e;if(void 0===p){for(var c=0;c<s.length;c+=1)void 0!==s[c+1]?i>=s[c]&&i<s[c+1]-(s[c+1]-s[c])/2?p=c:i>=s[c]&&i<s[c+1]&&(p=c+1):i>=s[c]&&(p=c);n.normalizeSlideIndex&&(p<0||void 0===p)&&(p=0)}if((t=0<=r.indexOf(i)?r.indexOf(i):Math.floor(p/n.slidesPerGroup))>=r.length&&(t=r.length-1),p!==o){var u=parseInt(a.slides.eq(p).attr("data-swiper-slide-index")||p,10);ee.extend(a,{snapIndex:t,realIndex:u,previousIndex:o,activeIndex:p}),a.emit("activeIndexChange"),a.emit("snapIndexChange"),l!==u&&a.emit("realIndexChange"),a.emit("slideChange")}else t!==d&&(a.snapIndex=t,a.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,a=t.params,i=L(e.target).closest("."+a.slideClass)[0],s=!1;if(i)for(var r=0;r<t.slides.length;r+=1)t.slides[r]===i&&(s=!0);if(!i||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(L(i).attr("data-swiper-slide-index"),10):t.clickedIndex=L(i).index(),a.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};var p={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,a=this.rtlTranslate,i=this.translate,s=this.$wrapperEl;if(t.virtualTranslate)return a?-i:i;var r=ee.getTranslate(s[0],e);return a&&(r=-r),r||0},setTranslate:function(e,t){var a=this,i=a.rtlTranslate,s=a.params,r=a.$wrapperEl,n=a.progress,o=0,l=0;a.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.virtualTranslate||(te.transforms3d?r.transform("translate3d("+o+"px, "+l+"px, 0px)"):r.transform("translate("+o+"px, "+l+"px)")),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?o:l;var d=a.maxTranslate()-a.minTranslate();(0===d?0:(e-a.minTranslate())/d)!==n&&a.updateProgress(e),a.emit("setTranslate",a.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}};var c={setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.params,r=a.previousIndex;s.autoHeight&&a.updateAutoHeight();var n=t;if(n||(n=r<i?"next":i<r?"prev":"reset"),a.emit("transitionStart"),e&&i!==r){if("reset"===n)return void a.emit("slideResetTransitionStart");a.emit("slideChangeTransitionStart"),"next"===n?a.emit("slideNextTransitionStart"):a.emit("slidePrevTransitionStart")}},transitionEnd:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.previousIndex;a.animating=!1,a.setTransition(0);var r=t;if(r||(r=s<i?"next":i<s?"prev":"reset"),a.emit("transitionEnd"),e&&i!==s){if("reset"===r)return void a.emit("slideResetTransitionEnd");a.emit("slideChangeTransitionEnd"),"next"===r?a.emit("slideNextTransitionEnd"):a.emit("slidePrevTransitionEnd")}}};var u={slideTo:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=this,r=e;r<0&&(r=0);var n=s.params,o=s.snapGrid,l=s.slidesGrid,d=s.previousIndex,p=s.activeIndex,c=s.rtlTranslate;if(s.animating&&n.preventInteractionOnTransition)return!1;var u=Math.floor(r/n.slidesPerGroup);u>=o.length&&(u=o.length-1),(p||n.initialSlide||0)===(d||0)&&a&&s.emit("beforeSlideChangeStart");var h,v=-o[u];if(s.updateProgress(v),n.normalizeSlideIndex)for(var f=0;f<l.length;f+=1)-Math.floor(100*v)>=Math.floor(100*l[f])&&(r=f);if(s.initialized&&r!==p){if(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate())return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(p||0)!==r)return!1}return h=p<r?"next":r<p?"prev":"reset",c&&-v===s.translate||!c&&v===s.translate?(s.updateActiveIndex(r),n.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==n.effect&&s.setTranslate(v),"reset"!==h&&(s.transitionStart(a,h),s.transitionEnd(a,h)),!1):(0!==t&&te.transition?(s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(r),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,h),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(a,h))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))):(s.setTransition(0),s.setTranslate(v),s.updateActiveIndex(r),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,h),s.transitionEnd(a,h)),!0)},slideToLoop:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=e;return this.params.loop&&(s+=this.loopedSlides),this.slideTo(s,t,a,i)},slideNext:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,r=i.animating;return s.loop?!r&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)):i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)},slidePrev:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,r=i.animating,n=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate;if(s.loop){if(r)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var p,c=d(l?i.translate:-i.translate),u=n.map(function(e){return d(e)}),h=(o.map(function(e){return d(e)}),n[u.indexOf(c)],n[u.indexOf(c)-1]);return void 0!==h&&(p=o.indexOf(h))<0&&(p=i.activeIndex-1),i.slideTo(p,e,t,a)},slideReset:function(e,t,a){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,a)},slideToClosest:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.activeIndex,r=Math.floor(s/i.params.slidesPerGroup);if(r<i.snapGrid.length-1){var n=i.rtlTranslate?i.translate:-i.translate,o=i.snapGrid[r];(i.snapGrid[r+1]-o)/2<n-o&&(s=i.params.slidesPerGroup)}return i.slideTo(s,e,t,a)},slideToClickedSlide:function(){var e,t=this,a=t.params,i=t.$wrapperEl,s="auto"===a.slidesPerView?t.slidesPerViewDynamic():a.slidesPerView,r=t.clickedIndex;if(a.loop){if(t.animating)return;e=parseInt(L(t.clickedSlide).attr("data-swiper-slide-index"),10),a.centeredSlides?r<t.loopedSlides-s/2||r>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),r=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),ee.nextTick(function(){t.slideTo(r)})):t.slideTo(r):r>t.slides.length-s?(t.loopFix(),r=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),ee.nextTick(function(){t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}};var h={loopCreate:function(){var i=this,e=i.params,t=i.$wrapperEl;t.children("."+e.slideClass+"."+e.slideDuplicateClass).remove();var s=t.children("."+e.slideClass);if(e.loopFillGroupWithBlank){var a=e.slidesPerGroup-s.length%e.slidesPerGroup;if(a!==e.slidesPerGroup){for(var r=0;r<a;r+=1){var n=L(f.createElement("div")).addClass(e.slideClass+" "+e.slideBlankClass);t.append(n)}s=t.children("."+e.slideClass)}}"auto"!==e.slidesPerView||e.loopedSlides||(e.loopedSlides=s.length),i.loopedSlides=parseInt(e.loopedSlides||e.slidesPerView,10),i.loopedSlides+=e.loopAdditionalSlides,i.loopedSlides>s.length&&(i.loopedSlides=s.length);var o=[],l=[];s.each(function(e,t){var a=L(t);e<i.loopedSlides&&l.push(t),e<s.length&&e>=s.length-i.loopedSlides&&o.push(t),a.attr("data-swiper-slide-index",e)});for(var d=0;d<l.length;d+=1)t.append(L(l[d].cloneNode(!0)).addClass(e.slideDuplicateClass));for(var p=o.length-1;0<=p;p-=1)t.prepend(L(o[p].cloneNode(!0)).addClass(e.slideDuplicateClass))},loopFix:function(){var e,t=this,a=t.params,i=t.activeIndex,s=t.slides,r=t.loopedSlides,n=t.allowSlidePrev,o=t.allowSlideNext,l=t.snapGrid,d=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var p=-l[i]-t.getTranslate();i<r?(e=s.length-3*r+i,e+=r,t.slideTo(e,0,!1,!0)&&0!==p&&t.setTranslate((d?-t.translate:t.translate)-p)):("auto"===a.slidesPerView&&2*r<=i||i>=s.length-r)&&(e=-s.length+i+r,e+=r,t.slideTo(e,0,!1,!0)&&0!==p&&t.setTranslate((d?-t.translate:t.translate)-p));t.allowSlidePrev=n,t.allowSlideNext=o},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,a=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),a.removeAttr("data-swiper-slide-index")}};var v={setGrabCursor:function(e){if(!(te.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){te.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}};var m={appendSlide:function(e){var t=this,a=t.$wrapperEl,i=t.params;if(i.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&a.append(e[s]);else a.append(e);i.loop&&t.loopCreate(),i.observer&&te.observer||t.update()},prependSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&t.loopDestroy();var r=s+1;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)e[n]&&i.prepend(e[n]);r=s+e.length}else i.prepend(e);a.loop&&t.loopCreate(),a.observer&&te.observer||t.update(),t.slideTo(r,0,!1)},addSlide:function(e,t){var a=this,i=a.$wrapperEl,s=a.params,r=a.activeIndex;s.loop&&(r-=a.loopedSlides,a.loopDestroy(),a.slides=i.children("."+s.slideClass));var n=a.slides.length;if(e<=0)a.prependSlide(t);else if(n<=e)a.appendSlide(t);else{for(var o=e<r?r+1:r,l=[],d=n-1;e<=d;d-=1){var p=a.slides.eq(d);p.remove(),l.unshift(p)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&i.append(t[c]);o=e<r?r+t.length:r}else i.append(t);for(var u=0;u<l.length;u+=1)i.append(l[u]);s.loop&&a.loopCreate(),s.observer&&te.observer||a.update(),s.loop?a.slideTo(o+a.loopedSlides,0,!1):a.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&(s-=t.loopedSlides,t.loopDestroy(),t.slides=i.children("."+a.slideClass));var r,n=s;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)r=e[o],t.slides[r]&&t.slides.eq(r).remove(),r<n&&(n-=1);n=Math.max(n,0)}else r=e,t.slides[r]&&t.slides.eq(r).remove(),r<n&&(n-=1),n=Math.max(n,0);a.loop&&t.loopCreate(),a.observer&&te.observer||t.update(),a.loop?t.slideTo(n+t.loopedSlides,0,!1):t.slideTo(n,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},g=function(){var e=J.navigator.userAgent,t={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:J.cordova||J.phonegap,phonegap:J.cordova||J.phonegap},a=e.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=e.match(/(iPad).*OS\s([\d_]+)/),r=e.match(/(iPod)(.*OS\s([\d_]+))?/),n=!s&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(a&&(t.os="windows",t.osVersion=a[2],t.windows=!0),i&&!a&&(t.os="android",t.osVersion=i[2],t.android=!0,t.androidChrome=0<=e.toLowerCase().indexOf("chrome")),(s||n||r)&&(t.os="ios",t.ios=!0),n&&!r&&(t.osVersion=n[2].replace(/_/g,"."),t.iphone=!0),s&&(t.osVersion=s[2].replace(/_/g,"."),t.ipad=!0),r&&(t.osVersion=r[3]?r[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&0<=e.indexOf("Version/")&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]),t.desktop=!(t.os||t.android||t.webView),t.webView=(n||s||r)&&e.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var o=t.osVersion.split("."),l=f.querySelector('meta[name="viewport"]');t.minimalUi=!t.webView&&(r||n)&&(1*o[0]==7?1<=1*o[1]:7<1*o[0])&&l&&0<=l.getAttribute("content").indexOf("minimal-ui")}return t.pixelRatio=J.devicePixelRatio||1,t}();function b(){var e=this,t=e.params,a=e.el;if(!a||0!==a.offsetWidth){t.breakpoints&&e.setBreakpoint();var i=e.allowSlideNext,s=e.allowSlidePrev,r=e.snapGrid;if(e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),t.freeMode){var n=Math.min(Math.max(e.translate,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses(),t.autoHeight&&e.updateAutoHeight()}else e.updateSlidesClasses(),("auto"===t.slidesPerView||1<t.slidesPerView)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0);e.allowSlidePrev=s,e.allowSlideNext=i,e.params.watchOverflow&&r!==e.snapGrid&&e.checkOverflow()}}var w={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},y={update:d,translate:p,transition:c,slide:u,loop:h,grabCursor:v,manipulation:m,events:{attachEvents:function(){var e=this,t=e.params,a=e.touchEvents,i=e.el,s=e.wrapperEl;e.onTouchStart=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches;if(!t.animating||!i.preventInteractionOnTransition){var r=e;if(r.originalEvent&&(r=r.originalEvent),a.isTouchEvent="touchstart"===r.type,(a.isTouchEvent||!("which"in r)||3!==r.which)&&!(!a.isTouchEvent&&"button"in r&&0<r.button||a.isTouched&&a.isMoved))if(i.noSwiping&&L(r.target).closest(i.noSwipingSelector?i.noSwipingSelector:"."+i.noSwipingClass)[0])t.allowClick=!0;else if(!i.swipeHandler||L(r).closest(i.swipeHandler)[0]){s.currentX="touchstart"===r.type?r.targetTouches[0].pageX:r.pageX,s.currentY="touchstart"===r.type?r.targetTouches[0].pageY:r.pageY;var n=s.currentX,o=s.currentY,l=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,d=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(!l||!(n<=d||n>=J.screen.width-d)){if(ee.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=n,s.startY=o,a.touchStartTime=ee.now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,0<i.threshold&&(a.allowThresholdMove=!1),"touchstart"!==r.type){var p=!0;L(r.target).is(a.formElements)&&(p=!1),f.activeElement&&L(f.activeElement).is(a.formElements)&&f.activeElement!==r.target&&f.activeElement.blur();var c=p&&t.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||c)&&r.preventDefault()}t.emit("touchStart",r)}}}}.bind(e),e.onTouchMove=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,r=t.rtlTranslate,n=e;if(n.originalEvent&&(n=n.originalEvent),a.isTouched){if(!a.isTouchEvent||"mousemove"!==n.type){var o="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,l="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(n.preventedByNestedSwiper)return s.startX=o,void(s.startY=l);if(!t.allowTouchMove)return t.allowClick=!1,void(a.isTouched&&(ee.extend(s,{startX:o,startY:l,currentX:o,currentY:l}),a.touchStartTime=ee.now()));if(a.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(l<s.startY&&t.translate<=t.maxTranslate()||l>s.startY&&t.translate>=t.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(o<s.startX&&t.translate<=t.maxTranslate()||o>s.startX&&t.translate>=t.minTranslate())return;if(a.isTouchEvent&&f.activeElement&&n.target===f.activeElement&&L(n.target).is(a.formElements))return a.isMoved=!0,void(t.allowClick=!1);if(a.allowTouchCallbacks&&t.emit("touchMove",n),!(n.targetTouches&&1<n.targetTouches.length)){s.currentX=o,s.currentY=l;var d,p=s.currentX-s.startX,c=s.currentY-s.startY;if(!(t.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(c,2))<t.params.threshold))if(void 0===a.isScrolling&&(t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?a.isScrolling=!1:25<=p*p+c*c&&(d=180*Math.atan2(Math.abs(c),Math.abs(p))/Math.PI,a.isScrolling=t.isHorizontal()?d>i.touchAngle:90-d>i.touchAngle)),a.isScrolling&&t.emit("touchMoveOpposite",n),void 0===a.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(a.startMoving=!0)),a.isScrolling)a.isTouched=!1;else if(a.startMoving){t.allowClick=!1,n.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&n.stopPropagation(),a.isMoved||(i.loop&&t.loopFix(),a.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,!i.grabCursor||!0!==t.allowSlideNext&&!0!==t.allowSlidePrev||t.setGrabCursor(!0),t.emit("sliderFirstMove",n)),t.emit("sliderMove",n),a.isMoved=!0;var u=t.isHorizontal()?p:c;s.diff=u,u*=i.touchRatio,r&&(u=-u),t.swipeDirection=0<u?"prev":"next",a.currentTranslate=u+a.startTranslate;var h=!0,v=i.resistanceRatio;if(i.touchReleaseOnEdges&&(v=0),0<u&&a.currentTranslate>t.minTranslate()?(h=!1,i.resistance&&(a.currentTranslate=t.minTranslate()-1+Math.pow(-t.minTranslate()+a.startTranslate+u,v))):u<0&&a.currentTranslate<t.maxTranslate()&&(h=!1,i.resistance&&(a.currentTranslate=t.maxTranslate()+1-Math.pow(t.maxTranslate()-a.startTranslate-u,v))),h&&(n.preventedByNestedSwiper=!0),!t.allowSlideNext&&"next"===t.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!t.allowSlidePrev&&"prev"===t.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),0<i.threshold){if(!(Math.abs(u)>i.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,a.currentTranslate=a.startTranslate,void(s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&(0===a.velocities.length&&a.velocities.push({position:s[t.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:s[t.isHorizontal()?"currentX":"currentY"],time:ee.now()})),t.updateProgress(a.currentTranslate),t.setTranslate(a.currentTranslate))}}}}else a.startMoving&&a.isScrolling&&t.emit("touchMoveOpposite",n)}.bind(e),e.onTouchEnd=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,r=t.rtlTranslate,n=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,d=e;if(d.originalEvent&&(d=d.originalEvent),a.allowTouchCallbacks&&t.emit("touchEnd",d),a.allowTouchCallbacks=!1,!a.isTouched)return a.isMoved&&i.grabCursor&&t.setGrabCursor(!1),a.isMoved=!1,void(a.startMoving=!1);i.grabCursor&&a.isMoved&&a.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c=ee.now(),u=c-a.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap",d),u<300&&300<c-a.lastClickTime&&(a.clickTimeout&&clearTimeout(a.clickTimeout),a.clickTimeout=ee.nextTick(function(){t&&!t.destroyed&&t.emit("click",d)},300)),u<300&&c-a.lastClickTime<300&&(a.clickTimeout&&clearTimeout(a.clickTimeout),t.emit("doubleTap",d))),a.lastClickTime=ee.now(),ee.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!a.isTouched||!a.isMoved||!t.swipeDirection||0===s.diff||a.currentTranslate===a.startTranslate)return a.isTouched=!1,a.isMoved=!1,void(a.startMoving=!1);if(a.isTouched=!1,a.isMoved=!1,a.startMoving=!1,p=i.followFinger?r?t.translate:-t.translate:-a.currentTranslate,i.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(i.freeModeMomentum){if(1<a.velocities.length){var h=a.velocities.pop(),v=a.velocities.pop(),f=h.position-v.position,m=h.time-v.time;t.velocity=f/m,t.velocity/=2,Math.abs(t.velocity)<i.freeModeMinimumVelocity&&(t.velocity=0),(150<m||300<ee.now()-h.time)&&(t.velocity=0)}else t.velocity=0;t.velocity*=i.freeModeMomentumVelocityRatio,a.velocities.length=0;var g=1e3*i.freeModeMomentumRatio,b=t.velocity*g,w=t.translate+b;r&&(w=-w);var y,x,T=!1,E=20*Math.abs(t.velocity)*i.freeModeMomentumBounceRatio;if(w<t.maxTranslate())i.freeModeMomentumBounce?(w+t.maxTranslate()<-E&&(w=t.maxTranslate()-E),y=t.maxTranslate(),T=!0,a.allowMomentumBounce=!0):w=t.maxTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(w>t.minTranslate())i.freeModeMomentumBounce?(w-t.minTranslate()>E&&(w=t.minTranslate()+E),y=t.minTranslate(),T=!0,a.allowMomentumBounce=!0):w=t.minTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(i.freeModeSticky){for(var S,C=0;C<l.length;C+=1)if(l[C]>-w){S=C;break}w=-(w=Math.abs(l[S]-w)<Math.abs(l[S-1]-w)||"next"===t.swipeDirection?l[S]:l[S-1])}if(x&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity)g=r?Math.abs((-w-t.translate)/t.velocity):Math.abs((w-t.translate)/t.velocity);else if(i.freeModeSticky)return void t.slideToClosest();i.freeModeMomentumBounce&&T?(t.updateProgress(y),t.setTransition(g),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&a.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(i.speed),t.setTranslate(y),n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(w),t.setTransition(g),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(w),t.updateActiveIndex(),t.updateSlidesClasses()}else if(i.freeModeSticky)return void t.slideToClosest();(!i.freeModeMomentum||u>=i.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var M=0,z=t.slidesSizesGrid[0],P=0;P<o.length;P+=i.slidesPerGroup)void 0!==o[P+i.slidesPerGroup]?p>=o[P]&&p<o[P+i.slidesPerGroup]&&(z=o[(M=P)+i.slidesPerGroup]-o[P]):p>=o[P]&&(M=P,z=o[o.length-1]-o[o.length-2]);var k=(p-o[M])/z;if(u>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(k>=i.longSwipesRatio?t.slideTo(M+i.slidesPerGroup):t.slideTo(M)),"prev"===t.swipeDirection&&(k>1-i.longSwipesRatio?t.slideTo(M+i.slidesPerGroup):t.slideTo(M))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&t.slideTo(M+i.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(M)}}}.bind(e),e.onClick=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}.bind(e);var r="container"===t.touchEventsTarget?i:s,n=!!t.nested;if(te.touch||!te.pointerEvents&&!te.prefixedPointerEvents){if(te.touch){var o=!("touchstart"!==a.start||!te.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(a.start,e.onTouchStart,o),r.addEventListener(a.move,e.onTouchMove,te.passiveListener?{passive:!1,capture:n}:n),r.addEventListener(a.end,e.onTouchEnd,o)}(t.simulateTouch&&!g.ios&&!g.android||t.simulateTouch&&!te.touch&&g.ios)&&(r.addEventListener("mousedown",e.onTouchStart,!1),f.addEventListener("mousemove",e.onTouchMove,n),f.addEventListener("mouseup",e.onTouchEnd,!1))}else r.addEventListener(a.start,e.onTouchStart,!1),f.addEventListener(a.move,e.onTouchMove,n),f.addEventListener(a.end,e.onTouchEnd,!1);(t.preventClicks||t.preventClicksPropagation)&&r.addEventListener("click",e.onClick,!0),e.on(g.ios||g.android?"resize orientationchange observerUpdate":"resize observerUpdate",b,!0)},detachEvents:function(){var e=this,t=e.params,a=e.touchEvents,i=e.el,s=e.wrapperEl,r="container"===t.touchEventsTarget?i:s,n=!!t.nested;if(te.touch||!te.pointerEvents&&!te.prefixedPointerEvents){if(te.touch){var o=!("onTouchStart"!==a.start||!te.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(a.start,e.onTouchStart,o),r.removeEventListener(a.move,e.onTouchMove,n),r.removeEventListener(a.end,e.onTouchEnd,o)}(t.simulateTouch&&!g.ios&&!g.android||t.simulateTouch&&!te.touch&&g.ios)&&(r.removeEventListener("mousedown",e.onTouchStart,!1),f.removeEventListener("mousemove",e.onTouchMove,n),f.removeEventListener("mouseup",e.onTouchEnd,!1))}else r.removeEventListener(a.start,e.onTouchStart,!1),f.removeEventListener(a.move,e.onTouchMove,n),f.removeEventListener(a.end,e.onTouchEnd,!1);(t.preventClicks||t.preventClicksPropagation)&&r.removeEventListener("click",e.onClick,!0),e.off(g.ios||g.android?"resize orientationchange observerUpdate":"resize observerUpdate",b)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,a=e.initialized,i=e.loopedSlides;void 0===i&&(i=0);var s=e.params,r=s.breakpoints;if(r&&(!r||0!==Object.keys(r).length)){var n=e.getBreakpoint(r);if(n&&e.currentBreakpoint!==n){var o=n in r?r[n]:void 0;o&&["slidesPerView","spaceBetween","slidesPerGroup"].forEach(function(e){var t=o[e];void 0!==t&&(o[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")});var l=o||e.originalParams,d=l.direction&&l.direction!==s.direction,p=s.loop&&(l.slidesPerView!==s.slidesPerView||d);d&&a&&e.changeDirection(),ee.extend(e.params,l),ee.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=n,p&&a&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",l)}}},getBreakpoint:function(e){if(e){var t=!1,a=[];Object.keys(e).forEach(function(e){a.push(e)}),a.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var i=0;i<a.length;i+=1){var s=a[i];this.params.breakpointsInverse?s<=J.innerWidth&&(t=s):s>=J.innerWidth&&!t&&(t=s)}return t||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked;e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),t&&t!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,a=this.params,e=this.rtl,i=this.$el,s=[];s.push("initialized"),s.push(a.direction),a.freeMode&&s.push("free-mode"),te.flexbox||s.push("no-flexbox"),a.autoHeight&&s.push("autoheight"),e&&s.push("rtl"),1<a.slidesPerColumn&&s.push("multirow"),g.android&&s.push("android"),g.ios&&s.push("ios"),(I.isIE||I.isEdge)&&(te.pointerEvents||te.prefixedPointerEvents)&&s.push("wp8-"+a.direction),s.forEach(function(e){t.push(a.containerModifierClass+e)}),i.addClass(t.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,a,i,s,r){var n;function o(){r&&r()}e.complete&&s?o():t?((n=new J.Image).onload=o,n.onerror=o,i&&(n.sizes=i),a&&(n.srcset=a),t&&(n.src=t)):o()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var a=0;a<e.imagesToLoad.length;a+=1){var i=e.imagesToLoad[a];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},x={},T=function(u){function h(){for(var e,t,s,a=[],i=arguments.length;i--;)a[i]=arguments[i];1===a.length&&a[0].constructor&&a[0].constructor===Object?s=a[0]:(t=(e=a)[0],s=e[1]),s||(s={}),s=ee.extend({},s),t&&!s.el&&(s.el=t),u.call(this,s),Object.keys(y).forEach(function(t){Object.keys(y[t]).forEach(function(e){h.prototype[e]||(h.prototype[e]=y[t][e])})});var r=this;void 0===r.modules&&(r.modules={}),Object.keys(r.modules).forEach(function(e){var t=r.modules[e];if(t.params){var a=Object.keys(t.params)[0],i=t.params[a];if("object"!=typeof i||null===i)return;if(!(a in s&&"enabled"in i))return;!0===s[a]&&(s[a]={enabled:!0}),"object"!=typeof s[a]||"enabled"in s[a]||(s[a].enabled=!0),s[a]||(s[a]={enabled:!1})}});var n=ee.extend({},w);r.useModulesParams(n),r.params=ee.extend({},n,x,s),r.originalParams=ee.extend({},r.params),r.passedParams=ee.extend({},s);var o=(r.$=L)(r.params.el);if(t=o[0]){if(1<o.length){var l=[];return o.each(function(e,t){var a=ee.extend({},s,{el:t});l.push(new h(a))}),l}t.swiper=r,o.data("swiper",r);var d,p,c=o.children("."+r.params.wrapperClass);return ee.extend(r,{$el:o,el:t,$wrapperEl:c,wrapperEl:c[0],classNames:[],slides:L(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===r.params.direction},isVertical:function(){return"vertical"===r.params.direction},rtl:"rtl"===t.dir.toLowerCase()||"rtl"===o.css("direction"),rtlTranslate:"horizontal"===r.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===o.css("direction")),wrongRTL:"-webkit-box"===c.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:(d=["touchstart","touchmove","touchend"],p=["mousedown","mousemove","mouseup"],te.pointerEvents?p=["pointerdown","pointermove","pointerup"]:te.prefixedPointerEvents&&(p=["MSPointerDown","MSPointerMove","MSPointerUp"]),r.touchEventsTouch={start:d[0],move:d[1],end:d[2]},r.touchEventsDesktop={start:p[0],move:p[1],end:p[2]},te.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:ee.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.useModules(),r.params.init&&r.init(),r}}u&&(h.__proto__=u);var e={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return((h.prototype=Object.create(u&&u.prototype)).constructor=h).prototype.slidesPerViewDynamic=function(){var e=this,t=e.params,a=e.slides,i=e.slidesGrid,s=e.size,r=e.activeIndex,n=1;if(t.centeredSlides){for(var o,l=a[r].swiperSlideSize,d=r+1;d<a.length;d+=1)a[d]&&!o&&(n+=1,s<(l+=a[d].swiperSlideSize)&&(o=!0));for(var p=r-1;0<=p;p-=1)a[p]&&!o&&(n+=1,s<(l+=a[p].swiperSlideSize)&&(o=!0))}else for(var c=r+1;c<a.length;c+=1)i[c]-i[r]<s&&(n+=1);return n},h.prototype.update=function(){var a=this;if(a&&!a.destroyed){var e=a.snapGrid,t=a.params;t.breakpoints&&a.setBreakpoint(),a.updateSize(),a.updateSlides(),a.updateProgress(),a.updateSlidesClasses(),a.params.freeMode?(i(),a.params.autoHeight&&a.updateAutoHeight()):(("auto"===a.params.slidesPerView||1<a.params.slidesPerView)&&a.isEnd&&!a.params.centeredSlides?a.slideTo(a.slides.length-1,0,!1,!0):a.slideTo(a.activeIndex,0,!1,!0))||i(),t.watchOverflow&&e!==a.snapGrid&&a.checkOverflow(),a.emit("update")}function i(){var e=a.rtlTranslate?-1*a.translate:a.translate,t=Math.min(Math.max(e,a.maxTranslate()),a.minTranslate());a.setTranslate(t),a.updateActiveIndex(),a.updateSlidesClasses()}},h.prototype.changeDirection=function(a,e){void 0===e&&(e=!0);var t=this,i=t.params.direction;return a||(a="horizontal"===i?"vertical":"horizontal"),a===i||"horizontal"!==a&&"vertical"!==a||("vertical"===i&&(t.$el.removeClass(t.params.containerModifierClass+"vertical wp8-vertical").addClass(""+t.params.containerModifierClass+a),(I.isIE||I.isEdge)&&(te.pointerEvents||te.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a)),"horizontal"===i&&(t.$el.removeClass(t.params.containerModifierClass+"horizontal wp8-horizontal").addClass(""+t.params.containerModifierClass+a),(I.isIE||I.isEdge)&&(te.pointerEvents||te.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a)),t.params.direction=a,t.slides.each(function(e,t){"vertical"===a?t.style.width="":t.style.height=""}),t.emit("changeDirection"),e&&t.update()),t},h.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},h.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var a=this,i=a.params,s=a.$el,r=a.$wrapperEl,n=a.slides;return void 0===a.params||a.destroyed||(a.emit("beforeDestroy"),a.initialized=!1,a.detachEvents(),i.loop&&a.loopDestroy(),t&&(a.removeClasses(),s.removeAttr("style"),r.removeAttr("style"),n&&n.length&&n.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),a.emit("destroy"),Object.keys(a.eventsListeners).forEach(function(e){a.off(e)}),!1!==e&&(a.$el[0].swiper=null,a.$el.data("swiper",null),ee.deleteProps(a)),a.destroyed=!0),null},h.extendDefaults=function(e){ee.extend(x,e)},e.extendedDefaults.get=function(){return x},e.defaults.get=function(){return w},e.Class.get=function(){return u},e.$.get=function(){return L},Object.defineProperties(h,e),h}(n),E={name:"device",proto:{device:g},static:{device:g}},S={name:"support",proto:{support:te},static:{support:te}},C={name:"browser",proto:{browser:I},static:{browser:I}},M={name:"resize",create:function(){var e=this;ee.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){J.addEventListener("resize",this.resize.resizeHandler),J.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){J.removeEventListener("resize",this.resize.resizeHandler),J.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},z={func:J.MutationObserver||J.WebkitMutationObserver,attach:function(e,t){void 0===t&&(t={});var a=this,i=new z.func(function(e){if(1!==e.length){var t=function(){a.emit("observerUpdate",e[0])};J.requestAnimationFrame?J.requestAnimationFrame(t):J.setTimeout(t,0)}else a.emit("observerUpdate",e[0])});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),a.observer.observers.push(i)},init:function(){var e=this;if(te.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),a=0;a<t.length;a+=1)e.observer.attach(t[a]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},P={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){ee.extend(this,{observer:{init:z.init.bind(this),attach:z.attach.bind(this),destroy:z.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},k={update:function(e){var t=this,a=t.params,i=a.slidesPerView,s=a.slidesPerGroup,r=a.centeredSlides,n=t.params.virtual,o=n.addSlidesBefore,l=n.addSlidesAfter,d=t.virtual,p=d.from,c=d.to,u=d.slides,h=d.slidesGrid,v=d.renderSlide,f=d.offset;t.updateActiveIndex();var m,g,b,w=t.activeIndex||0;m=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",r?(g=Math.floor(i/2)+s+o,b=Math.floor(i/2)+s+l):(g=i+(s-1)+o,b=s+l);var y=Math.max((w||0)-b,0),x=Math.min((w||0)+g,u.length-1),T=(t.slidesGrid[y]||0)-(t.slidesGrid[0]||0);function E(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(ee.extend(t.virtual,{from:y,to:x,offset:T,slidesGrid:t.slidesGrid}),p===y&&c===x&&!e)return t.slidesGrid!==h&&T!==f&&t.slides.css(m,T+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:T,from:y,to:x,slides:function(){for(var e=[],t=y;t<=x;t+=1)e.push(u[t]);return e}()}),void E();var S=[],C=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var M=p;M<=c;M+=1)(M<y||x<M)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+M+'"]').remove();for(var z=0;z<u.length;z+=1)y<=z&&z<=x&&(void 0===c||e?C.push(z):(c<z&&C.push(z),z<p&&S.push(z)));C.forEach(function(e){t.$wrapperEl.append(v(u[e],e))}),S.sort(function(e,t){return t-e}).forEach(function(e){t.$wrapperEl.prepend(v(u[e],e))}),t.$wrapperEl.children(".swiper-slide").css(m,T+"px"),E()},renderSlide:function(e,t){var a=this,i=a.params.virtual;if(i.cache&&a.virtual.cache[t])return a.virtual.cache[t];var s=i.renderSlide?L(i.renderSlide.call(a,e,t)):L('<div class="'+a.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return s.attr("data-swiper-slide-index")||s.attr("data-swiper-slide-index",t),i.cache&&(a.virtual.cache[t]=s),s},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t=this,a=t.activeIndex,i=a+1,s=1;if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)e[r]&&t.virtual.slides.unshift(e[r]);i=a+e.length,s=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var n=t.virtual.cache,o={};Object.keys(n).forEach(function(e){o[parseInt(e,10)+s]=n[e]}),t.virtual.cache=o}t.virtual.update(!0),t.slideTo(i,0)},removeSlide:function(e){var t=this;if(null!=e){var a=t.activeIndex;if(Array.isArray(e))for(var i=e.length-1;0<=i;i-=1)t.virtual.slides.splice(e[i],1),t.params.virtual.cache&&delete t.virtual.cache[e[i]],e[i]<a&&(a-=1),a=Math.max(a,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<a&&(a-=1),a=Math.max(a,0);t.virtual.update(!0),t.slideTo(a,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},$={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var e=this;ee.extend(e,{virtual:{update:k.update.bind(e),appendSlide:k.appendSlide.bind(e),prependSlide:k.prependSlide.bind(e),removeSlide:k.removeSlide.bind(e),removeAllSlides:k.removeAllSlides.bind(e),renderSlide:k.renderSlide.bind(e),slides:e.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var e=this;if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},D={handle:function(e){var t=this,a=t.rtlTranslate,i=e;i.originalEvent&&(i=i.originalEvent);var s=i.keyCode||i.charCode;if(!t.allowSlideNext&&(t.isHorizontal()&&39===s||t.isVertical()&&40===s))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&37===s||t.isVertical()&&38===s))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||f.activeElement&&f.activeElement.nodeName&&("input"===f.activeElement.nodeName.toLowerCase()||"textarea"===f.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(37===s||39===s||38===s||40===s)){var r=!1;if(0<t.$el.parents("."+t.params.slideClass).length&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var n=J.innerWidth,o=J.innerHeight,l=t.$el.offset();a&&(l.left-=t.$el[0].scrollLeft);for(var d=[[l.left,l.top],[l.left+t.width,l.top],[l.left,l.top+t.height],[l.left+t.width,l.top+t.height]],p=0;p<d.length;p+=1){var c=d[p];0<=c[0]&&c[0]<=n&&0<=c[1]&&c[1]<=o&&(r=!0)}if(!r)return}t.isHorizontal()?(37!==s&&39!==s||(i.preventDefault?i.preventDefault():i.returnValue=!1),(39===s&&!a||37===s&&a)&&t.slideNext(),(37===s&&!a||39===s&&a)&&t.slidePrev()):(38!==s&&40!==s||(i.preventDefault?i.preventDefault():i.returnValue=!1),40===s&&t.slideNext(),38===s&&t.slidePrev()),t.emit("keyPress",s)}},enable:function(){this.keyboard.enabled||(L(f).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(L(f).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},O={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){ee.extend(this,{keyboard:{enabled:!1,enable:D.enable.bind(this),disable:D.disable.bind(this),handle:D.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var A={lastScrollTime:ee.now(),event:-1<J.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":function(){var e="onwheel",t=e in f;if(!t){var a=f.createElement("div");a.setAttribute(e,"return;"),t="function"==typeof a[e]}return!t&&f.implementation&&f.implementation.hasFeature&&!0!==f.implementation.hasFeature("","")&&(t=f.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel",normalize:function(e){var t=0,a=0,i=0,s=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=a,a=0),i=10*t,s=10*a,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||s)&&e.deltaMode&&(1===e.deltaMode?(i*=40,s*=40):(i*=800,s*=800)),i&&!t&&(t=i<1?-1:1),s&&!a&&(a=s<1?-1:1),{spinX:t,spinY:a,pixelX:i,pixelY:s}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,a=this,i=a.params.mousewheel;if(!a.mouseEntered&&!i.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var s=0,r=a.rtlTranslate?-1:1,n=A.normalize(t);if(i.forceToAxis)if(a.isHorizontal()){if(!(Math.abs(n.pixelX)>Math.abs(n.pixelY)))return!0;s=n.pixelX*r}else{if(!(Math.abs(n.pixelY)>Math.abs(n.pixelX)))return!0;s=n.pixelY}else s=Math.abs(n.pixelX)>Math.abs(n.pixelY)?-n.pixelX*r:-n.pixelY;if(0===s)return!0;if(i.invert&&(s=-s),a.params.freeMode){a.params.loop&&a.loopFix();var o=a.getTranslate()+s*i.sensitivity,l=a.isBeginning,d=a.isEnd;if(o>=a.minTranslate()&&(o=a.minTranslate()),o<=a.maxTranslate()&&(o=a.maxTranslate()),a.setTransition(0),a.setTranslate(o),a.updateProgress(),a.updateActiveIndex(),a.updateSlidesClasses(),(!l&&a.isBeginning||!d&&a.isEnd)&&a.updateSlidesClasses(),a.params.freeModeSticky&&(clearTimeout(a.mousewheel.timeout),a.mousewheel.timeout=ee.nextTick(function(){a.slideToClosest()},300)),a.emit("scroll",t),a.params.autoplay&&a.params.autoplayDisableOnInteraction&&a.autoplay.stop(),o===a.minTranslate()||o===a.maxTranslate())return!0}else{if(60<ee.now()-a.mousewheel.lastScrollTime)if(s<0)if(a.isEnd&&!a.params.loop||a.animating){if(i.releaseOnEdges)return!0}else a.slideNext(),a.emit("scroll",t);else if(a.isBeginning&&!a.params.loop||a.animating){if(i.releaseOnEdges)return!0}else a.slidePrev(),a.emit("scroll",t);a.mousewheel.lastScrollTime=(new J.Date).getTime()}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},enable:function(){var e=this;if(!A.event)return!1;if(e.mousewheel.enabled)return!1;var t=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(t=L(e.params.mousewheel.eventsTarged)),t.on("mouseenter",e.mousewheel.handleMouseEnter),t.on("mouseleave",e.mousewheel.handleMouseLeave),t.on(A.event,e.mousewheel.handle),e.mousewheel.enabled=!0},disable:function(){var e=this;if(!A.event)return!1;if(!e.mousewheel.enabled)return!1;var t=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(t=L(e.params.mousewheel.eventsTarged)),t.off(A.event,e.mousewheel.handle),!(e.mousewheel.enabled=!1)}},H={update:function(){var e=this,t=e.params.navigation;if(!e.params.loop){var a=e.navigation,i=a.$nextEl,s=a.$prevEl;s&&0<s.length&&(e.isBeginning?s.addClass(t.disabledClass):s.removeClass(t.disabledClass),s[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass)),i&&0<i.length&&(e.isEnd?i.addClass(t.disabledClass):i.removeClass(t.disabledClass),i[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,a=this,i=a.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=L(i.nextEl),a.params.uniqueNavElements&&"string"==typeof i.nextEl&&1<e.length&&1===a.$el.find(i.nextEl).length&&(e=a.$el.find(i.nextEl))),i.prevEl&&(t=L(i.prevEl),a.params.uniqueNavElements&&"string"==typeof i.prevEl&&1<t.length&&1===a.$el.find(i.prevEl).length&&(t=a.$el.find(i.prevEl))),e&&0<e.length&&e.on("click",a.navigation.onNextClick),t&&0<t.length&&t.on("click",a.navigation.onPrevClick),ee.extend(a.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this,t=e.navigation,a=t.$nextEl,i=t.$prevEl;a&&a.length&&(a.off("click",e.navigation.onNextClick),a.removeClass(e.params.navigation.disabledClass)),i&&i.length&&(i.off("click",e.navigation.onPrevClick),i.removeClass(e.params.navigation.disabledClass))}},N={update:function(){var e=this,t=e.rtl,s=e.params.pagination;if(s.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,n=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(r-=a-2*e.loopedSlides),n-1<r&&(r-=n),r<0&&"bullets"!==e.params.paginationType&&(r=n+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===s.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var o,l,d,p=e.pagination.bullets;if(s.dynamicBullets&&(e.pagination.bulletSize=p.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),i.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(s.dynamicMainBullets+4)+"px"),1<s.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>s.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=s.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),o=r-e.pagination.dynamicBulletIndex,d=((l=o+(Math.min(p.length,s.dynamicMainBullets)-1))+o)/2),p.removeClass(s.bulletActiveClass+" "+s.bulletActiveClass+"-next "+s.bulletActiveClass+"-next-next "+s.bulletActiveClass+"-prev "+s.bulletActiveClass+"-prev-prev "+s.bulletActiveClass+"-main"),1<i.length)p.each(function(e,t){var a=L(t),i=a.index();i===r&&a.addClass(s.bulletActiveClass),s.dynamicBullets&&(o<=i&&i<=l&&a.addClass(s.bulletActiveClass+"-main"),i===o&&a.prev().addClass(s.bulletActiveClass+"-prev").prev().addClass(s.bulletActiveClass+"-prev-prev"),i===l&&a.next().addClass(s.bulletActiveClass+"-next").next().addClass(s.bulletActiveClass+"-next-next"))});else if(p.eq(r).addClass(s.bulletActiveClass),s.dynamicBullets){for(var c=p.eq(o),u=p.eq(l),h=o;h<=l;h+=1)p.eq(h).addClass(s.bulletActiveClass+"-main");c.prev().addClass(s.bulletActiveClass+"-prev").prev().addClass(s.bulletActiveClass+"-prev-prev"),u.next().addClass(s.bulletActiveClass+"-next").next().addClass(s.bulletActiveClass+"-next-next")}if(s.dynamicBullets){var v=Math.min(p.length,s.dynamicMainBullets+4),f=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-d*e.pagination.bulletSize,m=t?"right":"left";p.css(e.isHorizontal()?m:"top",f+"px")}}if("fraction"===s.type&&(i.find("."+s.currentClass).text(s.formatFractionCurrent(r+1)),i.find("."+s.totalClass).text(s.formatFractionTotal(n))),"progressbar"===s.type){var g;g=s.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var b=(r+1)/n,w=1,y=1;"horizontal"===g?w=b:y=b,i.find("."+s.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+w+") scaleY("+y+")").transition(e.params.speed)}"custom"===s.type&&s.renderCustom?(i.html(s.renderCustom(e,r+1,n)),e.emit("paginationRender",e,i[0])):e.emit("paginationUpdate",e,i[0]),i[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](s.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,s="";if("bullets"===t.type){for(var r=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,n=0;n<r;n+=1)t.renderBullet?s+=t.renderBullet.call(e,n,t.bulletClass):s+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(s),e.pagination.bullets=i.find("."+t.bulletClass)}"fraction"===t.type&&(s=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(s)),"progressbar"===t.type&&(s=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(s)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var a=this,e=a.params.pagination;if(e.el){var t=L(e.el);0!==t.length&&(a.params.uniqueNavElements&&"string"==typeof e.el&&1<t.length&&1===a.$el.find(e.el).length&&(t=a.$el.find(e.el)),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(t.addClass(""+e.modifierClass+e.type+"-dynamic"),a.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click","."+e.bulletClass,function(e){e.preventDefault();var t=L(this).index()*a.params.slidesPerGroup;a.params.loop&&(t+=a.loopedSlides),a.slideTo(t)}),ee.extend(a.pagination,{$el:t,el:t[0]}))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.pagination.$el;a.removeClass(t.hiddenClass),a.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&a.off("click","."+t.bulletClass)}}},G={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,a=e.rtlTranslate,i=e.progress,s=t.dragSize,r=t.trackSize,n=t.$dragEl,o=t.$el,l=e.params.scrollbar,d=s,p=(r-s)*i;a?0<(p=-p)?(d=s-p,p=0):r<-p+s&&(d=r+p):p<0?(d=s+p,p=0):r<p+s&&(d=r-p),e.isHorizontal()?(te.transforms3d?n.transform("translate3d("+p+"px, 0, 0)"):n.transform("translateX("+p+"px)"),n[0].style.width=d+"px"):(te.transforms3d?n.transform("translate3d(0px, "+p+"px, 0)"):n.transform("translateY("+p+"px)"),n[0].style.height=d+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),o[0].style.opacity=1,e.scrollbar.timeout=setTimeout(function(){o[0].style.opacity=0,o.transition(400)},1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,a=t.$dragEl,i=t.$el;a[0].style.width="",a[0].style.height="";var s,r=e.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,n=e.size/e.virtualSize,o=n*(r/e.size);s="auto"===e.params.scrollbar.dragSize?r*n:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?a[0].style.width=s+"px":a[0].style.height=s+"px",i[0].style.display=1<=n?"none":"",e.params.scrollbar.hide&&(i[0].style.opacity=0),ee.extend(t,{trackSize:r,divider:n,moveDivider:o,dragSize:s}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},setDragPosition:function(e){var t,a=this,i=a.scrollbar,s=a.rtlTranslate,r=i.$el,n=i.dragSize,o=i.trackSize;t=((a.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-r.offset()[a.isHorizontal()?"left":"top"]-n/2)/(o-n),t=Math.max(Math.min(t,1),0),s&&(t=1-t);var l=a.minTranslate()+(a.maxTranslate()-a.minTranslate())*t;a.updateProgress(l),a.setTranslate(l),a.updateActiveIndex(),a.updateSlidesClasses()},onDragStart:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar,s=t.$wrapperEl,r=i.$el,n=i.$dragEl;t.scrollbar.isTouched=!0,e.preventDefault(),e.stopPropagation(),s.transition(100),n.transition(100),i.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),r.transition(0),a.hide&&r.css("opacity",1),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,a=this.$wrapperEl,i=t.$el,s=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),a.transition(0),i.transition(0),s.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,a.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=ee.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),t.emit("scrollbarDragEnd",e),a.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.touchEventsTouch,i=e.touchEventsDesktop,s=e.params,r=t.$el[0],n=!(!te.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},o=!(!te.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};te.touch?(r.addEventListener(a.start,e.scrollbar.onDragStart,n),r.addEventListener(a.move,e.scrollbar.onDragMove,n),r.addEventListener(a.end,e.scrollbar.onDragEnd,o)):(r.addEventListener(i.start,e.scrollbar.onDragStart,n),f.addEventListener(i.move,e.scrollbar.onDragMove,n),f.addEventListener(i.end,e.scrollbar.onDragEnd,o))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.touchEventsTouch,i=e.touchEventsDesktop,s=e.params,r=t.$el[0],n=!(!te.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},o=!(!te.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};te.touch?(r.removeEventListener(a.start,e.scrollbar.onDragStart,n),r.removeEventListener(a.move,e.scrollbar.onDragMove,n),r.removeEventListener(a.end,e.scrollbar.onDragEnd,o)):(r.removeEventListener(i.start,e.scrollbar.onDragStart,n),f.removeEventListener(i.move,e.scrollbar.onDragMove,n),f.removeEventListener(i.end,e.scrollbar.onDragEnd,o))}},init:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.$el,i=e.params.scrollbar,s=L(i.el);e.params.uniqueNavElements&&"string"==typeof i.el&&1<s.length&&1===a.find(i.el).length&&(s=a.find(i.el));var r=s.find("."+e.params.scrollbar.dragClass);0===r.length&&(r=L('<div class="'+e.params.scrollbar.dragClass+'"></div>'),s.append(r)),ee.extend(t,{$el:s,el:s[0],$dragEl:r,dragEl:r[0]}),i.draggable&&t.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},B={setTransform:function(e,t){var a=this.rtl,i=L(e),s=a?-1:1,r=i.attr("data-swiper-parallax")||"0",n=i.attr("data-swiper-parallax-x"),o=i.attr("data-swiper-parallax-y"),l=i.attr("data-swiper-parallax-scale"),d=i.attr("data-swiper-parallax-opacity");if(n||o?(n=n||"0",o=o||"0"):this.isHorizontal()?(n=r,o="0"):(o=r,n="0"),n=0<=n.indexOf("%")?parseInt(n,10)*t*s+"%":n*t*s+"px",o=0<=o.indexOf("%")?parseInt(o,10)*t+"%":o*t+"px",null!=d){var p=d-(d-1)*(1-Math.abs(t));i[0].style.opacity=p}if(null==l)i.transform("translate3d("+n+", "+o+", 0px)");else{var c=l-(l-1)*(1-Math.abs(t));i.transform("translate3d("+n+", "+o+", 0px) scale("+c+")")}},setTranslate:function(){var i=this,e=i.$el,t=i.slides,s=i.progress,r=i.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){i.parallax.setTransform(t,s)}),t.each(function(e,t){var a=t.progress;1<i.params.slidesPerGroup&&"auto"!==i.params.slidesPerView&&(a+=Math.ceil(e/2)-s*(r.length-1)),a=Math.min(Math.max(a,-1),1),L(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){i.parallax.setTransform(t,a)})})},setTransition:function(s){void 0===s&&(s=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){var a=L(t),i=parseInt(a.attr("data-swiper-parallax-duration"),10)||s;0===s&&(i=0),a.transition(i)})}},X={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,i=e.targetTouches[1].pageX,s=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(i-t,2)+Math.pow(s-a,2))},onGestureStart:function(e){var t=this,a=t.params.zoom,i=t.zoom,s=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!te.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,s.scaleStart=X.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=L(e.target).closest(".swiper-slide"),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas"),s.$imageWrapEl=s.$imageEl.parent("."+a.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||a.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!te.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.fakeGestureMoved=!0,i.scaleMove=X.getDistanceBetweenTouches(e)}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=te.gestures?e.scale*a.currentScale:i.scaleMove/i.scaleStart*a.currentScale,a.scale>i.maxRatio&&(a.scale=i.maxRatio-1+Math.pow(a.scale-i.maxRatio+1,.5)),a.scale<t.minRatio&&(a.scale=t.minRatio+1-Math.pow(t.minRatio-a.scale+1,.5)),i.$imageEl.transform("translate3d(0,0,0) scale("+a.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!te.gestures){if(!a.fakeGestureTouched||!a.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!g.android)return;a.fakeGestureTouched=!1,a.fakeGestureMoved=!1}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=Math.max(Math.min(a.scale,i.maxRatio),t.minRatio),i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale&&(i.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,a=t.gesture,i=t.image;a.$imageEl&&0!==a.$imageEl.length&&(i.isTouched||(g.android&&e.preventDefault(),i.isTouched=!0,i.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,a=t.zoom,i=a.gesture,s=a.image,r=a.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(t.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=ee.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=ee.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),t.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var n=s.width*a.scale,o=s.height*a.scale;if(!(n<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-n/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!a.isScaling){if(t.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=s.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=s.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(s.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(s.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(s.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(s.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=s.touchesCurrent.x,r.prevPositionY=s.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,a=e.image,i=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!a.isTouched||!a.isMoved)return a.isTouched=!1,void(a.isMoved=!1);a.isTouched=!1,a.isMoved=!1;var s=300,r=300,n=i.x*s,o=a.currentX+n,l=i.y*r,d=a.currentY+l;0!==i.x&&(s=Math.abs((o-a.currentX)/i.x)),0!==i.y&&(r=Math.abs((d-a.currentY)/i.y));var p=Math.max(s,r);a.currentX=o,a.currentY=d;var c=a.width*e.scale,u=a.height*e.scale;a.minX=Math.min(t.slideWidth/2-c/2,0),a.maxX=-a.minX,a.minY=Math.min(t.slideHeight/2-u/2,0),a.maxY=-a.minY,a.currentX=Math.max(Math.min(a.currentX,a.maxX),a.minX),a.currentY=Math.max(Math.min(a.currentY,a.maxY),a.minY),t.$imageWrapEl.transition(p).transform("translate3d("+a.currentX+"px, "+a.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,a,i,s,r,n,o,l,d,p,c,u,h,v,f,m,g=this,b=g.zoom,w=g.params.zoom,y=b.gesture,x=b.image;(y.$slideEl||(y.$slideEl=g.clickedSlide?L(g.clickedSlide):g.slides.eq(g.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas"),y.$imageWrapEl=y.$imageEl.parent("."+w.containerClass)),y.$imageEl&&0!==y.$imageEl.length)&&(y.$slideEl.addClass(""+w.zoomedSlideClass),void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,a="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,a=x.touchesStart.y),b.scale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(f=y.$slideEl[0].offsetWidth,m=y.$slideEl[0].offsetHeight,i=y.$slideEl.offset().left+f/2-t,s=y.$slideEl.offset().top+m/2-a,o=y.$imageEl[0].offsetWidth,l=y.$imageEl[0].offsetHeight,d=o*b.scale,p=l*b.scale,h=-(c=Math.min(f/2-d/2,0)),v=-(u=Math.min(m/2-p/2,0)),(r=i*b.scale)<c&&(r=c),h<r&&(r=h),(n=s*b.scale)<u&&(n=u),v<n&&(n=v)):n=r=0,y.$imageWrapEl.transition(300).transform("translate3d("+r+"px, "+n+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var e=this,t=e.zoom,a=e.params.zoom,i=t.gesture;i.$slideEl||(i.$slideEl=e.clickedSlide?L(e.clickedSlide):e.slides.eq(e.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+a.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+a.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this,t=e.zoom;if(!t.enabled){t.enabled=!0;var a=!("touchstart"!==e.touchEvents.start||!te.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};te.gestures?(e.$wrapperEl.on("gesturestart",".swiper-slide",t.onGestureStart,a),e.$wrapperEl.on("gesturechange",".swiper-slide",t.onGestureChange,a),e.$wrapperEl.on("gestureend",".swiper-slide",t.onGestureEnd,a)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,".swiper-slide",t.onGestureStart,a),e.$wrapperEl.on(e.touchEvents.move,".swiper-slide",t.onGestureChange,a),e.$wrapperEl.on(e.touchEvents.end,".swiper-slide",t.onGestureEnd,a)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){e.zoom.enabled=!1;var a=!("touchstart"!==e.touchEvents.start||!te.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};te.gestures?(e.$wrapperEl.off("gesturestart",".swiper-slide",t.onGestureStart,a),e.$wrapperEl.off("gesturechange",".swiper-slide",t.onGestureChange,a),e.$wrapperEl.off("gestureend",".swiper-slide",t.onGestureEnd,a)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,".swiper-slide",t.onGestureStart,a),e.$wrapperEl.off(e.touchEvents.move,".swiper-slide",t.onGestureChange,a),e.$wrapperEl.off(e.touchEvents.end,".swiper-slide",t.onGestureEnd,a)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}}},Y={loadInSlide:function(e,l){void 0===l&&(l=!0);var d=this,p=d.params.lazy;if(void 0!==e&&0!==d.slides.length){var c=d.virtual&&d.params.virtual.enabled?d.$wrapperEl.children("."+d.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):d.slides.eq(e),t=c.find("."+p.elementClass+":not(."+p.loadedClass+"):not(."+p.loadingClass+")");!c.hasClass(p.elementClass)||c.hasClass(p.loadedClass)||c.hasClass(p.loadingClass)||(t=t.add(c[0])),0!==t.length&&t.each(function(e,t){var i=L(t);i.addClass(p.loadingClass);var s=i.attr("data-background"),r=i.attr("data-src"),n=i.attr("data-srcset"),o=i.attr("data-sizes");d.loadImage(i[0],r||s,n,o,!1,function(){if(null!=d&&d&&(!d||d.params)&&!d.destroyed){if(s?(i.css("background-image",'url("'+s+'")'),i.removeAttr("data-background")):(n&&(i.attr("srcset",n),i.removeAttr("data-srcset")),o&&(i.attr("sizes",o),i.removeAttr("data-sizes")),r&&(i.attr("src",r),i.removeAttr("data-src"))),i.addClass(p.loadedClass).removeClass(p.loadingClass),c.find("."+p.preloaderClass).remove(),d.params.loop&&l){var e=c.attr("data-swiper-slide-index");if(c.hasClass(d.params.slideDuplicateClass)){var t=d.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+d.params.slideDuplicateClass+")");d.lazy.loadInSlide(t.index(),!1)}else{var a=d.$wrapperEl.children("."+d.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');d.lazy.loadInSlide(a.index(),!1)}}d.emit("lazyImageReady",c[0],i[0])}}),d.emit("lazyImageLoad",c[0],i[0])})}},load:function(){var i=this,t=i.$wrapperEl,a=i.params,s=i.slides,e=i.activeIndex,r=i.virtual&&a.virtual.enabled,n=a.lazy,o=a.slidesPerView;function l(e){if(r){if(t.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(s[e])return!0;return!1}function d(e){return r?L(e).attr("data-swiper-slide-index"):L(e).index()}if("auto"===o&&(o=0),i.lazy.initialImageLoaded||(i.lazy.initialImageLoaded=!0),i.params.watchSlidesVisibility)t.children("."+a.slideVisibleClass).each(function(e,t){var a=r?L(t).attr("data-swiper-slide-index"):L(t).index();i.lazy.loadInSlide(a)});else if(1<o)for(var p=e;p<e+o;p+=1)l(p)&&i.lazy.loadInSlide(p);else i.lazy.loadInSlide(e);if(n.loadPrevNext)if(1<o||n.loadPrevNextAmount&&1<n.loadPrevNextAmount){for(var c=n.loadPrevNextAmount,u=o,h=Math.min(e+u+Math.max(c,u),s.length),v=Math.max(e-Math.max(u,c),0),f=e+o;f<h;f+=1)l(f)&&i.lazy.loadInSlide(f);for(var m=v;m<e;m+=1)l(m)&&i.lazy.loadInSlide(m)}else{var g=t.children("."+a.slideNextClass);0<g.length&&i.lazy.loadInSlide(d(g));var b=t.children("."+a.slidePrevClass);0<b.length&&i.lazy.loadInSlide(d(b))}}},V={LinearSpline:function(e,t){var a,i,s,r,n,o=function(e,t){for(i=-1,a=e.length;1<a-i;)e[s=a+i>>1]<=t?i=s:a=s;return a};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=o(this.x,e),r=n-1,(e-this.x[r])*(this.y[n]-this.y[r])/(this.x[n]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new V.LinearSpline(t.slidesGrid,e.slidesGrid):new V.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var a,i,s=this,r=s.controller.control;function n(e){var t=s.rtlTranslate?-s.translate:s.translate;"slide"===s.params.controller.by&&(s.controller.getInterpolateFunction(e),i=-s.controller.spline.interpolate(-t)),i&&"container"!==s.params.controller.by||(a=(e.maxTranslate()-e.minTranslate())/(s.maxTranslate()-s.minTranslate()),i=(t-s.minTranslate())*a+e.minTranslate()),s.params.controller.inverse&&(i=e.maxTranslate()-i),e.updateProgress(i),e.setTranslate(i,s),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof T&&n(r[o]);else r instanceof T&&t!==r&&n(r)},setTransition:function(t,e){var a,i=this,s=i.controller.control;function r(e){e.setTransition(t,i),0!==t&&(e.transitionStart(),e.params.autoHeight&&ee.nextTick(function(){e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(function(){s&&(e.params.loop&&"slide"===i.params.controller.by&&e.loopFix(),e.transitionEnd())}))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==e&&s[a]instanceof T&&r(s[a]);else s instanceof T&&e!==s&&r(s)}},F={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this,a=t.params.a11y;if(13===e.keyCode){var i=L(e.target);t.navigation&&t.navigation.$nextEl&&i.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(a.lastSlideMessage):t.a11y.notify(a.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&i.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(a.firstSlideMessage):t.a11y.notify(a.prevSlideMessage)),t.pagination&&i.is("."+t.params.pagination.bulletClass)&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop){var t=e.navigation,a=t.$nextEl,i=t.$prevEl;i&&0<i.length&&(e.isBeginning?e.a11y.disableEl(i):e.a11y.enableEl(i)),a&&0<a.length&&(e.isEnd?e.a11y.disableEl(a):e.a11y.enableEl(a))}},updatePagination:function(){var i=this,s=i.params.a11y;i.pagination&&i.params.pagination.clickable&&i.pagination.bullets&&i.pagination.bullets.length&&i.pagination.bullets.each(function(e,t){var a=L(t);i.a11y.makeElFocusable(a),i.a11y.addElRole(a,"button"),i.a11y.addElLabel(a,s.paginationBulletMessage.replace(/{{index}}/,a.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,a,i=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(a=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,i.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),a&&(e.a11y.makeElFocusable(a),e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,i.prevSlideMessage),a.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,a=this;a.a11y.liveRegion&&0<a.a11y.liveRegion.length&&a.a11y.liveRegion.remove(),a.navigation&&a.navigation.$nextEl&&(e=a.navigation.$nextEl),a.navigation&&a.navigation.$prevEl&&(t=a.navigation.$prevEl),e&&e.off("keydown",a.a11y.onEnterKey),t&&t.off("keydown",a.a11y.onEnterKey),a.pagination&&a.params.pagination.clickable&&a.pagination.bullets&&a.pagination.bullets.length&&a.pagination.$el.off("keydown","."+a.params.pagination.bulletClass,a.a11y.onEnterKey)}},R={init:function(){var e=this;if(e.params.history){if(!J.history||!J.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var t=e.history;t.initialized=!0,t.paths=R.getPathValues(),(t.paths.key||t.paths.value)&&(t.scrollToSlide(0,t.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||J.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||J.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=R.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=J.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory:function(e,t){if(this.history.initialized&&this.params.history.enabled){var a=this.slides.eq(t),i=R.slugify(a.attr("data-history"));J.location.pathname.includes(e)||(i=e+"/"+i);var s=J.history.state;s&&s.value===i||(this.params.history.replaceState?J.history.replaceState({value:i},null,i):J.history.pushState({value:i},null,i))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,a){var i=this;if(t)for(var s=0,r=i.slides.length;s<r;s+=1){var n=i.slides.eq(s);if(R.slugify(n.attr("data-history"))===t&&!n.hasClass(i.params.slideDuplicateClass)){var o=n.index();i.slideTo(o,e,a)}}else i.slideTo(0,e,a)}},q={onHashCange:function(){var e=this,t=f.location.hash.replace("#","");if(t!==e.slides.eq(e.activeIndex).attr("data-hash")){var a=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===a)return;e.slideTo(a)}},setHash:function(){var e=this;if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&J.history&&J.history.replaceState)J.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||"");else{var t=e.slides.eq(e.activeIndex),a=t.attr("data-hash")||t.attr("data-history");f.location.hash=a||""}},init:function(){var e=this;if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var t=f.location.hash.replace("#","");if(t)for(var a=0,i=e.slides.length;a<i;a+=1){var s=e.slides.eq(a);if((s.attr("data-hash")||s.attr("data-history"))===t&&!s.hasClass(e.params.slideDuplicateClass)){var r=s.index();e.slideTo(r,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&L(J).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&L(J).off("hashchange",this.hashNavigation.onHashCange)}},W={run:function(){var e=this,t=e.slides.eq(e.activeIndex),a=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(a=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),e.autoplay.timeout=ee.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},a)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}},j={setTranslate:function(){for(var e=this,t=e.slides,a=0;a<t.length;a+=1){var i=e.slides.eq(a),s=-i[0].swiperSlideOffset;e.params.virtualTranslate||(s-=e.translate);var r=0;e.isHorizontal()||(r=s,s=0);var n=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:n}).transform("translate3d("+s+"px, "+r+"px, 0px)")}},setTransition:function(e){var a=this,t=a.slides,i=a.$wrapperEl;if(t.transition(e),a.params.virtualTranslate&&0!==e){var s=!1;t.transitionEnd(function(){if(!s&&a&&!a.destroyed){s=!0,a.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)i.trigger(e[t])}})}}},U={setTranslate:function(){var e,t=this,a=t.$el,i=t.$wrapperEl,s=t.slides,r=t.width,n=t.height,o=t.rtlTranslate,l=t.size,d=t.params.cubeEffect,p=t.isHorizontal(),c=t.virtual&&t.params.virtual.enabled,u=0;d.shadow&&(p?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=L('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=a.find(".swiper-cube-shadow")).length&&(e=L('<div class="swiper-cube-shadow"></div>'),a.append(e)));for(var h=0;h<s.length;h+=1){var v=s.eq(h),f=h;c&&(f=parseInt(v.attr("data-swiper-slide-index"),10));var m=90*f,g=Math.floor(m/360);o&&(m=-m,g=Math.floor(-m/360));var b=Math.max(Math.min(v[0].progress,1),-1),w=0,y=0,x=0;f%4==0?(w=4*-g*l,x=0):(f-1)%4==0?(w=0,x=4*-g*l):(f-2)%4==0?(w=l+4*g*l,x=l):(f-3)%4==0&&(w=-l,x=3*l+4*l*g),o&&(w=-w),p||(y=w,w=0);var T="rotateX("+(p?0:-m)+"deg) rotateY("+(p?m:0)+"deg) translate3d("+w+"px, "+y+"px, "+x+"px)";if(b<=1&&-1<b&&(u=90*f+90*b,o&&(u=90*-f-90*b)),v.transform(T),d.slideShadows){var E=p?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),S=p?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===E.length&&(E=L('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),v.append(E)),0===S.length&&(S=L('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),v.append(S)),E.length&&(E[0].style.opacity=Math.max(-b,0)),S.length&&(S[0].style.opacity=Math.max(b,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow)if(p)e.transform("translate3d(0px, "+(r/2+d.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var C=Math.abs(u)-90*Math.floor(Math.abs(u)/90),M=1.5-(Math.sin(2*C*Math.PI/360)/2+Math.cos(2*C*Math.PI/360)/2),z=d.shadowScale,P=d.shadowScale/M,k=d.shadowOffset;e.transform("scale3d("+z+", 1, "+P+") translate3d(0px, "+(n/2+k)+"px, "+-n/2/P+"px) rotateX(-90deg)")}var $=I.isSafari||I.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+$+"px) rotateX("+(t.isHorizontal()?0:u)+"deg) rotateY("+(t.isHorizontal()?-u:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},K={setTranslate:function(){for(var e=this,t=e.slides,a=e.rtlTranslate,i=0;i<t.length;i+=1){var s=t.eq(i),r=s[0].progress;e.params.flipEffect.limitRotation&&(r=Math.max(Math.min(s[0].progress,1),-1));var n=-180*r,o=0,l=-s[0].swiperSlideOffset,d=0;if(e.isHorizontal()?a&&(n=-n):(d=l,o=-n,n=l=0),s[0].style.zIndex=-Math.abs(Math.round(r))+t.length,e.params.flipEffect.slideShadows){var p=e.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),c=e.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===p.length&&(p=L('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),s.append(p)),0===c.length&&(c=L('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),s.append(c)),p.length&&(p[0].style.opacity=Math.max(-r,0)),c.length&&(c[0].style.opacity=Math.max(r,0))}s.transform("translate3d("+l+"px, "+d+"px, 0px) rotateX("+o+"deg) rotateY("+n+"deg)")}},setTransition:function(e){var a=this,t=a.slides,i=a.activeIndex,s=a.$wrapperEl;if(t.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),a.params.virtualTranslate&&0!==e){var r=!1;t.eq(i).transitionEnd(function(){if(!r&&a&&!a.destroyed){r=!0,a.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)s.trigger(e[t])}})}}},_={setTranslate:function(){for(var e=this,t=e.width,a=e.height,i=e.slides,s=e.$wrapperEl,r=e.slidesSizesGrid,n=e.params.coverflowEffect,o=e.isHorizontal(),l=e.translate,d=o?t/2-l:a/2-l,p=o?n.rotate:-n.rotate,c=n.depth,u=0,h=i.length;u<h;u+=1){var v=i.eq(u),f=r[u],m=(d-v[0].swiperSlideOffset-f/2)/f*n.modifier,g=o?p*m:0,b=o?0:p*m,w=-c*Math.abs(m),y=o?0:n.stretch*m,x=o?n.stretch*m:0;Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(w)<.001&&(w=0),Math.abs(g)<.001&&(g=0),Math.abs(b)<.001&&(b=0);var T="translate3d("+x+"px,"+y+"px,"+w+"px)  rotateX("+b+"deg) rotateY("+g+"deg)";if(v.transform(T),v[0].style.zIndex=1-Math.abs(Math.round(m)),n.slideShadows){var E=o?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),S=o?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===E.length&&(E=L('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),v.append(E)),0===S.length&&(S=L('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),v.append(S)),E.length&&(E[0].style.opacity=0<m?m:0),S.length&&(S[0].style.opacity=0<-m?-m:0)}}(te.pointerEvents||te.prefixedPointerEvents)&&(s[0].style.perspectiveOrigin=d+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},Z={init:function(){var e=this,t=e.params.thumbs,a=e.constructor;t.swiper instanceof a?(e.thumbs.swiper=t.swiper,ee.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),ee.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):ee.isObject(t.swiper)&&(e.thumbs.swiper=new a(ee.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var a=t.clickedIndex,i=t.clickedSlide;if(!(i&&L(i).hasClass(e.params.thumbs.slideThumbActiveClass)||null==a)){var s;if(s=t.params.loop?parseInt(L(t.clickedSlide).attr("data-swiper-slide-index"),10):a,e.params.loop){var r=e.activeIndex;e.slides.eq(r).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,r=e.activeIndex);var n=e.slides.eq(r).prevAll('[data-swiper-slide-index="'+s+'"]').eq(0).index(),o=e.slides.eq(r).nextAll('[data-swiper-slide-index="'+s+'"]').eq(0).index();s=void 0===n?o:void 0===o?n:o-r<r-n?o:n}e.slideTo(s)}}},update:function(e){var t=this,a=t.thumbs.swiper;if(a){var i="auto"===a.params.slidesPerView?a.slidesPerViewDynamic():a.params.slidesPerView;if(t.realIndex!==a.realIndex){var s,r=a.activeIndex;if(a.params.loop){a.slides.eq(r).hasClass(a.params.slideDuplicateClass)&&(a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft,r=a.activeIndex);var n=a.slides.eq(r).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),o=a.slides.eq(r).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();s=void 0===n?o:void 0===o?n:o-r==r-n?r:o-r<r-n?o:n}else s=t.realIndex;a.visibleSlidesIndexes.indexOf(s)<0&&(a.params.centeredSlides?s=r<s?s-Math.floor(i/2)+1:s+Math.floor(i/2)-1:r<s&&(s=s-i+1),a.slideTo(s,e?0:void 0))}var l=1,d=t.params.thumbs.slideThumbActiveClass;if(1<t.params.slidesPerView&&!t.params.centeredSlides&&(l=t.params.slidesPerView),a.slides.removeClass(d),a.params.loop)for(var p=0;p<l;p+=1)a.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+p)+'"]').addClass(d);else for(var c=0;c<l;c+=1)a.slides.eq(t.realIndex+c).addClass(d)}}},Q=[E,S,C,M,P,$,O,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var e=this;ee.extend(e,{mousewheel:{enabled:!1,enable:A.enable.bind(e),disable:A.disable.bind(e),handle:A.handle.bind(e),handleMouseEnter:A.handleMouseEnter.bind(e),handleMouseLeave:A.handleMouseLeave.bind(e),lastScrollTime:ee.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var e=this;ee.extend(e,{navigation:{init:H.init.bind(e),update:H.update.bind(e),destroy:H.destroy.bind(e),onNextClick:H.onNextClick.bind(e),onPrevClick:H.onPrevClick.bind(e)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,a=this,i=a.navigation,s=i.$nextEl,r=i.$prevEl;!a.params.navigation.hideOnClick||L(e.target).is(r)||L(e.target).is(s)||(s?t=s.hasClass(a.params.navigation.hiddenClass):r&&(t=r.hasClass(a.params.navigation.hiddenClass)),!0===t?a.emit("navigationShow",a):a.emit("navigationHide",a),s&&s.toggleClass(a.params.navigation.hiddenClass),r&&r.toggleClass(a.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;ee.extend(e,{pagination:{init:N.init.bind(e),render:N.render.bind(e),update:N.update.bind(e),destroy:N.destroy.bind(e),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){var t=this;t.params.pagination.el&&t.params.pagination.hideOnClick&&0<t.pagination.$el.length&&!L(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow",t):t.emit("paginationHide",t),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;ee.extend(e,{scrollbar:{init:G.init.bind(e),destroy:G.destroy.bind(e),updateSize:G.updateSize.bind(e),setTranslate:G.setTranslate.bind(e),setTransition:G.setTransition.bind(e),enableDraggable:G.enableDraggable.bind(e),disableDraggable:G.disableDraggable.bind(e),setDragPosition:G.setDragPosition.bind(e),onDragStart:G.onDragStart.bind(e),onDragMove:G.onDragMove.bind(e),onDragEnd:G.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){ee.extend(this,{parallax:{setTransform:B.setTransform.bind(this),setTranslate:B.setTranslate.bind(this),setTransition:B.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var i=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(e){t[e]=X[e].bind(i)}),ee.extend(i,{zoom:t});var s=1;Object.defineProperty(i.zoom,"scale",{get:function(){return s},set:function(e){if(s!==e){var t=i.zoom.gesture.$imageEl?i.zoom.gesture.$imageEl[0]:void 0,a=i.zoom.gesture.$slideEl?i.zoom.gesture.$slideEl[0]:void 0;i.emit("zoomChange",e,t,a)}s=e}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){ee.extend(this,{lazy:{initialImageLoaded:!1,load:Y.load.bind(this),loadInSlide:Y.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var e=this;e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var e=this;ee.extend(e,{controller:{control:e.params.controller.control,getInterpolateFunction:V.getInterpolateFunction.bind(e),setTranslate:V.setTranslate.bind(e),setTransition:V.setTransition.bind(e)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;ee.extend(t,{a11y:{liveRegion:L('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(F).forEach(function(e){t.a11y[e]=F[e].bind(t)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var e=this;ee.extend(e,{history:{init:R.init.bind(e),setHistory:R.setHistory.bind(e),setHistoryPopState:R.setHistoryPopState.bind(e),scrollToSlide:R.scrollToSlide.bind(e),destroy:R.destroy.bind(e)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var e=this;ee.extend(e,{hashNavigation:{initialized:!1,init:q.init.bind(e),destroy:q.destroy.bind(e),setHash:q.setHash.bind(e),onHashCange:q.onHashCange.bind(e)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;ee.extend(t,{autoplay:{running:!1,paused:!1,run:W.run.bind(t),start:W.start.bind(t),stop:W.stop.bind(t),pause:W.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){ee.extend(this,{fadeEffect:{setTranslate:j.setTranslate.bind(this),setTransition:j.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){ee.extend(this,{cubeEffect:{setTranslate:U.setTranslate.bind(this),setTransition:U.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){ee.extend(this,{flipEffect:{setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){ee.extend(this,{coverflowEffect:{setTranslate:_.setTranslate.bind(this),setTransition:_.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){ee.extend(this,{thumbs:{swiper:null,init:Z.init.bind(this),update:Z.update.bind(this),onThumbClick:Z.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===T.use&&(T.use=T.Class.use,T.installModule=T.Class.installModule),T.use(Q),T});
//# sourceMappingURL=swiper.min.js.map
/*! Select2 4.0.6-rc.1 | https://github.com/select2/select2/blob/master/LICENSE.md */!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split("/"),p=t.map,q=p&&p["*"]||{};if(a){for(a=a.split("/"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,"")),"."===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if("."===(m=a[k]))a.splice(k,1),k-=1;else if(".."===m){if(0===k||1===k&&".."===a[2]||".."===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}if((o||q)&&p){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),o)for(l=o.length;l>0;l-=1)if((e=p[o.slice(0,l).join("/")])&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){var d=w.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(b,d.concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(a){if(e(s,a)){var c=s[a];delete s[a],u[a]=!0,n.apply(b,c)}if(!e(r,a)&&!e(u,a))throw new Error("No "+a);return r[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},q={require:function(a){return g(a)},exports:function(a){var b=r[a];return void 0!==b?b:r[a]={}},module:function(a){return{id:a,uri:"",exports:r[a],config:m(a)}}},n=function(a,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||a,t=l(f),"undefined"===x||"function"===x){for(c=!c.length&&d.length?["require","exports","module"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),"require"===(k=n.f))w[o]=q.require(a);else if("exports"===k)w[o]=q.exports(a),v=!0;else if("module"===k)h=w[o]=q.module(a);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(a+" missing "+k);n.p.load(n.n,g(f,!0),i(k),{}),w[o]=r[k]}m=d?d.apply(r[a],w):void 0,a&&(h&&h.exports!==b&&h.exports!==r[a]?r[a]=h.exports:m===b&&v||(r[a]=m))}else a&&(r[a]=d)},a=c=o=function(a,c,d,e,f){if("string"==typeof a)return q[a]?q[a](c):j(p(a,l(c)).f);if(!a.splice){if(t=a,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?n(b,a,c,d):setTimeout(function(){n(b,a,c,d)},4),o},o.config=function(a){return o(a)},a._defined=r,d=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(r,a)||e(s,a)||(s[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){"function"==typeof b[d]&&("constructor"!==d&&c.push(d))}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){return Array.prototype.unshift.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),c[0]._type=a,a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;c<a;c++){b+=Math.floor(36*Math.random()).toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return(e!==f||"hidden"!==f&&"visible"!==f)&&("scroll"===e||"scroll"===f||(d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth))},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c.__cache={};var e=0;return c.GetUniqueElementId=function(a){var b=a.getAttribute("data-select2-id");return null==b&&(a.id?(b=a.id,a.setAttribute("data-select2-id",b)):(a.setAttribute("data-select2-id",++e),b=e.toString())),b},c.StoreData=function(a,b,d){var e=c.GetUniqueElementId(a);c.__cache[e]||(c.__cache[e]={}),c.__cache[e][b]=d},c.GetData=function(b,d){var e=c.GetUniqueElementId(b);return d?c.__cache[e]&&null!=c.__cache[e][d]?c.__cache[e][d]:a(b).data(d):c.__cache[e]},c.RemoveData=function(a){var b=c.GetUniqueElementId(a);null!=c.__cache[b]&&delete c.__cache[b]},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),d[0].className+=" select2-results__message",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){b.find(".select2-results").append(a)},c.prototype.sort=function(a){return this.options.get("sorter")(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(".select2-results__option[aria-selected]"),b=a.filter("[aria-selected=true]");b.length>0?b.first().trigger("mouseenter"):a.first().trigger("mouseenter"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var c=this;this.data.current(function(d){var e=a.map(d,function(a){return a.id.toString()});c.$results.find(".select2-results__option[aria-selected]").each(function(){var c=a(this),d=b.GetData(this,"data"),f=""+d.id;null!=d.element&&d.element.selected||null==d.element&&a.inArray(f,e)>-1?c.attr("aria-selected","true"):c.attr("aria-selected","false")})})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(c){var d=document.createElement("li");d.className="select2-results__option";var e={role:"treeitem","aria-selected":"false"};c.disabled&&(delete e["aria-selected"],e["aria-disabled"]="true"),null==c.id&&delete e["aria-selected"],null!=c._resultId&&(d.id=c._resultId),c.title&&(d.title=c.title),c.children&&(e.role="group",e["aria-label"]=c.text,delete e["aria-selected"]);for(var f in e){var g=e[f];d.setAttribute(f,g)}if(c.children){var h=a(d),i=document.createElement("strong");i.className="select2-results__group";a(i);this.template(c,i);for(var j=[],k=0;k<c.children.length;k++){var l=c.children[k],m=this.option(l);j.push(m)}var n=a("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});n.append(j),h.append(i),h.append(n)}else this.template(c,d);return b.StoreData(d,"data",c),d},c.prototype.bind=function(c,d){var e=this,f=c.id+"-results";this.$results.attr("id",f),c.on("results:all",function(a){e.clear(),e.append(a.data),c.isOpen()&&(e.setClasses(),e.highlightFirstItem())}),c.on("results:append",function(a){e.append(a.data),c.isOpen()&&e.setClasses()}),c.on("query",function(a){e.hideMessages(),e.showLoading(a)}),c.on("select",function(){c.isOpen()&&(e.setClasses(),e.highlightFirstItem())}),c.on("unselect",function(){c.isOpen()&&(e.setClasses(),e.highlightFirstItem())}),c.on("open",function(){e.$results.attr("aria-expanded","true"),e.$results.attr("aria-hidden","false"),e.setClasses(),e.ensureHighlightVisible()}),c.on("close",function(){e.$results.attr("aria-expanded","false"),e.$results.attr("aria-hidden","true"),e.$results.removeAttr("aria-activedescendant")}),c.on("results:toggle",function(){var a=e.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),c.on("results:select",function(){var a=e.getHighlightedResults();if(0!==a.length){var c=b.GetData(a[0],"data");"true"==a.attr("aria-selected")?e.trigger("close",{}):e.trigger("select",{data:c})}}),c.on("results:previous",function(){var a=e.getHighlightedResults(),b=e.$results.find("[aria-selected]"),c=b.index(a);if(!(c<=0)){var d=c-1;0===a.length&&(d=0);var f=b.eq(d);f.trigger("mouseenter");var g=e.$results.offset().top,h=f.offset().top,i=e.$results.scrollTop()+(h-g);0===d?e.$results.scrollTop(0):h-g<0&&e.$results.scrollTop(i)}}),c.on("results:next",function(){var a=e.getHighlightedResults(),b=e.$results.find("[aria-selected]"),c=b.index(a),d=c+1;if(!(d>=b.length)){var f=b.eq(d);f.trigger("mouseenter");var g=e.$results.offset().top+e.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=e.$results.scrollTop()+h-g;0===d?e.$results.scrollTop(0):h>g&&e.$results.scrollTop(i)}}),c.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")}),c.on("results:message",function(a){e.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=e.$results.scrollTop(),c=e.$results.get(0).scrollHeight-b+a.deltaY,d=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&c<=e.$results.height();d?(e.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(e.$results.scrollTop(e.$results.get(0).scrollHeight-e.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(c){var d=a(this),f=b.GetData(this,"data");if("true"===d.attr("aria-selected"))return void(e.options.get("multiple")?e.trigger("unselect",{originalEvent:c,data:f}):e.trigger("close",{}));e.trigger("select",{originalEvent:c,data:f})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(c){var d=b.GetData(this,"data");e.getHighlightedResults().removeClass("select2-results__option--highlighted"),e.trigger("results:focus",{data:d,element:a(this)})})},c.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find("[aria-selected]"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),c<=2?this.$results.scrollTop(0):(g>this.$results.outerHeight()||g<0)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b,c);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var c=a('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=b.GetData(this.$element[0],"old-tabindex")?this._tabindex=b.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),c.attr("title",this.$element.attr("title")),c.attr("tabindex",this._tabindex),this.$selection=c,c},d.prototype.bind=function(a,b){var d=this,e=(a.id,a.id+"-results");this.container=a,this.$selection.on("focus",function(a){d.trigger("focus",a)}),this.$selection.on("blur",function(a){d._handleBlur(a)}),this.$selection.on("keydown",function(a){d.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()}),a.on("results:focus",function(a){d.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){d.update(a.data)}),a.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",e),d._attachCloseHandler(a)}),a.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.focus(),window.setTimeout(function(){d.$selection.focus()},0),d._detachCloseHandler(a)}),a.on("enable",function(){d.$selection.attr("tabindex",d._tabindex)}),a.on("disable",function(){d.$selection.attr("tabindex","-1")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger("blur",b)},1)},d.prototype._attachCloseHandler=function(c){a(document.body).on("mousedown.select2."+c.id,function(c){var d=a(c.target),e=d.closest(".select2");a(".select2.select2-container--open").each(function(){a(this),this!=e[0]&&b.GetData(this,"element").select2("close")})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){b.find(".selection").append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(a){throw new Error("The `update` method must be defined in child classes.")},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c,d){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},e.prototype.bind=function(a,b){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",d).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",d),this.$selection.on("mousedown",function(a){1===a.which&&c.trigger("toggle",{originalEvent:a})}),this.$selection.on("focus",function(a){}),this.$selection.on("blur",function(a){}),a.on("focus",function(b){a.isOpen()||c.$selection.focus()})},e.prototype.clear=function(){var a=this.$selection.find(".select2-selection__rendered");a.empty(),a.removeAttr("title")},e.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},e.prototype.selectionContainer=function(){return a("<span></span>")},e.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.$selection.find(".select2-selection__rendered"),d=this.display(b,c);c.empty().append(d),c.attr("title",b.title||b.text)},e}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(a,b){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(b,e){var f=this;d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){f.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(b){if(!f.options.get("disabled")){var d=a(this),e=d.parent(),g=c.GetData(e[0],"data");f.trigger("unselect",{originalEvent:b,data:g})}})},d.prototype.clear=function(){var a=this.$selection.find(".select2-selection__rendered");a.empty(),a.removeAttr("title")},d.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},d.prototype.selectionContainer=function(){return a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.attr("title",e.title||e.text),c.StoreData(f[0],"data",e),b.push(f)}var h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),b.define("select2/selection/placeholder",["../utils"],function(a){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id;if(b.length>1||c)return a.call(this,b);this.clear();var d=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(d)},b}),b.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(a,b,c){function d(){}return d.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)}),b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},d.prototype._handleClear=function(a,b){if(!this.options.get("disabled")){var d=this.$selection.find(".select2-selection__clear");if(0!==d.length){b.stopPropagation();var e=c.GetData(d[0],"data"),f=this.$element.val();this.$element.val(this.placeholder.id);var g={data:e};if(this.trigger("clear",g),g.prevented)return void this.$element.val(f);for(var h=0;h<e.length;h++)if(g={data:e[h]},this.trigger("unselect",g),g.prevented)return void this.$element.val(f);this.$element.trigger("change"),this.trigger("toggle",{})}}},d.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||c.which!=b.DELETE&&c.which!=b.BACKSPACE||this._handleClear(c)},d.prototype.update=function(b,d){if(b.call(this,d),!(this.$selection.find(".select2-selection__placeholder").length>0||0===d.length)){var e=a('<span class="select2-selection__clear">&times;</span>');c.StoreData(e[0],"data",d),this.$selection.find(".select2-selection__rendered").prepend(e)}},d}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=c,this.$search=c.find("input");var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,d,e){var f=this;a.call(this,d,e),d.on("open",function(){f.$search.trigger("focus")}),d.on("close",function(){f.$search.val(""),f.$search.removeAttr("aria-activedescendant"),f.$search.trigger("focus")}),d.on("enable",function(){f.$search.prop("disabled",!1),f._transferTabIndex()}),d.on("disable",function(){f.$search.prop("disabled",!0)}),d.on("focus",function(a){f.$search.trigger("focus")}),d.on("results:focus",function(a){f.$search.attr("aria-activedescendant",a.id)}),this.$selection.on("focusin",".select2-search--inline",function(a){f.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){f._handleBlur(a)}),this.$selection.on("keydown",".select2-search--inline",function(a){if(a.stopPropagation(),f.trigger("keypress",a),f._keyUpPrevented=a.isDefaultPrevented(),a.which===c.BACKSPACE&&""===f.$search.val()){var d=f.$searchContainer.prev(".select2-selection__choice");if(d.length>0){var e=b.GetData(d[0],"data");f.searchRemoveChoice(e),a.preventDefault()}}});var g=document.documentMode,h=g&&g<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(a){if(h)return void f.$selection.off("input.search input.searchcheck");f.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(a){if(h&&"input"===a.type)return void f.$selection.off("input.search input.searchcheck");var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&f.handleSearch(a)})},d.prototype._transferTabIndex=function(a){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;if(this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),c){this.$element.find("[data-select2-tag]").length?this.$element.focus():this.$search.focus()}},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.$search.val(b.text),this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";if(""!==this.$search.attr("placeholder"))a=this.$selection.find(".select2-selection__rendered").innerWidth();else{a=.75*(this.$search.val().length+1)+"em"}this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],g=["opening","closing","selecting","unselecting","clearing"];b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}}),b.define("select2/data/base",["../utils"],function(a){function b(a,c){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(a){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(a,b){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(a,b){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return d+=a.generateChars(4),null!=c.id?d+="-"+c.id.toString():d+="-"+a.generateChars(4),d},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple")){if(a.selected=!1,c(a.element).is("option"))return a.element.selected=!1,void this.$element.trigger("change");this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")})}},d.prototype.bind=function(a,b){var c=this;this.container=a,a.on("select",function(a){c.select(a.data)}),a.on("unselect",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){b.RemoveData(this)})},d.prototype.query=function(a,b){var d=[],e=this;this.$element.children().each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var d;a.children?(d=document.createElement("optgroup"),d.label=a.text):(d=document.createElement("option"),void 0!==d.textContent?d.textContent=a.text:d.innerText=a.text),void 0!==a.id&&(d.value=a.id),a.disabled&&(d.disabled=!0),a.selected&&(d.selected=!0),a.title&&(d.title=a.title);var e=c(d),f=this._normalizeItem(a);return f.element=d,b.StoreData(d,"data",f),e},d.prototype.item=function(a){var d={};if(null!=(d=b.GetData(a[0],"data")))return d;if(a.is("option"))d={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){d={text:a.prop("label"),children:[],title:a.prop("title")};for(var e=a.children("option"),f=[],g=0;g<e.length;g++){var h=c(e[g]),i=this.item(h);f.push(i)}d.children=f}return d=this._normalizeItem(d),d.element=a[0],b.StoreData(a[0],"data",d),d},d.prototype._normalizeItem=function(a){a!==Object(a)&&(a={id:a,text:a}),a=c.extend({},{text:""},a);var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){return this.options.get("matcher")(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find("option"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);b.appendMany(o,p)}h.push(o)}}return h},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){"status"in d&&(0===d.status||"0"===d.status)||e.trigger("results:message",{message:"errorLoading"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url.call(this.$element,a)),"function"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");void 0!==f&&(this.createTag=f);var g=d.get("insertTag");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0);if((i.text||"").toUpperCase()===(b.term||"").toUpperCase()||j)return!f&&(a.data=g,void c(a))}if(f)return!0;var k=e.createTag(b);if(null!=k){var l=e.option(k);l.attr("data-select2-tag",!0),e.addOptions([l]),e.insertTag(g,k)}a.results=g,c(a)}var e=this;if(this._removeOldTags(),null==b.term||null!=b.page)return void a.call(this,b,c);a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(b){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(b,c,d){function e(b){var c=g._normalizeItem(b);if(!g.$element.find("option").filter(function(){return a(this).val()===c.id}).length){var d=g.option(c);d.attr("data-select2-tag",!0),g._removeOldTags(),g.addOptions([d])}f(c)}function f(a){g.trigger("select",{data:a})}var g=this;c.term=c.term||"";var h=this.tokenizer(c,this.options,e);h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);null!=m?(e(m),g=g.substr(h+1)||"",h=0):h++}else h++}return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||"",b.term.length<this.minimumInputLength)return void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||"",this.maximumInputLength>0&&b.term.length>this.maximumInputLength)return void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;if(d.maximumSelectionLength>0&&f>=d.maximumSelectionLength)return void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}});a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b,b},c.prototype.bind=function(){},c.prototype.position=function(a,b){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a,b){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(b){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val(""),e.$search.blur()}),c.on("focus",function(){c.isOpen()||e.$search.focus()}),c.on("results:all",function(a){if(null==a.query.term||""===a.query.term){e.showSearch(a)?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide")}})},c.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger("query",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(a,b){return!0},c}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){e.$results.offset().top+e.$results.outerHeight(!1)+50>=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1)&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get("dropdownParent")||a(document.body),b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(a){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f="scroll.select2."+d.id,g="resize.select2."+d.id,h="orientationchange.select2."+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){b.StoreData(this,"select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(c){var d=b.GetData(this,"select2-scroll-position");a(this).scrollTop(d.y)}),a(window).on(f+" "+g+" "+h,function(a){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e="scroll.select2."+d.id,f="resize.select2."+d.id,g="orientationchange.select2."+d.id;this.$container.parents().filter(b.hasScroll).off(e),a(window).off(e+" "+f+" "+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=this.$container.offset();f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-n.top-h.height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.position="relative",a.width="auto"),this.$dropdown.css(a)},c.prototype._showDropdown=function(a){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return!(a(c.data.results)<this.minimumResultsForSearch)&&b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",["../utils"],function(a){function b(){}return b.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(a){d._handleSelectOnClose(a)})},b.prototype._handleSelectOnClose=function(b,c){if(c&&null!=c.originalSelect2Event){var d=c.originalSelect2Event;if("select"===d._type||"unselect"===d._type)return}var e=this.getHighlightedResults();if(!(e.length<1)){var f=a.GetData(e[0],"data");null!=f.element&&f.element.selected||null==f.element&&f.selected||this.trigger("select",{data:f})}},b}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close",{originalEvent:c,originalSelect2Event:b})},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){return"Please enter "+(a.minimum-a.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}return D.prototype.apply=function(l){if(l=a.extend(!0,{},this.defaults,l),null==l.dataAdapter){if(null!=l.ajax?l.dataAdapter=o:null!=l.data?l.dataAdapter=n:l.dataAdapter=m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),null==l.tokenSeparators&&null==l.tokenizer||(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+"compat/dropdownCss");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.multiple?l.selectionAdapter=e:l.selectionAdapter=d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+"compat/containerCss");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if("string"==typeof l.language)if(l.language.indexOf("-")>0){var H=l.language.split("-"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push("en");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(a){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(a){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var O=k.loadPath(this.defaults.amdLanguageBase+"en"),P=new k(l.language);P.extend(O),l.translations=P}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){null==c(d,e.children[g])&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var h=b(e.text).toUpperCase(),i=b(d.term).toUpperCase();return h.indexOf(i)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(!0,this.defaults,f)},new D}),b.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"];null==this.options.multiple&&(this.options.multiple=a.prop("multiple")),null==this.options.disabled&&(this.options.disabled=a.prop("disabled")),null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang"))),null==this.options.dir&&(a.prop("dir")?this.options.dir=a.prop("dir"):a.closest("[dir]").prop("dir")?this.options.dir=a.closest("[dir]").prop("dir"):this.options.dir="ltr"),a.prop("disabled",this.options.disabled),a.prop("multiple",this.options.multiple),d.GetData(a[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),d.StoreData(a[0],"data",d.GetData(a[0],"select2Tags")),d.StoreData(a[0],"tags",!0)),d.GetData(a[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",d.GetData(a[0],"ajaxUrl")),d.StoreData(a[0],"ajax-Url",d.GetData(a[0],"ajaxUrl")));var e={};e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,d.GetData(a[0])):d.GetData(a[0]);var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,d){null!=c.GetData(a[0],"select2")&&c.GetData(a[0],"select2").destroy(),this.$element=a,this.id=this._generateId(a),d=d||{},this.options=new b(d,a),e.__super__.constructor.call(this);var f=a.attr("tabindex")||0;c.StoreData(a[0],"old-tabindex",f),a.attr("tabindex","-1");var g=this.options.get("dataAdapter");this.dataAdapter=new g(a,this.options);var h=this.render();this._placeContainer(h);var i=this.options.get("selectionAdapter");this.selection=new i(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,h);var j=this.options.get("dropdownAdapter");this.dropdown=new j(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,h);var k=this.options.get("resultsAdapter");this.results=new k(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){l.trigger("selection:update",{data:a})}),a.addClass("select2-hidden-accessible"),a.attr("aria-hidden","true"),this._syncAttributes(),c.StoreData(a[0],"select2",this),a.data("select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b="";return b=null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4),b=b.replace(/(:|\.|\[|\]|,)/g,""),b="select2-"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return e<=0?"auto":e+"px"}if("style"==b){var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;h<i;h+=1){var j=g[h].replace(/\s/g,""),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this.$element.on("focus.select2",function(a){b.trigger("focus",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",b._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",b._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle","focus"];this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("focus",function(a){b.focus(a)}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open",{}),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger("results:select",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle",{}),b.preventDefault()):c===d.UP?(a.trigger("results:previous",{}),b.preventDefault()):c===d.DOWN&&(a.trigger("results:next",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||"OPTION"===a.target.nodeName||"OPTGROUP"===a.target.nodeName){if(b)if(b.addedNodes&&b.addedNodes.length>0)for(var e=0;e<b.addedNodes.length;e++){var f=b.addedNodes[e];f.selected&&(c=!0)}else b.removedNodes&&b.removedNodes.length>0&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger("selection:update",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger("query",{})},e.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},e.prototype.focus=function(a){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=a&&0!==a.length||(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",c.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),c.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),c.StoreData(b[0],"element",this.$element),b},e}),b.define("jquery-mousewheel",["jquery"],function(a){return a}),b.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(a,b,c,d,e){if(null==a.fn.select2){var f=["open","close","destroy"];a.fn.select2=function(b){if("object"==typeof(b=b||{}))return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if("string"==typeof b){var d,g=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=e.GetData(this,"select2");null==a&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2."),d=a[b].apply(a,g)}),a.inArray(b,f)>-1?this:d}throw new Error("Invalid arguments for Select2: "+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c});
/*! lightgallery - v1.6.12 - 2019-02-19
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2019 Sachin N; Licensed GPLv3 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(){"use strict";function b(b,d){if(this.el=b,this.$el=a(b),this.s=a.extend({},c,d),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=a(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(a(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}var c={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};b.prototype.init=function(){var b=this;b.s.preload>b.$items.length&&(b.s.preload=b.$items.length);var c=window.location.hash;c.indexOf("lg="+this.s.galleryId)>0&&(b.index=parseInt(c.split("&slide=")[1],10),a("body").addClass("lg-from-hash"),a("body").hasClass("lg-on")||(setTimeout(function(){b.build(b.index)}),a("body").addClass("lg-on"))),b.s.dynamic?(b.$el.trigger("onBeforeOpen.lg"),b.index=b.s.index||0,a("body").hasClass("lg-on")||setTimeout(function(){b.build(b.index),a("body").addClass("lg-on")})):b.$items.on("click.lgcustom",function(c){try{c.preventDefault(),c.preventDefault()}catch(a){c.returnValue=!1}b.$el.trigger("onBeforeOpen.lg"),b.index=b.s.index||b.$items.index(this),a("body").hasClass("lg-on")||(b.build(b.index),a("body").addClass("lg-on"))})},b.prototype.build=function(b){var c=this;c.structure(),a.each(a.fn.lightGallery.modules,function(b){c.modules[b]=new a.fn.lightGallery.modules[b](c.el)}),c.slide(b,!1,!1,!1),c.s.keyPress&&c.keyPress(),c.$items.length>1?(c.arrow(),setTimeout(function(){c.enableDrag(),c.enableSwipe()},50),c.s.mousewheel&&c.mousewheel()):c.$slide.on("click.lg",function(){c.$el.trigger("onSlideClick.lg")}),c.counter(),c.closeGallery(),c.$el.trigger("onAfterOpen.lg"),c.$outer.on("mousemove.lg click.lg touchstart.lg",function(){c.$outer.removeClass("lg-hide-items"),clearTimeout(c.hideBartimeout),c.hideBartimeout=setTimeout(function(){c.$outer.addClass("lg-hide-items")},c.s.hideBarsDelay)}),c.$outer.trigger("mousemove.lg")},b.prototype.structure=function(){var b,c="",d="",e=0,f="",g=this;for(a("body").append('<div class="lg-backdrop"></div>'),a(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),e=0;e<this.$items.length;e++)c+='<div class="lg-item"></div>';if(this.s.controls&&this.$items.length>1&&(d='<div class="lg-actions"><button class="lg-prev lg-icon">'+this.s.prevHtml+'</button><button class="lg-next lg-icon">'+this.s.nextHtml+"</button></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(f='<div class="lg-sub-html"></div>'),b='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+c+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+d+f+"</div></div>",a("body").append(b),this.$outer=a(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),g.setTop(),a(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){g.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&this.$items.length>1&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var h=this.$outer.find(".lg-inner");h.css("transition-timing-function",this.s.cssEasing),h.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){a(".lg-backdrop").addClass("in")}),setTimeout(function(){g.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=a(window).scrollTop()},b.prototype.setTop=function(){if("100%"!==this.s.height){var b=a(window).height(),c=(b-parseInt(this.s.height,10))/2,d=this.$outer.find(".lg");b>=parseInt(this.s.height,10)?d.css("top",c+"px"):d.css("top","0px")}},b.prototype.doCss=function(){return!!function(){var a=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],b=document.documentElement,c=0;for(c=0;c<a.length;c++)if(a[c]in b.style)return!0}()},b.prototype.isVideo=function(a,b){var c;if(c=this.s.dynamic?this.s.dynamicEl[b].html:this.$items.eq(b).attr("data-html"),!a)return c?{html5:!0}:(console.error("lightGallery :- data-src is not pvovided on slide item "+(b+1)+". Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html"),!1);var d=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),e=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),f=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),g=a.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return d?{youtube:d}:e?{vimeo:e}:f?{dailymotion:f}:g?{vk:g}:void 0},b.prototype.counter=function(){this.s.counter&&a(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},b.prototype.addHtml=function(b){var c,d,e=null;if(this.s.dynamic?this.s.dynamicEl[b].subHtmlUrl?c=this.s.dynamicEl[b].subHtmlUrl:e=this.s.dynamicEl[b].subHtml:(d=this.$items.eq(b),d.attr("data-sub-html-url")?c=d.attr("data-sub-html-url"):(e=d.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!e&&(e=d.attr("title")||d.find("img").first().attr("alt")))),!c)if(void 0!==e&&null!==e){var f=e.substring(0,1);"."!==f&&"#"!==f||(e=this.s.subHtmlSelectorRelative&&!this.s.dynamic?d.find(e).html():a(e).html())}else e="";".lg-sub-html"===this.s.appendSubHtmlTo?c?this.$outer.find(this.s.appendSubHtmlTo).load(c):this.$outer.find(this.s.appendSubHtmlTo).html(e):c?this.$slide.eq(b).load(c):this.$slide.eq(b).append(e),void 0!==e&&null!==e&&(""===e?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[b])},b.prototype.preload=function(a){var b=1,c=1;for(b=1;b<=this.s.preload&&!(b>=this.$items.length-a);b++)this.loadContent(a+b,!1,0);for(c=1;c<=this.s.preload&&!(a-c<0);c++)this.loadContent(a-c,!1,0)},b.prototype.loadContent=function(b,c,d){var e,f,g,h,i,j,k=this,l=!1,m=function(b){for(var c=[],d=[],e=0;e<b.length;e++){var g=b[e].split(" ");""===g[0]&&g.splice(0,1),d.push(g[0]),c.push(g[1])}for(var h=a(window).width(),i=0;i<c.length;i++)if(parseInt(c[i],10)>h){f=d[i];break}};if(k.s.dynamic){if(k.s.dynamicEl[b].poster&&(l=!0,g=k.s.dynamicEl[b].poster),j=k.s.dynamicEl[b].html,f=k.s.dynamicEl[b].src,k.s.dynamicEl[b].responsive){m(k.s.dynamicEl[b].responsive.split(","))}h=k.s.dynamicEl[b].srcset,i=k.s.dynamicEl[b].sizes}else{if(k.$items.eq(b).attr("data-poster")&&(l=!0,g=k.$items.eq(b).attr("data-poster")),j=k.$items.eq(b).attr("data-html"),f=k.$items.eq(b).attr("href")||k.$items.eq(b).attr("data-src"),k.$items.eq(b).attr("data-responsive")){m(k.$items.eq(b).attr("data-responsive").split(","))}h=k.$items.eq(b).attr("data-srcset"),i=k.$items.eq(b).attr("data-sizes")}var n=!1;k.s.dynamic?k.s.dynamicEl[b].iframe&&(n=!0):"true"===k.$items.eq(b).attr("data-iframe")&&(n=!0);var o=k.isVideo(f,b);if(!k.$slide.eq(b).hasClass("lg-loaded")){if(n)k.$slide.eq(b).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+k.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+f+'"  allowfullscreen="true"></iframe></div></div>');else if(l){var p="";p=o&&o.youtube?"lg-has-youtube":o&&o.vimeo?"lg-has-vimeo":"lg-has-html5",k.$slide.eq(b).prepend('<div class="lg-video-cont '+p+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+g+'" /></div></div>')}else o?(k.$slide.eq(b).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),k.$el.trigger("hasVideo.lg",[b,f,j])):k.$slide.eq(b).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+f+'" /></div>');if(k.$el.trigger("onAferAppendSlide.lg",[b]),e=k.$slide.eq(b).find(".lg-object"),i&&e.attr("sizes",i),h){e.attr("srcset",h);try{picturefill({elements:[e[0]]})}catch(a){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&k.addHtml(b),k.$slide.eq(b).addClass("lg-loaded")}k.$slide.eq(b).find(".lg-object").on("load.lg error.lg",function(){var c=0;d&&!a("body").hasClass("lg-from-hash")&&(c=d),setTimeout(function(){k.$slide.eq(b).addClass("lg-complete"),k.$el.trigger("onSlideItemLoad.lg",[b,d||0])},c)}),o&&o.html5&&!l&&k.$slide.eq(b).addClass("lg-complete"),!0===c&&(k.$slide.eq(b).hasClass("lg-complete")?k.preload(b):k.$slide.eq(b).find(".lg-object").on("load.lg error.lg",function(){k.preload(b)}))},b.prototype.slide=function(b,c,d,e){var f=this.$outer.find(".lg-current").index(),g=this;if(!g.lGalleryOn||f!==b){var h=this.$slide.length,i=g.lGalleryOn?this.s.speed:0;if(!g.lgBusy){if(this.s.download){var j;j=g.s.dynamic?!1!==g.s.dynamicEl[b].downloadUrl&&(g.s.dynamicEl[b].downloadUrl||g.s.dynamicEl[b].src):"false"!==g.$items.eq(b).attr("data-download-url")&&(g.$items.eq(b).attr("data-download-url")||g.$items.eq(b).attr("href")||g.$items.eq(b).attr("data-src")),j?(a("#lg-download").attr("href",j),g.$outer.removeClass("lg-hide-download")):g.$outer.addClass("lg-hide-download")}if(this.$el.trigger("onBeforeSlide.lg",[f,b,c,d]),g.lgBusy=!0,clearTimeout(g.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){g.addHtml(b)},i),this.arrowDisable(b),e||(b<f?e="prev":b>f&&(e="next")),c){this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");var k,l;h>2?(k=b-1,l=b+1,0===b&&f===h-1?(l=0,k=h-1):b===h-1&&0===f&&(l=0,k=h-1)):(k=0,l=1),"prev"===e?g.$slide.eq(l).addClass("lg-next-slide"):g.$slide.eq(k).addClass("lg-prev-slide"),g.$slide.eq(b).addClass("lg-current")}else g.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===e?(this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(f).addClass("lg-next-slide")):(this.$slide.eq(b).addClass("lg-next-slide"),this.$slide.eq(f).addClass("lg-prev-slide")),setTimeout(function(){g.$slide.removeClass("lg-current"),g.$slide.eq(b).addClass("lg-current"),g.$outer.removeClass("lg-no-trans")},50);g.lGalleryOn?(setTimeout(function(){g.loadContent(b,!0,0)},this.s.speed+50),setTimeout(function(){g.lgBusy=!1,g.$el.trigger("onAfterSlide.lg",[f,b,c,d])},this.s.speed)):(g.loadContent(b,!0,g.s.backdropDuration),g.lgBusy=!1,g.$el.trigger("onAfterSlide.lg",[f,b,c,d])),g.lGalleryOn=!0,this.s.counter&&a("#lg-counter-current").text(b+1)}g.index=b}},b.prototype.goToNextSlide=function(a){var b=this,c=b.s.loop;a&&b.$slide.length<3&&(c=!1),b.lgBusy||(b.index+1<b.$slide.length?(b.index++,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1,"next")):c?(b.index=0,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1,"next")):b.s.slideEndAnimatoin&&!a&&(b.$outer.addClass("lg-right-end"),setTimeout(function(){b.$outer.removeClass("lg-right-end")},400)))},b.prototype.goToPrevSlide=function(a){var b=this,c=b.s.loop;a&&b.$slide.length<3&&(c=!1),b.lgBusy||(b.index>0?(b.index--,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1,"prev")):c?(b.index=b.$items.length-1,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1,"prev")):b.s.slideEndAnimatoin&&!a&&(b.$outer.addClass("lg-left-end"),setTimeout(function(){b.$outer.removeClass("lg-left-end")},400)))},b.prototype.keyPress=function(){var b=this;this.$items.length>1&&a(window).on("keyup.lg",function(a){b.$items.length>1&&(37===a.keyCode&&(a.preventDefault(),b.goToPrevSlide()),39===a.keyCode&&(a.preventDefault(),b.goToNextSlide()))}),a(window).on("keydown.lg",function(a){!0===b.s.escKey&&27===a.keyCode&&(a.preventDefault(),b.$outer.hasClass("lg-thumb-open")?b.$outer.removeClass("lg-thumb-open"):b.destroy())})},b.prototype.arrow=function(){var a=this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})},b.prototype.arrowDisable=function(a){!this.s.loop&&this.s.hideControlOnEnd&&(a+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),a>0?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},b.prototype.setTranslate=function(a,b,c){this.s.useLeft?a.css("left",b):a.css({transform:"translate3d("+b+"px, "+c+"px, 0px)"})},b.prototype.touchMove=function(b,c){var d=c-b;Math.abs(d)>15&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),d,0),this.setTranslate(a(".lg-prev-slide"),-this.$slide.eq(this.index).width()+d,0),this.setTranslate(a(".lg-next-slide"),this.$slide.eq(this.index).width()+d,0))},b.prototype.touchEnd=function(a){var b=this;"lg-slide"!==b.s.mode&&b.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){b.$outer.removeClass("lg-dragging"),a<0&&Math.abs(a)>b.s.swipeThreshold?b.goToNextSlide(!0):a>0&&Math.abs(a)>b.s.swipeThreshold?b.goToPrevSlide(!0):Math.abs(a)<5&&b.$el.trigger("onSlideClick.lg"),b.$slide.removeAttr("style")}),setTimeout(function(){b.$outer.hasClass("lg-dragging")||"lg-slide"===b.s.mode||b.$outer.removeClass("lg-slide")},b.s.speed+100)},b.prototype.enableSwipe=function(){var a=this,b=0,c=0,d=!1;a.s.enableSwipe&&a.doCss()&&(a.$slide.on("touchstart.lg",function(c){a.$outer.hasClass("lg-zoomed")||a.lgBusy||(c.preventDefault(),a.manageSwipeClass(),b=c.originalEvent.targetTouches[0].pageX)}),a.$slide.on("touchmove.lg",function(e){a.$outer.hasClass("lg-zoomed")||(e.preventDefault(),c=e.originalEvent.targetTouches[0].pageX,a.touchMove(b,c),d=!0)}),a.$slide.on("touchend.lg",function(){a.$outer.hasClass("lg-zoomed")||(d?(d=!1,a.touchEnd(c-b)):a.$el.trigger("onSlideClick.lg"))}))},b.prototype.enableDrag=function(){var b=this,c=0,d=0,e=!1,f=!1;b.s.enableDrag&&b.doCss()&&(b.$slide.on("mousedown.lg",function(d){b.$outer.hasClass("lg-zoomed")||b.lgBusy||a(d.target).text().trim()||(d.preventDefault(),b.manageSwipeClass(),c=d.pageX,e=!0,b.$outer.scrollLeft+=1,b.$outer.scrollLeft-=1,b.$outer.removeClass("lg-grab").addClass("lg-grabbing"),b.$el.trigger("onDragstart.lg"))}),a(window).on("mousemove.lg",function(a){e&&(f=!0,d=a.pageX,b.touchMove(c,d),b.$el.trigger("onDragmove.lg"))}),a(window).on("mouseup.lg",function(g){f?(f=!1,b.touchEnd(d-c),b.$el.trigger("onDragend.lg")):(a(g.target).hasClass("lg-object")||a(g.target).hasClass("lg-video-play"))&&b.$el.trigger("onSlideClick.lg"),e&&(e=!1,b.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},b.prototype.manageSwipeClass=function(){var a=this.index+1,b=this.index-1;this.s.loop&&this.$slide.length>2&&(0===this.index?b=this.$slide.length-1:this.index===this.$slide.length-1&&(a=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),b>-1&&this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(a).addClass("lg-next-slide")},b.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){b.deltaY&&(b.deltaY>0?a.goToPrevSlide():a.goToNextSlide(),b.preventDefault())})},b.prototype.closeGallery=function(){var b=this,c=!1;this.$outer.find(".lg-close").on("click.lg",function(){b.destroy()}),b.s.closable&&(b.$outer.on("mousedown.lg",function(b){c=!!(a(b.target).is(".lg-outer")||a(b.target).is(".lg-item ")||a(b.target).is(".lg-img-wrap"))}),b.$outer.on("mousemove.lg",function(){c=!1}),b.$outer.on("mouseup.lg",function(d){(a(d.target).is(".lg-outer")||a(d.target).is(".lg-item ")||a(d.target).is(".lg-img-wrap")&&c)&&(b.$outer.hasClass("lg-dragging")||b.destroy())}))},b.prototype.destroy=function(b){var c=this;b||(c.$el.trigger("onBeforeClose.lg"),a(window).scrollTop(c.prevScrollTop)),b&&(c.s.dynamic||this.$items.off("click.lg click.lgcustom"),a.removeData(c.el,"lightGallery")),this.$el.off(".lg.tm"),a.each(a.fn.lightGallery.modules,function(a){c.modules[a]&&c.modules[a].destroy()}),this.lGalleryOn=!1,clearTimeout(c.hideBartimeout),this.hideBartimeout=!1,a(window).off(".lg"),a("body").removeClass("lg-on lg-from-hash"),c.$outer&&c.$outer.removeClass("lg-visible"),a(".lg-backdrop").removeClass("in"),setTimeout(function(){c.$outer&&c.$outer.remove(),a(".lg-backdrop").remove(),b||c.$el.trigger("onCloseAfter.lg")},c.s.backdropDuration+50)},a.fn.lightGallery=function(c){return this.each(function(){if(a.data(this,"lightGallery"))try{a(this).data("lightGallery").init()}catch(a){console.error("lightGallery has not initiated properly")}else a.data(this,"lightGallery",new b(this,c))})},a.fn.lightGallery.modules={}}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={autoplay:!1,pause:5e3,progressBar:!0,fourceAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar"},c=function(c){return this.core=a(c).data("lightGallery"),this.$el=a(c),!(this.core.$items.length<2)&&(this.core.s=a.extend({},b,this.core.s),this.interval=!1,this.fromAuto=!0,this.canceledOnTouch=!1,this.fourceAutoplayTemp=this.core.s.fourceAutoplay,this.core.doCss()||(this.core.s.progressBar=!1),this.init(),this)};c.prototype.init=function(){var a=this;a.core.s.autoplayControls&&a.controls(),a.core.s.progressBar&&a.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),a.progress(),a.core.s.autoplay&&a.$el.one("onSlideItemLoad.lg.tm",function(){a.startlAuto()}),a.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){a.interval&&(a.cancelAuto(),a.canceledOnTouch=!0)}),a.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){!a.interval&&a.canceledOnTouch&&(a.startlAuto(),a.canceledOnTouch=!1)})},c.prototype.progress=function(){var a,b,c=this;c.$el.on("onBeforeSlide.lg.tm",function(){c.core.s.progressBar&&c.fromAuto&&(a=c.core.$outer.find(".lg-progress-bar"),b=c.core.$outer.find(".lg-progress"),c.interval&&(b.removeAttr("style"),a.removeClass("lg-start"),setTimeout(function(){b.css("transition","width "+(c.core.s.speed+c.core.s.pause)+"ms ease 0s"),a.addClass("lg-start")},20))),c.fromAuto||c.core.s.fourceAutoplay||c.cancelAuto(),c.fromAuto=!1})},c.prototype.controls=function(){var b=this;a(this.core.s.appendAutoplayControlsTo).append('<span class="lg-autoplay-button lg-icon"></span>'),b.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){a(b.core.$outer).hasClass("lg-show-autoplay")?(b.cancelAuto(),b.core.s.fourceAutoplay=!1):b.interval||(b.startlAuto(),b.core.s.fourceAutoplay=b.fourceAutoplayTemp)})},c.prototype.startlAuto=function(){var a=this;a.core.$outer.find(".lg-progress").css("transition","width "+(a.core.s.speed+a.core.s.pause)+"ms ease 0s"),a.core.$outer.addClass("lg-show-autoplay"),a.core.$outer.find(".lg-progress-bar").addClass("lg-start"),a.interval=setInterval(function(){a.core.index+1<a.core.$items.length?a.core.index++:a.core.index=0,a.fromAuto=!0,a.core.slide(a.core.index,!1,!1,"next")},a.core.s.speed+a.core.s.pause)},c.prototype.cancelAuto=function(){clearInterval(this.interval),this.interval=!1,this.core.$outer.find(".lg-progress").removeAttr("style"),this.core.$outer.removeClass("lg-show-autoplay"),this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")},c.prototype.destroy=function(){this.cancelAuto(),this.core.$outer.find(".lg-progress-bar").remove()},a.fn.lightGallery.modules.autoplay=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(){"use strict";function b(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}var c={fullScreen:!0},d=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},c,this.core.s),this.init(),this};d.prototype.init=function(){var a="";if(this.core.s.fullScreen){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return;a='<span class="lg-fullscreen lg-icon"></span>',this.core.$outer.find(".lg-toolbar").append(a),this.fullScreen()}},d.prototype.requestFullscreen=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},d.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},d.prototype.fullScreen=function(){var c=this;a(document).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){c.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){b()?c.exitFullscreen():c.requestFullscreen()})},d.prototype.destroy=function(){b()&&this.exitFullscreen(),a(document).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},a.fn.lightGallery.modules.fullscreen=d}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={pager:!1},c=function(c){return this.core=a(c).data("lightGallery"),this.$el=a(c),this.core.s=a.extend({},b,this.core.s),this.core.s.pager&&this.core.$items.length>1&&this.init(),this};c.prototype.init=function(){var b,c,d,e=this,f="";if(e.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'),e.core.s.dynamic)for(var g=0;g<e.core.s.dynamicEl.length;g++)f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+e.core.s.dynamicEl[g].thumb+'" /></div></span>';else e.core.$items.each(function(){e.core.s.exThumbImage?f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+a(this).attr(e.core.s.exThumbImage)+'" /></div></span>':f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+a(this).find("img").attr("src")+'" /></div></span>'});c=e.core.$outer.find(".lg-pager-outer"),c.html(f),b=e.core.$outer.find(".lg-pager-cont"),b.on("click.lg touchend.lg",function(){var b=a(this);e.core.index=b.index(),e.core.slide(e.core.index,!1,!0,!1)}),c.on("mouseover.lg",function(){clearTimeout(d),c.addClass("lg-pager-hover")}),c.on("mouseout.lg",function(){d=setTimeout(function(){c.removeClass("lg-pager-hover")})}),e.core.$el.on("onBeforeSlide.lg.tm",function(a,c,d){b.removeClass("lg-pager-active"),b.eq(d).addClass("lg-pager-active")})},c.prototype.destroy=function(){},a.fn.lightGallery.modules.pager=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},c=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},b,this.core.s),this.$el=a(c),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight="100%"),this.left=0,this.init(),this};c.prototype.init=function(){var a=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){a.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},c.prototype.build=function(){function b(a,b,c){var g,h=d.core.isVideo(a,c)||{},i="";h.youtube||h.vimeo||h.dailymotion?h.youtube?g=d.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+h.youtube[1]+"/"+d.core.s.youtubeThumbSize+".jpg":b:h.vimeo?d.core.s.loadVimeoThumbnail?(g="//i.vimeocdn.com/video/error_"+f+".jpg",i=h.vimeo[1]):g=b:h.dailymotion&&(g=d.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+h.dailymotion[1]:b):g=b,e+='<div data-vimeo-id="'+i+'" class="lg-thumb-item" style="width:'+d.core.s.thumbWidth+"px; height: "+d.core.s.thumbHeight+"; margin-right: "+d.core.s.thumbMargin+'px"><img src="'+g+'" /></div>',i=""}var c,d=this,e="",f="",g='<div class="lg-thumb-outer"><div class="lg-thumb lg-group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":f="640";break;case"thumbnail_medium":f="200x150";break;case"thumbnail_small":f="100x75"}if(d.core.$outer.addClass("lg-has-thumb"),d.core.$outer.find(".lg").append(g),d.$thumbOuter=d.core.$outer.find(".lg-thumb-outer"),d.thumbOuterWidth=d.$thumbOuter.width(),d.core.s.animateThumb&&d.core.$outer.find(".lg-thumb").css({width:d.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&d.$thumbOuter.css("height",d.core.s.thumbContHeight+"px"),d.core.s.dynamic)for(var h=0;h<d.core.s.dynamicEl.length;h++)b(d.core.s.dynamicEl[h].src,d.core.s.dynamicEl[h].thumb,h);else d.core.$items.each(function(c){d.core.s.exThumbImage?b(a(this).attr("href")||a(this).attr("data-src"),a(this).attr(d.core.s.exThumbImage),c):b(a(this).attr("href")||a(this).attr("data-src"),a(this).find("img").attr("src"),c)});d.core.$outer.find(".lg-thumb").html(e),c=d.core.$outer.find(".lg-thumb-item"),c.each(function(){var b=a(this),c=b.attr("data-vimeo-id");c&&a.getJSON("//www.vimeo.com/api/v2/video/"+c+".json?callback=?",{format:"json"},function(a){b.find("img").attr("src",a[0][d.core.s.vimeoThumbSize])})}),c.eq(d.core.index).addClass("active"),d.core.$el.on("onBeforeSlide.lg.tm",function(){c.removeClass("active"),c.eq(d.core.index).addClass("active")}),c.on("click.lg touchend.lg",function(){var b=a(this);setTimeout(function(){(d.thumbClickable&&!d.core.lgBusy||!d.core.doCss())&&(d.core.index=b.index(),d.core.slide(d.core.index,!1,!0,!1))},50)}),d.core.$el.on("onBeforeSlide.lg.tm",function(){d.animateThumb(d.core.index)}),a(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){d.animateThumb(d.core.index),d.thumbOuterWidth=d.$thumbOuter.width()},200)})},c.prototype.setTranslate=function(a){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+a+"px, 0px, 0px)"})},c.prototype.animateThumb=function(a){var b=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var c;switch(this.core.s.currentPagerPosition){case"left":c=0;break;case"middle":c=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":c=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*a-1-c,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(b.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||b.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||b.css("left",-this.left+"px"),this.setTranslate(this.left)}},c.prototype.enableThumbDrag=function(){var b=this,c=0,d=0,e=!1,f=!1,g=0;b.$thumbOuter.addClass("lg-grab"),b.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(a){b.thumbTotalWidth>b.thumbOuterWidth&&(a.preventDefault(),c=a.pageX,e=!0,b.core.$outer.scrollLeft+=1,b.core.$outer.scrollLeft-=1,b.thumbClickable=!1,b.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),a(window).on("mousemove.lg.thumb",function(a){e&&(g=b.left,f=!0,d=a.pageX,b.$thumbOuter.addClass("lg-dragging"),g-=d-c,g>b.thumbTotalWidth-b.thumbOuterWidth&&(g=b.thumbTotalWidth-b.thumbOuterWidth),g<0&&(g=0),b.setTranslate(g))}),a(window).on("mouseup.lg.thumb",function(){f?(f=!1,b.$thumbOuter.removeClass("lg-dragging"),b.left=g,Math.abs(d-c)<b.core.s.swipeThreshold&&(b.thumbClickable=!0)):b.thumbClickable=!0,e&&(e=!1,b.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},c.prototype.enableThumbSwipe=function(){var a=this,b=0,c=0,d=!1,e=0;a.core.$outer.find(".lg-thumb").on("touchstart.lg",function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b=c.originalEvent.targetTouches[0].pageX,a.thumbClickable=!1)}),a.core.$outer.find(".lg-thumb").on("touchmove.lg",function(f){a.thumbTotalWidth>a.thumbOuterWidth&&(f.preventDefault(),c=f.originalEvent.targetTouches[0].pageX,d=!0,a.$thumbOuter.addClass("lg-dragging"),e=a.left,e-=c-b,e>a.thumbTotalWidth-a.thumbOuterWidth&&(e=a.thumbTotalWidth-a.thumbOuterWidth),e<0&&(e=0),a.setTranslate(e))}),a.core.$outer.find(".lg-thumb").on("touchend.lg",function(){a.thumbTotalWidth>a.thumbOuterWidth&&d?(d=!1,a.$thumbOuter.removeClass("lg-dragging"),Math.abs(c-b)<a.core.s.swipeThreshold&&(a.thumbClickable=!0),a.left=e):a.thumbClickable=!0})},c.prototype.toogle=function(){var a=this;a.core.s.toogleThumb&&(a.core.$outer.addClass("lg-can-toggle"),a.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),a.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){a.core.$outer.toggleClass("lg-thumb-open")}))},c.prototype.thumbkeyPress=function(){var b=this;a(window).on("keydown.lg.thumb",function(a){38===a.keyCode?(a.preventDefault(),b.core.$outer.addClass("lg-thumb-open")):40===a.keyCode&&(a.preventDefault(),b.core.$outer.removeClass("lg-thumb-open"))})},c.prototype.destroy=function(){
this.core.s.thumbnail&&this.core.$items.length>1&&(a(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},a.fn.lightGallery.modules.Thumbnail=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(){"use strict";function b(a,b,c,d){var e=this;if(e.core.$slide.eq(b).find(".lg-video").append(e.loadVideo(c,"lg-object",!0,b,d)),d)if(e.core.s.videojs)try{videojs(e.core.$slide.eq(b).find(".lg-html5").get(0),e.core.s.videojsOptions,function(){!e.videoLoaded&&e.core.s.autoplayFirstVideo&&this.play()})}catch(a){console.error("Make sure you have included videojs")}else!e.videoLoaded&&e.core.s.autoplayFirstVideo&&e.core.$slide.eq(b).find(".lg-html5").get(0).play()}function c(a,b){var c=this.core.$slide.eq(b).find(".lg-video-cont");c.hasClass("lg-has-iframe")||(c.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}function d(b,c,d){var e=this,f=e.core.$slide.eq(c),g=f.find(".lg-youtube").get(0),h=f.find(".lg-vimeo").get(0),i=f.find(".lg-dailymotion").get(0),j=f.find(".lg-vk").get(0),k=f.find(".lg-html5").get(0);if(g)g.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(h)try{$f(h).api("pause")}catch(a){console.error("Make sure you have included froogaloop2 js")}else if(i)i.contentWindow.postMessage("pause","*");else if(k)if(e.core.s.videojs)try{videojs(k).pause()}catch(a){console.error("Make sure you have included videojs")}else k.pause();j&&a(j).attr("src",a(j).attr("src").replace("&autoplay","&noplay"));var l;l=e.core.s.dynamic?e.core.s.dynamicEl[d].src:e.core.$items.eq(d).attr("href")||e.core.$items.eq(d).attr("data-src");var m=e.core.isVideo(l,d)||{};(m.youtube||m.vimeo||m.dailymotion||m.vk)&&e.core.$outer.addClass("lg-hide-download")}var e={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},e,this.core.s),this.videoLoaded=!1,this.init(),this};f.prototype.init=function(){var e=this;e.core.$el.on("hasVideo.lg.tm",b.bind(this)),e.core.$el.on("onAferAppendSlide.lg.tm",c.bind(this)),e.core.doCss()&&e.core.$items.length>1&&(e.core.s.enableSwipe||e.core.s.enableDrag)?e.core.$el.on("onSlideClick.lg.tm",function(){var a=e.core.$slide.eq(e.core.index);e.loadVideoOnclick(a)}):e.core.$slide.on("click.lg",function(){e.loadVideoOnclick(a(this))}),e.core.$el.on("onBeforeSlide.lg.tm",d.bind(this)),e.core.$el.on("onAfterSlide.lg.tm",function(a,b){e.core.$slide.eq(b).removeClass("lg-video-playing")}),e.core.s.autoplayFirstVideo&&e.core.$el.on("onAferAppendSlide.lg.tm",function(a,b){if(!e.core.lGalleryOn){var c=e.core.$slide.eq(b);setTimeout(function(){e.loadVideoOnclick(c)},100)}})},f.prototype.loadVideo=function(b,c,d,e,f){var g="",h=1,i="",j=this.core.isVideo(b,e)||{};if(d&&(h=this.videoLoaded?0:this.core.s.autoplayFirstVideo?1:0),j.youtube)i="?wmode=opaque&autoplay="+h+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(i=i+"&"+a.param(this.core.s.youtubePlayerParams)),g='<iframe class="lg-video-object lg-youtube '+c+'" width="560" height="315" src="//www.youtube.com/embed/'+j.youtube[1]+i+'" frameborder="0" allowfullscreen></iframe>';else if(j.vimeo)i="?autoplay="+h+"&api=1",this.core.s.vimeoPlayerParams&&(i=i+"&"+a.param(this.core.s.vimeoPlayerParams)),g='<iframe class="lg-video-object lg-vimeo '+c+'" width="560" height="315"  src="//player.vimeo.com/video/'+j.vimeo[1]+i+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(j.dailymotion)i="?wmode=opaque&autoplay="+h+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(i=i+"&"+a.param(this.core.s.dailymotionPlayerParams)),g='<iframe class="lg-video-object lg-dailymotion '+c+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+j.dailymotion[1]+i+'" frameborder="0" allowfullscreen></iframe>';else if(j.html5){var k=f.substring(0,1);"."!==k&&"#"!==k||(f=a(f).html()),g=f}else j.vk&&(i="&autoplay="+h,this.core.s.vkPlayerParams&&(i=i+"&"+a.param(this.core.s.vkPlayerParams)),g='<iframe class="lg-video-object lg-vk '+c+'" width="560" height="315" src="//vk.com/video_ext.php?'+j.vk[1]+i+'" frameborder="0" allowfullscreen></iframe>');return g},f.prototype.loadVideoOnclick=function(a){var b=this;if(a.find(".lg-object").hasClass("lg-has-poster")&&a.find(".lg-object").is(":visible"))if(a.hasClass("lg-has-video")){var c=a.find(".lg-youtube").get(0),d=a.find(".lg-vimeo").get(0),e=a.find(".lg-dailymotion").get(0),f=a.find(".lg-html5").get(0);if(c)c.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(d)try{$f(d).api("play")}catch(a){console.error("Make sure you have included froogaloop2 js")}else if(e)e.contentWindow.postMessage("play","*");else if(f)if(b.core.s.videojs)try{videojs(f).play()}catch(a){console.error("Make sure you have included videojs")}else f.play();a.addClass("lg-video-playing")}else{a.addClass("lg-video-playing lg-has-video");var g,h,i=function(c,d){if(a.find(".lg-video").append(b.loadVideo(c,"",!1,b.core.index,d)),d)if(b.core.s.videojs)try{videojs(b.core.$slide.eq(b.core.index).find(".lg-html5").get(0),b.core.s.videojsOptions,function(){this.play()})}catch(a){console.error("Make sure you have included videojs")}else b.core.$slide.eq(b.core.index).find(".lg-html5").get(0).play()};b.core.s.dynamic?(g=b.core.s.dynamicEl[b.core.index].src,h=b.core.s.dynamicEl[b.core.index].html,i(g,h)):(g=b.core.$items.eq(b.core.index).attr("href")||b.core.$items.eq(b.core.index).attr("data-src"),h=b.core.$items.eq(b.core.index).attr("data-html"),i(g,h));var j=a.find(".lg-object");a.find(".lg-video").append(j),a.find(".lg-video-object").hasClass("lg-html5")||(a.removeClass("lg-complete"),a.find(".lg-video-object").on("load.lg error.lg",function(){a.addClass("lg-complete")}))}},f.prototype.destroy=function(){this.videoLoaded=!1},a.fn.lightGallery.modules.video=f}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b=function(){var a=!1,b=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return b&&parseInt(b[2],10)<54&&(a=!0),a},c={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:b()},d=function(b){return this.core=a(b).data("lightGallery"),this.core.s=a.extend({},c,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=a(window).width()/2,this.pageY=a(window).height()/2+a(window).scrollTop()),this};d.prototype.init=function(){var b=this,c='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';b.core.s.actualSize&&(c+='<span id="lg-actual-size" class="lg-icon"></span>'),b.core.s.useLeftForZoom?b.core.$outer.addClass("lg-use-left-for-zoom"):b.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(c),b.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(c,d,e){var f=b.core.s.enableZoomAfter+e;a("body").hasClass("lg-from-hash")&&e?f=0:a("body").removeClass("lg-from-hash"),b.zoomabletimeout=setTimeout(function(){b.core.$slide.eq(d).addClass("lg-zoomable")},f+30)});var d=1,e=function(c){var d,e,f=b.core.$outer.find(".lg-current .lg-image"),g=(a(window).width()-f.prop("offsetWidth"))/2,h=(a(window).height()-f.prop("offsetHeight"))/2+a(window).scrollTop();d=b.pageX-g,e=b.pageY-h;var i=(c-1)*d,j=(c-1)*e;f.css("transform","scale3d("+c+", "+c+", 1)").attr("data-scale",c),b.core.s.useLeftForZoom?f.parent().css({left:-i+"px",top:-j+"px"}).attr("data-x",i).attr("data-y",j):f.parent().css("transform","translate3d(-"+i+"px, -"+j+"px, 0)").attr("data-x",i).attr("data-y",j)},f=function(){d>1?b.core.$outer.addClass("lg-zoomed"):b.resetZoom(),d<1&&(d=1),e(d)},g=function(c,e,g,h){var i,j=e.prop("offsetWidth");i=b.core.s.dynamic?b.core.s.dynamicEl[g].width||e[0].naturalWidth||j:b.core.$items.eq(g).attr("data-width")||e[0].naturalWidth||j;var k;b.core.$outer.hasClass("lg-zoomed")?d=1:i>j&&(k=i/j,d=k||2),h?(b.pageX=a(window).width()/2,b.pageY=a(window).height()/2+a(window).scrollTop()):(b.pageX=c.pageX||c.originalEvent.targetTouches[0].pageX,b.pageY=c.pageY||c.originalEvent.targetTouches[0].pageY),f(),setTimeout(function(){b.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)},h=!1;b.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(a,c){var d=b.core.$slide.eq(c).find(".lg-image");d.on("dblclick",function(a){g(a,d,c)}),d.on("touchstart",function(a){h?(clearTimeout(h),h=null,g(a,d,c)):h=setTimeout(function(){h=null},300),a.preventDefault()})}),a(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){b.pageX=a(window).width()/2,b.pageY=a(window).height()/2+a(window).scrollTop(),e(d)}),a("#lg-zoom-out").on("click.lg",function(){b.core.$outer.find(".lg-current .lg-image").length&&(d-=b.core.s.scale,f())}),a("#lg-zoom-in").on("click.lg",function(){b.core.$outer.find(".lg-current .lg-image").length&&(d+=b.core.s.scale,f())}),a("#lg-actual-size").on("click.lg",function(a){g(a,b.core.$slide.eq(b.core.index).find(".lg-image"),b.core.index,!0)}),b.core.$el.on("onBeforeSlide.lg.tm",function(){d=1,b.resetZoom()}),b.zoomDrag(),b.zoomSwipe()},d.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=a(window).width()/2,this.pageY=a(window).height()/2+a(window).scrollTop()},d.prototype.zoomSwipe=function(){var a=this,b={},c={},d=!1,e=!1,f=!1;a.core.$slide.on("touchstart.lg",function(c){if(a.core.$outer.hasClass("lg-zoomed")){var d=a.core.$slide.eq(a.core.index).find(".lg-object");f=d.prop("offsetHeight")*d.attr("data-scale")>a.core.$outer.find(".lg").height(),e=d.prop("offsetWidth")*d.attr("data-scale")>a.core.$outer.find(".lg").width(),(e||f)&&(c.preventDefault(),b={x:c.originalEvent.targetTouches[0].pageX,y:c.originalEvent.targetTouches[0].pageY})}}),a.core.$slide.on("touchmove.lg",function(g){if(a.core.$outer.hasClass("lg-zoomed")){var h,i,j=a.core.$slide.eq(a.core.index).find(".lg-img-wrap");g.preventDefault(),d=!0,c={x:g.originalEvent.targetTouches[0].pageX,y:g.originalEvent.targetTouches[0].pageY},a.core.$outer.addClass("lg-zoom-dragging"),i=f?-Math.abs(j.attr("data-y"))+(c.y-b.y):-Math.abs(j.attr("data-y")),h=e?-Math.abs(j.attr("data-x"))+(c.x-b.x):-Math.abs(j.attr("data-x")),(Math.abs(c.x-b.x)>15||Math.abs(c.y-b.y)>15)&&(a.core.s.useLeftForZoom?j.css({left:h+"px",top:i+"px"}):j.css("transform","translate3d("+h+"px, "+i+"px, 0)"))}}),a.core.$slide.on("touchend.lg",function(){a.core.$outer.hasClass("lg-zoomed")&&d&&(d=!1,a.core.$outer.removeClass("lg-zoom-dragging"),a.touchendZoom(b,c,e,f))})},d.prototype.zoomDrag=function(){var b=this,c={},d={},e=!1,f=!1,g=!1,h=!1;b.core.$slide.on("mousedown.lg.zoom",function(d){var f=b.core.$slide.eq(b.core.index).find(".lg-object");h=f.prop("offsetHeight")*f.attr("data-scale")>b.core.$outer.find(".lg").height(),g=f.prop("offsetWidth")*f.attr("data-scale")>b.core.$outer.find(".lg").width(),b.core.$outer.hasClass("lg-zoomed")&&a(d.target).hasClass("lg-object")&&(g||h)&&(d.preventDefault(),c={x:d.pageX,y:d.pageY},e=!0,b.core.$outer.scrollLeft+=1,b.core.$outer.scrollLeft-=1,b.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),a(window).on("mousemove.lg.zoom",function(a){if(e){var i,j,k=b.core.$slide.eq(b.core.index).find(".lg-img-wrap");f=!0,d={x:a.pageX,y:a.pageY},b.core.$outer.addClass("lg-zoom-dragging"),j=h?-Math.abs(k.attr("data-y"))+(d.y-c.y):-Math.abs(k.attr("data-y")),i=g?-Math.abs(k.attr("data-x"))+(d.x-c.x):-Math.abs(k.attr("data-x")),b.core.s.useLeftForZoom?k.css({left:i+"px",top:j+"px"}):k.css("transform","translate3d("+i+"px, "+j+"px, 0)")}}),a(window).on("mouseup.lg.zoom",function(a){e&&(e=!1,b.core.$outer.removeClass("lg-zoom-dragging"),!f||c.x===d.x&&c.y===d.y||(d={x:a.pageX,y:a.pageY},b.touchendZoom(c,d,g,h)),f=!1),b.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},d.prototype.touchendZoom=function(a,b,c,d){var e=this,f=e.core.$slide.eq(e.core.index).find(".lg-img-wrap"),g=e.core.$slide.eq(e.core.index).find(".lg-object"),h=-Math.abs(f.attr("data-x"))+(b.x-a.x),i=-Math.abs(f.attr("data-y"))+(b.y-a.y),j=(e.core.$outer.find(".lg").height()-g.prop("offsetHeight"))/2,k=Math.abs(g.prop("offsetHeight")*Math.abs(g.attr("data-scale"))-e.core.$outer.find(".lg").height()+j),l=(e.core.$outer.find(".lg").width()-g.prop("offsetWidth"))/2,m=Math.abs(g.prop("offsetWidth")*Math.abs(g.attr("data-scale"))-e.core.$outer.find(".lg").width()+l);(Math.abs(b.x-a.x)>15||Math.abs(b.y-a.y)>15)&&(d&&(i<=-k?i=-k:i>=-j&&(i=-j)),c&&(h<=-m?h=-m:h>=-l&&(h=-l)),d?f.attr("data-y",Math.abs(i)):i=-Math.abs(f.attr("data-y")),c?f.attr("data-x",Math.abs(h)):h=-Math.abs(f.attr("data-x")),e.core.s.useLeftForZoom?f.css({left:h+"px",top:i+"px"}):f.css("transform","translate3d("+h+"px, "+i+"px, 0)"))},d.prototype.destroy=function(){var b=this;b.core.$el.off(".lg.zoom"),a(window).off(".lg.zoom"),b.core.$slide.off(".lg.zoom"),b.core.$el.off(".lg.tm.zoom"),b.resetZoom(),clearTimeout(b.zoomabletimeout),b.zoomabletimeout=!1},a.fn.lightGallery.modules.zoom=d}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={hash:!0},c=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},b,this.core.s),this.core.s.hash&&(this.oldHash=window.location.hash,this.init()),this};c.prototype.init=function(){var b,c=this;c.core.$el.on("onAfterSlide.lg.tm",function(a,b,d){history.replaceState?history.replaceState(null,null,window.location.pathname+window.location.search+"#lg="+c.core.s.galleryId+"&slide="+d):window.location.hash="lg="+c.core.s.galleryId+"&slide="+d}),a(window).on("hashchange.lg.hash",function(){b=window.location.hash;var a=parseInt(b.split("&slide=")[1],10);b.indexOf("lg="+c.core.s.galleryId)>-1?c.core.slide(a,!1,!1):c.core.lGalleryOn&&c.core.destroy()})},c.prototype.destroy=function(){this.core.s.hash&&(this.oldHash&&this.oldHash.indexOf("lg="+this.core.s.galleryId)<0?history.replaceState?history.replaceState(null,null,this.oldHash):window.location.hash=this.oldHash:history.replaceState?history.replaceState(null,document.title,window.location.pathname+window.location.search):window.location.hash="",this.core.$el.off(".lg.hash"))},a.fn.lightGallery.modules.hash=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={share:!0,facebook:!0,facebookDropdownText:"Facebook",twitter:!0,twitterDropdownText:"Twitter",googlePlus:!0,googlePlusDropdownText:"GooglePlus",pinterest:!0,pinterestDropdownText:"Pinterest"},c=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},b,this.core.s),this.core.s.share&&this.init(),this};c.prototype.init=function(){var b=this,c='<span id="lg-share" class="lg-icon"><ul class="lg-dropdown" style="position: absolute;">';c+=b.core.s.facebook?'<li><a id="lg-share-facebook" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.facebookDropdownText+"</span></a></li>":"",c+=b.core.s.twitter?'<li><a id="lg-share-twitter" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.twitterDropdownText+"</span></a></li>":"",c+=b.core.s.googlePlus?'<li><a id="lg-share-googleplus" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.googlePlusDropdownText+"</span></a></li>":"",c+=b.core.s.pinterest?'<li><a id="lg-share-pinterest" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.pinterestDropdownText+"</span></a></li>":"",c+="</ul></span>",this.core.$outer.find(".lg-toolbar").append(c),this.core.$outer.find(".lg").append('<div id="lg-dropdown-overlay"></div>'),a("#lg-share").on("click.lg",function(){b.core.$outer.toggleClass("lg-dropdown-active")}),a("#lg-dropdown-overlay").on("click.lg",function(){b.core.$outer.removeClass("lg-dropdown-active")}),b.core.$el.on("onAfterSlide.lg.tm",function(c,d,e){setTimeout(function(){a("#lg-share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(b.getSahreProps(e,"facebookShareUrl")||window.location.href)),a("#lg-share-twitter").attr("href","https://twitter.com/intent/tweet?text="+b.getSahreProps(e,"tweetText")+"&url="+encodeURIComponent(b.getSahreProps(e,"twitterShareUrl")||window.location.href)),a("#lg-share-googleplus").attr("href","https://plus.google.com/share?url="+encodeURIComponent(b.getSahreProps(e,"googleplusShareUrl")||window.location.href)),a("#lg-share-pinterest").attr("href","http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(b.getSahreProps(e,"pinterestShareUrl")||window.location.href)+"&media="+encodeURIComponent(b.getSahreProps(e,"src"))+"&description="+b.getSahreProps(e,"pinterestText"))},100)})},c.prototype.getSahreProps=function(a,b){var c="";if(this.core.s.dynamic)c=this.core.s.dynamicEl[a][b];else{var d=this.core.$items.eq(a).attr("href"),e=this.core.$items.eq(a).data(b);c="src"===b?d||e:e}return c},c.prototype.destroy=function(){},a.fn.lightGallery.modules.share=c}()});
/*
 * easy-autocomplete
 * jQuery plugin for autocompletion
 * 
 * @author ukasz Paweczak (http://github.com/pawelczak)
 * @version 1.3.5
 * Copyright  License: 
 */

var EasyAutocomplete=function(a){return a.Configuration=function(a){function b(){if("xml"===a.dataType&&(a.getValue||(a.getValue=function(a){return $(a).text()}),a.list||(a.list={}),a.list.sort||(a.list.sort={}),a.list.sort.method=function(b,c){return b=a.getValue(b),c=a.getValue(c),c>b?-1:b>c?1:0},a.list.match||(a.list.match={}),a.list.match.method=function(a,b){return a.search(b)>-1}),void 0!==a.categories&&a.categories instanceof Array){for(var b=[],c=0,d=a.categories.length;d>c;c+=1){var e=a.categories[c];for(var f in h.categories[0])void 0===e[f]&&(e[f]=h.categories[0][f]);b.push(e)}a.categories=b}}function c(){function b(a,c){var d=a||{};for(var e in a)void 0!==c[e]&&null!==c[e]&&("object"!=typeof c[e]||c[e]instanceof Array?d[e]=c[e]:b(a[e],c[e]));return void 0!==c.data&&null!==c.data&&"object"==typeof c.data&&(d.data=c.data),d}h=b(h,a)}function d(){if("list-required"!==h.url&&"function"!=typeof h.url){var b=h.url;h.url=function(){return b}}if(void 0!==h.ajaxSettings.url&&"function"!=typeof h.ajaxSettings.url){var b=h.ajaxSettings.url;h.ajaxSettings.url=function(){return b}}if("string"==typeof h.listLocation){var c=h.listLocation;"XML"===h.dataType.toUpperCase()?h.listLocation=function(a){return $(a).find(c)}:h.listLocation=function(a){return a[c]}}if("string"==typeof h.getValue){var d=h.getValue;h.getValue=function(a){return a[d]}}void 0!==a.categories&&(h.categoriesAssigned=!0)}function e(){void 0!==a.ajaxSettings&&"object"==typeof a.ajaxSettings?h.ajaxSettings=a.ajaxSettings:h.ajaxSettings={}}function f(a){return void 0!==h[a]&&null!==h[a]}function g(a,b){function c(b,d){for(var e in d)void 0===b[e]&&a.log("Property '"+e+"' does not exist in EasyAutocomplete options API."),"object"==typeof b[e]&&-1===$.inArray(e,i)&&c(b[e],d[e])}c(h,b)}var h={data:"list-required",url:"list-required",dataType:"json",listLocation:function(a){return a},xmlElementName:"",getValue:function(a){return a},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(a,b){return a=h.getValue(a),b=h.getValue(b),b>a?-1:a>b?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(a,b){return a.search(b)>-1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(a,b){return a},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},i=["ajaxSettings","template"];this.get=function(a){return h[a]},this.equals=function(a,b){return!(!f(a)||h[a]!==b)},this.checkDataUrlProperties=function(){return"list-required"!==h.url||"list-required"!==h.data},this.checkRequiredProperties=function(){for(var a in h)if("required"===h[a])return logger.error("Option "+a+" must be defined"),!1;return!0},this.printPropertiesThatDoesntExist=function(a,b){g(a,b)},b(),c(),h.loggerEnabled===!0&&g(console,a),e(),d()},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.Logger=function(){this.error=function(a){console.log("ERROR: "+a)},this.warning=function(a){console.log("WARNING: "+a)}},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.Constans=function(){var a={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(b){return a[b]}},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.ListBuilderService=function(a,b){function c(b,c){function d(){var d,e={};return void 0!==b.xmlElementName&&(e.xmlElementName=b.xmlElementName),void 0!==b.listLocation?d=b.listLocation:void 0!==a.get("listLocation")&&(d=a.get("listLocation")),void 0!==d?"string"==typeof d?e.data=$(c).find(d):"function"==typeof d&&(e.data=d(c)):e.data=c,e}function e(){var a={};return void 0!==b.listLocation?"string"==typeof b.listLocation?a.data=c[b.listLocation]:"function"==typeof b.listLocation&&(a.data=b.listLocation(c)):a.data=c,a}var f={};if(f="XML"===a.get("dataType").toUpperCase()?d():e(),void 0!==b.header&&(f.header=b.header),void 0!==b.maxNumberOfElements&&(f.maxNumberOfElements=b.maxNumberOfElements),void 0!==a.get("list").maxNumberOfElements&&(f.maxListSize=a.get("list").maxNumberOfElements),void 0!==b.getValue)if("string"==typeof b.getValue){var g=b.getValue;f.getValue=function(a){return a[g]}}else"function"==typeof b.getValue&&(f.getValue=b.getValue);else f.getValue=a.get("getValue");return f}function d(b){var c=[];return void 0===b.xmlElementName&&(b.xmlElementName=a.get("xmlElementName")),$(b.data).find(b.xmlElementName).each(function(){c.push(this)}),c}this.init=function(b){var c=[],d={};return d.data=a.get("listLocation")(b),d.getValue=a.get("getValue"),d.maxListSize=a.get("list").maxNumberOfElements,c.push(d),c},this.updateCategories=function(b,d){if(a.get("categoriesAssigned")){b=[];for(var e=0;e<a.get("categories").length;e+=1){var f=c(a.get("categories")[e],d);b.push(f)}}return b},this.convertXml=function(b){if("XML"===a.get("dataType").toUpperCase())for(var c=0;c<b.length;c+=1)b[c].data=d(b[c]);return b},this.processData=function(c,d){for(var e=0,f=c.length;f>e;e+=1)c[e].data=b(a,c[e],d);return c},this.checkIfDataExists=function(a){for(var b=0,c=a.length;c>b;b+=1)if(void 0!==a[b].data&&a[b].data instanceof Array&&a[b].data.length>0)return!0;return!1}},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.proccess=function(b,c,d){function e(a,c){var d=[],e="";if(b.get("list").match.enabled)for(var g=0,h=a.length;h>g;g+=1)e=b.get("getValue")(a[g]),f(e,c)&&d.push(a[g]);else d=a;return d}function f(a,c){return b.get("list").match.caseSensitive||("string"==typeof a&&(a=a.toLowerCase()),c=c.toLowerCase()),!!b.get("list").match.method(a,c)}function g(a){return void 0!==c.maxNumberOfElements&&a.length>c.maxNumberOfElements&&(a=a.slice(0,c.maxNumberOfElements)),a}function h(a){return b.get("list").sort.enabled&&a.sort(b.get("list").sort.method),a}a.proccess.match=f;var i=c.data,j=d;return i=e(i,j),i=g(i),i=h(i)},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.Template=function(a){var b={basic:{type:"basic",method:function(a){return a},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(a){return a+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(a){return a},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(a){return a},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(a){return a},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},c=function(a){var c,d=a.fields;return"description"===a.type?(c=b.description.method,"string"==typeof d.description?c=function(a,b){return a+" - <span>"+b[d.description]+"</span>"}:"function"==typeof d.description&&(c=function(a,b){return a+" - <span>"+d.description(b)+"</span>"}),c):"iconRight"===a.type?("string"==typeof d.iconSrc?c=function(a,b){return a+"<img class='eac-icon' src='"+b[d.iconSrc]+"' />"}:"function"==typeof d.iconSrc&&(c=function(a,b){return a+"<img class='eac-icon' src='"+d.iconSrc(b)+"' />"}),c):"iconLeft"===a.type?("string"==typeof d.iconSrc?c=function(a,b){return"<img class='eac-icon' src='"+b[d.iconSrc]+"' />"+a}:"function"==typeof d.iconSrc&&(c=function(a,b){return"<img class='eac-icon' src='"+d.iconSrc(b)+"' />"+a}),c):"links"===a.type?("string"==typeof d.link?c=function(a,b){return"<a href='"+b[d.link]+"' >"+a+"</a>"}:"function"==typeof d.link&&(c=function(a,b){return"<a href='"+d.link(b)+"' >"+a+"</a>"}),c):"custom"===a.type?a.method:b.basic.method},d=function(a){return a&&a.type&&a.type&&b[a.type]?c(a):b.basic.method},e=function(a){var c=function(){return""};return a&&a.type&&a.type&&b[a.type]?function(){var c=b[a.type].cssClass;return function(){return c}}():c};this.getTemplateClass=e(a),this.build=d(a)},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.main=function(b,c){function d(){return 0===t.length?void p.error("Input field doesn't exist."):o.checkDataUrlProperties()?o.checkRequiredProperties()?(e(),void g()):void p.error("Will not work without mentioned properties."):void p.error("One of options variables 'data' or 'url' must be defined.")}function e(){function a(){var a=$("<div>"),c=n.getValue("WRAPPER_CSS_CLASS");o.get("theme")&&""!==o.get("theme")&&(c+=" eac-"+o.get("theme")),o.get("cssClasses")&&""!==o.get("cssClasses")&&(c+=" "+o.get("cssClasses")),""!==q.getTemplateClass()&&(c+=" "+q.getTemplateClass()),a.addClass(c),t.wrap(a),o.get("adjustWidth")===!0&&b()}function b(){var a=t.outerWidth();t.parent().css("width",a)}function c(){t.unwrap()}function d(){var a=$("<div>").addClass(n.getValue("CONTAINER_CLASS"));a.attr("id",f()).prepend($("<ul>")),function(){a.on("show.eac",function(){switch(o.get("list").showAnimation.type){case"slide":var b=o.get("list").showAnimation.time,c=o.get("list").showAnimation.callback;a.find("ul").slideDown(b,c);break;case"fade":var b=o.get("list").showAnimation.time,c=o.get("list").showAnimation.callback;a.find("ul").fadeIn(b),c;break;default:a.find("ul").show()}o.get("list").onShowListEvent()}).on("hide.eac",function(){switch(o.get("list").hideAnimation.type){case"slide":var b=o.get("list").hideAnimation.time,c=o.get("list").hideAnimation.callback;a.find("ul").slideUp(b,c);break;case"fade":var b=o.get("list").hideAnimation.time,c=o.get("list").hideAnimation.callback;a.find("ul").fadeOut(b,c);break;default:a.find("ul").hide()}o.get("list").onHideListEvent()}).on("selectElement.eac",function(){a.find("ul li").removeClass("selected"),a.find("ul li").eq(w).addClass("selected"),o.get("list").onSelectItemEvent()}).on("loadElements.eac",function(b,c,d){var e="",f=a.find("ul");f.empty().detach(),v=[];for(var h=0,i=0,k=c.length;k>i;i+=1){var l=c[i].data;if(0!==l.length){void 0!==c[i].header&&c[i].header.length>0&&f.append("<div class='eac-category' >"+c[i].header+"</div>");for(var m=0,n=l.length;n>m&&h<c[i].maxListSize;m+=1)e=$("<li><div class='eac-item'></div></li>"),function(){var a=m,b=h,f=c[i].getValue(l[a]);e.find(" > div").on("click",function(){t.val(f).trigger("change"),w=b,j(b),o.get("list").onClickEvent(),o.get("list").onChooseEvent()}).mouseover(function(){w=b,j(b),o.get("list").onMouseOverEvent()}).mouseout(function(){o.get("list").onMouseOutEvent()}).html(q.build(g(f,d),l[a]))}(),f.append(e),v.push(l[m]),h+=1}}a.append(f),o.get("list").onLoadEvent()})}(),t.after(a)}function e(){t.next("."+n.getValue("CONTAINER_CLASS")).remove()}function g(a,b){return o.get("highlightPhrase")&&""!==b?i(a,b):a}function h(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function i(a,b){var c=h(b);return(a+"").replace(new RegExp("("+c+")","gi"),"<b>$1</b>")}t.parent().hasClass(n.getValue("WRAPPER_CSS_CLASS"))&&(e(),c()),a(),d(),u=$("#"+f()),o.get("placeholder")&&t.attr("placeholder",o.get("placeholder"))}function f(){var a=t.attr("id");return a=n.getValue("CONTAINER_ID")+a}function g(){function a(){s("autocompleteOff",!0)&&n(),b(),c(),d(),e(),f(),g()}function b(){t.focusout(function(){var a,b=t.val();o.get("list").match.caseSensitive||(b=b.toLowerCase());for(var c=0,d=v.length;d>c;c+=1)if(a=o.get("getValue")(v[c]),o.get("list").match.caseSensitive||(a=a.toLowerCase()),a===b)return w=c,void j(w)})}function c(){t.off("keyup").keyup(function(a){function b(a){function b(){var a={},b=o.get("ajaxSettings")||{};for(var c in b)a[c]=b[c];return a}function c(a,b){return o.get("matchResponseProperty")!==!1?"string"==typeof o.get("matchResponseProperty")?b[o.get("matchResponseProperty")]===a:"function"==typeof o.get("matchResponseProperty")?o.get("matchResponseProperty")(b)===a:!0:!0}if(!(a.length<o.get("minCharNumber"))){if("list-required"!==o.get("data")){var d=o.get("data"),e=r.init(d);e=r.updateCategories(e,d),e=r.processData(e,a),k(e,a),t.parent().find("li").length>0?h():i()}var f=b();void 0!==f.url&&""!==f.url||(f.url=o.get("url")),void 0!==f.dataType&&""!==f.dataType||(f.dataType=o.get("dataType")),void 0!==f.url&&"list-required"!==f.url&&(f.url=f.url(a),f.data=o.get("preparePostData")(f.data,a),$.ajax(f).done(function(b){var d=r.init(b);d=r.updateCategories(d,b),d=r.convertXml(d),c(a,b)&&(d=r.processData(d,a),k(d,a)),r.checkIfDataExists(d)&&t.parent().find("li").length>0?h():i(),o.get("ajaxCallback")()}).fail(function(){p.warning("Fail to load response data")}).always(function(){}))}}switch(a.keyCode){case 27:i(),l();break;case 38:a.preventDefault(),v.length>0&&w>0&&(w-=1,t.val(o.get("getValue")(v[w])),j(w));break;case 40:a.preventDefault(),v.length>0&&w<v.length-1&&(w+=1,t.val(o.get("getValue")(v[w])),j(w));break;default:if(a.keyCode>40||8===a.keyCode){var c=t.val();o.get("list").hideOnEmptyPhrase!==!0||8!==a.keyCode||""!==c?o.get("requestDelay")>0?(void 0!==m&&clearTimeout(m),m=setTimeout(function(){b(c)},o.get("requestDelay"))):b(c):i()}}})}function d(){t.on("keydown",function(a){a=a||window.event;var b=a.keyCode;return 38===b?(suppressKeypress=!0,!1):void 0}).keydown(function(a){13===a.keyCode&&w>-1&&(t.val(o.get("getValue")(v[w])),o.get("list").onKeyEnterEvent(),o.get("list").onChooseEvent(),w=-1,i(),a.preventDefault())})}function e(){t.off("keypress")}function f(){t.focus(function(){""!==t.val()&&v.length>0&&(w=-1,h())})}function g(){t.blur(function(){setTimeout(function(){w=-1,i()},250)})}function n(){t.attr("autocomplete","off")}a()}function h(){u.trigger("show.eac")}function i(){u.trigger("hide.eac")}function j(a){u.trigger("selectElement.eac",a)}function k(a,b){u.trigger("loadElements.eac",[a,b])}function l(){t.trigger("blur")}var m,n=new a.Constans,o=new a.Configuration(c),p=new a.Logger,q=new a.Template(c.template),r=new a.ListBuilderService(o,a.proccess),s=o.equals,t=b,u="",v=[],w=-1;a.consts=n,this.getConstants=function(){return n},this.getConfiguration=function(){return o},this.getContainer=function(){return u},this.getSelectedItemIndex=function(){return w},this.getItems=function(){return v},this.getItemData=function(a){return v.length<a||void 0===v[a]?-1:v[a]},this.getSelectedItemData=function(){return this.getItemData(w)},this.build=function(){e()},this.init=function(){d()}},a.eacHandles=[],a.getHandle=function(b){return a.eacHandles[b]},a.inputHasId=function(a){return void 0!==$(a).attr("id")&&$(a).attr("id").length>0},a.assignRandomId=function(b){var c="";do c="eac-"+Math.floor(1e4*Math.random());while(0!==$("#"+c).length);elementId=a.consts.getValue("CONTAINER_ID")+c,$(b).attr("id",c)},a.setHandle=function(b,c){a.eacHandles[c]=b},a}(EasyAutocomplete||{});!function(a){a.fn.easyAutocomplete=function(b){return this.each(function(){var c=a(this),d=new EasyAutocomplete.main(c,b);EasyAutocomplete.inputHasId(c)||EasyAutocomplete.assignRandomId(c),d.init(),EasyAutocomplete.setHandle(d,c.attr("id"))})},a.fn.getSelectedItemIndex=function(){var b=a(this).attr("id");return void 0!==b?EasyAutocomplete.getHandle(b).getSelectedItemIndex():-1},a.fn.getItems=function(){var b=a(this).attr("id");return void 0!==b?EasyAutocomplete.getHandle(b).getItems():-1},a.fn.getItemData=function(b){var c=a(this).attr("id");return void 0!==c&&b>-1?EasyAutocomplete.getHandle(c).getItemData(b):-1},a.fn.getSelectedItemData=function(){var b=a(this).attr("id");return void 0!==b?EasyAutocomplete.getHandle(b).getSelectedItemData():-1}}(jQuery);
/*! jQuery UI - v1.11.2 - 2014-10-16
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function (e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery)
})(function (e) {
    function t(t, s) {
        var n, a, o, r = t.nodeName.toLowerCase();
        return "area" === r ? (n = t.parentNode, a = n.name, t.href && a && "map" === n.nodeName.toLowerCase() ? (o = e("img[usemap='#" + a + "']")[0], !!o && i(o)) : !1) : (/input|select|textarea|button|object/.test(r) ? !t.disabled : "a" === r ? t.href || s : s) && i(t)
    }

    function i(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function () {
            return "hidden" === e.css(this, "visibility")
        }).length
    }

    function s(e) {
        for (var t, i; e.length && e[0] !== document;) {
            if (t = e.css("position"), ("absolute" === t || "relative" === t || "fixed" === t) && (i = parseInt(e.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i;
            e = e.parent()
        }
        return 0
    }

    function n() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        }, this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        }, e.extend(this._defaults, this.regional[""]), this.regional.en = e.extend(!0, {}, this.regional[""]), this.regional["en-US"] = e.extend(!0, {}, this.regional.en), this.dpDiv = a(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }

    function a(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function () {
            e(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).removeClass("ui-datepicker-next-hover")
        }).delegate(i, "mouseover", o)
    }

    function o() {
        e.datepicker._isDisabledDatepicker(v.inline ? v.dpDiv.parent()[0] : v.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), e(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).addClass("ui-datepicker-next-hover"))
    }

    function r(t, i) {
        e.extend(t, i);
        for (var s in i) null == i[s] && (t[s] = i[s]);
        return t
    }

    function h(e) {
        return function () {
            var t = this.element.val();
            e.apply(this, arguments), this._refresh(), t !== this.element.val() && this._trigger("change")
        }
    }

    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.11.2",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        scrollParent: function (t) {
            var i = this.css("position"), s = "absolute" === i, n = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                a = this.parents().filter(function () {
                    var t = e(this);
                    return s && "static" === t.css("position") ? !1 : n.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
                }).eq(0);
            return "fixed" !== i && a.length ? a : e(this[0].ownerDocument || document)
        }, uniqueId: function () {
            var e = 0;
            return function () {
                return this.each(function () {
                    this.id || (this.id = "ui-id-" + ++e)
                })
            }
        }(), removeUniqueId: function () {
            return this.each(function () {
                /^ui-id-\d+$/.test(this.id) && e(this).removeAttr("id")
            })
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function (t) {
            return function (i) {
                return !!e.data(i, t)
            }
        }) : function (t, i, s) {
            return !!e.data(t, s[3])
        }, focusable: function (i) {
            return t(i, !isNaN(e.attr(i, "tabindex")))
        }, tabbable: function (i) {
            var s = e.attr(i, "tabindex"), n = isNaN(s);
            return (n || s >= 0) && t(i, !n)
        }
    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function (t, i) {
        function s(t, i, s, a) {
            return e.each(n, function () {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, s && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), a && (i -= parseFloat(e.css(t, "margin" + this)) || 0)
            }), i
        }

        var n = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"], a = i.toLowerCase(), o = {
            innerWidth: e.fn.innerWidth,
            innerHeight: e.fn.innerHeight,
            outerWidth: e.fn.outerWidth,
            outerHeight: e.fn.outerHeight
        };
        e.fn["inner" + i] = function (t) {
            return void 0 === t ? o["inner" + i].call(this) : this.each(function () {
                e(this).css(a, s(this, t) + "px")
            })
        }, e.fn["outer" + i] = function (t, n) {
            return "number" != typeof t ? o["outer" + i].call(this, t) : this.each(function () {
                e(this).css(a, s(this, t, !0, n) + "px")
            })
        }
    }), e.fn.addBack || (e.fn.addBack = function (e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function (t) {
        return function (i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this)
        }
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.fn.extend({
        focus: function (t) {
            return function (i, s) {
                return "number" == typeof i ? this.each(function () {
                    var t = this;
                    setTimeout(function () {
                        e(t).focus(), s && s.call(t)
                    }, i)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus), disableSelection: function () {
            var e = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
            return function () {
                return this.bind(e + ".ui-disableSelection", function (e) {
                    e.preventDefault()
                })
            }
        }(), enableSelection: function () {
            return this.unbind(".ui-disableSelection")
        }, zIndex: function (t) {
            if (void 0 !== t) return this.css("zIndex", t);
            if (this.length) for (var i, s, n = e(this[0]); n.length && n[0] !== document;) {
                if (i = n.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (s = parseInt(n.css("zIndex"), 10), !isNaN(s) && 0 !== s)) return s;
                n = n.parent()
            }
            return 0
        }
    }), e.ui.plugin = {
        add: function (t, i, s) {
            var n, a = e.ui[t].prototype;
            for (n in s) a.plugins[n] = a.plugins[n] || [], a.plugins[n].push([i, s[n]])
        }, call: function (e, t, i, s) {
            var n, a = e.plugins[t];
            if (a && (s || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType)) for (n = 0; a.length > n; n++) e.options[a[n][0]] && a[n][1].apply(e.element, i)
        }
    };
    var l = 0, u = Array.prototype.slice;
    e.cleanData = function (t) {
        return function (i) {
            var s, n, a;
            for (a = 0; null != (n = i[a]); a++) try {
                s = e._data(n, "events"), s && s.remove && e(n).triggerHandler("remove")
            } catch (o) {
            }
            t(i)
        }
    }(e.cleanData), e.widget = function (t, i, s) {
        var n, a, o, r, h = {}, l = t.split(".")[0];
        return t = t.split(".")[1], n = l + "-" + t, s || (s = i, i = e.Widget), e.expr[":"][n.toLowerCase()] = function (t) {
            return !!e.data(t, n)
        }, e[l] = e[l] || {}, a = e[l][t], o = e[l][t] = function (e, t) {
            return this._createWidget ? (arguments.length && this._createWidget(e, t), void 0) : new o(e, t)
        }, e.extend(o, a, {
            version: s.version,
            _proto: e.extend({}, s),
            _childConstructors: []
        }), r = new i, r.options = e.widget.extend({}, r.options), e.each(s, function (t, s) {
            return e.isFunction(s) ? (h[t] = function () {
                var e = function () {
                    return i.prototype[t].apply(this, arguments)
                }, n = function (e) {
                    return i.prototype[t].apply(this, e)
                };
                return function () {
                    var t, i = this._super, a = this._superApply;
                    return this._super = e, this._superApply = n, t = s.apply(this, arguments), this._super = i, this._superApply = a, t
                }
            }(), void 0) : (h[t] = s, void 0)
        }), o.prototype = e.widget.extend(r, {widgetEventPrefix: a ? r.widgetEventPrefix || t : t}, h, {
            constructor: o,
            namespace: l,
            widgetName: t,
            widgetFullName: n
        }), a ? (e.each(a._childConstructors, function (t, i) {
            var s = i.prototype;
            e.widget(s.namespace + "." + s.widgetName, o, i._proto)
        }), delete a._childConstructors) : i._childConstructors.push(o), e.widget.bridge(t, o), o
    }, e.widget.extend = function (t) {
        for (var i, s, n = u.call(arguments, 1), a = 0, o = n.length; o > a; a++) for (i in n[a]) s = n[a][i], n[a].hasOwnProperty(i) && void 0 !== s && (t[i] = e.isPlainObject(s) ? e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], s) : e.widget.extend({}, s) : s);
        return t
    }, e.widget.bridge = function (t, i) {
        var s = i.prototype.widgetFullName || t;
        e.fn[t] = function (n) {
            var a = "string" == typeof n, o = u.call(arguments, 1), r = this;
            return n = !a && o.length ? e.widget.extend.apply(null, [n].concat(o)) : n, a ? this.each(function () {
                var i, a = e.data(this, s);
                return "instance" === n ? (r = a, !1) : a ? e.isFunction(a[n]) && "_" !== n.charAt(0) ? (i = a[n].apply(a, o), i !== a && void 0 !== i ? (r = i && i.jquery ? r.pushStack(i.get()) : i, !1) : void 0) : e.error("no such method '" + n + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; " + "attempted to call method '" + n + "'")
            }) : this.each(function () {
                var t = e.data(this, s);
                t ? (t.option(n || {}), t._init && t._init()) : e.data(this, s, new i(n, this))
            }), r
        }
    }, e.Widget = function () {
    }, e.Widget._childConstructors = [], e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {disabled: !1, create: null},
        _createWidget: function (t, i) {
            i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = l++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = e(), this.hoverable = e(), this.focusable = e(), i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function (e) {
                    e.target === i && this.destroy()
                }
            }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function () {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: e.noop,
        widget: function () {
            return this.element
        },
        option: function (t, i) {
            var s, n, a, o = t;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof t) if (o = {}, s = t.split("."), t = s.shift(), s.length) {
                for (n = o[t] = e.widget.extend({}, this.options[t]), a = 0; s.length - 1 > a; a++) n[s[a]] = n[s[a]] || {}, n = n[s[a]];
                if (t = s.pop(), 1 === arguments.length) return void 0 === n[t] ? null : n[t];
                n[t] = i
            } else {
                if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                o[t] = i
            }
            return this._setOptions(o), this
        },
        _setOptions: function (e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this
        },
        _setOption: function (e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!t), t && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this
        },
        enable: function () {
            return this._setOptions({disabled: !1})
        },
        disable: function () {
            return this._setOptions({disabled: !0})
        },
        _on: function (t, i, s) {
            var n, a = this;
            "boolean" != typeof t && (s = i, i = t, t = !1), s ? (i = n = e(i), this.bindings = this.bindings.add(i)) : (s = i, i = this.element, n = this.widget()), e.each(s, function (s, o) {
                function r() {
                    return t || a.options.disabled !== !0 && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof o ? a[o] : o).apply(a, arguments) : void 0
                }

                "string" != typeof o && (r.guid = o.guid = o.guid || r.guid || e.guid++);
                var h = s.match(/^([\w:-]*)\s*(.*)$/), l = h[1] + a.eventNamespace, u = h[2];
                u ? n.delegate(u, l, r) : i.bind(l, r)
            })
        },
        _off: function (t, i) {
            i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.unbind(i).undelegate(i), this.bindings = e(this.bindings.not(t).get()), this.focusable = e(this.focusable.not(t).get()), this.hoverable = e(this.hoverable.not(t).get())
        },
        _delay: function (e, t) {
            function i() {
                return ("string" == typeof e ? s[e] : e).apply(s, arguments)
            }

            var s = this;
            return setTimeout(i, t || 0)
        },
        _hoverable: function (t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                mouseenter: function (t) {
                    e(t.currentTarget).addClass("ui-state-hover")
                }, mouseleave: function (t) {
                    e(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function (t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                focusin: function (t) {
                    e(t.currentTarget).addClass("ui-state-focus")
                }, focusout: function (t) {
                    e(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function (t, i, s) {
            var n, a, o = this.options[t];
            if (s = s || {}, i = e.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), i.target = this.element[0], a = i.originalEvent) for (n in a) n in i || (i[n] = a[n]);
            return this.element.trigger(i, s), !(e.isFunction(o) && o.apply(this.element[0], [i].concat(s)) === !1 || i.isDefaultPrevented())
        }
    }, e.each({show: "fadeIn", hide: "fadeOut"}, function (t, i) {
        e.Widget.prototype["_" + t] = function (s, n, a) {
            "string" == typeof n && (n = {effect: n});
            var o, r = n ? n === !0 || "number" == typeof n ? i : n.effect || i : t;
            n = n || {}, "number" == typeof n && (n = {duration: n}), o = !e.isEmptyObject(n), n.complete = a, n.delay && s.delay(n.delay), o && e.effects && e.effects.effect[r] ? s[t](n) : r !== t && s[r] ? s[r](n.duration, n.easing, a) : s.queue(function (i) {
                e(this)[t](), a && a.call(s[0]), i()
            })
        }
    }), e.widget;
    var d = !1;
    e(document).mouseup(function () {
        d = !1
    }), e.widget("ui.mouse", {
        version: "1.11.2",
        options: {cancel: "input,textarea,button,select,option", distance: 1, delay: 0},
        _mouseInit: function () {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function (e) {
                return t._mouseDown(e)
            }).bind("click." + this.widgetName, function (i) {
                return !0 === e.data(i.target, t.widgetName + ".preventClickEvent") ? (e.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1) : void 0
            }), this.started = !1
        },
        _mouseDestroy: function () {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function (t) {
            if (!d) {
                this._mouseMoved = !1, this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                var i = this, s = 1 === t.which,
                    n = "string" == typeof this.options.cancel && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : !1;
                return s && !n && this._mouseCapture(t) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                    i.mouseDelayMet = !0
                }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(t) !== !1, !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
                    return i._mouseMove(e)
                }, this._mouseUpDelegate = function (e) {
                    return i._mouseUp(e)
                }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), d = !0, !0)) : !0
            }
        },
        _mouseMove: function (t) {
            if (this._mouseMoved) {
                if (e.ui.ie && (!document.documentMode || 9 > document.documentMode) && !t.button) return this._mouseUp(t);
                if (!t.which) return this._mouseUp(t)
            }
            return (t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
        },
        _mouseUp: function (t) {
            return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), d = !1, !1
        },
        _mouseDistanceMet: function (e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function () {
            return this.mouseDelayMet
        },
        _mouseStart: function () {
        },
        _mouseDrag: function () {
        },
        _mouseStop: function () {
        },
        _mouseCapture: function () {
            return !0
        }
    }), function () {
        function t(e, t, i) {
            return [parseFloat(e[0]) * (p.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (p.test(e[1]) ? i / 100 : 1)]
        }

        function i(t, i) {
            return parseInt(e.css(t, i), 10) || 0
        }

        function s(t) {
            var i = t[0];
            return 9 === i.nodeType ? {
                width: t.width(),
                height: t.height(),
                offset: {top: 0, left: 0}
            } : e.isWindow(i) ? {
                width: t.width(),
                height: t.height(),
                offset: {top: t.scrollTop(), left: t.scrollLeft()}
            } : i.preventDefault ? {
                width: 0,
                height: 0,
                offset: {top: i.pageY, left: i.pageX}
            } : {width: t.outerWidth(), height: t.outerHeight(), offset: t.offset()}
        }

        e.ui = e.ui || {};
        var n, a, o = Math.max, r = Math.abs, h = Math.round, l = /left|center|right/, u = /top|center|bottom/,
            d = /[\+\-]\d+(\.[\d]+)?%?/, c = /^\w+/, p = /%$/, f = e.fn.position;
        e.position = {
            scrollbarWidth: function () {
                if (void 0 !== n) return n;
                var t, i,
                    s = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                    a = s.children()[0];
                return e("body").append(s), t = a.offsetWidth, s.css("overflow", "scroll"), i = a.offsetWidth, t === i && (i = s[0].clientWidth), s.remove(), n = t - i
            }, getScrollInfo: function (t) {
                var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
                    s = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
                    n = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth,
                    a = "scroll" === s || "auto" === s && t.height < t.element[0].scrollHeight;
                return {width: a ? e.position.scrollbarWidth() : 0, height: n ? e.position.scrollbarWidth() : 0}
            }, getWithinInfo: function (t) {
                var i = e(t || window), s = e.isWindow(i[0]), n = !!i[0] && 9 === i[0].nodeType;
                return {
                    element: i,
                    isWindow: s,
                    isDocument: n,
                    offset: i.offset() || {left: 0, top: 0},
                    scrollLeft: i.scrollLeft(),
                    scrollTop: i.scrollTop(),
                    width: s || n ? i.width() : i.outerWidth(),
                    height: s || n ? i.height() : i.outerHeight()
                }
            }
        }, e.fn.position = function (n) {
            if (!n || !n.of) return f.apply(this, arguments);
            n = e.extend({}, n);
            var p, m, g, v, y, b, _ = e(n.of), x = e.position.getWithinInfo(n.within), w = e.position.getScrollInfo(x),
                k = (n.collision || "flip").split(" "), T = {};
            return b = s(_), _[0].preventDefault && (n.at = "left top"), m = b.width, g = b.height, v = b.offset, y = e.extend({}, v), e.each(["my", "at"], function () {
                var e, t, i = (n[this] || "").split(" ");
                1 === i.length && (i = l.test(i[0]) ? i.concat(["center"]) : u.test(i[0]) ? ["center"].concat(i) : ["center", "center"]), i[0] = l.test(i[0]) ? i[0] : "center", i[1] = u.test(i[1]) ? i[1] : "center", e = d.exec(i[0]), t = d.exec(i[1]), T[this] = [e ? e[0] : 0, t ? t[0] : 0], n[this] = [c.exec(i[0])[0], c.exec(i[1])[0]]
            }), 1 === k.length && (k[1] = k[0]), "right" === n.at[0] ? y.left += m : "center" === n.at[0] && (y.left += m / 2), "bottom" === n.at[1] ? y.top += g : "center" === n.at[1] && (y.top += g / 2), p = t(T.at, m, g), y.left += p[0], y.top += p[1], this.each(function () {
                var s, l, u = e(this), d = u.outerWidth(), c = u.outerHeight(), f = i(this, "marginLeft"),
                    b = i(this, "marginTop"), D = d + f + i(this, "marginRight") + w.width,
                    S = c + b + i(this, "marginBottom") + w.height, M = e.extend({}, y),
                    C = t(T.my, u.outerWidth(), u.outerHeight());
                "right" === n.my[0] ? M.left -= d : "center" === n.my[0] && (M.left -= d / 2), "bottom" === n.my[1] ? M.top -= c : "center" === n.my[1] && (M.top -= c / 2), M.left += C[0], M.top += C[1], a || (M.left = h(M.left), M.top = h(M.top)), s = {
                    marginLeft: f,
                    marginTop: b
                }, e.each(["left", "top"], function (t, i) {
                    e.ui.position[k[t]] && e.ui.position[k[t]][i](M, {
                        targetWidth: m,
                        targetHeight: g,
                        elemWidth: d,
                        elemHeight: c,
                        collisionPosition: s,
                        collisionWidth: D,
                        collisionHeight: S,
                        offset: [p[0] + C[0], p[1] + C[1]],
                        my: n.my,
                        at: n.at,
                        within: x,
                        elem: u
                    })
                }), n.using && (l = function (e) {
                    var t = v.left - M.left, i = t + m - d, s = v.top - M.top, a = s + g - c, h = {
                        target: {element: _, left: v.left, top: v.top, width: m, height: g},
                        element: {element: u, left: M.left, top: M.top, width: d, height: c},
                        horizontal: 0 > i ? "left" : t > 0 ? "right" : "center",
                        vertical: 0 > a ? "top" : s > 0 ? "bottom" : "middle"
                    };
                    d > m && m > r(t + i) && (h.horizontal = "center"), c > g && g > r(s + a) && (h.vertical = "middle"), h.important = o(r(t), r(i)) > o(r(s), r(a)) ? "horizontal" : "vertical", n.using.call(this, e, h)
                }), u.offset(e.extend(M, {using: l}))
            })
        }, e.ui.position = {
            fit: {
                left: function (e, t) {
                    var i, s = t.within, n = s.isWindow ? s.scrollLeft : s.offset.left, a = s.width,
                        r = e.left - t.collisionPosition.marginLeft, h = n - r, l = r + t.collisionWidth - a - n;
                    t.collisionWidth > a ? h > 0 && 0 >= l ? (i = e.left + h + t.collisionWidth - a - n, e.left += h - i) : e.left = l > 0 && 0 >= h ? n : h > l ? n + a - t.collisionWidth : n : h > 0 ? e.left += h : l > 0 ? e.left -= l : e.left = o(e.left - r, e.left)
                }, top: function (e, t) {
                    var i, s = t.within, n = s.isWindow ? s.scrollTop : s.offset.top, a = t.within.height,
                        r = e.top - t.collisionPosition.marginTop, h = n - r, l = r + t.collisionHeight - a - n;
                    t.collisionHeight > a ? h > 0 && 0 >= l ? (i = e.top + h + t.collisionHeight - a - n, e.top += h - i) : e.top = l > 0 && 0 >= h ? n : h > l ? n + a - t.collisionHeight : n : h > 0 ? e.top += h : l > 0 ? e.top -= l : e.top = o(e.top - r, e.top)
                }
            }, flip: {
                left: function (e, t) {
                    var i, s, n = t.within, a = n.offset.left + n.scrollLeft, o = n.width,
                        h = n.isWindow ? n.scrollLeft : n.offset.left, l = e.left - t.collisionPosition.marginLeft,
                        u = l - h, d = l + t.collisionWidth - o - h,
                        c = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0,
                        p = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0,
                        f = -2 * t.offset[0];
                    0 > u ? (i = e.left + c + p + f + t.collisionWidth - o - a, (0 > i || r(u) > i) && (e.left += c + p + f)) : d > 0 && (s = e.left - t.collisionPosition.marginLeft + c + p + f - h, (s > 0 || d > r(s)) && (e.left += c + p + f))
                }, top: function (e, t) {
                    var i, s, n = t.within, a = n.offset.top + n.scrollTop, o = n.height,
                        h = n.isWindow ? n.scrollTop : n.offset.top, l = e.top - t.collisionPosition.marginTop,
                        u = l - h, d = l + t.collisionHeight - o - h, c = "top" === t.my[1],
                        p = c ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0,
                        f = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0,
                        m = -2 * t.offset[1];
                    0 > u ? (s = e.top + p + f + m + t.collisionHeight - o - a, e.top + p + f + m > u && (0 > s || r(u) > s) && (e.top += p + f + m)) : d > 0 && (i = e.top - t.collisionPosition.marginTop + p + f + m - h, e.top + p + f + m > d && (i > 0 || d > r(i)) && (e.top += p + f + m))
                }
            }, flipfit: {
                left: function () {
                    e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments)
                }, top: function () {
                    e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments)
                }
            }
        }, function () {
            var t, i, s, n, o, r = document.getElementsByTagName("body")[0], h = document.createElement("div");
            t = document.createElement(r ? "div" : "body"), s = {
                visibility: "hidden",
                width: 0,
                height: 0,
                border: 0,
                margin: 0,
                background: "none"
            }, r && e.extend(s, {position: "absolute", left: "-1000px", top: "-1000px"});
            for (o in s) t.style[o] = s[o];
            t.appendChild(h), i = r || document.documentElement, i.insertBefore(t, i.firstChild), h.style.cssText = "position: absolute; left: 10.7432222px;", n = e(h).offset().left, a = n > 10 && 11 > n, t.innerHTML = "", i.removeChild(t)
        }()
    }(), e.ui.position, e.widget("ui.accordion", {
        version: "1.11.2",
        options: {
            active: 0,
            animate: {},
            collapsible: !1,
            event: "click",
            header: "> li > :first-child,> :not(li):even",
            heightStyle: "auto",
            icons: {activeHeader: "ui-icon-triangle-1-s", header: "ui-icon-triangle-1-e"},
            activate: null,
            beforeActivate: null
        },
        hideProps: {
            borderTopWidth: "hide",
            borderBottomWidth: "hide",
            paddingTop: "hide",
            paddingBottom: "hide",
            height: "hide"
        },
        showProps: {
            borderTopWidth: "show",
            borderBottomWidth: "show",
            paddingTop: "show",
            paddingBottom: "show",
            height: "show"
        },
        _create: function () {
            var t = this.options;
            this.prevShow = this.prevHide = e(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), t.collapsible || t.active !== !1 && null != t.active || (t.active = 0), this._processPanels(), 0 > t.active && (t.active += this.headers.length), this._refresh()
        },
        _getCreateEventData: function () {
            return {header: this.active, panel: this.active.length ? this.active.next() : e()}
        },
        _createIcons: function () {
            var t = this.options.icons;
            t && (e("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers), this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader), this.headers.addClass("ui-accordion-icons"))
        },
        _destroyIcons: function () {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()
        },
        _destroy: function () {
            var e;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(), this._destroyIcons(), e = this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(), "content" !== this.options.heightStyle && e.css("height", "")
        },
        _setOption: function (e, t) {
            return "active" === e ? (this._activate(t), void 0) : ("event" === e && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(t)), this._super(e, t), "collapsible" !== e || t || this.options.active !== !1 || this._activate(0), "icons" === e && (this._destroyIcons(), t && this._createIcons()), "disabled" === e && (this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t), this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t)), void 0)
        },
        _keydown: function (t) {
            if (!t.altKey && !t.ctrlKey) {
                var i = e.ui.keyCode, s = this.headers.length, n = this.headers.index(t.target), a = !1;
                switch (t.keyCode) {
                    case i.RIGHT:
                    case i.DOWN:
                        a = this.headers[(n + 1) % s];
                        break;
                    case i.LEFT:
                    case i.UP:
                        a = this.headers[(n - 1 + s) % s];
                        break;
                    case i.SPACE:
                    case i.ENTER:
                        this._eventHandler(t);
                        break;
                    case i.HOME:
                        a = this.headers[0];
                        break;
                    case i.END:
                        a = this.headers[s - 1]
                }
                a && (e(t.target).attr("tabIndex", -1), e(a).attr("tabIndex", 0), a.focus(), t.preventDefault())
            }
        },
        _panelKeyDown: function (t) {
            t.keyCode === e.ui.keyCode.UP && t.ctrlKey && e(t.currentTarget).prev().focus()
        },
        refresh: function () {
            var t = this.options;
            this._processPanels(), t.active === !1 && t.collapsible === !0 || !this.headers.length ? (t.active = !1, this.active = e()) : t.active === !1 ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1, this.active = e()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active), this._destroyIcons(), this._refresh()
        },
        _processPanels: function () {
            var e = this.headers, t = this.panels;
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"), this.panels = this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(), t && (this._off(e.not(this.headers)), this._off(t.not(this.panels)))
        },
        _refresh: function () {
            var t, i = this.options, s = i.heightStyle, n = this.element.parent();
            this.active = this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function () {
                var t = e(this), i = t.uniqueId().attr("id"), s = t.next(), n = s.uniqueId().attr("id");
                t.attr("aria-controls", n), s.attr("aria-labelledby", i)
            }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            }).next().attr({"aria-hidden": "true"}).hide(), this.active.length ? this.active.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            }).next().attr({"aria-hidden": "false"}) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(i.event), "fill" === s ? (t = n.height(), this.element.siblings(":visible").each(function () {
                var i = e(this), s = i.css("position");
                "absolute" !== s && "fixed" !== s && (t -= i.outerHeight(!0))
            }), this.headers.each(function () {
                t -= e(this).outerHeight(!0)
            }), this.headers.next().each(function () {
                e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height()))
            }).css("overflow", "auto")) : "auto" === s && (t = 0, this.headers.next().each(function () {
                t = Math.max(t, e(this).css("height", "").height())
            }).height(t))
        },
        _activate: function (t) {
            var i = this._findActive(t)[0];
            i !== this.active[0] && (i = i || this.active[0], this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: e.noop
            }))
        },
        _findActive: function (t) {
            return "number" == typeof t ? this.headers.eq(t) : e()
        },
        _setupEvents: function (t) {
            var i = {keydown: "_keydown"};
            t && e.each(t.split(" "), function (e, t) {
                i[t] = "_eventHandler"
            }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, i), this._on(this.headers.next(), {keydown: "_panelKeyDown"}), this._hoverable(this.headers), this._focusable(this.headers)
        },
        _eventHandler: function (t) {
            var i = this.options, s = this.active, n = e(t.currentTarget), a = n[0] === s[0], o = a && i.collapsible,
                r = o ? e() : n.next(), h = s.next(),
                l = {oldHeader: s, oldPanel: h, newHeader: o ? e() : n, newPanel: r};
            t.preventDefault(), a && !i.collapsible || this._trigger("beforeActivate", t, l) === !1 || (i.active = o ? !1 : this.headers.index(n), this.active = a ? e() : n, this._toggle(l), s.removeClass("ui-accordion-header-active ui-state-active"), i.icons && s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header), a || (n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), i.icons && n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader), n.next().addClass("ui-accordion-content-active")))
        },
        _toggle: function (t) {
            var i = t.newPanel, s = this.prevShow.length ? this.prevShow : t.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = s, this.options.animate ? this._animate(i, s, t) : (s.hide(), i.show(), this._toggleComplete(t)), s.attr({"aria-hidden": "true"}), s.prev().attr("aria-selected", "false"), i.length && s.length ? s.prev().attr({
                tabIndex: -1,
                "aria-expanded": "false"
            }) : i.length && this.headers.filter(function () {
                return 0 === e(this).attr("tabIndex")
            }).attr("tabIndex", -1), i.attr("aria-hidden", "false").prev().attr({
                "aria-selected": "true",
                tabIndex: 0,
                "aria-expanded": "true"
            })
        },
        _animate: function (e, t, i) {
            var s, n, a, o = this, r = 0, h = e.length && (!t.length || e.index() < t.index()),
                l = this.options.animate || {}, u = h && l.down || l, d = function () {
                    o._toggleComplete(i)
                };
            return "number" == typeof u && (a = u), "string" == typeof u && (n = u), n = n || u.easing || l.easing, a = a || u.duration || l.duration, t.length ? e.length ? (s = e.show().outerHeight(), t.animate(this.hideProps, {
                duration: a,
                easing: n,
                step: function (e, t) {
                    t.now = Math.round(e)
                }
            }), e.hide().animate(this.showProps, {
                duration: a, easing: n, complete: d, step: function (e, i) {
                    i.now = Math.round(e), "height" !== i.prop ? r += i.now : "content" !== o.options.heightStyle && (i.now = Math.round(s - t.outerHeight() - r), r = 0)
                }
            }), void 0) : t.animate(this.hideProps, a, n, d) : e.animate(this.showProps, a, n, d)
        },
        _toggleComplete: function (e) {
            var t = e.oldPanel;
            t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), t.length && (t.parent()[0].className = t.parent()[0].className), this._trigger("activate", null, e)
        }
    }), e.widget("ui.menu", {
        version: "1.11.2",
        defaultElement: "<ul>",
        delay: 300,
        options: {
            icons: {submenu: "ui-icon-carat-1-e"},
            items: "> *",
            menus: "ul",
            position: {my: "left-1 top", at: "right top"},
            role: "menu",
            blur: null,
            focus: null,
            select: null
        },
        _create: function () {
            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                role: this.options.role,
                tabIndex: 0
            }), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({
                "mousedown .ui-menu-item": function (e) {
                    e.preventDefault()
                }, "click .ui-menu-item": function (t) {
                    var i = e(t.target);
                    !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)))
                }, "mouseenter .ui-menu-item": function (t) {
                    if (!this.previousFilter) {
                        var i = e(t.currentTarget);
                        i.siblings(".ui-state-active").removeClass("ui-state-active"), this.focus(t, i)
                    }
                }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (e, t) {
                    var i = this.active || this.element.find(this.options.items).eq(0);
                    t || this.focus(e, i)
                }, blur: function (t) {
                    this._delay(function () {
                        e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t)
                    })
                }, keydown: "_keydown"
            }), this.refresh(), this._on(this.document, {
                click: function (e) {
                    this._closeOnDocumentClick(e) && this.collapseAll(e), this.mouseHandled = !1
                }
            })
        },
        _destroy: function () {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () {
                var t = e(this);
                t.data("ui-menu-submenu-carat") && t.remove()
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
        },
        _keydown: function (t) {
            var i, s, n, a, o = !0;
            switch (t.keyCode) {
                case e.ui.keyCode.PAGE_UP:
                    this.previousPage(t);
                    break;
                case e.ui.keyCode.PAGE_DOWN:
                    this.nextPage(t);
                    break;
                case e.ui.keyCode.HOME:
                    this._move("first", "first", t);
                    break;
                case e.ui.keyCode.END:
                    this._move("last", "last", t);
                    break;
                case e.ui.keyCode.UP:
                    this.previous(t);
                    break;
                case e.ui.keyCode.DOWN:
                    this.next(t);
                    break;
                case e.ui.keyCode.LEFT:
                    this.collapse(t);
                    break;
                case e.ui.keyCode.RIGHT:
                    this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                    break;
                case e.ui.keyCode.ENTER:
                case e.ui.keyCode.SPACE:
                    this._activate(t);
                    break;
                case e.ui.keyCode.ESCAPE:
                    this.collapse(t);
                    break;
                default:
                    o = !1, s = this.previousFilter || "", n = String.fromCharCode(t.keyCode), a = !1, clearTimeout(this.filterTimer), n === s ? a = !0 : n = s + n, i = this._filterMenuItems(n), i = a && -1 !== i.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : i, i.length || (n = String.fromCharCode(t.keyCode), i = this._filterMenuItems(n)), i.length ? (this.focus(t, i), this.previousFilter = n, this.filterTimer = this._delay(function () {
                        delete this.previousFilter
                    }, 1e3)) : delete this.previousFilter
            }
            o && t.preventDefault()
        },
        _activate: function (e) {
            this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(e) : this.select(e))
        },
        refresh: function () {
            var t, i, s = this, n = this.options.icons.submenu, a = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function () {
                var t = e(this), i = t.parent(),
                    s = e("<span>").addClass("ui-menu-icon ui-icon " + n).data("ui-menu-submenu-carat", !0);
                i.attr("aria-haspopup", "true").prepend(s), t.attr("aria-labelledby", i.attr("id"))
            }), t = a.add(this.element), i = t.find(this.options.items), i.not(".ui-menu-item").each(function () {
                var t = e(this);
                s._isDivider(t) && t.addClass("ui-widget-content ui-menu-divider")
            }), i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({
                tabIndex: -1,
                role: this._itemRole()
            }), i.filter(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur()
        },
        _itemRole: function () {
            return {menu: "menuitem", listbox: "option"}[this.options.role]
        },
        _setOption: function (e, t) {
            "icons" === e && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t), this._super(e, t)
        },
        focus: function (e, t) {
            var i, s;
            this.blur(e, e && "focus" === e.type), this._scrollIntoView(t), this.active = t.first(), s = this.active.addClass("ui-state-focus").removeClass("ui-state-active"), this.options.role && this.element.attr("aria-activedescendant", s.attr("id")), this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"), e && "keydown" === e.type ? this._close() : this.timer = this._delay(function () {
                this._close()
            }, this.delay), i = t.children(".ui-menu"), i.length && e && /^mouse/.test(e.type) && this._startOpening(i), this.activeMenu = t.parent(), this._trigger("focus", e, {item: t})
        },
        _scrollIntoView: function (t) {
            var i, s, n, a, o, r;
            this._hasScroll() && (i = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, s = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, n = t.offset().top - this.activeMenu.offset().top - i - s, a = this.activeMenu.scrollTop(), o = this.activeMenu.height(), r = t.outerHeight(), 0 > n ? this.activeMenu.scrollTop(a + n) : n + r > o && this.activeMenu.scrollTop(a + n - o + r))
        },
        blur: function (e, t) {
            t || clearTimeout(this.timer), this.active && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", e, {item: this.active}))
        },
        _startOpening: function (e) {
            clearTimeout(this.timer), "true" === e.attr("aria-hidden") && (this.timer = this._delay(function () {
                this._close(), this._open(e)
            }, this.delay))
        },
        _open: function (t) {
            var i = e.extend({of: this.active}, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i)
        },
        collapseAll: function (t, i) {
            clearTimeout(this.timer), this.timer = this._delay(function () {
                var s = i ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                s.length || (s = this.element), this._close(s), this.blur(t), this.activeMenu = s
            }, this.delay)
        },
        _close: function (e) {
            e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")
        },
        _closeOnDocumentClick: function (t) {
            return !e(t.target).closest(".ui-menu").length
        },
        _isDivider: function (e) {
            return !/[^\-\u2014\u2013\s]/.test(e.text())
        },
        collapse: function (e) {
            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            t && t.length && (this._close(), this.focus(e, t))
        },
        expand: function (e) {
            var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first();
            t && t.length && (this._open(t.parent()), this._delay(function () {
                this.focus(e, t)
            }))
        },
        next: function (e) {
            this._move("next", "first", e)
        },
        previous: function (e) {
            this._move("prev", "last", e)
        },
        isFirstItem: function () {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        },
        isLastItem: function () {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        },
        _move: function (e, t, i) {
            var s;
            this.active && (s = "first" === e || "last" === e ? this.active["first" === e ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[e + "All"](".ui-menu-item").eq(0)), s && s.length && this.active || (s = this.activeMenu.find(this.options.items)[t]()), this.focus(i, s)
        },
        nextPage: function (t) {
            var i, s, n;
            return this.active ? (this.isLastItem() || (this._hasScroll() ? (s = this.active.offset().top, n = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () {
                return i = e(this), 0 > i.offset().top - s - n
            }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())), void 0) : (this.next(t), void 0)
        },
        previousPage: function (t) {
            var i, s, n;
            return this.active ? (this.isFirstItem() || (this._hasScroll() ? (s = this.active.offset().top, n = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () {
                return i = e(this), i.offset().top - s + n > 0
            }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first())), void 0) : (this.next(t), void 0)
        },
        _hasScroll: function () {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        },
        select: function (t) {
            this.active = this.active || e(t.target).closest(".ui-menu-item");
            var i = {item: this.active};
            this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, i)
        },
        _filterMenuItems: function (t) {
            var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"), s = RegExp("^" + i, "i");
            return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function () {
                return s.test(e.trim(e(this).text()))
            })
        }
    }), e.widget("ui.autocomplete", {
        version: "1.11.2",
        defaultElement: "<input>",
        options: {
            appendTo: null,
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {my: "left top", at: "left bottom", collision: "none"},
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function () {
            var t, i, s, n = this.element[0].nodeName.toLowerCase(), a = "textarea" === n, o = "input" === n;
            this.isMultiLine = a ? !0 : o ? !1 : this.element.prop("isContentEditable"), this.valueMethod = this.element[a || o ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, {
                keydown: function (n) {
                    if (this.element.prop("readOnly")) return t = !0, s = !0, i = !0, void 0;
                    t = !1, s = !1, i = !1;
                    var a = e.ui.keyCode;
                    switch (n.keyCode) {
                        case a.PAGE_UP:
                            t = !0, this._move("previousPage", n);
                            break;
                        case a.PAGE_DOWN:
                            t = !0, this._move("nextPage", n);
                            break;
                        case a.UP:
                            t = !0, this._keyEvent("previous", n);
                            break;
                        case a.DOWN:
                            t = !0, this._keyEvent("next", n);
                            break;
                        case a.ENTER:
                            this.menu.active && (t = !0, n.preventDefault(), this.menu.select(n));
                            break;
                        case a.TAB:
                            this.menu.active && this.menu.select(n);
                            break;
                        case a.ESCAPE:
                            this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(n), n.preventDefault());
                            break;
                        default:
                            i = !0, this._searchTimeout(n)
                    }
                }, keypress: function (s) {
                    if (t) return t = !1, (!this.isMultiLine || this.menu.element.is(":visible")) && s.preventDefault(), void 0;
                    if (!i) {
                        var n = e.ui.keyCode;
                        switch (s.keyCode) {
                            case n.PAGE_UP:
                                this._move("previousPage", s);
                                break;
                            case n.PAGE_DOWN:
                                this._move("nextPage", s);
                                break;
                            case n.UP:
                                this._keyEvent("previous", s);
                                break;
                            case n.DOWN:
                                this._keyEvent("next", s)
                        }
                    }
                }, input: function (e) {
                    return s ? (s = !1, e.preventDefault(), void 0) : (this._searchTimeout(e), void 0)
                }, focus: function () {
                    this.selectedItem = null, this.previous = this._value()
                }, blur: function (e) {
                    return this.cancelBlur ? (delete this.cancelBlur, void 0) : (clearTimeout(this.searching), this.close(e), this._change(e), void 0)
                }
            }), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role: null}).hide().menu("instance"), this._on(this.menu.element, {
                mousedown: function (t) {
                    t.preventDefault(), this.cancelBlur = !0, this._delay(function () {
                        delete this.cancelBlur
                    });
                    var i = this.menu.element[0];
                    e(t.target).closest(".ui-menu-item").length || this._delay(function () {
                        var t = this;
                        this.document.one("mousedown", function (s) {
                            s.target === t.element[0] || s.target === i || e.contains(i, s.target) || t.close()
                        })
                    })
                }, menufocus: function (t, i) {
                    var s, n;
                    return this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type)) ? (this.menu.blur(), this.document.one("mousemove", function () {
                        e(t.target).trigger(t.originalEvent)
                    }), void 0) : (n = i.item.data("ui-autocomplete-item"), !1 !== this._trigger("focus", t, {item: n}) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(n.value), s = i.item.attr("aria-label") || n.value, s && e.trim(s).length && (this.liveRegion.children().hide(), e("<div>").text(s).appendTo(this.liveRegion)), void 0)
                }, menuselect: function (e, t) {
                    var i = t.item.data("ui-autocomplete-item"), s = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = s, this._delay(function () {
                        this.previous = s, this.selectedItem = i
                    })), !1 !== this._trigger("select", e, {item: i}) && this._value(i.value), this.term = this._value(), this.close(e), this.selectedItem = i
                }
            }), this.liveRegion = e("<span>", {
                role: "status",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body), this._on(this.window, {
                beforeunload: function () {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _destroy: function () {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
        },
        _setOption: function (e, t) {
            this._super(e, t), "source" === e && this._initSource(), "appendTo" === e && this.menu.element.appendTo(this._appendTo()), "disabled" === e && t && this.xhr && this.xhr.abort()
        },
        _appendTo: function () {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t
        },
        _initSource: function () {
            var t, i, s = this;
            e.isArray(this.options.source) ? (t = this.options.source, this.source = function (i, s) {
                s(e.ui.autocomplete.filter(t, i.term))
            }) : "string" == typeof this.options.source ? (i = this.options.source, this.source = function (t, n) {
                s.xhr && s.xhr.abort(), s.xhr = e.ajax({
                    url: i, data: t, dataType: "json", success: function (e) {
                        n(e)
                    }, error: function () {
                        n([])
                    }
                })
            }) : this.source = this.options.source
        },
        _searchTimeout: function (e) {
            clearTimeout(this.searching), this.searching = this._delay(function () {
                var t = this.term === this._value(), i = this.menu.element.is(":visible"),
                    s = e.altKey || e.ctrlKey || e.metaKey || e.shiftKey;
                (!t || t && !i && !s) && (this.selectedItem = null, this.search(null, e))
            }, this.options.delay)
        },
        search: function (e, t) {
            return e = null != e ? e : this._value(), this.term = this._value(), e.length < this.options.minLength ? this.close(t) : this._trigger("search", t) !== !1 ? this._search(e) : void 0
        },
        _search: function (e) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({term: e}, this._response())
        },
        _response: function () {
            var t = ++this.requestIndex;
            return e.proxy(function (e) {
                t === this.requestIndex && this.__response(e), this.pending--, this.pending || this.element.removeClass("ui-autocomplete-loading")
            }, this)
        },
        __response: function (e) {
            e && (e = this._normalize(e)), this._trigger("response", null, {content: e}), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), this._trigger("open")) : this._close()
        },
        close: function (e) {
            this.cancelSearch = !0, this._close(e)
        },
        _close: function (e) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", e))
        },
        _change: function (e) {
            this.previous !== this._value() && this._trigger("change", e, {item: this.selectedItem})
        },
        _normalize: function (t) {
            return t.length && t[0].label && t[0].value ? t : e.map(t, function (t) {
                return "string" == typeof t ? {label: t, value: t} : e.extend({}, t, {
                    label: t.label || t.value,
                    value: t.value || t.label
                })
            })
        },
        _suggest: function (t) {
            var i = this.menu.element.empty();
            this._renderMenu(i, t), this.isNewMenu = !0, this.menu.refresh(), i.show(), this._resizeMenu(), i.position(e.extend({of: this.element}, this.options.position)), this.options.autoFocus && this.menu.next()
        },
        _resizeMenu: function () {
            var e = this.menu.element;
            e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
        },
        _renderMenu: function (t, i) {
            var s = this;
            e.each(i, function (e, i) {
                s._renderItemData(t, i)
            })
        },
        _renderItemData: function (e, t) {
            return this._renderItem(e, t).data("ui-autocomplete-item", t)
        },
        _renderItem: function (t, i) {
            return e("<li>").text(i.label).appendTo(t)
        },
        _move: function (e, t) {
            return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e) ? (this.isMultiLine || this._value(this.term), this.menu.blur(), void 0) : (this.menu[e](t), void 0) : (this.search(null, t), void 0)
        },
        widget: function () {
            return this.menu.element
        },
        _value: function () {
            return this.valueMethod.apply(this.element, arguments)
        },
        _keyEvent: function (e, t) {
            (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(e, t), t.preventDefault())
        }
    }), e.extend(e.ui.autocomplete, {
        escapeRegex: function (e) {
            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        }, filter: function (t, i) {
            var s = RegExp(e.ui.autocomplete.escapeRegex(i), "i");
            return e.grep(t, function (e) {
                return s.test(e.label || e.value || e)
            })
        }
    }), e.widget("ui.autocomplete", e.ui.autocomplete, {
        options: {
            messages: {
                noResults: "No search results.",
                results: function (e) {
                    return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }
            }
        }, __response: function (t) {
            var i;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults, this.liveRegion.children().hide(), e("<div>").text(i).appendTo(this.liveRegion))
        }
    }), e.ui.autocomplete;
    var c, p = "ui-button ui-widget ui-state-default ui-corner-all",
        f = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
        m = function () {
            var t = e(this);
            setTimeout(function () {
                t.find(":ui-button").button("refresh")
            }, 1)
        }, g = function (t) {
            var i = t.name, s = t.form, n = e([]);
            return i && (i = i.replace(/'/g, "\\'"), n = s ? e(s).find("[name='" + i + "'][type=radio]") : e("[name='" + i + "'][type=radio]", t.ownerDocument).filter(function () {
                return !this.form
            })), n
        };
    e.widget("ui.button", {
        version: "1.11.2",
        defaultElement: "<button>",
        options: {disabled: null, text: !0, label: null, icons: {primary: null, secondary: null}},
        _create: function () {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, m), "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
            var t = this, i = this.options, s = "checkbox" === this.type || "radio" === this.type,
                n = s ? "" : "ui-state-active";
            null === i.label && (i.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(p).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () {
                i.disabled || this === c && e(this).addClass("ui-state-active")
            }).bind("mouseleave" + this.eventNamespace, function () {
                i.disabled || e(this).removeClass(n)
            }).bind("click" + this.eventNamespace, function (e) {
                i.disabled && (e.preventDefault(), e.stopImmediatePropagation())
            }), this._on({
                focus: function () {
                    this.buttonElement.addClass("ui-state-focus")
                }, blur: function () {
                    this.buttonElement.removeClass("ui-state-focus")
                }
            }), s && this.element.bind("change" + this.eventNamespace, function () {
                t.refresh()
            }), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () {
                return i.disabled ? !1 : void 0
            }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () {
                if (i.disabled) return !1;
                e(this).addClass("ui-state-active"), t.buttonElement.attr("aria-pressed", "true");
                var s = t.element[0];
                g(s).not(s).map(function () {
                    return e(this).button("widget")[0]
                }).removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function () {
                return i.disabled ? !1 : (e(this).addClass("ui-state-active"), c = this, t.document.one("mouseup", function () {
                    c = null
                }), void 0)
            }).bind("mouseup" + this.eventNamespace, function () {
                return i.disabled ? !1 : (e(this).removeClass("ui-state-active"), void 0)
            }).bind("keydown" + this.eventNamespace, function (t) {
                return i.disabled ? !1 : ((t.keyCode === e.ui.keyCode.SPACE || t.keyCode === e.ui.keyCode.ENTER) && e(this).addClass("ui-state-active"), void 0)
            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () {
                e(this).removeClass("ui-state-active")
            }), this.buttonElement.is("a") && this.buttonElement.keyup(function (t) {
                t.keyCode === e.ui.keyCode.SPACE && e(this).click()
            })), this._setOption("disabled", i.disabled), this._resetButton()
        },
        _determineButtonType: function () {
            var e, t, i;
            this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button", "checkbox" === this.type || "radio" === this.type ? (e = this.element.parents().last(), t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = e.find(t), this.buttonElement.length || (e = e.length ? e.siblings() : this.element.siblings(), this.buttonElement = e.filter(t), this.buttonElement.length || (this.buttonElement = e.find(t))), this.element.addClass("ui-helper-hidden-accessible"), i = this.element.is(":checked"), i && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element
        },
        widget: function () {
            return this.buttonElement
        },
        _destroy: function () {
            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(p + " ui-state-active " + f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title")
        },
        _setOption: function (e, t) {
            return this._super(e, t), "disabled" === e ? (this.widget().toggleClass("ui-state-disabled", !!t), this.element.prop("disabled", !!t), t && ("checkbox" === this.type || "radio" === this.type ? this.buttonElement.removeClass("ui-state-focus") : this.buttonElement.removeClass("ui-state-focus ui-state-active")), void 0) : (this._resetButton(), void 0)
        },
        refresh: function () {
            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            t !== this.options.disabled && this._setOption("disabled", t), "radio" === this.type ? g(this.element[0]).each(function () {
                e(this).is(":checked") ? e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
        },
        _resetButton: function () {
            if ("input" === this.type) return this.options.label && this.element.val(this.options.label), void 0;
            var t = this.buttonElement.removeClass(f),
                i = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),
                s = this.options.icons, n = s.primary && s.secondary, a = [];
            s.primary || s.secondary ? (this.options.text && a.push("ui-button-text-icon" + (n ? "s" : s.primary ? "-primary" : "-secondary")), s.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + s.primary + "'></span>"), s.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + s.secondary + "'></span>"), this.options.text || (a.push(n ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || t.attr("title", e.trim(i)))) : a.push("ui-button-text-only"), t.addClass(a.join(" "))
        }
    }), e.widget("ui.buttonset", {
        version: "1.11.2",
        options: {items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},
        _create: function () {
            this.element.addClass("ui-buttonset")
        },
        _init: function () {
            this.refresh()
        },
        _setOption: function (e, t) {
            "disabled" === e && this.buttons.button("option", e, t), this._super(e, t)
        },
        refresh: function () {
            var t = "rtl" === this.element.css("direction"), i = this.element.find(this.options.items),
                s = i.filter(":ui-button");
            i.not(":ui-button").button(), s.button("refresh"), this.buttons = i.map(function () {
                return e(this).button("widget")[0]
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end()
        },
        _destroy: function () {
            this.element.removeClass("ui-buttonset"), this.buttons.map(function () {
                return e(this).button("widget")[0]
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }
    }), e.ui.button, e.extend(e.ui, {datepicker: {version: "1.11.2"}});
    var v;
    e.extend(n.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function () {
            return this.dpDiv
        },
        setDefaults: function (e) {
            return r(this._defaults, e || {}), this
        },
        _attachDatepicker: function (t, i) {
            var s, n, a;
            s = t.nodeName.toLowerCase(), n = "div" === s || "span" === s, t.id || (this.uuid += 1, t.id = "dp" + this.uuid), a = this._newInst(e(t), n), a.settings = e.extend({}, i || {}), "input" === s ? this._connectDatepicker(t, a) : n && this._inlineDatepicker(t, a)
        },
        _newInst: function (t, i) {
            var s = t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: s,
                input: t,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? a(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function (t, i) {
            var s = e(t);
            i.append = e([]), i.trigger = e([]), s.hasClass(this.markerClassName) || (this._attachments(s, i), s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(i), e.data(t, "datepicker", i), i.settings.disabled && this._disableDatepicker(t))
        },
        _attachments: function (t, i) {
            var s, n, a, o = this._get(i, "appendText"), r = this._get(i, "isRTL");
            i.append && i.append.remove(), o && (i.append = e("<span class='" + this._appendClass + "'>" + o + "</span>"), t[r ? "before" : "after"](i.append)), t.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), s = this._get(i, "showOn"), ("focus" === s || "both" === s) && t.focus(this._showDatepicker), ("button" === s || "both" === s) && (n = this._get(i, "buttonText"), a = this._get(i, "buttonImage"), i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                src: a,
                alt: n,
                title: n
            }) : e("<button type='button'></button>").addClass(this._triggerClass).html(a ? e("<img/>").attr({
                src: a,
                alt: n,
                title: n
            }) : n)), t[r ? "before" : "after"](i.trigger), i.trigger.click(function () {
                return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1
            }))
        },
        _autoSize: function (e) {
            if (this._get(e, "autoSize") && !e.inline) {
                var t, i, s, n, a = new Date(2009, 11, 20), o = this._get(e, "dateFormat");
                o.match(/[DM]/) && (t = function (e) {
                    for (i = 0, s = 0, n = 0; e.length > n; n++) e[n].length > i && (i = e[n].length, s = n);
                    return s
                }, a.setMonth(t(this._get(e, o.match(/MM/) ? "monthNames" : "monthNamesShort"))), a.setDate(t(this._get(e, o.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - a.getDay())), e.input.attr("size", this._formatDate(e, a).length)
            }
        },
        _inlineDatepicker: function (t, i) {
            var s = e(t);
            s.hasClass(this.markerClassName) || (s.addClass(this.markerClassName).append(i.dpDiv), e.data(t, "datepicker", i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(t), i.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function (t, i, s, n, a) {
            var o, h, l, u, d, c = this._dialogInst;
            return c || (this.uuid += 1, o = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + o + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), e("body").append(this._dialogInput), c = this._dialogInst = this._newInst(this._dialogInput, !1), c.settings = {}, e.data(this._dialogInput[0], "datepicker", c)), r(c.settings, n || {}), i = i && i.constructor === Date ? this._formatDate(c, i) : i, this._dialogInput.val(i), this._pos = a ? a.length ? a : [a.pageX, a.pageY] : null, this._pos || (h = document.documentElement.clientWidth, l = document.documentElement.clientHeight, u = document.documentElement.scrollLeft || document.body.scrollLeft, d = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [h / 2 - 100 + u, l / 2 - 150 + d]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), c.settings.onSelect = s, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), e.data(this._dialogInput[0], "datepicker", c), this
        },
        _destroyDatepicker: function (t) {
            var i, s = e(t), n = e.data(t, "datepicker");
            s.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), e.removeData(t, "datepicker"), "input" === i ? (n.append.remove(), n.trigger.remove(), s.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === i || "span" === i) && s.removeClass(this.markerClassName).empty())
        },
        _enableDatepicker: function (t) {
            var i, s, n = e(t), a = e.data(t, "datepicker");
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), "input" === i ? (t.disabled = !1, a.trigger.filter("button").each(function () {
                this.disabled = !1
            }).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : ("div" === i || "span" === i) && (s = n.children("." + this._inlineClass), s.children().removeClass("ui-state-disabled"), s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = e.map(this._disabledInputs, function (e) {
                return e === t ? null : e
            }))
        },
        _disableDatepicker: function (t) {
            var i, s, n = e(t), a = e.data(t, "datepicker");
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), "input" === i ? (t.disabled = !0, a.trigger.filter("button").each(function () {
                this.disabled = !0
            }).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : ("div" === i || "span" === i) && (s = n.children("." + this._inlineClass), s.children().addClass("ui-state-disabled"), s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = e.map(this._disabledInputs, function (e) {
                return e === t ? null : e
            }), this._disabledInputs[this._disabledInputs.length] = t)
        },
        _isDisabledDatepicker: function (e) {
            if (!e) return !1;
            for (var t = 0; this._disabledInputs.length > t; t++) if (this._disabledInputs[t] === e) return !0;
            return !1
        },
        _getInst: function (t) {
            try {
                return e.data(t, "datepicker")
            } catch (i) {
                throw"Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function (t, i, s) {
            var n, a, o, h, l = this._getInst(t);
            return 2 === arguments.length && "string" == typeof i ? "defaults" === i ? e.extend({}, e.datepicker._defaults) : l ? "all" === i ? e.extend({}, l.settings) : this._get(l, i) : null : (n = i || {}, "string" == typeof i && (n = {}, n[i] = s), l && (this._curInst === l && this._hideDatepicker(), a = this._getDateDatepicker(t, !0), o = this._getMinMaxDate(l, "min"), h = this._getMinMaxDate(l, "max"), r(l.settings, n), null !== o && void 0 !== n.dateFormat && void 0 === n.minDate && (l.settings.minDate = this._formatDate(l, o)), null !== h && void 0 !== n.dateFormat && void 0 === n.maxDate && (l.settings.maxDate = this._formatDate(l, h)), "disabled" in n && (n.disabled ? this._disableDatepicker(t) : this._enableDatepicker(t)), this._attachments(e(t), l), this._autoSize(l), this._setDate(l, a), this._updateAlternate(l), this._updateDatepicker(l)), void 0)
        },
        _changeDatepicker: function (e, t, i) {
            this._optionDatepicker(e, t, i)
        },
        _refreshDatepicker: function (e) {
            var t = this._getInst(e);
            t && this._updateDatepicker(t)
        },
        _setDateDatepicker: function (e, t) {
            var i = this._getInst(e);
            i && (this._setDate(i, t), this._updateDatepicker(i), this._updateAlternate(i))
        },
        _getDateDatepicker: function (e, t) {
            var i = this._getInst(e);
            return i && !i.inline && this._setDateFromField(i, t), i ? this._getDate(i) : null
        },
        _doKeyDown: function (t) {
            var i, s, n, a = e.datepicker._getInst(t.target), o = !0, r = a.dpDiv.is(".ui-datepicker-rtl");
            if (a._keyEvent = !0, e.datepicker._datepickerShowing) switch (t.keyCode) {
                case 9:
                    e.datepicker._hideDatepicker(), o = !1;
                    break;
                case 13:
                    return n = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", a.dpDiv), n[0] && e.datepicker._selectDay(t.target, a.selectedMonth, a.selectedYear, n[0]), i = e.datepicker._get(a, "onSelect"), i ? (s = e.datepicker._formatDate(a), i.apply(a.input ? a.input[0] : null, [s, a])) : e.datepicker._hideDatepicker(), !1;
                case 27:
                    e.datepicker._hideDatepicker();
                    break;
                case 33:
                    e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(a, "stepBigMonths") : -e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 34:
                    e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(a, "stepBigMonths") : +e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 35:
                    (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), o = t.ctrlKey || t.metaKey;
                    break;
                case 36:
                    (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), o = t.ctrlKey || t.metaKey;
                    break;
                case 37:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, r ? 1 : -1, "D"), o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(a, "stepBigMonths") : -e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 38:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), o = t.ctrlKey || t.metaKey;
                    break;
                case 39:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, r ? -1 : 1, "D"), o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(a, "stepBigMonths") : +e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 40:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), o = t.ctrlKey || t.metaKey;
                    break;
                default:
                    o = !1
            } else 36 === t.keyCode && t.ctrlKey ? e.datepicker._showDatepicker(this) : o = !1;
            o && (t.preventDefault(), t.stopPropagation())
        },
        _doKeyPress: function (t) {
            var i, s, n = e.datepicker._getInst(t.target);
            return e.datepicker._get(n, "constrainInput") ? (i = e.datepicker._possibleChars(e.datepicker._get(n, "dateFormat")), s = String.fromCharCode(null == t.charCode ? t.keyCode : t.charCode), t.ctrlKey || t.metaKey || " " > s || !i || i.indexOf(s) > -1) : void 0
        },
        _doKeyUp: function (t) {
            var i, s = e.datepicker._getInst(t.target);
            if (s.input.val() !== s.lastVal) try {
                i = e.datepicker.parseDate(e.datepicker._get(s, "dateFormat"), s.input ? s.input.val() : null, e.datepicker._getFormatConfig(s)), i && (e.datepicker._setDateFromField(s), e.datepicker._updateAlternate(s), e.datepicker._updateDatepicker(s))
            } catch (n) {
            }
            return !0
        },
        _showDatepicker: function (t) {
            if (t = t.target || t, "input" !== t.nodeName.toLowerCase() && (t = e("input", t.parentNode)[0]), !e.datepicker._isDisabledDatepicker(t) && e.datepicker._lastInput !== t) {
                var i, n, a, o, h, l, u;
                i = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== i && (e.datepicker._curInst.dpDiv.stop(!0, !0), i && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), n = e.datepicker._get(i, "beforeShow"), a = n ? n.apply(t, [t, i]) : {}, a !== !1 && (r(i.settings, a), i.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(i), e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), e.datepicker._pos[1] += t.offsetHeight), o = !1, e(t).parents().each(function () {
                    return o |= "fixed" === e(this).css("position"), !o
                }), h = {
                    left: e.datepicker._pos[0],
                    top: e.datepicker._pos[1]
                }, e.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }), e.datepicker._updateDatepicker(i), h = e.datepicker._checkOffset(i, h, o), i.dpDiv.css({
                    position: e.datepicker._inDialog && e.blockUI ? "static" : o ? "fixed" : "absolute",
                    display: "none",
                    left: h.left + "px",
                    top: h.top + "px"
                }), i.inline || (l = e.datepicker._get(i, "showAnim"), u = e.datepicker._get(i, "duration"), i.dpDiv.css("z-index", s(e(t)) + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[l] ? i.dpDiv.show(l, e.datepicker._get(i, "showOptions"), u) : i.dpDiv[l || "show"](l ? u : null), e.datepicker._shouldFocusInput(i) && i.input.focus(), e.datepicker._curInst = i))
            }
        },
        _updateDatepicker: function (t) {
            this.maxRows = 4, v = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t);
            var i, s = this._getNumberOfMonths(t), n = s[1], a = 17, r = t.dpDiv.find("." + this._dayOverClass + " a");
            r.length > 0 && o.apply(r.get(0)), t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), n > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + n).css("width", a * n + "em"), t.dpDiv[(1 !== s[0] || 1 !== s[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.focus(), t.yearshtml && (i = t.yearshtml, setTimeout(function () {
                i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), i = t.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function (e) {
            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus")
        },
        _checkOffset: function (t, i, s) {
            var n = t.dpDiv.outerWidth(), a = t.dpDiv.outerHeight(), o = t.input ? t.input.outerWidth() : 0,
                r = t.input ? t.input.outerHeight() : 0,
                h = document.documentElement.clientWidth + (s ? 0 : e(document).scrollLeft()),
                l = document.documentElement.clientHeight + (s ? 0 : e(document).scrollTop());
            return i.left -= this._get(t, "isRTL") ? n - o : 0, i.left -= s && i.left === t.input.offset().left ? e(document).scrollLeft() : 0, i.top -= s && i.top === t.input.offset().top + r ? e(document).scrollTop() : 0, i.left -= Math.min(i.left, i.left + n > h && h > n ? Math.abs(i.left + n - h) : 0), i.top -= Math.min(i.top, i.top + a > l && l > a ? Math.abs(a + r) : 0), i
        },
        _findPos: function (t) {
            for (var i, s = this._getInst(t), n = this._get(s, "isRTL"); t && ("hidden" === t.type || 1 !== t.nodeType || e.expr.filters.hidden(t));) t = t[n ? "previousSibling" : "nextSibling"];
            return i = e(t).offset(), [i.left, i.top]
        },
        _hideDatepicker: function (t) {
            var i, s, n, a, o = this._curInst;
            !o || t && o !== e.data(t, "datepicker") || this._datepickerShowing && (i = this._get(o, "showAnim"), s = this._get(o, "duration"), n = function () {
                e.datepicker._tidyDialog(o)
            }, e.effects && (e.effects.effect[i] || e.effects[i]) ? o.dpDiv.hide(i, e.datepicker._get(o, "showOptions"), s, n) : o.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? s : null, n), i || n(), this._datepickerShowing = !1, a = this._get(o, "onClose"), a && a.apply(o.input ? o.input[0] : null, [o.input ? o.input.val() : "", o]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1)
        },
        _tidyDialog: function (e) {
            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function (t) {
            if (e.datepicker._curInst) {
                var i = e(t.target), s = e.datepicker._getInst(i[0]);
                (i[0].id !== e.datepicker._mainDivId && 0 === i.parents("#" + e.datepicker._mainDivId).length && !i.hasClass(e.datepicker.markerClassName) && !i.closest("." + e.datepicker._triggerClass).length && e.datepicker._datepickerShowing && (!e.datepicker._inDialog || !e.blockUI) || i.hasClass(e.datepicker.markerClassName) && e.datepicker._curInst !== s) && e.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function (t, i, s) {
            var n = e(t), a = this._getInst(n[0]);
            this._isDisabledDatepicker(n[0]) || (this._adjustInstDate(a, i + ("M" === s ? this._get(a, "showCurrentAtPos") : 0), s), this._updateDatepicker(a))
        },
        _gotoToday: function (t) {
            var i, s = e(t), n = this._getInst(s[0]);
            this._get(n, "gotoCurrent") && n.currentDay ? (n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear) : (i = new Date, n.selectedDay = i.getDate(), n.drawMonth = n.selectedMonth = i.getMonth(), n.drawYear = n.selectedYear = i.getFullYear()), this._notifyChange(n), this._adjustDate(s)
        },
        _selectMonthYear: function (t, i, s) {
            var n = e(t), a = this._getInst(n[0]);
            a["selected" + ("M" === s ? "Month" : "Year")] = a["draw" + ("M" === s ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), this._notifyChange(a), this._adjustDate(n)
        },
        _selectDay: function (t, i, s, n) {
            var a, o = e(t);
            e(n).hasClass(this._unselectableClass) || this._isDisabledDatepicker(o[0]) || (a = this._getInst(o[0]), a.selectedDay = a.currentDay = e("a", n).html(), a.selectedMonth = a.currentMonth = i, a.selectedYear = a.currentYear = s, this._selectDate(t, this._formatDate(a, a.currentDay, a.currentMonth, a.currentYear)))
        },
        _clearDate: function (t) {
            var i = e(t);
            this._selectDate(i, "")
        },
        _selectDate: function (t, i) {
            var s, n = e(t), a = this._getInst(n[0]);
            i = null != i ? i : this._formatDate(a), a.input && a.input.val(i), this._updateAlternate(a), s = this._get(a, "onSelect"), s ? s.apply(a.input ? a.input[0] : null, [i, a]) : a.input && a.input.trigger("change"), a.inline ? this._updateDatepicker(a) : (this._hideDatepicker(), this._lastInput = a.input[0], "object" != typeof a.input[0] && a.input.focus(), this._lastInput = null)
        },
        _updateAlternate: function (t) {
            var i, s, n, a = this._get(t, "altField");
            a && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"), s = this._getDate(t), n = this.formatDate(i, s, this._getFormatConfig(t)), e(a).each(function () {
                e(this).val(n)
            }))
        },
        noWeekends: function (e) {
            var t = e.getDay();
            return [t > 0 && 6 > t, ""]
        },
        iso8601Week: function (e) {
            var t, i = new Date(e.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), t = i.getTime(), i.setMonth(0), i.setDate(1), Math.floor(Math.round((t - i) / 864e5) / 7) + 1
        },
        parseDate: function (t, i, s) {
            if (null == t || null == i) throw"Invalid arguments";
            if (i = "object" == typeof i ? "" + i : i + "", "" === i) return null;
            var n, a, o, r, h = 0, l = (s ? s.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                u = "string" != typeof l ? l : (new Date).getFullYear() % 100 + parseInt(l, 10),
                d = (s ? s.dayNamesShort : null) || this._defaults.dayNamesShort,
                c = (s ? s.dayNames : null) || this._defaults.dayNames,
                p = (s ? s.monthNamesShort : null) || this._defaults.monthNamesShort,
                f = (s ? s.monthNames : null) || this._defaults.monthNames, m = -1, g = -1, v = -1, y = -1, b = !1,
                _ = function (e) {
                    var i = t.length > n + 1 && t.charAt(n + 1) === e;
                    return i && n++, i
                }, x = function (e) {
                    var t = _(e), s = "@" === e ? 14 : "!" === e ? 20 : "y" === e && t ? 4 : "o" === e ? 3 : 2,
                        n = "y" === e ? s : 1, a = RegExp("^\\d{" + n + "," + s + "}"), o = i.substring(h).match(a);
                    if (!o) throw"Missing number at position " + h;
                    return h += o[0].length, parseInt(o[0], 10)
                }, w = function (t, s, n) {
                    var a = -1, o = e.map(_(t) ? n : s, function (e, t) {
                        return [[t, e]]
                    }).sort(function (e, t) {
                        return -(e[1].length - t[1].length)
                    });
                    if (e.each(o, function (e, t) {
                        var s = t[1];
                        return i.substr(h, s.length).toLowerCase() === s.toLowerCase() ? (a = t[0], h += s.length, !1) : void 0
                    }), -1 !== a) return a + 1;
                    throw"Unknown name at position " + h
                }, k = function () {
                    if (i.charAt(h) !== t.charAt(n)) throw"Unexpected literal at position " + h;
                    h++
                };
            for (n = 0; t.length > n; n++) if (b) "'" !== t.charAt(n) || _("'") ? k() : b = !1; else switch (t.charAt(n)) {
                case"d":
                    v = x("d");
                    break;
                case"D":
                    w("D", d, c);
                    break;
                case"o":
                    y = x("o");
                    break;
                case"m":
                    g = x("m");
                    break;
                case"M":
                    g = w("M", p, f);
                    break;
                case"y":
                    m = x("y");
                    break;
                case"@":
                    r = new Date(x("@")), m = r.getFullYear(), g = r.getMonth() + 1, v = r.getDate();
                    break;
                case"!":
                    r = new Date((x("!") - this._ticksTo1970) / 1e4), m = r.getFullYear(), g = r.getMonth() + 1, v = r.getDate();
                    break;
                case"'":
                    _("'") ? k() : b = !0;
                    break;
                default:
                    k()
            }
            if (i.length > h && (o = i.substr(h), !/^\s+/.test(o))) throw"Extra/unparsed characters found in date: " + o;
            if (-1 === m ? m = (new Date).getFullYear() : 100 > m && (m += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (u >= m ? 0 : -100)), y > -1) for (g = 1, v = y; ;) {
                if (a = this._getDaysInMonth(m, g - 1), a >= v) break;
                g++, v -= a
            }
            if (r = this._daylightSavingAdjust(new Date(m, g - 1, v)), r.getFullYear() !== m || r.getMonth() + 1 !== g || r.getDate() !== v) throw"Invalid date";
            return r
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: 1e7 * 60 * 60 * 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
        formatDate: function (e, t, i) {
            if (!t) return "";
            var s, n = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                a = (i ? i.dayNames : null) || this._defaults.dayNames,
                o = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                r = (i ? i.monthNames : null) || this._defaults.monthNames, h = function (t) {
                    var i = e.length > s + 1 && e.charAt(s + 1) === t;
                    return i && s++, i
                }, l = function (e, t, i) {
                    var s = "" + t;
                    if (h(e)) for (; i > s.length;) s = "0" + s;
                    return s
                }, u = function (e, t, i, s) {
                    return h(e) ? s[t] : i[t]
                }, d = "", c = !1;
            if (t) for (s = 0; e.length > s; s++) if (c) "'" !== e.charAt(s) || h("'") ? d += e.charAt(s) : c = !1; else switch (e.charAt(s)) {
                case"d":
                    d += l("d", t.getDate(), 2);
                    break;
                case"D":
                    d += u("D", t.getDay(), n, a);
                    break;
                case"o":
                    d += l("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                    break;
                case"m":
                    d += l("m", t.getMonth() + 1, 2);
                    break;
                case"M":
                    d += u("M", t.getMonth(), o, r);
                    break;
                case"y":
                    d += h("y") ? t.getFullYear() : (10 > t.getYear() % 100 ? "0" : "") + t.getYear() % 100;
                    break;
                case"@":
                    d += t.getTime();
                    break;
                case"!":
                    d += 1e4 * t.getTime() + this._ticksTo1970;
                    break;
                case"'":
                    h("'") ? d += "'" : c = !0;
                    break;
                default:
                    d += e.charAt(s)
            }
            return d
        },
        _possibleChars: function (e) {
            var t, i = "", s = !1, n = function (i) {
                var s = e.length > t + 1 && e.charAt(t + 1) === i;
                return s && t++, s
            };
            for (t = 0; e.length > t; t++) if (s) "'" !== e.charAt(t) || n("'") ? i += e.charAt(t) : s = !1; else switch (e.charAt(t)) {
                case"d":
                case"m":
                case"y":
                case"@":
                    i += "0123456789";
                    break;
                case"D":
                case"M":
                    return null;
                case"'":
                    n("'") ? i += "'" : s = !0;
                    break;
                default:
                    i += e.charAt(t)
            }
            return i
        },
        _get: function (e, t) {
            return void 0 !== e.settings[t] ? e.settings[t] : this._defaults[t]
        },
        _setDateFromField: function (e, t) {
            if (e.input.val() !== e.lastVal) {
                var i = this._get(e, "dateFormat"), s = e.lastVal = e.input ? e.input.val() : null,
                    n = this._getDefaultDate(e), a = n, o = this._getFormatConfig(e);
                try {
                    a = this.parseDate(i, s, o) || n
                } catch (r) {
                    s = t ? "" : s
                }
                e.selectedDay = a.getDate(), e.drawMonth = e.selectedMonth = a.getMonth(), e.drawYear = e.selectedYear = a.getFullYear(), e.currentDay = s ? a.getDate() : 0, e.currentMonth = s ? a.getMonth() : 0, e.currentYear = s ? a.getFullYear() : 0, this._adjustInstDate(e)
            }
        },
        _getDefaultDate: function (e) {
            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
        },
        _determineDate: function (t, i, s) {
            var n = function (e) {
                    var t = new Date;
                    return t.setDate(t.getDate() + e), t
                }, a = function (i) {
                    try {
                        return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t))
                    } catch (s) {
                    }
                    for (var n = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date, a = n.getFullYear(), o = n.getMonth(), r = n.getDate(), h = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = h.exec(i); l;) {
                        switch (l[2] || "d") {
                            case"d":
                            case"D":
                                r += parseInt(l[1], 10);
                                break;
                            case"w":
                            case"W":
                                r += 7 * parseInt(l[1], 10);
                                break;
                            case"m":
                            case"M":
                                o += parseInt(l[1], 10), r = Math.min(r, e.datepicker._getDaysInMonth(a, o));
                                break;
                            case"y":
                            case"Y":
                                a += parseInt(l[1], 10), r = Math.min(r, e.datepicker._getDaysInMonth(a, o))
                        }
                        l = h.exec(i)
                    }
                    return new Date(a, o, r)
                },
                o = null == i || "" === i ? s : "string" == typeof i ? a(i) : "number" == typeof i ? isNaN(i) ? s : n(i) : new Date(i.getTime());
            return o = o && "Invalid Date" == "" + o ? s : o, o && (o.setHours(0), o.setMinutes(0), o.setSeconds(0), o.setMilliseconds(0)), this._daylightSavingAdjust(o)
        },
        _daylightSavingAdjust: function (e) {
            return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
        },
        _setDate: function (e, t, i) {
            var s = !t, n = e.selectedMonth, a = e.selectedYear,
                o = this._restrictMinMax(e, this._determineDate(e, t, new Date));
            e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), n === e.selectedMonth && a === e.selectedYear || i || this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(s ? "" : this._formatDate(e))
        },
        _getDate: function (e) {
            var t = !e.currentYear || e.input && "" === e.input.val() ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return t
        },
        _attachHandlers: function (t) {
            var i = this._get(t, "stepMonths"), s = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function () {
                var t = {
                    prev: function () {
                        e.datepicker._adjustDate(s, -i, "M")
                    }, next: function () {
                        e.datepicker._adjustDate(s, +i, "M")
                    }, hide: function () {
                        e.datepicker._hideDatepicker()
                    }, today: function () {
                        e.datepicker._gotoToday(s)
                    }, selectDay: function () {
                        return e.datepicker._selectDay(s, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                    }, selectMonth: function () {
                        return e.datepicker._selectMonthYear(s, this, "M"), !1
                    }, selectYear: function () {
                        return e.datepicker._selectMonthYear(s, this, "Y"), !1
                    }
                };
                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function (e) {
            var t, i, s, n, a, o, r, h, l, u, d, c, p, f, m, g, v, y, b, _, x, w, k, T, D, S, M, C, N, A, P, I, z, H, F,
                E, O, j, W, L = new Date,
                R = this._daylightSavingAdjust(new Date(L.getFullYear(), L.getMonth(), L.getDate())),
                Y = this._get(e, "isRTL"), B = this._get(e, "showButtonPanel"), J = this._get(e, "hideIfNoPrevNext"),
                q = this._get(e, "navigationAsDateFormat"), K = this._getNumberOfMonths(e),
                V = this._get(e, "showCurrentAtPos"), U = this._get(e, "stepMonths"), Q = 1 !== K[0] || 1 !== K[1],
                G = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                X = this._getMinMaxDate(e, "min"), $ = this._getMinMaxDate(e, "max"), Z = e.drawMonth - V,
                et = e.drawYear;
            if (0 > Z && (Z += 12, et--), $) for (t = this._daylightSavingAdjust(new Date($.getFullYear(), $.getMonth() - K[0] * K[1] + 1, $.getDate())), t = X && X > t ? X : t; this._daylightSavingAdjust(new Date(et, Z, 1)) > t;) Z--, 0 > Z && (Z = 11, et--);
            for (e.drawMonth = Z, e.drawYear = et, i = this._get(e, "prevText"), i = q ? this.formatDate(i, this._daylightSavingAdjust(new Date(et, Z - U, 1)), this._getFormatConfig(e)) : i, s = this._canAdjustMonth(e, -1, et, Z) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "e" : "w") + "'>" + i + "</span></a>" : J ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "e" : "w") + "'>" + i + "</span></a>", n = this._get(e, "nextText"), n = q ? this.formatDate(n, this._daylightSavingAdjust(new Date(et, Z + U, 1)), this._getFormatConfig(e)) : n, a = this._canAdjustMonth(e, 1, et, Z) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "w" : "e") + "'>" + n + "</span></a>" : J ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "w" : "e") + "'>" + n + "</span></a>", o = this._get(e, "currentText"), r = this._get(e, "gotoCurrent") && e.currentDay ? G : R, o = q ? this.formatDate(o, r, this._getFormatConfig(e)) : o, h = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", l = B ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (Y ? h : "") + (this._isInRange(e, r) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + o + "</button>" : "") + (Y ? "" : h) + "</div>" : "", u = parseInt(this._get(e, "firstDay"), 10), u = isNaN(u) ? 0 : u, d = this._get(e, "showWeek"), c = this._get(e, "dayNames"), p = this._get(e, "dayNamesMin"), f = this._get(e, "monthNames"), m = this._get(e, "monthNamesShort"), g = this._get(e, "beforeShowDay"), v = this._get(e, "showOtherMonths"), y = this._get(e, "selectOtherMonths"), b = this._getDefaultDate(e), _ = "", w = 0; K[0] > w; w++) {
                for (k = "", this.maxRows = 4, T = 0; K[1] > T; T++) {
                    if (D = this._daylightSavingAdjust(new Date(et, Z, e.selectedDay)), S = " ui-corner-all", M = "", Q) {
                        if (M += "<div class='ui-datepicker-group", K[1] > 1) switch (T) {
                            case 0:
                                M += " ui-datepicker-group-first", S = " ui-corner-" + (Y ? "right" : "left");
                                break;
                            case K[1] - 1:
                                M += " ui-datepicker-group-last", S = " ui-corner-" + (Y ? "left" : "right");
                                break;
                            default:
                                M += " ui-datepicker-group-middle", S = ""
                        }
                        M += "'>"
                    }
                    for (M += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + S + "'>" + (/all|left/.test(S) && 0 === w ? Y ? a : s : "") + (/all|right/.test(S) && 0 === w ? Y ? s : a : "") + this._generateMonthYearHeader(e, Z, et, X, $, w > 0 || T > 0, f, m) + "</div><table class='ui-datepicker-calendar'><thead>" + "<tr>", C = d ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "", x = 0; 7 > x; x++) N = (x + u) % 7, C += "<th scope='col'" + ((x + u + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" + "<span title='" + c[N] + "'>" + p[N] + "</span></th>";
                    for (M += C + "</tr></thead><tbody>", A = this._getDaysInMonth(et, Z), et === e.selectedYear && Z === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, A)), P = (this._getFirstDayOfMonth(et, Z) - u + 7) % 7, I = Math.ceil((P + A) / 7), z = Q ? this.maxRows > I ? this.maxRows : I : I, this.maxRows = z, H = this._daylightSavingAdjust(new Date(et, Z, 1 - P)), F = 0; z > F; F++) {
                        for (M += "<tr>", E = d ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(H) + "</td>" : "", x = 0; 7 > x; x++) O = g ? g.apply(e.input ? e.input[0] : null, [H]) : [!0, ""], j = H.getMonth() !== Z, W = j && !y || !O[0] || X && X > H || $ && H > $, E += "<td class='" + ((x + u + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (j ? " ui-datepicker-other-month" : "") + (H.getTime() === D.getTime() && Z === e.selectedMonth && e._keyEvent || b.getTime() === H.getTime() && b.getTime() === D.getTime() ? " " + this._dayOverClass : "") + (W ? " " + this._unselectableClass + " ui-state-disabled" : "") + (j && !v ? "" : " " + O[1] + (H.getTime() === G.getTime() ? " " + this._currentClass : "") + (H.getTime() === R.getTime() ? " ui-datepicker-today" : "")) + "'" + (j && !v || !O[2] ? "" : " title='" + O[2].replace(/'/g, "&#39;") + "'") + (W ? "" : " data-handler='selectDay' data-event='click' data-month='" + H.getMonth() + "' data-year='" + H.getFullYear() + "'") + ">" + (j && !v ? "&#xa0;" : W ? "<span class='ui-state-default'>" + H.getDate() + "</span>" : "<a class='ui-state-default" + (H.getTime() === R.getTime() ? " ui-state-highlight" : "") + (H.getTime() === G.getTime() ? " ui-state-active" : "") + (j ? " ui-priority-secondary" : "") + "' href='#'>" + H.getDate() + "</a>") + "</td>", H.setDate(H.getDate() + 1), H = this._daylightSavingAdjust(H);
                        M += E + "</tr>"
                    }
                    Z++, Z > 11 && (Z = 0, et++), M += "</tbody></table>" + (Q ? "</div>" + (K[0] > 0 && T === K[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), k += M
                }
                _ += k
            }
            return _ += l, e._keyEvent = !1, _
        },
        _generateMonthYearHeader: function (e, t, i, s, n, a, o, r) {
            var h, l, u, d, c, p, f, m, g = this._get(e, "changeMonth"), v = this._get(e, "changeYear"),
                y = this._get(e, "showMonthAfterYear"), b = "<div class='ui-datepicker-title'>", _ = "";
            if (a || !g) _ += "<span class='ui-datepicker-month'>" + o[t] + "</span>"; else {
                for (h = s && s.getFullYear() === i, l = n && n.getFullYear() === i, _ += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", u = 0; 12 > u; u++) (!h || u >= s.getMonth()) && (!l || n.getMonth() >= u) && (_ += "<option value='" + u + "'" + (u === t ? " selected='selected'" : "") + ">" + r[u] + "</option>");
                _ += "</select>"
            }
            if (y || (b += _ + (!a && g && v ? "" : "&#xa0;")), !e.yearshtml) if (e.yearshtml = "", a || !v) b += "<span class='ui-datepicker-year'>" + i + "</span>"; else {
                for (d = this._get(e, "yearRange").split(":"), c = (new Date).getFullYear(), p = function (e) {
                    var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? c + parseInt(e, 10) : parseInt(e, 10);
                    return isNaN(t) ? c : t
                }, f = p(d[0]), m = Math.max(f, p(d[1] || "")), f = s ? Math.max(f, s.getFullYear()) : f, m = n ? Math.min(m, n.getFullYear()) : m, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; m >= f; f++) e.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                e.yearshtml += "</select>", b += e.yearshtml, e.yearshtml = null
            }
            return b += this._get(e, "yearSuffix"), y && (b += (!a && g && v ? "" : "&#xa0;") + _), b += "</div>"
        },
        _adjustInstDate: function (e, t, i) {
            var s = e.drawYear + ("Y" === i ? t : 0), n = e.drawMonth + ("M" === i ? t : 0),
                a = Math.min(e.selectedDay, this._getDaysInMonth(s, n)) + ("D" === i ? t : 0),
                o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(s, n, a)));
            e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), ("M" === i || "Y" === i) && this._notifyChange(e)
        },
        _restrictMinMax: function (e, t) {
            var i = this._getMinMaxDate(e, "min"), s = this._getMinMaxDate(e, "max"), n = i && i > t ? i : t;
            return s && n > s ? s : n
        },
        _notifyChange: function (e) {
            var t = this._get(e, "onChangeMonthYear");
            t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
        },
        _getNumberOfMonths: function (e) {
            var t = this._get(e, "numberOfMonths");
            return null == t ? [1, 1] : "number" == typeof t ? [1, t] : t
        },
        _getMinMaxDate: function (e, t) {
            return this._determineDate(e, this._get(e, t + "Date"), null)
        },
        _getDaysInMonth: function (e, t) {
            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
        },
        _getFirstDayOfMonth: function (e, t) {
            return new Date(e, t, 1).getDay()
        },
        _canAdjustMonth: function (e, t, i, s) {
            var n = this._getNumberOfMonths(e),
                a = this._daylightSavingAdjust(new Date(i, s + (0 > t ? t : n[0] * n[1]), 1));
            return 0 > t && a.setDate(this._getDaysInMonth(a.getFullYear(), a.getMonth())), this._isInRange(e, a)
        },
        _isInRange: function (e, t) {
            var i, s, n = this._getMinMaxDate(e, "min"), a = this._getMinMaxDate(e, "max"), o = null, r = null,
                h = this._get(e, "yearRange");
            return h && (i = h.split(":"), s = (new Date).getFullYear(), o = parseInt(i[0], 10), r = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (o += s), i[1].match(/[+\-].*/) && (r += s)), (!n || t.getTime() >= n.getTime()) && (!a || t.getTime() <= a.getTime()) && (!o || t.getFullYear() >= o) && (!r || r >= t.getFullYear())
        },
        _getFormatConfig: function (e) {
            var t = this._get(e, "shortYearCutoff");
            return t = "string" != typeof t ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {
                shortYearCutoff: t,
                dayNamesShort: this._get(e, "dayNamesShort"),
                dayNames: this._get(e, "dayNames"),
                monthNamesShort: this._get(e, "monthNamesShort"),
                monthNames: this._get(e, "monthNames")
            }
        },
        _formatDate: function (e, t, i, s) {
            t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
            var n = t ? "object" == typeof t ? t : this._daylightSavingAdjust(new Date(s, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return this.formatDate(this._get(e, "dateFormat"), n, this._getFormatConfig(e))
        }
    }), e.fn.datepicker = function (t) {
        if (!this.length) return this;
        e.datepicker.initialized || (e(document).mousedown(e.datepicker._checkExternalClick), e.datepicker.initialized = !0), 0 === e("#" + e.datepicker._mainDivId).length && e("body").append(e.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof t || "isDisabled" !== t && "getDate" !== t && "widget" !== t ? "option" === t && 2 === arguments.length && "string" == typeof arguments[1] ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i)) : this.each(function () {
            "string" == typeof t ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this].concat(i)) : e.datepicker._attachDatepicker(this, t)
        }) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i))
    }, e.datepicker = new n, e.datepicker.initialized = !1, e.datepicker.uuid = (new Date).getTime(), e.datepicker.version = "1.11.2", e.datepicker, e.widget("ui.draggable", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function () {
            "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._setHandleClassName(), this._mouseInit()
        },
        _setOption: function (e, t) {
            this._super(e, t), "handle" === e && (this._removeHandleClassName(), this._setHandleClassName())
        },
        _destroy: function () {
            return (this.helper || this.element).is(".ui-draggable-dragging") ? (this.destroyOnClear = !0, void 0) : (this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._removeHandleClassName(), this._mouseDestroy(), void 0)
        },
        _mouseCapture: function (t) {
            var i = this.options;
            return this._blurActiveElement(t), this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(t), this.handle ? (this._blockFrames(i.iframeFix === !0 ? "iframe" : i.iframeFix), !0) : !1)
        },
        _blockFrames: function (t) {
            this.iframeBlocks = this.document.find(t).map(function () {
                var t = e(this);
                return e("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]
            })
        },
        _unblockFrames: function () {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
        },
        _blurActiveElement: function (t) {
            var i = this.document[0];
            if (this.handleElement.is(t.target)) try {
                i.activeElement && "body" !== i.activeElement.nodeName.toLowerCase() && e(i.activeElement).blur()
            } catch (s) {
            }
        },
        _mouseStart: function (t) {
            var i = this.options;
            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function () {
                return "fixed" === e(this).css("position")
            }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", t) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._normalizeRightBottom(), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
        },
        _refreshOffsets: function (e) {
            this.offset = {
                top: this.positionAbs.top - this.margins.top,
                left: this.positionAbs.left - this.margins.left,
                scroll: !1,
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }, this.offset.click = {left: e.pageX - this.offset.left, top: e.pageY - this.offset.top}
        },
        _mouseDrag: function (t, i) {
            if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) {
                var s = this._uiHash();
                if (this._trigger("drag", t, s) === !1) return this._mouseUp({}), !1;
                this.position = s.position
            }
            return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
        },
        _mouseStop: function (t) {
            var i = this, s = !1;
            return e.ui.ddmanager && !this.options.dropBehaviour && (s = e.ui.ddmanager.drop(this, t)), this.dropped && (s = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !s || "valid" === this.options.revert && s || this.options.revert === !0 || e.isFunction(this.options.revert) && this.options.revert.call(this.element, s) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
                i._trigger("stop", t) !== !1 && i._clear()
            }) : this._trigger("stop", t) !== !1 && this._clear(), !1
        },
        _mouseUp: function (t) {
            return this._unblockFrames(), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), this.handleElement.is(t.target) && this.element.focus(), e.ui.mouse.prototype._mouseUp.call(this, t)
        },
        cancel: function () {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
        },
        _getHandle: function (t) {
            return this.options.handle ? !!e(t.target).closest(this.element.find(this.options.handle)).length : !0
        },
        _setHandleClassName: function () {
            this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this.handleElement.addClass("ui-draggable-handle")
        },
        _removeHandleClassName: function () {
            this.handleElement.removeClass("ui-draggable-handle")
        },
        _createHelper: function (t) {
            var i = this.options, s = e.isFunction(i.helper),
                n = s ? e(i.helper.apply(this.element[0], [t])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), s && n[0] === this.element[0] && this._setPositionRelative(), n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), n
        },
        _setPositionRelative: function () {
            /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
        },
        _adjustOffsetFromHelper: function (t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _isRootNode: function (e) {
            return /(html|body)/i.test(e.tagName) || e === this.document[0]
        },
        _getParentOffset: function () {
            var t = this.offsetParent.offset(), i = this.document[0];
            return "absolute" === this.cssPosition && this.scrollParent[0] !== i && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function () {
            if ("relative" !== this.cssPosition) return {top: 0, left: 0};
            var e = this.element.position(), t = this._isRootNode(this.scrollParent[0]);
            return {
                top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()),
                left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft())
            }
        },
        _cacheMargins: function () {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function () {
            this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
        },
        _setContainment: function () {
            var t, i, s, n = this.options, a = this.document[0];
            return this.relativeContainer = null, n.containment ? "window" === n.containment ? (this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || a.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], void 0) : "document" === n.containment ? (this.containment = [0, 0, e(a).width() - this.helperProportions.width - this.margins.left, (e(a).height() || a.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], void 0) : n.containment.constructor === Array ? (this.containment = n.containment, void 0) : ("parent" === n.containment && (n.containment = this.helper[0].parentNode), i = e(n.containment), s = i[0], s && (t = /(scroll|auto)/.test(i.css("overflow")), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(s.scrollWidth, s.offsetWidth) : s.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(s.scrollHeight, s.offsetHeight) : s.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = i), void 0) : (this.containment = null, void 0)
        },
        _convertPositionTo: function (e, t) {
            t || (t = this.position);
            var i = "absolute" === e ? 1 : -1, s = this._isRootNode(this.scrollParent[0]);
            return {
                top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : s ? 0 : this.offset.scroll.top) * i,
                left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : s ? 0 : this.offset.scroll.left) * i
            }
        },
        _generatePosition: function (e, t) {
            var i, s, n, a, o = this.options, r = this._isRootNode(this.scrollParent[0]), h = e.pageX, l = e.pageY;
            return r && this.offset.scroll || (this.offset.scroll = {
                top: this.scrollParent.scrollTop(),
                left: this.scrollParent.scrollLeft()
            }), t && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), i = [this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top]) : i = this.containment, e.pageX - this.offset.click.left < i[0] && (h = i[0] + this.offset.click.left), e.pageY - this.offset.click.top < i[1] && (l = i[1] + this.offset.click.top), e.pageX - this.offset.click.left > i[2] && (h = i[2] + this.offset.click.left), e.pageY - this.offset.click.top > i[3] && (l = i[3] + this.offset.click.top)), o.grid && (n = o.grid[1] ? this.originalPageY + Math.round((l - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, l = i ? n - this.offset.click.top >= i[1] || n - this.offset.click.top > i[3] ? n : n - this.offset.click.top >= i[1] ? n - o.grid[1] : n + o.grid[1] : n, a = o.grid[0] ? this.originalPageX + Math.round((h - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, h = i ? a - this.offset.click.left >= i[0] || a - this.offset.click.left > i[2] ? a : a - this.offset.click.left >= i[0] ? a - o.grid[0] : a + o.grid[0] : a), "y" === o.axis && (h = this.originalPageX), "x" === o.axis && (l = this.originalPageY)), {
                top: l - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top),
                left: h - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left)
            }
        },
        _clear: function () {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy()
        },
        _normalizeRightBottom: function () {
            "y" !== this.options.axis && "auto" !== this.helper.css("right") && (this.helper.width(this.helper.width()), this.helper.css("right", "auto")), "x" !== this.options.axis && "auto" !== this.helper.css("bottom") && (this.helper.height(this.helper.height()), this.helper.css("bottom", "auto"))
        },
        _trigger: function (t, i, s) {
            return s = s || this._uiHash(), e.ui.plugin.call(this, t, [i, s, this], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), s.offset = this.positionAbs), e.Widget.prototype._trigger.call(this, t, i, s)
        },
        plugins: {},
        _uiHash: function () {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    }), e.ui.plugin.add("draggable", "connectToSortable", {
        start: function (t, i, s) {
            var n = e.extend({}, i, {item: s.element});
            s.sortables = [], e(s.options.connectToSortable).each(function () {
                var i = e(this).sortable("instance");
                i && !i.options.disabled && (s.sortables.push(i), i.refreshPositions(), i._trigger("activate", t, n))
            })
        }, stop: function (t, i, s) {
            var n = e.extend({}, i, {item: s.element});
            s.cancelHelperRemoval = !1, e.each(s.sortables, function () {
                var e = this;
                e.isOver ? (e.isOver = 0, s.cancelHelperRemoval = !0, e.cancelHelperRemoval = !1, e._storedCSS = {
                    position: e.placeholder.css("position"),
                    top: e.placeholder.css("top"),
                    left: e.placeholder.css("left")
                }, e._mouseStop(t), e.options.helper = e.options._helper) : (e.cancelHelperRemoval = !0, e._trigger("deactivate", t, n))
            })
        }, drag: function (t, i, s) {
            e.each(s.sortables, function () {
                var n = !1, a = this;
                a.positionAbs = s.positionAbs, a.helperProportions = s.helperProportions, a.offset.click = s.offset.click, a._intersectsWith(a.containerCache) && (n = !0, e.each(s.sortables, function () {
                    return this.positionAbs = s.positionAbs, this.helperProportions = s.helperProportions, this.offset.click = s.offset.click, this !== a && this._intersectsWith(this.containerCache) && e.contains(a.element[0], this.element[0]) && (n = !1), n
                })), n ? (a.isOver || (a.isOver = 1, a.currentItem = i.helper.appendTo(a.element).data("ui-sortable-item", !0), a.options._helper = a.options.helper, a.options.helper = function () {
                    return i.helper[0]
                }, t.target = a.currentItem[0], a._mouseCapture(t, !0), a._mouseStart(t, !0, !0), a.offset.click.top = s.offset.click.top, a.offset.click.left = s.offset.click.left, a.offset.parent.left -= s.offset.parent.left - a.offset.parent.left, a.offset.parent.top -= s.offset.parent.top - a.offset.parent.top, s._trigger("toSortable", t), s.dropped = a.element, e.each(s.sortables, function () {
                    this.refreshPositions()
                }), s.currentItem = s.element, a.fromOutside = s), a.currentItem && (a._mouseDrag(t), i.position = a.position)) : a.isOver && (a.isOver = 0, a.cancelHelperRemoval = !0, a.options._revert = a.options.revert, a.options.revert = !1, a._trigger("out", t, a._uiHash(a)), a._mouseStop(t, !0), a.options.revert = a.options._revert, a.options.helper = a.options._helper, a.placeholder && a.placeholder.remove(), s._refreshOffsets(t), i.position = s._generatePosition(t, !0), s._trigger("fromSortable", t), s.dropped = !1, e.each(s.sortables, function () {
                    this.refreshPositions()
                }))
            })
        }
    }), e.ui.plugin.add("draggable", "cursor", {
        start: function (t, i, s) {
            var n = e("body"), a = s.options;
            n.css("cursor") && (a._cursor = n.css("cursor")), n.css("cursor", a.cursor)
        }, stop: function (t, i, s) {
            var n = s.options;
            n._cursor && e("body").css("cursor", n._cursor)
        }
    }), e.ui.plugin.add("draggable", "opacity", {
        start: function (t, i, s) {
            var n = e(i.helper), a = s.options;
            n.css("opacity") && (a._opacity = n.css("opacity")), n.css("opacity", a.opacity)
        }, stop: function (t, i, s) {
            var n = s.options;
            n._opacity && e(i.helper).css("opacity", n._opacity)
        }
    }), e.ui.plugin.add("draggable", "scroll", {
        start: function (e, t, i) {
            i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset())
        }, drag: function (t, i, s) {
            var n = s.options, a = !1, o = s.scrollParentNotHidden[0], r = s.document[0];
            o !== r && "HTML" !== o.tagName ? (n.axis && "x" === n.axis || (s.overflowOffset.top + o.offsetHeight - t.pageY < n.scrollSensitivity ? o.scrollTop = a = o.scrollTop + n.scrollSpeed : t.pageY - s.overflowOffset.top < n.scrollSensitivity && (o.scrollTop = a = o.scrollTop - n.scrollSpeed)), n.axis && "y" === n.axis || (s.overflowOffset.left + o.offsetWidth - t.pageX < n.scrollSensitivity ? o.scrollLeft = a = o.scrollLeft + n.scrollSpeed : t.pageX - s.overflowOffset.left < n.scrollSensitivity && (o.scrollLeft = a = o.scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (t.pageY - e(r).scrollTop() < n.scrollSensitivity ? a = e(r).scrollTop(e(r).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(r).scrollTop()) < n.scrollSensitivity && (a = e(r).scrollTop(e(r).scrollTop() + n.scrollSpeed))), n.axis && "y" === n.axis || (t.pageX - e(r).scrollLeft() < n.scrollSensitivity ? a = e(r).scrollLeft(e(r).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(r).scrollLeft()) < n.scrollSensitivity && (a = e(r).scrollLeft(e(r).scrollLeft() + n.scrollSpeed)))), a !== !1 && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(s, t)
        }
    }), e.ui.plugin.add("draggable", "snap", {
        start: function (t, i, s) {
            var n = s.options;
            s.snapElements = [], e(n.snap.constructor !== String ? n.snap.items || ":data(ui-draggable)" : n.snap).each(function () {
                var t = e(this), i = t.offset();
                this !== s.element[0] && s.snapElements.push({
                    item: this,
                    width: t.outerWidth(),
                    height: t.outerHeight(),
                    top: i.top,
                    left: i.left
                })
            })
        }, drag: function (t, i, s) {
            var n, a, o, r, h, l, u, d, c, p, f = s.options, m = f.snapTolerance, g = i.offset.left,
                v = g + s.helperProportions.width, y = i.offset.top, b = y + s.helperProportions.height;
            for (c = s.snapElements.length - 1; c >= 0; c--) h = s.snapElements[c].left - s.margins.left, l = h + s.snapElements[c].width, u = s.snapElements[c].top - s.margins.top, d = u + s.snapElements[c].height, h - m > v || g > l + m || u - m > b || y > d + m || !e.contains(s.snapElements[c].item.ownerDocument, s.snapElements[c].item) ? (s.snapElements[c].snapping && s.options.snap.release && s.options.snap.release.call(s.element, t, e.extend(s._uiHash(), {snapItem: s.snapElements[c].item})), s.snapElements[c].snapping = !1) : ("inner" !== f.snapMode && (n = m >= Math.abs(u - b), a = m >= Math.abs(d - y), o = m >= Math.abs(h - v), r = m >= Math.abs(l - g), n && (i.position.top = s._convertPositionTo("relative", {
                top: u - s.helperProportions.height,
                left: 0
            }).top), a && (i.position.top = s._convertPositionTo("relative", {
                top: d,
                left: 0
            }).top), o && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: h - s.helperProportions.width
            }).left), r && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: l
            }).left)), p = n || a || o || r, "outer" !== f.snapMode && (n = m >= Math.abs(u - y), a = m >= Math.abs(d - b), o = m >= Math.abs(h - g), r = m >= Math.abs(l - v), n && (i.position.top = s._convertPositionTo("relative", {
                top: u,
                left: 0
            }).top), a && (i.position.top = s._convertPositionTo("relative", {
                top: d - s.helperProportions.height,
                left: 0
            }).top), o && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: h
            }).left), r && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: l - s.helperProportions.width
            }).left)), !s.snapElements[c].snapping && (n || a || o || r || p) && s.options.snap.snap && s.options.snap.snap.call(s.element, t, e.extend(s._uiHash(), {snapItem: s.snapElements[c].item})), s.snapElements[c].snapping = n || a || o || r || p)
        }
    }), e.ui.plugin.add("draggable", "stack", {
        start: function (t, i, s) {
            var n, a = s.options, o = e.makeArray(e(a.stack)).sort(function (t, i) {
                return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0)
            });
            o.length && (n = parseInt(e(o[0]).css("zIndex"), 10) || 0, e(o).each(function (t) {
                e(this).css("zIndex", n + t)
            }), this.css("zIndex", n + o.length))
        }
    }), e.ui.plugin.add("draggable", "zIndex", {
        start: function (t, i, s) {
            var n = e(i.helper), a = s.options;
            n.css("zIndex") && (a._zIndex = n.css("zIndex")), n.css("zIndex", a.zIndex)
        }, stop: function (t, i, s) {
            var n = s.options;
            n._zIndex && e(i.helper).css("zIndex", n._zIndex)
        }
    }), e.ui.draggable, e.widget("ui.resizable", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _num: function (e) {
            return parseInt(e, 10) || 0
        },
        _isNumber: function (e) {
            return !isNaN(parseInt(e, 10))
        },
        _hasScroll: function (t, i) {
            if ("hidden" === e(t).css("overflow")) return !1;
            var s = i && "left" === i ? "scrollLeft" : "scrollTop", n = !1;
            return t[s] > 0 ? !0 : (t[s] = 1, n = t[s] > 0, t[s] = 0, n)
        },
        _create: function () {
            var t, i, s, n, a, o = this, r = this.options;
            if (this.element.addClass("ui-resizable"), e.extend(this, {
                _aspectRatio: !!r.aspectRatio,
                aspectRatio: r.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: r.helper || r.ghost || r.animate ? r.helper || "ui-resizable-helper" : null
            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({
                marginLeft: this.originalElement.css("marginLeft"),
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom")
            }), this.originalElement.css({
                marginLeft: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0
            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })), this.originalElement.css({margin: this.originalElement.css("margin")}), this._proportionallyResize()), this.handles = r.handles || (e(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se"), this.handles.constructor === String) for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), t = this.handles.split(","), this.handles = {}, i = 0; t.length > i; i++) s = e.trim(t[i]), a = "ui-resizable-" + s, n = e("<div class='ui-resizable-handle " + a + "'></div>"), n.css({zIndex: r.zIndex}), "se" === s && n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[s] = ".ui-resizable-" + s, this.element.append(n);
            this._renderAxis = function (t) {
                var i, s, n, a;
                t = t || this.element;
                for (i in this.handles) this.handles[i].constructor === String && (this.handles[i] = this.element.children(this.handles[i]).first().show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (s = e(this.handles[i], this.element), a = /sw|ne|nw|se|n|s/.test(i) ? s.outerHeight() : s.outerWidth(), n = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), t.css(n, a), this._proportionallyResize()), e(this.handles[i]).length
            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function () {
                o.resizing || (this.className && (n = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), o.axis = n && n[1] ? n[1] : "se")
            }), r.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function () {
                r.disabled || (e(this).removeClass("ui-resizable-autohide"), o._handles.show())
            }).mouseleave(function () {
                r.disabled || o.resizing || (e(this).addClass("ui-resizable-autohide"), o._handles.hide())
            })), this._mouseInit()
        },
        _destroy: function () {
            this._mouseDestroy();
            var t, i = function (t) {
                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
            };
            return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({
                position: t.css("position"),
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: t.css("top"),
                left: t.css("left")
            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this
        },
        _mouseCapture: function (t) {
            var i, s, n = !1;
            for (i in this.handles) s = e(this.handles[i])[0], (s === t.target || e.contains(s, t.target)) && (n = !0);
            return !this.options.disabled && n
        },
        _mouseStart: function (t) {
            var i, s, n, a = this.options, o = this.element;
            return this.resizing = !0, this._renderProxy(), i = this._num(this.helper.css("left")), s = this._num(this.helper.css("top")), a.containment && (i += e(a.containment).scrollLeft() || 0, s += e(a.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                left: i,
                top: s
            }, this.size = this._helper ? {
                width: this.helper.width(),
                height: this.helper.height()
            } : {width: o.width(), height: o.height()}, this.originalSize = this._helper ? {
                width: o.outerWidth(),
                height: o.outerHeight()
            } : {width: o.width(), height: o.height()}, this.sizeDiff = {
                width: o.outerWidth() - o.width(),
                height: o.outerHeight() - o.height()
            }, this.originalPosition = {left: i, top: s}, this.originalMousePosition = {
                left: t.pageX,
                top: t.pageY
            }, this.aspectRatio = "number" == typeof a.aspectRatio ? a.aspectRatio : this.originalSize.width / this.originalSize.height || 1, n = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === n ? this.axis + "-resize" : n), o.addClass("ui-resizable-resizing"), this._propagate("start", t), !0
        },
        _mouseDrag: function (t) {
            var i, s, n = this.originalMousePosition, a = this.axis, o = t.pageX - n.left || 0,
                r = t.pageY - n.top || 0, h = this._change[a];
            return this._updatePrevProperties(), h ? (i = h.apply(this, [t, o, r]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), this._updateCache(i), this._propagate("resize", t), s = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), e.isEmptyObject(s) || (this._updatePrevProperties(), this._trigger("resize", t, this.ui()), this._applyChanges()), !1) : !1
        },
        _mouseStop: function (t) {
            this.resizing = !1;
            var i, s, n, a, o, r, h, l = this.options, u = this;
            return this._helper && (i = this._proportionallyResizeElements, s = i.length && /textarea/i.test(i[0].nodeName), n = s && this._hasScroll(i[0], "left") ? 0 : u.sizeDiff.height, a = s ? 0 : u.sizeDiff.width, o = {
                width: u.helper.width() - a,
                height: u.helper.height() - n
            }, r = parseInt(u.element.css("left"), 10) + (u.position.left - u.originalPosition.left) || null, h = parseInt(u.element.css("top"), 10) + (u.position.top - u.originalPosition.top) || null, l.animate || this.element.css(e.extend(o, {
                top: h,
                left: r
            })), u.helper.height(u.size.height), u.helper.width(u.size.width), this._helper && !l.animate && this._proportionallyResize()), e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1
        },
        _updatePrevProperties: function () {
            this.prevPosition = {
                top: this.position.top,
                left: this.position.left
            }, this.prevSize = {width: this.size.width, height: this.size.height}
        },
        _applyChanges: function () {
            var e = {};
            return this.position.top !== this.prevPosition.top && (e.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (e.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (e.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (e.height = this.size.height + "px"), this.helper.css(e), e
        },
        _updateVirtualBoundaries: function (e) {
            var t, i, s, n, a, o = this.options;
            a = {
                minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,
                maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : 1 / 0,
                minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,
                maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : 1 / 0
            }, (this._aspectRatio || e) && (t = a.minHeight * this.aspectRatio, s = a.minWidth / this.aspectRatio, i = a.maxHeight * this.aspectRatio, n = a.maxWidth / this.aspectRatio, t > a.minWidth && (a.minWidth = t), s > a.minHeight && (a.minHeight = s), a.maxWidth > i && (a.maxWidth = i), a.maxHeight > n && (a.maxHeight = n)), this._vBoundaries = a
        },
        _updateCache: function (e) {
            this.offset = this.helper.offset(), this._isNumber(e.left) && (this.position.left = e.left), this._isNumber(e.top) && (this.position.top = e.top), this._isNumber(e.height) && (this.size.height = e.height), this._isNumber(e.width) && (this.size.width = e.width)
        },
        _updateRatio: function (e) {
            var t = this.position, i = this.size, s = this.axis;
            return this._isNumber(e.height) ? e.width = e.height * this.aspectRatio : this._isNumber(e.width) && (e.height = e.width / this.aspectRatio), "sw" === s && (e.left = t.left + (i.width - e.width), e.top = null), "nw" === s && (e.top = t.top + (i.height - e.height), e.left = t.left + (i.width - e.width)), e
        },
        _respectSize: function (e) {
            var t = this._vBoundaries, i = this.axis, s = this._isNumber(e.width) && t.maxWidth && t.maxWidth < e.width,
                n = this._isNumber(e.height) && t.maxHeight && t.maxHeight < e.height,
                a = this._isNumber(e.width) && t.minWidth && t.minWidth > e.width,
                o = this._isNumber(e.height) && t.minHeight && t.minHeight > e.height,
                r = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height,
                l = /sw|nw|w/.test(i), u = /nw|ne|n/.test(i);
            return a && (e.width = t.minWidth), o && (e.height = t.minHeight), s && (e.width = t.maxWidth), n && (e.height = t.maxHeight), a && l && (e.left = r - t.minWidth), s && l && (e.left = r - t.maxWidth), o && u && (e.top = h - t.minHeight), n && u && (e.top = h - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, e
        },
        _getPaddingPlusBorderDimensions: function (e) {
            for (var t = 0, i = [], s = [e.css("borderTopWidth"), e.css("borderRightWidth"), e.css("borderBottomWidth"), e.css("borderLeftWidth")], n = [e.css("paddingTop"), e.css("paddingRight"), e.css("paddingBottom"), e.css("paddingLeft")]; 4 > t; t++) i[t] = parseInt(s[t], 10) || 0, i[t] += parseInt(n[t], 10) || 0;
            return {height: i[0] + i[2], width: i[1] + i[3]}
        },
        _proportionallyResize: function () {
            if (this._proportionallyResizeElements.length) for (var e, t = 0, i = this.helper || this.element; this._proportionallyResizeElements.length > t; t++) e = this._proportionallyResizeElements[t], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(e)), e.css({
                height: i.height() - this.outerDimensions.height || 0,
                width: i.width() - this.outerDimensions.width || 0
            })
        },
        _renderProxy: function () {
            var t = this.element, i = this.options;
            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({
                width: this.element.outerWidth() - 1,
                height: this.element.outerHeight() - 1,
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++i.zIndex
            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        },
        _change: {
            e: function (e, t) {
                return {width: this.originalSize.width + t}
            }, w: function (e, t) {
                var i = this.originalSize, s = this.originalPosition;
                return {left: s.left + t, width: i.width - t}
            }, n: function (e, t, i) {
                var s = this.originalSize, n = this.originalPosition;
                return {top: n.top + i, height: s.height - i}
            }, s: function (e, t, i) {
                return {height: this.originalSize.height + i}
            }, se: function (t, i, s) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, s]))
            }, sw: function (t, i, s) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, s]))
            }, ne: function (t, i, s) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, s]))
            }, nw: function (t, i, s) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, s]))
            }
        },
        _propagate: function (t, i) {
            e.ui.plugin.call(this, t, [i, this.ui()]), "resize" !== t && this._trigger(t, i, this.ui())
        },
        plugins: {},
        ui: function () {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    }), e.ui.plugin.add("resizable", "animate", {
        stop: function (t) {
            var i = e(this).resizable("instance"), s = i.options, n = i._proportionallyResizeElements,
                a = n.length && /textarea/i.test(n[0].nodeName),
                o = a && i._hasScroll(n[0], "left") ? 0 : i.sizeDiff.height, r = a ? 0 : i.sizeDiff.width,
                h = {width: i.size.width - r, height: i.size.height - o},
                l = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null,
                u = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(e.extend(h, u && l ? {top: u, left: l} : {}), {
                duration: s.animateDuration,
                easing: s.animateEasing,
                step: function () {
                    var s = {
                        width: parseInt(i.element.css("width"), 10),
                        height: parseInt(i.element.css("height"), 10),
                        top: parseInt(i.element.css("top"), 10),
                        left: parseInt(i.element.css("left"), 10)
                    };
                    n && n.length && e(n[0]).css({
                        width: s.width,
                        height: s.height
                    }), i._updateCache(s), i._propagate("resize", t)
                }
            })
        }
    }), e.ui.plugin.add("resizable", "containment", {
        start: function () {
            var t, i, s, n, a, o, r, h = e(this).resizable("instance"), l = h.options, u = h.element, d = l.containment,
                c = d instanceof e ? d.get(0) : /parent/.test(d) ? u.parent().get(0) : d;
            c && (h.containerElement = e(c), /document/.test(d) || d === document ? (h.containerOffset = {
                left: 0,
                top: 0
            }, h.containerPosition = {left: 0, top: 0}, h.parentData = {
                element: e(document),
                left: 0,
                top: 0,
                width: e(document).width(),
                height: e(document).height() || document.body.parentNode.scrollHeight
            }) : (t = e(c), i = [], e(["Top", "Right", "Left", "Bottom"]).each(function (e, s) {
                i[e] = h._num(t.css("padding" + s))
            }), h.containerOffset = t.offset(), h.containerPosition = t.position(), h.containerSize = {
                height: t.innerHeight() - i[3],
                width: t.innerWidth() - i[1]
            }, s = h.containerOffset, n = h.containerSize.height, a = h.containerSize.width, o = h._hasScroll(c, "left") ? c.scrollWidth : a, r = h._hasScroll(c) ? c.scrollHeight : n, h.parentData = {
                element: c,
                left: s.left,
                top: s.top,
                width: o,
                height: r
            }))
        }, resize: function (t) {
            var i, s, n, a, o = e(this).resizable("instance"), r = o.options, h = o.containerOffset, l = o.position,
                u = o._aspectRatio || t.shiftKey, d = {top: 0, left: 0}, c = o.containerElement, p = !0;
            c[0] !== document && /static/.test(c.css("position")) && (d = h), l.left < (o._helper ? h.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - h.left : o.position.left - d.left), u && (o.size.height = o.size.width / o.aspectRatio, p = !1), o.position.left = r.helper ? h.left : 0), l.top < (o._helper ? h.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - h.top : o.position.top), u && (o.size.width = o.size.height * o.aspectRatio, p = !1), o.position.top = o._helper ? h.top : 0), n = o.containerElement.get(0) === o.element.parent().get(0), a = /relative|absolute/.test(o.containerElement.css("position")), n && a ? (o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top) : (o.offset.left = o.element.offset().left, o.offset.top = o.element.offset().top), i = Math.abs(o.sizeDiff.width + (o._helper ? o.offset.left - d.left : o.offset.left - h.left)), s = Math.abs(o.sizeDiff.height + (o._helper ? o.offset.top - d.top : o.offset.top - h.top)), i + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - i, u && (o.size.height = o.size.width / o.aspectRatio, p = !1)), s + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - s, u && (o.size.width = o.size.height * o.aspectRatio, p = !1)), p || (o.position.left = o.prevPosition.left, o.position.top = o.prevPosition.top, o.size.width = o.prevSize.width, o.size.height = o.prevSize.height)
        }, stop: function () {
            var t = e(this).resizable("instance"), i = t.options, s = t.containerOffset, n = t.containerPosition,
                a = t.containerElement, o = e(t.helper), r = o.offset(), h = o.outerWidth() - t.sizeDiff.width,
                l = o.outerHeight() - t.sizeDiff.height;
            t._helper && !i.animate && /relative/.test(a.css("position")) && e(this).css({
                left: r.left - n.left - s.left,
                width: h,
                height: l
            }), t._helper && !i.animate && /static/.test(a.css("position")) && e(this).css({
                left: r.left - n.left - s.left,
                width: h,
                height: l
            })
        }
    }), e.ui.plugin.add("resizable", "alsoResize", {
        start: function () {
            var t = e(this).resizable("instance"), i = t.options, s = function (t) {
                e(t).each(function () {
                    var t = e(this);
                    t.data("ui-resizable-alsoresize", {
                        width: parseInt(t.width(), 10),
                        height: parseInt(t.height(), 10),
                        left: parseInt(t.css("left"), 10),
                        top: parseInt(t.css("top"), 10)
                    })
                })
            };
            "object" != typeof i.alsoResize || i.alsoResize.parentNode ? s(i.alsoResize) : i.alsoResize.length ? (i.alsoResize = i.alsoResize[0], s(i.alsoResize)) : e.each(i.alsoResize, function (e) {
                s(e)
            })
        }, resize: function (t, i) {
            var s = e(this).resizable("instance"), n = s.options, a = s.originalSize, o = s.originalPosition, r = {
                height: s.size.height - a.height || 0,
                width: s.size.width - a.width || 0,
                top: s.position.top - o.top || 0,
                left: s.position.left - o.left || 0
            }, h = function (t, s) {
                e(t).each(function () {
                    var t = e(this), n = e(this).data("ui-resizable-alsoresize"), a = {},
                        o = s && s.length ? s : t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    e.each(o, function (e, t) {
                        var i = (n[t] || 0) + (r[t] || 0);
                        i && i >= 0 && (a[t] = i || null)
                    }), t.css(a)
                })
            };
            "object" != typeof n.alsoResize || n.alsoResize.nodeType ? h(n.alsoResize) : e.each(n.alsoResize, function (e, t) {
                h(e, t)
            })
        }, stop: function () {
            e(this).removeData("resizable-alsoresize")
        }
    }), e.ui.plugin.add("resizable", "ghost", {
        start: function () {
            var t = e(this).resizable("instance"), i = t.options, s = t.size;
            t.ghost = t.originalElement.clone(), t.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: s.height,
                width: s.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), t.ghost.appendTo(t.helper)
        }, resize: function () {
            var t = e(this).resizable("instance");
            t.ghost && t.ghost.css({position: "relative", height: t.size.height, width: t.size.width})
        }, stop: function () {
            var t = e(this).resizable("instance");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0))
        }
    }), e.ui.plugin.add("resizable", "grid", {
        resize: function () {
            var t, i = e(this).resizable("instance"), s = i.options, n = i.size, a = i.originalSize,
                o = i.originalPosition, r = i.axis, h = "number" == typeof s.grid ? [s.grid, s.grid] : s.grid,
                l = h[0] || 1, u = h[1] || 1, d = Math.round((n.width - a.width) / l) * l,
                c = Math.round((n.height - a.height) / u) * u, p = a.width + d, f = a.height + c,
                m = s.maxWidth && p > s.maxWidth, g = s.maxHeight && f > s.maxHeight, v = s.minWidth && s.minWidth > p,
                y = s.minHeight && s.minHeight > f;
            s.grid = h, v && (p += l), y && (f += u), m && (p -= l), g && (f -= u), /^(se|s|e)$/.test(r) ? (i.size.width = p, i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.top = o.top - c) : /^(sw)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.left = o.left - d) : ((0 >= f - u || 0 >= p - l) && (t = i._getPaddingPlusBorderDimensions(this)), f - u > 0 ? (i.size.height = f, i.position.top = o.top - c) : (f = u - t.height, i.size.height = f, i.position.top = o.top + a.height - f), p - l > 0 ? (i.size.width = p, i.position.left = o.left - d) : (p = u - t.height, i.size.width = p, i.position.left = o.left + a.width - p))
        }
    }), e.ui.resizable, e.widget("ui.dialog", {
        version: "1.11.2",
        options: {
            appendTo: "body",
            autoOpen: !0,
            buttons: [],
            closeOnEscape: !0,
            closeText: "Close",
            dialogClass: "",
            draggable: !0,
            hide: null,
            height: "auto",
            maxHeight: null,
            maxWidth: null,
            minHeight: 150,
            minWidth: 150,
            modal: !1,
            position: {
                my: "center", at: "center", of: window, collision: "fit", using: function (t) {
                    var i = e(this).css(t).offset().top;
                    0 > i && e(this).css("top", t.top - i)
                }
            },
            resizable: !0,
            show: null,
            title: null,
            width: 300,
            beforeClose: null,
            close: null,
            drag: null,
            dragStart: null,
            dragStop: null,
            focus: null,
            open: null,
            resize: null,
            resizeStart: null,
            resizeStop: null
        },
        sizeRelatedOptions: {
            buttons: !0,
            height: !0,
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0,
            width: !0
        },
        resizableRelatedOptions: {maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0},
        _create: function () {
            this.originalCss = {
                display: this.element[0].style.display,
                width: this.element[0].style.width,
                minHeight: this.element[0].style.minHeight,
                maxHeight: this.element[0].style.maxHeight,
                height: this.element[0].style.height
            }, this.originalPosition = {
                parent: this.element.parent(),
                index: this.element.parent().children().index(this.element)
            }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1, this._trackFocus()
        },
        _init: function () {
            this.options.autoOpen && this.open()
        },
        _appendTo: function () {
            var t = this.options.appendTo;
            return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0)
        },
        _destroy: function () {
            var e, t = this.originalPosition;
            this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), e = t.parent.children().eq(t.index), e.length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element)
        },
        widget: function () {
            return this.uiDialog
        },
        disable: e.noop,
        enable: e.noop,
        close: function (t) {
            var i, s = this;
            if (this._isOpen && this._trigger("beforeClose", t) !== !1) {
                if (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), !this.opener.filter(":focusable").focus().length) try {
                    i = this.document[0].activeElement, i && "body" !== i.nodeName.toLowerCase() && e(i).blur()
                } catch (n) {
                }
                this._hide(this.uiDialog, this.options.hide, function () {
                    s._trigger("close", t)
                })
            }
        },
        isOpen: function () {
            return this._isOpen
        },
        moveToTop: function () {
            this._moveToTop()
        },
        _moveToTop: function (t, i) {
            var s = !1, n = this.uiDialog.siblings(".ui-front:visible").map(function () {
                return +e(this).css("z-index")
            }).get(), a = Math.max.apply(null, n);
            return a >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", a + 1), s = !0), s && !i && this._trigger("focus", t), s
        },
        open: function () {
            var t = this;
            return this._isOpen ? (this._moveToTop() && this._focusTabbable(), void 0) : (this._isOpen = !0, this.opener = e(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1), this._show(this.uiDialog, this.options.show, function () {
                t._focusTabbable(), t._trigger("focus")
            }), this._makeFocusTarget(), this._trigger("open"), void 0)
        },
        _focusTabbable: function () {
            var e = this._focusedElement;
            e || (e = this.element.find("[autofocus]")), e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), e.eq(0).focus()
        },
        _keepFocus: function (t) {
            function i() {
                var t = this.document[0].activeElement, i = this.uiDialog[0] === t || e.contains(this.uiDialog[0], t);
                i || this._focusTabbable()
            }

            t.preventDefault(), i.call(this), this._delay(i)
        },
        _createWrapper: function () {
            this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                tabIndex: -1,
                role: "dialog"
            }).appendTo(this._appendTo()), this._on(this.uiDialog, {
                keydown: function (t) {
                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) return t.preventDefault(), this.close(t), void 0;
                    if (t.keyCode === e.ui.keyCode.TAB && !t.isDefaultPrevented()) {
                        var i = this.uiDialog.find(":tabbable"), s = i.filter(":first"), n = i.filter(":last");
                        t.target !== n[0] && t.target !== this.uiDialog[0] || t.shiftKey ? t.target !== s[0] && t.target !== this.uiDialog[0] || !t.shiftKey || (this._delay(function () {
                            n.focus()
                        }), t.preventDefault()) : (this._delay(function () {
                            s.focus()
                        }), t.preventDefault())
                    }
                }, mousedown: function (e) {
                    this._moveToTop(e) && this._focusTabbable()
                }
            }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({"aria-describedby": this.element.uniqueId().attr("id")})
        },
        _createTitlebar: function () {
            var t;
            this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, {
                mousedown: function (t) {
                    e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus()
                }
            }), this.uiDialogTitlebarClose = e("<button type='button'></button>").button({
                label: this.options.closeText,
                icons: {primary: "ui-icon-closethick"},
                text: !1
            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {
                click: function (e) {
                    e.preventDefault(), this.close(e)
                }
            }), t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(t), this.uiDialog.attr({"aria-labelledby": t.attr("id")})
        },
        _title: function (e) {
            this.options.title || e.html("&#160;"), e.text(this.options.title)
        },
        _createButtonPane: function () {
            this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons()
        },
        _createButtons: function () {
            var t = this, i = this.options.buttons;
            return this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), e.isEmptyObject(i) || e.isArray(i) && !i.length ? (this.uiDialog.removeClass("ui-dialog-buttons"), void 0) : (e.each(i, function (i, s) {
                var n, a;
                s = e.isFunction(s) ? {
                    click: s,
                    text: i
                } : s, s = e.extend({type: "button"}, s), n = s.click, s.click = function () {
                    n.apply(t.element[0], arguments)
                }, a = {
                    icons: s.icons,
                    text: s.showText
                }, delete s.icons, delete s.showText, e("<button></button>", s).button(a).appendTo(t.uiButtonSet)
            }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog), void 0)
        },
        _makeDraggable: function () {
            function t(e) {
                return {position: e.position, offset: e.offset}
            }

            var i = this, s = this.options;
            this.uiDialog.draggable({
                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                handle: ".ui-dialog-titlebar",
                containment: "document",
                start: function (s, n) {
                    e(this).addClass("ui-dialog-dragging"), i._blockFrames(), i._trigger("dragStart", s, t(n))
                },
                drag: function (e, s) {
                    i._trigger("drag", e, t(s))
                },
                stop: function (n, a) {
                    var o = a.offset.left - i.document.scrollLeft(), r = a.offset.top - i.document.scrollTop();
                    s.position = {
                        my: "left top",
                        at: "left" + (o >= 0 ? "+" : "") + o + " " + "top" + (r >= 0 ? "+" : "") + r,
                        of: i.window
                    }, e(this).removeClass("ui-dialog-dragging"), i._unblockFrames(), i._trigger("dragStop", n, t(a))
                }
            })
        },
        _makeResizable: function () {
            function t(e) {
                return {
                    originalPosition: e.originalPosition,
                    originalSize: e.originalSize,
                    position: e.position,
                    size: e.size
                }
            }

            var i = this, s = this.options, n = s.resizable, a = this.uiDialog.css("position"),
                o = "string" == typeof n ? n : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                cancel: ".ui-dialog-content",
                containment: "document",
                alsoResize: this.element,
                maxWidth: s.maxWidth,
                maxHeight: s.maxHeight,
                minWidth: s.minWidth,
                minHeight: this._minHeight(),
                handles: o,
                start: function (s, n) {
                    e(this).addClass("ui-dialog-resizing"), i._blockFrames(), i._trigger("resizeStart", s, t(n))
                },
                resize: function (e, s) {
                    i._trigger("resize", e, t(s))
                },
                stop: function (n, a) {
                    var o = i.uiDialog.offset(), r = o.left - i.document.scrollLeft(),
                        h = o.top - i.document.scrollTop();
                    s.height = i.uiDialog.height(), s.width = i.uiDialog.width(), s.position = {
                        my: "left top",
                        at: "left" + (r >= 0 ? "+" : "") + r + " " + "top" + (h >= 0 ? "+" : "") + h,
                        of: i.window
                    }, e(this).removeClass("ui-dialog-resizing"), i._unblockFrames(), i._trigger("resizeStop", n, t(a))
                }
            }).css("position", a)
        },
        _trackFocus: function () {
            this._on(this.widget(), {
                focusin: function (t) {
                    this._makeFocusTarget(), this._focusedElement = e(t.target)
                }
            })
        },
        _makeFocusTarget: function () {
            this._untrackInstance(), this._trackingInstances().unshift(this)
        },
        _untrackInstance: function () {
            var t = this._trackingInstances(), i = e.inArray(this, t);
            -1 !== i && t.splice(i, 1)
        },
        _trackingInstances: function () {
            var e = this.document.data("ui-dialog-instances");
            return e || (e = [], this.document.data("ui-dialog-instances", e)), e
        },
        _minHeight: function () {
            var e = this.options;
            return "auto" === e.height ? e.minHeight : Math.min(e.minHeight, e.height)
        },
        _position: function () {
            var e = this.uiDialog.is(":visible");
            e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide()
        },
        _setOptions: function (t) {
            var i = this, s = !1, n = {};
            e.each(t, function (e, t) {
                i._setOption(e, t), e in i.sizeRelatedOptions && (s = !0), e in i.resizableRelatedOptions && (n[e] = t)
            }), s && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", n)
        },
        _setOption: function (e, t) {
            var i, s, n = this.uiDialog;
            "dialogClass" === e && n.removeClass(this.options.dialogClass).addClass(t), "disabled" !== e && (this._super(e, t), "appendTo" === e && this.uiDialog.appendTo(this._appendTo()), "buttons" === e && this._createButtons(), "closeText" === e && this.uiDialogTitlebarClose.button({label: "" + t}), "draggable" === e && (i = n.is(":data(ui-draggable)"), i && !t && n.draggable("destroy"), !i && t && this._makeDraggable()), "position" === e && this._position(), "resizable" === e && (s = n.is(":data(ui-resizable)"), s && !t && n.resizable("destroy"), s && "string" == typeof t && n.resizable("option", "handles", t), s || t === !1 || this._makeResizable()), "title" === e && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
        },
        _size: function () {
            var e, t, i, s = this.options;
            this.element.show().css({
                width: "auto",
                minHeight: 0,
                maxHeight: "none",
                height: 0
            }), s.minWidth > s.width && (s.width = s.minWidth), e = this.uiDialog.css({
                height: "auto",
                width: s.width
            }).outerHeight(), t = Math.max(0, s.minHeight - e), i = "number" == typeof s.maxHeight ? Math.max(0, s.maxHeight - e) : "none", "auto" === s.height ? this.element.css({
                minHeight: t,
                maxHeight: i,
                height: "auto"
            }) : this.element.height(Math.max(0, s.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
        },
        _blockFrames: function () {
            this.iframeBlocks = this.document.find("iframe").map(function () {
                var t = e(this);
                return e("<div>").css({
                    position: "absolute",
                    width: t.outerWidth(),
                    height: t.outerHeight()
                }).appendTo(t.parent()).offset(t.offset())[0]
            })
        },
        _unblockFrames: function () {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
        },
        _allowInteraction: function (t) {
            return e(t.target).closest(".ui-dialog").length ? !0 : !!e(t.target).closest(".ui-datepicker").length
        },
        _createOverlay: function () {
            if (this.options.modal) {
                var t = !0;
                this._delay(function () {
                    t = !1
                }), this.document.data("ui-dialog-overlays") || this._on(this.document, {
                    focusin: function (e) {
                        t || this._allowInteraction(e) || (e.preventDefault(), this._trackingInstances()[0]._focusTabbable())
                    }
                }), this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, {mousedown: "_keepFocus"}), this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1)
            }
        },
        _destroyOverlay: function () {
            if (this.options.modal && this.overlay) {
                var e = this.document.data("ui-dialog-overlays") - 1;
                e ? this.document.data("ui-dialog-overlays", e) : this.document.unbind("focusin").removeData("ui-dialog-overlays"), this.overlay.remove(), this.overlay = null
            }
        }
    }), e.widget("ui.droppable", {
        version: "1.11.2",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: !1,
            addClasses: !0,
            greedy: !1,
            hoverClass: !1,
            scope: "default",
            tolerance: "intersect",
            activate: null,
            deactivate: null,
            drop: null,
            out: null,
            over: null
        },
        _create: function () {
            var t, i = this.options, s = i.accept;
            this.isover = !1, this.isout = !0, this.accept = e.isFunction(s) ? s : function (e) {
                return e.is(s)
            }, this.proportions = function () {
                return arguments.length ? (t = arguments[0], void 0) : t ? t : t = {
                    width: this.element[0].offsetWidth,
                    height: this.element[0].offsetHeight
                }
            }, this._addToManager(i.scope), i.addClasses && this.element.addClass("ui-droppable")
        },
        _addToManager: function (t) {
            e.ui.ddmanager.droppables[t] = e.ui.ddmanager.droppables[t] || [], e.ui.ddmanager.droppables[t].push(this)
        },
        _splice: function (e) {
            for (var t = 0; e.length > t; t++) e[t] === this && e.splice(t, 1)
        },
        _destroy: function () {
            var t = e.ui.ddmanager.droppables[this.options.scope];
            this._splice(t), this.element.removeClass("ui-droppable ui-droppable-disabled")
        },
        _setOption: function (t, i) {
            if ("accept" === t) this.accept = e.isFunction(i) ? i : function (e) {
                return e.is(i)
            }; else if ("scope" === t) {
                var s = e.ui.ddmanager.droppables[this.options.scope];
                this._splice(s), this._addToManager(i)
            }
            this._super(t, i)
        },
        _activate: function (t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", t, this.ui(i))
        },
        _deactivate: function (t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), i && this._trigger("deactivate", t, this.ui(i))
        },
        _over: function (t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(i)))
        },
        _out: function (t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(i)))
        },
        _drop: function (t, i) {
            var s = i || e.ui.ddmanager.current, n = !1;
            return s && (s.currentItem || s.element)[0] !== this.element[0] ? (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () {
                var i = e(this).droppable("instance");
                return i.options.greedy && !i.options.disabled && i.options.scope === s.options.scope && i.accept.call(i.element[0], s.currentItem || s.element) && e.ui.intersect(s, e.extend(i, {offset: i.element.offset()}), i.options.tolerance, t) ? (n = !0, !1) : void 0
            }), n ? !1 : this.accept.call(this.element[0], s.currentItem || s.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(s)), this.element) : !1) : !1
        },
        ui: function (e) {
            return {
                draggable: e.currentItem || e.element,
                helper: e.helper,
                position: e.position,
                offset: e.positionAbs
            }
        }
    }), e.ui.intersect = function () {
        function e(e, t, i) {
            return e >= t && t + i > e
        }

        return function (t, i, s, n) {
            if (!i.offset) return !1;
            var a = (t.positionAbs || t.position.absolute).left + t.margins.left,
                o = (t.positionAbs || t.position.absolute).top + t.margins.top, r = a + t.helperProportions.width,
                h = o + t.helperProportions.height, l = i.offset.left, u = i.offset.top, d = l + i.proportions().width,
                c = u + i.proportions().height;
            switch (s) {
                case"fit":
                    return a >= l && d >= r && o >= u && c >= h;
                case"intersect":
                    return a + t.helperProportions.width / 2 > l && d > r - t.helperProportions.width / 2 && o + t.helperProportions.height / 2 > u && c > h - t.helperProportions.height / 2;
                case"pointer":
                    return e(n.pageY, u, i.proportions().height) && e(n.pageX, l, i.proportions().width);
                case"touch":
                    return (o >= u && c >= o || h >= u && c >= h || u > o && h > c) && (a >= l && d >= a || r >= l && d >= r || l > a && r > d);
                default:
                    return !1
            }
        }
    }(), e.ui.ddmanager = {
        current: null, droppables: {"default": []}, prepareOffsets: function (t, i) {
            var s, n, a = e.ui.ddmanager.droppables[t.options.scope] || [], o = i ? i.type : null,
                r = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            e:for (s = 0; a.length > s; s++) if (!(a[s].options.disabled || t && !a[s].accept.call(a[s].element[0], t.currentItem || t.element))) {
                for (n = 0; r.length > n; n++) if (r[n] === a[s].element[0]) {
                    a[s].proportions().height = 0;
                    continue e
                }
                a[s].visible = "none" !== a[s].element.css("display"), a[s].visible && ("mousedown" === o && a[s]._activate.call(a[s], i), a[s].offset = a[s].element.offset(), a[s].proportions({
                    width: a[s].element[0].offsetWidth,
                    height: a[s].element[0].offsetHeight
                }))
            }
        }, drop: function (t, i) {
            var s = !1;
            return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function () {
                this.options && (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance, i) && (s = this._drop.call(this, i) || s), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i)))
            }), s
        }, dragStart: function (t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function () {
                t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i)
            })
        }, drag: function (t, i) {
            t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var s, n, a, o = e.ui.intersect(t, this, this.options.tolerance, i),
                        r = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null;
                    r && (this.options.greedy && (n = this.options.scope, a = this.element.parents(":data(ui-droppable)").filter(function () {
                        return e(this).droppable("instance").options.scope === n
                    }), a.length && (s = e(a[0]).droppable("instance"), s.greedyChild = "isover" === r)), s && "isover" === r && (s.isover = !1, s.isout = !0, s._out.call(s, i)), this[r] = !0, this["isout" === r ? "isover" : "isout"] = !1, this["isover" === r ? "_over" : "_out"].call(this, i), s && "isout" === r && (s.isout = !1, s.isover = !0, s._over.call(s, i)))
                }
            })
        }, dragStop: function (t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i)
        }
    }, e.ui.droppable;
    var y = "ui-effects-", b = e;
    e.effects = {effect: {}}, function (e, t) {
        function i(e, t, i) {
            var s = d[t.type] || {};
            return null == e ? i || !t.def ? null : t.def : (e = s.floor ? ~~e : parseFloat(e), isNaN(e) ? t.def : s.mod ? (e + s.mod) % s.mod : 0 > e ? 0 : e > s.max ? s.max : e)
        }

        function s(i) {
            var s = l(), n = s._rgba = [];
            return i = i.toLowerCase(), f(h, function (e, a) {
                var o, r = a.re.exec(i), h = r && a.parse(r), l = a.space || "rgba";
                return h ? (o = s[l](h), s[u[l].cache] = o[u[l].cache], n = s._rgba = o._rgba, !1) : t
            }), n.length ? ("0,0,0,0" === n.join() && e.extend(n, a.transparent), s) : a[i]
        }

        function n(e, t, i) {
            return i = (i + 1) % 1, 1 > 6 * i ? e + 6 * (t - e) * i : 1 > 2 * i ? t : 2 > 3 * i ? e + 6 * (t - e) * (2 / 3 - i) : e
        }

        var a,
            o = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
            r = /^([\-+])=\s*(\d+\.?\d*)/, h = [{
                re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                parse: function (e) {
                    return [e[1], e[2], e[3], e[4]]
                }
            }, {
                re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                parse: function (e) {
                    return [2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4]]
                }
            }, {
                re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/, parse: function (e) {
                    return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                }
            }, {
                re: /#([a-f0-9])([a-f0-9])([a-f0-9])/, parse: function (e) {
                    return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                }
            }, {
                re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                space: "hsla",
                parse: function (e) {
                    return [e[1], e[2] / 100, e[3] / 100, e[4]]
                }
            }], l = e.Color = function (t, i, s, n) {
                return new e.Color.fn.parse(t, i, s, n)
            }, u = {
                rgba: {
                    props: {
                        red: {idx: 0, type: "byte"},
                        green: {idx: 1, type: "byte"},
                        blue: {idx: 2, type: "byte"}
                    }
                },
                hsla: {
                    props: {
                        hue: {idx: 0, type: "degrees"},
                        saturation: {idx: 1, type: "percent"},
                        lightness: {idx: 2, type: "percent"}
                    }
                }
            }, d = {"byte": {floor: !0, max: 255}, percent: {max: 1}, degrees: {mod: 360, floor: !0}}, c = l.support = {},
            p = e("<p>")[0], f = e.each;
        p.style.cssText = "background-color:rgba(1,1,1,.5)", c.rgba = p.style.backgroundColor.indexOf("rgba") > -1, f(u, function (e, t) {
            t.cache = "_" + e, t.props.alpha = {idx: 3, type: "percent", def: 1}
        }), l.fn = e.extend(l.prototype, {
            parse: function (n, o, r, h) {
                if (n === t) return this._rgba = [null, null, null, null], this;
                (n.jquery || n.nodeType) && (n = e(n).css(o), o = t);
                var d = this, c = e.type(n), p = this._rgba = [];
                return o !== t && (n = [n, o, r, h], c = "array"), "string" === c ? this.parse(s(n) || a._default) : "array" === c ? (f(u.rgba.props, function (e, t) {
                    p[t.idx] = i(n[t.idx], t)
                }), this) : "object" === c ? (n instanceof l ? f(u, function (e, t) {
                    n[t.cache] && (d[t.cache] = n[t.cache].slice())
                }) : f(u, function (t, s) {
                    var a = s.cache;
                    f(s.props, function (e, t) {
                        if (!d[a] && s.to) {
                            if ("alpha" === e || null == n[e]) return;
                            d[a] = s.to(d._rgba)
                        }
                        d[a][t.idx] = i(n[e], t, !0)
                    }), d[a] && 0 > e.inArray(null, d[a].slice(0, 3)) && (d[a][3] = 1, s.from && (d._rgba = s.from(d[a])))
                }), this) : t
            }, is: function (e) {
                var i = l(e), s = !0, n = this;
                return f(u, function (e, a) {
                    var o, r = i[a.cache];
                    return r && (o = n[a.cache] || a.to && a.to(n._rgba) || [], f(a.props, function (e, i) {
                        return null != r[i.idx] ? s = r[i.idx] === o[i.idx] : t
                    })), s
                }), s
            }, _space: function () {
                var e = [], t = this;
                return f(u, function (i, s) {
                    t[s.cache] && e.push(i)
                }), e.pop()
            }, transition: function (e, t) {
                var s = l(e), n = s._space(), a = u[n], o = 0 === this.alpha() ? l("transparent") : this,
                    r = o[a.cache] || a.to(o._rgba), h = r.slice();
                return s = s[a.cache], f(a.props, function (e, n) {
                    var a = n.idx, o = r[a], l = s[a], u = d[n.type] || {};
                    null !== l && (null === o ? h[a] = l : (u.mod && (l - o > u.mod / 2 ? o += u.mod : o - l > u.mod / 2 && (o -= u.mod)), h[a] = i((l - o) * t + o, n)))
                }), this[n](h)
            }, blend: function (t) {
                if (1 === this._rgba[3]) return this;
                var i = this._rgba.slice(), s = i.pop(), n = l(t)._rgba;
                return l(e.map(i, function (e, t) {
                    return (1 - s) * n[t] + s * e
                }))
            }, toRgbaString: function () {
                var t = "rgba(", i = e.map(this._rgba, function (e, t) {
                    return null == e ? t > 2 ? 1 : 0 : e
                });
                return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")"
            }, toHslaString: function () {
                var t = "hsla(", i = e.map(this.hsla(), function (e, t) {
                    return null == e && (e = t > 2 ? 1 : 0), t && 3 > t && (e = Math.round(100 * e) + "%"), e
                });
                return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")"
            }, toHexString: function (t) {
                var i = this._rgba.slice(), s = i.pop();
                return t && i.push(~~(255 * s)), "#" + e.map(i, function (e) {
                    return e = (e || 0).toString(16), 1 === e.length ? "0" + e : e
                }).join("")
            }, toString: function () {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
            }
        }), l.fn.parse.prototype = l.fn, u.hsla.to = function (e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
            var t, i, s = e[0] / 255, n = e[1] / 255, a = e[2] / 255, o = e[3], r = Math.max(s, n, a),
                h = Math.min(s, n, a), l = r - h, u = r + h, d = .5 * u;
            return t = h === r ? 0 : s === r ? 60 * (n - a) / l + 360 : n === r ? 60 * (a - s) / l + 120 : 60 * (s - n) / l + 240, i = 0 === l ? 0 : .5 >= d ? l / u : l / (2 - u), [Math.round(t) % 360, i, d, null == o ? 1 : o]
        }, u.hsla.from = function (e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
            var t = e[0] / 360, i = e[1], s = e[2], a = e[3], o = .5 >= s ? s * (1 + i) : s + i - s * i, r = 2 * s - o;
            return [Math.round(255 * n(r, o, t + 1 / 3)), Math.round(255 * n(r, o, t)), Math.round(255 * n(r, o, t - 1 / 3)), a]
        }, f(u, function (s, n) {
            var a = n.props, o = n.cache, h = n.to, u = n.from;
            l.fn[s] = function (s) {
                if (h && !this[o] && (this[o] = h(this._rgba)), s === t) return this[o].slice();
                var n, r = e.type(s), d = "array" === r || "object" === r ? s : arguments, c = this[o].slice();
                return f(a, function (e, t) {
                    var s = d["object" === r ? e : t.idx];
                    null == s && (s = c[t.idx]), c[t.idx] = i(s, t)
                }), u ? (n = l(u(c)), n[o] = c, n) : l(c)
            }, f(a, function (t, i) {
                l.fn[t] || (l.fn[t] = function (n) {
                    var a, o = e.type(n), h = "alpha" === t ? this._hsla ? "hsla" : "rgba" : s, l = this[h](),
                        u = l[i.idx];
                    return "undefined" === o ? u : ("function" === o && (n = n.call(this, u), o = e.type(n)), null == n && i.empty ? this : ("string" === o && (a = r.exec(n), a && (n = u + parseFloat(a[2]) * ("+" === a[1] ? 1 : -1))), l[i.idx] = n, this[h](l)))
                })
            })
        }), l.hook = function (t) {
            var i = t.split(" ");
            f(i, function (t, i) {
                e.cssHooks[i] = {
                    set: function (t, n) {
                        var a, o, r = "";
                        if ("transparent" !== n && ("string" !== e.type(n) || (a = s(n)))) {
                            if (n = l(a || n), !c.rgba && 1 !== n._rgba[3]) {
                                for (o = "backgroundColor" === i ? t.parentNode : t; ("" === r || "transparent" === r) && o && o.style;) try {
                                    r = e.css(o, "backgroundColor"), o = o.parentNode
                                } catch (h) {
                                }
                                n = n.blend(r && "transparent" !== r ? r : "_default")
                            }
                            n = n.toRgbaString()
                        }
                        try {
                            t.style[i] = n
                        } catch (h) {
                        }
                    }
                }, e.fx.step[i] = function (t) {
                    t.colorInit || (t.start = l(t.elem, i), t.end = l(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos))
                }
            })
        }, l.hook(o), e.cssHooks.borderColor = {
            expand: function (e) {
                var t = {};
                return f(["Top", "Right", "Bottom", "Left"], function (i, s) {
                    t["border" + s + "Color"] = e
                }), t
            }
        }, a = e.Color.names = {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [null, null, null, 0],
            _default: "#ffffff"
        }
    }(b), function () {
        function t(t) {
            var i, s,
                n = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
                a = {};
            if (n && n.length && n[0] && n[n[0]]) for (s = n.length; s--;) i = n[s], "string" == typeof n[i] && (a[e.camelCase(i)] = n[i]); else for (i in n) "string" == typeof n[i] && (a[i] = n[i]);
            return a
        }

        function i(t, i) {
            var s, a, o = {};
            for (s in i) a = i[s], t[s] !== a && (n[s] || (e.fx.step[s] || !isNaN(parseFloat(a))) && (o[s] = a));
            return o
        }

        var s = ["add", "remove", "toggle"], n = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1
        };
        e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function (t, i) {
            e.fx.step[i] = function (e) {
                ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (b.style(e.elem, i, e.end), e.setAttr = !0)
            }
        }), e.fn.addBack || (e.fn.addBack = function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }), e.effects.animateClass = function (n, a, o, r) {
            var h = e.speed(a, o, r);
            return this.queue(function () {
                var a, o = e(this), r = o.attr("class") || "", l = h.children ? o.find("*").addBack() : o;
                l = l.map(function () {
                    var i = e(this);
                    return {el: i, start: t(this)}
                }), a = function () {
                    e.each(s, function (e, t) {
                        n[t] && o[t + "Class"](n[t])
                    })
                }, a(), l = l.map(function () {
                    return this.end = t(this.el[0]), this.diff = i(this.start, this.end), this
                }), o.attr("class", r), l = l.map(function () {
                    var t = this, i = e.Deferred(), s = e.extend({}, h, {
                        queue: !1, complete: function () {
                            i.resolve(t)
                        }
                    });
                    return this.el.animate(this.diff, s), i.promise()
                }), e.when.apply(e, l.get()).done(function () {
                    a(), e.each(arguments, function () {
                        var t = this.el;
                        e.each(this.diff, function (e) {
                            t.css(e, "")
                        })
                    }), h.complete.call(o[0])
                })
            })
        }, e.fn.extend({
            addClass: function (t) {
                return function (i, s, n, a) {
                    return s ? e.effects.animateClass.call(this, {add: i}, s, n, a) : t.apply(this, arguments)
                }
            }(e.fn.addClass), removeClass: function (t) {
                return function (i, s, n, a) {
                    return arguments.length > 1 ? e.effects.animateClass.call(this, {remove: i}, s, n, a) : t.apply(this, arguments)
                }
            }(e.fn.removeClass), toggleClass: function (t) {
                return function (i, s, n, a, o) {
                    return "boolean" == typeof s || void 0 === s ? n ? e.effects.animateClass.call(this, s ? {add: i} : {remove: i}, n, a, o) : t.apply(this, arguments) : e.effects.animateClass.call(this, {toggle: i}, s, n, a)
                }
            }(e.fn.toggleClass), switchClass: function (t, i, s, n, a) {
                return e.effects.animateClass.call(this, {add: i, remove: t}, s, n, a)
            }
        })
    }(), function () {
        function t(t, i, s, n) {
            return e.isPlainObject(t) && (i = t, t = t.effect), t = {effect: t}, null == i && (i = {}), e.isFunction(i) && (n = i, s = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (n = s, s = i, i = {}), e.isFunction(s) && (n = s, s = null), i && e.extend(t, i), s = s || i.duration, t.duration = e.fx.off ? 0 : "number" == typeof s ? s : s in e.fx.speeds ? e.fx.speeds[s] : e.fx.speeds._default, t.complete = n || i.complete, t
        }

        function i(t) {
            return !t || "number" == typeof t || e.fx.speeds[t] ? !0 : "string" != typeof t || e.effects.effect[t] ? e.isFunction(t) ? !0 : "object" != typeof t || t.effect ? !1 : !0 : !0
        }

        e.extend(e.effects, {
            version: "1.11.2", save: function (e, t) {
                for (var i = 0; t.length > i; i++) null !== t[i] && e.data(y + t[i], e[0].style[t[i]])
            }, restore: function (e, t) {
                var i, s;
                for (s = 0; t.length > s; s++) null !== t[s] && (i = e.data(y + t[s]), void 0 === i && (i = ""), e.css(t[s], i))
            }, setMode: function (e, t) {
                return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t
            }, getBaseline: function (e, t) {
                var i, s;
                switch (e[0]) {
                    case"top":
                        i = 0;
                        break;
                    case"middle":
                        i = .5;
                        break;
                    case"bottom":
                        i = 1;
                        break;
                    default:
                        i = e[0] / t.height
                }
                switch (e[1]) {
                    case"left":
                        s = 0;
                        break;
                    case"center":
                        s = .5;
                        break;
                    case"right":
                        s = 1;
                        break;
                    default:
                        s = e[1] / t.width
                }
                return {x: s, y: i}
            }, createWrapper: function (t) {
                if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                var i = {width: t.outerWidth(!0), height: t.outerHeight(!0), "float": t.css("float")},
                    s = e("<div></div>").addClass("ui-effects-wrapper").css({
                        fontSize: "100%",
                        background: "transparent",
                        border: "none",
                        margin: 0,
                        padding: 0
                    }), n = {width: t.width(), height: t.height()}, a = document.activeElement;
                try {
                    a.id
                } catch (o) {
                    a = document.body
                }
                return t.wrap(s), (t[0] === a || e.contains(t[0], a)) && e(a).focus(), s = t.parent(), "static" === t.css("position") ? (s.css({position: "relative"}), t.css({position: "relative"})) : (e.extend(i, {
                    position: t.css("position"),
                    zIndex: t.css("z-index")
                }), e.each(["top", "left", "bottom", "right"], function (e, s) {
                    i[s] = t.css(s), isNaN(parseInt(i[s], 10)) && (i[s] = "auto")
                }), t.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto"
                })), t.css(n), s.css(i).show()
            }, removeWrapper: function (t) {
                var i = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).focus()), t
            }, setTransition: function (t, i, s, n) {
                return n = n || {}, e.each(i, function (e, i) {
                    var a = t.cssUnit(i);
                    a[0] > 0 && (n[i] = a[0] * s + a[1])
                }), n
            }
        }), e.fn.extend({
            effect: function () {
                function i(t) {
                    function i() {
                        e.isFunction(a) && a.call(n[0]), e.isFunction(t) && t()
                    }

                    var n = e(this), a = s.complete, r = s.mode;
                    (n.is(":hidden") ? "hide" === r : "show" === r) ? (n[r](), i()) : o.call(n[0], s, i)
                }

                var s = t.apply(this, arguments), n = s.mode, a = s.queue, o = e.effects.effect[s.effect];
                return e.fx.off || !o ? n ? this[n](s.duration, s.complete) : this.each(function () {
                    s.complete && s.complete.call(this)
                }) : a === !1 ? this.each(i) : this.queue(a || "fx", i)
            }, show: function (e) {
                return function (s) {
                    if (i(s)) return e.apply(this, arguments);
                    var n = t.apply(this, arguments);
                    return n.mode = "show", this.effect.call(this, n)
                }
            }(e.fn.show), hide: function (e) {
                return function (s) {
                    if (i(s)) return e.apply(this, arguments);
                    var n = t.apply(this, arguments);
                    return n.mode = "hide", this.effect.call(this, n)
                }
            }(e.fn.hide), toggle: function (e) {
                return function (s) {
                    if (i(s) || "boolean" == typeof s) return e.apply(this, arguments);
                    var n = t.apply(this, arguments);
                    return n.mode = "toggle", this.effect.call(this, n)
                }
            }(e.fn.toggle), cssUnit: function (t) {
                var i = this.css(t), s = [];
                return e.each(["em", "px", "%", "pt"], function (e, t) {
                    i.indexOf(t) > 0 && (s = [parseFloat(i), t])
                }), s
            }
        })
    }(), function () {
        var t = {};
        e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (e, i) {
            t[i] = function (t) {
                return Math.pow(t, e + 2)
            }
        }), e.extend(t, {
            Sine: function (e) {
                return 1 - Math.cos(e * Math.PI / 2)
            }, Circ: function (e) {
                return 1 - Math.sqrt(1 - e * e)
            }, Elastic: function (e) {
                return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15)
            }, Back: function (e) {
                return e * e * (3 * e - 2)
            }, Bounce: function (e) {
                for (var t, i = 4; ((t = Math.pow(2, --i)) - 1) / 11 > e;) ;
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2)
            }
        }), e.each(t, function (t, i) {
            e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function (e) {
                return 1 - i(1 - e)
            }, e.easing["easeInOut" + t] = function (e) {
                return .5 > e ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2
            }
        })
    }(), e.effects, e.effects.effect.blind = function (t, i) {
        var s, n, a, o = e(this), r = /up|down|vertical/, h = /up|left|vertical|horizontal/,
            l = ["position", "top", "bottom", "left", "right", "height", "width"],
            u = e.effects.setMode(o, t.mode || "hide"), d = t.direction || "up", c = r.test(d),
            p = c ? "height" : "width", f = c ? "top" : "left", m = h.test(d), g = {}, v = "show" === u;
        o.parent().is(".ui-effects-wrapper") ? e.effects.save(o.parent(), l) : e.effects.save(o, l), o.show(), s = e.effects.createWrapper(o).css({overflow: "hidden"}), n = s[p](), a = parseFloat(s.css(f)) || 0, g[p] = v ? n : 0, m || (o.css(c ? "bottom" : "right", 0).css(c ? "top" : "left", "auto").css({position: "absolute"}), g[f] = v ? a : n + a), v && (s.css(p, 0), m || s.css(f, a + n)), s.animate(g, {
            duration: t.duration,
            easing: t.easing,
            queue: !1,
            complete: function () {
                "hide" === u && o.hide(), e.effects.restore(o, l), e.effects.removeWrapper(o), i()
            }
        })
    }, e.effects.effect.bounce = function (t, i) {
        var s, n, a, o = e(this), r = ["position", "top", "bottom", "left", "right", "height", "width"],
            h = e.effects.setMode(o, t.mode || "effect"), l = "hide" === h, u = "show" === h, d = t.direction || "up",
            c = t.distance, p = t.times || 5, f = 2 * p + (u || l ? 1 : 0), m = t.duration / f, g = t.easing,
            v = "up" === d || "down" === d ? "top" : "left", y = "up" === d || "left" === d, b = o.queue(),
            _ = b.length;
        for ((u || l) && r.push("opacity"), e.effects.save(o, r), o.show(), e.effects.createWrapper(o), c || (c = o["top" === v ? "outerHeight" : "outerWidth"]() / 3), u && (a = {opacity: 1}, a[v] = 0, o.css("opacity", 0).css(v, y ? 2 * -c : 2 * c).animate(a, m, g)), l && (c /= Math.pow(2, p - 1)), a = {}, a[v] = 0, s = 0; p > s; s++) n = {}, n[v] = (y ? "-=" : "+=") + c, o.animate(n, m, g).animate(a, m, g), c = l ? 2 * c : c / 2;
        l && (n = {opacity: 0}, n[v] = (y ? "-=" : "+=") + c, o.animate(n, m, g)), o.queue(function () {
            l && o.hide(), e.effects.restore(o, r), e.effects.removeWrapper(o), i()
        }), _ > 1 && b.splice.apply(b, [1, 0].concat(b.splice(_, f + 1))), o.dequeue()
    }, e.effects.effect.clip = function (t, i) {
        var s, n, a, o = e(this), r = ["position", "top", "bottom", "left", "right", "height", "width"],
            h = e.effects.setMode(o, t.mode || "hide"), l = "show" === h, u = t.direction || "vertical",
            d = "vertical" === u, c = d ? "height" : "width", p = d ? "top" : "left", f = {};
        e.effects.save(o, r), o.show(), s = e.effects.createWrapper(o).css({overflow: "hidden"}), n = "IMG" === o[0].tagName ? s : o, a = n[c](), l && (n.css(c, 0), n.css(p, a / 2)), f[c] = l ? a : 0, f[p] = l ? 0 : a / 2, n.animate(f, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                l || o.hide(), e.effects.restore(o, r), e.effects.removeWrapper(o), i()
            }
        })
    }, e.effects.effect.drop = function (t, i) {
        var s, n = e(this), a = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"],
            o = e.effects.setMode(n, t.mode || "hide"), r = "show" === o, h = t.direction || "left",
            l = "up" === h || "down" === h ? "top" : "left", u = "up" === h || "left" === h ? "pos" : "neg",
            d = {opacity: r ? 1 : 0};
        e.effects.save(n, a), n.show(), e.effects.createWrapper(n), s = t.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0) / 2, r && n.css("opacity", 0).css(l, "pos" === u ? -s : s), d[l] = (r ? "pos" === u ? "+=" : "-=" : "pos" === u ? "-=" : "+=") + s, n.animate(d, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i()
            }
        })
    }, e.effects.effect.explode = function (t, i) {
        function s() {
            b.push(this), b.length === d * c && n()
        }

        function n() {
            p.css({visibility: "visible"}), e(b).remove(), m || p.hide(), i()
        }

        var a, o, r, h, l, u, d = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3, c = d, p = e(this),
            f = e.effects.setMode(p, t.mode || "hide"), m = "show" === f,
            g = p.show().css("visibility", "hidden").offset(), v = Math.ceil(p.outerWidth() / c),
            y = Math.ceil(p.outerHeight() / d), b = [];
        for (a = 0; d > a; a++) for (h = g.top + a * y, u = a - (d - 1) / 2, o = 0; c > o; o++) r = g.left + o * v, l = o - (c - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({
            position: "absolute",
            visibility: "visible",
            left: -o * v,
            top: -a * y
        }).parent().addClass("ui-effects-explode").css({
            position: "absolute",
            overflow: "hidden",
            width: v,
            height: y,
            left: r + (m ? l * v : 0),
            top: h + (m ? u * y : 0),
            opacity: m ? 0 : 1
        }).animate({
            left: r + (m ? 0 : l * v),
            top: h + (m ? 0 : u * y),
            opacity: m ? 1 : 0
        }, t.duration || 500, t.easing, s)
    }, e.effects.effect.fade = function (t, i) {
        var s = e(this), n = e.effects.setMode(s, t.mode || "toggle");
        s.animate({opacity: n}, {queue: !1, duration: t.duration, easing: t.easing, complete: i})
    }, e.effects.effect.fold = function (t, i) {
        var s, n, a = e(this), o = ["position", "top", "bottom", "left", "right", "height", "width"],
            r = e.effects.setMode(a, t.mode || "hide"), h = "show" === r, l = "hide" === r, u = t.size || 15,
            d = /([0-9]+)%/.exec(u), c = !!t.horizFirst, p = h !== c, f = p ? ["width", "height"] : ["height", "width"],
            m = t.duration / 2, g = {}, v = {};
        e.effects.save(a, o), a.show(), s = e.effects.createWrapper(a).css({overflow: "hidden"}), n = p ? [s.width(), s.height()] : [s.height(), s.width()], d && (u = parseInt(d[1], 10) / 100 * n[l ? 0 : 1]), h && s.css(c ? {
            height: 0,
            width: u
        } : {
            height: u,
            width: 0
        }), g[f[0]] = h ? n[0] : u, v[f[1]] = h ? n[1] : 0, s.animate(g, m, t.easing).animate(v, m, t.easing, function () {
            l && a.hide(), e.effects.restore(a, o), e.effects.removeWrapper(a), i()
        })
    }, e.effects.effect.highlight = function (t, i) {
        var s = e(this), n = ["backgroundImage", "backgroundColor", "opacity"],
            a = e.effects.setMode(s, t.mode || "show"), o = {backgroundColor: s.css("backgroundColor")};
        "hide" === a && (o.opacity = 0), e.effects.save(s, n), s.show().css({
            backgroundImage: "none",
            backgroundColor: t.color || "#ffff99"
        }).animate(o, {
            queue: !1, duration: t.duration, easing: t.easing, complete: function () {
                "hide" === a && s.hide(), e.effects.restore(s, n), i()
            }
        })
    }, e.effects.effect.size = function (t, i) {
        var s, n, a, o = e(this),
            r = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"],
            h = ["position", "top", "bottom", "left", "right", "overflow", "opacity"],
            l = ["width", "height", "overflow"], u = ["fontSize"],
            d = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"],
            c = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"],
            p = e.effects.setMode(o, t.mode || "effect"), f = t.restore || "effect" !== p, m = t.scale || "both",
            g = t.origin || ["middle", "center"], v = o.css("position"), y = f ? r : h,
            b = {height: 0, width: 0, outerHeight: 0, outerWidth: 0};
        "show" === p && o.show(), s = {
            height: o.height(),
            width: o.width(),
            outerHeight: o.outerHeight(),
            outerWidth: o.outerWidth()
        }, "toggle" === t.mode && "show" === p ? (o.from = t.to || b, o.to = t.from || s) : (o.from = t.from || ("show" === p ? b : s), o.to = t.to || ("hide" === p ? b : s)), a = {
            from: {
                y: o.from.height / s.height,
                x: o.from.width / s.width
            }, to: {y: o.to.height / s.height, x: o.to.width / s.width}
        }, ("box" === m || "both" === m) && (a.from.y !== a.to.y && (y = y.concat(d), o.from = e.effects.setTransition(o, d, a.from.y, o.from), o.to = e.effects.setTransition(o, d, a.to.y, o.to)), a.from.x !== a.to.x && (y = y.concat(c), o.from = e.effects.setTransition(o, c, a.from.x, o.from), o.to = e.effects.setTransition(o, c, a.to.x, o.to))), ("content" === m || "both" === m) && a.from.y !== a.to.y && (y = y.concat(u).concat(l), o.from = e.effects.setTransition(o, u, a.from.y, o.from), o.to = e.effects.setTransition(o, u, a.to.y, o.to)), e.effects.save(o, y), o.show(), e.effects.createWrapper(o), o.css("overflow", "hidden").css(o.from), g && (n = e.effects.getBaseline(g, s), o.from.top = (s.outerHeight - o.outerHeight()) * n.y, o.from.left = (s.outerWidth - o.outerWidth()) * n.x, o.to.top = (s.outerHeight - o.to.outerHeight) * n.y, o.to.left = (s.outerWidth - o.to.outerWidth) * n.x), o.css(o.from), ("content" === m || "both" === m) && (d = d.concat(["marginTop", "marginBottom"]).concat(u), c = c.concat(["marginLeft", "marginRight"]), l = r.concat(d).concat(c), o.find("*[width]").each(function () {
            var i = e(this),
                s = {height: i.height(), width: i.width(), outerHeight: i.outerHeight(), outerWidth: i.outerWidth()};
            f && e.effects.save(i, l), i.from = {
                height: s.height * a.from.y,
                width: s.width * a.from.x,
                outerHeight: s.outerHeight * a.from.y,
                outerWidth: s.outerWidth * a.from.x
            }, i.to = {
                height: s.height * a.to.y,
                width: s.width * a.to.x,
                outerHeight: s.height * a.to.y,
                outerWidth: s.width * a.to.x
            }, a.from.y !== a.to.y && (i.from = e.effects.setTransition(i, d, a.from.y, i.from), i.to = e.effects.setTransition(i, d, a.to.y, i.to)), a.from.x !== a.to.x && (i.from = e.effects.setTransition(i, c, a.from.x, i.from), i.to = e.effects.setTransition(i, c, a.to.x, i.to)), i.css(i.from), i.animate(i.to, t.duration, t.easing, function () {
                f && e.effects.restore(i, l)
            })
        })), o.animate(o.to, {
            queue: !1, duration: t.duration, easing: t.easing, complete: function () {
                0 === o.to.opacity && o.css("opacity", o.from.opacity), "hide" === p && o.hide(), e.effects.restore(o, y), f || ("static" === v ? o.css({
                    position: "relative",
                    top: o.to.top,
                    left: o.to.left
                }) : e.each(["top", "left"], function (e, t) {
                    o.css(t, function (t, i) {
                        var s = parseInt(i, 10), n = e ? o.to.left : o.to.top;
                        return "auto" === i ? n + "px" : s + n + "px"
                    })
                })), e.effects.removeWrapper(o), i()
            }
        })
    }, e.effects.effect.scale = function (t, i) {
        var s = e(this), n = e.extend(!0, {}, t), a = e.effects.setMode(s, t.mode || "effect"),
            o = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) ? 0 : "hide" === a ? 0 : 100),
            r = t.direction || "both", h = t.origin,
            l = {height: s.height(), width: s.width(), outerHeight: s.outerHeight(), outerWidth: s.outerWidth()},
            u = {y: "horizontal" !== r ? o / 100 : 1, x: "vertical" !== r ? o / 100 : 1};
        n.effect = "size", n.queue = !1, n.complete = i, "effect" !== a && (n.origin = h || ["middle", "center"], n.restore = !0), n.from = t.from || ("show" === a ? {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0
        } : l), n.to = {
            height: l.height * u.y,
            width: l.width * u.x,
            outerHeight: l.outerHeight * u.y,
            outerWidth: l.outerWidth * u.x
        }, n.fade && ("show" === a && (n.from.opacity = 0, n.to.opacity = 1), "hide" === a && (n.from.opacity = 1, n.to.opacity = 0)), s.effect(n)
    }, e.effects.effect.puff = function (t, i) {
        var s = e(this), n = e.effects.setMode(s, t.mode || "hide"), a = "hide" === n,
            o = parseInt(t.percent, 10) || 150, r = o / 100,
            h = {height: s.height(), width: s.width(), outerHeight: s.outerHeight(), outerWidth: s.outerWidth()};
        e.extend(t, {
            effect: "scale",
            queue: !1,
            fade: !0,
            mode: n,
            complete: i,
            percent: a ? o : 100,
            from: a ? h : {
                height: h.height * r,
                width: h.width * r,
                outerHeight: h.outerHeight * r,
                outerWidth: h.outerWidth * r
            }
        }), s.effect(t)
    }, e.effects.effect.pulsate = function (t, i) {
        var s, n = e(this), a = e.effects.setMode(n, t.mode || "show"), o = "show" === a, r = "hide" === a,
            h = o || "hide" === a, l = 2 * (t.times || 5) + (h ? 1 : 0), u = t.duration / l, d = 0, c = n.queue(),
            p = c.length;
        for ((o || !n.is(":visible")) && (n.css("opacity", 0).show(), d = 1), s = 1; l > s; s++) n.animate({opacity: d}, u, t.easing), d = 1 - d;
        n.animate({opacity: d}, u, t.easing), n.queue(function () {
            r && n.hide(), i()
        }), p > 1 && c.splice.apply(c, [1, 0].concat(c.splice(p, l + 1))), n.dequeue()
    }, e.effects.effect.shake = function (t, i) {
        var s, n = e(this), a = ["position", "top", "bottom", "left", "right", "height", "width"],
            o = e.effects.setMode(n, t.mode || "effect"), r = t.direction || "left", h = t.distance || 20,
            l = t.times || 3, u = 2 * l + 1, d = Math.round(t.duration / u),
            c = "up" === r || "down" === r ? "top" : "left", p = "up" === r || "left" === r, f = {}, m = {}, g = {},
            v = n.queue(), y = v.length;
        for (e.effects.save(n, a), n.show(), e.effects.createWrapper(n), f[c] = (p ? "-=" : "+=") + h, m[c] = (p ? "+=" : "-=") + 2 * h, g[c] = (p ? "-=" : "+=") + 2 * h, n.animate(f, d, t.easing), s = 1; l > s; s++) n.animate(m, d, t.easing).animate(g, d, t.easing);
        n.animate(m, d, t.easing).animate(f, d / 2, t.easing).queue(function () {
            "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i()
        }), y > 1 && v.splice.apply(v, [1, 0].concat(v.splice(y, u + 1))), n.dequeue()
    }, e.effects.effect.slide = function (t, i) {
        var s, n = e(this), a = ["position", "top", "bottom", "left", "right", "width", "height"],
            o = e.effects.setMode(n, t.mode || "show"), r = "show" === o, h = t.direction || "left",
            l = "up" === h || "down" === h ? "top" : "left", u = "up" === h || "left" === h, d = {};
        e.effects.save(n, a), n.show(), s = t.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0), e.effects.createWrapper(n).css({overflow: "hidden"}), r && n.css(l, u ? isNaN(s) ? "-" + s : -s : s), d[l] = (r ? u ? "+=" : "-=" : u ? "-=" : "+=") + s, n.animate(d, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i()
            }
        })
    }, e.effects.effect.transfer = function (t, i) {
        var s = e(this), n = e(t.to), a = "fixed" === n.css("position"), o = e("body"), r = a ? o.scrollTop() : 0,
            h = a ? o.scrollLeft() : 0, l = n.offset(),
            u = {top: l.top - r, left: l.left - h, height: n.innerHeight(), width: n.innerWidth()}, d = s.offset(),
            c = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
                top: d.top - r,
                left: d.left - h,
                height: s.innerHeight(),
                width: s.innerWidth(),
                position: a ? "fixed" : "absolute"
            }).animate(u, t.duration, t.easing, function () {
                c.remove(), i()
            })
    }, e.widget("ui.progressbar", {
        version: "1.11.2",
        options: {max: 100, value: 0, change: null, complete: null},
        min: 0,
        _create: function () {
            this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                role: "progressbar",
                "aria-valuemin": this.min
            }), this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), this._refreshValue()
        },
        _destroy: function () {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.valueDiv.remove()
        },
        value: function (e) {
            return void 0 === e ? this.options.value : (this.options.value = this._constrainedValue(e), this._refreshValue(), void 0)
        },
        _constrainedValue: function (e) {
            return void 0 === e && (e = this.options.value), this.indeterminate = e === !1, "number" != typeof e && (e = 0), this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, e))
        },
        _setOptions: function (e) {
            var t = e.value;
            delete e.value, this._super(e), this.options.value = this._constrainedValue(t), this._refreshValue()
        },
        _setOption: function (e, t) {
            "max" === e && (t = Math.max(this.min, t)), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t), this._super(e, t)
        },
        _percentage: function () {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
        },
        _refreshValue: function () {
            var t = this.options.value, i = this._percentage();
            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%"), this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({
                "aria-valuemax": this.options.max,
                "aria-valuenow": t
            }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, this._trigger("change")), t === this.options.max && this._trigger("complete")
        }
    }), e.widget("ui.selectable", e.ui.mouse, {
        version: "1.11.2",
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function () {
            var t, i = this;
            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function () {
                t = e(i.options.filter, i.element[0]), t.addClass("ui-selectee"), t.each(function () {
                    var t = e(this), i = t.offset();
                    e.data(this, "selectable-item", {
                        element: this,
                        $element: t,
                        left: i.left,
                        top: i.top,
                        right: i.left + t.outerWidth(),
                        bottom: i.top + t.outerHeight(),
                        startselected: !1,
                        selected: t.hasClass("ui-selected"),
                        selecting: t.hasClass("ui-selecting"),
                        unselecting: t.hasClass("ui-unselecting")
                    })
                })
            }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), this.helper = e("<div class='ui-selectable-helper'></div>")
        },
        _destroy: function () {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy()
        },
        _mouseStart: function (t) {
            var i = this, s = this.options;
            this.opos = [t.pageX, t.pageY], this.options.disabled || (this.selectees = e(s.filter, this.element[0]), this._trigger("start", t), e(s.appendTo).append(this.helper), this.helper.css({
                left: t.pageX,
                top: t.pageY,
                width: 0,
                height: 0
            }), s.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function () {
                var s = e.data(this, "selectable-item");
                s.startselected = !0, t.metaKey || t.ctrlKey || (s.$element.removeClass("ui-selected"), s.selected = !1, s.$element.addClass("ui-unselecting"), s.unselecting = !0, i._trigger("unselecting", t, {unselecting: s.element}))
            }), e(t.target).parents().addBack().each(function () {
                var s, n = e.data(this, "selectable-item");
                return n ? (s = !t.metaKey && !t.ctrlKey || !n.$element.hasClass("ui-selected"), n.$element.removeClass(s ? "ui-unselecting" : "ui-selected").addClass(s ? "ui-selecting" : "ui-unselecting"), n.unselecting = !s, n.selecting = s, n.selected = s, s ? i._trigger("selecting", t, {selecting: n.element}) : i._trigger("unselecting", t, {unselecting: n.element}), !1) : void 0
            }))
        },
        _mouseDrag: function (t) {
            if (this.dragged = !0, !this.options.disabled) {
                var i, s = this, n = this.options, a = this.opos[0], o = this.opos[1], r = t.pageX, h = t.pageY;
                return a > r && (i = r, r = a, a = i), o > h && (i = h, h = o, o = i), this.helper.css({
                    left: a,
                    top: o,
                    width: r - a,
                    height: h - o
                }), this.selectees.each(function () {
                    var i = e.data(this, "selectable-item"), l = !1;
                    i && i.element !== s.element[0] && ("touch" === n.tolerance ? l = !(i.left > r || a > i.right || i.top > h || o > i.bottom) : "fit" === n.tolerance && (l = i.left > a && r > i.right && i.top > o && h > i.bottom), l ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, s._trigger("selecting", t, {selecting: i.element}))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), s._trigger("unselecting", t, {unselecting: i.element}))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, s._trigger("unselecting", t, {unselecting: i.element})))))
                }), !1
            }
        },
        _mouseStop: function (t) {
            var i = this;
            return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function () {
                var s = e.data(this, "selectable-item");
                s.$element.removeClass("ui-unselecting"), s.unselecting = !1, s.startselected = !1, i._trigger("unselected", t, {unselected: s.element})
            }), e(".ui-selecting", this.element[0]).each(function () {
                var s = e.data(this, "selectable-item");
                s.$element.removeClass("ui-selecting").addClass("ui-selected"), s.selecting = !1, s.selected = !0, s.startselected = !0, i._trigger("selected", t, {selected: s.element})
            }), this._trigger("stop", t), this.helper.remove(), !1
        }
    }), e.widget("ui.selectmenu", {
        version: "1.11.2",
        defaultElement: "<select>",
        options: {
            appendTo: null,
            disabled: null,
            icons: {button: "ui-icon-triangle-1-s"},
            position: {my: "left top", at: "left bottom", collision: "none"},
            width: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            select: null
        },
        _create: function () {
            var e = this.element.uniqueId().attr("id");
            this.ids = {
                element: e,
                button: e + "-button",
                menu: e + "-menu"
            }, this._drawButton(), this._drawMenu(), this.options.disabled && this.disable()
        },
        _drawButton: function () {
            var t = this, i = this.element.attr("tabindex");
            this.label = e("label[for='" + this.ids.element + "']").attr("for", this.ids.button), this._on(this.label, {
                click: function (e) {
                    this.button.focus(), e.preventDefault()
                }
            }), this.element.hide(), this.button = e("<span>", {
                "class": "ui-selectmenu-button ui-widget ui-state-default ui-corner-all",
                tabindex: i || this.options.disabled ? -1 : 0,
                id: this.ids.button,
                role: "combobox",
                "aria-expanded": "false",
                "aria-autocomplete": "list",
                "aria-owns": this.ids.menu,
                "aria-haspopup": "true"
            }).insertAfter(this.element), e("<span>", {"class": "ui-icon " + this.options.icons.button}).prependTo(this.button), this.buttonText = e("<span>", {"class": "ui-selectmenu-text"}).appendTo(this.button), this._setText(this.buttonText, this.element.find("option:selected").text()), this._resizeButton(), this._on(this.button, this._buttonEvents), this.button.one("focusin", function () {
                t.menuItems || t._refreshMenu()
            }), this._hoverable(this.button), this._focusable(this.button)
        },
        _drawMenu: function () {
            var t = this;
            this.menu = e("<ul>", {
                "aria-hidden": "true",
                "aria-labelledby": this.ids.button,
                id: this.ids.menu
            }), this.menuWrap = e("<div>", {"class": "ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()), this.menuInstance = this.menu.menu({
                role: "listbox",
                select: function (e, i) {
                    e.preventDefault(), t._setSelection(), t._select(i.item.data("ui-selectmenu-item"), e)
                },
                focus: function (e, i) {
                    var s = i.item.data("ui-selectmenu-item");
                    null != t.focusIndex && s.index !== t.focusIndex && (t._trigger("focus", e, {item: s}), t.isOpen || t._select(s, e)), t.focusIndex = s.index, t.button.attr("aria-activedescendant", t.menuItems.eq(s.index).attr("id"))
                }
            }).menu("instance"), this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"), this.menuInstance._off(this.menu, "mouseleave"), this.menuInstance._closeOnDocumentClick = function () {
                return !1
            }, this.menuInstance._isDivider = function () {
                return !1
            }
        },
        refresh: function () {
            this._refreshMenu(), this._setText(this.buttonText, this._getSelectedItem().text()), this.options.width || this._resizeButton()
        },
        _refreshMenu: function () {
            this.menu.empty();
            var e, t = this.element.find("option");
            t.length && (this._parseOptions(t), this._renderMenu(this.menu, this.items), this.menuInstance.refresh(), this.menuItems = this.menu.find("li").not(".ui-selectmenu-optgroup"), e = this._getSelectedItem(), this.menuInstance.focus(null, e), this._setAria(e.data("ui-selectmenu-item")), this._setOption("disabled", this.element.prop("disabled")))
        },
        open: function (e) {
            this.options.disabled || (this.menuItems ? (this.menu.find(".ui-state-focus").removeClass("ui-state-focus"), this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(), this.isOpen = !0, this._toggleAttr(), this._resizeMenu(), this._position(), this._on(this.document, this._documentClick), this._trigger("open", e))
        },
        _position: function () {
            this.menuWrap.position(e.extend({of: this.button}, this.options.position))
        },
        close: function (e) {
            this.isOpen && (this.isOpen = !1, this._toggleAttr(), this.range = null, this._off(this.document), this._trigger("close", e))
        },
        widget: function () {
            return this.button
        },
        menuWidget: function () {
            return this.menu
        },
        _renderMenu: function (t, i) {
            var s = this, n = "";
            e.each(i, function (i, a) {
                a.optgroup !== n && (e("<li>", {
                    "class": "ui-selectmenu-optgroup ui-menu-divider" + (a.element.parent("optgroup").prop("disabled") ? " ui-state-disabled" : ""),
                    text: a.optgroup
                }).appendTo(t), n = a.optgroup), s._renderItemData(t, a)
            })
        },
        _renderItemData: function (e, t) {
            return this._renderItem(e, t).data("ui-selectmenu-item", t)
        },
        _renderItem: function (t, i) {
            var s = e("<li>");
            return i.disabled && s.addClass("ui-state-disabled"), this._setText(s, i.label), s.appendTo(t)
        },
        _setText: function (e, t) {
            t ? e.text(t) : e.html("&#160;")
        },
        _move: function (e, t) {
            var i, s, n = ".ui-menu-item";
            this.isOpen ? i = this.menuItems.eq(this.focusIndex) : (i = this.menuItems.eq(this.element[0].selectedIndex), n += ":not(.ui-state-disabled)"), s = "first" === e || "last" === e ? i["first" === e ? "prevAll" : "nextAll"](n).eq(-1) : i[e + "All"](n).eq(0), s.length && this.menuInstance.focus(t, s)
        },
        _getSelectedItem: function () {
            return this.menuItems.eq(this.element[0].selectedIndex)
        },
        _toggle: function (e) {
            this[this.isOpen ? "close" : "open"](e)
        },
        _setSelection: function () {
            var e;
            this.range && (window.getSelection ? (e = window.getSelection(), e.removeAllRanges(), e.addRange(this.range)) : this.range.select(), this.button.focus())
        },
        _documentClick: {
            mousedown: function (t) {
                this.isOpen && (e(t.target).closest(".ui-selectmenu-menu, #" + this.ids.button).length || this.close(t))
            }
        },
        _buttonEvents: {
            mousedown: function () {
                var e;
                window.getSelection ? (e = window.getSelection(), e.rangeCount && (this.range = e.getRangeAt(0))) : this.range = document.selection.createRange()
            }, click: function (e) {
                this._setSelection(), this._toggle(e)
            }, keydown: function (t) {
                var i = !0;
                switch (t.keyCode) {
                    case e.ui.keyCode.TAB:
                    case e.ui.keyCode.ESCAPE:
                        this.close(t), i = !1;
                        break;
                    case e.ui.keyCode.ENTER:
                        this.isOpen && this._selectFocusedItem(t);
                        break;
                    case e.ui.keyCode.UP:
                        t.altKey ? this._toggle(t) : this._move("prev", t);
                        break;
                    case e.ui.keyCode.DOWN:
                        t.altKey ? this._toggle(t) : this._move("next", t);
                        break;
                    case e.ui.keyCode.SPACE:
                        this.isOpen ? this._selectFocusedItem(t) : this._toggle(t);
                        break;
                    case e.ui.keyCode.LEFT:
                        this._move("prev", t);
                        break;
                    case e.ui.keyCode.RIGHT:
                        this._move("next", t);
                        break;
                    case e.ui.keyCode.HOME:
                    case e.ui.keyCode.PAGE_UP:
                        this._move("first", t);
                        break;
                    case e.ui.keyCode.END:
                    case e.ui.keyCode.PAGE_DOWN:
                        this._move("last", t);
                        break;
                    default:
                        this.menu.trigger(t), i = !1
                }
                i && t.preventDefault()
            }
        },
        _selectFocusedItem: function (e) {
            var t = this.menuItems.eq(this.focusIndex);
            t.hasClass("ui-state-disabled") || this._select(t.data("ui-selectmenu-item"), e)
        },
        _select: function (e, t) {
            var i = this.element[0].selectedIndex;
            this.element[0].selectedIndex = e.index, this._setText(this.buttonText, e.label), this._setAria(e), this._trigger("select", t, {item: e}), e.index !== i && this._trigger("change", t, {item: e}), this.close(t)
        },
        _setAria: function (e) {
            var t = this.menuItems.eq(e.index).attr("id");
            this.button.attr({
                "aria-labelledby": t,
                "aria-activedescendant": t
            }), this.menu.attr("aria-activedescendant", t)
        },
        _setOption: function (e, t) {
            "icons" === e && this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button), this._super(e, t), "appendTo" === e && this.menuWrap.appendTo(this._appendTo()), "disabled" === e && (this.menuInstance.option("disabled", t), this.button.toggleClass("ui-state-disabled", t).attr("aria-disabled", t), this.element.prop("disabled", t), t ? (this.button.attr("tabindex", -1), this.close()) : this.button.attr("tabindex", 0)), "width" === e && this._resizeButton()
        },
        _appendTo: function () {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t
        },
        _toggleAttr: function () {
            this.button.toggleClass("ui-corner-top", this.isOpen).toggleClass("ui-corner-all", !this.isOpen).attr("aria-expanded", this.isOpen), this.menuWrap.toggleClass("ui-selectmenu-open", this.isOpen), this.menu.attr("aria-hidden", !this.isOpen)
        },
        _resizeButton: function () {
            var e = this.options.width;
            e || (e = this.element.show().outerWidth(), this.element.hide()), this.button.outerWidth(e)
        },
        _resizeMenu: function () {
            this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width("").outerWidth() + 1))
        },
        _getCreateOptions: function () {
            return {disabled: this.element.prop("disabled")}
        },
        _parseOptions: function (t) {
            var i = [];
            t.each(function (t, s) {
                var n = e(s), a = n.parent("optgroup");
                i.push({
                    element: n,
                    index: t,
                    value: n.attr("value"),
                    label: n.text(),
                    optgroup: a.attr("label") || "",
                    disabled: a.prop("disabled") || n.prop("disabled")
                })
            }), this.items = i
        },
        _destroy: function () {
            this.menuWrap.remove(), this.button.remove(), this.element.show(), this.element.removeUniqueId(), this.label.attr("for", this.ids.element)
        }
    }), e.widget("ui.slider", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        numPages: 5,
        _create: function () {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this._calculateNewMax(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1
        },
        _refresh: function () {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
        },
        _createHandles: function () {
            var t, i, s = this.options,
                n = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
                a = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>", o = [];
            for (i = s.values && s.values.length || 1, n.length > i && (n.slice(i).remove(), n = n.slice(0, i)), t = n.length; i > t; t++) o.push(a);
            this.handles = n.add(e(o.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function (t) {
                e(this).data("ui-slider-handle-index", t)
            })
        },
        _createRange: function () {
            var t = this.options, i = "";
            t.range ? (t.range === !0 && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                left: "",
                bottom: ""
            }) : (this.range = e("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(i + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), this.range = null)
        },
        _setupEvents: function () {
            this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles)
        },
        _destroy: function () {
            this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
        },
        _mouseCapture: function (t) {
            var i, s, n, a, o, r, h, l, u = this, d = this.options;
            return d.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                x: t.pageX,
                y: t.pageY
            }, s = this._normValueFromMouse(i), n = this._valueMax() - this._valueMin() + 1, this.handles.each(function (t) {
                var i = Math.abs(s - u.values(t));
                (n > i || n === i && (t === u._lastChangedValue || u.values(t) === d.min)) && (n = i, a = e(this), o = t)
            }), r = this._start(t, o), r === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = o, a.addClass("ui-state-active").focus(), h = a.offset(), l = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = l ? {
                left: 0,
                top: 0
            } : {
                left: t.pageX - h.left - a.width() / 2,
                top: t.pageY - h.top - a.height() / 2 - (parseInt(a.css("borderTopWidth"), 10) || 0) - (parseInt(a.css("borderBottomWidth"), 10) || 0) + (parseInt(a.css("marginTop"), 10) || 0)
            }, this.handles.hasClass("ui-state-hover") || this._slide(t, o, s), this._animateOff = !0, !0))
        },
        _mouseStart: function () {
            return !0
        },
        _mouseDrag: function (e) {
            var t = {x: e.pageX, y: e.pageY}, i = this._normValueFromMouse(t);
            return this._slide(e, this._handleIndex, i), !1
        },
        _mouseStop: function (e) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
        },
        _detectOrientation: function () {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function (e) {
            var t, i, s, n, a;
            return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), s = i / t, s > 1 && (s = 1), 0 > s && (s = 0), "vertical" === this.orientation && (s = 1 - s), n = this._valueMax() - this._valueMin(), a = this._valueMin() + s * n, this._trimAlignValue(a)
        },
        _start: function (e, t) {
            var i = {handle: this.handles[t], value: this.value()};
            return this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("start", e, i)
        },
        _slide: function (e, t, i) {
            var s, n, a;
            this.options.values && this.options.values.length ? (s = this.values(t ? 0 : 1), 2 === this.options.values.length && this.options.range === !0 && (0 === t && i > s || 1 === t && s > i) && (i = s), i !== this.values(t) && (n = this.values(), n[t] = i, a = this._trigger("slide", e, {
                handle: this.handles[t],
                value: i,
                values: n
            }), s = this.values(t ? 0 : 1), a !== !1 && this.values(t, i))) : i !== this.value() && (a = this._trigger("slide", e, {
                handle: this.handles[t],
                value: i
            }), a !== !1 && this.value(i))
        },
        _stop: function (e, t) {
            var i = {handle: this.handles[t], value: this.value()};
            this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("stop", e, i)
        },
        _change: function (e, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {handle: this.handles[t], value: this.value()};
                this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, i)
            }
        },
        value: function (e) {
            return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), this._change(null, 0), void 0) : this._value()
        },
        values: function (t, i) {
            var s, n, a;
            if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(i), this._refreshValue(), this._change(null, t), void 0;
            if (!arguments.length) return this._values();
            if (!e.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(t) : this.value();
            for (s = this.options.values, n = arguments[0], a = 0; s.length > a; a += 1) s[a] = this._trimAlignValue(n[a]), this._change(null, a);
            this._refreshValue()
        },
        _setOption: function (t, i) {
            var s, n = 0;
            switch ("range" === t && this.options.range === !0 && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (n = this.options.values.length), "disabled" === t && this.element.toggleClass("ui-state-disabled", !!i), this._super(t, i), t) {
                case"orientation":
                    this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue(), this.handles.css("horizontal" === i ? "bottom" : "left", "");
                    break;
                case"value":
                    this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                    break;
                case"values":
                    for (this._animateOff = !0, this._refreshValue(), s = 0; n > s; s += 1) this._change(null, s);
                    this._animateOff = !1;
                    break;
                case"step":
                case"min":
                case"max":
                    this._animateOff = !0, this._calculateNewMax(), this._refreshValue(), this._animateOff = !1;
                    break;
                case"range":
                    this._animateOff = !0, this._refresh(), this._animateOff = !1
            }
        },
        _value: function () {
            var e = this.options.value;
            return e = this._trimAlignValue(e)
        },
        _values: function (e) {
            var t, i, s;
            if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(), s = 0; i.length > s; s += 1) i[s] = this._trimAlignValue(i[s]);
                return i
            }
            return []
        },
        _trimAlignValue: function (e) {
            if (this._valueMin() >= e) return this._valueMin();
            if (e >= this._valueMax()) return this._valueMax();
            var t = this.options.step > 0 ? this.options.step : 1, i = (e - this._valueMin()) % t, s = e - i;
            return 2 * Math.abs(i) >= t && (s += i > 0 ? t : -t), parseFloat(s.toFixed(5))
        },
        _calculateNewMax: function () {
            var e = (this.options.max - this._valueMin()) % this.options.step;
            this.max = this.options.max - e
        },
        _valueMin: function () {
            return this.options.min
        },
        _valueMax: function () {
            return this.max
        },
        _refreshValue: function () {
            var t, i, s, n, a, o = this.options.range, r = this.options, h = this,
                l = this._animateOff ? !1 : r.animate, u = {};
            this.options.values && this.options.values.length ? this.handles.each(function (s) {
                i = 100 * ((h.values(s) - h._valueMin()) / (h._valueMax() - h._valueMin())), u["horizontal" === h.orientation ? "left" : "bottom"] = i + "%", e(this).stop(1, 1)[l ? "animate" : "css"](u, r.animate), h.options.range === !0 && ("horizontal" === h.orientation ? (0 === s && h.range.stop(1, 1)[l ? "animate" : "css"]({left: i + "%"}, r.animate), 1 === s && h.range[l ? "animate" : "css"]({width: i - t + "%"}, {
                    queue: !1,
                    duration: r.animate
                })) : (0 === s && h.range.stop(1, 1)[l ? "animate" : "css"]({bottom: i + "%"}, r.animate), 1 === s && h.range[l ? "animate" : "css"]({height: i - t + "%"}, {
                    queue: !1,
                    duration: r.animate
                }))), t = i
            }) : (s = this.value(), n = this._valueMin(), a = this._valueMax(), i = a !== n ? 100 * ((s - n) / (a - n)) : 0, u["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[l ? "animate" : "css"](u, r.animate), "min" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({width: i + "%"}, r.animate), "max" === o && "horizontal" === this.orientation && this.range[l ? "animate" : "css"]({width: 100 - i + "%"}, {
                queue: !1,
                duration: r.animate
            }), "min" === o && "vertical" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({height: i + "%"}, r.animate), "max" === o && "vertical" === this.orientation && this.range[l ? "animate" : "css"]({height: 100 - i + "%"}, {
                queue: !1,
                duration: r.animate
            }))
        },
        _handleEvents: {
            keydown: function (t) {
                var i, s, n, a, o = e(t.target).data("ui-slider-handle-index");
                switch (t.keyCode) {
                    case e.ui.keyCode.HOME:
                    case e.ui.keyCode.END:
                    case e.ui.keyCode.PAGE_UP:
                    case e.ui.keyCode.PAGE_DOWN:
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.RIGHT:
                    case e.ui.keyCode.DOWN:
                    case e.ui.keyCode.LEFT:
                        if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, e(t.target).addClass("ui-state-active"), i = this._start(t, o), i === !1)) return
                }
                switch (a = this.options.step, s = n = this.options.values && this.options.values.length ? this.values(o) : this.value(), t.keyCode) {
                    case e.ui.keyCode.HOME:
                        n = this._valueMin();
                        break;
                    case e.ui.keyCode.END:
                        n = this._valueMax();
                        break;
                    case e.ui.keyCode.PAGE_UP:
                        n = this._trimAlignValue(s + (this._valueMax() - this._valueMin()) / this.numPages);
                        break;
                    case e.ui.keyCode.PAGE_DOWN:
                        n = this._trimAlignValue(s - (this._valueMax() - this._valueMin()) / this.numPages);
                        break;
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.RIGHT:
                        if (s === this._valueMax()) return;
                        n = this._trimAlignValue(s + a);
                        break;
                    case e.ui.keyCode.DOWN:
                    case e.ui.keyCode.LEFT:
                        if (s === this._valueMin()) return;
                        n = this._trimAlignValue(s - a)
                }
                this._slide(t, o, n)
            }, keyup: function (t) {
                var i = e(t.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), e(t.target).removeClass("ui-state-active"))
            }
        }
    }), e.widget("ui.sortable", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _isOverAxis: function (e, t, i) {
            return e >= t && t + i > e
        },
        _isFloating: function (e) {
            return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"))
        },
        _create: function () {
            var e = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? "x" === e.axis || this._isFloating(this.items[0].item) : !1, this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), this.ready = !0
        },
        _setOption: function (e, t) {
            this._super(e, t), "handle" === e && this._setHandleClassName()
        },
        _setHandleClassName: function () {
            this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"), e.each(this.items, function () {
                (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("ui-sortable-handle")
            })
        },
        _destroy: function () {
            this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"), this._mouseDestroy();
            for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
            return this
        },
        _mouseCapture: function (t, i) {
            var s = null, n = !1, a = this;
            return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(t), e(t.target).parents().each(function () {
                return e.data(this, a.widgetName + "-item") === a ? (s = e(this), !1) : void 0
            }), e.data(t.target, a.widgetName + "-item") === a && (s = e(t.target)), s ? !this.options.handle || i || (e(this.options.handle, s).find("*").addBack().each(function () {
                this === t.target && (n = !0)
            }), n) ? (this.currentItem = s, this._removeCurrentsFromItems(), !0) : !1 : !1)
        },
        _mouseStart: function (t, i, s) {
            var n, a, o = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            }, e.extend(this.offset, {
                click: {left: t.pageX - this.offset.left, top: t.pageY - this.offset.top},
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), o.containment && this._setContainment(), o.cursor && "auto" !== o.cursor && (a = this.document.find("body"), this.storedCursor = a.css("cursor"), a.css("cursor", o.cursor), this.storedStylesheet = e("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(a)), o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !s) for (n = this.containers.length - 1; n >= 0; n--) this.containers[n]._trigger("activate", t, this._uiHash(this));
            return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0
        },
        _mouseDrag: function (t) {
            var i, s, n, a, o = this.options, r = !1;
            for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + o.scrollSpeed : t.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - o.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + o.scrollSpeed : t.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (t.pageY - e(document).scrollTop() < o.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - o.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < o.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + o.scrollSpeed)), t.pageX - e(document).scrollLeft() < o.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - o.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < o.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + o.scrollSpeed))), r !== !1 && e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), i = this.items.length - 1; i >= 0; i--) if (s = this.items[i], n = s.item[0], a = this._intersectsWithPointer(s), a && s.instance === this.currentContainer && n !== this.currentItem[0] && this.placeholder[1 === a ? "next" : "prev"]()[0] !== n && !e.contains(this.placeholder[0], n) && ("semi-dynamic" === this.options.type ? !e.contains(this.element[0], n) : !0)) {
                if (this.direction = 1 === a ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(s)) break;
                this._rearrange(t, s), this._trigger("change", t, this._uiHash());
                break
            }
            return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
        },
        _mouseStop: function (t, i) {
            if (t) {
                if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), this.options.revert) {
                    var s = this, n = this.placeholder.offset(), a = this.options.axis, o = {};
                    a && "x" !== a || (o.left = n.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), a && "y" !== a || (o.top = n.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, e(this.helper).animate(o, parseInt(this.options.revert, 10) || 500, function () {
                        s._clear(t)
                    })
                } else this._clear(t, i);
                return !1
            }
        },
        cancel: function () {
            if (this.dragging) {
                this._mouseUp({target: null}), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0)
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                helper: null,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null
            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
        },
        serialize: function (t) {
            var i = this._getItemsAsjQuery(t && t.connected), s = [];
            return t = t || {}, e(i).each(function () {
                var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                i && s.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]))
            }), !s.length && t.key && s.push(t.key + "="), s.join("&")
        },
        toArray: function (t) {
            var i = this._getItemsAsjQuery(t && t.connected), s = [];
            return t = t || {}, i.each(function () {
                s.push(e(t.item || this).attr(t.attribute || "id") || "")
            }), s
        },
        _intersectsWith: function (e) {
            var t = this.positionAbs.left, i = t + this.helperProportions.width, s = this.positionAbs.top,
                n = s + this.helperProportions.height, a = e.left, o = a + e.width, r = e.top, h = r + e.height,
                l = this.offset.click.top, u = this.offset.click.left,
                d = "x" === this.options.axis || s + l > r && h > s + l,
                c = "y" === this.options.axis || t + u > a && o > t + u, p = d && c;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? p : t + this.helperProportions.width / 2 > a && o > i - this.helperProportions.width / 2 && s + this.helperProportions.height / 2 > r && h > n - this.helperProportions.height / 2
        },
        _intersectsWithPointer: function (e) {
            var t = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                i = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width),
                s = t && i, n = this._getDragVerticalDirection(), a = this._getDragHorizontalDirection();
            return s ? this.floating ? a && "right" === a || "down" === n ? 2 : 1 : n && ("down" === n ? 2 : 1) : !1
        },
        _intersectsWithSides: function (e) {
            var t = this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                s = this._getDragVerticalDirection(), n = this._getDragHorizontalDirection();
            return this.floating && n ? "right" === n && i || "left" === n && !i : s && ("down" === s && t || "up" === s && !t)
        },
        _getDragVerticalDirection: function () {
            var e = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== e && (e > 0 ? "down" : "up")
        },
        _getDragHorizontalDirection: function () {
            var e = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== e && (e > 0 ? "right" : "left")
        },
        refresh: function (e) {
            return this._refreshItems(e), this._setHandleClassName(), this.refreshPositions(), this
        },
        _connectWith: function () {
            var e = this.options;
            return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith
        },
        _getItemsAsjQuery: function (t) {
            function i() {
                r.push(this)
            }

            var s, n, a, o, r = [], h = [], l = this._connectWith();
            if (l && t) for (s = l.length - 1; s >= 0; s--) for (a = e(l[s]), n = a.length - 1; n >= 0; n--) o = e.data(a[n], this.widgetFullName), o && o !== this && !o.options.disabled && h.push([e.isFunction(o.options.items) ? o.options.items.call(o.element) : e(o.options.items, o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), o]);
            for (h.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), s = h.length - 1; s >= 0; s--) h[s][0].each(i);
            return e(r)
        },
        _removeCurrentsFromItems: function () {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = e.grep(this.items, function (e) {
                for (var i = 0; t.length > i; i++) if (t[i] === e.item[0]) return !1;
                return !0
            })
        },
        _refreshItems: function (t) {
            this.items = [], this.containers = [this];
            var i, s, n, a, o, r, h, l, u = this.items,
                d = [[e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {item: this.currentItem}) : e(this.options.items, this.element), this]],
                c = this._connectWith();
            if (c && this.ready) for (i = c.length - 1; i >= 0; i--) for (n = e(c[i]), s = n.length - 1; s >= 0; s--) a = e.data(n[s], this.widgetFullName), a && a !== this && !a.options.disabled && (d.push([e.isFunction(a.options.items) ? a.options.items.call(a.element[0], t, {item: this.currentItem}) : e(a.options.items, a.element), a]), this.containers.push(a));
            for (i = d.length - 1; i >= 0; i--) for (o = d[i][1], r = d[i][0], s = 0, l = r.length; l > s; s++) h = e(r[s]), h.data(this.widgetName + "-item", o), u.push({
                item: h,
                instance: o,
                width: 0,
                height: 0,
                left: 0,
                top: 0
            })
        },
        refreshPositions: function (t) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i, s, n, a;
            for (i = this.items.length - 1; i >= 0; i--) s = this.items[i], s.instance !== this.currentContainer && this.currentContainer && s.item[0] !== this.currentItem[0] || (n = this.options.toleranceElement ? e(this.options.toleranceElement, s.item) : s.item, t || (s.width = n.outerWidth(), s.height = n.outerHeight()), a = n.offset(), s.left = a.left, s.top = a.top);
            if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (i = this.containers.length - 1; i >= 0; i--) a = this.containers[i].element.offset(), this.containers[i].containerCache.left = a.left, this.containers[i].containerCache.top = a.top, this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this
        },
        _createPlaceholder: function (t) {
            t = t || this;
            var i, s = t.options;
            s.placeholder && s.placeholder.constructor !== String || (i = s.placeholder, s.placeholder = {
                element: function () {
                    var s = t.currentItem[0].nodeName.toLowerCase(),
                        n = e("<" + s + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return "tr" === s ? t.currentItem.children().each(function () {
                        e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(n)
                    }) : "img" === s && n.attr("src", t.currentItem.attr("src")), i || n.css("visibility", "hidden"), n
                }, update: function (e, n) {
                    (!i || s.forcePlaceholderSize) && (n.height() || n.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), n.width() || n.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)))
                }
            }), t.placeholder = e(s.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), s.placeholder.update(t, t.placeholder)
        },
        _contactContainers: function (t) {
            var i, s, n, a, o, r, h, l, u, d, c = null, p = null;
            for (i = this.containers.length - 1; i >= 0; i--) if (!e.contains(this.currentItem[0], this.containers[i].element[0])) if (this._intersectsWith(this.containers[i].containerCache)) {
                if (c && e.contains(this.containers[i].element[0], c.element[0])) continue;
                c = this.containers[i], p = i
            } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0);
            if (c) if (1 === this.containers.length) this.containers[p].containerCache.over || (this.containers[p]._trigger("over", t, this._uiHash(this)), this.containers[p].containerCache.over = 1); else {
                for (n = 1e4, a = null, u = c.floating || this._isFloating(this.currentItem), o = u ? "left" : "top", r = u ? "width" : "height", d = u ? "clientX" : "clientY", s = this.items.length - 1; s >= 0; s--) e.contains(this.containers[p].element[0], this.items[s].item[0]) && this.items[s].item[0] !== this.currentItem[0] && (h = this.items[s].item.offset()[o], l = !1, t[d] - h > this.items[s][r] / 2 && (l = !0), n > Math.abs(t[d] - h) && (n = Math.abs(t[d] - h), a = this.items[s], this.direction = l ? "up" : "down"));
                if (!a && !this.options.dropOnEmpty) return;
                if (this.currentContainer === this.containers[p]) return this.currentContainer.containerCache.over || (this.containers[p]._trigger("over", t, this._uiHash()), this.currentContainer.containerCache.over = 1), void 0;
                a ? this._rearrange(t, a, null, !0) : this._rearrange(t, null, this.containers[p].element, !0), this._trigger("change", t, this._uiHash()), this.containers[p]._trigger("change", t, this._uiHash(this)), this.currentContainer = this.containers[p], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[p]._trigger("over", t, this._uiHash(this)), this.containers[p].containerCache.over = 1
            }
        },
        _createHelper: function (t) {
            var i = this.options,
                s = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
            return s.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(s[0]), s[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }), (!s[0].style.width || i.forceHelperSize) && s.width(this.currentItem.width()), (!s[0].style.height || i.forceHelperSize) && s.height(this.currentItem.height()), s
        },
        _adjustOffsetFromHelper: function (t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _getParentOffset: function () {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function () {
            if ("relative" === this.cssPosition) {
                var e = this.currentItem.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {top: 0, left: 0}
        },
        _cacheMargins: function () {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            }
        },
        _cacheHelperProportions: function () {
            this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
        },
        _setContainment: function () {
            var t, i, s, n = this.options;
            "parent" === n.containment && (n.containment = this.helper[0].parentNode), ("document" === n.containment || "window" === n.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e("document" === n.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (e("document" === n.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(n.containment) || (t = e(n.containment)[0], i = e(n.containment).offset(), s = "hidden" !== e(t).css("overflow"), this.containment = [i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (s ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (s ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
        },
        _convertPositionTo: function (t, i) {
            i || (i = this.position);
            var s = "absolute" === t ? 1 : -1,
                n = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                a = /(html|body)/i.test(n[0].tagName);
            return {
                top: i.top + this.offset.relative.top * s + this.offset.parent.top * s - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : a ? 0 : n.scrollTop()) * s,
                left: i.left + this.offset.relative.left * s + this.offset.parent.left * s - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : a ? 0 : n.scrollLeft()) * s
            }
        },
        _generatePosition: function (t) {
            var i, s, n = this.options, a = t.pageX, o = t.pageY,
                r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                h = /(html|body)/i.test(r[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (a = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (a = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top)), n.grid && (i = this.originalPageY + Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1], o = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - n.grid[1] : i + n.grid[1] : i, s = this.originalPageX + Math.round((a - this.originalPageX) / n.grid[0]) * n.grid[0], a = this.containment ? s - this.offset.click.left >= this.containment[0] && s - this.offset.click.left <= this.containment[2] ? s : s - this.offset.click.left >= this.containment[0] ? s - n.grid[0] : s + n.grid[0] : s)), {
                top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : h ? 0 : r.scrollTop()),
                left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : h ? 0 : r.scrollLeft())
            }
        },
        _rearrange: function (e, t, i, s) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
            var n = this.counter;
            this._delay(function () {
                n === this.counter && this.refreshPositions(!s)
            })
        },
        _clear: function (e, t) {
            function i(e, t, i) {
                return function (s) {
                    i._trigger(e, s, t._uiHash(t))
                }
            }

            this.reverting = !1;
            var s, n = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (s in this._storedCSS) ("auto" === this._storedCSS[s] || "static" === this._storedCSS[s]) && (this._storedCSS[s] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
            } else this.currentItem.show();
            for (this.fromOutside && !t && n.push(function (e) {
                this._trigger("receive", e, this._uiHash(this.fromOutside))
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || n.push(function (e) {
                this._trigger("update", e, this._uiHash())
            }), this !== this.currentContainer && (t || (n.push(function (e) {
                this._trigger("remove", e, this._uiHash())
            }), n.push(function (e) {
                return function (t) {
                    e._trigger("receive", t, this._uiHash(this))
                }
            }.call(this, this.currentContainer)), n.push(function (e) {
                return function (t) {
                    e._trigger("update", t, this._uiHash(this))
                }
            }.call(this, this.currentContainer)))), s = this.containers.length - 1; s >= 0; s--) t || n.push(i("deactivate", this, this.containers[s])), this.containers[s].containerCache.over && (n.push(i("out", this, this.containers[s])), this.containers[s].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !t) {
                for (s = 0; n.length > s; s++) n[s].call(this, e);
                this._trigger("stop", e, this._uiHash())
            }
            return this.fromOutside = !1, !this.cancelHelperRemoval
        },
        _trigger: function () {
            e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        },
        _uiHash: function (t) {
            var i = t || this;
            return {
                helper: i.helper,
                placeholder: i.placeholder || e([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: t ? t.element : null
            }
        }
    }), e.widget("ui.spinner", {
        version: "1.11.2",
        defaultElement: "<input>",
        widgetEventPrefix: "spin",
        options: {
            culture: null,
            icons: {down: "ui-icon-triangle-1-s", up: "ui-icon-triangle-1-n"},
            incremental: !0,
            max: null,
            min: null,
            numberFormat: null,
            page: 10,
            step: 1,
            change: null,
            spin: null,
            start: null,
            stop: null
        },
        _create: function () {
            this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), "" !== this.value() && this._value(this.element.val(), !0), this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {
                beforeunload: function () {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _getCreateOptions: function () {
            var t = {}, i = this.element;
            return e.each(["min", "max", "step"], function (e, s) {
                var n = i.attr(s);
                void 0 !== n && n.length && (t[s] = n)
            }), t
        },
        _events: {
            keydown: function (e) {
                this._start(e) && this._keydown(e) && e.preventDefault()
            }, keyup: "_stop", focus: function () {
                this.previous = this.element.val()
            }, blur: function (e) {
                return this.cancelBlur ? (delete this.cancelBlur, void 0) : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", e), void 0)
            }, mousewheel: function (e, t) {
                if (t) {
                    if (!this.spinning && !this._start(e)) return !1;
                    this._spin((t > 0 ? 1 : -1) * this.options.step, e), clearTimeout(this.mousewheelTimer), this.mousewheelTimer = this._delay(function () {
                        this.spinning && this._stop(e)
                    }, 100), e.preventDefault()
                }
            }, "mousedown .ui-spinner-button": function (t) {
                function i() {
                    var e = this.element[0] === this.document[0].activeElement;
                    e || (this.element.focus(), this.previous = s, this._delay(function () {
                        this.previous = s
                    }))
                }

                var s;
                s = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), t.preventDefault(), i.call(this), this.cancelBlur = !0, this._delay(function () {
                    delete this.cancelBlur, i.call(this)
                }), this._start(t) !== !1 && this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
            }, "mouseup .ui-spinner-button": "_stop", "mouseenter .ui-spinner-button": function (t) {
                return e(t.currentTarget).hasClass("ui-state-active") ? this._start(t) === !1 ? !1 : (this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t), void 0) : void 0
            }, "mouseleave .ui-spinner-button": "_stop"
        },
        _draw: function () {
            var e = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton"), this.buttons = e.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), this.buttons.height() > Math.ceil(.5 * e.height()) && e.height() > 0 && e.height(e.height()), this.options.disabled && this.disable()
        },
        _keydown: function (t) {
            var i = this.options, s = e.ui.keyCode;
            switch (t.keyCode) {
                case s.UP:
                    return this._repeat(null, 1, t), !0;
                case s.DOWN:
                    return this._repeat(null, -1, t), !0;
                case s.PAGE_UP:
                    return this._repeat(null, i.page, t), !0;
                case s.PAGE_DOWN:
                    return this._repeat(null, -i.page, t), !0
            }
            return !1
        },
        _uiSpinnerHtml: function () {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"
        },
        _buttonHtml: function () {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" + "</a>" + "<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" + "<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" + "</a>"
        },
        _start: function (e) {
            return this.spinning || this._trigger("start", e) !== !1 ? (this.counter || (this.counter = 1), this.spinning = !0, !0) : !1
        },
        _repeat: function (e, t, i) {
            e = e || 500, clearTimeout(this.timer), this.timer = this._delay(function () {
                this._repeat(40, t, i)
            }, e), this._spin(t * this.options.step, i)
        },
        _spin: function (e, t) {
            var i = this.value() || 0;
            this.counter || (this.counter = 1), i = this._adjustValue(i + e * this._increment(this.counter)), this.spinning && this._trigger("spin", t, {value: i}) === !1 || (this._value(i), this.counter++)
        },
        _increment: function (t) {
            var i = this.options.incremental;
            return i ? e.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1
        },
        _precision: function () {
            var e = this._precisionOf(this.options.step);
            return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e
        },
        _precisionOf: function (e) {
            var t = "" + e, i = t.indexOf(".");
            return -1 === i ? 0 : t.length - i - 1
        },
        _adjustValue: function (e) {
            var t, i, s = this.options;
            return t = null !== s.min ? s.min : 0, i = e - t, i = Math.round(i / s.step) * s.step, e = t + i, e = parseFloat(e.toFixed(this._precision())), null !== s.max && e > s.max ? s.max : null !== s.min && s.min > e ? s.min : e
        },
        _stop: function (e) {
            this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger("stop", e))
        },
        _setOption: function (e, t) {
            if ("culture" === e || "numberFormat" === e) {
                var i = this._parse(this.element.val());
                return this.options[e] = t, this.element.val(this._format(i)), void 0
            }
            ("max" === e || "min" === e || "step" === e) && "string" == typeof t && (t = this._parse(t)), "icons" === e && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up), this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)), this._super(e, t), "disabled" === e && (this.widget().toggleClass("ui-state-disabled", !!t), this.element.prop("disabled", !!t), this.buttons.button(t ? "disable" : "enable"))
        },
        _setOptions: h(function (e) {
            this._super(e)
        }),
        _parse: function (e) {
            return "string" == typeof e && "" !== e && (e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e), "" === e || isNaN(e) ? null : e
        },
        _format: function (e) {
            return "" === e ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e
        },
        _refresh: function () {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            })
        },
        isValid: function () {
            var e = this.value();
            return null === e ? !1 : e === this._adjustValue(e)
        },
        _value: function (e, t) {
            var i;
            "" !== e && (i = this._parse(e), null !== i && (t || (i = this._adjustValue(i)), e = this._format(i))), this.element.val(e), this._refresh()
        },
        _destroy: function () {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.uiSpinner.replaceWith(this.element)
        },
        stepUp: h(function (e) {
            this._stepUp(e)
        }),
        _stepUp: function (e) {
            this._start() && (this._spin((e || 1) * this.options.step), this._stop())
        },
        stepDown: h(function (e) {
            this._stepDown(e)
        }),
        _stepDown: function (e) {
            this._start() && (this._spin((e || 1) * -this.options.step), this._stop())
        },
        pageUp: h(function (e) {
            this._stepUp((e || 1) * this.options.page)
        }),
        pageDown: h(function (e) {
            this._stepDown((e || 1) * this.options.page)
        }),
        value: function (e) {
            return arguments.length ? (h(this._value).call(this, e), void 0) : this._parse(this.element.val())
        },
        widget: function () {
            return this.uiSpinner
        }
    }), e.widget("ui.tabs", {
        version: "1.11.2",
        delay: 300,
        options: {
            active: null,
            collapsible: !1,
            event: "click",
            heightStyle: "content",
            hide: null,
            show: null,
            activate: null,
            beforeActivate: null,
            beforeLoad: null,
            load: null
        },
        _isLocal: function () {
            var e = /#.*$/;
            return function (t) {
                var i, s;
                t = t.cloneNode(!1), i = t.href.replace(e, ""), s = location.href.replace(e, "");
                try {
                    i = decodeURIComponent(i)
                } catch (n) {
                }
                try {
                    s = decodeURIComponent(s)
                } catch (n) {
                }
                return t.hash.length > 1 && i === s
            }
        }(),
        _create: function () {
            var t = this, i = this.options;
            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible), this._processTabs(), i.active = this._initialActive(), e.isArray(i.disabled) && (i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function (e) {
                return t.tabs.index(e)
            }))).sort()), this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(i.active) : e(), this._refresh(), this.active.length && this.load(i.active)
        },
        _initialActive: function () {
            var t = this.options.active, i = this.options.collapsible, s = location.hash.substring(1);
            return null === t && (s && this.tabs.each(function (i, n) {
                return e(n).attr("aria-controls") === s ? (t = i, !1) : void 0
            }), null === t && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (null === t || -1 === t) && (t = this.tabs.length ? 0 : !1)), t !== !1 && (t = this.tabs.index(this.tabs.eq(t)), -1 === t && (t = i ? !1 : 0)), !i && t === !1 && this.anchors.length && (t = 0), t
        },
        _getCreateEventData: function () {
            return {tab: this.active, panel: this.active.length ? this._getPanelForTab(this.active) : e()}
        },
        _tabKeydown: function (t) {
            var i = e(this.document[0].activeElement).closest("li"), s = this.tabs.index(i), n = !0;
            if (!this._handlePageNav(t)) {
                switch (t.keyCode) {
                    case e.ui.keyCode.RIGHT:
                    case e.ui.keyCode.DOWN:
                        s++;
                        break;
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.LEFT:
                        n = !1, s--;
                        break;
                    case e.ui.keyCode.END:
                        s = this.anchors.length - 1;
                        break;
                    case e.ui.keyCode.HOME:
                        s = 0;
                        break;
                    case e.ui.keyCode.SPACE:
                        return t.preventDefault(), clearTimeout(this.activating), this._activate(s), void 0;
                    case e.ui.keyCode.ENTER:
                        return t.preventDefault(), clearTimeout(this.activating), this._activate(s === this.options.active ? !1 : s), void 0;
                    default:
                        return
                }
                t.preventDefault(), clearTimeout(this.activating), s = this._focusNextTab(s, n), t.ctrlKey || (i.attr("aria-selected", "false"), this.tabs.eq(s).attr("aria-selected", "true"), this.activating = this._delay(function () {
                    this.option("active", s)
                }, this.delay))
            }
        },
        _panelKeydown: function (t) {
            this._handlePageNav(t) || t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), this.active.focus())
        },
        _handlePageNav: function (t) {
            return t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0
        },
        _findNextTab: function (t, i) {
            function s() {
                return t > n && (t = 0), 0 > t && (t = n), t
            }

            for (var n = this.tabs.length - 1; -1 !== e.inArray(s(), this.options.disabled);) t = i ? t + 1 : t - 1;
            return t
        },
        _focusNextTab: function (e, t) {
            return e = this._findNextTab(e, t), this.tabs.eq(e).focus(), e
        },
        _setOption: function (e, t) {
            return "active" === e ? (this._activate(t), void 0) : "disabled" === e ? (this._setupDisabled(t), void 0) : (this._super(e, t), "collapsible" === e && (this.element.toggleClass("ui-tabs-collapsible", t), t || this.options.active !== !1 || this._activate(0)), "event" === e && this._setupEvents(t), "heightStyle" === e && this._setupHeightStyle(t), void 0)
        },
        _sanitizeSelector: function (e) {
            return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
        },
        refresh: function () {
            var t = this.options, i = this.tablist.children(":has(a[href])");
            t.disabled = e.map(i.filter(".ui-state-disabled"), function (e) {
                return i.index(e)
            }), this._processTabs(), t.active !== !1 && this.anchors.length ? this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, this.active = e()), this._refresh()
        },
        _refresh: function () {
            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden": "true"}), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            }), this._getPanelForTab(this.active).show().attr({"aria-hidden": "false"})) : this.tabs.eq(0).attr("tabIndex", 0)
        },
        _processTabs: function () {
            var t = this, i = this.tabs, s = this.anchors, n = this.panels;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist").delegate("> li", "mousedown" + this.eventNamespace, function (t) {
                e(this).is(".ui-state-disabled") && t.preventDefault()
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function () {
                e(this).closest("li").is(".ui-state-disabled") && this.blur()
            }), this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                role: "tab",
                tabIndex: -1
            }), this.anchors = this.tabs.map(function () {
                return e("a", this)[0]
            }).addClass("ui-tabs-anchor").attr({
                role: "presentation",
                tabIndex: -1
            }), this.panels = e(), this.anchors.each(function (i, s) {
                var n, a, o, r = e(s).uniqueId().attr("id"), h = e(s).closest("li"), l = h.attr("aria-controls");
                t._isLocal(s) ? (n = s.hash, o = n.substring(1), a = t.element.find(t._sanitizeSelector(n))) : (o = h.attr("aria-controls") || e({}).uniqueId()[0].id, n = "#" + o, a = t.element.find(n), a.length || (a = t._createPanel(o), a.insertAfter(t.panels[i - 1] || t.tablist)), a.attr("aria-live", "polite")), a.length && (t.panels = t.panels.add(a)), l && h.data("ui-tabs-aria-controls", l), h.attr({
                    "aria-controls": o,
                    "aria-labelledby": r
                }), a.attr("aria-labelledby", r)
            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel"), i && (this._off(i.not(this.tabs)), this._off(s.not(this.anchors)), this._off(n.not(this.panels)))
        },
        _getList: function () {
            return this.tablist || this.element.find("ol,ul").eq(0)
        },
        _createPanel: function (t) {
            return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0)
        },
        _setupDisabled: function (t) {
            e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1);
            for (var i, s = 0; i = this.tabs[s]; s++) t === !0 || -1 !== e.inArray(s, t) ? e(i).addClass("ui-state-disabled").attr("aria-disabled", "true") : e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");
            this.options.disabled = t
        },
        _setupEvents: function (t) {
            var i = {};
            t && e.each(t.split(" "), function (e, t) {
                i[t] = "_eventHandler"
            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(!0, this.anchors, {
                click: function (e) {
                    e.preventDefault()
                }
            }), this._on(this.anchors, i), this._on(this.tabs, {keydown: "_tabKeydown"}), this._on(this.panels, {keydown: "_panelKeydown"}), this._focusable(this.tabs), this._hoverable(this.tabs)
        },
        _setupHeightStyle: function (t) {
            var i, s = this.element.parent();
            "fill" === t ? (i = s.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function () {
                var t = e(this), s = t.css("position");
                "absolute" !== s && "fixed" !== s && (i -= t.outerHeight(!0))
            }), this.element.children().not(this.panels).each(function () {
                i -= e(this).outerHeight(!0)
            }), this.panels.each(function () {
                e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height()))
            }).css("overflow", "auto")) : "auto" === t && (i = 0, this.panels.each(function () {
                i = Math.max(i, e(this).height("").height())
            }).height(i))
        },
        _eventHandler: function (t) {
            var i = this.options, s = this.active, n = e(t.currentTarget), a = n.closest("li"), o = a[0] === s[0],
                r = o && i.collapsible, h = r ? e() : this._getPanelForTab(a),
                l = s.length ? this._getPanelForTab(s) : e(),
                u = {oldTab: s, oldPanel: l, newTab: r ? e() : a, newPanel: h};
            t.preventDefault(), a.hasClass("ui-state-disabled") || a.hasClass("ui-tabs-loading") || this.running || o && !i.collapsible || this._trigger("beforeActivate", t, u) === !1 || (i.active = r ? !1 : this.tabs.index(a), this.active = o ? e() : a, this.xhr && this.xhr.abort(), l.length || h.length || e.error("jQuery UI Tabs: Mismatching fragment identifier."), h.length && this.load(this.tabs.index(a), t), this._toggle(t, u))
        },
        _toggle: function (t, i) {
            function s() {
                a.running = !1, a._trigger("activate", t, i)
            }

            function n() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), o.length && a.options.show ? a._show(o, a.options.show, s) : (o.show(), s())
            }

            var a = this, o = i.newPanel, r = i.oldPanel;
            this.running = !0, r.length && this.options.hide ? this._hide(r, this.options.hide, function () {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), n()
            }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), r.hide(), n()), r.attr("aria-hidden", "true"), i.oldTab.attr({
                "aria-selected": "false",
                "aria-expanded": "false"
            }), o.length && r.length ? i.oldTab.attr("tabIndex", -1) : o.length && this.tabs.filter(function () {
                return 0 === e(this).attr("tabIndex")
            }).attr("tabIndex", -1), o.attr("aria-hidden", "false"), i.newTab.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            })
        },
        _activate: function (t) {
            var i, s = this._findActive(t);
            s[0] !== this.active[0] && (s.length || (s = this.active), i = s.find(".ui-tabs-anchor")[0], this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: e.noop
            }))
        },
        _findActive: function (t) {
            return t === !1 ? e() : this.tabs.eq(t)
        },
        _getIndex: function (e) {
            return "string" == typeof e && (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))), e
        },
        _destroy: function () {
            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), this.tablist.unbind(this.eventNamespace), this.tabs.add(this.panels).each(function () {
                e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")
            }), this.tabs.each(function () {
                var t = e(this), i = t.data("ui-tabs-aria-controls");
                i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls")
            }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "")
        },
        enable: function (t) {
            var i = this.options.disabled;
            i !== !1 && (void 0 === t ? i = !1 : (t = this._getIndex(t), i = e.isArray(i) ? e.map(i, function (e) {
                return e !== t ? e : null
            }) : e.map(this.tabs, function (e, i) {
                return i !== t ? i : null
            })), this._setupDisabled(i))
        },
        disable: function (t) {
            var i = this.options.disabled;
            if (i !== !0) {
                if (void 0 === t) i = !0; else {
                    if (t = this._getIndex(t), -1 !== e.inArray(t, i)) return;
                    i = e.isArray(i) ? e.merge([t], i).sort() : [t]
                }
                this._setupDisabled(i)
            }
        },
        load: function (t, i) {
            t = this._getIndex(t);
            var s = this, n = this.tabs.eq(t), a = n.find(".ui-tabs-anchor"), o = this._getPanelForTab(n),
                r = {tab: n, panel: o};
            this._isLocal(a[0]) || (this.xhr = e.ajax(this._ajaxSettings(a, i, r)), this.xhr && "canceled" !== this.xhr.statusText && (n.addClass("ui-tabs-loading"), o.attr("aria-busy", "true"), this.xhr.success(function (e) {
                setTimeout(function () {
                    o.html(e), s._trigger("load", i, r)
                }, 1)
            }).complete(function (e, t) {
                setTimeout(function () {
                    "abort" === t && s.panels.stop(!1, !0), n.removeClass("ui-tabs-loading"), o.removeAttr("aria-busy"), e === s.xhr && delete s.xhr
                }, 1)
            })))
        },
        _ajaxSettings: function (t, i, s) {
            var n = this;
            return {
                url: t.attr("href"), beforeSend: function (t, a) {
                    return n._trigger("beforeLoad", i, e.extend({jqXHR: t, ajaxSettings: a}, s))
                }
            }
        },
        _getPanelForTab: function (t) {
            var i = e(t).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i))
        }
    }), e.widget("ui.tooltip", {
        version: "1.11.2", options: {
            content: function () {
                var t = e(this).attr("title") || "";
                return e("<a>").text(t).html()
            },
            hide: !0,
            items: "[title]:not([disabled])",
            position: {my: "left top+15", at: "left bottom", collision: "flipfit flip"},
            show: !0,
            tooltipClass: null,
            track: !1,
            close: null,
            open: null
        }, _addDescribedBy: function (t, i) {
            var s = (t.attr("aria-describedby") || "").split(/\s+/);
            s.push(i), t.data("ui-tooltip-id", i).attr("aria-describedby", e.trim(s.join(" ")))
        }, _removeDescribedBy: function (t) {
            var i = t.data("ui-tooltip-id"), s = (t.attr("aria-describedby") || "").split(/\s+/), n = e.inArray(i, s);
            -1 !== n && s.splice(n, 1), t.removeData("ui-tooltip-id"), s = e.trim(s.join(" ")), s ? t.attr("aria-describedby", s) : t.removeAttr("aria-describedby")
        }, _create: function () {
            this._on({
                mouseover: "open",
                focusin: "open"
            }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable(), this.liveRegion = e("<div>").attr({
                role: "log",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)
        }, _setOption: function (t, i) {
            var s = this;
            return "disabled" === t ? (this[i ? "_disable" : "_enable"](), this.options[t] = i, void 0) : (this._super(t, i), "content" === t && e.each(this.tooltips, function (e, t) {
                s._updateContent(t.element)
            }), void 0)
        }, _disable: function () {
            var t = this;
            e.each(this.tooltips, function (i, s) {
                var n = e.Event("blur");
                n.target = n.currentTarget = s.element[0], t.close(n, !0)
            }), this.element.find(this.options.items).addBack().each(function () {
                var t = e(this);
                t.is("[title]") && t.data("ui-tooltip-title", t.attr("title")).removeAttr("title")
            })
        }, _enable: function () {
            this.element.find(this.options.items).addBack().each(function () {
                var t = e(this);
                t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"))
            })
        }, open: function (t) {
            var i = this, s = e(t ? t.target : this.element).closest(this.options.items);
            s.length && !s.data("ui-tooltip-id") && (s.attr("title") && s.data("ui-tooltip-title", s.attr("title")), s.data("ui-tooltip-open", !0), t && "mouseover" === t.type && s.parents().each(function () {
                var t, s = e(this);
                s.data("ui-tooltip-open") && (t = e.Event("blur"), t.target = t.currentTarget = this, i.close(t, !0)), s.attr("title") && (s.uniqueId(), i.parents[this.id] = {
                    element: this,
                    title: s.attr("title")
                }, s.attr("title", ""))
            }), this._updateContent(s, t))
        }, _updateContent: function (e, t) {
            var i, s = this.options.content, n = this, a = t ? t.type : null;
            return "string" == typeof s ? this._open(t, e, s) : (i = s.call(e[0], function (i) {
                e.data("ui-tooltip-open") && n._delay(function () {
                    t && (t.type = a), this._open(t, e, i)
                })
            }), i && this._open(t, e, i), void 0)
        }, _open: function (t, i, s) {
            function n(e) {
                u.of = e, o.is(":hidden") || o.position(u)
            }

            var a, o, r, h, l, u = e.extend({}, this.options.position);
            if (s) {
                if (a = this._find(i)) return a.tooltip.find(".ui-tooltip-content").html(s), void 0;
                i.is("[title]") && (t && "mouseover" === t.type ? i.attr("title", "") : i.removeAttr("title")), a = this._tooltip(i), o = a.tooltip, this._addDescribedBy(i, o.attr("id")), o.find(".ui-tooltip-content").html(s), this.liveRegion.children().hide(), s.clone ? (l = s.clone(), l.removeAttr("id").find("[id]").removeAttr("id")) : l = s, e("<div>").html(l).appendTo(this.liveRegion), this.options.track && t && /^mouse/.test(t.type) ? (this._on(this.document, {mousemove: n}), n(t)) : o.position(e.extend({of: i}, this.options.position)), o.hide(), this._show(o, this.options.show), this.options.show && this.options.show.delay && (h = this.delayedShow = setInterval(function () {
                    o.is(":visible") && (n(u.of), clearInterval(h))
                }, e.fx.interval)), this._trigger("open", t, {tooltip: o}), r = {
                    keyup: function (t) {
                        if (t.keyCode === e.ui.keyCode.ESCAPE) {
                            var s = e.Event(t);
                            s.currentTarget = i[0], this.close(s, !0)
                        }
                    }
                }, i[0] !== this.element[0] && (r.remove = function () {
                    this._removeTooltip(o)
                }), t && "mouseover" !== t.type || (r.mouseleave = "close"), t && "focusin" !== t.type || (r.focusout = "close"), this._on(!0, i, r)
            }
        }, close: function (t) {
            var i, s = this, n = e(t ? t.currentTarget : this.element), a = this._find(n);
            a && (i = a.tooltip, a.closing || (clearInterval(this.delayedShow), n.data("ui-tooltip-title") && !n.attr("title") && n.attr("title", n.data("ui-tooltip-title")), this._removeDescribedBy(n), a.hiding = !0, i.stop(!0), this._hide(i, this.options.hide, function () {
                s._removeTooltip(e(this))
            }), n.removeData("ui-tooltip-open"), this._off(n, "mouseleave focusout keyup"), n[0] !== this.element[0] && this._off(n, "remove"), this._off(this.document, "mousemove"), t && "mouseleave" === t.type && e.each(this.parents, function (t, i) {
                e(i.element).attr("title", i.title), delete s.parents[t]
            }), a.closing = !0, this._trigger("close", t, {tooltip: i}), a.hiding || (a.closing = !1)))
        }, _tooltip: function (t) {
            var i = e("<div>").attr("role", "tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || "")),
                s = i.uniqueId().attr("id");
            return e("<div>").addClass("ui-tooltip-content").appendTo(i), i.appendTo(this.document[0].body), this.tooltips[s] = {
                element: t,
                tooltip: i
            }
        }, _find: function (e) {
            var t = e.data("ui-tooltip-id");
            return t ? this.tooltips[t] : null
        }, _removeTooltip: function (e) {
            e.remove(), delete this.tooltips[e.attr("id")]
        }, _destroy: function () {
            var t = this;
            e.each(this.tooltips, function (i, s) {
                var n = e.Event("blur"), a = s.element;
                n.target = n.currentTarget = a[0], t.close(n, !0), e("#" + i).remove(), a.data("ui-tooltip-title") && (a.attr("title") || a.attr("title", a.data("ui-tooltip-title")), a.removeData("ui-tooltip-title"))
            }), this.liveRegion.remove()
        }
    })
});
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
/* @preserve
 * Leaflet 1.3.3, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2018 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.L={})}(this,function(t){"use strict";function i(t){var i,e,n,o;for(e=1,n=arguments.length;e<n;e++){o=arguments[e];for(i in o)t[i]=o[i]}return t}function e(t,i){var e=Array.prototype.slice;if(t.bind)return t.bind.apply(t,e.call(arguments,1));var n=e.call(arguments,2);return function(){return t.apply(i,n.length?n.concat(e.call(arguments)):arguments)}}function n(t){return t._leaflet_id=t._leaflet_id||++ei,t._leaflet_id}function o(t,i,e){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(e,o),o=!1)},s=function(){n?o=arguments:(t.apply(e,arguments),setTimeout(r,i),n=!0)}}function s(t,i,e){var n=i[1],o=i[0],s=n-o;return t===n&&e?t:((t-o)%s+s)%s+o}function r(){return!1}function a(t,i){var e=Math.pow(10,void 0===i?6:i);return Math.round(t*e)/e}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return h(t).split(/\s+/)}function l(t,i){t.hasOwnProperty("options")||(t.options=t.options?ii(t.options):{});for(var e in i)t.options[e]=i[e];return t.options}function c(t,i,e){var n=[];for(var o in t)n.push(encodeURIComponent(e?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(i&&-1!==i.indexOf("?")?"&":"?")+n.join("&")}function _(t,i){return t.replace(ni,function(t,e){var n=i[e];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(i)),n})}function d(t,i){for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var i=+new Date,e=Math.max(0,16-(i-ri));return ri=i+e,window.setTimeout(t,e)}function f(t,i,n){if(!n||ai!==m)return ai.call(window,e(t,i));t.call(i)}function g(t){t&&hi.call(window,t)}function v(){}function y(t){if("undefined"!=typeof L&&L&&L.Mixin){t=oi(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function x(t,i,e){this.x=e?Math.round(t):t,this.y=e?Math.round(i):i}function w(t,i,e){return t instanceof x?t:oi(t)?new x(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new x(t.x,t.y):new x(t,i,e)}function P(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n])}function b(t,i){return!t||t instanceof P?t:new P(t,i)}function T(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n])}function z(t,i){return t instanceof T?t:new T(t,i)}function M(t,i,e){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,void 0!==e&&(this.alt=+e)}function C(t,i,e){return t instanceof M?t:oi(t)&&"object"!=typeof t[0]?3===t.length?new M(t[0],t[1],t[2]):2===t.length?new M(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new M(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===i?null:new M(t,i,e)}function S(t,i,e,n){if(oi(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=i,this._c=e,this._d=n}function Z(t,i,e,n){return new S(t,i,e,n)}function E(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t,i){var e,n,o,s,r,a,h="";for(e=0,o=t.length;e<o;e++){for(n=0,s=(r=t[e]).length;n<s;n++)a=r[n],h+=(n?"L":"M")+a.x+" "+a.y;h+=i?Ji?"z":"x":""}return h||"M0 0"}function A(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function B(t,i,e,n){return"touchstart"===i?O(t,e,n):"touchmove"===i?W(t,e,n):"touchend"===i&&H(t,e,n),this}function I(t,i,e){var n=t["_leaflet_"+i+e];return"touchstart"===i?t.removeEventListener(te,n,!1):"touchmove"===i?t.removeEventListener(ie,n,!1):"touchend"===i&&(t.removeEventListener(ee,n,!1),t.removeEventListener(ne,n,!1)),this}function O(t,i,n){var o=e(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(oe.indexOf(t.target.tagName)<0))return;Pt(t)}j(t,i)});t["_leaflet_touchstart"+n]=o,t.addEventListener(te,o,!1),re||(document.documentElement.addEventListener(te,R,!0),document.documentElement.addEventListener(ie,N,!0),document.documentElement.addEventListener(ee,D,!0),document.documentElement.addEventListener(ne,D,!0),re=!0)}function R(t){se[t.pointerId]=t,ae++}function N(t){se[t.pointerId]&&(se[t.pointerId]=t)}function D(t){delete se[t.pointerId],ae--}function j(t,i){t.touches=[];for(var e in se)t.touches.push(se[e]);t.changedTouches=[t],i(t)}function W(t,i,e){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&j(t,i)};t["_leaflet_touchmove"+e]=n,t.addEventListener(ie,n,!1)}function H(t,i,e){var n=function(t){j(t,i)};t["_leaflet_touchend"+e]=n,t.addEventListener(ee,n,!1),t.addEventListener(ne,n,!1)}function F(t,i,e){function n(t){var i;if(Vi){if(!bi||"mouse"===t.pointerType)return;i=ae}else i=t.touches.length;if(!(i>1)){var e=Date.now(),n=e-(s||e);r=t.touches?t.touches[0]:t,a=n>0&&n<=h,s=e}}function o(t){if(a&&!r.cancelBubble){if(Vi){if(!bi||"mouse"===t.pointerType)return;var e,n,o={};for(n in r)e=r[n],o[n]=e&&e.bind?e.bind(r):e;r=o}r.type="dblclick",i(r),s=null}}var s,r,a=!1,h=250;return t[le+he+e]=n,t[le+ue+e]=o,t[le+"dblclick"+e]=i,t.addEventListener(he,n,!1),t.addEventListener(ue,o,!1),t.addEventListener("dblclick",i,!1),this}function U(t,i){var e=t[le+he+i],n=t[le+ue+i],o=t[le+"dblclick"+i];return t.removeEventListener(he,e,!1),t.removeEventListener(ue,n,!1),bi||t.removeEventListener("dblclick",o,!1),this}function V(t){return"string"==typeof t?document.getElementById(t):t}function q(t,i){var e=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!e||"auto"===e)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);e=n?n[i]:null}return"auto"===e?null:e}function G(t,i,e){var n=document.createElement(t);return n.className=i||"",e&&e.appendChild(n),n}function K(t){var i=t.parentNode;i&&i.removeChild(t)}function Y(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function X(t){var i=t.parentNode;i.lastChild!==t&&i.appendChild(t)}function J(t){var i=t.parentNode;i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function $(t,i){if(void 0!==t.classList)return t.classList.contains(i);var e=et(t);return e.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(e)}function Q(t,i){if(void 0!==t.classList)for(var e=u(i),n=0,o=e.length;n<o;n++)t.classList.add(e[n]);else if(!$(t,i)){var s=et(t);it(t,(s?s+" ":"")+i)}}function tt(t,i){void 0!==t.classList?t.classList.remove(i):it(t,h((" "+et(t)+" ").replace(" "+i+" "," ")))}function it(t,i){void 0===t.className.baseVal?t.className=i:t.className.baseVal=i}function et(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function nt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&ot(t,i)}function ot(t,i){var e=!1,n="DXImageTransform.Microsoft.Alpha";try{e=t.filters.item(n)}catch(t){if(1===i)return}i=Math.round(100*i),e?(e.Enabled=100!==i,e.Opacity=i):t.style.filter+=" progid:"+n+"(opacity="+i+")"}function st(t){for(var i=document.documentElement.style,e=0;e<t.length;e++)if(t[e]in i)return t[e];return!1}function rt(t,i,e){var n=i||new x(0,0);t.style[ce]=(Ri?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(e?" scale("+e+")":"")}function at(t,i){t._leaflet_pos=i,ji?rt(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function ht(t){return t._leaflet_pos||new x(0,0)}function ut(){mt(window,"dragstart",Pt)}function lt(){ft(window,"dragstart",Pt)}function ct(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(_t(),me=t,fe=t.style.outline,t.style.outline="none",mt(window,"keydown",_t))}function _t(){me&&(me.style.outline=fe,me=void 0,fe=void 0,ft(window,"keydown",_t))}function dt(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function pt(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}function mt(t,i,e,n){if("object"==typeof i)for(var o in i)gt(t,o,i[o],e);else for(var s=0,r=(i=u(i)).length;s<r;s++)gt(t,i[s],e,n);return this}function ft(t,i,e,n){if("object"==typeof i)for(var o in i)vt(t,o,i[o],e);else if(i)for(var s=0,r=(i=u(i)).length;s<r;s++)vt(t,i[s],e,n);else{for(var a in t[ye])vt(t,a,t[ye][a]);delete t[ye]}return this}function gt(t,i,e,o){var s=i+n(e)+(o?"_"+n(o):"");if(t[ye]&&t[ye][s])return this;var r=function(i){return e.call(o||t,i||window.event)},a=r;Vi&&0===i.indexOf("touch")?B(t,i,r,s):!qi||"dblclick"!==i||!F||Vi&&Ei?"addEventListener"in t?"mousewheel"===i?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):"mouseenter"===i||"mouseleave"===i?(r=function(i){i=i||window.event,Ct(t,i)&&a(i)},t.addEventListener("mouseenter"===i?"mouseover":"mouseout",r,!1)):("click"===i&&zi&&(r=function(t){St(t,a)}),t.addEventListener(i,r,!1)):"attachEvent"in t&&t.attachEvent("on"+i,r):F(t,r,s),t[ye]=t[ye]||{},t[ye][s]=r}function vt(t,i,e,o){var s=i+n(e)+(o?"_"+n(o):""),r=t[ye]&&t[ye][s];if(!r)return this;Vi&&0===i.indexOf("touch")?I(t,i,s):!qi||"dblclick"!==i||!U||Vi&&Ei?"removeEventListener"in t?"mousewheel"===i?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===i?"mouseover":"mouseleave"===i?"mouseout":i,r,!1):"detachEvent"in t&&t.detachEvent("on"+i,r):U(t,s),t[ye][s]=null}function yt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Mt(t),this}function xt(t){return gt(t,"mousewheel",yt),this}function wt(t){return mt(t,"mousedown touchstart dblclick",yt),gt(t,"click",zt),this}function Pt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Lt(t){return Pt(t),yt(t),this}function bt(t,i){if(!i)return new x(t.clientX,t.clientY);var e=pt(i),n=e.boundingClientRect;return new x((t.clientX-n.left)/e.x-i.clientLeft,(t.clientY-n.top)/e.y-i.clientTop)}function Tt(t){return bi?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/xe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function zt(t){we[t.type]=!0}function Mt(t){var i=we[t.type];return we[t.type]=!1,i}function Ct(t,i){var e=i.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(t){return!1}return e!==t}function St(t,i){var e=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=ge&&e-ge;n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?Lt(t):(ge=e,i(t))}function Zt(t,i){if(!i||!t.length)return t.slice();var e=i*i;return t=Bt(t,e),t=kt(t,e)}function Et(t,i,e){return Math.sqrt(Dt(t,i,e,!0))}function kt(t,i){var e=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(e);n[0]=n[e-1]=1,At(t,n,i,0,e-1);var o,s=[];for(o=0;o<e;o++)n[o]&&s.push(t[o]);return s}function At(t,i,e,n,o){var s,r,a,h=0;for(r=n+1;r<=o-1;r++)(a=Dt(t[r],t[n],t[o],!0))>h&&(s=r,h=a);h>e&&(i[s]=1,At(t,i,e,n,s),At(t,i,e,s,o))}function Bt(t,i){for(var e=[t[0]],n=1,o=0,s=t.length;n<s;n++)Nt(t[n],t[o])>i&&(e.push(t[n]),o=n);return o<s-1&&e.push(t[s-1]),e}function It(t,i,e,n,o){var s,r,a,h=n?ke:Rt(t,e),u=Rt(i,e);for(ke=u;;){if(!(h|u))return[t,i];if(h&u)return!1;a=Rt(r=Ot(t,i,s=h||u,e,o),e),s===h?(t=r,h=a):(i=r,u=a)}}function Ot(t,i,e,n,o){var s,r,a=i.x-t.x,h=i.y-t.y,u=n.min,l=n.max;return 8&e?(s=t.x+a*(l.y-t.y)/h,r=l.y):4&e?(s=t.x+a*(u.y-t.y)/h,r=u.y):2&e?(s=l.x,r=t.y+h*(l.x-t.x)/a):1&e&&(s=u.x,r=t.y+h*(u.x-t.x)/a),new x(s,r,o)}function Rt(t,i){var e=0;return t.x<i.min.x?e|=1:t.x>i.max.x&&(e|=2),t.y<i.min.y?e|=4:t.y>i.max.y&&(e|=8),e}function Nt(t,i){var e=i.x-t.x,n=i.y-t.y;return e*e+n*n}function Dt(t,i,e,n){var o,s=i.x,r=i.y,a=e.x-s,h=e.y-r,u=a*a+h*h;return u>0&&((o=((t.x-s)*a+(t.y-r)*h)/u)>1?(s=e.x,r=e.y):o>0&&(s+=a*o,r+=h*o)),a=t.x-s,h=t.y-r,n?a*a+h*h:new x(s,r)}function jt(t){return!oi(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Wt(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jt(t)}function Ht(t,i,e){var n,o,s,r,a,h,u,l,c,_=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=Rt(t[o],i);for(r=0;r<4;r++){for(l=_[r],n=[],o=0,s=(u=t.length)-1;o<u;s=o++)a=t[o],h=t[s],a._code&l?h._code&l||((c=Ot(h,a,l,i,e))._code=Rt(c,i),n.push(c)):(h._code&l&&((c=Ot(h,a,l,i,e))._code=Rt(c,i),n.push(c)),n.push(a));t=n}return t}function Ft(t,i){var e,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,h=[],u=i&&i.pointToLayer,l=i&&i.coordsToLatLng||Ut;if(!a&&!r)return null;switch(r.type){case"Point":return e=l(a),u?u(t,e):new $e(e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)e=l(a[o]),h.push(u?u(t,e):new $e(e));return new Ke(h);case"LineString":case"MultiLineString":return n=Vt(a,"LineString"===r.type?0:1,l),new nn(n,i);case"Polygon":case"MultiPolygon":return n=Vt(a,"Polygon"===r.type?1:2,l),new on(n,i);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var c=Ft({geometry:r.geometries[o],type:"Feature",properties:t.properties},i);c&&h.push(c)}return new Ke(h);default:throw new Error("Invalid GeoJSON object.")}}function Ut(t){return new M(t[1],t[0],t[2])}function Vt(t,i,e){for(var n,o=[],s=0,r=t.length;s<r;s++)n=i?Vt(t[s],i-1,e):(e||Ut)(t[s]),o.push(n);return o}function qt(t,i){return i="number"==typeof i?i:6,void 0!==t.alt?[a(t.lng,i),a(t.lat,i),a(t.alt,i)]:[a(t.lng,i),a(t.lat,i)]}function Gt(t,i,e,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(i?Gt(t[s],i-1,e,n):qt(t[s],n));return!i&&e&&o.push(o[0]),o}function Kt(t,e){return t.feature?i({},t.feature,{geometry:e}):Yt(e)}function Yt(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function Xt(t,i){return new sn(t,i)}function Jt(t,i){return new mn(t,i)}function $t(t){return Xi?new vn(t):null}function Qt(t){return Ji||$i?new Pn(t):null}var ti=Object.freeze;Object.freeze=function(t){return t};var ii=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}(),ei=0,ni=/\{ *([\w_-]+) *\}/g,oi=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},si="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",ri=0,ai=window.requestAnimationFrame||p("RequestAnimationFrame")||m,hi=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},ui=(Object.freeze||Object)({freeze:ti,extend:i,create:ii,bind:e,lastId:ei,stamp:n,throttle:o,wrapNum:s,falseFn:r,formatNum:a,trim:h,splitWords:u,setOptions:l,getParamString:c,template:_,isArray:oi,indexOf:d,emptyImageUrl:si,requestFn:ai,cancelFn:hi,requestAnimFrame:f,cancelAnimFrame:g});v.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,o=ii(n);o.constructor=e,e.prototype=o;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(y(t.includes),i.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=i(ii(o.options),t.options)),i(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,i=o._initHooks.length;t<i;t++)o._initHooks[t].call(this)}},e},v.include=function(t){return i(this.prototype,t),this},v.mergeOptions=function(t){return i(this.prototype.options,t),this},v.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),e="function"==typeof t?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(e),this};var li={on:function(t,i,e){if("object"==typeof t)for(var n in t)this._on(n,t[n],i);else for(var o=0,s=(t=u(t)).length;o<s;o++)this._on(t[o],i,e);return this},off:function(t,i,e){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],i);else for(var o=0,s=(t=u(t)).length;o<s;o++)this._off(t[o],i,e);else delete this._events;return this},_on:function(t,i,e){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),e===this&&(e=void 0);for(var o={fn:i,ctx:e},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===i&&s[r].ctx===e)return;s.push(o)},_off:function(t,i,e){var n,o,s;if(this._events&&(n=this._events[t]))if(i){if(e===this&&(e=void 0),n)for(o=0,s=n.length;o<s;o++){var a=n[o];if(a.ctx===e&&a.fn===i)return a.fn=r,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=r;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,i){var e=this._events&&this._events[t];if(e&&e.length)return!0;if(i)for(var n in this._eventParents)if(this._eventParents[n].listens(t,i))return!0;return!1},once:function(t,i,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],i);return this}var s=e(function(){this.off(t,i,n).off(t,s,n)},this);return this.on(t,i,n).on(t,s,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[n(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[n(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};li.addEventListener=li.on,li.removeEventListener=li.clearAllEventListeners=li.off,li.addOneTimeEventListener=li.once,li.fireEvent=li.fire,li.hasEventListeners=li.listens;var ci=v.extend(li),_i=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};x.prototype={clone:function(){return new x(this.x,this.y)},add:function(t){return this.clone()._add(w(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(w(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new x(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new x(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_i(this.x),this.y=_i(this.y),this},distanceTo:function(t){var i=(t=w(t)).x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},equals:function(t){return(t=w(t)).x===this.x&&t.y===this.y},contains:function(t){return t=w(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},P.prototype={extend:function(t){return t=w(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new x((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new x(this.min.x,this.max.y)},getTopRight:function(){return new x(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,e;return(t="number"==typeof t[0]||t instanceof x?w(t):b(t))instanceof P?(i=t.min,e=t.max):i=e=t,i.x>=this.min.x&&e.x<=this.max.x&&i.y>=this.min.y&&e.y<=this.max.y},intersects:function(t){t=b(t);var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>=i.x&&n.x<=e.x,r=o.y>=i.y&&n.y<=e.y;return s&&r},overlaps:function(t){t=b(t);var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>i.x&&n.x<e.x,r=o.y>i.y&&n.y<e.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},T.prototype={extend:function(t){var i,e,n=this._southWest,o=this._northEast;if(t instanceof M)i=t,e=t;else{if(!(t instanceof T))return t?this.extend(C(t)||z(t)):this;if(i=t._southWest,e=t._northEast,!i||!e)return this}return n||o?(n.lat=Math.min(i.lat,n.lat),n.lng=Math.min(i.lng,n.lng),o.lat=Math.max(e.lat,o.lat),o.lng=Math.max(e.lng,o.lng)):(this._southWest=new M(i.lat,i.lng),this._northEast=new M(e.lat,e.lng)),this},pad:function(t){var i=this._southWest,e=this._northEast,n=Math.abs(i.lat-e.lat)*t,o=Math.abs(i.lng-e.lng)*t;return new T(new M(i.lat-n,i.lng-o),new M(e.lat+n,e.lng+o))},getCenter:function(){return new M((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new M(this.getNorth(),this.getWest())},getSouthEast:function(){return new M(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof M||"lat"in t?C(t):z(t);var i,e,n=this._southWest,o=this._northEast;return t instanceof T?(i=t.getSouthWest(),e=t.getNorthEast()):i=e=t,i.lat>=n.lat&&e.lat<=o.lat&&i.lng>=n.lng&&e.lng<=o.lng},intersects:function(t){t=z(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=i.lat&&n.lat<=e.lat,r=o.lng>=i.lng&&n.lng<=e.lng;return s&&r},overlaps:function(t){t=z(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>i.lat&&n.lat<e.lat,r=o.lng>i.lng&&n.lng<e.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i))},isValid:function(){return!(!this._southWest||!this._northEast)}},M.prototype={equals:function(t,i){return!!t&&(t=C(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===i?1e-9:i))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return pi.distance(this,C(t))},wrap:function(){return pi.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,e=i/Math.cos(Math.PI/180*this.lat);return z([this.lat-i,this.lng-e],[this.lat+i,this.lng+e])},clone:function(){return new M(this.lat,this.lng,this.alt)}};var di={latLngToPoint:function(t,i){var e=this.projection.project(t),n=this.scale(i);return this.transformation._transform(e,n)},pointToLatLng:function(t,i){var e=this.scale(i),n=this.transformation.untransform(t,e);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,e=this.scale(t);return new P(this.transformation.transform(i.min,e),this.transformation.transform(i.max,e))},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new M(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,i,t.alt)},wrapLatLngBounds:function(t){var i=t.getCenter(),e=this.wrapLatLng(i),n=i.lat-e.lat,o=i.lng-e.lng;if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();return new T(new M(s.lat-n,s.lng-o),new M(r.lat-n,r.lng-o))}},pi=i({},di,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var e=Math.PI/180,n=t.lat*e,o=i.lat*e,s=Math.sin((i.lat-t.lat)*e/2),r=Math.sin((i.lng-t.lng)*e/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,h=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*h}}),mi={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,e=this.MAX_LATITUDE,n=Math.max(Math.min(e,t.lat),-e),o=Math.sin(n*i);return new x(this.R*t.lng*i,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var i=180/Math.PI;return new M((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=6378137*Math.PI;return new P([-t,-t],[t,t])}()};S.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new x((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};var fi,gi,vi,yi=i({},pi,{code:"EPSG:3857",projection:mi,transformation:function(){var t=.5/(Math.PI*mi.R);return Z(t,.5,-t,.5)}()}),xi=i({},yi,{code:"EPSG:900913"}),wi=document.documentElement.style,Pi="ActiveXObject"in window,Li=Pi&&!document.addEventListener,bi="msLaunchUri"in navigator&&!("documentMode"in document),Ti=A("webkit"),zi=A("android"),Mi=A("android 2")||A("android 3"),Ci=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Si=zi&&A("Google")&&Ci<537&&!("AudioNode"in window),Zi=!!window.opera,Ei=A("chrome"),ki=A("gecko")&&!Ti&&!Zi&&!Pi,Ai=!Ei&&A("safari"),Bi=A("phantom"),Ii="OTransition"in wi,Oi=0===navigator.platform.indexOf("Win"),Ri=Pi&&"transition"in wi,Ni="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mi,Di="MozPerspective"in wi,ji=!window.L_DISABLE_3D&&(Ri||Ni||Di)&&!Ii&&!Bi,Wi="undefined"!=typeof orientation||A("mobile"),Hi=Wi&&Ti,Fi=Wi&&Ni,Ui=!window.PointerEvent&&window.MSPointerEvent,Vi=!(!window.PointerEvent&&!Ui),qi=!window.L_NO_TOUCH&&(Vi||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Gi=Wi&&Zi,Ki=Wi&&ki,Yi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xi=!!document.createElement("canvas").getContext,Ji=!(!document.createElementNS||!E("svg").createSVGRect),$i=!Ji&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}(),Qi=(Object.freeze||Object)({ie:Pi,ielt9:Li,edge:bi,webkit:Ti,android:zi,android23:Mi,androidStock:Si,opera:Zi,chrome:Ei,gecko:ki,safari:Ai,phantom:Bi,opera12:Ii,win:Oi,ie3d:Ri,webkit3d:Ni,gecko3d:Di,any3d:ji,mobile:Wi,mobileWebkit:Hi,mobileWebkit3d:Fi,msPointer:Ui,pointer:Vi,touch:qi,mobileOpera:Gi,mobileGecko:Ki,retina:Yi,canvas:Xi,svg:Ji,vml:$i}),te=Ui?"MSPointerDown":"pointerdown",ie=Ui?"MSPointerMove":"pointermove",ee=Ui?"MSPointerUp":"pointerup",ne=Ui?"MSPointerCancel":"pointercancel",oe=["INPUT","SELECT","OPTION"],se={},re=!1,ae=0,he=Ui?"MSPointerDown":Vi?"pointerdown":"touchstart",ue=Ui?"MSPointerUp":Vi?"pointerup":"touchend",le="_leaflet_",ce=st(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),_e=st(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),de="webkitTransition"===_e||"OTransition"===_e?_e+"End":"transitionend";if("onselectstart"in document)fi=function(){mt(window,"selectstart",Pt)},gi=function(){ft(window,"selectstart",Pt)};else{var pe=st(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fi=function(){if(pe){var t=document.documentElement.style;vi=t[pe],t[pe]="none"}},gi=function(){pe&&(document.documentElement.style[pe]=vi,vi=void 0)}}var me,fe,ge,ve=(Object.freeze||Object)({TRANSFORM:ce,TRANSITION:_e,TRANSITION_END:de,get:V,getStyle:q,create:G,remove:K,empty:Y,toFront:X,toBack:J,hasClass:$,addClass:Q,removeClass:tt,setClass:it,getClass:et,setOpacity:nt,testProp:st,setTransform:rt,setPosition:at,getPosition:ht,disableTextSelection:fi,enableTextSelection:gi,disableImageDrag:ut,enableImageDrag:lt,preventOutline:ct,restoreOutline:_t,getSizedParentNode:dt,getScale:pt}),ye="_leaflet_events",xe=Oi&&Ei?2*window.devicePixelRatio:ki?window.devicePixelRatio:1,we={},Pe=(Object.freeze||Object)({on:mt,off:ft,stopPropagation:yt,disableScrollPropagation:xt,disableClickPropagation:wt,preventDefault:Pt,stop:Lt,getMousePosition:bt,getWheelDelta:Tt,fakeStop:zt,skipped:Mt,isExternalTarget:Ct,addListener:mt,removeListener:ft}),Le=ci.extend({run:function(t,i,e,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=e||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ht(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=f(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,e=1e3*this._duration;i<e?this._runFrame(this._easeOut(i/e),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var e=this._startPos.add(this._offset.multiplyBy(t));i&&e._round(),at(this._el,e),this.fire("step")},_complete:function(){g(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),be=ci.extend({options:{crs:yi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=l(this,i),this._initContainer(t),this._initLayout(),this._onResize=e(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),void 0!==i.zoom&&(this._zoom=this._limitZoom(i.zoom)),i.center&&void 0!==i.zoom&&this.setView(C(i.center),i.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=_e&&ji&&!Gi&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mt(this._proxy,de,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(C(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(ji?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(ji?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,e){var n=this.getZoomScale(i),o=this.getSize().divideBy(2),s=(t instanceof x?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,i,{zoom:e})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():z(t);var e=w(i.paddingTopLeft||i.padding||[0,0]),n=w(i.paddingBottomRight||i.padding||[0,0]),o=this.getBoundsZoom(t,!1,e.add(n));if((o="number"==typeof i.maxZoom?Math.min(i.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var s=n.subtract(e).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,i){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var e=this._getBoundsCenterZoom(t,i);return this.setView(e.center,e.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=w(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==i.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Le,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),!1!==i.animate){Q(this._mapPane,"leaflet-pan-anim");var e=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,e,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,e){function n(t){var i=(g*g-m*m+(t?-1:1)*x*x*v*v)/(2*(t?g:m)*x*v),e=Math.sqrt(i*i+1)-i;return e<1e-9?-18:Math.log(e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){return o(t)/s(t)}function a(t){return m*(s(w)/s(w+y*t))}function h(t){return m*(s(w)*r(w+y*t)-o(w))/x}function u(t){return 1-Math.pow(1-t,1.5)}function l(){var e=(Date.now()-P)/b,n=u(e)*L;e<=1?(this._flyToFrame=f(l,this),this._move(this.unproject(c.add(_.subtract(c).multiplyBy(h(n)/v)),p),this.getScaleZoom(m/a(n),p),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}if(!1===(e=e||{}).animate||!ji)return this.setView(t,i,e);this._stop();var c=this.project(this.getCenter()),_=this.project(t),d=this.getSize(),p=this._zoom;t=C(t),i=void 0===i?p:i;var m=Math.max(d.x,d.y),g=m*this.getZoomScale(p,i),v=_.distanceTo(c)||1,y=1.42,x=y*y,w=n(0),P=Date.now(),L=(n(1)-w)/y,b=e.duration?1e3*e.duration:1e3*L*.8;return this._moveStart(!0,e.noMoveStart),l.call(this),this},flyToBounds:function(t,i){var e=this._getBoundsCenterZoom(t,i);return this.flyTo(e.center,e.zoom,i)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var e=this.getCenter(),n=this._limitCenter(e,this._zoom,z(t));return e.equals(n)||this.panTo(n,i),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=n.divideBy(2).round(),r=o.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=e(this._handleGeolocationResponse,this),o=e(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,e=t.message||(1===i?"permission denied":2===i?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+e+"."})},_handleGeolocationResponse:function(t){var i=new M(t.coords.latitude,t.coords.longitude),e=i.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(e);this.setView(i,n.maxZoom?Math.min(o,n.maxZoom):o)}var s={latlng:i,bounds:e,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);this.fire("locationfound",s)},addHandler:function(t,i){if(!i)return this;var e=this[t]=new i(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),K(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(g(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)K(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var e=G("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i||this._mapPane);return t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new T(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,e){t=z(t),e=w(e||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),h=this.getSize().subtract(e),u=b(this.project(a,n),this.project(r,n)).getSize(),l=ji?this.options.zoomSnap:1,c=h.x/u.x,_=h.y/u.y,d=i?Math.max(c,_):Math.min(c,_);return n=this.getScaleZoom(d,n),l&&(n=Math.round(n/(l/100))*(l/100),n=i?Math.ceil(n/l)*l:Math.floor(n/l)*l),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var e=this._getTopLeftPoint(t,i);return new P(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var e=this.options.crs;return i=void 0===i?this._zoom:i,e.scale(t)/e.scale(i)},getScaleZoom:function(t,i){var e=this.options.crs;i=void 0===i?this._zoom:i;var n=e.zoom(t*e.scale(i));return isNaN(n)?1/0:n},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(C(t),i)},unproject:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(w(t),i)},layerPointToLatLng:function(t){var i=w(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){return this.project(C(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(C(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,i){return this.options.crs.distance(C(t),C(i))},containerPointToLayerPoint:function(t){return w(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return w(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(w(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(C(t)))},mouseEventToContainerPoint:function(t){return bt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=V(t);if(!i)throw new Error("Map container not found.");if(i._leaflet_id)throw new Error("Map container is already initialized.");mt(i,"scroll",this._onScroll,this),this._containerId=n(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ji,Q(t,"leaflet-container"+(qi?" leaflet-touch":"")+(Yi?" leaflet-retina":"")+(Li?" leaflet-oldie":"")+(Ai?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=q(t,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new x(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Q(t.markerPane,"leaflet-zoom-hide"),Q(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){at(this._mapPane,new x(0,0));var e=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var n=this._zoom!==i;this._moveStart(n,!1)._move(t,i)._moveEnd(n),this.fire("viewreset"),e&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,e){void 0===i&&(i=this._zoom);var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||e&&e.pinch)&&this.fire("zoom",e),this.fire("move",e)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return g(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){at(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[n(this._container)]=this;var i=t?ft:mt;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),ji&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){g(this._resizeRequest),this._resizeRequest=f(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var e,o=[],s="mouseout"===i||"mouseover"===i,r=t.target||t.srcElement,a=!1;r;){if((e=this._targets[n(r)])&&("click"===i||"preclick"===i)&&!t._simulated&&this._draggableMoved(e)){a=!0;break}if(e&&e.listens(i,!0)){if(s&&!Ct(r,t))break;if(o.push(e),s)break}if(r===this._container)break;r=r.parentNode}return o.length||a||s||!Ct(r,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!Mt(t)){var i=t.type;"mousedown"!==i&&"keypress"!==i||ct(t.target||t.srcElement),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var s=n[0];"contextmenu"===e&&s.listens(e,!0)&&Pt(t);var r={originalEvent:t};if("keypress"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var h=0;h<n.length;h++)if(n[h].fire(e,r,!0),r.originalEvent._stopped||!1===n[h].options.bubblingMouseEvents&&-1!==d(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return ht(this._mapPane)||new x(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){return(t&&void 0!==i?this._getNewPixelOrigin(t,i):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var e=this.getSize()._divideBy(2);return this.project(t,i)._subtract(e)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,e){var n=this._getNewPixelOrigin(e,i);return this.project(t,i)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,i,e){var n=this._getNewPixelOrigin(e,i);return b([this.project(t.getSouthWest(),i)._subtract(n),this.project(t.getNorthWest(),i)._subtract(n),this.project(t.getSouthEast(),i)._subtract(n),this.project(t.getNorthEast(),i)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,e){if(!e)return t;var n=this.project(t,i),o=this.getSize().divideBy(2),s=new P(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,e,i);return r.round().equals([0,0])?t:this.unproject(n.add(r),i)},_limitOffset:function(t,i){if(!i)return t;var e=this.getPixelBounds(),n=new P(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,e){var n=b(this.project(i.getNorthEast(),e),this.project(i.getSouthWest(),e)),o=n.min.subtract(t.min),s=n.max.subtract(t.max);return new x(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y))},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom(),n=ji?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(i,Math.min(e,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var e=this._getCenterOffset(t)._trunc();return!(!0!==(i&&i.animate)&&!this.getSize().contains(e))&&(this.panBy(e,i),!0)},_createAnimProxy:function(){var t=this._proxy=G("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var i=ce,e=this._proxy.style[i];rt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),e===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),i=this.getZoom();rt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){K(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,e){if(this._animatingZoom)return!0;if(e=e||{},!this._zoomAnimated||!1===e.animate||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(i),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==e.animate&&!this.getSize().contains(o))&&(f(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Q(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:o}),setTimeout(e(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),f(function(){this._moveEnd(!0)},this))}}),Te=v.extend({options:{position:"topright"},initialize:function(t){l(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),e=this.getPosition(),n=t._controlCorners[e];return Q(i,"leaflet-control"),-1!==e.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},remove:function(){return this._map?(K(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ze=function(t){return new Te(t)};be.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var s=e+t+" "+e+o;i[t+o]=G("div",s,n)}var i=this._controlCorners={},e="leaflet-",n=this._controlContainer=G("div",e+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)K(this._controlCorners[t]);K(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Me=Te.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,e,n){return e<n?-1:n<e?1:0}},initialize:function(t,i,e){l(this,e),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in i)this._addLayer(i[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Te.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(n(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Q(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Q(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):tt(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=G("div",t),e=this.options.collapsed;i.setAttribute("aria-haspopup",!0),wt(i),xt(i);var n=this._form=G("form",t+"-list");e&&(this._map.on("click",this.collapse,this),zi||mt(i,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=G("a",t+"-toggle",i);o.href="#",o.title="Layers",qi?(mt(o,"click",Lt),mt(o,"click",this.expand,this)):mt(o,"focus",this.expand,this),e||this.expand(),this._baseLayersList=G("div",t+"-base",n),this._separator=G("div",t+"-separator",n),this._overlaysList=G("div",t+"-overlays",n),i.appendChild(n)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&n(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:n}),this.options.sortLayers&&this._layers.sort(e(function(t,i){return this.options.sortFunction(t.layer,i.layer,t.name,i.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Y(this._baseLayersList),Y(this._overlaysList),this._layerControlInputs=[];var t,i,e,n,o=0;for(e=0;e<this._layers.length;e++)n=this._layers[e],this._addItem(n),i=i||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(n(t.target)),e=i.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;e&&this._map.fire(e,i)},_createRadioElement:function(t,i){var e='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=e,n.firstChild},_addItem:function(t){var i,e=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((i=document.createElement("input")).type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=o):i=this._createRadioElement("leaflet-base-layers",o),this._layerControlInputs.push(i),i.layerId=n(t.layer),mt(i,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+t.name;var r=document.createElement("div");return e.appendChild(r),r.appendChild(i),r.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t,i,e=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=e.length-1;s>=0;s--)t=e[s],i=this._getLayer(t.layerId).layer,t.checked?n.push(i):t.checked||o.push(i);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,i,e=this._layerControlInputs,n=this._map.getZoom(),o=e.length-1;o>=0;o--)t=e[o],i=this._getLayer(t.layerId).layer,t.disabled=void 0!==i.options.minZoom&&n<i.options.minZoom||void 0!==i.options.maxZoom&&n>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ce=Te.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",e=G("div",i+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,i+"-in",e,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,i+"-out",e,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),e},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,e,n,o){var s=G("a",e,n);return s.innerHTML=t,s.href="#",s.title=i,s.setAttribute("role","button"),s.setAttribute("aria-label",i),wt(s),mt(s,"click",Lt),mt(s,"click",o,this),mt(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";tt(this._zoomInButton,i),tt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())&&Q(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMaxZoom())&&Q(this._zoomInButton,i)}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ce,this.addControl(this.zoomControl))});var Se=Te.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i=G("div","leaflet-control-scale"),e=this.options;return this._addScales(e,"leaflet-control-scale-line",i),t.on(e.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,e){t.metric&&(this._mScale=G("div",i,e)),t.imperial&&(this._iScale=G("div",i,e))},_update:function(){var t=this._map,i=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),e=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,e,i/t)},_updateImperial:function(t){var i,e,n,o=3.2808399*t;o>5280?(i=o/5280,e=this._getRoundNum(i),this._updateScale(this._iScale,e+" mi",e/i)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,i,e){t.style.width=Math.round(this.options.maxWidth*e)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),e=t/i;return e=e>=10?10:e>=5?5:e>=3?3:e>=2?2:1,i*e}}),Ze=Te.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=G("div","leaflet-control-attribution"),wt(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var e=[];this.options.prefix&&e.push(this.options.prefix),t.length&&e.push(t.join(", ")),this._container.innerHTML=e.join(" | ")}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&(new Ze).addTo(this)});Te.Layers=Me,Te.Zoom=Ce,Te.Scale=Se,Te.Attribution=Ze,ze.layers=function(t,i,e){return new Me(t,i,e)},ze.zoom=function(t){return new Ce(t)},ze.scale=function(t){return new Se(t)},ze.attribution=function(t){return new Ze(t)};var Ee=v.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ee.addTo=function(t,i){return t.addHandler(i,this),this};var ke,Ae={Events:li},Be=qi?"touchstart mousedown":"mousedown",Ie={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Oe={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Re=ci.extend({options:{clickTolerance:3},initialize:function(t,i,e,n){l(this,n),this._element=t,this._dragStartTarget=i||t,this._preventOutline=e},enable:function(){this._enabled||(mt(this._dragStartTarget,Be,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Re._dragging===this&&this.finishDrag(),ft(this._dragStartTarget,Be,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!$(this._element,"leaflet-zoom-anim")&&!(Re._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Re._dragging=this,this._preventOutline&&ct(this._element),ut(),fi(),this._moving)))){this.fire("down");var i=t.touches?t.touches[0]:t,e=dt(this._element);this._startPoint=new x(i.clientX,i.clientY),this._parentScale=pt(e),mt(document,Oe[t.type],this._onMove,this),mt(document,Ie[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var i=t.touches&&1===t.touches.length?t.touches[0]:t,e=new x(i.clientX,i.clientY)._subtract(this._startPoint);(e.x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(e.x/=this._parentScale.x,e.y/=this._parentScale.y,Pt(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ht(this._element).subtract(e),Q(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Q(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,g(this._animRequest),this._lastEvent=t,this._animRequest=f(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),at(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in Oe)ft(document,Oe[t],this._onMove,this),ft(document,Ie[t],this._onUp,this);lt(),gi(),this._moved&&this._moving&&(g(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Re._dragging=!1}}),Ne=(Object.freeze||Object)({simplify:Zt,pointToSegmentDistance:Et,closestPointOnSegment:function(t,i,e){return Dt(t,i,e)},clipSegment:It,_getEdgeIntersection:Ot,_getBitCode:Rt,_sqClosestPointOnSegment:Dt,isFlat:jt,_flat:Wt}),De=(Object.freeze||Object)({clipPolygon:Ht}),je={project:function(t){return new x(t.lng,t.lat)},unproject:function(t){return new M(t.y,t.x)},bounds:new P([-180,-90],[180,90])},We={R:6378137,R_MINOR:6356752.314245179,bounds:new P([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var i=Math.PI/180,e=this.R,n=t.lat*i,o=this.R_MINOR/e,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-e*Math.log(Math.max(a,1e-10)),new x(t.lng*i*e,n)},unproject:function(t){for(var i,e=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),h=0,u=.1;h<15&&Math.abs(u)>1e-7;h++)i=s*Math.sin(a),i=Math.pow((1-i)/(1+i),s/2),a+=u=Math.PI/2-2*Math.atan(r*i)-a;return new M(a*e,t.x*e/n)}},He=(Object.freeze||Object)({LonLat:je,Mercator:We,SphericalMercator:mi}),Fe=i({},pi,{code:"EPSG:3395",projection:We,transformation:function(){var t=.5/(Math.PI*We.R);return Z(t,.5,-t,.5)}()}),Ue=i({},pi,{code:"EPSG:4326",projection:je,transformation:Z(1/180,1,-1/180,.5)}),Ve=i({},di,{projection:je,transformation:Z(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var e=i.lng-t.lng,n=i.lat-t.lat;return Math.sqrt(e*e+n*n)},infinite:!0});di.Earth=pi,di.EPSG3395=Fe,di.EPSG3857=yi,di.EPSG900913=xi,di.EPSG4326=Ue,di.Simple=Ve;var qe=ci.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[n(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[n(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var e=this.getEvents();i.on(e,this),this.once("remove",function(){i.off(e,this)},this)}this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this})}}});be.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=n(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=n(t);return this._layers[i]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&n(t)in this._layers},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},_addLayers:function(t){for(var i=0,e=(t=t?oi(t)?t:[t]:[]).length;i<e;i++)this.addLayer(t[i])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[n(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=n(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,e=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),i=void 0===o.maxZoom?i:Math.max(i,o.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,e!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ge=qe.extend({initialize:function(t,i){l(this,i),this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i,e,n=Array.prototype.slice.call(arguments,1);for(i in this._layers)(e=this._layers[i])[t]&&e[t].apply(e,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return n(t)}}),Ke=Ge.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ge.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ge.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new T;for(var i in this._layers){var e=this._layers[i];t.extend(e.getBounds?e.getBounds():e.getLatLng())}return t}}),Ye=v.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){l(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(e,i&&"IMG"===i.tagName?i:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,i){var e=this.options,n=e[i+"Size"];"number"==typeof n&&(n=[n,n]);var o=w(n),s=w("shadow"===i&&e.shadowAnchor||e.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(e.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return Yi&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Xe=Ye.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Xe.imagePath||(Xe.imagePath=this._detectIconPath()),(this.options.imagePath||Xe.imagePath)+Ye.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=G("div","leaflet-default-icon-path",document.body),i=q(t,"background-image")||q(t,"backgroundImage");return document.body.removeChild(t),i=null===i||0!==i.indexOf("url")?"":i.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Je=Ee.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Re(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Q(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,e=i._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=ht(i._icon),r=e.getPixelBounds(),a=e.getPixelOrigin(),h=b(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!h.contains(s)){var u=w((Math.max(h.max.x,s.x)-h.max.x)/(r.max.x-h.max.x)-(Math.min(h.min.x,s.x)-h.min.x)/(r.min.x-h.min.x),(Math.max(h.max.y,s.y)-h.max.y)/(r.max.y-h.max.y)-(Math.min(h.min.y,s.y)-h.min.y)/(r.min.y-h.min.y)).multiplyBy(n);e.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),at(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=f(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(g(this._panRequest),this._panRequest=f(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,e=i._shadow,n=ht(i._icon),o=i._map.layerPointToLatLng(n);e&&at(e,n),i._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){g(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),$e=qe.extend({options:{icon:new Xe,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,i){l(this,i),this._latlng=C(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=C(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),e=t.icon.createIcon(this._icon),n=!1;e!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(e.title=t.title),"IMG"===e.tagName&&(e.alt=t.alt||"")),Q(e,i),t.keyboard&&(e.tabIndex="0"),this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(Q(o,i),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),K(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&K(this._shadow),this._shadow=null},_setPos:function(t){at(this._icon,t),this._shadow&&at(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Q(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Je)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Je(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;nt(this._icon,t),this._shadow&&nt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Qe=qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return l(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),tn=Qe.extend({options:{fill:!0,radius:10},initialize:function(t,i){l(this,i),this._latlng=C(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=C(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Qe.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,e=this._clickTolerance(),n=[t+e,i+e];this._pxBounds=new P(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),en=tn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),l(this,e),this._latlng=C(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new T(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Qe.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,e=this._map,n=e.options.crs;if(n.distance===pi.distance){var o=Math.PI/180,s=this._mRadius/pi.R/o,r=e.project([i+s,t]),a=e.project([i-s,t]),h=r.add(a).divideBy(2),u=e.unproject(h).lat,l=Math.acos((Math.cos(s*o)-Math.sin(i*o)*Math.sin(u*o))/(Math.cos(i*o)*Math.cos(u*o)))/o;(isNaN(l)||0===l)&&(l=s/Math.cos(Math.PI/180*i)),this._point=h.subtract(e.getPixelOrigin()),this._radius=isNaN(l)?0:h.x-e.project([u,t-l]).x,this._radiusY=h.y-r.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=e.latLngToLayerPoint(this._latlng),this._radius=this._point.x-e.latLngToLayerPoint(c).x}this._updateBounds()}}),nn=Qe.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){l(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i,e,n=1/0,o=null,s=Dt,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],u=1,l=h.length;u<l;u++){var c=s(t,i=h[u-1],e=h[u],!0);c<n&&(n=c,o=s(t,i,e))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,e,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(t=0,i=0;t<h-1;t++)i+=a[t].distanceTo(a[t+1])/2;if(0===i)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],e=o.distanceTo(s),(n+=e)>i)return r=(n-i)/e,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=C(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new T,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],e=jt(t),n=0,o=t.length;n<o;n++)e?(i[n]=C(t[n]),this._bounds.extend(i[n])):i[n]=this._convertLatLngs(t[n]);return i},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var i=this._clickTolerance(),e=new x(i,i);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(e),t.max._add(e),this._pxBounds=t)},_projectLatlngs:function(t,i,e){var n,o,s=t[0]instanceof M,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),e.extend(o[n]);i.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],i,e)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var i,e,n,o,s,r,a,h=this._parts;for(i=0,n=0,o=this._rings.length;i<o;i++)for(e=0,s=(a=this._rings[i]).length;e<s-1;e++)(r=It(a[e],a[e+1],t,e,!0))&&(h[n]=h[n]||[],h[n].push(r[0]),r[1]===a[e+1]&&e!==s-2||(h[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,e=0,n=t.length;e<n;e++)t[e]=Zt(t[e],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var e,n,o,s,r,a,h=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(e=0,s=this._parts.length;e<s;e++)for(n=0,o=(r=(a=this._parts[e]).length)-1;n<r;o=n++)if((i||0!==n)&&Et(t,a[o],a[n])<=h)return!0;return!1}});nn._flat=Wt;var on=nn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,e,n,o,s,r,a,h,u=this._rings[0],l=u.length;if(!l)return null;for(s=r=a=0,t=0,i=l-1;t<l;i=t++)e=u[t],n=u[i],o=e.y*n.x-n.y*e.x,r+=(e.x+n.x)*o,a+=(e.y+n.y)*o,s+=3*o;return h=0===s?u[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var i=nn.prototype._convertLatLngs.call(this,t),e=i.length;return e>=2&&i[0]instanceof M&&i[0].equals(i[e-1])&&i.pop(),i},_setLatLngs:function(t){nn.prototype._setLatLngs.call(this,t),jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,e=new x(i,i);if(t=new P(t.min.subtract(e),t.max.add(e)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;o<s;o++)(n=Ht(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i,e,n,o,s,r,a,h,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(h=(i=this._parts[o]).length)-1;s<h;r=s++)e=i[s],n=i[r],e.y>t.y!=n.y>t.y&&t.x<(n.x-e.x)*(t.y-e.y)/(n.y-e.y)+e.x&&(u=!u);return u||nn.prototype._containsPoint.call(this,t,!0)}}),sn=Ke.extend({initialize:function(t,i){l(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i,e,n,o=oi(t)?t:t.features;if(o){for(i=0,e=o.length;i<e;i++)((n=o[i]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=Ft(t,s);return r?(r.feature=Yt(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){"function"==typeof i&&(i=i(t.feature)),t.setStyle&&t.setStyle(i)}}),rn={toGeoJSON:function(t){return Kt(this,{type:"Point",coordinates:qt(this.getLatLng(),t)})}};$e.include(rn),en.include(rn),tn.include(rn),nn.include({toGeoJSON:function(t){var i=!jt(this._latlngs),e=Gt(this._latlngs,i?1:0,!1,t);return Kt(this,{type:(i?"Multi":"")+"LineString",coordinates:e})}}),on.include({toGeoJSON:function(t){var i=!jt(this._latlngs),e=i&&!jt(this._latlngs[0]),n=Gt(this._latlngs,e?2:i?1:0,!0,t);return i||(n=[n]),Kt(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})}}),Ge.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(e){i.push(e.toGeoJSON(t).geometry.coordinates)}),Kt(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===i)return this.toMultiPoint(t);var e="GeometryCollection"===i,n=[];return this.eachLayer(function(i){if(i.toGeoJSON){var o=i.toGeoJSON(t);if(e)n.push(o.geometry);else{var s=Yt(o);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s)}}}),e?Kt(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var an=Xt,hn=qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,e){this._url=t,this._bounds=z(i),l(this,e)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Q(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){K(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&X(this._image),this},bringToBack:function(){return this._map&&J(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,i=this._image=t?this._url:G("img");Q(i,"leaflet-image-layer"),this._zoomAnimated&&Q(i,"leaflet-zoom-animated"),this.options.className&&Q(i,this.options.className),i.onselectstart=r,i.onmousemove=r,i.onload=e(this.fire,this,"load"),i.onerror=e(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=i.src:(i.src=this._url,i.alt=this.options.alt)},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),e=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;rt(this._image,e,i)},_reset:function(){var t=this._image,i=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),e=i.getSize();at(t,i.min),t.style.width=e.x+"px",t.style.height=e.y+"px"},_updateOpacity:function(){nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),un=hn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,i=this._image=t?this._url:G("video");if(Q(i,"leaflet-image-layer"),this._zoomAnimated&&Q(i,"leaflet-zoom-animated"),i.onselectstart=r,i.onmousemove=r,i.onloadeddata=e(this.fire,this,"load"),t){for(var n=i.getElementsByTagName("source"),o=[],s=0;s<n.length;s++)o.push(n[s].src);this._url=n.length>0?o:[i.src]}else{oi(this._url)||(this._url=[this._url]),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var h=G("source");h.src=this._url[a],i.appendChild(h)}}}}),ln=qe.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){l(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&nt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(nt(this._container,0),this._removeTimeout=setTimeout(e(K,void 0,this._container),200)):K(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=C(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&X(this._container),this},bringToBack:function(){return this._map&&J(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,i="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof i)t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=w(this.options.offset),e=this._getAnchor();this._zoomAnimated?at(this._container,t.add(e)):i=i.add(t).add(e);var n=this._containerBottom=-i.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),cn=ln.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ln.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qe||this._source.on("preclick",yt))},onRemove:function(t){ln.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qe||this._source.off("preclick",yt))},getEvents:function(){var t=ln.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=G("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),e=this._wrapper=G("div",t+"-content-wrapper",i);if(this._contentNode=G("div",t+"-content",e),wt(e),xt(this._contentNode),mt(e,"contextmenu",yt),this._tipContainer=G("div",t+"-tip-container",i),this._tip=G("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=G("a",t+"-close-button",i);n.href="#close",n.innerHTML="&#215;",mt(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var e=t.offsetWidth;e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth),i.width=e+1+"px",i.whiteSpace="",i.height="";var n=t.offsetHeight,o=this.options.maxHeight;o&&n>o?(i.height=o+"px",Q(t,"leaflet-popup-scrolled")):tt(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),e=this._getAnchor();at(this._container,i.add(e))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,i=parseInt(q(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+i,n=this._containerWidth,o=new x(this._containerLeft,-e-this._containerBottom);o._add(ht(this._container));var s=t.layerPointToContainerPoint(o),r=w(this.options.autoPanPadding),a=w(this.options.autoPanPaddingTopLeft||r),h=w(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),l=0,c=0;s.x+n+h.x>u.x&&(l=s.x+n-u.x+h.x),s.x-l-a.x<0&&(l=s.x-a.x),s.y+e+h.y>u.y&&(c=s.y+e-u.y+h.y),s.y-c-a.y<0&&(c=s.y-a.y),(l||c)&&t.fire("autopanstart").panBy([l,c])}},_onCloseButtonClick:function(t){this._close(),Lt(t)},_getAnchor:function(){return w(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(t,i,e){return t instanceof cn||(t=new cn(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),qe.include({bindPopup:function(t,i){return t instanceof cn?(l(t,i),this._popup=t,t._source=this):(this._popup&&!i||(this._popup=new cn(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){if(t instanceof qe||(i=t,t=this),t instanceof Ke)for(var e in this._layers){t=this._layers[e];break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;this._popup&&this._map&&(Lt(t),i instanceof Qe?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var _n=ln.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ln.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ln.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ln.prototype.getEvents.call(this);return qi&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=G("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i=this._map,e=this._container,n=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(t),s=this.options.direction,r=e.offsetWidth,a=e.offsetHeight,h=w(this.options.offset),u=this._getAnchor();"top"===s?t=t.add(w(-r/2+h.x,-a+h.y+u.y,!0)):"bottom"===s?t=t.subtract(w(r/2-h.x,-h.y,!0)):"center"===s?t=t.subtract(w(r/2+h.x,a/2-u.y+h.y,!0)):"right"===s||"auto"===s&&o.x<n.x?(s="right",t=t.add(w(h.x+u.x,u.y-a/2+h.y,!0))):(s="left",t=t.subtract(w(r+u.x-h.x,a/2-u.y-h.y,!0))),tt(e,"leaflet-tooltip-right"),tt(e,"leaflet-tooltip-left"),tt(e,"leaflet-tooltip-top"),tt(e,"leaflet-tooltip-bottom"),Q(e,"leaflet-tooltip-"+s),at(e,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&nt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return w(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});be.include({openTooltip:function(t,i,e){return t instanceof _n||(t=new _n(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),qe.include({bindTooltip:function(t,i){return t instanceof _n?(l(t,i),this._tooltip=t,t._source=this):(this._tooltip&&!i||(this._tooltip=new _n(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var i=t?"off":"on",e={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),qi&&(e.click=this._openTooltip)),this[i](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){if(t instanceof qe||(i=t,t=this),t instanceof Ke)for(var e in this._layers){t=this._layers[e];break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(Q(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(tt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var i,e,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),e=this._map.containerPointToLayerPoint(i),n=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(n)}});var dn=Ye.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:document.createElement("div"),e=this.options;if(i.innerHTML=!1!==e.html?e.html:"",e.bgPos){var n=w(e.bgPos);i.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});Ye.Default=Xe;var pn=qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Wi,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){l(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),K(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(X(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(J(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof x?t:new x(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i,e=this.getPane().children,n=-t(-1/0,1/0),o=0,s=e.length;o<s;o++)i=e[o].style.zIndex,e[o]!==this._container&&i&&(n=t(n,+i));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Li){nt(this._container,this.options.opacity);var t=+new Date,i=!1,e=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);nt(o.el,s),s<1?i=!0:(o.active?e=!0:this._onOpaqueTile(o),o.active=!0)}}e&&!this._noPrune&&this._pruneTiles(),i&&(g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this))}},_onOpaqueTile:r,_initContainer:function(){this._container||(this._container=G("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(void 0!==t){for(var e in this._levels)this._levels[e].el.children.length||e===t?(this._levels[e].el.style.zIndex=i-Math.abs(t-e),this._onUpdateLevel(e)):(K(this._levels[e].el),this._removeTilesAtZoom(e),this._onRemoveLevel(e),delete this._levels[e]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=G("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=i,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:r,_onRemoveLevel:r,_onCreateLevel:r,_pruneTiles:function(){if(this._map){var t,i,e=this._map.getZoom();if(e>this.options.maxZoom||e<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(i=this._tiles[t]).retain=i.current;for(t in this._tiles)if((i=this._tiles[t]).current&&!i.active){var n=i.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)K(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,e,n){var o=Math.floor(t/2),s=Math.floor(i/2),r=e-1,a=new x(+o,+s);a.z=+r;var h=this._tileCoordsToKey(a),u=this._tiles[h];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),r>n&&this._retainParent(o,s,r,n))},_retainChildren:function(t,i,e,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*i;s<2*i+2;s++){var r=new x(o,s);r.z=e+1;var a=this._tileCoordsToKey(r),h=this._tiles[a];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),e+1<n&&this._retainChildren(o,s,e+1,n))}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return void 0!==i.minNativeZoom&&t<i.minNativeZoom?i.minNativeZoom:void 0!==i.maxNativeZoom&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,e,n){var o=this._clampZoom(Math.round(i));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),e||this._pruneTiles(),this._noPrune=!!e),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var e in this._levels)this._setZoomTransform(this._levels[e],t,i)},_setZoomTransform:function(t,i,e){var n=this._map.getZoomScale(e,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(i,e)).round();ji?rt(t.el,o,n):at(t.el,o)},_resetGrid:function(){var t=this._map,i=t.options.crs,e=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],n).x/e.x),Math.ceil(t.project([0,i.wrapLng[1]],n).x/e.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],n).y/e.x),Math.ceil(t.project([i.wrapLat[1],0],n).y/e.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var i=this._map,e=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),n=i.getZoomScale(e,this._tileZoom),o=i.project(t,this._tileZoom).floor(),s=i.getSize().divideBy(2*n);return new P(o.subtract(s),o.add(s))},_update:function(t){var i=this._map;if(i){var e=this._clampZoom(i.getZoom());if(void 0===t&&(t=i.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,h=new P(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var l=this._tiles[u].coords;l.z===this._tileZoom&&h.contains(new x(l.x,l.y))||(this._tiles[u].current=!1)}if(Math.abs(e-this._tileZoom)>1)this._setView(t,e);else{for(var c=o.min.y;c<=o.max.y;c++)for(var _=o.min.x;_<=o.max.x;_++){var d=new x(_,c);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:r.push(d)}}if(r.sort(function(t,i){return t.distanceTo(s)-i.distanceTo(s)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(_=0;_<r.length;_++)this._addTile(r[_],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var e=this._globalTileRange;if(!i.wrapLng&&(t.x<e.min.x||t.x>e.max.x)||!i.wrapLat&&(t.y<e.min.y||t.y>e.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,e=this.getTileSize(),n=t.scaleBy(e),o=n.add(e);return[i.unproject(n,t.z),i.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),e=new T(i[0],i[1]);return this.options.noWrap||(e=this._map.wrapLatLngBounds(e)),e},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),e=new x(+i[0],+i[1]);return e.z=+i[2],e},_removeTile:function(t){var i=this._tiles[t];i&&(Si||i.el.setAttribute("src",si),K(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Q(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=r,t.onmousemove=r,Li&&this.options.opacity<1&&nt(t,this.options.opacity),zi&&!Mi&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),e(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&f(e(this._tileReady,this,t,null,s)),at(s,n),this._tiles[o]={el:s,coords:t,current:!0},i.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,i,n){if(this._map&&n.getAttribute("src")!==si){i&&this.fire("tileerror",{error:i,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(nt(n.el,0),g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),i||(Q(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Li||!this._map._fadeAnimated?f(this._pruneTiles,this):setTimeout(e(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new x(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new P(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),mn=pn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t,(i=l(this,i)).detectRetina&&Yi&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),zi||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url=t,i||this.redraw(),this},createTile:function(t,i){var n=document.createElement("img");return mt(n,"load",e(this._tileOnLoad,this,i,n)),mt(n,"error",e(this._tileOnError,this,i,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Yi?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return _(this._url,i(e,this.options))},_tileOnLoad:function(t,i){Li?setTimeout(e(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,e){var n=this.options.errorTileUrl;n&&i.getAttribute("src")!==n&&(i.src=n),t(e,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,e=this.options.zoomReverse,n=this.options.zoomOffset;return e&&(t=i-t),t+n},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((i=this._tiles[t].el).onload=r,i.onerror=r,i.complete||(i.src=si,K(i),delete this._tiles[t]))}}),fn=mn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);var s=(e=l(this,e)).detectRetina&&Yi?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,mn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),e=this._crs,n=b(e.project(i[0]),e.project(i[1])),o=n.min,s=n.max,r=(this._wmsVersion>=1.3&&this._crs===Ue?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=mn.prototype.getTileUrl.call(this,t);return a+c(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});mn.WMS=fn,Jt.wms=function(t,i){return new fn(t,i)};var gn=qe.extend({options:{padding:.1,tolerance:0},initialize:function(t){l(this,t),n(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Q(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var e=this._map.getZoomScale(i,this._zoom),n=ht(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,i),r=this._map.project(t,i).subtract(s),a=o.multiplyBy(-e).add(n).add(o).subtract(r);ji?rt(this._container,a,e):at(this._container,a)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),e=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new P(e,e.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vn=gn.extend({getEvents:function(){var t=gn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");mt(t,"mousemove",o(this._onMouseMove,32,this),this),mt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mt(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){g(this._redrawRequest),delete this._ctx,K(this._container),ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var t in this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},gn.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),n=Yi?2:1;at(i,t.min),i.width=n*e.x,i.height=n*e.y,i.style.width=e.x+"px",i.style.height=e.y+"px",Yi&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){gn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[n(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,e=i.next,o=i.prev;e?e.prev=o:this._drawLast=o,o?o.next=e:this._drawFirst=e,delete this._drawnLayers[t._leaflet_id],delete t._order,delete this._layers[n(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var i,e=t.options.dashArray.split(","),n=[];for(i=0;i<e.length;i++)n.push(Number(e[i]));t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||f(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var e=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,e.x,e.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var e,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,h.beginPath(),e=0;e<a;e++){for(n=0,o=r[e].length;n<o;n++)s=r[e][n],h[n?"lineTo":"moveTo"](s.x,s.y);i&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var i=t._point,e=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(e.save(),e.scale(1,o)),e.beginPath(),e.arc(i.x,i.y/o,n,0,2*Math.PI,!1),1!==o&&e.restore(),this._fillStroke(e,t)}},_fillStroke:function(t,i){var e=i.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())},_onClick:function(t){for(var i,e,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(n)&&!this._map._draggableMoved(i)&&(e=i);e&&(zt(t),this._fireEvent([e],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(tt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,i){for(var e,n,o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&(n=e);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(Q(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,i,e){this._map._fireDOMEvent(i,e||i.type,t)},_bringToFront:function(t){var i=t._order,e=i.next,n=i.prev;e&&(e.prev=n,n?n.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t))},_bringToBack:function(t){var i=t._order,e=i.next,n=i.prev;n&&(n.next=e,e?e.prev=n:n&&(this._drawLast=n),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t))}}),yn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),xn={_initContainer:function(){this._container=G("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=yn("shape");Q(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=yn("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;K(i),t.removeInteractiveTarget(i),delete this._layers[n(t)]},_updateStyle:function(t){var i=t._stroke,e=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(i||(i=t._stroke=yn("stroke")),o.appendChild(i),i.weight=n.weight+"px",i.color=n.color,i.opacity=n.opacity,n.dashArray?i.dashStyle=oi(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=n.lineCap.replace("butt","flat"),i.joinstyle=n.lineJoin):i&&(o.removeChild(i),t._stroke=null),n.fill?(e||(e=t._fill=yn("fill")),o.appendChild(e),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(o.removeChild(e),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),e=Math.round(t._radius),n=Math.round(t._radiusY||e);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+e+","+n+" 0,23592600")},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){X(t._container)},_bringToBack:function(t){J(t._container)}},wn=$i?yn:E,Pn=gn.extend({getEvents:function(){var t=gn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=wn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){K(this._container),ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){gn.prototype._update.call(this);var t=this._bounds,i=t.getSize(),e=this._container;this._svgSize&&this._svgSize.equals(i)||(this._svgSize=i,e.setAttribute("width",i.x),e.setAttribute("height",i.y)),at(e,t.min),e.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=wn("path");t.options.className&&Q(i,t.options.className),t.options.interactive&&Q(i,"leaflet-interactive"),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){K(t._path),t.removeInteractiveTarget(t._path),delete this._layers[n(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,e=t.options;i&&(e.stroke?(i.setAttribute("stroke",e.color),i.setAttribute("stroke-opacity",e.opacity),i.setAttribute("stroke-width",e.weight),i.setAttribute("stroke-linecap",e.lineCap),i.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?i.setAttribute("stroke-dasharray",e.dashArray):i.removeAttribute("stroke-dasharray"),e.dashOffset?i.setAttribute("stroke-dashoffset",e.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),e.fill?(i.setAttribute("fill",e.fillColor||e.color),i.setAttribute("fill-opacity",e.fillOpacity),i.setAttribute("fill-rule",e.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,k(t._parts,i))},_updateCircle:function(t){var i=t._point,e=Math.max(Math.round(t._radius),1),n="a"+e+","+(Math.max(Math.round(t._radiusY),1)||e)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(i.x-e)+","+i.y+n+2*e+",0 "+n+2*-e+",0 ";this._setPath(t,o)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){X(t._path)},_bringToBack:function(t){J(t._path)}});$i&&Pn.include(xn),be.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var i=this._paneRenderers[t];return void 0===i&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&$t(t)||Qt(t)}});var Ln=on.extend({initialize:function(t,i){on.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=z(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Pn.create=wn,Pn.pointsToPath=k,sn.geometryToLayer=Ft,sn.coordsToLatLng=Ut,sn.coordsToLatLngs=Vt,sn.latLngToCoords=qt,sn.latLngsToCoords=Gt,sn.getFeature=Kt,sn.asFeature=Yt,be.mergeOptions({boxZoom:!0});var bn=Ee.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){K(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),fi(),ut(),this._startPoint=this._map.mouseEventToContainerPoint(t),mt(document,{contextmenu:Lt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=G("div","leaflet-zoom-box",this._container),Q(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new P(this._point,this._startPoint),e=i.getSize();at(this._box,i.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px"},_finish:function(){this._moved&&(K(this._box),tt(this._container,"leaflet-crosshair")),gi(),lt(),ft(document,{contextmenu:Lt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(e(this._resetState,this),0);var i=new T(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});be.addInitHook("addHandler","boxZoom",bn),be.mergeOptions({doubleClickZoom:!0});var Tn=Ee.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,e=i.getZoom(),n=i.options.zoomDelta,o=t.originalEvent.shiftKey?e-n:e+n;"center"===i.options.doubleClickZoom?i.setZoom(o):i.setZoomAround(t.containerPoint,o)}});be.addInitHook("addHandler","doubleClickZoom",Tn),be.mergeOptions({dragging:!0,inertia:!Mi,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zn=Ee.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Re(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Q(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=z(this._map.options.maxBounds);this._offsetLimit=b(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(e),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),e=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-i+e)%t+i-e,s=(n+i+e)%t-i-e,r=Math.abs(o+e)<Math.abs(s+e)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var i=this._map,e=i.options,n=!e.inertia||this._times.length<2;if(i.fire("dragend",t),n)i.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=e.easeLinearity,a=o.multiplyBy(r/s),h=a.distanceTo([0,0]),u=Math.min(e.inertiaMaxSpeed,h),l=a.multiplyBy(u/h),c=u/(e.inertiaDeceleration*r),_=l.multiplyBy(-c/2).round();_.x||_.y?(_=i._limitOffset(_,i.options.maxBounds),f(function(){i.panBy(_,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):i.fire("moveend")}}});be.addInitHook("addHandler","dragging",zn),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Mn=Ee.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),mt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,e=t.scrollTop||i.scrollTop,n=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(n,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i,e,n=this._panKeys={},o=this.keyCodes;for(i=0,e=o.left.length;i<e;i++)n[o.left[i]]=[-1*t,0];for(i=0,e=o.right.length;i<e;i++)n[o.right[i]]=[t,0];for(i=0,e=o.down.length;i<e;i++)n[o.down[i]]=[0,t];for(i=0,e=o.up.length;i<e;i++)n[o.up[i]]=[0,-1*t]},_setZoomDelta:function(t){var i,e,n=this._zoomKeys={},o=this.keyCodes;for(i=0,e=o.zoomIn.length;i<e;i++)n[o.zoomIn[i]]=t;for(i=0,e=o.zoomOut.length;i<e;i++)n[o.zoomOut[i]]=-t},_addHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i,e=t.keyCode,n=this._map;if(e in this._panKeys)n._panAnim&&n._panAnim._inProgress||(i=this._panKeys[e],t.shiftKey&&(i=w(i).multiplyBy(3)),n.panBy(i),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else{if(27!==e||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Lt(t)}}});be.addInitHook("addHandler","keyboard",Mn),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Cn=Ee.extend({addHooks:function(){mt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ft(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=Tt(t),n=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e(this._performZoom,this),o),Lt(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),e=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=e?Math.ceil(o/e)*e:o,r=t._limitZoom(i+(this._delta>0?s:-s))-i;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(i+r):t.setZoomAround(this._lastMousePos,i+r))}});be.addInitHook("addHandler","scrollWheelZoom",Cn),be.mergeOptions({tap:!0,tapTolerance:15});var Sn=Ee.extend({addHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Pt(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new x(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&Q(n,"leaflet-active"),this._holdTimeout=setTimeout(e(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),mt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),ft(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],e=i.target;e&&e.tagName&&"a"===e.tagName.toLowerCase()&&tt(e,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var i=t.touches[0];this._newPos=new x(i.clientX,i.clientY),this._simulateEvent("mousemove",i)},_simulateEvent:function(t,i){var e=document.createEvent("MouseEvents");e._simulated=!0,i.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(e)}});qi&&!Vi&&be.addInitHook("addHandler","tap",Sn),be.mergeOptions({touchZoom:qi&&!Mi,bounceAtZoomLimits:!0});var Zn=Ee.extend({addHooks:function(){Q(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(e.add(n)._divideBy(2))),this._startDist=e.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend",this._onTouchEnd,this),Pt(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var i=this._map,n=i.mouseEventToContainerPoint(t.touches[0]),o=i.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(o)/this._startDist;if(this._zoom=i.getScaleZoom(s,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&s<1||this._zoom>i.getMaxZoom()&&s>1)&&(this._zoom=i._limitZoom(this._zoom)),"center"===i.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),g(this._animRequest);var a=e(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=f(a,this,!0),Pt(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,g(this._animRequest),ft(document,"touchmove",this._onTouchMove),ft(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});be.addInitHook("addHandler","touchZoom",Zn),be.BoxZoom=bn,be.DoubleClickZoom=Tn,be.Drag=zn,be.Keyboard=Mn,be.ScrollWheelZoom=Cn,be.Tap=Sn,be.TouchZoom=Zn,Object.freeze=ti,t.version="1.3.3",t.Control=Te,t.control=ze,t.Browser=Qi,t.Evented=ci,t.Mixin=Ae,t.Util=ui,t.Class=v,t.Handler=Ee,t.extend=i,t.bind=e,t.stamp=n,t.setOptions=l,t.DomEvent=Pe,t.DomUtil=ve,t.PosAnimation=Le,t.Draggable=Re,t.LineUtil=Ne,t.PolyUtil=De,t.Point=x,t.point=w,t.Bounds=P,t.bounds=b,t.Transformation=S,t.transformation=Z,t.Projection=He,t.LatLng=M,t.latLng=C,t.LatLngBounds=T,t.latLngBounds=z,t.CRS=di,t.GeoJSON=sn,t.geoJSON=Xt,t.geoJson=an,t.Layer=qe,t.LayerGroup=Ge,t.layerGroup=function(t,i){return new Ge(t,i)},t.FeatureGroup=Ke,t.featureGroup=function(t){return new Ke(t)},t.ImageOverlay=hn,t.imageOverlay=function(t,i,e){return new hn(t,i,e)},t.VideoOverlay=un,t.videoOverlay=function(t,i,e){return new un(t,i,e)},t.DivOverlay=ln,t.Popup=cn,t.popup=function(t,i){return new cn(t,i)},t.Tooltip=_n,t.tooltip=function(t,i){return new _n(t,i)},t.Icon=Ye,t.icon=function(t){return new Ye(t)},t.DivIcon=dn,t.divIcon=function(t){return new dn(t)},t.Marker=$e,t.marker=function(t,i){return new $e(t,i)},t.TileLayer=mn,t.tileLayer=Jt,t.GridLayer=pn,t.gridLayer=function(t){return new pn(t)},t.SVG=Pn,t.svg=Qt,t.Renderer=gn,t.Canvas=vn,t.canvas=$t,t.Path=Qe,t.CircleMarker=tn,t.circleMarker=function(t,i){return new tn(t,i)},t.Circle=en,t.circle=function(t,i,e){return new en(t,i,e)},t.Polyline=nn,t.polyline=function(t,i){return new nn(t,i)},t.Polygon=on,t.polygon=function(t,i){return new on(t,i)},t.Rectangle=Ln,t.rectangle=function(t,i){return new Ln(t,i)},t.Map=be,t.map=function(t,i){return new be(t,i)};var En=window.L;t.noConflict=function(){return window.L=En,this},window.L=t});
var start_date = null, end_date = null;
var timestamp_start_date = null, timestamp_end_date = null;
var $input_start_date = null, $input_end_date = null;

function getDateClass(date, start, end){
    if(end != null && start != null){
        if(date > start && date < end)
            return [ true, "sejour", "Sjour" ];
    }

    if(date == start)
        return [ true, "start", "Dbut de votre sjour" ];
    if(date == end)
        return [ true, "end", "Fin de votre sjour" ];

    return false;
}

function datepicker_draw_nb_nights(){
    var $datepicker = jQuery("#ui-datepicker-div");
    setTimeout(function(){
        if(start_date != null && end_date != null){
            var $qty_days_stay = jQuery("<div />", { class: "ui-datepicker-stay-duration" });
            var qty_nights_stay = get_days_difference(timestamp_start_date, timestamp_end_date);
            $qty_days_stay.text(qty_nights_stay + " nights stay");
            $qty_days_stay.appendTo($datepicker);
        }
    });
}

var options_start_date = {
    showAnim: false,
    constrainInput: true,
    numberOfMonths: 1,
    showOtherMonths: true,
    beforeShow: function(input, datepicker){
        datepicker_draw_nb_nights();
    },
    beforeShowDay: function(date){
        // 0: published
        // 1: class
        // 2: tooltip
        var timestamp_date = date.getTime();
        var result = getDateClass(timestamp_date, timestamp_start_date, timestamp_end_date);
        if(result != false)
            return result;

        return [true, "", ""];
        // return [ true, "chocolate", "Chocolate! " ];
    },
    onSelect: function(date_string, datepicker){
        // this => input
        start_date = $input_start_date.datepicker("getDate");
        timestamp_start_date = start_date.getTime();
    },
    onClose: function(){
        if(end_date != null){
            if(timestamp_start_date >= timestamp_end_date || end_date == null){
                $input_end_date.datepicker("setDate", null);
                end_date = null;
                timestamp_end_date = null;
                $input_end_date.datepicker("show");
                return;
            }
        }
        if(start_date != null && end_date == null)
            $input_end_date.datepicker("show");
    }
};
var options_end_date = {
    showAnim: false,
    constrainInput: true,
    numberOfMonths: 1,
    showOtherMonths: true,
    beforeShow: function(input, datepicker){
        datepicker_draw_nb_nights();
    },
    beforeShowDay: function(date){
        var timestamp_date = date.getTime();
        var result = getDateClass(timestamp_date, timestamp_start_date, timestamp_end_date);
        if(result != false)
            return result;

        return [ true, "", "Chocolate !" ];
    },
    onSelect: function(date_string, datepicker){
        // this => input
        end_date = $input_end_date.datepicker("getDate");
        timestamp_end_date = end_date.getTime();
    },
    onClose: function(){
        if(end_date == null)
            return;

        if(timestamp_end_date <= timestamp_start_date || start_date == null){
            $input_start_date.datepicker("setDate", null);
            start_date = null;
            timestamp_start_date = null;
            $input_start_date.datepicker("show");
        }
    }
};

// $input_start_date = jQuery("#start-date");
// $input_end_date = jQuery("#end-date");
//
// $input_start_date.datepicker(options_start_date);
// $input_end_date.datepicker(options_end_date);
//
// function get_days_difference(start_date, end_date){
//     return Math.floor(end_date - start_date) / (1000*60*60*24);
// }
/* Russian (UTF-8) initialisation for the jQuery UI date picker plugin. */
/* Written by Andrew Stromnov (stromnov@gmail.com). */
( function( factory ) {
    if ( typeof define === "function" && define.amd ) {

        // AMD. Register as an anonymous module.
        define( [ "../widgets/datepicker" ], factory );
    } else {

        // Browser globals
        factory( jQuery.datepicker );
    }
}( function( datepicker ) {

    datepicker.regional.ru = {
        closeText: "",
        prevText: "&#x3C;",
        nextText: "&#x3E;",
        currentText: "",
        monthNames: [ "","","","","","",
            "","","","","","" ],
        monthNamesShort: [ "","","","","","",
            "","","","","","" ],
        dayNames: [ "","","","","","","" ],
        dayNamesShort: [ "","","","","","","" ],
        dayNamesMin: [ "","","","","","","" ],
        weekHeader: "",
        dateFormat: "dd.mm.yy",
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: "" };
    datepicker.setDefaults( datepicker.regional.ru );

    return datepicker.regional.ru;

} ) );
$(document).ready(function () {

    function citySearch() {
        var options = {
            data: [
                {
                    "name": "",
                },
                {
                    "name": "",
                },
                {
                    "name": "",
                }
            ],
            getValue: "name"
        };

        $("#field-city").easyAutocomplete(options);
    }

    citySearch();

    // $("#start-date").datepicker({
    //     dateFormat: "dd M",
    //     minDate: 0,
    //     onSelect: function(dateText, inst){
    //         var d = $.datepicker.parseDate(inst.settings.dateFormat, dateText);
    //         d.setDate(d.getDate()+1);
    //         $("#end-date").val($.datepicker.formatDate(inst.settings.dateFormat, d));
    //     }
    // });
    // $('#end-date').datepicker({
    //     dateFormat: "dd M",
    //     minDate: 1
    // });

    $("#start-date").datepicker({
        dateFormat: "dd M",
        minDate: 0,
        onSelect: function () {
            var dt2 = $('#end-date');
            var startDate = $(this).datepicker('getDate');
            var minDate = $(this).datepicker('getDate');
            var dt2Date = dt2.datepicker('getDate');

            var dateDiff = (dt2Date - minDate) / (86400 * 1000);

            startDate.setDate(startDate.getDate() + 30);

            if (dt2Date == null || dateDiff < 0) {
                dt2.datepicker('setDate', minDate);
            } else if (dateDiff > 30) {
                dt2.datepicker('setDate', startDate);
            }

            // var maxDate = new Date(Date.parse(startDate));
            // maxDate.setDate(maxDate.getDate() - 1);

            var date2 = $(this).datepicker('getDate');
            date2.setDate(date2.getDate() + 1)
            dt2.datepicker("setDate", date2);

            //sets dt2 maxDate to the last day of 30 days window
            // dt2.datepicker('option', 'maxDate', startDate);
            // dt2.datepicker('option', 'minDate', startDate);
        }
    });
    $('#end-date').datepicker({
        dateFormat: "dd M",
        minDate: '+1'
    });


    $('.simple-select').select2({
        minimumResultsForSearch: -1
    });

    var swiper = new Swiper('.object__header-gallery', {
        loop: true,
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        }
        // noSwiping: true,
        // shortSwipes: true,
        // longSwipes: true,
        // longSwipesRatio: 0,
        // followFinger: false,
        // allowTouchMove: false
    });

    var swiper = new Swiper('.gallery-city-gallery', {
        loop: true,
        slidesPerView: 2,
        spaceBetween: 3,
        noSwiping: false,
        navigation: {
            nextEl: '.gallery-city-gallery-next',
            prevEl: '.gallery-city-gallery-prev',
        },
        breakpoints: {
            470: {
                slidesPerView: 1
            }
        }
    });


    $('.object__tab').click(function () {
        var map_info = $(this).parents('.object').find('.location__map'),
            coordE = map_info.attr('data-coordE'),
            coordN = map_info.attr('data-coordN'),
            mapId = map_info.attr('id');

        var openEl = $('.' + $(this).data('open'));

        $(this).parents('.objects__item').find(openEl).siblings().removeClass('is-show');
        $(this).siblings().removeClass('is-show');
        $(this).addClass('is-show');
        $(this).parents('.objects__item').find(openEl).addClass('is-show');

        if ($(this).data('open') === 'tab-gallery') initGallery($(this).parents('.objects__item').find('.gallery-top'), $(this).parents('.objects__item').find('.gallery-thumbs'));
        if ($(this).data('open') === 'tab-location') initMap(coordE, coordN, mapId);

    });

    function initGallery(a, b) {
        var galleryThumbs = new Swiper(b, {
            slidesPerView: 10,
            freeMode: true,
            noSwiping: false,
            watchSlidesVisibility: true,
            watchSlidesProgress: true
        });

        var galleryTop = new Swiper(a, {
            spaceBetween: 140,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            thumbs: {
                swiper: galleryThumbs,
            },
        });

    }

    (function () {
        var initAccordion = function (itemsClass, headerClass, bodyClass) {
            var $items = $(itemsClass);

            $items.find(headerClass).on('click', function () {
                $item = $(this).parent();
                $items.not($item).removeClass('is-open');
                $items.not($item).find(headerClass).removeClass('is-open');
                $items.not($item).find(bodyClass).slideUp(250);


                if ($(this).hasClass('is-open')) {
                    $item.removeClass('is-open');
                    $(this).removeClass('is-open');
                    $(this).siblings(bodyClass).slideUp(250);

                } else {
                    $item.addClass('is-open');
                    $(this).addClass('is-open');
                    $(this).siblings(bodyClass).slideDown(250);

                }
            });
        };

        initAccordion('.object', '.object__open', '.object__body');
    })($);


    $('.drop-choice__items--multiple .drop-choice__item button').click(function () {

        $(this).toggleClass('is-active');

        var $count = 0,
            $parent_item = $(this).parents('.drop-choice'),
            $item = $(this).parents('.drop-choice'),
            text = $(this).text();


        $item.find('.is-active').each(function (i) {
            $count = i + 1;
        });

        if ($count === 0) {
            $parent_item.prev().find('.field-drop__value').text($parent_item.prev().data('text'));
            $parent_item.prev().find('.field-drop__value').removeAttr('style');
            $parent_item.find('.js-reset').removeClass('is-checked');
        } else if ($count === 1) {
            text = $item.find('.is-active').text();
            $parent_item.prev().find('.field-drop__value').text(text);
            $parent_item.prev().find('.field-drop__value').removeAttr('style');
            $parent_item.find('.js-reset').addClass('is-checked');
        } else {
            $parent_item.prev().find('.field-drop__value').text($count + ' ');
            $parent_item.prev().find('.field-drop__value').css('font-style', 'italic');
            $parent_item.find('.js-reset').addClass('is-checked');
        }
    });

    $('body').delegate('.js-reset.is-checked', 'click', function () {
        var $parent_item = $(this).parents('.drop-choice');

        $parent_item.prev().find('.field-drop__value').text($parent_item.prev().data('text'));
        $parent_item.prev().find('.field-drop__value').removeAttr('style');
        $parent_item.find('.drop-choice__item button').removeClass('is-active');
        $parent_item.find('.js-reset').removeClass('is-checked');
    });


    $(".drop-choice__items--single .drop-choice__item button").click(function () {
        if (!$(this).hasClass('is-active')) {
            $(".drop-choice__items--single .drop-choice__item button").removeClass('is-active');
            $(this).addClass('is-active');
        }
    });

    $('.field-drop--housing').attr('data-text', ' ');
    $('.field-drop--rating').attr('data-text', '0-10');
    $('.field-drop--wishes').attr('data-text', ' ');
    $('.field-drop--comfort').attr('data-text', ' ');

    $('.js-open-feedback').click(function () {
        $(this).parents('.objects__item').find('.object__body--1').slideDown(250);
        $('html, body').animate({
            scrollTop: $(this).parents('.object__header').next().offset().top
        }, 800);

        $(this).parents('.objects__item').find('.object__tab').removeClass('is-show');
        $(this).parents('.objects__item').find('.object__tab--feedback').addClass('is-show');
        $(this).parents('.objects__item').find('.object__tabs-content').removeClass('is-show');
        $(this).parents('.objects__item').find('.tab-feedback').addClass('is-show');

        return false;
    });

    $('.js-open-gallery').click(function () {
        $thisParent = $(this).parents('.objects__item');

        $thisParent.find('.object__body--1').slideDown(250);
        $('html, body').animate({
            scrollTop: $(this).parents('.object__header').next().offset().top
        }, 800);

        if ($(window).width() > 767) {
            $thisParent.find('.object__tab').removeClass('is-show');
            $thisParent.find('.object__tab--gallery').addClass('is-show');
            $thisParent.find('.object__tabs-content').removeClass('is-show');
            $thisParent.find('.tab-gallery').addClass('is-show');

            initGallery($(this).parents('.objects__item').find('.gallery-top'), $(this).parents('.objects__item').find('.gallery-thumbs'));

        } else {
            $thisParent.find('.object').addClass('is-open');
            $thisParent.find('.object__open').addClass('is-open');
            $thisParent.find('.object__tab').removeClass('is-show');
            $thisParent.find('.object__tab--gallery').addClass('is-show');
            $thisParent.find('.object__tabs-content').removeClass('is-show');
            $thisParent.find('.tab-gallery').removeClass('is-show');
            $thisParent.find('.tab-information').addClass('is-show');
            $thisParent.find('[data-open="tab-information"]').addClass('is-show');
        }

        return false;

    });

    $('.filter .btn-done').click(function () {
        $('html, body').animate({
            scrollTop: $('.filter').offset().top
        }, 800);
    });

    $('.object__header-description').click(function () {
        $(this).parents('.objects__item').find('.object__body--1').slideDown(250);
        $('html, body').animate({
            scrollTop: $(this).parents('.object__header').next().offset().top
        }, 800);
        $(this).parents('.objects__item').find('.object__tab').removeClass('is-show');
        $(this).parents('.objects__item').find('.object').addClass('is-open');
        $(this).parents('.objects__item').find('.object__open').addClass('is-open');
        $(this).parents('.objects__item').find('.object__tab--gallery').addClass('is-show');
        $(this).parents('.objects__item').find('.object__tabs-content').removeClass('is-show');
        $(this).parents('.objects__item').find('.tab-gallery').removeClass('is-show');
        $(this).parents('.objects__item').find('.tab-information').addClass('is-show');
        $(this).parents('.objects__item').find('[data-open="tab-information"]').addClass('is-show');
        return false;
    });


    $('.js-open-smap').click(function () {

        $(this).parents('.objects__item').find('.object__body--1').slideDown(250);
        $('html, body').animate({
            scrollTop: $(this).parents('.object__header').next().offset().top
        }, 800);

        $(this).parents('.objects__item').find('.object__tab').removeClass('is-show');
        $(this).parents('.objects__item').find('.object__tab--location').addClass('is-show');
        $(this).parents('.objects__item').find('.object__tabs-content').removeClass('is-show');
        $(this).parents('.objects__item').find('.tab-location').addClass('is-show');

        var map_info = $(this).parents('.object').find('.location__map'),
            coordE = map_info.attr('data-coordE'),
            coordN = map_info.attr('data-coordN'),
            mapId = map_info.attr('id');
        // console.log(coordE, coordN, mapId);
        initMap(coordE, coordN, mapId);
        return false;
    });


    $('#lightgallery').lightGallery({
        pager: true
    });


    $('.object__tab-button--close').click(function () {
        $('.object__body').slideUp(250);
        $('.object').removeClass('is-open');
        if ($(window).width() < 768) {
            $('html, body').animate({
                scrollTop: $(this).parents('.objects__item').offset().top - 15
            }, 800);
        }
        return false;
    });

    $('body').delegate('.object__open', 'click', function () {
        $('html, body').animate({
            scrollTop: $(this).parents('.objects__item').offset().top - 15
        }, 800);
    })

    $('.show-more-list-info').click(function () {
        $(this).parents('.information').find('.information__more-list').slideToggle(250);
        // $('.information__item').slideToggle(0);
        $(this).parents('.information').find('.information__shadow').slideToggle(0);
        $(this).toggleClass('is-open');
        return false;
    });

    $('.show-more-feedback').click(function () {
        $('.feedback__items--tabs--hide').slideToggle(250);
        return false;
    });

    $('.prices-city__more').click(function () {
        $(this).hide();
        $('.prices-city__item').show(200);
        return false;
    });

    $('.faq__characteristics').click(function () {
        $(this).hide();
        $('.faq__items--characteristics li').show(200);
        return false;
    });
    $('.faq__search').click(function () {
        $(this).hide();
        $('.faq__items--search li').show(200);
        return false;
    });
    $('.faq__more').click(function () {
        $(this).hide();
        $('.faq__items--more li').show(200);
        return false;
    });


    var check_map = false;

    $('.btn-show-map').click(function () {

        $('.objects__map').fadeIn(300);
        $('html').addClass('is-fixed');
        if (!check_map) {
            initGallery2();
            initMap2();
        }

        $('html, body').animate({
            scrollTop: $('.objects__map').offset().top - 15
        }, 800);

        check_map = true;
    });

    $('.btn-show-more').click(function (e) {
        if (!$(this).hasClass('is-open')) {
            $('html, body').animate({
                scrollTop: $(this).parents('.object__tabs-contents').prev().offset().top
            }, 1000);
        }
    });

    function initGallery2() {
        var swiper = new Swiper('.object__header-gallery--map', {
            loop: true,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            noSwiping: false,
            shortSwipes: false,
            longSwipes: false,
            longSwipesRatio: 0,
            followFinger: false,
            allowTouchMove: false
        });
    }

    $('.objects__map-close').click(function () {
        $('.objects__map').fadeOut(100);
        $('.objects__map-description').show(200);
        $('html').removeClass('is-fixed');
        return false;
    });

    $('.js-open-filter').click(function () {
        $('.filter__change').hide(0);
        $('.filter__open').slideDown(300);
        $('.filter__body-close').addClass('is-open');
        $('.filter').addClass('filter-open');
        if ($(window).width() < 451) $('body').css('overflow', 'hidden');
        return false;
    });

    $('.filter__body-close').click(function () {
        $('.filter__change').show(50);
        $('.filter__open').slideUp(100);
        $(this).removeClass('is-open');
        $('.filter').removeClass('is-open');
        $('.filter').removeClass('filter-open');
        if ($(window).width() < 451) $('body').removeAttr('style');
        return false;
    });

    // $('.js-open-datepicker').click(function () {
    //     $('.overlay').fadeIn(300);
    // });

    $('.js-open-guests').click(function () {
        $(this).toggleClass('is-open');
        $('.filter__close').toggleClass('is-open');
        $('.filter').toggleClass('is-open');
        $('.drop-guests, .overlay').fadeToggle(300);

        return false;
    });


    $('.js-open-housing').click(function () {
        $(this).toggleClass('is-open');
        $('.filter__close').toggleClass('is-open');
        $('.filter').toggleClass('is-open');
        $('.drop-choice--housing, .overlay').fadeToggle(300);

        return false;
    });


    $('.js-open-rating').click(function () {
        $(this).toggleClass('is-open');
        $('.filter__close').toggleClass('is-open');
        $('.filter').toggleClass('is-open');
        $('.drop-choice--rating, .overlay').fadeToggle(300);

        return false;
    });

    $('.js-open-wishes').click(function () {
        $(this).toggleClass('is-open');
        $('.filter__close').toggleClass('is-open');
        $('.filter').toggleClass('is-open');
        $('.drop-choice--wishes, .overlay').fadeToggle(300);

        return false;
    });

    $('.js-open-comfort').click(function () {
        $(this).toggleClass('is-open');
        $('.filter__close').toggleClass('is-open');
        $('.filter').toggleClass('is-open');
        $('.drop-choice--comfort, .overlay').fadeToggle(300);

        return false;
    });

    $('.objects__map-description__close').click(function () {
        $('.objects__map-description').hide(100);

        return false;
    });

    $('.overlay, .btn-done, .filter__close, .filter__overlay').click(function () {
        $('.field-drop, .filter__close, .filter').removeClass('is-open');
        $('.drop-guests, .drop-choice--comfort, .drop-choice--housing, .drop-choice--rating, .drop-choice--wishes, .overlay').fadeOut(300);

        return false;
    });


    $("#slider-range").slider({
        range: true,
        min: 0,
        max: 3000,
        step: 50,
        values: [0, 3000],
        slide: function (event, ui) {
            $(".start-val").text(ui.values[0]);
            $(".end-val").text(ui.values[1]);
            $(".end-val").next('span').text(ui.values[1] < 3000 ? '' : ' +');
        }
    });

    $(".start-val").text($("#slider-range").slider("values", 0));
    $(".end-val").text($("#slider-range").slider("values", 1));

    jQuery("input#minCost").change(function () {

        var value1 = jQuery("input#minCost").val();
        var value2 = jQuery("input#maxCost").val();

        if (parseInt(value1) > parseInt(value2)) {
            value1 = value2;
            jQuery("input#minCost").val(value1);
        }
        jQuery("#slider").slider("values", 0, value1);
    });


    jQuery("input#maxCost").change(function () {

        var value1 = jQuery("input#minCost").val();
        var value2 = jQuery("input#maxCost").val();

        if (value2 > 1000) {
            value2 = 1000;
            jQuery("input#maxCost").val(1000)
        }

        if (parseInt(value1) > parseInt(value2)) {
            value2 = value1;
            jQuery("input#maxCost").val(value2);
        }
        jQuery("#slider-range").slider("values", 1, value2);
    });


    //map
    function initMap(coordE, coordN, id) {
        var coorE = coordE;
        var coorN = coordN;


        var mymap = L.map(id).setView([coorE, coorN], 14);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 16,
            //attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
            //'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            //'Imagery  <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);

        var greenIcon = new L.Icon({
            iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        L.marker([coorE, coorN], {icon: greenIcon}).addTo(mymap);
    }

    //map end


    //map2
    function initMap2() {
        var coorE = '48.3506358';
        var coorN = '24.4351631';


        var mymap = L.map('location-map2').setView([coorE, coorN], 14);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 16,
            //attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
            //'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            //'Imagery  <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);

        var greenIcon = new L.Icon({
            iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        L.marker([coorE, coorN], {icon: greenIcon}).addTo(mymap);
    }

    //map2 end


    var $guests = $("#guests-value");

    $('#guest-plus').click(function add() {
        var $guests = $("#guests-value");
        var a = parseInt($guests.val());

        a++;
        $("#guest-minus").prop("disabled", !a);
        $guests.val(a);

        var val_sum_1 = Number($("#guests-value2").val());
        var val_sum_2 = Number($("#guests-value3").val());

        var sum = a + val_sum_1 + val_sum_2;
        $('.field-drop__value--guests').text(sum + ' ');

    });

    $("#guest-minus").prop("disabled", !$("#guests-value").val());

    $('#guest-minus').click(function subst() {
        var $guests = $("#guests-value");
        var b = parseInt($guests.val());

        if (b >= 1) {
            b--;
            $guests.val(b);

            var val_sum_1 = Number($("#guests-value2").val());
            var val_sum_2 = Number($("#guests-value3").val());
            var sum = b + val_sum_1 + val_sum_2;
            $('.field-drop__value--guests').text(sum + ' ');

        } else {
            $("#guest-minus").prop("disabled", true);
        }
    });


    var $guests2 = $("#guests-value2");
    $('#guest-plus2').click(function add() {
        var $guests2 = $("#guests-value2");
        var a = parseInt($guests2.val());

        a++;
        $("#guest-minus2").prop("disabled", !a);
        $guests2.val(a);

        var val_sum_1 = Number($("#guests-value").val());
        var val_sum_2 = Number($("#guests-value3").val());
        var sum = a + val_sum_1 + val_sum_2;
        $('.field-drop__value--guests').text(sum + ' ');
    });
    $("#guest-minus2").prop("disabled", !$("#guests-value2").val());
    $('#guest-minus2').click(function subst() {
        var $guests = $("#guests-value2");

        var b = parseInt($guests2.val());
        if (b >= 1) {
            b--;
            $guests2.val(b);


            var val_sum_1 = Number($("#guests-value").val());
            var val_sum_2 = Number($("#guests-value3").val());
            var sum = b + val_sum_1 + val_sum_2;
            $('.field-drop__value--guests').text(sum + ' ');

            console.log(sum);

        } else {
            $("#guest-minus2").prop("disabled", true);
        }
    });

    var $guests3 = $("#guests-value3");
    $('#guest-plus3').click(function add() {
        var $guests3 = $("#guests-value3");
        var a = parseInt($guests3.val());

        a++;
        $("#guest-minus3").prop("disabled", !a);
        $guests3.val(a);

        var val_sum_1 = Number($("#guests-value").val());
        var val_sum_2 = Number($("#guests-value2").val());
        var sum = a + val_sum_1 + val_sum_2;
        $('.field-drop__value--guests').text(sum + ' ');
    });
    $("#guest-minus3").prop("disabled", !$("#guests-value2").val());
    $('#guest-minus3').click(function subst() {
        var $guests3 = $("#guests-value3");

        var b = parseInt($guests3.val());
        if (b >= 1) {
            b--;
            $guests3.val(b);

            var val_sum_1 = Number($("#guests-value").val());
            var val_sum_2 = Number($("#guests-value2").val());
            var sum = b + val_sum_1 + val_sum_2;
            $('.field-drop__value--guests').text(sum + ' ');
        } else {
            $("#guest-minus3").prop("disabled", true);
        }
    });


    var didScroll,
        lastScrollTop = 0,
        delta = 5,
        navbarHeight = $('.filter').outerHeight();

    $(window).scroll(function (event) {
        if ($(window).width() < 451 && !$('.filter').hasClass('filter-open')) didScroll = true;
    });

    setInterval(function () {
        if (didScroll) {
            hasScrolled();
            didScroll = false;
        }
    }, 250);

    function hasScrolled() {
        var st = $(this).scrollTop();

        // Make scroll more than delta
        if (Math.abs(lastScrollTop - st) <= delta)
            return;

        // If scrolled down and past the navbar, add class .nav-up.
        if (st > lastScrollTop && st > navbarHeight) {
            // Scroll Down
            $('.filter').removeClass('nav-down').addClass('nav-up');
        } else {
            // Scroll Up
            if (st + $(window).height() < $(document).height()) {
                $('.filter').removeClass('nav-up').addClass('nav-down');
            }
        }

        lastScrollTop = st;
    }

});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjMuMy4xIHwgKGMpIEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUuZG9jdW1lbnQ/dChlLCEwKTpmdW5jdGlvbihlKXtpZighZS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiB0KGUpfTp0KGUpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49W10scj1lLmRvY3VtZW50LGk9T2JqZWN0LmdldFByb3RvdHlwZU9mLG89bi5zbGljZSxhPW4uY29uY2F0LHM9bi5wdXNoLHU9bi5pbmRleE9mLGw9e30sYz1sLnRvU3RyaW5nLGY9bC5oYXNPd25Qcm9wZXJ0eSxwPWYudG9TdHJpbmcsZD1wLmNhbGwoT2JqZWN0KSxoPXt9LGc9ZnVuY3Rpb24gZSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZcIm51bWJlclwiIT10eXBlb2YgdC5ub2RlVHlwZX0seT1mdW5jdGlvbiBlKHQpe3JldHVybiBudWxsIT10JiZ0PT09dC53aW5kb3d9LHY9e3R5cGU6ITAsc3JjOiEwLG5vTW9kdWxlOiEwfTtmdW5jdGlvbiBtKGUsdCxuKXt2YXIgaSxvPSh0PXR8fHIpLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7aWYoby50ZXh0PWUsbilmb3IoaSBpbiB2KW5baV0mJihvW2ldPW5baV0pO3QuaGVhZC5hcHBlbmRDaGlsZChvKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIG51bGw9PWU/ZStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBlfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2xbYy5jYWxsKGUpXXx8XCJvYmplY3RcIjp0eXBlb2YgZX12YXIgYj1cIjMuMy4xXCIsdz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgdy5mbi5pbml0KGUsdCl9LFQ9L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO3cuZm49dy5wcm90b3R5cGU9e2pxdWVyeTpcIjMuMy4xXCIsY29uc3RydWN0b3I6dyxsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIG8uY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP28uY2FsbCh0aGlzKTplPDA/dGhpc1tlK3RoaXMubGVuZ3RoXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHR9LGVhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHcuZWFjaCh0aGlzLGUpfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soby5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobj49MCYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpzLHNvcnQ6bi5zb3J0LHNwbGljZTpuLnNwbGljZX0sdy5leHRlbmQ9dy5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBhJiYobD1hLGE9YXJndW1lbnRzW3NdfHx7fSxzKyspLFwib2JqZWN0XCI9PXR5cGVvZiBhfHxnKGEpfHwoYT17fSkscz09PXUmJihhPXRoaXMscy0tKTtzPHU7cysrKWlmKG51bGwhPShlPWFyZ3VtZW50c1tzXSkpZm9yKHQgaW4gZSluPWFbdF0sYSE9PShyPWVbdF0pJiYobCYmciYmKHcuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhpPyhpPSExLG89biYmQXJyYXkuaXNBcnJheShuKT9uOltdKTpvPW4mJncuaXNQbGFpbk9iamVjdChuKT9uOnt9LGFbdF09dy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LHcuZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKFwiMy4zLjFcIitNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihlKX0sbm9vcDpmdW5jdGlvbigpe30saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiEoIWV8fFwiW29iamVjdCBPYmplY3RdXCIhPT1jLmNhbGwoZSkpJiYoISh0PWkoZSkpfHxcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWYuY2FsbCh0LFwiY29uc3RydWN0b3JcIikmJnQuY29uc3RydWN0b3IpJiZwLmNhbGwobik9PT1kKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGUpe20oZSl9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYoQyhlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9cIlwiOihlK1wiXCIpLnJlcGxhY2UoVCxcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihDKE9iamVjdChlKSk/dy5tZXJnZShuLFwic3RyaW5nXCI9PXR5cGVvZiBlP1tlXTplKTpzLmNhbGwobixlKSksbn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGw9PXQ/LTE6dS5jYWxsKHQsZSxuKX0sbWVyZ2U6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49K3QubGVuZ3RoLHI9MCxpPWUubGVuZ3RoO3I8bjtyKyspZVtpKytdPXRbcl07cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByLGk9W10sbz0wLGE9ZS5sZW5ndGgscz0hbjtvPGE7bysrKShyPSF0KGVbb10sbykpIT09cyYmaS5wdXNoKGVbb10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz0wLHM9W107aWYoQyhlKSlmb3Iocj1lLmxlbmd0aDtvPHI7bysrKW51bGwhPShpPXQoZVtvXSxvLG4pKSYmcy5wdXNoKGkpO2Vsc2UgZm9yKG8gaW4gZSludWxsIT0oaT10KGVbb10sbyxuKSkmJnMucHVzaChpKTtyZXR1cm4gYS5hcHBseShbXSxzKX0sZ3VpZDoxLHN1cHBvcnQ6aH0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHcuZm5bU3ltYm9sLml0ZXJhdG9yXT1uW1N5bWJvbC5pdGVyYXRvcl0pLHcuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7bFtcIltvYmplY3QgXCIrdCtcIl1cIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gQyhlKXt2YXIgdD0hIWUmJlwibGVuZ3RoXCJpbiBlJiZlLmxlbmd0aCxuPXgoZSk7cmV0dXJuIWcoZSkmJiF5KGUpJiYoXCJhcnJheVwiPT09bnx8MD09PXR8fFwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX12YXIgRT1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyx1LGwsYyxmLHAsZCxoLGcseSx2LG0seCxiPVwic2l6emxlXCIrMSpuZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD0wLEM9MCxFPWFlKCksaz1hZSgpLFM9YWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYoZj0hMCksMH0sTj17fS5oYXNPd25Qcm9wZXJ0eSxBPVtdLGo9QS5wb3AscT1BLnB1c2gsTD1BLnB1c2gsSD1BLnNsaWNlLE89ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFA9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLE09XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLFI9XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXDAtXFxcXHhhMF0pK1wiLEk9XCJcXFxcW1wiK00rXCIqKFwiK1IrXCIpKD86XCIrTStcIiooWypeJHwhfl0/PSlcIitNK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrUitcIikpfClcIitNK1wiKlxcXFxdXCIsVz1cIjooXCIrUitcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrSStcIikqKXwuKilcXFxcKXwpXCIsJD1uZXcgUmVnRXhwKE0rXCIrXCIsXCJnXCIpLEI9bmV3IFJlZ0V4cChcIl5cIitNK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitNK1wiKyRcIixcImdcIiksRj1uZXcgUmVnRXhwKFwiXlwiK00rXCIqLFwiK00rXCIqXCIpLF89bmV3IFJlZ0V4cChcIl5cIitNK1wiKihbPit+XXxcIitNK1wiKVwiK00rXCIqXCIpLHo9bmV3IFJlZ0V4cChcIj1cIitNK1wiKihbXlxcXFxdJ1xcXCJdKj8pXCIrTStcIipcXFxcXVwiLFwiZ1wiKSxYPW5ldyBSZWdFeHAoVyksVT1uZXcgUmVnRXhwKFwiXlwiK1IrXCIkXCIpLFY9e0lEOm5ldyBSZWdFeHAoXCJeIyhcIitSK1wiKVwiKSxDTEFTUzpuZXcgUmVnRXhwKFwiXlxcXFwuKFwiK1IrXCIpXCIpLFRBRzpuZXcgUmVnRXhwKFwiXihcIitSK1wifFsqXSlcIiksQVRUUjpuZXcgUmVnRXhwKFwiXlwiK0kpLFBTRVVETzpuZXcgUmVnRXhwKFwiXlwiK1cpLENISUxEOm5ldyBSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK00rXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitNK1wiKig/OihbKy1dfClcIitNK1wiKihcXFxcZCspfCkpXCIrTStcIipcXFxcKXwpXCIsXCJpXCIpLGJvb2w6bmV3IFJlZ0V4cChcIl4oPzpcIitQK1wiKSRcIixcImlcIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoXCJeXCIrTStcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrTStcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrTStcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sRz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFk9L15oXFxkJC9pLFE9L15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxKPS9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLEs9L1srfl0vLFo9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK00rXCI/fChcIitNK1wiKXwuKVwiLFwiaWdcIiksZWU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVwiMHhcIit0LTY1NTM2O3JldHVybiByIT09cnx8bj90OnI8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKHIrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUocj4+MTB8NTUyOTYsMTAyMyZyfDU2MzIwKX0sdGU9LyhbXFwwLVxceDFmXFx4N2ZdfF4tP1xcZCl8Xi0kfFteXFwwLVxceDFmXFx4N2YtXFx1RkZGRlxcdy1dL2csbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9cIlxcMFwiPT09ZT9cIlxcdWZmZmRcIjplLnNsaWNlKDAsLTEpK1wiXFxcXFwiK2UuY2hhckNvZGVBdChlLmxlbmd0aC0xKS50b1N0cmluZygxNikrXCIgXCI6XCJcXFxcXCIrZX0scmU9ZnVuY3Rpb24oKXtwKCl9LGllPW1lKGZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZS5kaXNhYmxlZCYmKFwiZm9ybVwiaW4gZXx8XCJsYWJlbFwiaW4gZSl9LHtkaXI6XCJwYXJlbnROb2RlXCIsbmV4dDpcImxlZ2VuZFwifSk7dHJ5e0wuYXBwbHkoQT1ILmNhbGwody5jaGlsZE5vZGVzKSx3LmNoaWxkTm9kZXMpLEFbdy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZSl7TD17YXBwbHk6QS5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtxLmFwcGx5KGUsSC5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb2UoZSx0LHIsaSl7dmFyIG8scyxsLGMsZixoLHYsbT10JiZ0Lm93bmVyRG9jdW1lbnQsVD10P3Qubm9kZVR5cGU6OTtpZihyPXJ8fFtdLFwic3RyaW5nXCIhPXR5cGVvZiBlfHwhZXx8MSE9PVQmJjkhPT1UJiYxMSE9PVQpcmV0dXJuIHI7aWYoIWkmJigodD90Lm93bmVyRG9jdW1lbnR8fHQ6dykhPT1kJiZwKHQpLHQ9dHx8ZCxnKSl7aWYoMTEhPT1UJiYoZj1KLmV4ZWMoZSkpKWlmKG89ZlsxXSl7aWYoOT09PVQpe2lmKCEobD10LmdldEVsZW1lbnRCeUlkKG8pKSlyZXR1cm4gcjtpZihsLmlkPT09bylyZXR1cm4gci5wdXNoKGwpLHJ9ZWxzZSBpZihtJiYobD1tLmdldEVsZW1lbnRCeUlkKG8pKSYmeCh0LGwpJiZsLmlkPT09bylyZXR1cm4gci5wdXNoKGwpLHJ9ZWxzZXtpZihmWzJdKXJldHVybiBMLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSkscjtpZigobz1mWzNdKSYmbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZ0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEwuYXBwbHkocix0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobykpLHJ9aWYobi5xc2EmJiFTW2UrXCIgXCJdJiYoIXl8fCF5LnRlc3QoZSkpKXtpZigxIT09VCltPXQsdj1lO2Vsc2UgaWYoXCJvYmplY3RcIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7KGM9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/Yz1jLnJlcGxhY2UodGUsbmUpOnQuc2V0QXR0cmlidXRlKFwiaWRcIixjPWIpLHM9KGg9YShlKSkubGVuZ3RoO3doaWxlKHMtLSloW3NdPVwiI1wiK2MrXCIgXCIrdmUoaFtzXSk7dj1oLmpvaW4oXCIsXCIpLG09Sy50ZXN0KGUpJiZnZSh0LnBhcmVudE5vZGUpfHx0fWlmKHYpdHJ5e3JldHVybiBMLmFwcGx5KHIsbS5xdWVyeVNlbGVjdG9yQWxsKHYpKSxyfWNhdGNoKGUpe31maW5hbGx5e2M9PT1iJiZ0LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIHUoZS5yZXBsYWNlKEIsXCIkMVwiKSx0LHIsaSl9ZnVuY3Rpb24gYWUoKXt2YXIgZT1bXTtmdW5jdGlvbiB0KG4saSl7cmV0dXJuIGUucHVzaChuK1wiIFwiKT5yLmNhY2hlTGVuZ3RoJiZkZWxldGUgdFtlLnNoaWZ0KCldLHRbbitcIiBcIl09aX1yZXR1cm4gdH1mdW5jdGlvbiBzZShlKXtyZXR1cm4gZVtiXT0hMCxlfWZ1bmN0aW9uIHVlKGUpe3ZhciB0PWQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2goZSl7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGxlKGUsdCl7dmFyIG49ZS5zcGxpdChcInxcIiksaT1uLmxlbmd0aDt3aGlsZShpLS0pci5hdHRySGFuZGxlW25baV1dPXR9ZnVuY3Rpb24gY2UoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGZlKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm5cImlucHV0XCI9PT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnQudHlwZT09PWV9fWZ1bmN0aW9uIHBlKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PW58fFwiYnV0dG9uXCI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gZGUoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVyblwiZm9ybVwiaW4gdD90LnBhcmVudE5vZGUmJiExPT09dC5kaXNhYmxlZD9cImxhYmVsXCJpbiB0P1wibGFiZWxcImluIHQucGFyZW50Tm9kZT90LnBhcmVudE5vZGUuZGlzYWJsZWQ9PT1lOnQuZGlzYWJsZWQ9PT1lOnQuaXNEaXNhYmxlZD09PWV8fHQuaXNEaXNhYmxlZCE9PSFlJiZpZSh0KT09PWU6dC5kaXNhYmxlZD09PWU6XCJsYWJlbFwiaW4gdCYmdC5kaXNhYmxlZD09PWV9fWZ1bmN0aW9uIGhlKGUpe3JldHVybiBzZShmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxzZShmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShbXSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfWZ1bmN0aW9uIGdlKGUpe3JldHVybiBlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmZX1uPW9lLnN1cHBvcnQ9e30sbz1vZS5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuISF0JiZcIkhUTUxcIiE9PXQubm9kZU5hbWV9LHA9b2Uuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsaSxhPWU/ZS5vd25lckRvY3VtZW50fHxlOnc7cmV0dXJuIGEhPT1kJiY5PT09YS5ub2RlVHlwZSYmYS5kb2N1bWVudEVsZW1lbnQ/KGQ9YSxoPWQuZG9jdW1lbnRFbGVtZW50LGc9IW8oZCksdyE9PWQmJihpPWQuZGVmYXVsdFZpZXcpJiZpLnRvcCE9PWkmJihpLmFkZEV2ZW50TGlzdGVuZXI/aS5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIscmUsITEpOmkuYXR0YWNoRXZlbnQmJmkuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLHJlKSksbi5hdHRyaWJ1dGVzPXVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNsYXNzTmFtZT1cImlcIiwhZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxuLmdldEVsZW1lbnRzQnlUYWdOYW1lPXVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKGQuY3JlYXRlQ29tbWVudChcIlwiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1RLnRlc3QoZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxuLmdldEJ5SWQ9dWUoZnVuY3Rpb24oZSl7cmV0dXJuIGguYXBwZW5kQ2hpbGQoZSkuaWQ9YiwhZC5nZXRFbGVtZW50c0J5TmFtZXx8IWQuZ2V0RWxlbWVudHNCeU5hbWUoYikubGVuZ3RofSksbi5nZXRCeUlkPyhyLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UoWixlZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZShcImlkXCIpPT09dH19LHIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LmdldEVsZW1lbnRCeUlkJiZnKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuP1tuXTpbXX19KTooci5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFosZWUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlJiZlLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSxyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmZyl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKSkmJm4udmFsdWU9PT1lKXJldHVybltvXTtpPXQuZ2V0RWxlbWVudHNCeU5hbWUoZSkscj0wO3doaWxlKG89aVtyKytdKWlmKChuPW8uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dfXJldHVybltdfX0pLHIuZmluZC5UQUc9bi5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihlLHQpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6bi5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoXCIqXCI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxyLmZpbmQuQ0xBU1M9bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmcpcmV0dXJuIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKX0sdj1bXSx5PVtdLChuLnFzYT1RLnRlc3QoZC5xdWVyeVNlbGVjdG9yQWxsKSkmJih1ZShmdW5jdGlvbihlKXtoLmFwcGVuZENoaWxkKGUpLmlubmVySFRNTD1cIjxhIGlkPSdcIitiK1wiJz48L2E+PHNlbGVjdCBpZD0nXCIrYitcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGUucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCYmeS5wdXNoKFwiWypeJF09XCIrTStcIiooPzonJ3xcXFwiXFxcIilcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fHkucHVzaChcIlxcXFxbXCIrTStcIiooPzp2YWx1ZXxcIitQK1wiKVwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWR+PVwiK2IrXCItXVwiKS5sZW5ndGh8fHkucHVzaChcIn49XCIpLGUucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8eS5wdXNoKFwiOmNoZWNrZWRcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiYSNcIitiK1wiKypcIikubGVuZ3RofHx5LnB1c2goXCIuIy4rWyt+XVwiKX0pLHVlKGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPVwiPGEgaHJlZj0nJyBkaXNhYmxlZD0nZGlzYWJsZWQnPjwvYT48c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+XCI7dmFyIHQ9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGUucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmeS5wdXNoKFwibmFtZVwiK00rXCIqWypeJHwhfl0/PVwiKSwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoJiZ5LnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLGguYXBwZW5kQ2hpbGQoZSkuZGlzYWJsZWQ9ITAsMiE9PWUucXVlcnlTZWxlY3RvckFsbChcIjpkaXNhYmxlZFwiKS5sZW5ndGgmJnkucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSx5LnB1c2goXCIsLio6XCIpfSkpLChuLm1hdGNoZXNTZWxlY3Rvcj1RLnRlc3QobT1oLm1hdGNoZXN8fGgud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxoLm1vek1hdGNoZXNTZWxlY3Rvcnx8aC5vTWF0Y2hlc1NlbGVjdG9yfHxoLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJnVlKGZ1bmN0aW9uKGUpe24uZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsXCIqXCIpLG0uY2FsbChlLFwiW3MhPScnXTp4XCIpLHYucHVzaChcIiE9XCIsVyl9KSx5PXkubGVuZ3RoJiZuZXcgUmVnRXhwKHkuam9pbihcInxcIikpLHY9di5sZW5ndGgmJm5ldyBSZWdFeHAodi5qb2luKFwifFwiKSksdD1RLnRlc3QoaC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseD10fHxRLnRlc3QoaC5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gZj0hMCwwO3ZhciByPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiByfHwoMSYocj0oZS5vd25lckRvY3VtZW50fHxlKT09PSh0Lm93bmVyRG9jdW1lbnR8fHQpP2UuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCk6MSl8fCFuLnNvcnREZXRhY2hlZCYmdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PXI/ZT09PWR8fGUub3duZXJEb2N1bWVudD09PXcmJngodyxlKT8tMTp0PT09ZHx8dC5vd25lckRvY3VtZW50PT09dyYmeCh3LHQpPzE6Yz9PKGMsZSktTyhjLHQpOjA6NCZyPy0xOjEpfTpmdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBmPSEwLDA7dmFyIG4scj0wLGk9ZS5wYXJlbnROb2RlLG89dC5wYXJlbnROb2RlLGE9W2VdLHM9W3RdO2lmKCFpfHwhbylyZXR1cm4gZT09PWQ/LTE6dD09PWQ/MTppPy0xOm8/MTpjP08oYyxlKS1PKGMsdCk6MDtpZihpPT09bylyZXR1cm4gY2UoZSx0KTtuPWU7d2hpbGUobj1uLnBhcmVudE5vZGUpYS51bnNoaWZ0KG4pO249dDt3aGlsZShuPW4ucGFyZW50Tm9kZSlzLnVuc2hpZnQobik7d2hpbGUoYVtyXT09PXNbcl0pcisrO3JldHVybiByP2NlKGFbcl0sc1tyXSk6YVtyXT09PXc/LTE6c1tyXT09PXc/MTowfSxkKTpkfSxvZS5tYXRjaGVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG9lKGUsbnVsbCxudWxsLHQpfSxvZS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXtpZigoZS5vd25lckRvY3VtZW50fHxlKSE9PWQmJnAoZSksdD10LnJlcGxhY2UoeixcIj0nJDEnXVwiKSxuLm1hdGNoZXNTZWxlY3RvciYmZyYmIVNbdCtcIiBcIl0mJighdnx8IXYudGVzdCh0KSkmJigheXx8IXkudGVzdCh0KSkpdHJ5e3ZhciByPW0uY2FsbChlLHQpO2lmKHJ8fG4uZGlzY29ubmVjdGVkTWF0Y2h8fGUuZG9jdW1lbnQmJjExIT09ZS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gcn1jYXRjaChlKXt9cmV0dXJuIG9lKHQsZCxudWxsLFtlXSkubGVuZ3RoPjB9LG9lLmNvbnRhaW5zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUub3duZXJEb2N1bWVudHx8ZSkhPT1kJiZwKGUpLHgoZSx0KX0sb2UuYXR0cj1mdW5jdGlvbihlLHQpeyhlLm93bmVyRG9jdW1lbnR8fGUpIT09ZCYmcChlKTt2YXIgaT1yLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxvPWkmJk4uY2FsbChyLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9pKGUsdCwhZyk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1vP286bi5hdHRyaWJ1dGVzfHwhZz9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGx9LG9lLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZStcIlwiKS5yZXBsYWNlKHRlLG5lKX0sb2UuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrZSl9LG9lLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1bXSxpPTAsbz0wO2lmKGY9IW4uZGV0ZWN0RHVwbGljYXRlcyxjPSFuLnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KEQpLGYpe3doaWxlKHQ9ZVtvKytdKXQ9PT1lW29dJiYoaT1yLnB1c2gobykpO3doaWxlKGktLSllLnNwbGljZShyW2ldLDEpfXJldHVybiBjPW51bGwsZX0saT1vZS5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49XCJcIixyPTAsbz1lLm5vZGVUeXBlO2lmKG8pe2lmKDE9PT1vfHw5PT09b3x8MTE9PT1vKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpbis9aShlKX1lbHNlIGlmKDM9PT1vfHw0PT09bylyZXR1cm4gZS5ub2RlVmFsdWV9ZWxzZSB3aGlsZSh0PWVbcisrXSluKz1pKHQpO3JldHVybiBufSwocj1vZS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpzZSxtYXRjaDpWLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKFosZWUpLGVbM109KGVbM118fGVbNF18fGVbNV18fFwiXCIpLnJlcGxhY2UoWixlZSksXCJ+PVwiPT09ZVsyXSYmKGVbM109XCIgXCIrZVszXStcIiBcIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8b2UuZXJyb3IoZVswXSksZVs0XT0rKGVbNF0/ZVs1XSsoZVs2XXx8MSk6MiooXCJldmVuXCI9PT1lWzNdfHxcIm9kZFwiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fFwib2RkXCI9PT1lWzNdKSk6ZVszXSYmb2UuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG49IWVbNl0mJmVbMl07cmV0dXJuIFYuQ0hJTEQudGVzdChlWzBdKT9udWxsOihlWzNdP2VbMl09ZVs0XXx8ZVs1XXx8XCJcIjpuJiZYLnRlc3QobikmJih0PWEobiwhMCkpJiYodD1uLmluZGV4T2YoXCIpXCIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UoWixlZSkudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWU/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXR9fSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1FW2UrXCIgXCJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKFwiKF58XCIrTStcIilcIitlK1wiKFwiK00rXCJ8JClcIikpJiZFKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdChcInN0cmluZ1wiPT10eXBlb2YgZS5jbGFzc05hbWUmJmUuY2xhc3NOYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgaT1vZS5hdHRyKHIsZSk7cmV0dXJuIG51bGw9PWk/XCIhPVwiPT09dDohdHx8KGkrPVwiXCIsXCI9XCI9PT10P2k9PT1uOlwiIT1cIj09PXQ/aSE9PW46XCJePVwiPT09dD9uJiYwPT09aS5pbmRleE9mKG4pOlwiKj1cIj09PXQ/biYmaS5pbmRleE9mKG4pPi0xOlwiJD1cIj09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjpcIn49XCI9PT10PyhcIiBcIitpLnJlcGxhY2UoJCxcIiBcIikrXCIgXCIpLmluZGV4T2Yobik+LTE6XCJ8PVwiPT09dCYmKGk9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uK1wiLVwiKSl9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPVwibnRoXCIhPT1lLnNsaWNlKDAsMyksYT1cImxhc3RcIiE9PWUuc2xpY2UoLTQpLHM9XCJvZi10eXBlXCI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLGYscCxkLGgsZz1vIT09YT9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIix5PXQucGFyZW50Tm9kZSx2PXMmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxtPSF1JiYhcyx4PSExO2lmKHkpe2lmKG8pe3doaWxlKGcpe3A9dDt3aGlsZShwPXBbZ10paWYocz9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT12OjE9PT1wLm5vZGVUeXBlKXJldHVybiExO2g9Zz1cIm9ubHlcIj09PWUmJiFoJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYoaD1bYT95LmZpcnN0Q2hpbGQ6eS5sYXN0Q2hpbGRdLGEmJm0pe3g9KGQ9KGw9KGM9KGY9KHA9eSlbYl18fChwW2JdPXt9KSlbcC51bmlxdWVJRF18fChmW3AudW5pcXVlSURdPXt9KSlbZV18fFtdKVswXT09PVQmJmxbMV0pJiZsWzJdLHA9ZCYmeS5jaGlsZE5vZGVzW2RdO3doaWxlKHA9KytkJiZwJiZwW2ddfHwoeD1kPTApfHxoLnBvcCgpKWlmKDE9PT1wLm5vZGVUeXBlJiYrK3gmJnA9PT10KXtjW2VdPVtULGQseF07YnJlYWt9fWVsc2UgaWYobSYmKHg9ZD0obD0oYz0oZj0ocD10KVtiXXx8KHBbYl09e30pKVtwLnVuaXF1ZUlEXXx8KGZbcC51bmlxdWVJRF09e30pKVtlXXx8W10pWzBdPT09VCYmbFsxXSksITE9PT14KXdoaWxlKHA9KytkJiZwJiZwW2ddfHwoeD1kPTApfHxoLnBvcCgpKWlmKChzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXY6MT09PXAubm9kZVR5cGUpJiYrK3gmJihtJiYoKGM9KGY9cFtiXXx8KHBbYl09e30pKVtwLnVuaXF1ZUlEXXx8KGZbcC51bmlxdWVJRF09e30pKVtlXT1bVCx4XSkscD09PXQpKWJyZWFrO3JldHVybih4LT1pKT09PXJ8fHglcj09MCYmeC9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ci5wc2V1ZG9zW2VdfHxyLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8b2UuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2UpO3JldHVybiBpW2JdP2kodCk6aS5sZW5ndGg+MT8obj1bZSxlLFwiXCIsdF0sci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/c2UoZnVuY3Rpb24oZSxuKXt2YXIgcixvPWkoZSx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSllW3I9TyhlLG9bYV0pXT0hKG5bcl09b1thXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gaShlLDAsbil9KTppfX0scHNldWRvczp7bm90OnNlKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShCLFwiJDFcIikpO3JldHVybiByW2JdP3NlKGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLGE9cihlLG51bGwsaSxbXSkscz1lLmxlbmd0aDt3aGlsZShzLS0pKG89YVtzXSkmJihlW3NdPSEodFtzXT1vKSl9KTpmdW5jdGlvbihlLGksbyl7cmV0dXJuIHRbMF09ZSxyKHQsbnVsbCxvLG4pLHRbMF09bnVsbCwhbi5wb3AoKX19KSxoYXM6c2UoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvZShlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOnNlKGZ1bmN0aW9uKGUpe3JldHVybiBlPWUucmVwbGFjZShaLGVlKSxmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fGkodCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzpzZShmdW5jdGlvbihlKXtyZXR1cm4gVS50ZXN0KGV8fFwiXCIpfHxvZS5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2UpLGU9ZS5yZXBsYWNlKFosZWUpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG97aWYobj1nP3QubGFuZzp0LmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHx0LmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuKG49bi50b0xvd2VyQ2FzZSgpKT09PWV8fDA9PT1uLmluZGV4T2YoZStcIi1cIil9d2hpbGUoKHQ9dC5wYXJlbnROb2RlKSYmMT09PXQubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbih0KXt2YXIgbj1lLmxvY2F0aW9uJiZlLmxvY2F0aW9uLmhhc2g7cmV0dXJuIG4mJm4uc2xpY2UoMSk9PT10LmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09aH0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1kLmFjdGl2ZUVsZW1lbnQmJighZC5oYXNGb2N1c3x8ZC5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpkZSghMSksZGlzYWJsZWQ6ZGUoITApLGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PXQmJiEhZS5jaGVja2VkfHxcIm9wdGlvblwiPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hci5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFkudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEcudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT10JiZcImJ1dHRvblwiPT09ZS50eXBlfHxcImJ1dHRvblwiPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm5cImlucHV0XCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT10LnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpoZShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6aGUoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmhlKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bbjwwP24rdDpuXX0pLGV2ZW46aGUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxvZGQ6aGUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpoZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OmhlKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOysrcjx0OyllLnB1c2gocik7cmV0dXJuIGV9KX19KS5wc2V1ZG9zLm50aD1yLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pci5wc2V1ZG9zW3RdPWZlKHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0pci5wc2V1ZG9zW3RdPXBlKHQpO2Z1bmN0aW9uIHllKCl7fXllLnByb3RvdHlwZT1yLmZpbHRlcnM9ci5wc2V1ZG9zLHIuc2V0RmlsdGVycz1uZXcgeWUsYT1vZS50b2tlbml6ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhLHMsdSxsLGM9a1tlK1wiIFwiXTtpZihjKXJldHVybiB0PzA6Yy5zbGljZSgwKTtzPWUsdT1bXSxsPXIucHJlRmlsdGVyO3doaWxlKHMpe24mJiEoaT1GLmV4ZWMocykpfHwoaSYmKHM9cy5zbGljZShpWzBdLmxlbmd0aCl8fHMpLHUucHVzaChvPVtdKSksbj0hMSwoaT1fLmV4ZWMocykpJiYobj1pLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6aVswXS5yZXBsYWNlKEIsXCIgXCIpfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7Zm9yKGEgaW4gci5maWx0ZXIpIShpPVZbYV0uZXhlYyhzKSl8fGxbYV0mJiEoaT1sW2FdKGkpKXx8KG49aS5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmEsbWF0Y2hlczppfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/cy5sZW5ndGg6cz9vZS5lcnJvcihlKTprKGUsdSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHZlKGUpe2Zvcih2YXIgdD0wLG49ZS5sZW5ndGgscj1cIlwiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBtZShlLHQsbil7dmFyIHI9dC5kaXIsaT10Lm5leHQsbz1pfHxyLGE9biYmXCJwYXJlbnROb2RlXCI9PT1vLHM9QysrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixpKXt3aGlsZSh0PXRbcl0paWYoMT09PXQubm9kZVR5cGV8fGEpcmV0dXJuIGUodCxuLGkpO3JldHVybiExfTpmdW5jdGlvbih0LG4sdSl7dmFyIGwsYyxmLHA9W1Qsc107aWYodSl7d2hpbGUodD10W3JdKWlmKCgxPT09dC5ub2RlVHlwZXx8YSkmJmUodCxuLHUpKXJldHVybiEwfWVsc2Ugd2hpbGUodD10W3JdKWlmKDE9PT10Lm5vZGVUeXBlfHxhKWlmKGY9dFtiXXx8KHRbYl09e30pLGM9Zlt0LnVuaXF1ZUlEXXx8KGZbdC51bmlxdWVJRF09e30pLGkmJmk9PT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpdD10W3JdfHx0O2Vsc2V7aWYoKGw9Y1tvXSkmJmxbMF09PT1UJiZsWzFdPT09cylyZXR1cm4gcFsyXT1sWzJdO2lmKGNbb109cCxwWzJdPWUodCxuLHUpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB4ZShlKXtyZXR1cm4gZS5sZW5ndGg+MT9mdW5jdGlvbih0LG4scil7dmFyIGk9ZS5sZW5ndGg7d2hpbGUoaS0tKWlmKCFlW2ldKHQsbixyKSlyZXR1cm4hMTtyZXR1cm4hMH06ZVswXX1mdW5jdGlvbiBiZShlLHQsbil7Zm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKW9lKGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiB3ZShlLHQsbixyLGkpe2Zvcih2YXIgbyxhPVtdLHM9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtzPHU7cysrKShvPWVbc10pJiYobiYmIW4obyxyLGkpfHwoYS5wdXNoKG8pLGwmJnQucHVzaChzKSkpO3JldHVybiBhfWZ1bmN0aW9uIFRlKGUsdCxuLHIsaSxvKXtyZXR1cm4gciYmIXJbYl0mJihyPVRlKHIpKSxpJiYhaVtiXSYmKGk9VGUoaSxvKSksc2UoZnVuY3Rpb24obyxhLHMsdSl7dmFyIGwsYyxmLHA9W10sZD1bXSxoPWEubGVuZ3RoLGc9b3x8YmUodHx8XCIqXCIscy5ub2RlVHlwZT9bc106cyxbXSkseT0hZXx8IW8mJnQ/Zzp3ZShnLHAsZSxzLHUpLHY9bj9pfHwobz9lOmh8fHIpP1tdOmE6eTtpZihuJiZuKHksdixzLHUpLHIpe2w9d2UodixkKSxyKGwsW10scyx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkoZj1sW2NdKSYmKHZbZFtjXV09ISh5W2RbY11dPWYpKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9di5sZW5ndGg7d2hpbGUoYy0tKShmPXZbY10pJiZsLnB1c2goeVtjXT1mKTtpKG51bGwsdj1bXSxsLHUpfWM9di5sZW5ndGg7d2hpbGUoYy0tKShmPXZbY10pJiYobD1pP08obyxmKTpwW2NdKT4tMSYmKG9bbF09IShhW2xdPWYpKX19ZWxzZSB2PXdlKHY9PT1hP3Yuc3BsaWNlKGgsdi5sZW5ndGgpOnYpLGk/aShudWxsLGEsdix1KTpMLmFwcGx5KGEsdil9KX1mdW5jdGlvbiBDZShlKXtmb3IodmFyIHQsbixpLG89ZS5sZW5ndGgsYT1yLnJlbGF0aXZlW2VbMF0udHlwZV0scz1hfHxyLnJlbGF0aXZlW1wiIFwiXSx1PWE/MTowLGM9bWUoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSxzLCEwKSxmPW1lKGZ1bmN0aW9uKGUpe3JldHVybiBPKHQsZSk+LTF9LHMsITApLHA9W2Z1bmN0aW9uKGUsbixyKXt2YXIgaT0hYSYmKHJ8fG4hPT1sKXx8KCh0PW4pLm5vZGVUeXBlP2MoZSxuLHIpOmYoZSxuLHIpKTtyZXR1cm4gdD1udWxsLGl9XTt1PG87dSsrKWlmKG49ci5yZWxhdGl2ZVtlW3VdLnR5cGVdKXA9W21lKHhlKHApLG4pXTtlbHNle2lmKChuPXIuZmlsdGVyW2VbdV0udHlwZV0uYXBwbHkobnVsbCxlW3VdLm1hdGNoZXMpKVtiXSl7Zm9yKGk9Kyt1O2k8bztpKyspaWYoci5yZWxhdGl2ZVtlW2ldLnR5cGVdKWJyZWFrO3JldHVybiBUZSh1PjEmJnhlKHApLHU+MSYmdmUoZS5zbGljZSgwLHUtMSkuY29uY2F0KHt2YWx1ZTpcIiBcIj09PWVbdS0yXS50eXBlP1wiKlwiOlwiXCJ9KSkucmVwbGFjZShCLFwiJDFcIiksbix1PGkmJkNlKGUuc2xpY2UodSxpKSksaTxvJiZDZShlPWUuc2xpY2UoaSkpLGk8byYmdmUoZSkpfXAucHVzaChuKX1yZXR1cm4geGUocCl9ZnVuY3Rpb24gRWUoZSx0KXt2YXIgbj10Lmxlbmd0aD4wLGk9ZS5sZW5ndGg+MCxvPWZ1bmN0aW9uKG8sYSxzLHUsYyl7dmFyIGYsaCx5LHY9MCxtPVwiMFwiLHg9byYmW10sYj1bXSx3PWwsQz1vfHxpJiZyLmZpbmQuVEFHKFwiKlwiLGMpLEU9VCs9bnVsbD09dz8xOk1hdGgucmFuZG9tKCl8fC4xLGs9Qy5sZW5ndGg7Zm9yKGMmJihsPWE9PT1kfHxhfHxjKTttIT09ayYmbnVsbCE9KGY9Q1ttXSk7bSsrKXtpZihpJiZmKXtoPTAsYXx8Zi5vd25lckRvY3VtZW50PT09ZHx8KHAoZikscz0hZyk7d2hpbGUoeT1lW2grK10paWYoeShmLGF8fGQscykpe3UucHVzaChmKTticmVha31jJiYoVD1FKX1uJiYoKGY9IXkmJmYpJiZ2LS0sbyYmeC5wdXNoKGYpKX1pZih2Kz1tLG4mJm0hPT12KXtoPTA7d2hpbGUoeT10W2grK10peSh4LGIsYSxzKTtpZihvKXtpZih2PjApd2hpbGUobS0tKXhbbV18fGJbbV18fChiW21dPWouY2FsbCh1KSk7Yj13ZShiKX1MLmFwcGx5KHUsYiksYyYmIW8mJmIubGVuZ3RoPjAmJnYrdC5sZW5ndGg+MSYmb2UudW5pcXVlU29ydCh1KX1yZXR1cm4gYyYmKFQ9RSxsPXcpLHh9O3JldHVybiBuP3NlKG8pOm99cmV0dXJuIHM9b2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPVNbZStcIiBcIl07aWYoIW8pe3R8fCh0PWEoZSkpLG49dC5sZW5ndGg7d2hpbGUobi0tKShvPUNlKHRbbl0pKVtiXT9yLnB1c2gobyk6aS5wdXNoKG8pOyhvPVMoZSxFZShpLHIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gb30sdT1vZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG8sdSxsLGMsZixwPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUsZD0haSYmYShlPXAuc2VsZWN0b3J8fGUpO2lmKG49bnx8W10sMT09PWQubGVuZ3RoKXtpZigodT1kWzBdPWRbMF0uc2xpY2UoMCkpLmxlbmd0aD4yJiZcIklEXCI9PT0obD11WzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmZyYmci5yZWxhdGl2ZVt1WzFdLnR5cGVdKXtpZighKHQ9KHIuZmluZC5JRChsLm1hdGNoZXNbMF0ucmVwbGFjZShaLGVlKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtwJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1vPVYubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShvLS0pe2lmKGw9dVtvXSxyLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigoZj1yLmZpbmRbY10pJiYoaT1mKGwubWF0Y2hlc1swXS5yZXBsYWNlKFosZWUpLEsudGVzdCh1WzBdLnR5cGUpJiZnZSh0LnBhcmVudE5vZGUpfHx0KSkpe2lmKHUuc3BsaWNlKG8sMSksIShlPWkubGVuZ3RoJiZ2ZSh1KSkpcmV0dXJuIEwuYXBwbHkobixpKSxuO2JyZWFrfX19cmV0dXJuKHB8fHMoZSxkKSkoaSx0LCFnLG4sIXR8fEsudGVzdChlKSYmZ2UodC5wYXJlbnROb2RlKXx8dCksbn0sbi5zb3J0U3RhYmxlPWIuc3BsaXQoXCJcIikuc29ydChEKS5qb2luKFwiXCIpPT09YixuLmRldGVjdER1cGxpY2F0ZXM9ISFmLHAoKSxuLnNvcnREZXRhY2hlZD11ZShmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpKX0pLHVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGxlKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGUsdCxuKXtpZighbilyZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCxcInR5cGVcIj09PXQudG9Mb3dlckNhc2UoKT8xOjIpfSksbi5hdHRyaWJ1dGVzJiZ1ZShmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8bGUoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGUsdCxuKXtpZighbiYmXCJpbnB1dFwiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLHVlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGxlKFAsZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKCFuKXJldHVybiEwPT09ZVt0XT90LnRvTG93ZXJDYXNlKCk6KHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmci5zcGVjaWZpZWQ/ci52YWx1ZTpudWxsfSksb2V9KGUpO3cuZmluZD1FLHcuZXhwcj1FLnNlbGVjdG9ycyx3LmV4cHJbXCI6XCJdPXcuZXhwci5wc2V1ZG9zLHcudW5pcXVlU29ydD13LnVuaXF1ZT1FLnVuaXF1ZVNvcnQsdy50ZXh0PUUuZ2V0VGV4dCx3LmlzWE1MRG9jPUUuaXNYTUwsdy5jb250YWlucz1FLmNvbnRhaW5zLHcuZXNjYXBlU2VsZWN0b3I9RS5lc2NhcGU7dmFyIGs9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVtdLGk9dm9pZCAwIT09bjt3aGlsZSgoZT1lW3RdKSYmOSE9PWUubm9kZVR5cGUpaWYoMT09PWUubm9kZVR5cGUpe2lmKGkmJncoZSkuaXMobikpYnJlYWs7ci5wdXNoKGUpfXJldHVybiByfSxTPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdO2U7ZT1lLm5leHRTaWJsaW5nKTE9PT1lLm5vZGVUeXBlJiZlIT09dCYmbi5wdXNoKGUpO3JldHVybiBufSxEPXcuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7ZnVuY3Rpb24gTihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9dmFyIEE9L148KFthLXpdW15cXC9cXDA+OlxceDIwXFx0XFxyXFxuXFxmXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXC8/Pig/OjxcXC9cXDE+fCkkL2k7ZnVuY3Rpb24gaihlLHQsbil7cmV0dXJuIGcodCk/dy5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4hIXQuY2FsbChlLHIsZSkhPT1ufSk6dC5ub2RlVHlwZT93LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQhPT1ufSk6XCJzdHJpbmdcIiE9dHlwZW9mIHQ/dy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHUuY2FsbCh0LGUpPi0xIT09bn0pOncuZmlsdGVyKHQsZSxuKX13LmZpbHRlcj1mdW5jdGlvbihlLHQsbil7dmFyIHI9dFswXTtyZXR1cm4gbiYmKGU9XCI6bm90KFwiK2UrXCIpXCIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/dy5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTp3LmZpbmQubWF0Y2hlcyhlLHcuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sdy5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMubGVuZ3RoLGk9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyhlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3Q8cjt0KyspaWYody5jb250YWlucyhpW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPXRoaXMucHVzaFN0YWNrKFtdKSx0PTA7dDxyO3QrKyl3LmZpbmQoZSxpW3RdLG4pO3JldHVybiByPjE/dy51bmlxdWVTb3J0KG4pOm59LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhaih0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZELnRlc3QoZSk/dyhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBxLEw9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC87KHcuZm4uaW5pdD1mdW5jdGlvbihlLHQsbil7dmFyIGksbztpZighZSlyZXR1cm4gdGhpcztpZihuPW58fHEsXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKCEoaT1cIjxcIj09PWVbMF0mJlwiPlwiPT09ZVtlLmxlbmd0aC0xXSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpMLmV4ZWMoZSkpfHwhaVsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fG4pLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKGlbMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIHc/dFswXTp0LHcubWVyZ2UodGhpcyx3LnBhcnNlSFRNTChpWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OnIsITApKSxBLnRlc3QoaVsxXSkmJncuaXNQbGFpbk9iamVjdCh0KSlmb3IoaSBpbiB0KWcodGhpc1tpXSk/dGhpc1tpXSh0W2ldKTp0aGlzLmF0dHIoaSx0W2ldKTtyZXR1cm4gdGhpc31yZXR1cm4obz1yLmdldEVsZW1lbnRCeUlkKGlbMl0pKSYmKHRoaXNbMF09byx0aGlzLmxlbmd0aD0xKSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTpnKGUpP3ZvaWQgMCE9PW4ucmVhZHk/bi5yZWFkeShlKTplKHcpOncubWFrZUFycmF5KGUsdGhpcyl9KS5wcm90b3R5cGU9dy5mbixxPXcocik7dmFyIEg9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sTz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt3LmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGUpe3ZhciB0PXcoZSx0aGlzKSxuPXQubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8bjtlKyspaWYody5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9XCJzdHJpbmdcIiE9dHlwZW9mIGUmJncoZSk7aWYoIUQudGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT9hLmluZGV4KG4pPi0xOjE9PT1uLm5vZGVUeXBlJiZ3LmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubGVuZ3RoPjE/dy51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT9cInN0cmluZ1wiPT10eXBlb2YgZT91LmNhbGwodyhlKSx0aGlzWzBdKTp1LmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcudW5pcXVlU29ydCh3Lm1lcmdlKHRoaXMuZ2V0KCksdyhlLHQpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KTtmdW5jdGlvbiBQKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX13LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGsoZSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGsoZSxcInBhcmVudE5vZGVcIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gUChlLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIFAoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gayhlLFwibmV4dFNpYmxpbmdcIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGsoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gayhlLFwibmV4dFNpYmxpbmdcIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gayhlLFwicHJldmlvdXNTaWJsaW5nXCIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBTKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gUyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gTihlLFwiaWZyYW1lXCIpP2UuY29udGVudERvY3VtZW50OihOKGUsXCJ0ZW1wbGF0ZVwiKSYmKGU9ZS5jb250ZW50fHxlKSx3Lm1lcmdlKFtdLGUuY2hpbGROb2RlcykpfX0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9dy5tYXAodGhpcyx0LG4pO3JldHVyblwiVW50aWxcIiE9PWUuc2xpY2UoLTUpJiYocj1uKSxyJiZcInN0cmluZ1wiPT10eXBlb2YgciYmKGk9dy5maWx0ZXIocixpKSksdGhpcy5sZW5ndGg+MSYmKE9bZV18fHcudW5pcXVlU29ydChpKSxILnRlc3QoZSkmJmkucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhpKX19KTt2YXIgTT0vW15cXHgyMFxcdFxcclxcblxcZl0rL2c7ZnVuY3Rpb24gUihlKXt2YXIgdD17fTtyZXR1cm4gdy5lYWNoKGUubWF0Y2goTSl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9dy5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT1cInN0cmluZ1wiPT10eXBlb2YgZT9SKGUpOncuZXh0ZW5kKHt9LGUpO3ZhciB0LG4scixpLG89W10sYT1bXSxzPS0xLHU9ZnVuY3Rpb24oKXtmb3IoaT1pfHxlLm9uY2Uscj10PSEwO2EubGVuZ3RoO3M9LTEpe249YS5zaGlmdCgpO3doaWxlKCsrczxvLmxlbmd0aCkhMT09PW9bc10uYXBwbHkoblswXSxuWzFdKSYmZS5zdG9wT25GYWxzZSYmKHM9by5sZW5ndGgsbj0hMSl9ZS5tZW1vcnl8fChuPSExKSx0PSExLGkmJihvPW4/W106XCJcIil9LGw9e2FkZDpmdW5jdGlvbigpe3JldHVybiBvJiYobiYmIXQmJihzPW8ubGVuZ3RoLTEsYS5wdXNoKG4pKSxmdW5jdGlvbiB0KG4pe3cuZWFjaChuLGZ1bmN0aW9uKG4scil7ZyhyKT9lLnVuaXF1ZSYmbC5oYXMocil8fG8ucHVzaChyKTpyJiZyLmxlbmd0aCYmXCJzdHJpbmdcIiE9PXgocikmJnQocil9KX0oYXJndW1lbnRzKSxuJiYhdCYmdSgpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXcuaW5BcnJheSh0LG8sbikpPi0xKW8uc3BsaWNlKG4sMSksbjw9cyYmcy0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3cuaW5BcnJheShlLG8pPi0xOm8ubGVuZ3RoPjB9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIG8mJihvPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGk9YT1bXSxvPW49XCJcIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFvfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9YT1bXSxufHx0fHwobz1uPVwiXCIpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhaX0sZmlyZVdpdGg6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gaXx8KG49W2UsKG49bnx8W10pLnNsaWNlP24uc2xpY2UoKTpuXSxhLnB1c2gobiksdHx8dSgpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFyfX07cmV0dXJuIGx9O2Z1bmN0aW9uIEkoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gVyhlKXt0aHJvdyBlfWZ1bmN0aW9uICQoZSx0LG4scil7dmFyIGk7dHJ5e2UmJmcoaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmZyhpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fXcuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbih0KXt2YXIgbj1bW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLHcuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLHcuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLDJdLFtcInJlc29sdmVcIixcImRvbmVcIix3LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHcuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksMCxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLHcuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksdy5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwxLFwicmVqZWN0ZWRcIl1dLHI9XCJwZW5kaW5nXCIsaT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIG8uZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSxcImNhdGNoXCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiB3LkRlZmVycmVkKGZ1bmN0aW9uKHQpe3cuZWFjaChuLGZ1bmN0aW9uKG4scil7dmFyIGk9ZyhlW3JbNF1dKSYmZVtyWzRdXTtvW3JbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9aSYmaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmZyhlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHQubm90aWZ5KS5kb25lKHQucmVzb2x2ZSkuZmFpbCh0LnJlamVjdCk6dFtyWzBdK1wiV2l0aFwiXSh0aGlzLGk/W2VdOmFyZ3VtZW50cyl9KX0pLGU9bnVsbH0pLnByb21pc2UoKX0sdGhlbjpmdW5jdGlvbih0LHIsaSl7dmFyIG89MDtmdW5jdGlvbiBhKHQsbixyLGkpe3JldHVybiBmdW5jdGlvbigpe3ZhciBzPXRoaXMsdT1hcmd1bWVudHMsbD1mdW5jdGlvbigpe3ZhciBlLGw7aWYoISh0PG8pKXtpZigoZT1yLmFwcGx5KHMsdSkpPT09bi5wcm9taXNlKCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvblwiKTtsPWUmJihcIm9iamVjdFwiPT10eXBlb2YgZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZSkmJmUudGhlbixnKGwpP2k/bC5jYWxsKGUsYShvLG4sSSxpKSxhKG8sbixXLGkpKToobysrLGwuY2FsbChlLGEobyxuLEksaSksYShvLG4sVyxpKSxhKG8sbixJLG4ubm90aWZ5V2l0aCkpKToociE9PUkmJihzPXZvaWQgMCx1PVtlXSksKGl8fG4ucmVzb2x2ZVdpdGgpKHMsdSkpfX0sYz1pP2w6ZnVuY3Rpb24oKXt0cnl7bCgpfWNhdGNoKGUpe3cuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayYmdy5EZWZlcnJlZC5leGNlcHRpb25Ib29rKGUsYy5zdGFja1RyYWNlKSx0KzE+PW8mJihyIT09VyYmKHM9dm9pZCAwLHU9W2VdKSxuLnJlamVjdFdpdGgocyx1KSl9fTt0P2MoKToody5EZWZlcnJlZC5nZXRTdGFja0hvb2smJihjLnN0YWNrVHJhY2U9dy5EZWZlcnJlZC5nZXRTdGFja0hvb2soKSksZS5zZXRUaW1lb3V0KGMpKX19cmV0dXJuIHcuRGVmZXJyZWQoZnVuY3Rpb24oZSl7blswXVszXS5hZGQoYSgwLGUsZyhpKT9pOkksZS5ub3RpZnlXaXRoKSksblsxXVszXS5hZGQoYSgwLGUsZyh0KT90OkkpKSxuWzJdWzNdLmFkZChhKDAsZSxnKHIpP3I6VykpfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3cuZXh0ZW5kKGUsaSk6aX19LG89e307cmV0dXJuIHcuZWFjaChuLGZ1bmN0aW9uKGUsdCl7dmFyIGE9dFsyXSxzPXRbNV07aVt0WzFdXT1hLmFkZCxzJiZhLmFkZChmdW5jdGlvbigpe3I9c30sblszLWVdWzJdLmRpc2FibGUsblszLWVdWzNdLmRpc2FibGUsblswXVsyXS5sb2NrLG5bMF1bM10ubG9jayksYS5hZGQodFszXS5maXJlKSxvW3RbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIG9bdFswXStcIldpdGhcIl0odGhpcz09PW8/dm9pZCAwOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxvW3RbMF0rXCJXaXRoXCJdPWEuZmlyZVdpdGh9KSxpLnByb21pc2UobyksdCYmdC5jYWxsKG8sbyksb30sd2hlbjpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49dCxyPUFycmF5KG4pLGk9by5jYWxsKGFyZ3VtZW50cyksYT13LkRlZmVycmVkKCkscz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24obil7cltlXT10aGlzLGlbZV09YXJndW1lbnRzLmxlbmd0aD4xP28uY2FsbChhcmd1bWVudHMpOm4sLS10fHxhLnJlc29sdmVXaXRoKHIsaSl9fTtpZih0PD0xJiYoJChlLGEuZG9uZShzKG4pKS5yZXNvbHZlLGEucmVqZWN0LCF0KSxcInBlbmRpbmdcIj09PWEuc3RhdGUoKXx8ZyhpW25dJiZpW25dLnRoZW4pKSlyZXR1cm4gYS50aGVuKCk7d2hpbGUobi0tKSQoaVtuXSxzKG4pLGEucmVqZWN0KTtyZXR1cm4gYS5wcm9taXNlKCl9fSk7dmFyIEI9L14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87dy5EZWZlcnJlZC5leGNlcHRpb25Ib29rPWZ1bmN0aW9uKHQsbil7ZS5jb25zb2xlJiZlLmNvbnNvbGUud2FybiYmdCYmQi50ZXN0KHQubmFtZSkmJmUuY29uc29sZS53YXJuKFwialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogXCIrdC5tZXNzYWdlLHQuc3RhY2ssbil9LHcucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24odCl7ZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgdH0pfTt2YXIgRj13LkRlZmVycmVkKCk7dy5mbi5yZWFkeT1mdW5jdGlvbihlKXtyZXR1cm4gRi50aGVuKGUpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oZSl7dy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LHcuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS13LnJlYWR5V2FpdDp3LmlzUmVhZHkpfHwody5pc1JlYWR5PSEwLCEwIT09ZSYmLS13LnJlYWR5V2FpdD4wfHxGLnJlc29sdmVXaXRoKHIsW3ddKSl9fSksdy5yZWFkeS50aGVuPUYudGhlbjtmdW5jdGlvbiBfKCl7ci5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLF8pLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixfKSx3LnJlYWR5KCl9XCJjb21wbGV0ZVwiPT09ci5yZWFkeVN0YXRlfHxcImxvYWRpbmdcIiE9PXIucmVhZHlTdGF0ZSYmIXIuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Uuc2V0VGltZW91dCh3LnJlYWR5KTooci5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLF8pLGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixfKSk7dmFyIHo9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZihcIm9iamVjdFwiPT09eChuKSl7aT0hMDtmb3IocyBpbiBuKXooZSx0LHMsbltzXSwhMCxvLGEpfWVsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsZyhyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbCh3KGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LFg9L14tbXMtLyxVPS8tKFthLXpdKS9nO2Z1bmN0aW9uIFYoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIEcoZSl7cmV0dXJuIGUucmVwbGFjZShYLFwibXMtXCIpLnJlcGxhY2UoVSxWKX12YXIgWT1mdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlfHwhK2Uubm9kZVR5cGV9O2Z1bmN0aW9uIFEoKXt0aGlzLmV4cGFuZG89dy5leHBhbmRvK1EudWlkKyt9US51aWQ9MSxRLnByb3RvdHlwZT17Y2FjaGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLmV4cGFuZG9dO3JldHVybiB0fHwodD17fSxZKGUpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dDpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLmV4cGFuZG8se3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwfSkpKSx0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9dGhpcy5jYWNoZShlKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClpW0codCldPW47ZWxzZSBmb3IociBpbiB0KWlbRyhyKV09dFtyXTtyZXR1cm4gaX0sZ2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5jYWNoZShlKTplW3RoaXMuZXhwYW5kb10mJmVbdGhpcy5leHBhbmRvXVtHKHQpXX0sYWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dHx8dCYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJnZvaWQgMD09PW4/dGhpcy5nZXQoZSx0KToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09cil7aWYodm9pZCAwIT09dCl7bj0odD1BcnJheS5pc0FycmF5KHQpP3QubWFwKEcpOih0PUcodCkpaW4gcj9bdF06dC5tYXRjaChNKXx8W10pLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIHJbdFtuXV19KHZvaWQgMD09PXR8fHcuaXNFbXB0eU9iamVjdChyKSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGVbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09dCYmIXcuaXNFbXB0eU9iamVjdCh0KX19O3ZhciBKPW5ldyBRLEs9bmV3IFEsWj0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sZWU9L1tBLVpdL2c7ZnVuY3Rpb24gdGUoZSl7cmV0dXJuXCJ0cnVlXCI9PT1lfHxcImZhbHNlXCIhPT1lJiYoXCJudWxsXCI9PT1lP251bGw6ZT09PStlK1wiXCI/K2U6Wi50ZXN0KGUpP0pTT04ucGFyc2UoZSk6ZSl9ZnVuY3Rpb24gbmUoZSx0LG4pe3ZhciByO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9XCJkYXRhLVwiK3QucmVwbGFjZShlZSxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLFwic3RyaW5nXCI9PXR5cGVvZihuPWUuZ2V0QXR0cmlidXRlKHIpKSl7dHJ5e249dGUobil9Y2F0Y2goZSl7fUsuc2V0KGUsdCxuKX1lbHNlIG49dm9pZCAwO3JldHVybiBufXcuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBLLmhhc0RhdGEoZSl8fEouaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEsuYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0sucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gSi5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0oucmVtb3ZlKGUsdCl9fSksdy5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzWzBdLGE9byYmby5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWUpe2lmKHRoaXMubGVuZ3RoJiYoaT1LLmdldChvKSwxPT09by5ub2RlVHlwZSYmIUouZ2V0KG8sXCJoYXNEYXRhQXR0cnNcIikpKXtuPWEubGVuZ3RoO3doaWxlKG4tLSlhW25dJiYwPT09KHI9YVtuXS5uYW1lKS5pbmRleE9mKFwiZGF0YS1cIikmJihyPUcoci5zbGljZSg1KSksbmUobyxyLGlbcl0pKTtKLnNldChvLFwiaGFzRGF0YUF0dHJzXCIsITApfXJldHVybiBpfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0suc2V0KHRoaXMsZSl9KTp6KHRoaXMsZnVuY3Rpb24odCl7dmFyIG47aWYobyYmdm9pZCAwPT09dCl7aWYodm9pZCAwIT09KG49Sy5nZXQobyxlKSkpcmV0dXJuIG47aWYodm9pZCAwIT09KG49bmUobyxlKSkpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXtLLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Sy5yZW1vdmUodGhpcyxlKX0pfX0pLHcuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoZSlyZXR1cm4gdD0odHx8XCJmeFwiKStcInF1ZXVlXCIscj1KLmdldChlLHQpLG4mJighcnx8QXJyYXkuaXNBcnJheShuKT9yPUouYWNjZXNzKGUsdCx3Lm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8XCJmeFwiO3ZhciBuPXcucXVldWUoZSx0KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89dy5fcXVldWVIb29rcyhlLHQpLGE9ZnVuY3Rpb24oKXt3LmRlcXVldWUoZSx0KX07XCJpbnByb2dyZXNzXCI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoXCJmeFwiPT09dCYmbi51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgby5zdG9wLGkuY2FsbChlLGEsbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10K1wicXVldWVIb29rc1wiO3JldHVybiBKLmdldChlLG4pfHxKLmFjY2VzcyhlLG4se2VtcHR5OncuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7Si5yZW1vdmUoZSxbdCtcInF1ZXVlXCIsbl0pfSl9KX19KSx3LmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlJiYodD1lLGU9XCJmeFwiLG4tLSksYXJndW1lbnRzLmxlbmd0aDxuP3cucXVldWUodGhpc1swXSxlKTp2b2lkIDA9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dy5xdWV1ZSh0aGlzLGUsdCk7dy5fcXVldWVIb29rcyh0aGlzLGUpLFwiZnhcIj09PWUmJlwiaW5wcm9ncmVzc1wiIT09blswXSYmdy5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dy5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9dy5EZWZlcnJlZCgpLG89dGhpcyxhPXRoaXMubGVuZ3RoLHM9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTtcInN0cmluZ1wiIT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksZT1lfHxcImZ4XCI7d2hpbGUoYS0tKShuPUouZ2V0KG9bYV0sZStcInF1ZXVlSG9va3NcIikpJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKHMpKTtyZXR1cm4gcygpLGkucHJvbWlzZSh0KX19KTt2YXIgcmU9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLGllPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK3JlK1wiKShbYS16JV0qKSRcIixcImlcIiksb2U9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGFlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJub25lXCI9PT0oZT10fHxlKS5zdHlsZS5kaXNwbGF5fHxcIlwiPT09ZS5zdHlsZS5kaXNwbGF5JiZ3LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSYmXCJub25lXCI9PT13LmNzcyhlLFwiZGlzcGxheVwiKX0sc2U9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhPXt9O2ZvcihvIGluIHQpYVtvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPWFbb107cmV0dXJuIGl9O2Z1bmN0aW9uIHVlKGUsdCxuLHIpe3ZhciBpLG8sYT0yMCxzPXI/ZnVuY3Rpb24oKXtyZXR1cm4gci5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gdy5jc3MoZSx0LFwiXCIpfSx1PXMoKSxsPW4mJm5bM118fCh3LmNzc051bWJlclt0XT9cIlwiOlwicHhcIiksYz0ody5jc3NOdW1iZXJbdF18fFwicHhcIiE9PWwmJit1KSYmaWUuZXhlYyh3LmNzcyhlLHQpKTtpZihjJiZjWzNdIT09bCl7dS89MixsPWx8fGNbM10sYz0rdXx8MTt3aGlsZShhLS0pdy5zdHlsZShlLHQsYytsKSwoMS1vKSooMS0obz1zKCkvdXx8LjUpKTw9MCYmKGE9MCksYy89bztjKj0yLHcuc3R5bGUoZSx0LGMrbCksbj1ufHxbXX1yZXR1cm4gbiYmKGM9K2N8fCt1fHwwLGk9blsxXT9jKyhuWzFdKzEpKm5bMl06K25bMl0sciYmKHIudW5pdD1sLHIuc3RhcnQ9YyxyLmVuZD1pKSksaX12YXIgbGU9e307ZnVuY3Rpb24gY2UoZSl7dmFyIHQsbj1lLm93bmVyRG9jdW1lbnQscj1lLm5vZGVOYW1lLGk9bGVbcl07cmV0dXJuIGl8fCh0PW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQocikpLGk9dy5jc3ModCxcImRpc3BsYXlcIiksdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLFwibm9uZVwiPT09aSYmKGk9XCJibG9ja1wiKSxsZVtyXT1pLGkpfWZ1bmN0aW9uIGZlKGUsdCl7Zm9yKHZhciBuLHIsaT1bXSxvPTAsYT1lLmxlbmd0aDtvPGE7bysrKShyPWVbb10pLnN0eWxlJiYobj1yLnN0eWxlLmRpc3BsYXksdD8oXCJub25lXCI9PT1uJiYoaVtvXT1KLmdldChyLFwiZGlzcGxheVwiKXx8bnVsbCxpW29dfHwoci5zdHlsZS5kaXNwbGF5PVwiXCIpKSxcIlwiPT09ci5zdHlsZS5kaXNwbGF5JiZhZShyKSYmKGlbb109Y2UocikpKTpcIm5vbmVcIiE9PW4mJihpW29dPVwibm9uZVwiLEouc2V0KHIsXCJkaXNwbGF5XCIsbikpKTtmb3Iobz0wO288YTtvKyspbnVsbCE9aVtvXSYmKGVbb10uc3R5bGUuZGlzcGxheT1pW29dKTtyZXR1cm4gZX13LmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZT9lP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe2FlKHRoaXMpP3codGhpcykuc2hvdygpOncodGhpcykuaGlkZSgpfSl9fSk7dmFyIHBlPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLGRlPS88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKykvaSxoZT0vXiR8Xm1vZHVsZSR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdlPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07Z2Uub3B0Z3JvdXA9Z2Uub3B0aW9uLGdlLnRib2R5PWdlLnRmb290PWdlLmNvbGdyb3VwPWdlLmNhcHRpb249Z2UudGhlYWQsZ2UudGg9Z2UudGQ7ZnVuY3Rpb24geWUoZSx0KXt2YXIgbjtyZXR1cm4gbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKHR8fFwiKlwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsP2UucXVlcnlTZWxlY3RvckFsbCh0fHxcIipcIik6W10sdm9pZCAwPT09dHx8dCYmTihlLHQpP3cubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24gdmUoZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspSi5zZXQoZVtuXSxcImdsb2JhbEV2YWxcIiwhdHx8Si5nZXQodFtuXSxcImdsb2JhbEV2YWxcIikpfXZhciBtZT0vPHwmIz9cXHcrOy87ZnVuY3Rpb24geGUoZSx0LG4scixpKXtmb3IodmFyIG8sYSxzLHUsbCxjLGY9dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscD1bXSxkPTAsaD1lLmxlbmd0aDtkPGg7ZCsrKWlmKChvPWVbZF0pfHwwPT09bylpZihcIm9iamVjdFwiPT09eChvKSl3Lm1lcmdlKHAsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZihtZS50ZXN0KG8pKXthPWF8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxzPShkZS5leGVjKG8pfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSx1PWdlW3NdfHxnZS5fZGVmYXVsdCxhLmlubmVySFRNTD11WzFdK3cuaHRtbFByZWZpbHRlcihvKSt1WzJdLGM9dVswXTt3aGlsZShjLS0pYT1hLmxhc3RDaGlsZDt3Lm1lcmdlKHAsYS5jaGlsZE5vZGVzKSwoYT1mLmZpcnN0Q2hpbGQpLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD1cIlwiLGQ9MDt3aGlsZShvPXBbZCsrXSlpZihyJiZ3LmluQXJyYXkobyxyKT4tMSlpJiZpLnB1c2gobyk7ZWxzZSBpZihsPXcuY29udGFpbnMoby5vd25lckRvY3VtZW50LG8pLGE9eWUoZi5hcHBlbmRDaGlsZChvKSxcInNjcmlwdFwiKSxsJiZ2ZShhKSxuKXtjPTA7d2hpbGUobz1hW2MrK10paGUudGVzdChvLnR5cGV8fFwiXCIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9IWZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkuYXBwZW5kQ2hpbGQoci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSx0PXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO3Quc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksdC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLHQuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwidFwiKSxlLmFwcGVuZENoaWxkKHQpLGguY2hlY2tDbG9uZT1lLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxlLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixoLm5vQ2xvbmVDaGVja2VkPSEhZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIGJlPXIuZG9jdW1lbnRFbGVtZW50LHdlPS9ea2V5LyxUZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sQ2U9L14oW14uXSopKD86XFwuKC4rKXwpLztmdW5jdGlvbiBFZSgpe3JldHVybiEwfWZ1bmN0aW9uIGtlKCl7cmV0dXJuITF9ZnVuY3Rpb24gU2UoKXt0cnl7cmV0dXJuIHIuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fWZ1bmN0aW9uIERlKGUsdCxuLHIsaSxvKXt2YXIgYSxzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtcInN0cmluZ1wiIT10eXBlb2YgbiYmKHI9cnx8bixuPXZvaWQgMCk7Zm9yKHMgaW4gdClEZShlLHMsbixyLHRbc10sbyk7cmV0dXJuIGV9aWYobnVsbD09ciYmbnVsbD09aT8oaT1uLHI9bj12b2lkIDApOm51bGw9PWkmJihcInN0cmluZ1wiPT10eXBlb2Ygbj8oaT1yLHI9dm9pZCAwKTooaT1yLHI9bixuPXZvaWQgMCkpLCExPT09aSlpPWtlO2Vsc2UgaWYoIWkpcmV0dXJuIGU7cmV0dXJuIDE9PT1vJiYoYT1pLChpPWZ1bmN0aW9uKGUpe3JldHVybiB3KCkub2ZmKGUpLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkuZ3VpZD1hLmd1aWR8fChhLmd1aWQ9dy5ndWlkKyspKSxlLmVhY2goZnVuY3Rpb24oKXt3LmV2ZW50LmFkZCh0aGlzLHQsaSxyLG4pfSl9dy5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1LGwsYyxmLHAsZCxoLGcseT1KLmdldChlKTtpZih5KXtuLmhhbmRsZXImJihuPShvPW4pLmhhbmRsZXIsaT1vLnNlbGVjdG9yKSxpJiZ3LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGJlLGkpLG4uZ3VpZHx8KG4uZ3VpZD13Lmd1aWQrKyksKHU9eS5ldmVudHMpfHwodT15LmV2ZW50cz17fSksKGE9eS5oYW5kbGUpfHwoYT15LmhhbmRsZT1mdW5jdGlvbih0KXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgdyYmdy5ldmVudC50cmlnZ2VyZWQhPT10LnR5cGU/dy5ldmVudC5kaXNwYXRjaC5hcHBseShlLGFyZ3VtZW50cyk6dm9pZCAwfSksbD0odD0odHx8XCJcIikubWF0Y2goTSl8fFtcIlwiXSkubGVuZ3RoO3doaWxlKGwtLSlkPWc9KHM9Q2UuZXhlYyh0W2xdKXx8W10pWzFdLGg9KHNbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksZCYmKGY9dy5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShpP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkLGY9dy5ldmVudC5zcGVjaWFsW2RdfHx7fSxjPXcuZXh0ZW5kKHt0eXBlOmQsb3JpZ1R5cGU6ZyxkYXRhOnIsaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOmksbmVlZHNDb250ZXh0OmkmJncuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChpKSxuYW1lc3BhY2U6aC5qb2luKFwiLlwiKX0sbyksKHA9dVtkXSl8fCgocD11W2RdPVtdKS5kZWxlZ2F0ZUNvdW50PTAsZi5zZXR1cCYmITEhPT1mLnNldHVwLmNhbGwoZSxyLGgsYSl8fGUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKGQsYSkpLGYuYWRkJiYoZi5hZGQuY2FsbChlLGMpLGMuaGFuZGxlci5ndWlkfHwoYy5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksaT9wLnNwbGljZShwLmRlbGVnYXRlQ291bnQrKywwLGMpOnAucHVzaChjKSx3LmV2ZW50Lmdsb2JhbFtkXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHk9Si5oYXNEYXRhKGUpJiZKLmdldChlKTtpZih5JiYodT15LmV2ZW50cykpe2w9KHQ9KHR8fFwiXCIpLm1hdGNoKE0pfHxbXCJcIl0pLmxlbmd0aDt3aGlsZShsLS0paWYocz1DZS5leGVjKHRbbF0pfHxbXSxkPWc9c1sxXSxoPShzWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLGQpe2Y9dy5ldmVudC5zcGVjaWFsW2RdfHx7fSxwPXVbZD0ocj9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZF18fFtdLHM9c1syXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK2guam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGE9bz1wLmxlbmd0aDt3aGlsZShvLS0pYz1wW29dLCFpJiZnIT09Yy5vcmlnVHlwZXx8biYmbi5ndWlkIT09Yy5ndWlkfHxzJiYhcy50ZXN0KGMubmFtZXNwYWNlKXx8ciYmciE9PWMuc2VsZWN0b3ImJihcIioqXCIhPT1yfHwhYy5zZWxlY3Rvcil8fChwLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJnAuZGVsZWdhdGVDb3VudC0tLGYucmVtb3ZlJiZmLnJlbW92ZS5jYWxsKGUsYykpO2EmJiFwLmxlbmd0aCYmKGYudGVhcmRvd24mJiExIT09Zi50ZWFyZG93bi5jYWxsKGUsaCx5LmhhbmRsZSl8fHcucmVtb3ZlRXZlbnQoZSxkLHkuaGFuZGxlKSxkZWxldGUgdVtkXSl9ZWxzZSBmb3IoZCBpbiB1KXcuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7dy5pc0VtcHR5T2JqZWN0KHUpJiZKLnJlbW92ZShlLFwiaGFuZGxlIGV2ZW50c1wiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZhciB0PXcuZXZlbnQuZml4KGUpLG4scixpLG8sYSxzLHU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGw9KEouZ2V0KHRoaXMsXCJldmVudHNcIil8fHt9KVt0LnR5cGVdfHxbXSxjPXcuZXZlbnQuc3BlY2lhbFt0LnR5cGVdfHx7fTtmb3IodVswXT10LG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXVbbl09YXJndW1lbnRzW25dO2lmKHQuZGVsZWdhdGVUYXJnZXQ9dGhpcywhYy5wcmVEaXNwYXRjaHx8ITEhPT1jLnByZURpc3BhdGNoLmNhbGwodGhpcyx0KSl7cz13LmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyx0LGwpLG49MDt3aGlsZSgobz1zW24rK10pJiYhdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXt0LmN1cnJlbnRUYXJnZXQ9by5lbGVtLHI9MDt3aGlsZSgoYT1vLmhhbmRsZXJzW3IrK10pJiYhdC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXQucm5hbWVzcGFjZSYmIXQucm5hbWVzcGFjZS50ZXN0KGEubmFtZXNwYWNlKXx8KHQuaGFuZGxlT2JqPWEsdC5kYXRhPWEuZGF0YSx2b2lkIDAhPT0oaT0oKHcuZXZlbnQuc3BlY2lhbFthLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8YS5oYW5kbGVyKS5hcHBseShvLmVsZW0sdSkpJiYhMT09PSh0LnJlc3VsdD1pKSYmKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGMucG9zdERpc3BhdGNoJiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsdCksdC5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGEscz1bXSx1PXQuZGVsZWdhdGVDb3VudCxsPWUudGFyZ2V0O2lmKHUmJmwubm9kZVR5cGUmJiEoXCJjbGlja1wiPT09ZS50eXBlJiZlLmJ1dHRvbj49MSkpZm9yKDtsIT09dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKFwiY2xpY2tcIiE9PWUudHlwZXx8ITAhPT1sLmRpc2FibGVkKSl7Zm9yKG89W10sYT17fSxuPTA7bjx1O24rKyl2b2lkIDA9PT1hW2k9KHI9dFtuXSkuc2VsZWN0b3IrXCIgXCJdJiYoYVtpXT1yLm5lZWRzQ29udGV4dD93KGksdGhpcykuaW5kZXgobCk+LTE6dy5maW5kKGksdGhpcyxudWxsLFtsXSkubGVuZ3RoKSxhW2ldJiZvLnB1c2gocik7by5sZW5ndGgmJnMucHVzaCh7ZWxlbTpsLGhhbmRsZXJzOm99KX1yZXR1cm4gbD10aGlzLHU8dC5sZW5ndGgmJnMucHVzaCh7ZWxlbTpsLGhhbmRsZXJzOnQuc2xpY2UodSl9KSxzfSxhZGRQcm9wOmZ1bmN0aW9uKGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHcuRXZlbnQucHJvdG90eXBlLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpnKHQpP2Z1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiB0KHRoaXMub3JpZ2luYWxFdmVudCl9OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnRbZV19LHNldDpmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSl9fSl9LGZpeDpmdW5jdGlvbihlKXtyZXR1cm4gZVt3LmV4cGFuZG9dP2U6bmV3IHcuRXZlbnQoZSl9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1TZSgpJiZ0aGlzLmZvY3VzKXJldHVybiB0aGlzLmZvY3VzKCksITF9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT1TZSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKFwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmTih0aGlzLFwiaW5wdXRcIikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIE4oZS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5yZXN1bHQmJmUub3JpZ2luYWxFdmVudCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX19LHcucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LHcuRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiB3LkV2ZW50KSlyZXR1cm4gbmV3IHcuRXZlbnQoZSx0KTtlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJiExPT09ZS5yZXR1cm5WYWx1ZT9FZTprZSx0aGlzLnRhcmdldD1lLnRhcmdldCYmMz09PWUudGFyZ2V0Lm5vZGVUeXBlP2UudGFyZ2V0LnBhcmVudE5vZGU6ZS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWUuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9ZSx0JiZ3LmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxEYXRlLm5vdygpLHRoaXNbdy5leHBhbmRvXT0hMH0sdy5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOncuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmtlLGlzUHJvcGFnYXRpb25TdG9wcGVkOmtlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmtlLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPUVlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPUVlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1FZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sdy5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLFwiY2hhclwiOiEwLGNoYXJDb2RlOiEwLGtleTohMCxrZXlDb2RlOiEwLGJ1dHRvbjohMCxidXR0b25zOiEwLGNsaWVudFg6ITAsY2xpZW50WTohMCxvZmZzZXRYOiEwLG9mZnNldFk6ITAscG9pbnRlcklkOiEwLHBvaW50ZXJUeXBlOiEwLHNjcmVlblg6ITAsc2NyZWVuWTohMCx0YXJnZXRUb3VjaGVzOiEwLHRvRWxlbWVudDohMCx0b3VjaGVzOiEwLHdoaWNoOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYnV0dG9uO3JldHVybiBudWxsPT1lLndoaWNoJiZ3ZS50ZXN0KGUudHlwZSk/bnVsbCE9ZS5jaGFyQ29kZT9lLmNoYXJDb2RlOmUua2V5Q29kZTohZS53aGljaCYmdm9pZCAwIT09dCYmVGUudGVzdChlLnR5cGUpPzEmdD8xOjImdD8zOjQmdD8yOjA6ZS53aGljaH19LHcuZXZlbnQuYWRkUHJvcCksdy5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIscG9pbnRlcmVudGVyOlwicG9pbnRlcm92ZXJcIixwb2ludGVybGVhdmU6XCJwb2ludGVyb3V0XCJ9LGZ1bmN0aW9uKGUsdCl7dy5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtyZXR1cm4gaSYmKGk9PT1yfHx3LmNvbnRhaW5zKHIsaSkpfHwoZS50eXBlPW8ub3JpZ1R5cGUsbj1vLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSx3LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIERlKHRoaXMsZSx0LG4scil9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gRGUodGhpcyxlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmosdyhlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZStcIi5cIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKXtmb3IoaSBpbiBlKXRoaXMub2ZmKGksdCxlW2ldKTtyZXR1cm4gdGhpc31yZXR1cm4hMSE9PXQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fChuPXQsdD12b2lkIDApLCExPT09biYmKG49a2UpLHRoaXMuZWFjaChmdW5jdGlvbigpe3cuZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9fSk7dmFyIE5lPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLEFlPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLGplPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2kscWU9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO2Z1bmN0aW9uIExlKGUsdCl7cmV0dXJuIE4oZSxcInRhYmxlXCIpJiZOKDExIT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCxcInRyXCIpP3coZSkuY2hpbGRyZW4oXCJ0Ym9keVwiKVswXXx8ZTplfWZ1bmN0aW9uIEhlKGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT1lLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2UudHlwZSxlfWZ1bmN0aW9uIE9lKGUpe3JldHVyblwidHJ1ZS9cIj09PShlLnR5cGV8fFwiXCIpLnNsaWNlKDAsNSk/ZS50eXBlPWUudHlwZS5zbGljZSg1KTplLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksZX1mdW5jdGlvbiBQZShlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKEouaGFzRGF0YShlKSYmKG89Si5hY2Nlc3MoZSksYT1KLnNldCh0LG8pLGw9by5ldmVudHMpKXtkZWxldGUgYS5oYW5kbGUsYS5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7bjxyO24rKyl3LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9Sy5oYXNEYXRhKGUpJiYocz1LLmFjY2VzcyhlKSx1PXcuZXh0ZW5kKHt9LHMpLEsuc2V0KHQsdSkpfX1mdW5jdGlvbiBNZShlLHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1uJiZwZS50ZXN0KGUudHlwZSk/dC5jaGVja2VkPWUuY2hlY2tlZDpcImlucHV0XCIhPT1uJiZcInRleHRhcmVhXCIhPT1ufHwodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfWZ1bmN0aW9uIFJlKGUsdCxuLHIpe3Q9YS5hcHBseShbXSx0KTt2YXIgaSxvLHMsdSxsLGMsZj0wLHA9ZS5sZW5ndGgsZD1wLTEseT10WzBdLHY9Zyh5KTtpZih2fHxwPjEmJlwic3RyaW5nXCI9PXR5cGVvZiB5JiYhaC5jaGVja0Nsb25lJiZqZS50ZXN0KHkpKXJldHVybiBlLmVhY2goZnVuY3Rpb24oaSl7dmFyIG89ZS5lcShpKTt2JiYodFswXT15LmNhbGwodGhpcyxpLG8uaHRtbCgpKSksUmUobyx0LG4scil9KTtpZihwJiYoaT14ZSh0LGVbMF0ub3duZXJEb2N1bWVudCwhMSxlLHIpLG89aS5maXJzdENoaWxkLDE9PT1pLmNoaWxkTm9kZXMubGVuZ3RoJiYoaT1vKSxvfHxyKSl7Zm9yKHU9KHM9dy5tYXAoeWUoaSxcInNjcmlwdFwiKSxIZSkpLmxlbmd0aDtmPHA7ZisrKWw9aSxmIT09ZCYmKGw9dy5jbG9uZShsLCEwLCEwKSx1JiZ3Lm1lcmdlKHMseWUobCxcInNjcmlwdFwiKSkpLG4uY2FsbChlW2ZdLGwsZik7aWYodSlmb3IoYz1zW3MubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsdy5tYXAocyxPZSksZj0wO2Y8dTtmKyspbD1zW2ZdLGhlLnRlc3QobC50eXBlfHxcIlwiKSYmIUouYWNjZXNzKGwsXCJnbG9iYWxFdmFsXCIpJiZ3LmNvbnRhaW5zKGMsbCkmJihsLnNyYyYmXCJtb2R1bGVcIiE9PShsLnR5cGV8fFwiXCIpLnRvTG93ZXJDYXNlKCk/dy5fZXZhbFVybCYmdy5fZXZhbFVybChsLnNyYyk6bShsLnRleHRDb250ZW50LnJlcGxhY2UocWUsXCJcIiksYyxsKSl9cmV0dXJuIGV9ZnVuY3Rpb24gSWUoZSx0LG4pe2Zvcih2YXIgcixpPXQ/dy5maWx0ZXIodCxlKTplLG89MDtudWxsIT0ocj1pW29dKTtvKyspbnx8MSE9PXIubm9kZVR5cGV8fHcuY2xlYW5EYXRhKHllKHIpKSxyLnBhcmVudE5vZGUmJihuJiZ3LmNvbnRhaW5zKHIub3duZXJEb2N1bWVudCxyKSYmdmUoeWUocixcInNjcmlwdFwiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX13LmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKE5lLFwiPCQxPjwvJDI+XCIpfSxjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGEscz1lLmNsb25lTm9kZSghMCksdT13LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKTtpZighKGgubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fHcuaXNYTUxEb2MoZSkpKWZvcihhPXllKHMpLHI9MCxpPShvPXllKGUpKS5sZW5ndGg7cjxpO3IrKylNZShvW3JdLGFbcl0pO2lmKHQpaWYobilmb3Iobz1vfHx5ZShlKSxhPWF8fHllKHMpLHI9MCxpPW8ubGVuZ3RoO3I8aTtyKyspUGUob1tyXSxhW3JdKTtlbHNlIFBlKGUscyk7cmV0dXJuKGE9eWUocyxcInNjcmlwdFwiKSkubGVuZ3RoPjAmJnZlKGEsIXUmJnllKGUsXCJzY3JpcHRcIikpLHN9LGNsZWFuRGF0YTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixyLGk9dy5ldmVudC5zcGVjaWFsLG89MDt2b2lkIDAhPT0obj1lW29dKTtvKyspaWYoWShuKSl7aWYodD1uW0ouZXhwYW5kb10pe2lmKHQuZXZlbnRzKWZvcihyIGluIHQuZXZlbnRzKWlbcl0/dy5ldmVudC5yZW1vdmUobixyKTp3LnJlbW92ZUV2ZW50KG4scix0LmhhbmRsZSk7bltKLmV4cGFuZG9dPXZvaWQgMH1uW0suZXhwYW5kb10mJihuW0suZXhwYW5kb109dm9pZCAwKX19fSksdy5mbi5leHRlbmQoe2RldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gSWUodGhpcyxlLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3JldHVybiBJZSh0aGlzLGUpfSx0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB6KHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dy50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fCh0aGlzLnRleHRDb250ZW50PWUpfSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIFJlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHxMZSh0aGlzLGUpLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PUxlKHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD0wO251bGwhPShlPXRoaXNbdF0pO3QrKykxPT09ZS5ub2RlVHlwZSYmKHcuY2xlYW5EYXRhKHllKGUsITEpKSxlLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGwhPWUmJmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB3LmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiB6KHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09ZSYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYhQWUudGVzdChlKSYmIWdlWyhkZS5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9dy5odG1sUHJlZmlsdGVyKGUpO3RyeXtmb3IoO248cjtuKyspMT09PSh0PXRoaXNbbl18fHt9KS5ub2RlVHlwZSYmKHcuY2xlYW5EYXRhKHllKHQsITEpKSx0LmlubmVySFRNTD1lKTt0PTB9Y2F0Y2goZSl7fX10JiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIFJlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucGFyZW50Tm9kZTt3LmluQXJyYXkodGhpcyxlKTwwJiYody5jbGVhbkRhdGEoeWUodGhpcykpLG4mJm4ucmVwbGFjZUNoaWxkKHQsdGhpcykpfSxlKX19KSx3LmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbixyPVtdLGk9dyhlKSxvPWkubGVuZ3RoLTEsYT0wO2E8PW87YSsrKW49YT09PW8/dGhpczp0aGlzLmNsb25lKCEwKSx3KGlbYV0pW3RdKG4pLHMuYXBwbHkocixuLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2socil9fSk7dmFyIFdlPW5ldyBSZWdFeHAoXCJeKFwiK3JlK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLCRlPWZ1bmN0aW9uKHQpe3ZhciBuPXQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gbiYmbi5vcGVuZXJ8fChuPWUpLG4uZ2V0Q29tcHV0ZWRTdHlsZSh0KX0sQmU9bmV3IFJlZ0V4cChvZS5qb2luKFwifFwiKSxcImlcIik7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2lmKGMpe2wuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHg7d2lkdGg6NjBweDttYXJnaW4tdG9wOjFweDtwYWRkaW5nOjA7Ym9yZGVyOjBcIixjLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo2MCU7dG9wOjElXCIsYmUuYXBwZW5kQ2hpbGQobCkuYXBwZW5kQ2hpbGQoYyk7dmFyIHQ9ZS5nZXRDb21wdXRlZFN0eWxlKGMpO2k9XCIxJVwiIT09dC50b3AsdT0xMj09PW4odC5tYXJnaW5MZWZ0KSxjLnN0eWxlLnJpZ2h0PVwiNjAlXCIscz0zNj09PW4odC5yaWdodCksbz0zNj09PW4odC53aWR0aCksYy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsYT0zNj09PWMub2Zmc2V0V2lkdGh8fFwiYWJzb2x1dGVcIixiZS5yZW1vdmVDaGlsZChsKSxjPW51bGx9fWZ1bmN0aW9uIG4oZSl7cmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChlKSl9dmFyIGksbyxhLHMsdSxsPXIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxjPXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLnN0eWxlJiYoYy5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsYy5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsaC5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09Yy5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx3LmV4dGVuZChoLHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiB0KCksb30scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLHN9LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLGl9LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiB0KCksdX0sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0KCksYX19KSl9KCk7ZnVuY3Rpb24gRmUoZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5zdHlsZTtyZXR1cm4obj1ufHwkZShlKSkmJihcIlwiIT09KGE9bi5nZXRQcm9wZXJ0eVZhbHVlKHQpfHxuW3RdKXx8dy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl8fChhPXcuc3R5bGUoZSx0KSksIWgucGl4ZWxCb3hTdHlsZXMoKSYmV2UudGVzdChhKSYmQmUudGVzdCh0KSYmKHI9cy53aWR0aCxpPXMubWluV2lkdGgsbz1zLm1heFdpZHRoLHMubWluV2lkdGg9cy5tYXhXaWR0aD1zLndpZHRoPWEsYT1uLndpZHRoLHMud2lkdGg9cixzLm1pbldpZHRoPWkscy5tYXhXaWR0aD1vKSksdm9pZCAwIT09YT9hK1wiXCI6YX1mdW5jdGlvbiBfZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19dmFyIHplPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxYZT0vXi0tLyxVZT17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sVmU9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxHZT1bXCJXZWJraXRcIixcIk1velwiLFwibXNcIl0sWWU9ci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLnN0eWxlO2Z1bmN0aW9uIFFlKGUpe2lmKGUgaW4gWWUpcmV0dXJuIGU7dmFyIHQ9ZVswXS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksbj1HZS5sZW5ndGg7d2hpbGUobi0tKWlmKChlPUdlW25dK3QpaW4gWWUpcmV0dXJuIGV9ZnVuY3Rpb24gSmUoZSl7dmFyIHQ9dy5jc3NQcm9wc1tlXTtyZXR1cm4gdHx8KHQ9dy5jc3NQcm9wc1tlXT1RZShlKXx8ZSksdH1mdW5jdGlvbiBLZShlLHQsbil7dmFyIHI9aWUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8XCJweFwiKTp0fWZ1bmN0aW9uIFplKGUsdCxuLHIsaSxvKXt2YXIgYT1cIndpZHRoXCI9PT10PzE6MCxzPTAsdT0wO2lmKG49PT0ocj9cImJvcmRlclwiOlwiY29udGVudFwiKSlyZXR1cm4gMDtmb3IoO2E8NDthKz0yKVwibWFyZ2luXCI9PT1uJiYodSs9dy5jc3MoZSxuK29lW2FdLCEwLGkpKSxyPyhcImNvbnRlbnRcIj09PW4mJih1LT13LmNzcyhlLFwicGFkZGluZ1wiK29lW2FdLCEwLGkpKSxcIm1hcmdpblwiIT09biYmKHUtPXcuY3NzKGUsXCJib3JkZXJcIitvZVthXStcIldpZHRoXCIsITAsaSkpKToodSs9dy5jc3MoZSxcInBhZGRpbmdcIitvZVthXSwhMCxpKSxcInBhZGRpbmdcIiE9PW4/dSs9dy5jc3MoZSxcImJvcmRlclwiK29lW2FdK1wiV2lkdGhcIiwhMCxpKTpzKz13LmNzcyhlLFwiYm9yZGVyXCIrb2VbYV0rXCJXaWR0aFwiLCEwLGkpKTtyZXR1cm4hciYmbz49MCYmKHUrPU1hdGgubWF4KDAsTWF0aC5jZWlsKGVbXCJvZmZzZXRcIit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKV0tby11LXMtLjUpKSksdX1mdW5jdGlvbiBldChlLHQsbil7dmFyIHI9JGUoZSksaT1GZShlLHQsciksbz1cImJvcmRlci1ib3hcIj09PXcuY3NzKGUsXCJib3hTaXppbmdcIiwhMSxyKSxhPW87aWYoV2UudGVzdChpKSl7aWYoIW4pcmV0dXJuIGk7aT1cImF1dG9cIn1yZXR1cm4gYT1hJiYoaC5ib3hTaXppbmdSZWxpYWJsZSgpfHxpPT09ZS5zdHlsZVt0XSksKFwiYXV0b1wiPT09aXx8IXBhcnNlRmxvYXQoaSkmJlwiaW5saW5lXCI9PT13LmNzcyhlLFwiZGlzcGxheVwiLCExLHIpKSYmKGk9ZVtcIm9mZnNldFwiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXSxhPSEwKSwoaT1wYXJzZUZsb2F0KGkpfHwwKStaZShlLHQsbnx8KG8/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksYSxyLGkpK1wicHhcIn13LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPUZlKGUsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1uP1wiMVwiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1HKHQpLHU9WGUudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9SmUocykpLGE9dy5jc3NIb29rc1t0XXx8dy5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiZcImdldFwiaW4gYSYmdm9pZCAwIT09KGk9YS5nZXQoZSwhMSxyKSk/aTpsW3RdO1wic3RyaW5nXCI9PShvPXR5cGVvZiBuKSYmKGk9aWUuZXhlYyhuKSkmJmlbMV0mJihuPXVlKGUsdCxpKSxvPVwibnVtYmVyXCIpLG51bGwhPW4mJm49PT1uJiYoXCJudW1iZXJcIj09PW8mJihuKz1pJiZpWzNdfHwody5jc3NOdW1iZXJbc10/XCJcIjpcInB4XCIpKSxoLmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PW58fDAhPT10LmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwobFt0XT1cImluaGVyaXRcIiksYSYmXCJzZXRcImluIGEmJnZvaWQgMD09PShuPWEuc2V0KGUsbixyKSl8fCh1P2wuc2V0UHJvcGVydHkodCxuKTpsW3RdPW4pKX19LGNzczpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscz1HKHQpO3JldHVybiBYZS50ZXN0KHQpfHwodD1KZShzKSksKGE9dy5jc3NIb29rc1t0XXx8dy5jc3NIb29rc1tzXSkmJlwiZ2V0XCJpbiBhJiYoaT1hLmdldChlLCEwLG4pKSx2b2lkIDA9PT1pJiYoaT1GZShlLHQscikpLFwibm9ybWFsXCI9PT1pJiZ0IGluIFZlJiYoaT1WZVt0XSksXCJcIj09PW58fG4/KG89cGFyc2VGbG9hdChpKSwhMD09PW58fGlzRmluaXRlKG8pP298fDA6aSk6aX19KSx3LmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbdF09e2dldDpmdW5jdGlvbihlLG4scil7aWYobilyZXR1cm4hemUudGVzdCh3LmNzcyhlLFwiZGlzcGxheVwiKSl8fGUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/ZXQoZSx0LHIpOnNlKGUsVWUsZnVuY3Rpb24oKXtyZXR1cm4gZXQoZSx0LHIpfSl9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGksbz0kZShlKSxhPVwiYm9yZGVyLWJveFwiPT09dy5jc3MoZSxcImJveFNpemluZ1wiLCExLG8pLHM9ciYmWmUoZSx0LHIsYSxvKTtyZXR1cm4gYSYmaC5zY3JvbGxib3hTaXplKCk9PT1vLnBvc2l0aW9uJiYocy09TWF0aC5jZWlsKGVbXCJvZmZzZXRcIit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKV0tcGFyc2VGbG9hdChvW3RdKS1aZShlLHQsXCJib3JkZXJcIiwhMSxvKS0uNSkpLHMmJihpPWllLmV4ZWMobikpJiZcInB4XCIhPT0oaVszXXx8XCJweFwiKSYmKGUuc3R5bGVbdF09bixuPXcuY3NzKGUsdCkpLEtlKGUsbixzKX19fSksdy5jc3NIb29rcy5tYXJnaW5MZWZ0PV9lKGgucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4ocGFyc2VGbG9hdChGZShlLFwibWFyZ2luTGVmdFwiKSl8fGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1zZShlLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKStcInB4XCJ9KSx3LmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj0wLGk9e30sbz1cInN0cmluZ1wiPT10eXBlb2Ygbj9uLnNwbGl0KFwiIFwiKTpbbl07cjw0O3IrKylpW2Urb2Vbcl0rdF09b1tyXXx8b1tyLTJdfHxvWzBdO3JldHVybiBpfX0sXCJtYXJnaW5cIiE9PWUmJih3LmNzc0hvb2tzW2UrdF0uc2V0PUtlKX0pLHcuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30sYT0wO2lmKEFycmF5LmlzQXJyYXkodCkpe2ZvcihyPSRlKGUpLGk9dC5sZW5ndGg7YTxpO2ErKylvW3RbYV1dPXcuY3NzKGUsdFthXSwhMSxyKTtyZXR1cm4gb31yZXR1cm4gdm9pZCAwIT09bj93LnN0eWxlKGUsdCxuKTp3LmNzcyhlLHQpfSxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX19KTtmdW5jdGlvbiB0dChlLHQsbixyLGkpe3JldHVybiBuZXcgdHQucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX13LlR3ZWVuPXR0LHR0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dHQsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8dy5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fCh3LmNzc051bWJlcltuXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPXR0LnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTp0dC5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj10dC5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPXQ9dy5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9dD1lLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSp0K3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLG4mJm4uc2V0P24uc2V0KHRoaXMpOnR0LnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LHR0LnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT10dC5wcm90b3R5cGUsdHQucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiAxIT09ZS5lbGVtLm5vZGVUeXBlfHxudWxsIT1lLmVsZW1bZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW2UucHJvcF0/ZS5lbGVtW2UucHJvcF06KHQ9dy5jc3MoZS5lbGVtLGUucHJvcCxcIlwiKSkmJlwiYXV0b1wiIT09dD90OjB9LHNldDpmdW5jdGlvbihlKXt3LmZ4LnN0ZXBbZS5wcm9wXT93LmZ4LnN0ZXBbZS5wcm9wXShlKToxIT09ZS5lbGVtLm5vZGVUeXBlfHxudWxsPT1lLmVsZW0uc3R5bGVbdy5jc3NQcm9wc1tlLnByb3BdXSYmIXcuY3NzSG9va3NbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXT1lLm5vdzp3LnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KX19fSx0dC5wcm9wSG9va3Muc2Nyb2xsVG9wPXR0LnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LHcuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6XCJzd2luZ1wifSx3LmZ4PXR0LnByb3RvdHlwZS5pbml0LHcuZnguc3RlcD17fTt2YXIgbnQscnQsaXQ9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLG90PS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gYXQoKXtydCYmKCExPT09ci5oaWRkZW4mJmUucmVxdWVzdEFuaW1hdGlvbkZyYW1lP2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF0KTplLnNldFRpbWVvdXQoYXQsdy5meC5pbnRlcnZhbCksdy5meC50aWNrKCkpfWZ1bmN0aW9uIHN0KCl7cmV0dXJuIGUuc2V0VGltZW91dChmdW5jdGlvbigpe250PXZvaWQgMH0pLG50PURhdGUubm93KCl9ZnVuY3Rpb24gdXQoZSx0KXt2YXIgbixyPTAsaT17aGVpZ2h0OmV9O2Zvcih0PXQ/MTowO3I8NDtyKz0yLXQpaVtcIm1hcmdpblwiKyhuPW9lW3JdKV09aVtcInBhZGRpbmdcIituXT1lO3JldHVybiB0JiYoaS5vcGFjaXR5PWkud2lkdGg9ZSksaX1mdW5jdGlvbiBsdChlLHQsbil7Zm9yKHZhciByLGk9KHB0LnR3ZWVuZXJzW3RdfHxbXSkuY29uY2F0KHB0LnR3ZWVuZXJzW1wiKlwiXSksbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gY3QoZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMsZj1cIndpZHRoXCJpbiB0fHxcImhlaWdodFwiaW4gdCxwPXRoaXMsZD17fSxoPWUuc3R5bGUsZz1lLm5vZGVUeXBlJiZhZShlKSx5PUouZ2V0KGUsXCJmeHNob3dcIik7bi5xdWV1ZXx8KG51bGw9PShhPXcuX3F1ZXVlSG9va3MoZSxcImZ4XCIpKS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCxzPWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHxzKCl9KSxhLnVucXVldWVkKysscC5hbHdheXMoZnVuY3Rpb24oKXtwLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSx3LnF1ZXVlKGUsXCJmeFwiKS5sZW5ndGh8fGEuZW1wdHkuZmlyZSgpfSl9KSk7Zm9yKHIgaW4gdClpZihpPXRbcl0saXQudGVzdChpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHxcInRvZ2dsZVwiPT09aSxpPT09KGc/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWl8fCF5fHx2b2lkIDA9PT15W3JdKWNvbnRpbnVlO2c9ITB9ZFtyXT15JiZ5W3JdfHx3LnN0eWxlKGUscil9aWYoKHU9IXcuaXNFbXB0eU9iamVjdCh0KSl8fCF3LmlzRW1wdHlPYmplY3QoZCkpe2YmJjE9PT1lLm5vZGVUeXBlJiYobi5vdmVyZmxvdz1baC5vdmVyZmxvdyxoLm92ZXJmbG93WCxoLm92ZXJmbG93WV0sbnVsbD09KGw9eSYmeS5kaXNwbGF5KSYmKGw9Si5nZXQoZSxcImRpc3BsYXlcIikpLFwibm9uZVwiPT09KGM9dy5jc3MoZSxcImRpc3BsYXlcIikpJiYobD9jPWw6KGZlKFtlXSwhMCksbD1lLnN0eWxlLmRpc3BsYXl8fGwsYz13LmNzcyhlLFwiZGlzcGxheVwiKSxmZShbZV0pKSksKFwiaW5saW5lXCI9PT1jfHxcImlubGluZS1ibG9ja1wiPT09YyYmbnVsbCE9bCkmJlwibm9uZVwiPT09dy5jc3MoZSxcImZsb2F0XCIpJiYodXx8KHAuZG9uZShmdW5jdGlvbigpe2guZGlzcGxheT1sfSksbnVsbD09bCYmKGM9aC5kaXNwbGF5LGw9XCJub25lXCI9PT1jP1wiXCI6YykpLGguZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksbi5vdmVyZmxvdyYmKGgub3ZlcmZsb3c9XCJoaWRkZW5cIixwLmFsd2F5cyhmdW5jdGlvbigpe2gub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxoLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGgub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSksdT0hMTtmb3IociBpbiBkKXV8fCh5P1wiaGlkZGVuXCJpbiB5JiYoZz15LmhpZGRlbik6eT1KLmFjY2VzcyhlLFwiZnhzaG93XCIse2Rpc3BsYXk6bH0pLG8mJih5LmhpZGRlbj0hZyksZyYmZmUoW2VdLCEwKSxwLmRvbmUoZnVuY3Rpb24oKXtnfHxmZShbZV0pLEoucmVtb3ZlKGUsXCJmeHNob3dcIik7Zm9yKHIgaW4gZCl3LnN0eWxlKGUscixkW3JdKX0pKSx1PWx0KGc/eVtyXTowLHIscCksciBpbiB5fHwoeVtyXT11LnN0YXJ0LGcmJih1LmVuZD11LnN0YXJ0LHUuc3RhcnQ9MCkpfX1mdW5jdGlvbiBmdChlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKG4gaW4gZSlpZihyPUcobiksaT10W3JdLG89ZVtuXSxBcnJheS5pc0FycmF5KG8pJiYoaT1vWzFdLG89ZVtuXT1vWzBdKSxuIT09ciYmKGVbcl09byxkZWxldGUgZVtuXSksKGE9dy5jc3NIb29rc1tyXSkmJlwiZXhwYW5kXCJpbiBhKXtvPWEuZXhwYW5kKG8pLGRlbGV0ZSBlW3JdO2ZvcihuIGluIG8pbiBpbiBlfHwoZVtuXT1vW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByLGksbz0wLGE9cHQucHJlZmlsdGVycy5sZW5ndGgscz13LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihpKXJldHVybiExO2Zvcih2YXIgdD1udHx8c3QoKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPTEtKG4vbC5kdXJhdGlvbnx8MCksbz0wLGE9bC50d2VlbnMubGVuZ3RoO288YTtvKyspbC50d2VlbnNbb10ucnVuKHIpO3JldHVybiBzLm5vdGlmeVdpdGgoZSxbbCxyLG5dKSxyPDEmJmE/bjooYXx8cy5ub3RpZnlXaXRoKGUsW2wsMSwwXSkscy5yZXNvbHZlV2l0aChlLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTplLHByb3BzOncuZXh0ZW5kKHt9LHQpLG9wdHM6dy5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOncuZWFzaW5nLl9kZWZhdWx0fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6bnR8fHN0KCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj13LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO248cjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0PyhzLm5vdGlmeVdpdGgoZSxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKGUsW2wsdF0pKTpzLnJlamVjdFdpdGgoZSxbbCx0XSksdGhpc319KSxjPWwucHJvcHM7Zm9yKGZ0KGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO288YTtvKyspaWYocj1wdC5wcmVmaWx0ZXJzW29dLmNhbGwobCxlLGMsbC5vcHRzKSlyZXR1cm4gZyhyLnN0b3ApJiYody5fcXVldWVIb29rcyhsLmVsZW0sbC5vcHRzLnF1ZXVlKS5zdG9wPXIuc3RvcC5iaW5kKHIpKSxyO3JldHVybiB3Lm1hcChjLGx0LGwpLGcobC5vcHRzLnN0YXJ0KSYmbC5vcHRzLnN0YXJ0LmNhbGwoZSxsKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKSx3LmZ4LnRpbWVyKHcuZXh0ZW5kKHUse2VsZW06ZSxhbmltOmwscXVldWU6bC5vcHRzLnF1ZXVlfSkpLGx9dy5BbmltYXRpb249dy5leHRlbmQocHQse3R3ZWVuZXJzOntcIipcIjpbZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZVR3ZWVuKGUsdCk7cmV0dXJuIHVlKG4uZWxlbSxlLGllLmV4ZWModCksbiksbn1dfSx0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7ZyhlKT8odD1lLGU9W1wiKlwiXSk6ZT1lLm1hdGNoKE0pO2Zvcih2YXIgbixyPTAsaT1lLmxlbmd0aDtyPGk7cisrKW49ZVtyXSxwdC50d2VlbmVyc1tuXT1wdC50d2VlbmVyc1tuXXx8W10scHQudHdlZW5lcnNbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyczpbY3RdLHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/cHQucHJlZmlsdGVycy51bnNoaWZ0KGUpOnB0LnByZWZpbHRlcnMucHVzaChlKX19KSx3LnNwZWVkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lJiZcIm9iamVjdFwiPT10eXBlb2YgZT93LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fGcoZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIWcodCkmJnR9O3JldHVybiB3LmZ4Lm9mZj9yLmR1cmF0aW9uPTA6XCJudW1iZXJcIiE9dHlwZW9mIHIuZHVyYXRpb24mJihyLmR1cmF0aW9uIGluIHcuZnguc3BlZWRzP3IuZHVyYXRpb249dy5meC5zcGVlZHNbci5kdXJhdGlvbl06ci5kdXJhdGlvbj13LmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ci5xdWV1ZSYmITAhPT1yLnF1ZXVlfHwoci5xdWV1ZT1cImZ4XCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe2coci5vbGQpJiZyLm9sZC5jYWxsKHRoaXMpLHIucXVldWUmJncuZGVxdWV1ZSh0aGlzLHIucXVldWUpfSxyfSx3LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihhZSkuY3NzKFwib3BhY2l0eVwiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT13LmlzRW1wdHlPYmplY3QoZSksbz13LnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9cHQodGhpcyx3LmV4dGVuZCh7fSxlKSxvKTsoaXx8Si5nZXQodGhpcyxcImZpbmlzaFwiKSkmJnQuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fCExPT09by5xdWV1ZT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KG4pfTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZSYmKG49dCx0PWUsZT12b2lkIDApLHQmJiExIT09ZSYmdGhpcy5xdWV1ZShlfHxcImZ4XCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLGk9bnVsbCE9ZSYmZStcInF1ZXVlSG9va3NcIixvPXcudGltZXJzLGE9Si5nZXQodGhpcyk7aWYoaSlhW2ldJiZhW2ldLnN0b3AmJnIoYVtpXSk7ZWxzZSBmb3IoaSBpbiBhKWFbaV0mJmFbaV0uc3RvcCYmb3QudGVzdChpKSYmcihhW2ldKTtmb3IoaT1vLmxlbmd0aDtpLS07KW9baV0uZWxlbSE9PXRoaXN8fG51bGwhPWUmJm9baV0ucXVldWUhPT1lfHwob1tpXS5hbmltLnN0b3AobiksdD0hMSxvLnNwbGljZShpLDEpKTshdCYmbnx8dy5kZXF1ZXVlKHRoaXMsZSl9KX0sZmluaXNoOmZ1bmN0aW9uKGUpe3JldHVybiExIT09ZSYmKGU9ZXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPUouZ2V0KHRoaXMpLHI9bltlK1wicXVldWVcIl0saT1uW2UrXCJxdWV1ZUhvb2tzXCJdLG89dy50aW1lcnMsYT1yP3IubGVuZ3RoOjA7Zm9yKG4uZmluaXNoPSEwLHcucXVldWUodGhpcyxlLFtdKSxpJiZpLnN0b3AmJmkuc3RvcC5jYWxsKHRoaXMsITApLHQ9by5sZW5ndGg7dC0tOylvW3RdLmVsZW09PT10aGlzJiZvW3RdLnF1ZXVlPT09ZSYmKG9bdF0uYW5pbS5zdG9wKCEwKSxvLnNwbGljZSh0LDEpKTtmb3IodD0wO3Q8YTt0Kyspclt0XSYmclt0XS5maW5pc2gmJnJbdF0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIG4uZmluaXNofSl9fSksdy5lYWNoKFtcInRvZ2dsZVwiLFwic2hvd1wiLFwiaGlkZVwiXSxmdW5jdGlvbihlLHQpe3ZhciBuPXcuZm5bdF07dy5mblt0XT1mdW5jdGlvbihlLHIsaSl7cmV0dXJuIG51bGw9PWV8fFwiYm9vbGVhblwiPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUodXQodCwhMCksZSxyLGkpfX0pLHcuZWFjaCh7c2xpZGVEb3duOnV0KFwic2hvd1wiKSxzbGlkZVVwOnV0KFwiaGlkZVwiKSxzbGlkZVRvZ2dsZTp1dChcInRvZ2dsZVwiKSxmYWRlSW46e29wYWNpdHk6XCJzaG93XCJ9LGZhZGVPdXQ6e29wYWNpdHk6XCJoaWRlXCJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6XCJ0b2dnbGVcIn19LGZ1bmN0aW9uKGUsdCl7dy5mbltlXT1mdW5jdGlvbihlLG4scil7cmV0dXJuIHRoaXMuYW5pbWF0ZSh0LGUsbixyKX19KSx3LnRpbWVycz1bXSx3LmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgZSx0PTAsbj13LnRpbWVycztmb3IobnQ9RGF0ZS5ub3coKTt0PG4ubGVuZ3RoO3QrKykoZT1uW3RdKSgpfHxuW3RdIT09ZXx8bi5zcGxpY2UodC0tLDEpO24ubGVuZ3RofHx3LmZ4LnN0b3AoKSxudD12b2lkIDB9LHcuZngudGltZXI9ZnVuY3Rpb24oZSl7dy50aW1lcnMucHVzaChlKSx3LmZ4LnN0YXJ0KCl9LHcuZnguaW50ZXJ2YWw9MTMsdy5meC5zdGFydD1mdW5jdGlvbigpe3J0fHwocnQ9ITAsYXQoKSl9LHcuZnguc3RvcD1mdW5jdGlvbigpe3J0PW51bGx9LHcuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHcuZm4uZGVsYXk9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdD13LmZ4P3cuZnguc3BlZWRzW3RdfHx0OnQsbj1ufHxcImZ4XCIsdGhpcy5xdWV1ZShuLGZ1bmN0aW9uKG4scil7dmFyIGk9ZS5zZXRUaW1lb3V0KG4sdCk7ci5zdG9wPWZ1bmN0aW9uKCl7ZS5jbGVhclRpbWVvdXQoaSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksdD1yLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIikuYXBwZW5kQ2hpbGQoci5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKTtlLnR5cGU9XCJjaGVja2JveFwiLGguY2hlY2tPbj1cIlwiIT09ZS52YWx1ZSxoLm9wdFNlbGVjdGVkPXQuc2VsZWN0ZWQsKGU9ci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikpLnZhbHVlPVwidFwiLGUudHlwZT1cInJhZGlvXCIsaC5yYWRpb1ZhbHVlPVwidFwiPT09ZS52YWx1ZX0oKTt2YXIgZHQsaHQ9dy5leHByLmF0dHJIYW5kbGU7dy5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLHcuYXR0cixlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dy5yZW1vdmVBdHRyKHRoaXMsZSl9KX19KSx3LmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPWUubm9kZVR5cGU7aWYoMyE9PW8mJjghPT1vJiYyIT09bylyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgZS5nZXRBdHRyaWJ1dGU/dy5wcm9wKGUsdCxuKTooMT09PW8mJncuaXNYTUxEb2MoZSl8fChpPXcuYXR0ckhvb2tzW3QudG9Mb3dlckNhc2UoKV18fCh3LmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpP2R0OnZvaWQgMCkpLHZvaWQgMCE9PW4/bnVsbD09PW4/dm9pZCB3LnJlbW92ZUF0dHIoZSx0KTppJiZcInNldFwiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOihlLnNldEF0dHJpYnV0ZSh0LG4rXCJcIiksbik6aSYmXCJnZXRcImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOm51bGw9PShyPXcuZmluZC5hdHRyKGUsdCkpP3ZvaWQgMDpyKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZighaC5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT10JiZOKGUsXCJpbnB1dFwiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsdCksbiYmKGUudmFsdWU9biksdH19fX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXQmJnQubWF0Y2goTSk7aWYoaSYmMT09PWUubm9kZVR5cGUpd2hpbGUobj1pW3IrK10pZS5yZW1vdmVBdHRyaWJ1dGUobil9fSksZHQ9e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuITE9PT10P3cucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LHcuZWFjaCh3LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgbj1odFt0XXx8dy5maW5kLmF0dHI7aHRbdF09ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG8sYT10LnRvTG93ZXJDYXNlKCk7cmV0dXJuIHJ8fChvPWh0W2FdLGh0W2FdPWksaT1udWxsIT1uKGUsdCxyKT9hOm51bGwsaHRbYV09byksaX19KTt2YXIgZ3Q9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx5dD0vXig/OmF8YXJlYSkkL2k7dy5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLHcucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbdy5wcm9wRml4W2VdfHxlXX0pfX0pLHcuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiAxPT09byYmdy5pc1hNTERvYyhlKXx8KHQ9dy5wcm9wRml4W3RdfHx0LGk9dy5wcm9wSG9va3NbdF0pLHZvaWQgMCE9PW4/aSYmXCJzZXRcImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjplW3RdPW46aSYmXCJnZXRcImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOmVbdF19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXt2YXIgdD13LmZpbmQuYXR0cihlLFwidGFiaW5kZXhcIik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6Z3QudGVzdChlLm5vZGVOYW1lKXx8eXQudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn19KSxoLm9wdFNlbGVjdGVkfHwody5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTt0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLHcuZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXt3LnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gdnQoZSl7cmV0dXJuKGUubWF0Y2goTSl8fFtdKS5qb2luKFwiIFwiKX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCJ9ZnVuY3Rpb24geHQoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZTpcInN0cmluZ1wiPT10eXBlb2YgZT9lLm1hdGNoKE0pfHxbXTpbXX13LmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhLHMsdT0wO2lmKGcoZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt3KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsbXQodGhpcykpKX0pO2lmKCh0PXh0KGUpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT1tdChuKSxyPTE9PT1uLm5vZGVUeXBlJiZcIiBcIit2dChpKStcIiBcIil7YT0wO3doaWxlKG89dFthKytdKXIuaW5kZXhPZihcIiBcIitvK1wiIFwiKTwwJiYocis9bytcIiBcIik7aSE9PShzPXZ0KHIpKSYmbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLHMpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyx1PTA7aWYoZyhlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3codGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCxtdCh0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cihcImNsYXNzXCIsXCJcIik7aWYoKHQ9eHQoZSkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPW10KG4pLHI9MT09PW4ubm9kZVR5cGUmJlwiIFwiK3Z0KGkpK1wiIFwiKXthPTA7d2hpbGUobz10W2ErK10pd2hpbGUoci5pbmRleE9mKFwiIFwiK28rXCIgXCIpPi0xKXI9ci5yZXBsYWNlKFwiIFwiK28rXCIgXCIsXCIgXCIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIixzKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZSxyPVwic3RyaW5nXCI9PT1ufHxBcnJheS5pc0FycmF5KGUpO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdCYmcj90P3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKTpnKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt3KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sbXQodGhpcyksdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxpLG8sYTtpZihyKXtpPTAsbz13KHRoaXMpLGE9eHQoZSk7d2hpbGUodD1hW2krK10pby5oYXNDbGFzcyh0KT9vLnJlbW92ZUNsYXNzKHQpOm8uYWRkQ2xhc3ModCl9ZWxzZSB2b2lkIDAhPT1lJiZcImJvb2xlYW5cIiE9PW58fCgodD1tdCh0aGlzKSkmJkouc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsdCksdGhpcy5zZXRBdHRyaWJ1dGUmJnRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIix0fHwhMT09PWU/XCJcIjpKLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj0wO3Q9XCIgXCIrZStcIiBcIjt3aGlsZShuPXRoaXNbcisrXSlpZigxPT09bi5ub2RlVHlwZSYmKFwiIFwiK3Z0KG10KG4pKStcIiBcIikuaW5kZXhPZih0KT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYnQ9L1xcci9nO3cuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcj1nKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaTsxPT09dGhpcy5ub2RlVHlwZSYmKG51bGw9PShpPXI/ZS5jYWxsKHRoaXMsbix3KHRoaXMpLnZhbCgpKTplKT9pPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGk/aSs9XCJcIjpBcnJheS5pc0FycmF5KGkpJiYoaT13Lm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6ZStcIlwifSkpLCh0PXcudmFsSG9va3NbdGhpcy50eXBlXXx8dy52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSYmXCJzZXRcImluIHQmJnZvaWQgMCE9PXQuc2V0KHRoaXMsaSxcInZhbHVlXCIpfHwodGhpcy52YWx1ZT1pKSl9KTtpZihpKXJldHVybih0PXcudmFsSG9va3NbaS50eXBlXXx8dy52YWxIb29rc1tpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSYmXCJnZXRcImluIHQmJnZvaWQgMCE9PShuPXQuZ2V0KGksXCJ2YWx1ZVwiKSk/bjpcInN0cmluZ1wiPT10eXBlb2Yobj1pLnZhbHVlKT9uLnJlcGxhY2UoYnQsXCJcIik6bnVsbD09bj9cIlwiOm59fX0pLHcuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5maW5kLmF0dHIoZSxcInZhbHVlXCIpO3JldHVybiBudWxsIT10P3Q6dnQody50ZXh0KGUpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPWUub3B0aW9ucyxvPWUuc2VsZWN0ZWRJbmRleCxhPVwic2VsZWN0LW9uZVwiPT09ZS50eXBlLHM9YT9udWxsOltdLHU9YT9vKzE6aS5sZW5ndGg7Zm9yKHI9bzwwP3U6YT9vOjA7cjx1O3IrKylpZigoKG49aVtyXSkuc2VsZWN0ZWR8fHI9PT1vKSYmIW4uZGlzYWJsZWQmJighbi5wYXJlbnROb2RlLmRpc2FibGVkfHwhTihuLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKHQ9dyhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPXcubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD13LmluQXJyYXkody52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pPi0xKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksdy5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe3cudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIGUuY2hlY2tlZD13LmluQXJyYXkodyhlKS52YWwoKSx0KT4tMX19LGguY2hlY2tPbnx8KHcudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6ZS52YWx1ZX0pfSksaC5mb2N1c2luPVwib25mb2N1c2luXCJpbiBlO3ZhciB3dD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sVHQ9ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX07dy5leHRlbmQody5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbih0LG4saSxvKXt2YXIgYSxzLHUsbCxjLHAsZCxoLHY9W2l8fHJdLG09Zi5jYWxsKHQsXCJ0eXBlXCIpP3QudHlwZTp0LHg9Zi5jYWxsKHQsXCJuYW1lc3BhY2VcIik/dC5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKHM9aD11PWk9aXx8ciwzIT09aS5ub2RlVHlwZSYmOCE9PWkubm9kZVR5cGUmJiF3dC50ZXN0KG0rdy5ldmVudC50cmlnZ2VyZWQpJiYobS5pbmRleE9mKFwiLlwiKT4tMSYmKG09KHg9bS5zcGxpdChcIi5cIikpLnNoaWZ0KCkseC5zb3J0KCkpLGM9bS5pbmRleE9mKFwiOlwiKTwwJiZcIm9uXCIrbSx0PXRbdy5leHBhbmRvXT90Om5ldyB3LkV2ZW50KG0sXCJvYmplY3RcIj09dHlwZW9mIHQmJnQpLHQuaXNUcmlnZ2VyPW8/MjozLHQubmFtZXNwYWNlPXguam9pbihcIi5cIiksdC5ybmFtZXNwYWNlPXQubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIit4LmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLHQucmVzdWx0PXZvaWQgMCx0LnRhcmdldHx8KHQudGFyZ2V0PWkpLG49bnVsbD09bj9bdF06dy5tYWtlQXJyYXkobixbdF0pLGQ9dy5ldmVudC5zcGVjaWFsW21dfHx7fSxvfHwhZC50cmlnZ2VyfHwhMSE9PWQudHJpZ2dlci5hcHBseShpLG4pKSl7aWYoIW8mJiFkLm5vQnViYmxlJiYheShpKSl7Zm9yKGw9ZC5kZWxlZ2F0ZVR5cGV8fG0sd3QudGVzdChsK20pfHwocz1zLnBhcmVudE5vZGUpO3M7cz1zLnBhcmVudE5vZGUpdi5wdXNoKHMpLHU9czt1PT09KGkub3duZXJEb2N1bWVudHx8cikmJnYucHVzaCh1LmRlZmF1bHRWaWV3fHx1LnBhcmVudFdpbmRvd3x8ZSl9YT0wO3doaWxlKChzPXZbYSsrXSkmJiF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpaD1zLHQudHlwZT1hPjE/bDpkLmJpbmRUeXBlfHxtLChwPShKLmdldChzLFwiZXZlbnRzXCIpfHx7fSlbdC50eXBlXSYmSi5nZXQocyxcImhhbmRsZVwiKSkmJnAuYXBwbHkocyxuKSwocD1jJiZzW2NdKSYmcC5hcHBseSYmWShzKSYmKHQucmVzdWx0PXAuYXBwbHkocyxuKSwhMT09PXQucmVzdWx0JiZ0LnByZXZlbnREZWZhdWx0KCkpO3JldHVybiB0LnR5cGU9bSxvfHx0LmlzRGVmYXVsdFByZXZlbnRlZCgpfHxkLl9kZWZhdWx0JiYhMSE9PWQuX2RlZmF1bHQuYXBwbHkodi5wb3AoKSxuKXx8IVkoaSl8fGMmJmcoaVttXSkmJiF5KGkpJiYoKHU9aVtjXSkmJihpW2NdPW51bGwpLHcuZXZlbnQudHJpZ2dlcmVkPW0sdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZoLmFkZEV2ZW50TGlzdGVuZXIobSxUdCksaVttXSgpLHQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSYmaC5yZW1vdmVFdmVudExpc3RlbmVyKG0sVHQpLHcuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCx1JiYoaVtjXT11KSksdC5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dy5leHRlbmQobmV3IHcuRXZlbnQsbix7dHlwZTplLGlzU2ltdWxhdGVkOiEwfSk7dy5ldmVudC50cmlnZ2VyKHIsbnVsbCx0KX19KSx3LmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt3LmV2ZW50LnRyaWdnZXIoZSx0LHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpc1swXTtpZihuKXJldHVybiB3LmV2ZW50LnRyaWdnZXIoZSx0LG4sITApfX0pLGguZm9jdXNpbnx8dy5lYWNoKHtmb2N1czpcImZvY3VzaW5cIixibHVyOlwiZm9jdXNvdXRcIn0sZnVuY3Rpb24oZSx0KXt2YXIgbj1mdW5jdGlvbihlKXt3LmV2ZW50LnNpbXVsYXRlKHQsZS50YXJnZXQsdy5ldmVudC5maXgoZSkpfTt3LmV2ZW50LnNwZWNpYWxbdF09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGk9Si5hY2Nlc3Mocix0KTtpfHxyLmFkZEV2ZW50TGlzdGVuZXIoZSxuLCEwKSxKLmFjY2VzcyhyLHQsKGl8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciByPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxpPUouYWNjZXNzKHIsdCktMTtpP0ouYWNjZXNzKHIsdCxpKTooci5yZW1vdmVFdmVudExpc3RlbmVyKGUsbiwhMCksSi5yZW1vdmUocix0KSl9fX0pO3ZhciBDdD1lLmxvY2F0aW9uLEV0PURhdGUubm93KCksa3Q9L1xcPy87dy5wYXJzZVhNTD1mdW5jdGlvbih0KXt2YXIgbjtpZighdHx8XCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIG51bGw7dHJ5e249KG5ldyBlLkRPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHQsXCJ0ZXh0L3htbFwiKX1jYXRjaChlKXtuPXZvaWQgMH1yZXR1cm4gbiYmIW4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGh8fHcuZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrdCksbn07dmFyIFN0PS9cXFtcXF0kLyxEdD0vXFxyP1xcbi9nLE50PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24ganQoZSx0LG4scil7dmFyIGk7aWYoQXJyYXkuaXNBcnJheSh0KSl3LmVhY2godCxmdW5jdGlvbih0LGkpe258fFN0LnRlc3QoZSk/cihlLGkpOmp0KGUrXCJbXCIrKFwib2JqZWN0XCI9PXR5cGVvZiBpJiZudWxsIT1pP3Q6XCJcIikrXCJdXCIsaSxuLHIpfSk7ZWxzZSBpZihufHxcIm9iamVjdFwiIT09eCh0KSlyKGUsdCk7ZWxzZSBmb3IoaSBpbiB0KWp0KGUrXCJbXCIraStcIl1cIix0W2ldLG4scil9dy5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3ZhciBuPWcodCk/dCgpOnQ7cltyLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChudWxsPT1uP1wiXCI6bil9O2lmKEFycmF5LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhdy5pc1BsYWluT2JqZWN0KGUpKXcuZWFjaChlLGZ1bmN0aW9uKCl7aSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpanQobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbihcIiZcIil9LHcuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdy5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXcucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGU/dy5tYWtlQXJyYXkoZSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhdyh0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmQXQudGVzdCh0aGlzLm5vZGVOYW1lKSYmIU50LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFwZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPXcodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpBcnJheS5pc0FycmF5KG4pP3cubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShEdCxcIlxcclxcblwiKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKER0LFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pO3ZhciBxdD0vJTIwL2csTHQ9LyMuKiQvLEh0PS8oWz8mXSlfPVteJl0qLyxPdD0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLFB0PS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLE10PS9eKD86R0VUfEhFQUQpJC8sUnQ9L15cXC9cXC8vLEl0PXt9LFd0PXt9LCR0PVwiKi9cIi5jb25jYXQoXCIqXCIpLEJ0PXIuY3JlYXRlRWxlbWVudChcImFcIik7QnQuaHJlZj1DdC5ocmVmO2Z1bmN0aW9uIEZ0KGUpe3JldHVybiBmdW5jdGlvbih0LG4pe1wic3RyaW5nXCIhPXR5cGVvZiB0JiYobj10LHQ9XCIqXCIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaChNKXx8W107aWYoZyhuKSl3aGlsZShyPW9baSsrXSlcIitcIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8XCIqXCIsKGVbcl09ZVtyXXx8W10pLnVuc2hpZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiBfdChlLHQsbixyKXt2YXIgaT17fSxvPWU9PT1XdDtmdW5jdGlvbiBhKHMpe3ZhciB1O3JldHVybiBpW3NdPSEwLHcuZWFjaChlW3NdfHxbXSxmdW5jdGlvbihlLHMpe3ZhciBsPXModCxuLHIpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBsfHxvfHxpW2xdP28/ISh1PWwpOnZvaWQgMDoodC5kYXRhVHlwZXMudW5zaGlmdChsKSxhKGwpLCExKX0pLHV9cmV0dXJuIGEodC5kYXRhVHlwZXNbMF0pfHwhaVtcIipcIl0mJmEoXCIqXCIpfWZ1bmN0aW9uIHp0KGUsdCl7dmFyIG4scixpPXcuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IobiBpbiB0KXZvaWQgMCE9PXRbbl0mJigoaVtuXT9lOnJ8fChyPXt9KSlbbl09dFtuXSk7cmV0dXJuIHImJncuZXh0ZW5kKCEwLGUsciksZX1mdW5jdGlvbiBYdChlLHQsbil7dmFyIHIsaSxvLGEscz1lLmNvbnRlbnRzLHU9ZS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT11WzBdKXUuc2hpZnQoKSx2b2lkIDA9PT1yJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihyKWZvcihpIGluIHMpaWYoc1tpXSYmc1tpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpK1wiIFwiK3VbMF1dKXtvPWk7YnJlYWt9YXx8KGE9aSl9bz1vfHxhfWlmKG8pcmV0dXJuIG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXX1mdW5jdGlvbiBVdChlLHQsbixyKXt2YXIgaSxvLGEscyx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKGEgaW4gZS5jb252ZXJ0ZXJzKWxbYS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbYV07bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKFwiKlwiPT09bylvPXU7ZWxzZSBpZihcIipcIiE9PXUmJnUhPT1vKXtpZighKGE9bFt1K1wiIFwiK29dfHxsW1wiKiBcIitvXSkpZm9yKGkgaW4gbClpZigocz1pLnNwbGl0KFwiIFwiKSlbMV09PT1vJiYoYT1sW3UrXCIgXCIrc1swXV18fGxbXCIqIFwiK3NbMF1dKSl7ITA9PT1hP2E9bFtpXTohMCE9PWxbaV0mJihvPXNbMF0sYy51bnNoaWZ0KHNbMV0pKTticmVha31pZighMCE9PWEpaWYoYSYmZVtcInRocm93c1wiXSl0PWEodCk7ZWxzZSB0cnl7dD1hKHQpfWNhdGNoKGUpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6YT9lOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK3UrXCIgdG8gXCIrb319fXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOnR9fXcuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpDdC5ocmVmLHR5cGU6XCJHRVRcIixpc0xvY2FsOlB0LnRlc3QoQ3QucHJvdG9jb2wpLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOiR0LHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L1xcYnhtbFxcYi8saHRtbDovXFxiaHRtbC8sanNvbjovXFxianNvblxcYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpKU09OLnBhcnNlLFwidGV4dCB4bWxcIjp3LnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD96dCh6dChlLHcuYWpheFNldHRpbmdzKSx0KTp6dCh3LmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpGdChJdCksYWpheFRyYW5zcG9ydDpGdChXdCksYWpheDpmdW5jdGlvbih0LG4pe1wib2JqZWN0XCI9PXR5cGVvZiB0JiYobj10LHQ9dm9pZCAwKSxuPW58fHt9O3ZhciBpLG8sYSxzLHUsbCxjLGYscCxkLGg9dy5hamF4U2V0dXAoe30sbiksZz1oLmNvbnRleHR8fGgseT1oLmNvbnRleHQmJihnLm5vZGVUeXBlfHxnLmpxdWVyeSk/dyhnKTp3LmV2ZW50LHY9dy5EZWZlcnJlZCgpLG09dy5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSx4PWguc3RhdHVzQ29kZXx8e30sYj17fSxUPXt9LEM9XCJjYW5jZWxlZFwiLEU9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihjKXtpZighcyl7cz17fTt3aGlsZSh0PU90LmV4ZWMoYSkpc1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1zW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gYz9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09YyYmKGU9VFtlLnRvTG93ZXJDYXNlKCldPVRbZS50b0xvd2VyQ2FzZSgpXXx8ZSxiW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWMmJihoLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZihjKUUuYWx3YXlzKGVbRS5zdGF0dXNdKTtlbHNlIGZvcih0IGluIGUpeFt0XT1beFt0XSxlW3RdXTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8QztyZXR1cm4gaSYmaS5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKHYucHJvbWlzZShFKSxoLnVybD0oKHR8fGgudXJsfHxDdC5ocmVmKStcIlwiKS5yZXBsYWNlKFJ0LEN0LnByb3RvY29sK1wiLy9cIiksaC50eXBlPW4ubWV0aG9kfHxuLnR5cGV8fGgubWV0aG9kfHxoLnR5cGUsaC5kYXRhVHlwZXM9KGguZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKE0pfHxbXCJcIl0sbnVsbD09aC5jcm9zc0RvbWFpbil7bD1yLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3RyeXtsLmhyZWY9aC51cmwsbC5ocmVmPWwuaHJlZixoLmNyb3NzRG9tYWluPUJ0LnByb3RvY29sK1wiLy9cIitCdC5ob3N0IT1sLnByb3RvY29sK1wiLy9cIitsLmhvc3R9Y2F0Y2goZSl7aC5jcm9zc0RvbWFpbj0hMH19aWYoaC5kYXRhJiZoLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2YgaC5kYXRhJiYoaC5kYXRhPXcucGFyYW0oaC5kYXRhLGgudHJhZGl0aW9uYWwpKSxfdChJdCxoLG4sRSksYylyZXR1cm4gRTsoZj13LmV2ZW50JiZoLmdsb2JhbCkmJjA9PXcuYWN0aXZlKysmJncuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxoLnR5cGU9aC50eXBlLnRvVXBwZXJDYXNlKCksaC5oYXNDb250ZW50PSFNdC50ZXN0KGgudHlwZSksbz1oLnVybC5yZXBsYWNlKEx0LFwiXCIpLGguaGFzQ29udGVudD9oLmRhdGEmJmgucHJvY2Vzc0RhdGEmJjA9PT0oaC5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmKGguZGF0YT1oLmRhdGEucmVwbGFjZShxdCxcIitcIikpOihkPWgudXJsLnNsaWNlKG8ubGVuZ3RoKSxoLmRhdGEmJihoLnByb2Nlc3NEYXRhfHxcInN0cmluZ1wiPT10eXBlb2YgaC5kYXRhKSYmKG8rPShrdC50ZXN0KG8pP1wiJlwiOlwiP1wiKStoLmRhdGEsZGVsZXRlIGguZGF0YSksITE9PT1oLmNhY2hlJiYobz1vLnJlcGxhY2UoSHQsXCIkMVwiKSxkPShrdC50ZXN0KG8pP1wiJlwiOlwiP1wiKStcIl89XCIrRXQrKytkKSxoLnVybD1vK2QpLGguaWZNb2RpZmllZCYmKHcubGFzdE1vZGlmaWVkW29dJiZFLnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLHcubGFzdE1vZGlmaWVkW29dKSx3LmV0YWdbb10mJkUuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIix3LmV0YWdbb10pKSwoaC5kYXRhJiZoLmhhc0NvbnRlbnQmJiExIT09aC5jb250ZW50VHlwZXx8bi5jb250ZW50VHlwZSkmJkUuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGguY29udGVudFR5cGUpLEUuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLGguZGF0YVR5cGVzWzBdJiZoLmFjY2VwdHNbaC5kYXRhVHlwZXNbMF1dP2guYWNjZXB0c1toLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09aC5kYXRhVHlwZXNbMF0/XCIsIFwiKyR0K1wiOyBxPTAuMDFcIjpcIlwiKTpoLmFjY2VwdHNbXCIqXCJdKTtmb3IocCBpbiBoLmhlYWRlcnMpRS5zZXRSZXF1ZXN0SGVhZGVyKHAsaC5oZWFkZXJzW3BdKTtpZihoLmJlZm9yZVNlbmQmJighMT09PWguYmVmb3JlU2VuZC5jYWxsKGcsRSxoKXx8YykpcmV0dXJuIEUuYWJvcnQoKTtpZihDPVwiYWJvcnRcIixtLmFkZChoLmNvbXBsZXRlKSxFLmRvbmUoaC5zdWNjZXNzKSxFLmZhaWwoaC5lcnJvciksaT1fdChXdCxoLG4sRSkpe2lmKEUucmVhZHlTdGF0ZT0xLGYmJnkudHJpZ2dlcihcImFqYXhTZW5kXCIsW0UsaF0pLGMpcmV0dXJuIEU7aC5hc3luYyYmaC50aW1lb3V0PjAmJih1PWUuc2V0VGltZW91dChmdW5jdGlvbigpe0UuYWJvcnQoXCJ0aW1lb3V0XCIpfSxoLnRpbWVvdXQpKTt0cnl7Yz0hMSxpLnNlbmQoYixrKX1jYXRjaChlKXtpZihjKXRocm93IGU7aygtMSxlKX19ZWxzZSBrKC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIGsodCxuLHIscyl7dmFyIGwscCxkLGIsVCxDPW47Y3x8KGM9ITAsdSYmZS5jbGVhclRpbWVvdXQodSksaT12b2lkIDAsYT1zfHxcIlwiLEUucmVhZHlTdGF0ZT10PjA/NDowLGw9dD49MjAwJiZ0PDMwMHx8MzA0PT09dCxyJiYoYj1YdChoLEUscikpLGI9VXQoaCxiLEUsbCksbD8oaC5pZk1vZGlmaWVkJiYoKFQ9RS5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIikpJiYody5sYXN0TW9kaWZpZWRbb109VCksKFQ9RS5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIikpJiYody5ldGFnW29dPVQpKSwyMDQ9PT10fHxcIkhFQURcIj09PWgudHlwZT9DPVwibm9jb250ZW50XCI6MzA0PT09dD9DPVwibm90bW9kaWZpZWRcIjooQz1iLnN0YXRlLHA9Yi5kYXRhLGw9IShkPWIuZXJyb3IpKSk6KGQ9QywhdCYmQ3x8KEM9XCJlcnJvclwiLHQ8MCYmKHQ9MCkpKSxFLnN0YXR1cz10LEUuc3RhdHVzVGV4dD0obnx8QykrXCJcIixsP3YucmVzb2x2ZVdpdGgoZyxbcCxDLEVdKTp2LnJlamVjdFdpdGgoZyxbRSxDLGRdKSxFLnN0YXR1c0NvZGUoeCkseD12b2lkIDAsZiYmeS50cmlnZ2VyKGw/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW0UsaCxsP3A6ZF0pLG0uZmlyZVdpdGgoZyxbRSxDXSksZiYmKHkudHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFtFLGhdKSwtLXcuYWN0aXZlfHx3LmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiBFfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdy5nZXQoZSx0LG4sXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdy5nZXQoZSx2b2lkIDAsdCxcInNjcmlwdFwiKX19KSx3LmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGUsdCl7d1t0XT1mdW5jdGlvbihlLG4scixpKXtyZXR1cm4gZyhuKSYmKGk9aXx8cixyPW4sbj12b2lkIDApLHcuYWpheCh3LmV4dGVuZCh7dXJsOmUsdHlwZTp0LGRhdGFUeXBlOmksZGF0YTpuLHN1Y2Nlc3M6cn0sdy5pc1BsYWluT2JqZWN0KGUpJiZlKSl9fSksdy5fZXZhbFVybD1mdW5jdGlvbihlKXtyZXR1cm4gdy5hamF4KHt1cmw6ZSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSx3LmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdGhpc1swXSYmKGcoZSkmJihlPWUuY2FsbCh0aGlzWzBdKSksdD13KGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdEVsZW1lbnRDaGlsZCllPWUuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGV9KS5hcHBlbmQodGhpcykpLHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihlKXtyZXR1cm4gZyhlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7dyh0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dyh0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD1nKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7dyh0aGlzKS53cmFwQWxsKHQ/ZS5jYWxsKHRoaXMsbik6ZSl9KX0sdW53cmFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBhcmVudChlKS5ub3QoXCJib2R5XCIpLmVhY2goZnVuY3Rpb24oKXt3KHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KSx0aGlzfX0pLHcuZXhwci5wc2V1ZG9zLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4hdy5leHByLnBzZXVkb3MudmlzaWJsZShlKX0sdy5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hIShlLm9mZnNldFdpZHRofHxlLm9mZnNldEhlaWdodHx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl9LHcuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IGUuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7fX07dmFyIFZ0PXswOjIwMCwxMjIzOjIwNH0sR3Q9dy5hamF4U2V0dGluZ3MueGhyKCk7aC5jb3JzPSEhR3QmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBHdCxoLmFqYXg9R3Q9ISFHdCx3LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24odCl7dmFyIG4scjtpZihoLmNvcnN8fEd0JiYhdC5jcm9zc0RvbWFpbilyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3ZhciBhLHM9dC54aHIoKTtpZihzLm9wZW4odC50eXBlLHQudXJsLHQuYXN5bmMsdC51c2VybmFtZSx0LnBhc3N3b3JkKSx0LnhockZpZWxkcylmb3IoYSBpbiB0LnhockZpZWxkcylzW2FdPXQueGhyRmllbGRzW2FdO3QubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKHQubWltZVR5cGUpLHQuY3Jvc3NEb21haW58fGlbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoaVtcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTtmb3IoYSBpbiBpKXMuc2V0UmVxdWVzdEhlYWRlcihhLGlbYV0pO249ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7biYmKG49cj1zLm9ubG9hZD1zLm9uZXJyb3I9cy5vbmFib3J0PXMub250aW1lb3V0PXMub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsXCJhYm9ydFwiPT09ZT9zLmFib3J0KCk6XCJlcnJvclwiPT09ZT9cIm51bWJlclwiIT10eXBlb2Ygcy5zdGF0dXM/bygwLFwiZXJyb3JcIik6byhzLnN0YXR1cyxzLnN0YXR1c1RleHQpOm8oVnRbcy5zdGF0dXNdfHxzLnN0YXR1cyxzLnN0YXR1c1RleHQsXCJ0ZXh0XCIhPT0ocy5yZXNwb25zZVR5cGV8fFwidGV4dFwiKXx8XCJzdHJpbmdcIiE9dHlwZW9mIHMucmVzcG9uc2VUZXh0P3tiaW5hcnk6cy5yZXNwb25zZX06e3RleHQ6cy5yZXNwb25zZVRleHR9LHMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LHMub25sb2FkPW4oKSxyPXMub25lcnJvcj1zLm9udGltZW91dD1uKFwiZXJyb3JcIiksdm9pZCAwIT09cy5vbmFib3J0P3Mub25hYm9ydD1yOnMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXMucmVhZHlTdGF0ZSYmZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7biYmcigpfSl9LG49bihcImFib3J0XCIpO3RyeXtzLnNlbmQodC5oYXNDb250ZW50JiZ0LmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKG4pdGhyb3cgZX19LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19KSx3LmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7ZS5jcm9zc0RvbWFpbiYmKGUuY29udGVudHMuc2NyaXB0PSExKX0pLHcuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGUpe3JldHVybiB3Lmdsb2JhbEV2YWwoZSksZX19fSksdy5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oZSl7dm9pZCAwPT09ZS5jYWNoZSYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9XCJHRVRcIil9KSx3LmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgdCxuO3JldHVybntzZW5kOmZ1bmN0aW9uKGksbyl7dD13KFwiPHNjcmlwdD5cIikucHJvcCh7Y2hhcnNldDplLnNjcmlwdENoYXJzZXQsc3JjOmUudXJsfSkub24oXCJsb2FkIGVycm9yXCIsbj1mdW5jdGlvbihlKXt0LnJlbW92ZSgpLG49bnVsbCxlJiZvKFwiZXJyb3JcIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxyLmhlYWQuYXBwZW5kQ2hpbGQodFswXSl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19fSk7dmFyIFl0PVtdLFF0PS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87dy5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9WXQucG9wKCl8fHcuZXhwYW5kbytcIl9cIitFdCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSksdy5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKHQsbixyKXt2YXIgaSxvLGEscz0hMSE9PXQuanNvbnAmJihRdC50ZXN0KHQudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiB0LmRhdGEmJjA9PT0odC5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmUXQudGVzdCh0LmRhdGEpJiZcImRhdGFcIik7aWYoc3x8XCJqc29ucFwiPT09dC5kYXRhVHlwZXNbMF0pcmV0dXJuIGk9dC5qc29ucENhbGxiYWNrPWcodC5qc29ucENhbGxiYWNrKT90Lmpzb25wQ2FsbGJhY2soKTp0Lmpzb25wQ2FsbGJhY2sscz90W3NdPXRbc10ucmVwbGFjZShRdCxcIiQxXCIraSk6ITEhPT10Lmpzb25wJiYodC51cmwrPShrdC50ZXN0KHQudXJsKT9cIiZcIjpcIj9cIikrdC5qc29ucCtcIj1cIitpKSx0LmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBhfHx3LmVycm9yKGkrXCIgd2FzIG5vdCBjYWxsZWRcIiksYVswXX0sdC5kYXRhVHlwZXNbMF09XCJqc29uXCIsbz1lW2ldLGVbaV09ZnVuY3Rpb24oKXthPWFyZ3VtZW50c30sci5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1vP3coZSkucmVtb3ZlUHJvcChpKTplW2ldPW8sdFtpXSYmKHQuanNvbnBDYWxsYmFjaz1uLmpzb25wQ2FsbGJhY2ssWXQucHVzaChpKSksYSYmZyhvKSYmbyhhWzBdKSxhPW89dm9pZCAwfSksXCJzY3JpcHRcIn0pLGguY3JlYXRlSFRNTERvY3VtZW50PWZ1bmN0aW9uKCl7dmFyIGU9ci5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoXCJcIikuYm9keTtyZXR1cm4gZS5pbm5lckhUTUw9XCI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPlwiLDI9PT1lLmNoaWxkTm9kZXMubGVuZ3RofSgpLHcucGFyc2VIVE1MPWZ1bmN0aW9uKGUsdCxuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm5bXTtcImJvb2xlYW5cIj09dHlwZW9mIHQmJihuPXQsdD0hMSk7dmFyIGksbyxhO3JldHVybiB0fHwoaC5jcmVhdGVIVE1MRG9jdW1lbnQ/KChpPSh0PXIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpKS5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKSkuaHJlZj1yLmxvY2F0aW9uLmhyZWYsdC5oZWFkLmFwcGVuZENoaWxkKGkpKTp0PXIpLG89QS5leGVjKGUpLGE9IW4mJltdLG8/W3QuY3JlYXRlRWxlbWVudChvWzFdKV06KG89eGUoW2VdLHQsYSksYSYmYS5sZW5ndGgmJncoYSkucmVtb3ZlKCksdy5tZXJnZShbXSxvLmNoaWxkTm9kZXMpKX0sdy5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT10aGlzLHM9ZS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gcz4tMSYmKHI9dnQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLGcodCk/KG49dCx0PXZvaWQgMCk6dCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJihpPVwiUE9TVFwiKSxhLmxlbmd0aD4wJiZ3LmFqYXgoe3VybDplLHR5cGU6aXx8XCJHRVRcIixkYXRhVHlwZTpcImh0bWxcIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLGEuaHRtbChyP3coXCI8ZGl2PlwiKS5hcHBlbmQody5wYXJzZUhUTUwoZSkpLmZpbmQocik6ZSl9KS5hbHdheXMobiYmZnVuY3Rpb24oZSx0KXthLmVhY2goZnVuY3Rpb24oKXtuLmFwcGx5KHRoaXMsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSl9KSx0aGlzfSx3LmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihlLHQpe3cuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSx3LmV4cHIucHNldWRvcy5hbmltYXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gdy5ncmVwKHcudGltZXJzLGZ1bmN0aW9uKHQpe3JldHVybiBlPT09dC5lbGVtfSkubGVuZ3RofSx3Lm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjPXcuY3NzKGUsXCJwb3NpdGlvblwiKSxmPXcoZSkscD17fTtcInN0YXRpY1wiPT09YyYmKGUuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxzPWYub2Zmc2V0KCksbz13LmNzcyhlLFwidG9wXCIpLHU9dy5jc3MoZSxcImxlZnRcIiksKGw9KFwiYWJzb2x1dGVcIj09PWN8fFwiZml4ZWRcIj09PWMpJiYobyt1KS5pbmRleE9mKFwiYXV0b1wiKT4tMSk/KGE9KHI9Zi5wb3NpdGlvbigpKS50b3AsaT1yLmxlZnQpOihhPXBhcnNlRmxvYXQobyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSxnKHQpJiYodD10LmNhbGwoZSxuLHcuZXh0ZW5kKHt9LHMpKSksbnVsbCE9dC50b3AmJihwLnRvcD10LnRvcC1zLnRvcCthKSxudWxsIT10LmxlZnQmJihwLmxlZnQ9dC5sZWZ0LXMubGVmdCtpKSxcInVzaW5nXCJpbiB0P3QudXNpbmcuY2FsbChlLHApOmYuY3NzKHApfX0sdy5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1lP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3cub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgdCxuLHI9dGhpc1swXTtpZihyKXJldHVybiByLmdldENsaWVudFJlY3RzKCkubGVuZ3RoPyh0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj1yLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcse3RvcDp0LnRvcCtuLnBhZ2VZT2Zmc2V0LGxlZnQ6dC5sZWZ0K24ucGFnZVhPZmZzZXR9KTp7dG9wOjAsbGVmdDowfX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG4scj10aGlzWzBdLGk9e3RvcDowLGxlZnQ6MH07aWYoXCJmaXhlZFwiPT09dy5jc3MocixcInBvc2l0aW9uXCIpKXQ9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtlbHNle3Q9dGhpcy5vZmZzZXQoKSxuPXIub3duZXJEb2N1bWVudCxlPXIub2Zmc2V0UGFyZW50fHxuLmRvY3VtZW50RWxlbWVudDt3aGlsZShlJiYoZT09PW4uYm9keXx8ZT09PW4uZG9jdW1lbnRFbGVtZW50KSYmXCJzdGF0aWNcIj09PXcuY3NzKGUsXCJwb3NpdGlvblwiKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT13KGUpLm9mZnNldCgpKS50b3ArPXcuY3NzKGUsXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxpLmxlZnQrPXcuY3NzKGUsXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpfXJldHVybnt0b3A6dC50b3AtaS50b3Atdy5jc3MocixcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtdy5jc3MocixcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoZSYmXCJzdGF0aWNcIj09PXcuY3NzKGUsXCJwb3NpdGlvblwiKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxiZX0pfX0pLHcuZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oZSx0KXt2YXIgbj1cInBhZ2VZT2Zmc2V0XCI9PT10O3cuZm5bZV09ZnVuY3Rpb24ocil7cmV0dXJuIHoodGhpcyxmdW5jdGlvbihlLHIsaSl7dmFyIG87aWYoeShlKT9vPWU6OT09PWUubm9kZVR5cGUmJihvPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PWkpcmV0dXJuIG8/b1t0XTplW3JdO28/by5zY3JvbGxUbyhuP28ucGFnZVhPZmZzZXQ6aSxuP2k6by5wYWdlWU9mZnNldCk6ZVtyXT1pfSxlLHIsYXJndW1lbnRzLmxlbmd0aCl9fSksdy5lYWNoKFtcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbdF09X2UoaC5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGUsbil7aWYobilyZXR1cm4gbj1GZShlLHQpLFdlLnRlc3Qobik/dyhlKS5wb3NpdGlvbigpW3RdK1wicHhcIjpufSl9KSx3LmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oZSx0KXt3LmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2UsY29udGVudDp0LFwiXCI6XCJvdXRlclwiK2V9LGZ1bmN0aW9uKG4scil7dy5mbltyXT1mdW5jdGlvbihpLG8pe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGgmJihufHxcImJvb2xlYW5cIiE9dHlwZW9mIGkpLHM9bnx8KCEwPT09aXx8ITA9PT1vP1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIHoodGhpcyxmdW5jdGlvbih0LG4saSl7dmFyIG87cmV0dXJuIHkodCk/MD09PXIuaW5kZXhPZihcIm91dGVyXCIpP3RbXCJpbm5lclwiK2VdOnQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrZV06OT09PXQubm9kZVR5cGU/KG89dC5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgodC5ib2R5W1wic2Nyb2xsXCIrZV0sb1tcInNjcm9sbFwiK2VdLHQuYm9keVtcIm9mZnNldFwiK2VdLG9bXCJvZmZzZXRcIitlXSxvW1wiY2xpZW50XCIrZV0pKTp2b2lkIDA9PT1pP3cuY3NzKHQsbixzKTp3LnN0eWxlKHQsbixpLHMpfSx0LGE/aTp2b2lkIDAsYSl9fSl9KSx3LmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7dy5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSksdy5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLHcuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLFwiKipcIik6dGhpcy5vZmYodCxlfHxcIioqXCIsbil9fSksdy5wcm94eT1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaTtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxnKGUpKXJldHVybiByPW8uY2FsbChhcmd1bWVudHMsMiksaT1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsci5jb25jYXQoby5jYWxsKGFyZ3VtZW50cykpKX0saS5ndWlkPWUuZ3VpZD1lLmd1aWR8fHcuZ3VpZCsrLGl9LHcuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/dy5yZWFkeVdhaXQrKzp3LnJlYWR5KCEwKX0sdy5pc0FycmF5PUFycmF5LmlzQXJyYXksdy5wYXJzZUpTT049SlNPTi5wYXJzZSx3Lm5vZGVOYW1lPU4sdy5pc0Z1bmN0aW9uPWcsdy5pc1dpbmRvdz15LHcuY2FtZWxDYXNlPUcsdy50eXBlPXgsdy5ub3c9RGF0ZS5ub3csdy5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9dy50eXBlKGUpO3JldHVybihcIm51bWJlclwiPT09dHx8XCJzdHJpbmdcIj09PXQpJiYhaXNOYU4oZS1wYXJzZUZsb2F0KGUpKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiB3fSk7dmFyIEp0PWUualF1ZXJ5LEt0PWUuJDtyZXR1cm4gdy5ub0NvbmZsaWN0PWZ1bmN0aW9uKHQpe3JldHVybiBlLiQ9PT13JiYoZS4kPUt0KSx0JiZlLmpRdWVyeT09PXcmJihlLmpRdWVyeT1KdCksd30sdHx8KGUualF1ZXJ5PWUuJD13KSx3fSk7XG4vKipcbiAqIFN3aXBlciA0LjUuMFxuICogTW9zdCBtb2Rlcm4gbW9iaWxlIHRvdWNoIHNsaWRlciBhbmQgZnJhbWV3b3JrIHdpdGggaGFyZHdhcmUgYWNjZWxlcmF0ZWQgdHJhbnNpdGlvbnNcbiAqIGh0dHA6Ly93d3cuaWRhbmdlcm8udXMvc3dpcGVyL1xuICpcbiAqIENvcHlyaWdodCAyMDE0LTIwMTkgVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqXG4gKiBSZWxlYXNlZCBvbjogRmVicnVhcnkgMjIsIDIwMTlcbiAqL1xuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuU3dpcGVyPXQoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBmPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBkb2N1bWVudD97Ym9keTp7fSxhZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fSxhY3RpdmVFbGVtZW50OntibHVyOmZ1bmN0aW9uKCl7fSxub2RlTmFtZTpcIlwifSxxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHF1ZXJ5U2VsZWN0b3JBbGw6ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sY3JlYXRlRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm57aW5pdEV2ZW50OmZ1bmN0aW9uKCl7fX19LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm57Y2hpbGRyZW46W10sY2hpbGROb2RlczpbXSxzdHlsZTp7fSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt9LGdldEVsZW1lbnRzQnlUYWdOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuW119fX0sbG9jYXRpb246e2hhc2g6XCJcIn19OmRvY3VtZW50LEo9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdz97ZG9jdW1lbnQ6ZixuYXZpZ2F0b3I6e3VzZXJBZ2VudDpcIlwifSxsb2NhdGlvbjp7fSxoaXN0b3J5Ont9LEN1c3RvbUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt9LGdldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm57Z2V0UHJvcGVydHlWYWx1ZTpmdW5jdGlvbigpe3JldHVyblwiXCJ9fX0sSW1hZ2U6ZnVuY3Rpb24oKXt9LERhdGU6ZnVuY3Rpb24oKXt9LHNjcmVlbjp7fSxzZXRUaW1lb3V0OmZ1bmN0aW9uKCl7fSxjbGVhclRpbWVvdXQ6ZnVuY3Rpb24oKXt9fTp3aW5kb3csbD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrPTEpdGhpc1t0XT1lW3RdO3JldHVybiB0aGlzLmxlbmd0aD1lLmxlbmd0aCx0aGlzfTtmdW5jdGlvbiBMKGUsdCl7dmFyIGE9W10saT0wO2lmKGUmJiF0JiZlIGluc3RhbmNlb2YgbClyZXR1cm4gZTtpZihlKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgcyxyLG49ZS50cmltKCk7aWYoMDw9bi5pbmRleE9mKFwiPFwiKSYmMDw9bi5pbmRleE9mKFwiPlwiKSl7dmFyIG89XCJkaXZcIjtmb3IoMD09PW4uaW5kZXhPZihcIjxsaVwiKSYmKG89XCJ1bFwiKSwwPT09bi5pbmRleE9mKFwiPHRyXCIpJiYobz1cInRib2R5XCIpLDAhPT1uLmluZGV4T2YoXCI8dGRcIikmJjAhPT1uLmluZGV4T2YoXCI8dGhcIil8fChvPVwidHJcIiksMD09PW4uaW5kZXhPZihcIjx0Ym9keVwiKSYmKG89XCJ0YWJsZVwiKSwwPT09bi5pbmRleE9mKFwiPG9wdGlvblwiKSYmKG89XCJzZWxlY3RcIiksKHI9Zi5jcmVhdGVFbGVtZW50KG8pKS5pbm5lckhUTUw9bixpPTA7aTxyLmNoaWxkTm9kZXMubGVuZ3RoO2krPTEpYS5wdXNoKHIuY2hpbGROb2Rlc1tpXSl9ZWxzZSBmb3Iocz10fHxcIiNcIiE9PWVbMF18fGUubWF0Y2goL1sgLjw+On5dLyk/KHR8fGYpLnF1ZXJ5U2VsZWN0b3JBbGwoZS50cmltKCkpOltmLmdldEVsZW1lbnRCeUlkKGUudHJpbSgpLnNwbGl0KFwiI1wiKVsxXSldLGk9MDtpPHMubGVuZ3RoO2krPTEpc1tpXSYmYS5wdXNoKHNbaV0pfWVsc2UgaWYoZS5ub2RlVHlwZXx8ZT09PUp8fGU9PT1mKWEucHVzaChlKTtlbHNlIGlmKDA8ZS5sZW5ndGgmJmVbMF0ubm9kZVR5cGUpZm9yKGk9MDtpPGUubGVuZ3RoO2krPTEpYS5wdXNoKGVbaV0pO3JldHVybiBuZXcgbChhKX1mdW5jdGlvbiByKGUpe2Zvcih2YXIgdD1bXSxhPTA7YTxlLmxlbmd0aDthKz0xKS0xPT09dC5pbmRleE9mKGVbYV0pJiZ0LnB1c2goZVthXSk7cmV0dXJuIHR9TC5mbj1sLnByb3RvdHlwZSxMLkNsYXNzPWwsTC5Eb203PWw7dmFyIHQ9e2FkZENsYXNzOmZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXM7Zm9yKHZhciB0PWUuc3BsaXQoXCIgXCIpLGE9MDthPHQubGVuZ3RoO2ErPTEpZm9yKHZhciBpPTA7aTx0aGlzLmxlbmd0aDtpKz0xKXZvaWQgMCE9PXRoaXNbaV0mJnZvaWQgMCE9PXRoaXNbaV0uY2xhc3NMaXN0JiZ0aGlzW2ldLmNsYXNzTGlzdC5hZGQodFthXSk7cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNwbGl0KFwiIFwiKSxhPTA7YTx0Lmxlbmd0aDthKz0xKWZvcih2YXIgaT0wO2k8dGhpcy5sZW5ndGg7aSs9MSl2b2lkIDAhPT10aGlzW2ldJiZ2b2lkIDAhPT10aGlzW2ldLmNsYXNzTGlzdCYmdGhpc1tpXS5jbGFzc0xpc3QucmVtb3ZlKHRbYV0pO3JldHVybiB0aGlzfSxoYXNDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXNbMF0mJnRoaXNbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKGUpfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zcGxpdChcIiBcIiksYT0wO2E8dC5sZW5ndGg7YSs9MSlmb3IodmFyIGk9MDtpPHRoaXMubGVuZ3RoO2krPTEpdm9pZCAwIT09dGhpc1tpXSYmdm9pZCAwIT09dGhpc1tpXS5jbGFzc0xpc3QmJnRoaXNbaV0uY2xhc3NMaXN0LnRvZ2dsZSh0W2FdKTtyZXR1cm4gdGhpc30sYXR0cjpmdW5jdGlvbihlLHQpe3ZhciBhPWFyZ3VtZW50cztpZigxPT09YXJndW1lbnRzLmxlbmd0aCYmXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIHRoaXNbMF0/dGhpc1swXS5nZXRBdHRyaWJ1dGUoZSk6dm9pZCAwO2Zvcih2YXIgaT0wO2k8dGhpcy5sZW5ndGg7aSs9MSlpZigyPT09YS5sZW5ndGgpdGhpc1tpXS5zZXRBdHRyaWJ1dGUoZSx0KTtlbHNlIGZvcih2YXIgcyBpbiBlKXRoaXNbaV1bc109ZVtzXSx0aGlzW2ldLnNldEF0dHJpYnV0ZShzLGVbc10pO3JldHVybiB0aGlzfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5sZW5ndGg7dCs9MSl0aGlzW3RdLnJlbW92ZUF0dHJpYnV0ZShlKTtyZXR1cm4gdGhpc30sZGF0YTpmdW5jdGlvbihlLHQpe3ZhciBhO2lmKHZvaWQgMCE9PXQpe2Zvcih2YXIgaT0wO2k8dGhpcy5sZW5ndGg7aSs9MSkoYT10aGlzW2ldKS5kb203RWxlbWVudERhdGFTdG9yYWdlfHwoYS5kb203RWxlbWVudERhdGFTdG9yYWdlPXt9KSxhLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2VbZV09dDtyZXR1cm4gdGhpc31pZihhPXRoaXNbMF0pe2lmKGEuZG9tN0VsZW1lbnREYXRhU3RvcmFnZSYmZSBpbiBhLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2UpcmV0dXJuIGEuZG9tN0VsZW1lbnREYXRhU3RvcmFnZVtlXTt2YXIgcz1hLmdldEF0dHJpYnV0ZShcImRhdGEtXCIrZSk7cmV0dXJuIHN8fHZvaWQgMH19LHRyYW5zZm9ybTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoO3QrPTEpe3ZhciBhPXRoaXNbdF0uc3R5bGU7YS53ZWJraXRUcmFuc2Zvcm09ZSxhLnRyYW5zZm9ybT1lfXJldHVybiB0aGlzfSx0cmFuc2l0aW9uOmZ1bmN0aW9uKGUpe1wic3RyaW5nXCIhPXR5cGVvZiBlJiYoZSs9XCJtc1wiKTtmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoO3QrPTEpe3ZhciBhPXRoaXNbdF0uc3R5bGU7YS53ZWJraXRUcmFuc2l0aW9uRHVyYXRpb249ZSxhLnRyYW5zaXRpb25EdXJhdGlvbj1lfXJldHVybiB0aGlzfSxvbjpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PVtdLGE9YXJndW1lbnRzLmxlbmd0aDthLS07KXRbYV09YXJndW1lbnRzW2FdO3ZhciBpPXRbMF0scj10WzFdLG49dFsyXSxzPXRbM107ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLnRhcmdldDtpZih0KXt2YXIgYT1lLnRhcmdldC5kb203RXZlbnREYXRhfHxbXTtpZihhLmluZGV4T2YoZSk8MCYmYS51bnNoaWZ0KGUpLEwodCkuaXMocikpbi5hcHBseSh0LGEpO2Vsc2UgZm9yKHZhciBpPUwodCkucGFyZW50cygpLHM9MDtzPGkubGVuZ3RoO3MrPTEpTChpW3NdKS5pcyhyKSYmbi5hcHBseShpW3NdLGEpfX1mdW5jdGlvbiBsKGUpe3ZhciB0PWUmJmUudGFyZ2V0JiZlLnRhcmdldC5kb203RXZlbnREYXRhfHxbXTt0LmluZGV4T2YoZSk8MCYmdC51bnNoaWZ0KGUpLG4uYXBwbHkodGhpcyx0KX1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0WzFdJiYoaT0oZT10KVswXSxuPWVbMV0scz1lWzJdLHI9dm9pZCAwKSxzfHwocz0hMSk7Zm9yKHZhciBkLHA9aS5zcGxpdChcIiBcIiksYz0wO2M8dGhpcy5sZW5ndGg7Yys9MSl7dmFyIHU9dGhpc1tjXTtpZihyKWZvcihkPTA7ZDxwLmxlbmd0aDtkKz0xKXt2YXIgaD1wW2RdO3UuZG9tN0xpdmVMaXN0ZW5lcnN8fCh1LmRvbTdMaXZlTGlzdGVuZXJzPXt9KSx1LmRvbTdMaXZlTGlzdGVuZXJzW2hdfHwodS5kb203TGl2ZUxpc3RlbmVyc1toXT1bXSksdS5kb203TGl2ZUxpc3RlbmVyc1toXS5wdXNoKHtsaXN0ZW5lcjpuLHByb3h5TGlzdGVuZXI6b30pLHUuYWRkRXZlbnRMaXN0ZW5lcihoLG8scyl9ZWxzZSBmb3IoZD0wO2Q8cC5sZW5ndGg7ZCs9MSl7dmFyIHY9cFtkXTt1LmRvbTdMaXN0ZW5lcnN8fCh1LmRvbTdMaXN0ZW5lcnM9e30pLHUuZG9tN0xpc3RlbmVyc1t2XXx8KHUuZG9tN0xpc3RlbmVyc1t2XT1bXSksdS5kb203TGlzdGVuZXJzW3ZdLnB1c2goe2xpc3RlbmVyOm4scHJveHlMaXN0ZW5lcjpsfSksdS5hZGRFdmVudExpc3RlbmVyKHYsbCxzKX19cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PVtdLGE9YXJndW1lbnRzLmxlbmd0aDthLS07KXRbYV09YXJndW1lbnRzW2FdO3ZhciBpPXRbMF0scz10WzFdLHI9dFsyXSxuPXRbM107XCJmdW5jdGlvblwiPT10eXBlb2YgdFsxXSYmKGk9KGU9dClbMF0scj1lWzFdLG49ZVsyXSxzPXZvaWQgMCksbnx8KG49ITEpO2Zvcih2YXIgbz1pLnNwbGl0KFwiIFwiKSxsPTA7bDxvLmxlbmd0aDtsKz0xKWZvcih2YXIgZD1vW2xdLHA9MDtwPHRoaXMubGVuZ3RoO3ArPTEpe3ZhciBjPXRoaXNbcF0sdT12b2lkIDA7aWYoIXMmJmMuZG9tN0xpc3RlbmVycz91PWMuZG9tN0xpc3RlbmVyc1tkXTpzJiZjLmRvbTdMaXZlTGlzdGVuZXJzJiYodT1jLmRvbTdMaXZlTGlzdGVuZXJzW2RdKSx1JiZ1Lmxlbmd0aClmb3IodmFyIGg9dS5sZW5ndGgtMTswPD1oO2gtPTEpe3ZhciB2PXVbaF07ciYmdi5saXN0ZW5lcj09PXI/KGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLHYucHJveHlMaXN0ZW5lcixuKSx1LnNwbGljZShoLDEpKTpyJiZ2Lmxpc3RlbmVyJiZ2Lmxpc3RlbmVyLmRvbTdwcm94eSYmdi5saXN0ZW5lci5kb203cHJveHk9PT1yPyhjLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCx2LnByb3h5TGlzdGVuZXIsbiksdS5zcGxpY2UoaCwxKSk6cnx8KGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLHYucHJveHlMaXN0ZW5lcixuKSx1LnNwbGljZShoLDEpKX19cmV0dXJuIHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD1hcmd1bWVudHMubGVuZ3RoO3QtLTspZVt0XT1hcmd1bWVudHNbdF07Zm9yKHZhciBhPWVbMF0uc3BsaXQoXCIgXCIpLGk9ZVsxXSxzPTA7czxhLmxlbmd0aDtzKz0xKWZvcih2YXIgcj1hW3NdLG49MDtuPHRoaXMubGVuZ3RoO24rPTEpe3ZhciBvPXRoaXNbbl0sbD12b2lkIDA7dHJ5e2w9bmV3IEouQ3VzdG9tRXZlbnQocix7ZGV0YWlsOmksYnViYmxlczohMCxjYW5jZWxhYmxlOiEwfSl9Y2F0Y2goZSl7KGw9Zi5jcmVhdGVFdmVudChcIkV2ZW50XCIpKS5pbml0RXZlbnQociwhMCwhMCksbC5kZXRhaWw9aX1vLmRvbTdFdmVudERhdGE9ZS5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4gMDx0fSksby5kaXNwYXRjaEV2ZW50KGwpLG8uZG9tN0V2ZW50RGF0YT1bXSxkZWxldGUgby5kb203RXZlbnREYXRhfXJldHVybiB0aGlzfSx0cmFuc2l0aW9uRW5kOmZ1bmN0aW9uKHQpe3ZhciBhLGk9W1wid2Via2l0VHJhbnNpdGlvbkVuZFwiLFwidHJhbnNpdGlvbmVuZFwiXSxzPXRoaXM7ZnVuY3Rpb24gcihlKXtpZihlLnRhcmdldD09PXRoaXMpZm9yKHQuY2FsbCh0aGlzLGUpLGE9MDthPGkubGVuZ3RoO2ErPTEpcy5vZmYoaVthXSxyKX1pZih0KWZvcihhPTA7YTxpLmxlbmd0aDthKz0xKXMub24oaVthXSxyKTtyZXR1cm4gdGhpc30sb3V0ZXJXaWR0aDpmdW5jdGlvbihlKXtpZigwPHRoaXMubGVuZ3RoKXtpZihlKXt2YXIgdD10aGlzLnN0eWxlcygpO3JldHVybiB0aGlzWzBdLm9mZnNldFdpZHRoK3BhcnNlRmxvYXQodC5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLXJpZ2h0XCIpKStwYXJzZUZsb2F0KHQuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1sZWZ0XCIpKX1yZXR1cm4gdGhpc1swXS5vZmZzZXRXaWR0aH1yZXR1cm4gbnVsbH0sb3V0ZXJIZWlnaHQ6ZnVuY3Rpb24oZSl7aWYoMDx0aGlzLmxlbmd0aCl7aWYoZSl7dmFyIHQ9dGhpcy5zdHlsZXMoKTtyZXR1cm4gdGhpc1swXS5vZmZzZXRIZWlnaHQrcGFyc2VGbG9hdCh0LmdldFByb3BlcnR5VmFsdWUoXCJtYXJnaW4tdG9wXCIpKStwYXJzZUZsb2F0KHQuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1ib3R0b21cIikpfXJldHVybiB0aGlzWzBdLm9mZnNldEhlaWdodH1yZXR1cm4gbnVsbH0sb2Zmc2V0OmZ1bmN0aW9uKCl7aWYoMDx0aGlzLmxlbmd0aCl7dmFyIGU9dGhpc1swXSx0PWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYT1mLmJvZHksaT1lLmNsaWVudFRvcHx8YS5jbGllbnRUb3B8fDAscz1lLmNsaWVudExlZnR8fGEuY2xpZW50TGVmdHx8MCxyPWU9PT1KP0ouc2Nyb2xsWTplLnNjcm9sbFRvcCxuPWU9PT1KP0ouc2Nyb2xsWDplLnNjcm9sbExlZnQ7cmV0dXJue3RvcDp0LnRvcCtyLWksbGVmdDp0LmxlZnQrbi1zfX1yZXR1cm4gbnVsbH0sY3NzOmZ1bmN0aW9uKGUsdCl7dmFyIGE7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXtmb3IoYT0wO2E8dGhpcy5sZW5ndGg7YSs9MSlmb3IodmFyIGkgaW4gZSl0aGlzW2FdLnN0eWxlW2ldPWVbaV07cmV0dXJuIHRoaXN9aWYodGhpc1swXSlyZXR1cm4gSi5nZXRDb21wdXRlZFN0eWxlKHRoaXNbMF0sbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShlKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCYmXCJzdHJpbmdcIj09dHlwZW9mIGUpe2ZvcihhPTA7YTx0aGlzLmxlbmd0aDthKz0xKXRoaXNbYV0uc3R5bGVbZV09dDtyZXR1cm4gdGhpc31yZXR1cm4gdGhpc30sZWFjaDpmdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdGhpcztmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoO3QrPTEpaWYoITE9PT1lLmNhbGwodGhpc1t0XSx0LHRoaXNbdF0pKXJldHVybiB0aGlzO3JldHVybiB0aGlzfSxodG1sOmZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXNbMF0/dGhpc1swXS5pbm5lckhUTUw6dm9pZCAwO2Zvcih2YXIgdD0wO3Q8dGhpcy5sZW5ndGg7dCs9MSl0aGlzW3RdLmlubmVySFRNTD1lO3JldHVybiB0aGlzfSx0ZXh0OmZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXNbMF0/dGhpc1swXS50ZXh0Q29udGVudC50cmltKCk6bnVsbDtmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoO3QrPTEpdGhpc1t0XS50ZXh0Q29udGVudD1lO3JldHVybiB0aGlzfSxpczpmdW5jdGlvbihlKXt2YXIgdCxhLGk9dGhpc1swXTtpZighaXx8dm9pZCAwPT09ZSlyZXR1cm4hMTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7aWYoaS5tYXRjaGVzKXJldHVybiBpLm1hdGNoZXMoZSk7aWYoaS53ZWJraXRNYXRjaGVzU2VsZWN0b3IpcmV0dXJuIGkud2Via2l0TWF0Y2hlc1NlbGVjdG9yKGUpO2lmKGkubXNNYXRjaGVzU2VsZWN0b3IpcmV0dXJuIGkubXNNYXRjaGVzU2VsZWN0b3IoZSk7Zm9yKHQ9TChlKSxhPTA7YTx0Lmxlbmd0aDthKz0xKWlmKHRbYV09PT1pKXJldHVybiEwO3JldHVybiExfWlmKGU9PT1mKXJldHVybiBpPT09ZjtpZihlPT09SilyZXR1cm4gaT09PUo7aWYoZS5ub2RlVHlwZXx8ZSBpbnN0YW5jZW9mIGwpe2Zvcih0PWUubm9kZVR5cGU/W2VdOmUsYT0wO2E8dC5sZW5ndGg7YSs9MSlpZih0W2FdPT09aSlyZXR1cm4hMDtyZXR1cm4hMX1yZXR1cm4hMX0saW5kZXg6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXNbMF07aWYodCl7Zm9yKGU9MDtudWxsIT09KHQ9dC5wcmV2aW91c1NpYmxpbmcpOykxPT09dC5ub2RlVHlwZSYmKGUrPTEpO3JldHVybiBlfX0sZXE6ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSlyZXR1cm4gdGhpczt2YXIgdCxhPXRoaXMubGVuZ3RoO3JldHVybiBuZXcgbChhLTE8ZT9bXTplPDA/KHQ9YStlKTwwP1tdOlt0aGlzW3RdXTpbdGhpc1tlXV0pfSxhcHBlbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1bXSxhPWFyZ3VtZW50cy5sZW5ndGg7YS0tOyl0W2FdPWFyZ3VtZW50c1thXTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krPTEpe2U9dFtpXTtmb3IodmFyIHM9MDtzPHRoaXMubGVuZ3RoO3MrPTEpaWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe3ZhciByPWYuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3Ioci5pbm5lckhUTUw9ZTtyLmZpcnN0Q2hpbGQ7KXRoaXNbc10uYXBwZW5kQ2hpbGQoci5maXJzdENoaWxkKX1lbHNlIGlmKGUgaW5zdGFuY2VvZiBsKWZvcih2YXIgbj0wO248ZS5sZW5ndGg7bis9MSl0aGlzW3NdLmFwcGVuZENoaWxkKGVbbl0pO2Vsc2UgdGhpc1tzXS5hcHBlbmRDaGlsZChlKX1yZXR1cm4gdGhpc30scHJlcGVuZDpmdW5jdGlvbihlKXt2YXIgdCxhO2Zvcih0PTA7dDx0aGlzLmxlbmd0aDt0Kz0xKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgaT1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKGkuaW5uZXJIVE1MPWUsYT1pLmNoaWxkTm9kZXMubGVuZ3RoLTE7MDw9YTthLT0xKXRoaXNbdF0uaW5zZXJ0QmVmb3JlKGkuY2hpbGROb2Rlc1thXSx0aGlzW3RdLmNoaWxkTm9kZXNbMF0pfWVsc2UgaWYoZSBpbnN0YW5jZW9mIGwpZm9yKGE9MDthPGUubGVuZ3RoO2ErPTEpdGhpc1t0XS5pbnNlcnRCZWZvcmUoZVthXSx0aGlzW3RdLmNoaWxkTm9kZXNbMF0pO2Vsc2UgdGhpc1t0XS5pbnNlcnRCZWZvcmUoZSx0aGlzW3RdLmNoaWxkTm9kZXNbMF0pO3JldHVybiB0aGlzfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiAwPHRoaXMubGVuZ3RoP2U/dGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcmJkwodGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcpLmlzKGUpP25ldyBsKFt0aGlzWzBdLm5leHRFbGVtZW50U2libGluZ10pOm5ldyBsKFtdKTp0aGlzWzBdLm5leHRFbGVtZW50U2libGluZz9uZXcgbChbdGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmddKTpuZXcgbChbXSk6bmV3IGwoW10pfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLGE9dGhpc1swXTtpZighYSlyZXR1cm4gbmV3IGwoW10pO2Zvcig7YS5uZXh0RWxlbWVudFNpYmxpbmc7KXt2YXIgaT1hLm5leHRFbGVtZW50U2libGluZztlP0woaSkuaXMoZSkmJnQucHVzaChpKTp0LnB1c2goaSksYT1pfXJldHVybiBuZXcgbCh0KX0scHJldjpmdW5jdGlvbihlKXtpZigwPHRoaXMubGVuZ3RoKXt2YXIgdD10aGlzWzBdO3JldHVybiBlP3QucHJldmlvdXNFbGVtZW50U2libGluZyYmTCh0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcpLmlzKGUpP25ldyBsKFt0LnByZXZpb3VzRWxlbWVudFNpYmxpbmddKTpuZXcgbChbXSk6dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nP25ldyBsKFt0LnByZXZpb3VzRWxlbWVudFNpYmxpbmddKTpuZXcgbChbXSl9cmV0dXJuIG5ldyBsKFtdKX0scHJldkFsbDpmdW5jdGlvbihlKXt2YXIgdD1bXSxhPXRoaXNbMF07aWYoIWEpcmV0dXJuIG5ldyBsKFtdKTtmb3IoO2EucHJldmlvdXNFbGVtZW50U2libGluZzspe3ZhciBpPWEucHJldmlvdXNFbGVtZW50U2libGluZztlP0woaSkuaXMoZSkmJnQucHVzaChpKTp0LnB1c2goaSksYT1pfXJldHVybiBuZXcgbCh0KX0scGFyZW50OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxhPTA7YTx0aGlzLmxlbmd0aDthKz0xKW51bGwhPT10aGlzW2FdLnBhcmVudE5vZGUmJihlP0wodGhpc1thXS5wYXJlbnROb2RlKS5pcyhlKSYmdC5wdXNoKHRoaXNbYV0ucGFyZW50Tm9kZSk6dC5wdXNoKHRoaXNbYV0ucGFyZW50Tm9kZSkpO3JldHVybiBMKHIodCkpfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxhPTA7YTx0aGlzLmxlbmd0aDthKz0xKWZvcih2YXIgaT10aGlzW2FdLnBhcmVudE5vZGU7aTspZT9MKGkpLmlzKGUpJiZ0LnB1c2goaSk6dC5wdXNoKGkpLGk9aS5wYXJlbnROb2RlO3JldHVybiBMKHIodCkpfSxjbG9zZXN0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHZvaWQgMD09PWU/bmV3IGwoW10pOih0LmlzKGUpfHwodD10LnBhcmVudHMoZSkuZXEoMCkpLHQpfSxmaW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxhPTA7YTx0aGlzLmxlbmd0aDthKz0xKWZvcih2YXIgaT10aGlzW2FdLnF1ZXJ5U2VsZWN0b3JBbGwoZSkscz0wO3M8aS5sZW5ndGg7cys9MSl0LnB1c2goaVtzXSk7cmV0dXJuIG5ldyBsKHQpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sYT0wO2E8dGhpcy5sZW5ndGg7YSs9MSlmb3IodmFyIGk9dGhpc1thXS5jaGlsZE5vZGVzLHM9MDtzPGkubGVuZ3RoO3MrPTEpZT8xPT09aVtzXS5ub2RlVHlwZSYmTChpW3NdKS5pcyhlKSYmdC5wdXNoKGlbc10pOjE9PT1pW3NdLm5vZGVUeXBlJiZ0LnB1c2goaVtzXSk7cmV0dXJuIG5ldyBsKHIodCkpfSxyZW1vdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoO2UrPTEpdGhpc1tlXS5wYXJlbnROb2RlJiZ0aGlzW2VdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpc1tlXSk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PWFyZ3VtZW50cy5sZW5ndGg7dC0tOyllW3RdPWFyZ3VtZW50c1t0XTt2YXIgYSxpO2ZvcihhPTA7YTxlLmxlbmd0aDthKz0xKXt2YXIgcz1MKGVbYV0pO2ZvcihpPTA7aTxzLmxlbmd0aDtpKz0xKXRoaXNbdGhpcy5sZW5ndGhdPXNbaV0sdGhpcy5sZW5ndGgrPTF9cmV0dXJuIHRoaXN9LHN0eWxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzWzBdP0ouZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzWzBdLG51bGwpOnt9fX07T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihlKXtMLmZuW2VdPXRbZV19KTt2YXIgZSxhLGkscyxlZT17ZGVsZXRlUHJvcHM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RyeXt0W2VdPW51bGx9Y2F0Y2goZSl7fXRyeXtkZWxldGUgdFtlXX1jYXRjaChlKXt9fSl9LG5leHRUaWNrOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHNldFRpbWVvdXQoZSx0KX0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCl9LGdldFRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBhLGksczt2b2lkIDA9PT10JiYodD1cInhcIik7dmFyIHI9Si5nZXRDb21wdXRlZFN0eWxlKGUsbnVsbCk7cmV0dXJuIEouV2ViS2l0Q1NTTWF0cml4Pyg2PChpPXIudHJhbnNmb3JtfHxyLndlYmtpdFRyYW5zZm9ybSkuc3BsaXQoXCIsXCIpLmxlbmd0aCYmKGk9aS5zcGxpdChcIiwgXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKFwiLFwiLFwiLlwiKX0pLmpvaW4oXCIsIFwiKSkscz1uZXcgSi5XZWJLaXRDU1NNYXRyaXgoXCJub25lXCI9PT1pP1wiXCI6aSkpOmE9KHM9ci5Nb3pUcmFuc2Zvcm18fHIuT1RyYW5zZm9ybXx8ci5Nc1RyYW5zZm9ybXx8ci5tc1RyYW5zZm9ybXx8ci50cmFuc2Zvcm18fHIuZ2V0UHJvcGVydHlWYWx1ZShcInRyYW5zZm9ybVwiKS5yZXBsYWNlKFwidHJhbnNsYXRlKFwiLFwibWF0cml4KDEsIDAsIDAsIDEsXCIpKS50b1N0cmluZygpLnNwbGl0KFwiLFwiKSxcInhcIj09PXQmJihpPUouV2ViS2l0Q1NTTWF0cml4P3MubTQxOjE2PT09YS5sZW5ndGg/cGFyc2VGbG9hdChhWzEyXSk6cGFyc2VGbG9hdChhWzRdKSksXCJ5XCI9PT10JiYoaT1KLldlYktpdENTU01hdHJpeD9zLm00MjoxNj09PWEubGVuZ3RoP3BhcnNlRmxvYXQoYVsxM10pOnBhcnNlRmxvYXQoYVs1XSkpLGl8fDB9LHBhcnNlVXJsUXVlcnk6ZnVuY3Rpb24oZSl7dmFyIHQsYSxpLHMscj17fSxuPWV8fEoubG9jYXRpb24uaHJlZjtpZihcInN0cmluZ1wiPT10eXBlb2YgbiYmbi5sZW5ndGgpZm9yKHM9KGE9KG49LTE8bi5pbmRleE9mKFwiP1wiKT9uLnJlcGxhY2UoL1xcUypcXD8vLFwiXCIpOlwiXCIpLnNwbGl0KFwiJlwiKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWV9KSkubGVuZ3RoLHQ9MDt0PHM7dCs9MSlpPWFbdF0ucmVwbGFjZSgvI1xcUysvZyxcIlwiKS5zcGxpdChcIj1cIikscltkZWNvZGVVUklDb21wb25lbnQoaVswXSldPXZvaWQgMD09PWlbMV0/dm9pZCAwOmRlY29kZVVSSUNvbXBvbmVudChpWzFdKXx8XCJcIjtyZXR1cm4gcn0saXNPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZlLmNvbnN0cnVjdG9yJiZlLmNvbnN0cnVjdG9yPT09T2JqZWN0fSxleHRlbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD1hcmd1bWVudHMubGVuZ3RoO3QtLTspZVt0XT1hcmd1bWVudHNbdF07Zm9yKHZhciBhPU9iamVjdChlWzBdKSxpPTE7aTxlLmxlbmd0aDtpKz0xKXt2YXIgcz1lW2ldO2lmKG51bGwhPXMpZm9yKHZhciByPU9iamVjdC5rZXlzKE9iamVjdChzKSksbj0wLG89ci5sZW5ndGg7bjxvO24rPTEpe3ZhciBsPXJbbl0sZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHMsbCk7dm9pZCAwIT09ZCYmZC5lbnVtZXJhYmxlJiYoZWUuaXNPYmplY3QoYVtsXSkmJmVlLmlzT2JqZWN0KHNbbF0pP2VlLmV4dGVuZChhW2xdLHNbbF0pOiFlZS5pc09iamVjdChhW2xdKSYmZWUuaXNPYmplY3Qoc1tsXSk/KGFbbF09e30sZWUuZXh0ZW5kKGFbbF0sc1tsXSkpOmFbbF09c1tsXSl9fXJldHVybiBhfX0sdGU9KGk9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHt0b3VjaDpKLk1vZGVybml6ciYmITA9PT1KLk1vZGVybml6ci50b3VjaHx8ISEoMDxKLm5hdmlnYXRvci5tYXhUb3VjaFBvaW50c3x8XCJvbnRvdWNoc3RhcnRcImluIEp8fEouRG9jdW1lbnRUb3VjaCYmZiBpbnN0YW5jZW9mIEouRG9jdW1lbnRUb3VjaCkscG9pbnRlckV2ZW50czohIShKLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8Si5Qb2ludGVyRXZlbnR8fFwibWF4VG91Y2hQb2ludHNcImluIEoubmF2aWdhdG9yJiYwPEoubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzKSxwcmVmaXhlZFBvaW50ZXJFdmVudHM6ISFKLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLHRyYW5zaXRpb246KGE9aS5zdHlsZSxcInRyYW5zaXRpb25cImluIGF8fFwid2Via2l0VHJhbnNpdGlvblwiaW4gYXx8XCJNb3pUcmFuc2l0aW9uXCJpbiBhKSx0cmFuc2Zvcm1zM2Q6Si5Nb2Rlcm5penImJiEwPT09Si5Nb2Rlcm5penIuY3NzdHJhbnNmb3JtczNkfHwoZT1pLnN0eWxlLFwid2Via2l0UGVyc3BlY3RpdmVcImluIGV8fFwiTW96UGVyc3BlY3RpdmVcImluIGV8fFwiT1BlcnNwZWN0aXZlXCJpbiBlfHxcIk1zUGVyc3BlY3RpdmVcImluIGV8fFwicGVyc3BlY3RpdmVcImluIGUpLGZsZXhib3g6ZnVuY3Rpb24oKXtmb3IodmFyIGU9aS5zdHlsZSx0PVwiYWxpZ25JdGVtcyB3ZWJraXRBbGlnbkl0ZW1zIHdlYmtpdEJveEFsaWduIG1zRmxleEFsaWduIG1vekJveEFsaWduIHdlYmtpdEZsZXhEaXJlY3Rpb24gbXNGbGV4RGlyZWN0aW9uIG1vekJveERpcmVjdGlvbiBtb3pCb3hPcmllbnQgd2Via2l0Qm94RGlyZWN0aW9uIHdlYmtpdEJveE9yaWVudFwiLnNwbGl0KFwiIFwiKSxhPTA7YTx0Lmxlbmd0aDthKz0xKWlmKHRbYV1pbiBlKXJldHVybiEwO3JldHVybiExfSgpLG9ic2VydmVyOlwiTXV0YXRpb25PYnNlcnZlclwiaW4gSnx8XCJXZWJraXRNdXRhdGlvbk9ic2VydmVyXCJpbiBKLHBhc3NpdmVMaXN0ZW5lcjpmdW5jdGlvbigpe3ZhciBlPSExO3RyeXt2YXIgdD1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2U9ITB9fSk7Si5hZGRFdmVudExpc3RlbmVyKFwidGVzdFBhc3NpdmVMaXN0ZW5lclwiLG51bGwsdCl9Y2F0Y2goZSl7fXJldHVybiBlfSgpLGdlc3R1cmVzOlwib25nZXN0dXJlc3RhcnRcImluIEp9KSxJPXtpc0lFOiEhSi5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50L2cpfHwhIUoubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRS9nKSxpc0VkZ2U6ISFKLm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2UvZyksaXNTYWZhcmk6KHM9Si5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksMDw9cy5pbmRleE9mKFwic2FmYXJpXCIpJiZzLmluZGV4T2YoXCJjaHJvbWVcIik8MCYmcy5pbmRleE9mKFwiYW5kcm9pZFwiKTwwKSxpc1VpV2ViVmlldzovKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3QoSi5uYXZpZ2F0b3IudXNlckFnZW50KX0sbj1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIHQ9dGhpczt0LnBhcmFtcz1lLHQuZXZlbnRzTGlzdGVuZXJzPXt9LHQucGFyYW1zJiZ0LnBhcmFtcy5vbiYmT2JqZWN0LmtleXModC5wYXJhbXMub24pLmZvckVhY2goZnVuY3Rpb24oZSl7dC5vbihlLHQucGFyYW1zLm9uW2VdKX0pfSxvPXtjb21wb25lbnRzOntjb25maWd1cmFibGU6ITB9fTtuLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLHQsYSl7dmFyIGk9dGhpcztpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiBpO3ZhciBzPWE/XCJ1bnNoaWZ0XCI6XCJwdXNoXCI7cmV0dXJuIGUuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7aS5ldmVudHNMaXN0ZW5lcnNbZV18fChpLmV2ZW50c0xpc3RlbmVyc1tlXT1bXSksaS5ldmVudHNMaXN0ZW5lcnNbZV1bc10odCl9KSxpfSxuLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGEsaSxlKXt2YXIgcz10aGlzO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkpcmV0dXJuIHM7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZT1bXSx0PWFyZ3VtZW50cy5sZW5ndGg7dC0tOyllW3RdPWFyZ3VtZW50c1t0XTtpLmFwcGx5KHMsZSkscy5vZmYoYSxyKSxyLmY3cHJveHkmJmRlbGV0ZSByLmY3cHJveHl9cmV0dXJuIHIuZjdwcm94eT1pLHMub24oYSxyLGUpfSxuLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSxpKXt2YXIgcz10aGlzO3JldHVybiBzLmV2ZW50c0xpc3RlbmVycyYmZS5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbihhKXt2b2lkIDA9PT1pP3MuZXZlbnRzTGlzdGVuZXJzW2FdPVtdOnMuZXZlbnRzTGlzdGVuZXJzW2FdJiZzLmV2ZW50c0xpc3RlbmVyc1thXS5sZW5ndGgmJnMuZXZlbnRzTGlzdGVuZXJzW2FdLmZvckVhY2goZnVuY3Rpb24oZSx0KXsoZT09PWl8fGUuZjdwcm94eSYmZS5mN3Byb3h5PT09aSkmJnMuZXZlbnRzTGlzdGVuZXJzW2FdLnNwbGljZSh0LDEpfSl9KSxzfSxuLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9YXJndW1lbnRzLmxlbmd0aDt0LS07KWVbdF09YXJndW1lbnRzW3RdO3ZhciBhLGkscyxyPXRoaXM7cmV0dXJuIHIuZXZlbnRzTGlzdGVuZXJzJiYoXCJzdHJpbmdcIj09dHlwZW9mIGVbMF18fEFycmF5LmlzQXJyYXkoZVswXSk/KGE9ZVswXSxpPWUuc2xpY2UoMSxlLmxlbmd0aCkscz1yKTooYT1lWzBdLmV2ZW50cyxpPWVbMF0uZGF0YSxzPWVbMF0uY29udGV4dHx8ciksKEFycmF5LmlzQXJyYXkoYSk/YTphLnNwbGl0KFwiIFwiKSkuZm9yRWFjaChmdW5jdGlvbihlKXtpZihyLmV2ZW50c0xpc3RlbmVycyYmci5ldmVudHNMaXN0ZW5lcnNbZV0pe3ZhciB0PVtdO3IuZXZlbnRzTGlzdGVuZXJzW2VdLmZvckVhY2goZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSksdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuYXBwbHkocyxpKX0pfX0pKSxyfSxuLnByb3RvdHlwZS51c2VNb2R1bGVzUGFyYW1zPWZ1bmN0aW9uKGEpe3ZhciBpPXRoaXM7aS5tb2R1bGVzJiZPYmplY3Qua2V5cyhpLm1vZHVsZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9aS5tb2R1bGVzW2VdO3QucGFyYW1zJiZlZS5leHRlbmQoYSx0LnBhcmFtcyl9KX0sbi5wcm90b3R5cGUudXNlTW9kdWxlcz1mdW5jdGlvbihpKXt2b2lkIDA9PT1pJiYoaT17fSk7dmFyIHM9dGhpcztzLm1vZHVsZXMmJk9iamVjdC5rZXlzKHMubW9kdWxlcykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgYT1zLm1vZHVsZXNbZV0sdD1pW2VdfHx7fTthLmluc3RhbmNlJiZPYmplY3Qua2V5cyhhLmluc3RhbmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWEuaW5zdGFuY2VbZV07c1tlXT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3QuYmluZChzKTp0fSksYS5vbiYmcy5vbiYmT2JqZWN0LmtleXMoYS5vbikuZm9yRWFjaChmdW5jdGlvbihlKXtzLm9uKGUsYS5vbltlXSl9KSxhLmNyZWF0ZSYmYS5jcmVhdGUuYmluZChzKSh0KX0pfSxvLmNvbXBvbmVudHMuc2V0PWZ1bmN0aW9uKGUpe3RoaXMudXNlJiZ0aGlzLnVzZShlKX0sbi5pbnN0YWxsTW9kdWxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxhPWFyZ3VtZW50cy5sZW5ndGgtMTswPGEtLTspZVthXT1hcmd1bWVudHNbYSsxXTt2YXIgaT10aGlzO2kucHJvdG90eXBlLm1vZHVsZXN8fChpLnByb3RvdHlwZS5tb2R1bGVzPXt9KTt2YXIgcz10Lm5hbWV8fE9iamVjdC5rZXlzKGkucHJvdG90eXBlLm1vZHVsZXMpLmxlbmd0aCtcIl9cIitlZS5ub3coKTtyZXR1cm4oaS5wcm90b3R5cGUubW9kdWxlc1tzXT10KS5wcm90byYmT2JqZWN0LmtleXModC5wcm90bykuZm9yRWFjaChmdW5jdGlvbihlKXtpLnByb3RvdHlwZVtlXT10LnByb3RvW2VdfSksdC5zdGF0aWMmJk9iamVjdC5rZXlzKHQuc3RhdGljKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lbZV09dC5zdGF0aWNbZV19KSx0Lmluc3RhbGwmJnQuaW5zdGFsbC5hcHBseShpLGUpLGl9LG4udXNlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxhPWFyZ3VtZW50cy5sZW5ndGgtMTswPGEtLTspdFthXT1hcmd1bWVudHNbYSsxXTt2YXIgaT10aGlzO3JldHVybiBBcnJheS5pc0FycmF5KGUpPyhlLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGkuaW5zdGFsbE1vZHVsZShlKX0pLGkpOmkuaW5zdGFsbE1vZHVsZS5hcHBseShpLFtlXS5jb25jYXQodCkpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuLG8pO3ZhciBkPXt1cGRhdGVTaXplOmZ1bmN0aW9uKCl7dmFyIGUsdCxhPXRoaXMsaT1hLiRlbDtlPXZvaWQgMCE9PWEucGFyYW1zLndpZHRoP2EucGFyYW1zLndpZHRoOmlbMF0uY2xpZW50V2lkdGgsdD12b2lkIDAhPT1hLnBhcmFtcy5oZWlnaHQ/YS5wYXJhbXMuaGVpZ2h0OmlbMF0uY2xpZW50SGVpZ2h0LDA9PT1lJiZhLmlzSG9yaXpvbnRhbCgpfHwwPT09dCYmYS5pc1ZlcnRpY2FsKCl8fChlPWUtcGFyc2VJbnQoaS5jc3MoXCJwYWRkaW5nLWxlZnRcIiksMTApLXBhcnNlSW50KGkuY3NzKFwicGFkZGluZy1yaWdodFwiKSwxMCksdD10LXBhcnNlSW50KGkuY3NzKFwicGFkZGluZy10b3BcIiksMTApLXBhcnNlSW50KGkuY3NzKFwicGFkZGluZy1ib3R0b21cIiksMTApLGVlLmV4dGVuZChhLHt3aWR0aDplLGhlaWdodDp0LHNpemU6YS5pc0hvcml6b250YWwoKT9lOnR9KSl9LHVwZGF0ZVNsaWRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBhcmFtcyxhPWUuJHdyYXBwZXJFbCxpPWUuc2l6ZSxzPWUucnRsVHJhbnNsYXRlLHI9ZS53cm9uZ1JUTCxuPWUudmlydHVhbCYmdC52aXJ0dWFsLmVuYWJsZWQsbz1uP2UudmlydHVhbC5zbGlkZXMubGVuZ3RoOmUuc2xpZGVzLmxlbmd0aCxsPWEuY2hpbGRyZW4oXCIuXCIrZS5wYXJhbXMuc2xpZGVDbGFzcyksZD1uP2UudmlydHVhbC5zbGlkZXMubGVuZ3RoOmwubGVuZ3RoLHA9W10sYz1bXSx1PVtdLGg9dC5zbGlkZXNPZmZzZXRCZWZvcmU7XCJmdW5jdGlvblwiPT10eXBlb2YgaCYmKGg9dC5zbGlkZXNPZmZzZXRCZWZvcmUuY2FsbChlKSk7dmFyIHY9dC5zbGlkZXNPZmZzZXRBZnRlcjtcImZ1bmN0aW9uXCI9PXR5cGVvZiB2JiYodj10LnNsaWRlc09mZnNldEFmdGVyLmNhbGwoZSkpO3ZhciBmPWUuc25hcEdyaWQubGVuZ3RoLG09ZS5zbmFwR3JpZC5sZW5ndGgsZz10LnNwYWNlQmV0d2VlbixiPS1oLHc9MCx5PTA7aWYodm9pZCAwIT09aSl7dmFyIHgsVDtcInN0cmluZ1wiPT10eXBlb2YgZyYmMDw9Zy5pbmRleE9mKFwiJVwiKSYmKGc9cGFyc2VGbG9hdChnLnJlcGxhY2UoXCIlXCIsXCJcIikpLzEwMCppKSxlLnZpcnR1YWxTaXplPS1nLHM/bC5jc3Moe21hcmdpbkxlZnQ6XCJcIixtYXJnaW5Ub3A6XCJcIn0pOmwuY3NzKHttYXJnaW5SaWdodDpcIlwiLG1hcmdpbkJvdHRvbTpcIlwifSksMTx0LnNsaWRlc1BlckNvbHVtbiYmKHg9TWF0aC5mbG9vcihkL3Quc2xpZGVzUGVyQ29sdW1uKT09PWQvZS5wYXJhbXMuc2xpZGVzUGVyQ29sdW1uP2Q6TWF0aC5jZWlsKGQvdC5zbGlkZXNQZXJDb2x1bW4pKnQuc2xpZGVzUGVyQ29sdW1uLFwiYXV0b1wiIT09dC5zbGlkZXNQZXJWaWV3JiZcInJvd1wiPT09dC5zbGlkZXNQZXJDb2x1bW5GaWxsJiYoeD1NYXRoLm1heCh4LHQuc2xpZGVzUGVyVmlldyp0LnNsaWRlc1BlckNvbHVtbikpKTtmb3IodmFyIEUsUz10LnNsaWRlc1BlckNvbHVtbixDPXgvUyxNPU1hdGguZmxvb3IoZC90LnNsaWRlc1BlckNvbHVtbiksej0wO3o8ZDt6Kz0xKXtUPTA7dmFyIFA9bC5lcSh6KTtpZigxPHQuc2xpZGVzUGVyQ29sdW1uKXt2YXIgaz12b2lkIDAsJD12b2lkIDAsTD12b2lkIDA7XCJjb2x1bW5cIj09PXQuc2xpZGVzUGVyQ29sdW1uRmlsbD8oTD16LSgkPU1hdGguZmxvb3Ioei9TKSkqUywoTTwkfHwkPT09TSYmTD09PVMtMSkmJlM8PShMKz0xKSYmKEw9MCwkKz0xKSxrPSQrTCp4L1MsUC5jc3Moe1wiLXdlYmtpdC1ib3gtb3JkaW5hbC1ncm91cFwiOmssXCItbW96LWJveC1vcmRpbmFsLWdyb3VwXCI6ayxcIi1tcy1mbGV4LW9yZGVyXCI6ayxcIi13ZWJraXQtb3JkZXJcIjprLG9yZGVyOmt9KSk6JD16LShMPU1hdGguZmxvb3Ioei9DKSkqQyxQLmNzcyhcIm1hcmdpbi1cIisoZS5pc0hvcml6b250YWwoKT9cInRvcFwiOlwibGVmdFwiKSwwIT09TCYmdC5zcGFjZUJldHdlZW4mJnQuc3BhY2VCZXR3ZWVuK1wicHhcIikuYXR0cihcImRhdGEtc3dpcGVyLWNvbHVtblwiLCQpLmF0dHIoXCJkYXRhLXN3aXBlci1yb3dcIixMKX1pZihcIm5vbmVcIiE9PVAuY3NzKFwiZGlzcGxheVwiKSl7aWYoXCJhdXRvXCI9PT10LnNsaWRlc1BlclZpZXcpe3ZhciBJPUouZ2V0Q29tcHV0ZWRTdHlsZShQWzBdLG51bGwpLEQ9UFswXS5zdHlsZS50cmFuc2Zvcm0sTz1QWzBdLnN0eWxlLndlYmtpdFRyYW5zZm9ybTtpZihEJiYoUFswXS5zdHlsZS50cmFuc2Zvcm09XCJub25lXCIpLE8mJihQWzBdLnN0eWxlLndlYmtpdFRyYW5zZm9ybT1cIm5vbmVcIiksdC5yb3VuZExlbmd0aHMpVD1lLmlzSG9yaXpvbnRhbCgpP1Aub3V0ZXJXaWR0aCghMCk6UC5vdXRlckhlaWdodCghMCk7ZWxzZSBpZihlLmlzSG9yaXpvbnRhbCgpKXt2YXIgQT1wYXJzZUZsb2F0KEkuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpKSxIPXBhcnNlRmxvYXQoSS5nZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZy1sZWZ0XCIpKSxOPXBhcnNlRmxvYXQoSS5nZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZy1yaWdodFwiKSksRz1wYXJzZUZsb2F0KEkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1sZWZ0XCIpKSxCPXBhcnNlRmxvYXQoSS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLXJpZ2h0XCIpKSxYPUkuZ2V0UHJvcGVydHlWYWx1ZShcImJveC1zaXppbmdcIik7VD1YJiZcImJvcmRlci1ib3hcIj09PVg/QStHK0I6QStIK04rRytCfWVsc2V7dmFyIFk9cGFyc2VGbG9hdChJLmdldFByb3BlcnR5VmFsdWUoXCJoZWlnaHRcIikpLFY9cGFyc2VGbG9hdChJLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nLXRvcFwiKSksRj1wYXJzZUZsb2F0KEkuZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctYm90dG9tXCIpKSxSPXBhcnNlRmxvYXQoSS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLXRvcFwiKSkscT1wYXJzZUZsb2F0KEkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1ib3R0b21cIikpLFc9SS5nZXRQcm9wZXJ0eVZhbHVlKFwiYm94LXNpemluZ1wiKTtUPVcmJlwiYm9yZGVyLWJveFwiPT09Vz9ZK1IrcTpZK1YrRitSK3F9RCYmKFBbMF0uc3R5bGUudHJhbnNmb3JtPUQpLE8mJihQWzBdLnN0eWxlLndlYmtpdFRyYW5zZm9ybT1PKSx0LnJvdW5kTGVuZ3RocyYmKFQ9TWF0aC5mbG9vcihUKSl9ZWxzZSBUPShpLSh0LnNsaWRlc1BlclZpZXctMSkqZykvdC5zbGlkZXNQZXJWaWV3LHQucm91bmRMZW5ndGhzJiYoVD1NYXRoLmZsb29yKFQpKSxsW3pdJiYoZS5pc0hvcml6b250YWwoKT9sW3pdLnN0eWxlLndpZHRoPVQrXCJweFwiOmxbel0uc3R5bGUuaGVpZ2h0PVQrXCJweFwiKTtsW3pdJiYobFt6XS5zd2lwZXJTbGlkZVNpemU9VCksdS5wdXNoKFQpLHQuY2VudGVyZWRTbGlkZXM/KGI9YitULzIrdy8yK2csMD09PXcmJjAhPT16JiYoYj1iLWkvMi1nKSwwPT09eiYmKGI9Yi1pLzItZyksTWF0aC5hYnMoYik8LjAwMSYmKGI9MCksdC5yb3VuZExlbmd0aHMmJihiPU1hdGguZmxvb3IoYikpLHkldC5zbGlkZXNQZXJHcm91cD09MCYmcC5wdXNoKGIpLGMucHVzaChiKSk6KHQucm91bmRMZW5ndGhzJiYoYj1NYXRoLmZsb29yKGIpKSx5JXQuc2xpZGVzUGVyR3JvdXA9PTAmJnAucHVzaChiKSxjLnB1c2goYiksYj1iK1QrZyksZS52aXJ0dWFsU2l6ZSs9VCtnLHc9VCx5Kz0xfX1pZihlLnZpcnR1YWxTaXplPU1hdGgubWF4KGUudmlydHVhbFNpemUsaSkrdixzJiZyJiYoXCJzbGlkZVwiPT09dC5lZmZlY3R8fFwiY292ZXJmbG93XCI9PT10LmVmZmVjdCkmJmEuY3NzKHt3aWR0aDplLnZpcnR1YWxTaXplK3Quc3BhY2VCZXR3ZWVuK1wicHhcIn0pLHRlLmZsZXhib3gmJiF0LnNldFdyYXBwZXJTaXplfHwoZS5pc0hvcml6b250YWwoKT9hLmNzcyh7d2lkdGg6ZS52aXJ0dWFsU2l6ZSt0LnNwYWNlQmV0d2VlbitcInB4XCJ9KTphLmNzcyh7aGVpZ2h0OmUudmlydHVhbFNpemUrdC5zcGFjZUJldHdlZW4rXCJweFwifSkpLDE8dC5zbGlkZXNQZXJDb2x1bW4mJihlLnZpcnR1YWxTaXplPShUK3Quc3BhY2VCZXR3ZWVuKSp4LGUudmlydHVhbFNpemU9TWF0aC5jZWlsKGUudmlydHVhbFNpemUvdC5zbGlkZXNQZXJDb2x1bW4pLXQuc3BhY2VCZXR3ZWVuLGUuaXNIb3Jpem9udGFsKCk/YS5jc3Moe3dpZHRoOmUudmlydHVhbFNpemUrdC5zcGFjZUJldHdlZW4rXCJweFwifSk6YS5jc3Moe2hlaWdodDplLnZpcnR1YWxTaXplK3Quc3BhY2VCZXR3ZWVuK1wicHhcIn0pLHQuY2VudGVyZWRTbGlkZXMpKXtFPVtdO2Zvcih2YXIgaj0wO2o8cC5sZW5ndGg7ais9MSl7dmFyIFU9cFtqXTt0LnJvdW5kTGVuZ3RocyYmKFU9TWF0aC5mbG9vcihVKSkscFtqXTxlLnZpcnR1YWxTaXplK3BbMF0mJkUucHVzaChVKX1wPUV9aWYoIXQuY2VudGVyZWRTbGlkZXMpe0U9W107Zm9yKHZhciBLPTA7SzxwLmxlbmd0aDtLKz0xKXt2YXIgXz1wW0tdO3Qucm91bmRMZW5ndGhzJiYoXz1NYXRoLmZsb29yKF8pKSxwW0tdPD1lLnZpcnR1YWxTaXplLWkmJkUucHVzaChfKX1wPUUsMTxNYXRoLmZsb29yKGUudmlydHVhbFNpemUtaSktTWF0aC5mbG9vcihwW3AubGVuZ3RoLTFdKSYmcC5wdXNoKGUudmlydHVhbFNpemUtaSl9aWYoMD09PXAubGVuZ3RoJiYocD1bMF0pLDAhPT10LnNwYWNlQmV0d2VlbiYmKGUuaXNIb3Jpem9udGFsKCk/cz9sLmNzcyh7bWFyZ2luTGVmdDpnK1wicHhcIn0pOmwuY3NzKHttYXJnaW5SaWdodDpnK1wicHhcIn0pOmwuY3NzKHttYXJnaW5Cb3R0b206ZytcInB4XCJ9KSksdC5jZW50ZXJJbnN1ZmZpY2llbnRTbGlkZXMpe3ZhciBaPTA7aWYodS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1orPWUrKHQuc3BhY2VCZXR3ZWVuP3Quc3BhY2VCZXR3ZWVuOjApfSksKFotPXQuc3BhY2VCZXR3ZWVuKTxpKXt2YXIgUT0oaS1aKS8yO3AuZm9yRWFjaChmdW5jdGlvbihlLHQpe3BbdF09ZS1RfSksYy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7Y1t0XT1lK1F9KX19ZWUuZXh0ZW5kKGUse3NsaWRlczpsLHNuYXBHcmlkOnAsc2xpZGVzR3JpZDpjLHNsaWRlc1NpemVzR3JpZDp1fSksZCE9PW8mJmUuZW1pdChcInNsaWRlc0xlbmd0aENoYW5nZVwiKSxwLmxlbmd0aCE9PWYmJihlLnBhcmFtcy53YXRjaE92ZXJmbG93JiZlLmNoZWNrT3ZlcmZsb3coKSxlLmVtaXQoXCJzbmFwR3JpZExlbmd0aENoYW5nZVwiKSksYy5sZW5ndGghPT1tJiZlLmVtaXQoXCJzbGlkZXNHcmlkTGVuZ3RoQ2hhbmdlXCIpLCh0LndhdGNoU2xpZGVzUHJvZ3Jlc3N8fHQud2F0Y2hTbGlkZXNWaXNpYmlsaXR5KSYmZS51cGRhdGVTbGlkZXNPZmZzZXQoKX19LHVwZGF0ZUF1dG9IZWlnaHQ6ZnVuY3Rpb24oZSl7dmFyIHQsYT10aGlzLGk9W10scz0wO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlP2Euc2V0VHJhbnNpdGlvbihlKTohMD09PWUmJmEuc2V0VHJhbnNpdGlvbihhLnBhcmFtcy5zcGVlZCksXCJhdXRvXCIhPT1hLnBhcmFtcy5zbGlkZXNQZXJWaWV3JiYxPGEucGFyYW1zLnNsaWRlc1BlclZpZXcpZm9yKHQ9MDt0PE1hdGguY2VpbChhLnBhcmFtcy5zbGlkZXNQZXJWaWV3KTt0Kz0xKXt2YXIgcj1hLmFjdGl2ZUluZGV4K3Q7aWYocj5hLnNsaWRlcy5sZW5ndGgpYnJlYWs7aS5wdXNoKGEuc2xpZGVzLmVxKHIpWzBdKX1lbHNlIGkucHVzaChhLnNsaWRlcy5lcShhLmFjdGl2ZUluZGV4KVswXSk7Zm9yKHQ9MDt0PGkubGVuZ3RoO3QrPTEpaWYodm9pZCAwIT09aVt0XSl7dmFyIG49aVt0XS5vZmZzZXRIZWlnaHQ7cz1zPG4/bjpzfXMmJmEuJHdyYXBwZXJFbC5jc3MoXCJoZWlnaHRcIixzK1wicHhcIil9LHVwZGF0ZVNsaWRlc09mZnNldDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnNsaWRlcyx0PTA7dDxlLmxlbmd0aDt0Kz0xKWVbdF0uc3dpcGVyU2xpZGVPZmZzZXQ9dGhpcy5pc0hvcml6b250YWwoKT9lW3RdLm9mZnNldExlZnQ6ZVt0XS5vZmZzZXRUb3B9LHVwZGF0ZVNsaWRlc1Byb2dyZXNzOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXRoaXMmJnRoaXMudHJhbnNsYXRlfHwwKTt2YXIgdD10aGlzLGE9dC5wYXJhbXMsaT10LnNsaWRlcyxzPXQucnRsVHJhbnNsYXRlO2lmKDAhPT1pLmxlbmd0aCl7dm9pZCAwPT09aVswXS5zd2lwZXJTbGlkZU9mZnNldCYmdC51cGRhdGVTbGlkZXNPZmZzZXQoKTt2YXIgcj0tZTtzJiYocj1lKSxpLnJlbW92ZUNsYXNzKGEuc2xpZGVWaXNpYmxlQ2xhc3MpLHQudmlzaWJsZVNsaWRlc0luZGV4ZXM9W10sdC52aXNpYmxlU2xpZGVzPVtdO2Zvcih2YXIgbj0wO248aS5sZW5ndGg7bis9MSl7dmFyIG89aVtuXSxsPShyKyhhLmNlbnRlcmVkU2xpZGVzP3QubWluVHJhbnNsYXRlKCk6MCktby5zd2lwZXJTbGlkZU9mZnNldCkvKG8uc3dpcGVyU2xpZGVTaXplK2Euc3BhY2VCZXR3ZWVuKTtpZihhLndhdGNoU2xpZGVzVmlzaWJpbGl0eSl7dmFyIGQ9LShyLW8uc3dpcGVyU2xpZGVPZmZzZXQpLHA9ZCt0LnNsaWRlc1NpemVzR3JpZFtuXTsoMDw9ZCYmZDx0LnNpemV8fDA8cCYmcDw9dC5zaXplfHxkPD0wJiZwPj10LnNpemUpJiYodC52aXNpYmxlU2xpZGVzLnB1c2gobyksdC52aXNpYmxlU2xpZGVzSW5kZXhlcy5wdXNoKG4pLGkuZXEobikuYWRkQ2xhc3MoYS5zbGlkZVZpc2libGVDbGFzcykpfW8ucHJvZ3Jlc3M9cz8tbDpsfXQudmlzaWJsZVNsaWRlcz1MKHQudmlzaWJsZVNsaWRlcyl9fSx1cGRhdGVQcm9ncmVzczpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT10aGlzJiZ0aGlzLnRyYW5zbGF0ZXx8MCk7dmFyIHQ9dGhpcyxhPXQucGFyYW1zLGk9dC5tYXhUcmFuc2xhdGUoKS10Lm1pblRyYW5zbGF0ZSgpLHM9dC5wcm9ncmVzcyxyPXQuaXNCZWdpbm5pbmcsbj10LmlzRW5kLG89cixsPW47MD09PWk/bj1yPSEocz0wKToocj0ocz0oZS10Lm1pblRyYW5zbGF0ZSgpKS9pKTw9MCxuPTE8PXMpLGVlLmV4dGVuZCh0LHtwcm9ncmVzczpzLGlzQmVnaW5uaW5nOnIsaXNFbmQ6bn0pLChhLndhdGNoU2xpZGVzUHJvZ3Jlc3N8fGEud2F0Y2hTbGlkZXNWaXNpYmlsaXR5KSYmdC51cGRhdGVTbGlkZXNQcm9ncmVzcyhlKSxyJiYhbyYmdC5lbWl0KFwicmVhY2hCZWdpbm5pbmcgdG9FZGdlXCIpLG4mJiFsJiZ0LmVtaXQoXCJyZWFjaEVuZCB0b0VkZ2VcIiksKG8mJiFyfHxsJiYhbikmJnQuZW1pdChcImZyb21FZGdlXCIpLHQuZW1pdChcInByb2dyZXNzXCIscyl9LHVwZGF0ZVNsaWRlc0NsYXNzZXM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsYT10LnNsaWRlcyxpPXQucGFyYW1zLHM9dC4kd3JhcHBlckVsLHI9dC5hY3RpdmVJbmRleCxuPXQucmVhbEluZGV4LG89dC52aXJ0dWFsJiZpLnZpcnR1YWwuZW5hYmxlZDthLnJlbW92ZUNsYXNzKGkuc2xpZGVBY3RpdmVDbGFzcytcIiBcIitpLnNsaWRlTmV4dENsYXNzK1wiIFwiK2kuc2xpZGVQcmV2Q2xhc3MrXCIgXCIraS5zbGlkZUR1cGxpY2F0ZUFjdGl2ZUNsYXNzK1wiIFwiK2kuc2xpZGVEdXBsaWNhdGVOZXh0Q2xhc3MrXCIgXCIraS5zbGlkZUR1cGxpY2F0ZVByZXZDbGFzcyksKGU9bz90LiR3cmFwcGVyRWwuZmluZChcIi5cIitpLnNsaWRlQ2xhc3MrJ1tkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrcisnXCJdJyk6YS5lcShyKSkuYWRkQ2xhc3MoaS5zbGlkZUFjdGl2ZUNsYXNzKSxpLmxvb3AmJihlLmhhc0NsYXNzKGkuc2xpZGVEdXBsaWNhdGVDbGFzcyk/cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MrXCI6bm90KC5cIitpLnNsaWRlRHVwbGljYXRlQ2xhc3MrJylbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK24rJ1wiXScpLmFkZENsYXNzKGkuc2xpZGVEdXBsaWNhdGVBY3RpdmVDbGFzcyk6cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MrXCIuXCIraS5zbGlkZUR1cGxpY2F0ZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK24rJ1wiXScpLmFkZENsYXNzKGkuc2xpZGVEdXBsaWNhdGVBY3RpdmVDbGFzcykpO3ZhciBsPWUubmV4dEFsbChcIi5cIitpLnNsaWRlQ2xhc3MpLmVxKDApLmFkZENsYXNzKGkuc2xpZGVOZXh0Q2xhc3MpO2kubG9vcCYmMD09PWwubGVuZ3RoJiYobD1hLmVxKDApKS5hZGRDbGFzcyhpLnNsaWRlTmV4dENsYXNzKTt2YXIgZD1lLnByZXZBbGwoXCIuXCIraS5zbGlkZUNsYXNzKS5lcSgwKS5hZGRDbGFzcyhpLnNsaWRlUHJldkNsYXNzKTtpLmxvb3AmJjA9PT1kLmxlbmd0aCYmKGQ9YS5lcSgtMSkpLmFkZENsYXNzKGkuc2xpZGVQcmV2Q2xhc3MpLGkubG9vcCYmKGwuaGFzQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZUNsYXNzKT9zLmNoaWxkcmVuKFwiLlwiK2kuc2xpZGVDbGFzcytcIjpub3QoLlwiK2kuc2xpZGVEdXBsaWNhdGVDbGFzcysnKVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrbC5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikrJ1wiXScpLmFkZENsYXNzKGkuc2xpZGVEdXBsaWNhdGVOZXh0Q2xhc3MpOnMuY2hpbGRyZW4oXCIuXCIraS5zbGlkZUNsYXNzK1wiLlwiK2kuc2xpZGVEdXBsaWNhdGVDbGFzcysnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytsLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSsnXCJdJykuYWRkQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZU5leHRDbGFzcyksZC5oYXNDbGFzcyhpLnNsaWRlRHVwbGljYXRlQ2xhc3MpP3MuY2hpbGRyZW4oXCIuXCIraS5zbGlkZUNsYXNzK1wiOm5vdCguXCIraS5zbGlkZUR1cGxpY2F0ZUNsYXNzKycpW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytkLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSsnXCJdJykuYWRkQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZVByZXZDbGFzcyk6cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MrXCIuXCIraS5zbGlkZUR1cGxpY2F0ZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2QuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpKydcIl0nKS5hZGRDbGFzcyhpLnNsaWRlRHVwbGljYXRlUHJldkNsYXNzKSl9LHVwZGF0ZUFjdGl2ZUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LGE9dGhpcyxpPWEucnRsVHJhbnNsYXRlP2EudHJhbnNsYXRlOi1hLnRyYW5zbGF0ZSxzPWEuc2xpZGVzR3JpZCxyPWEuc25hcEdyaWQsbj1hLnBhcmFtcyxvPWEuYWN0aXZlSW5kZXgsbD1hLnJlYWxJbmRleCxkPWEuc25hcEluZGV4LHA9ZTtpZih2b2lkIDA9PT1wKXtmb3IodmFyIGM9MDtjPHMubGVuZ3RoO2MrPTEpdm9pZCAwIT09c1tjKzFdP2k+PXNbY10mJmk8c1tjKzFdLShzW2MrMV0tc1tjXSkvMj9wPWM6aT49c1tjXSYmaTxzW2MrMV0mJihwPWMrMSk6aT49c1tjXSYmKHA9Yyk7bi5ub3JtYWxpemVTbGlkZUluZGV4JiYocDwwfHx2b2lkIDA9PT1wKSYmKHA9MCl9aWYoKHQ9MDw9ci5pbmRleE9mKGkpP3IuaW5kZXhPZihpKTpNYXRoLmZsb29yKHAvbi5zbGlkZXNQZXJHcm91cCkpPj1yLmxlbmd0aCYmKHQ9ci5sZW5ndGgtMSkscCE9PW8pe3ZhciB1PXBhcnNlSW50KGEuc2xpZGVzLmVxKHApLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKXx8cCwxMCk7ZWUuZXh0ZW5kKGEse3NuYXBJbmRleDp0LHJlYWxJbmRleDp1LHByZXZpb3VzSW5kZXg6byxhY3RpdmVJbmRleDpwfSksYS5lbWl0KFwiYWN0aXZlSW5kZXhDaGFuZ2VcIiksYS5lbWl0KFwic25hcEluZGV4Q2hhbmdlXCIpLGwhPT11JiZhLmVtaXQoXCJyZWFsSW5kZXhDaGFuZ2VcIiksYS5lbWl0KFwic2xpZGVDaGFuZ2VcIil9ZWxzZSB0IT09ZCYmKGEuc25hcEluZGV4PXQsYS5lbWl0KFwic25hcEluZGV4Q2hhbmdlXCIpKX0sdXBkYXRlQ2xpY2tlZFNsaWRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsYT10LnBhcmFtcyxpPUwoZS50YXJnZXQpLmNsb3Nlc3QoXCIuXCIrYS5zbGlkZUNsYXNzKVswXSxzPSExO2lmKGkpZm9yKHZhciByPTA7cjx0LnNsaWRlcy5sZW5ndGg7cis9MSl0LnNsaWRlc1tyXT09PWkmJihzPSEwKTtpZighaXx8IXMpcmV0dXJuIHQuY2xpY2tlZFNsaWRlPXZvaWQgMCx2b2lkKHQuY2xpY2tlZEluZGV4PXZvaWQgMCk7dC5jbGlja2VkU2xpZGU9aSx0LnZpcnR1YWwmJnQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZD90LmNsaWNrZWRJbmRleD1wYXJzZUludChMKGkpLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSwxMCk6dC5jbGlja2VkSW5kZXg9TChpKS5pbmRleCgpLGEuc2xpZGVUb0NsaWNrZWRTbGlkZSYmdm9pZCAwIT09dC5jbGlja2VkSW5kZXgmJnQuY2xpY2tlZEluZGV4IT09dC5hY3RpdmVJbmRleCYmdC5zbGlkZVRvQ2xpY2tlZFNsaWRlKCl9fTt2YXIgcD17Z2V0VHJhbnNsYXRlOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXRoaXMuaXNIb3Jpem9udGFsKCk/XCJ4XCI6XCJ5XCIpO3ZhciB0PXRoaXMucGFyYW1zLGE9dGhpcy5ydGxUcmFuc2xhdGUsaT10aGlzLnRyYW5zbGF0ZSxzPXRoaXMuJHdyYXBwZXJFbDtpZih0LnZpcnR1YWxUcmFuc2xhdGUpcmV0dXJuIGE/LWk6aTt2YXIgcj1lZS5nZXRUcmFuc2xhdGUoc1swXSxlKTtyZXR1cm4gYSYmKHI9LXIpLHJ8fDB9LHNldFRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBhPXRoaXMsaT1hLnJ0bFRyYW5zbGF0ZSxzPWEucGFyYW1zLHI9YS4kd3JhcHBlckVsLG49YS5wcm9ncmVzcyxvPTAsbD0wO2EuaXNIb3Jpem9udGFsKCk/bz1pPy1lOmU6bD1lLHMucm91bmRMZW5ndGhzJiYobz1NYXRoLmZsb29yKG8pLGw9TWF0aC5mbG9vcihsKSkscy52aXJ0dWFsVHJhbnNsYXRlfHwodGUudHJhbnNmb3JtczNkP3IudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoXCIrbytcInB4LCBcIitsK1wicHgsIDBweClcIik6ci50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUoXCIrbytcInB4LCBcIitsK1wicHgpXCIpKSxhLnByZXZpb3VzVHJhbnNsYXRlPWEudHJhbnNsYXRlLGEudHJhbnNsYXRlPWEuaXNIb3Jpem9udGFsKCk/bzpsO3ZhciBkPWEubWF4VHJhbnNsYXRlKCktYS5taW5UcmFuc2xhdGUoKTsoMD09PWQ/MDooZS1hLm1pblRyYW5zbGF0ZSgpKS9kKSE9PW4mJmEudXBkYXRlUHJvZ3Jlc3MoZSksYS5lbWl0KFwic2V0VHJhbnNsYXRlXCIsYS50cmFuc2xhdGUsdCl9LG1pblRyYW5zbGF0ZTpmdW5jdGlvbigpe3JldHVybi10aGlzLnNuYXBHcmlkWzBdfSxtYXhUcmFuc2xhdGU6ZnVuY3Rpb24oKXtyZXR1cm4tdGhpcy5zbmFwR3JpZFt0aGlzLnNuYXBHcmlkLmxlbmd0aC0xXX19O3ZhciBjPXtzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy4kd3JhcHBlckVsLnRyYW5zaXRpb24oZSksdGhpcy5lbWl0KFwic2V0VHJhbnNpdGlvblwiLGUsdCl9LHRyYW5zaXRpb25TdGFydDpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPSEwKTt2YXIgYT10aGlzLGk9YS5hY3RpdmVJbmRleCxzPWEucGFyYW1zLHI9YS5wcmV2aW91c0luZGV4O3MuYXV0b0hlaWdodCYmYS51cGRhdGVBdXRvSGVpZ2h0KCk7dmFyIG49dDtpZihufHwobj1yPGk/XCJuZXh0XCI6aTxyP1wicHJldlwiOlwicmVzZXRcIiksYS5lbWl0KFwidHJhbnNpdGlvblN0YXJ0XCIpLGUmJmkhPT1yKXtpZihcInJlc2V0XCI9PT1uKXJldHVybiB2b2lkIGEuZW1pdChcInNsaWRlUmVzZXRUcmFuc2l0aW9uU3RhcnRcIik7YS5lbWl0KFwic2xpZGVDaGFuZ2VUcmFuc2l0aW9uU3RhcnRcIiksXCJuZXh0XCI9PT1uP2EuZW1pdChcInNsaWRlTmV4dFRyYW5zaXRpb25TdGFydFwiKTphLmVtaXQoXCJzbGlkZVByZXZUcmFuc2l0aW9uU3RhcnRcIil9fSx0cmFuc2l0aW9uRW5kOmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciBhPXRoaXMsaT1hLmFjdGl2ZUluZGV4LHM9YS5wcmV2aW91c0luZGV4O2EuYW5pbWF0aW5nPSExLGEuc2V0VHJhbnNpdGlvbigwKTt2YXIgcj10O2lmKHJ8fChyPXM8aT9cIm5leHRcIjppPHM/XCJwcmV2XCI6XCJyZXNldFwiKSxhLmVtaXQoXCJ0cmFuc2l0aW9uRW5kXCIpLGUmJmkhPT1zKXtpZihcInJlc2V0XCI9PT1yKXJldHVybiB2b2lkIGEuZW1pdChcInNsaWRlUmVzZXRUcmFuc2l0aW9uRW5kXCIpO2EuZW1pdChcInNsaWRlQ2hhbmdlVHJhbnNpdGlvbkVuZFwiKSxcIm5leHRcIj09PXI/YS5lbWl0KFwic2xpZGVOZXh0VHJhbnNpdGlvbkVuZFwiKTphLmVtaXQoXCJzbGlkZVByZXZUcmFuc2l0aW9uRW5kXCIpfX19O3ZhciB1PXtzbGlkZVRvOmZ1bmN0aW9uKGUsdCxhLGkpe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PXQmJih0PXRoaXMucGFyYW1zLnNwZWVkKSx2b2lkIDA9PT1hJiYoYT0hMCk7dmFyIHM9dGhpcyxyPWU7cjwwJiYocj0wKTt2YXIgbj1zLnBhcmFtcyxvPXMuc25hcEdyaWQsbD1zLnNsaWRlc0dyaWQsZD1zLnByZXZpb3VzSW5kZXgscD1zLmFjdGl2ZUluZGV4LGM9cy5ydGxUcmFuc2xhdGU7aWYocy5hbmltYXRpbmcmJm4ucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uKXJldHVybiExO3ZhciB1PU1hdGguZmxvb3Ioci9uLnNsaWRlc1Blckdyb3VwKTt1Pj1vLmxlbmd0aCYmKHU9by5sZW5ndGgtMSksKHB8fG4uaW5pdGlhbFNsaWRlfHwwKT09PShkfHwwKSYmYSYmcy5lbWl0KFwiYmVmb3JlU2xpZGVDaGFuZ2VTdGFydFwiKTt2YXIgaCx2PS1vW3VdO2lmKHMudXBkYXRlUHJvZ3Jlc3Modiksbi5ub3JtYWxpemVTbGlkZUluZGV4KWZvcih2YXIgZj0wO2Y8bC5sZW5ndGg7Zis9MSktTWF0aC5mbG9vcigxMDAqdik+PU1hdGguZmxvb3IoMTAwKmxbZl0pJiYocj1mKTtpZihzLmluaXRpYWxpemVkJiZyIT09cCl7aWYoIXMuYWxsb3dTbGlkZU5leHQmJnY8cy50cmFuc2xhdGUmJnY8cy5taW5UcmFuc2xhdGUoKSlyZXR1cm4hMTtpZighcy5hbGxvd1NsaWRlUHJldiYmdj5zLnRyYW5zbGF0ZSYmdj5zLm1heFRyYW5zbGF0ZSgpJiYocHx8MCkhPT1yKXJldHVybiExfXJldHVybiBoPXA8cj9cIm5leHRcIjpyPHA/XCJwcmV2XCI6XCJyZXNldFwiLGMmJi12PT09cy50cmFuc2xhdGV8fCFjJiZ2PT09cy50cmFuc2xhdGU/KHMudXBkYXRlQWN0aXZlSW5kZXgociksbi5hdXRvSGVpZ2h0JiZzLnVwZGF0ZUF1dG9IZWlnaHQoKSxzLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSxcInNsaWRlXCIhPT1uLmVmZmVjdCYmcy5zZXRUcmFuc2xhdGUodiksXCJyZXNldFwiIT09aCYmKHMudHJhbnNpdGlvblN0YXJ0KGEsaCkscy50cmFuc2l0aW9uRW5kKGEsaCkpLCExKTooMCE9PXQmJnRlLnRyYW5zaXRpb24/KHMuc2V0VHJhbnNpdGlvbih0KSxzLnNldFRyYW5zbGF0ZSh2KSxzLnVwZGF0ZUFjdGl2ZUluZGV4KHIpLHMudXBkYXRlU2xpZGVzQ2xhc3NlcygpLHMuZW1pdChcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLHQsaSkscy50cmFuc2l0aW9uU3RhcnQoYSxoKSxzLmFuaW1hdGluZ3x8KHMuYW5pbWF0aW5nPSEwLHMub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmR8fChzLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKGUpe3MmJiFzLmRlc3Ryb3llZCYmZS50YXJnZXQ9PT10aGlzJiYocy4kd3JhcHBlckVsWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIscy5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkscy4kd3JhcHBlckVsWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIscy5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkscy5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZD1udWxsLGRlbGV0ZSBzLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kLHMudHJhbnNpdGlvbkVuZChhLGgpKX0pLHMuJHdyYXBwZXJFbFswXS5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLHMub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpLHMuJHdyYXBwZXJFbFswXS5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0VHJhbnNpdGlvbkVuZFwiLHMub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpKSk6KHMuc2V0VHJhbnNpdGlvbigwKSxzLnNldFRyYW5zbGF0ZSh2KSxzLnVwZGF0ZUFjdGl2ZUluZGV4KHIpLHMudXBkYXRlU2xpZGVzQ2xhc3NlcygpLHMuZW1pdChcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLHQsaSkscy50cmFuc2l0aW9uU3RhcnQoYSxoKSxzLnRyYW5zaXRpb25FbmQoYSxoKSksITApfSxzbGlkZVRvTG9vcDpmdW5jdGlvbihlLHQsYSxpKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD10aGlzLnBhcmFtcy5zcGVlZCksdm9pZCAwPT09YSYmKGE9ITApO3ZhciBzPWU7cmV0dXJuIHRoaXMucGFyYW1zLmxvb3AmJihzKz10aGlzLmxvb3BlZFNsaWRlcyksdGhpcy5zbGlkZVRvKHMsdCxhLGkpfSxzbGlkZU5leHQ6ZnVuY3Rpb24oZSx0LGEpe3ZvaWQgMD09PWUmJihlPXRoaXMucGFyYW1zLnNwZWVkKSx2b2lkIDA9PT10JiYodD0hMCk7dmFyIGk9dGhpcyxzPWkucGFyYW1zLHI9aS5hbmltYXRpbmc7cmV0dXJuIHMubG9vcD8hciYmKGkubG9vcEZpeCgpLGkuX2NsaWVudExlZnQ9aS4kd3JhcHBlckVsWzBdLmNsaWVudExlZnQsaS5zbGlkZVRvKGkuYWN0aXZlSW5kZXgrcy5zbGlkZXNQZXJHcm91cCxlLHQsYSkpOmkuc2xpZGVUbyhpLmFjdGl2ZUluZGV4K3Muc2xpZGVzUGVyR3JvdXAsZSx0LGEpfSxzbGlkZVByZXY6ZnVuY3Rpb24oZSx0LGEpe3ZvaWQgMD09PWUmJihlPXRoaXMucGFyYW1zLnNwZWVkKSx2b2lkIDA9PT10JiYodD0hMCk7dmFyIGk9dGhpcyxzPWkucGFyYW1zLHI9aS5hbmltYXRpbmcsbj1pLnNuYXBHcmlkLG89aS5zbGlkZXNHcmlkLGw9aS5ydGxUcmFuc2xhdGU7aWYocy5sb29wKXtpZihyKXJldHVybiExO2kubG9vcEZpeCgpLGkuX2NsaWVudExlZnQ9aS4kd3JhcHBlckVsWzBdLmNsaWVudExlZnR9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZTwwPy1NYXRoLmZsb29yKE1hdGguYWJzKGUpKTpNYXRoLmZsb29yKGUpfXZhciBwLGM9ZChsP2kudHJhbnNsYXRlOi1pLnRyYW5zbGF0ZSksdT1uLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZChlKX0pLGg9KG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpfSksblt1LmluZGV4T2YoYyldLG5bdS5pbmRleE9mKGMpLTFdKTtyZXR1cm4gdm9pZCAwIT09aCYmKHA9by5pbmRleE9mKGgpKTwwJiYocD1pLmFjdGl2ZUluZGV4LTEpLGkuc2xpZGVUbyhwLGUsdCxhKX0sc2xpZGVSZXNldDpmdW5jdGlvbihlLHQsYSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMucGFyYW1zLnNwZWVkKSx2b2lkIDA9PT10JiYodD0hMCksdGhpcy5zbGlkZVRvKHRoaXMuYWN0aXZlSW5kZXgsZSx0LGEpfSxzbGlkZVRvQ2xvc2VzdDpmdW5jdGlvbihlLHQsYSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5wYXJhbXMuc3BlZWQpLHZvaWQgMD09PXQmJih0PSEwKTt2YXIgaT10aGlzLHM9aS5hY3RpdmVJbmRleCxyPU1hdGguZmxvb3Iocy9pLnBhcmFtcy5zbGlkZXNQZXJHcm91cCk7aWYocjxpLnNuYXBHcmlkLmxlbmd0aC0xKXt2YXIgbj1pLnJ0bFRyYW5zbGF0ZT9pLnRyYW5zbGF0ZTotaS50cmFuc2xhdGUsbz1pLnNuYXBHcmlkW3JdOyhpLnNuYXBHcmlkW3IrMV0tbykvMjxuLW8mJihzPWkucGFyYW1zLnNsaWRlc1Blckdyb3VwKX1yZXR1cm4gaS5zbGlkZVRvKHMsZSx0LGEpfSxzbGlkZVRvQ2xpY2tlZFNsaWRlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLGE9dC5wYXJhbXMsaT10LiR3cmFwcGVyRWwscz1cImF1dG9cIj09PWEuc2xpZGVzUGVyVmlldz90LnNsaWRlc1BlclZpZXdEeW5hbWljKCk6YS5zbGlkZXNQZXJWaWV3LHI9dC5jbGlja2VkSW5kZXg7aWYoYS5sb29wKXtpZih0LmFuaW1hdGluZylyZXR1cm47ZT1wYXJzZUludChMKHQuY2xpY2tlZFNsaWRlKS5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksMTApLGEuY2VudGVyZWRTbGlkZXM/cjx0Lmxvb3BlZFNsaWRlcy1zLzJ8fHI+dC5zbGlkZXMubGVuZ3RoLXQubG9vcGVkU2xpZGVzK3MvMj8odC5sb29wRml4KCkscj1pLmNoaWxkcmVuKFwiLlwiK2Euc2xpZGVDbGFzcysnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytlKydcIl06bm90KC4nK2Euc2xpZGVEdXBsaWNhdGVDbGFzcytcIilcIikuZXEoMCkuaW5kZXgoKSxlZS5uZXh0VGljayhmdW5jdGlvbigpe3Quc2xpZGVUbyhyKX0pKTp0LnNsaWRlVG8ocik6cj50LnNsaWRlcy5sZW5ndGgtcz8odC5sb29wRml4KCkscj1pLmNoaWxkcmVuKFwiLlwiK2Euc2xpZGVDbGFzcysnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytlKydcIl06bm90KC4nK2Euc2xpZGVEdXBsaWNhdGVDbGFzcytcIilcIikuZXEoMCkuaW5kZXgoKSxlZS5uZXh0VGljayhmdW5jdGlvbigpe3Quc2xpZGVUbyhyKX0pKTp0LnNsaWRlVG8ocil9ZWxzZSB0LnNsaWRlVG8ocil9fTt2YXIgaD17bG9vcENyZWF0ZTpmdW5jdGlvbigpe3ZhciBpPXRoaXMsZT1pLnBhcmFtcyx0PWkuJHdyYXBwZXJFbDt0LmNoaWxkcmVuKFwiLlwiK2Uuc2xpZGVDbGFzcytcIi5cIitlLnNsaWRlRHVwbGljYXRlQ2xhc3MpLnJlbW92ZSgpO3ZhciBzPXQuY2hpbGRyZW4oXCIuXCIrZS5zbGlkZUNsYXNzKTtpZihlLmxvb3BGaWxsR3JvdXBXaXRoQmxhbmspe3ZhciBhPWUuc2xpZGVzUGVyR3JvdXAtcy5sZW5ndGglZS5zbGlkZXNQZXJHcm91cDtpZihhIT09ZS5zbGlkZXNQZXJHcm91cCl7Zm9yKHZhciByPTA7cjxhO3IrPTEpe3ZhciBuPUwoZi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5hZGRDbGFzcyhlLnNsaWRlQ2xhc3MrXCIgXCIrZS5zbGlkZUJsYW5rQ2xhc3MpO3QuYXBwZW5kKG4pfXM9dC5jaGlsZHJlbihcIi5cIitlLnNsaWRlQ2xhc3MpfX1cImF1dG9cIiE9PWUuc2xpZGVzUGVyVmlld3x8ZS5sb29wZWRTbGlkZXN8fChlLmxvb3BlZFNsaWRlcz1zLmxlbmd0aCksaS5sb29wZWRTbGlkZXM9cGFyc2VJbnQoZS5sb29wZWRTbGlkZXN8fGUuc2xpZGVzUGVyVmlldywxMCksaS5sb29wZWRTbGlkZXMrPWUubG9vcEFkZGl0aW9uYWxTbGlkZXMsaS5sb29wZWRTbGlkZXM+cy5sZW5ndGgmJihpLmxvb3BlZFNsaWRlcz1zLmxlbmd0aCk7dmFyIG89W10sbD1bXTtzLmVhY2goZnVuY3Rpb24oZSx0KXt2YXIgYT1MKHQpO2U8aS5sb29wZWRTbGlkZXMmJmwucHVzaCh0KSxlPHMubGVuZ3RoJiZlPj1zLmxlbmd0aC1pLmxvb3BlZFNsaWRlcyYmby5wdXNoKHQpLGEuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIsZSl9KTtmb3IodmFyIGQ9MDtkPGwubGVuZ3RoO2QrPTEpdC5hcHBlbmQoTChsW2RdLmNsb25lTm9kZSghMCkpLmFkZENsYXNzKGUuc2xpZGVEdXBsaWNhdGVDbGFzcykpO2Zvcih2YXIgcD1vLmxlbmd0aC0xOzA8PXA7cC09MSl0LnByZXBlbmQoTChvW3BdLmNsb25lTm9kZSghMCkpLmFkZENsYXNzKGUuc2xpZGVEdXBsaWNhdGVDbGFzcykpfSxsb29wRml4OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLGE9dC5wYXJhbXMsaT10LmFjdGl2ZUluZGV4LHM9dC5zbGlkZXMscj10Lmxvb3BlZFNsaWRlcyxuPXQuYWxsb3dTbGlkZVByZXYsbz10LmFsbG93U2xpZGVOZXh0LGw9dC5zbmFwR3JpZCxkPXQucnRsVHJhbnNsYXRlO3QuYWxsb3dTbGlkZVByZXY9ITAsdC5hbGxvd1NsaWRlTmV4dD0hMDt2YXIgcD0tbFtpXS10LmdldFRyYW5zbGF0ZSgpO2k8cj8oZT1zLmxlbmd0aC0zKnIraSxlKz1yLHQuc2xpZGVUbyhlLDAsITEsITApJiYwIT09cCYmdC5zZXRUcmFuc2xhdGUoKGQ/LXQudHJhbnNsYXRlOnQudHJhbnNsYXRlKS1wKSk6KFwiYXV0b1wiPT09YS5zbGlkZXNQZXJWaWV3JiYyKnI8PWl8fGk+PXMubGVuZ3RoLXIpJiYoZT0tcy5sZW5ndGgraStyLGUrPXIsdC5zbGlkZVRvKGUsMCwhMSwhMCkmJjAhPT1wJiZ0LnNldFRyYW5zbGF0ZSgoZD8tdC50cmFuc2xhdGU6dC50cmFuc2xhdGUpLXApKTt0LmFsbG93U2xpZGVQcmV2PW4sdC5hbGxvd1NsaWRlTmV4dD1vfSxsb29wRGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuJHdyYXBwZXJFbCx0PXRoaXMucGFyYW1zLGE9dGhpcy5zbGlkZXM7ZS5jaGlsZHJlbihcIi5cIit0LnNsaWRlQ2xhc3MrXCIuXCIrdC5zbGlkZUR1cGxpY2F0ZUNsYXNzK1wiLC5cIit0LnNsaWRlQ2xhc3MrXCIuXCIrdC5zbGlkZUJsYW5rQ2xhc3MpLnJlbW92ZSgpLGEucmVtb3ZlQXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpfX07dmFyIHY9e3NldEdyYWJDdXJzb3I6ZnVuY3Rpb24oZSl7aWYoISh0ZS50b3VjaHx8IXRoaXMucGFyYW1zLnNpbXVsYXRlVG91Y2h8fHRoaXMucGFyYW1zLndhdGNoT3ZlcmZsb3cmJnRoaXMuaXNMb2NrZWQpKXt2YXIgdD10aGlzLmVsO3Quc3R5bGUuY3Vyc29yPVwibW92ZVwiLHQuc3R5bGUuY3Vyc29yPWU/XCItd2Via2l0LWdyYWJiaW5nXCI6XCItd2Via2l0LWdyYWJcIix0LnN0eWxlLmN1cnNvcj1lP1wiLW1vei1ncmFiYmluXCI6XCItbW96LWdyYWJcIix0LnN0eWxlLmN1cnNvcj1lP1wiZ3JhYmJpbmdcIjpcImdyYWJcIn19LHVuc2V0R3JhYkN1cnNvcjpmdW5jdGlvbigpe3RlLnRvdWNofHx0aGlzLnBhcmFtcy53YXRjaE92ZXJmbG93JiZ0aGlzLmlzTG9ja2VkfHwodGhpcy5lbC5zdHlsZS5jdXJzb3I9XCJcIil9fTt2YXIgbT17YXBwZW5kU2xpZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxhPXQuJHdyYXBwZXJFbCxpPXQucGFyYW1zO2lmKGkubG9vcCYmdC5sb29wRGVzdHJveSgpLFwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImxlbmd0aFwiaW4gZSlmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrPTEpZVtzXSYmYS5hcHBlbmQoZVtzXSk7ZWxzZSBhLmFwcGVuZChlKTtpLmxvb3AmJnQubG9vcENyZWF0ZSgpLGkub2JzZXJ2ZXImJnRlLm9ic2VydmVyfHx0LnVwZGF0ZSgpfSxwcmVwZW5kU2xpZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxhPXQucGFyYW1zLGk9dC4kd3JhcHBlckVsLHM9dC5hY3RpdmVJbmRleDthLmxvb3AmJnQubG9vcERlc3Ryb3koKTt2YXIgcj1zKzE7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibGVuZ3RoXCJpbiBlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rPTEpZVtuXSYmaS5wcmVwZW5kKGVbbl0pO3I9cytlLmxlbmd0aH1lbHNlIGkucHJlcGVuZChlKTthLmxvb3AmJnQubG9vcENyZWF0ZSgpLGEub2JzZXJ2ZXImJnRlLm9ic2VydmVyfHx0LnVwZGF0ZSgpLHQuc2xpZGVUbyhyLDAsITEpfSxhZGRTbGlkZTpmdW5jdGlvbihlLHQpe3ZhciBhPXRoaXMsaT1hLiR3cmFwcGVyRWwscz1hLnBhcmFtcyxyPWEuYWN0aXZlSW5kZXg7cy5sb29wJiYoci09YS5sb29wZWRTbGlkZXMsYS5sb29wRGVzdHJveSgpLGEuc2xpZGVzPWkuY2hpbGRyZW4oXCIuXCIrcy5zbGlkZUNsYXNzKSk7dmFyIG49YS5zbGlkZXMubGVuZ3RoO2lmKGU8PTApYS5wcmVwZW5kU2xpZGUodCk7ZWxzZSBpZihuPD1lKWEuYXBwZW5kU2xpZGUodCk7ZWxzZXtmb3IodmFyIG89ZTxyP3IrMTpyLGw9W10sZD1uLTE7ZTw9ZDtkLT0xKXt2YXIgcD1hLnNsaWRlcy5lcShkKTtwLnJlbW92ZSgpLGwudW5zaGlmdChwKX1pZihcIm9iamVjdFwiPT10eXBlb2YgdCYmXCJsZW5ndGhcImluIHQpe2Zvcih2YXIgYz0wO2M8dC5sZW5ndGg7Yys9MSl0W2NdJiZpLmFwcGVuZCh0W2NdKTtvPWU8cj9yK3QubGVuZ3RoOnJ9ZWxzZSBpLmFwcGVuZCh0KTtmb3IodmFyIHU9MDt1PGwubGVuZ3RoO3UrPTEpaS5hcHBlbmQobFt1XSk7cy5sb29wJiZhLmxvb3BDcmVhdGUoKSxzLm9ic2VydmVyJiZ0ZS5vYnNlcnZlcnx8YS51cGRhdGUoKSxzLmxvb3A/YS5zbGlkZVRvKG8rYS5sb29wZWRTbGlkZXMsMCwhMSk6YS5zbGlkZVRvKG8sMCwhMSl9fSxyZW1vdmVTbGlkZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC5wYXJhbXMsaT10LiR3cmFwcGVyRWwscz10LmFjdGl2ZUluZGV4O2EubG9vcCYmKHMtPXQubG9vcGVkU2xpZGVzLHQubG9vcERlc3Ryb3koKSx0LnNsaWRlcz1pLmNoaWxkcmVuKFwiLlwiK2Euc2xpZGVDbGFzcykpO3ZhciByLG49cztpZihcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJsZW5ndGhcImluIGUpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bys9MSlyPWVbb10sdC5zbGlkZXNbcl0mJnQuc2xpZGVzLmVxKHIpLnJlbW92ZSgpLHI8biYmKG4tPTEpO249TWF0aC5tYXgobiwwKX1lbHNlIHI9ZSx0LnNsaWRlc1tyXSYmdC5zbGlkZXMuZXEocikucmVtb3ZlKCkscjxuJiYobi09MSksbj1NYXRoLm1heChuLDApO2EubG9vcCYmdC5sb29wQ3JlYXRlKCksYS5vYnNlcnZlciYmdGUub2JzZXJ2ZXJ8fHQudXBkYXRlKCksYS5sb29wP3Quc2xpZGVUbyhuK3QubG9vcGVkU2xpZGVzLDAsITEpOnQuc2xpZGVUbyhuLDAsITEpfSxyZW1vdmVBbGxTbGlkZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wO3Q8dGhpcy5zbGlkZXMubGVuZ3RoO3QrPTEpZS5wdXNoKHQpO3RoaXMucmVtb3ZlU2xpZGUoZSl9fSxnPWZ1bmN0aW9uKCl7dmFyIGU9Si5uYXZpZ2F0b3IudXNlckFnZW50LHQ9e2lvczohMSxhbmRyb2lkOiExLGFuZHJvaWRDaHJvbWU6ITEsZGVza3RvcDohMSx3aW5kb3dzOiExLGlwaG9uZTohMSxpcG9kOiExLGlwYWQ6ITEsY29yZG92YTpKLmNvcmRvdmF8fEoucGhvbmVnYXAscGhvbmVnYXA6Si5jb3Jkb3ZhfHxKLnBob25lZ2FwfSxhPWUubWF0Y2goLyhXaW5kb3dzIFBob25lKTs/W1xcc1xcL10rKFtcXGQuXSspPy8pLGk9ZS5tYXRjaCgvKEFuZHJvaWQpOz9bXFxzXFwvXSsoW1xcZC5dKyk/Lykscz1lLm1hdGNoKC8oaVBhZCkuKk9TXFxzKFtcXGRfXSspLykscj1lLm1hdGNoKC8oaVBvZCkoLipPU1xccyhbXFxkX10rKSk/Lyksbj0hcyYmZS5tYXRjaCgvKGlQaG9uZVxcc09TfGlPUylcXHMoW1xcZF9dKykvKTtpZihhJiYodC5vcz1cIndpbmRvd3NcIix0Lm9zVmVyc2lvbj1hWzJdLHQud2luZG93cz0hMCksaSYmIWEmJih0Lm9zPVwiYW5kcm9pZFwiLHQub3NWZXJzaW9uPWlbMl0sdC5hbmRyb2lkPSEwLHQuYW5kcm9pZENocm9tZT0wPD1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKSksKHN8fG58fHIpJiYodC5vcz1cImlvc1wiLHQuaW9zPSEwKSxuJiYhciYmKHQub3NWZXJzaW9uPW5bMl0ucmVwbGFjZSgvXy9nLFwiLlwiKSx0LmlwaG9uZT0hMCkscyYmKHQub3NWZXJzaW9uPXNbMl0ucmVwbGFjZSgvXy9nLFwiLlwiKSx0LmlwYWQ9ITApLHImJih0Lm9zVmVyc2lvbj1yWzNdP3JbM10ucmVwbGFjZSgvXy9nLFwiLlwiKTpudWxsLHQuaXBob25lPSEwKSx0LmlvcyYmdC5vc1ZlcnNpb24mJjA8PWUuaW5kZXhPZihcIlZlcnNpb24vXCIpJiZcIjEwXCI9PT10Lm9zVmVyc2lvbi5zcGxpdChcIi5cIilbMF0mJih0Lm9zVmVyc2lvbj1lLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJ2ZXJzaW9uL1wiKVsxXS5zcGxpdChcIiBcIilbMF0pLHQuZGVza3RvcD0hKHQub3N8fHQuYW5kcm9pZHx8dC53ZWJWaWV3KSx0LndlYlZpZXc9KG58fHN8fHIpJiZlLm1hdGNoKC8uKkFwcGxlV2ViS2l0KD8hLipTYWZhcmkpL2kpLHQub3MmJlwiaW9zXCI9PT10Lm9zKXt2YXIgbz10Lm9zVmVyc2lvbi5zcGxpdChcIi5cIiksbD1mLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJyk7dC5taW5pbWFsVWk9IXQud2ViVmlldyYmKHJ8fG4pJiYoMSpvWzBdPT03PzE8PTEqb1sxXTo3PDEqb1swXSkmJmwmJjA8PWwuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKS5pbmRleE9mKFwibWluaW1hbC11aVwiKX1yZXR1cm4gdC5waXhlbFJhdGlvPUouZGV2aWNlUGl4ZWxSYXRpb3x8MSx0fSgpO2Z1bmN0aW9uIGIoKXt2YXIgZT10aGlzLHQ9ZS5wYXJhbXMsYT1lLmVsO2lmKCFhfHwwIT09YS5vZmZzZXRXaWR0aCl7dC5icmVha3BvaW50cyYmZS5zZXRCcmVha3BvaW50KCk7dmFyIGk9ZS5hbGxvd1NsaWRlTmV4dCxzPWUuYWxsb3dTbGlkZVByZXYscj1lLnNuYXBHcmlkO2lmKGUuYWxsb3dTbGlkZU5leHQ9ITAsZS5hbGxvd1NsaWRlUHJldj0hMCxlLnVwZGF0ZVNpemUoKSxlLnVwZGF0ZVNsaWRlcygpLHQuZnJlZU1vZGUpe3ZhciBuPU1hdGgubWluKE1hdGgubWF4KGUudHJhbnNsYXRlLGUubWF4VHJhbnNsYXRlKCkpLGUubWluVHJhbnNsYXRlKCkpO2Uuc2V0VHJhbnNsYXRlKG4pLGUudXBkYXRlQWN0aXZlSW5kZXgoKSxlLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSx0LmF1dG9IZWlnaHQmJmUudXBkYXRlQXV0b0hlaWdodCgpfWVsc2UgZS51cGRhdGVTbGlkZXNDbGFzc2VzKCksKFwiYXV0b1wiPT09dC5zbGlkZXNQZXJWaWV3fHwxPHQuc2xpZGVzUGVyVmlldykmJmUuaXNFbmQmJiFlLnBhcmFtcy5jZW50ZXJlZFNsaWRlcz9lLnNsaWRlVG8oZS5zbGlkZXMubGVuZ3RoLTEsMCwhMSwhMCk6ZS5zbGlkZVRvKGUuYWN0aXZlSW5kZXgsMCwhMSwhMCk7ZS5hbGxvd1NsaWRlUHJldj1zLGUuYWxsb3dTbGlkZU5leHQ9aSxlLnBhcmFtcy53YXRjaE92ZXJmbG93JiZyIT09ZS5zbmFwR3JpZCYmZS5jaGVja092ZXJmbG93KCl9fXZhciB3PXtpbml0OiEwLGRpcmVjdGlvbjpcImhvcml6b250YWxcIix0b3VjaEV2ZW50c1RhcmdldDpcImNvbnRhaW5lclwiLGluaXRpYWxTbGlkZTowLHNwZWVkOjMwMCxwcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb246ITEsZWRnZVN3aXBlRGV0ZWN0aW9uOiExLGVkZ2VTd2lwZVRocmVzaG9sZDoyMCxmcmVlTW9kZTohMSxmcmVlTW9kZU1vbWVudHVtOiEwLGZyZWVNb2RlTW9tZW50dW1SYXRpbzoxLGZyZWVNb2RlTW9tZW50dW1Cb3VuY2U6ITAsZnJlZU1vZGVNb21lbnR1bUJvdW5jZVJhdGlvOjEsZnJlZU1vZGVNb21lbnR1bVZlbG9jaXR5UmF0aW86MSxmcmVlTW9kZVN0aWNreTohMSxmcmVlTW9kZU1pbmltdW1WZWxvY2l0eTouMDIsYXV0b0hlaWdodDohMSxzZXRXcmFwcGVyU2l6ZTohMSx2aXJ0dWFsVHJhbnNsYXRlOiExLGVmZmVjdDpcInNsaWRlXCIsYnJlYWtwb2ludHM6dm9pZCAwLGJyZWFrcG9pbnRzSW52ZXJzZTohMSxzcGFjZUJldHdlZW46MCxzbGlkZXNQZXJWaWV3OjEsc2xpZGVzUGVyQ29sdW1uOjEsc2xpZGVzUGVyQ29sdW1uRmlsbDpcImNvbHVtblwiLHNsaWRlc1Blckdyb3VwOjEsY2VudGVyZWRTbGlkZXM6ITEsc2xpZGVzT2Zmc2V0QmVmb3JlOjAsc2xpZGVzT2Zmc2V0QWZ0ZXI6MCxub3JtYWxpemVTbGlkZUluZGV4OiEwLGNlbnRlckluc3VmZmljaWVudFNsaWRlczohMSx3YXRjaE92ZXJmbG93OiExLHJvdW5kTGVuZ3RoczohMSx0b3VjaFJhdGlvOjEsdG91Y2hBbmdsZTo0NSxzaW11bGF0ZVRvdWNoOiEwLHNob3J0U3dpcGVzOiEwLGxvbmdTd2lwZXM6ITAsbG9uZ1N3aXBlc1JhdGlvOi41LGxvbmdTd2lwZXNNczozMDAsZm9sbG93RmluZ2VyOiEwLGFsbG93VG91Y2hNb3ZlOiEwLHRocmVzaG9sZDowLHRvdWNoTW92ZVN0b3BQcm9wYWdhdGlvbjohMCx0b3VjaFN0YXJ0UHJldmVudERlZmF1bHQ6ITAsdG91Y2hTdGFydEZvcmNlUHJldmVudERlZmF1bHQ6ITEsdG91Y2hSZWxlYXNlT25FZGdlczohMSx1bmlxdWVOYXZFbGVtZW50czohMCxyZXNpc3RhbmNlOiEwLHJlc2lzdGFuY2VSYXRpbzouODUsd2F0Y2hTbGlkZXNQcm9ncmVzczohMSx3YXRjaFNsaWRlc1Zpc2liaWxpdHk6ITEsZ3JhYkN1cnNvcjohMSxwcmV2ZW50Q2xpY2tzOiEwLHByZXZlbnRDbGlja3NQcm9wYWdhdGlvbjohMCxzbGlkZVRvQ2xpY2tlZFNsaWRlOiExLHByZWxvYWRJbWFnZXM6ITAsdXBkYXRlT25JbWFnZXNSZWFkeTohMCxsb29wOiExLGxvb3BBZGRpdGlvbmFsU2xpZGVzOjAsbG9vcGVkU2xpZGVzOm51bGwsbG9vcEZpbGxHcm91cFdpdGhCbGFuazohMSxhbGxvd1NsaWRlUHJldjohMCxhbGxvd1NsaWRlTmV4dDohMCxzd2lwZUhhbmRsZXI6bnVsbCxub1N3aXBpbmc6ITAsbm9Td2lwaW5nQ2xhc3M6XCJzd2lwZXItbm8tc3dpcGluZ1wiLG5vU3dpcGluZ1NlbGVjdG9yOm51bGwscGFzc2l2ZUxpc3RlbmVyczohMCxjb250YWluZXJNb2RpZmllckNsYXNzOlwic3dpcGVyLWNvbnRhaW5lci1cIixzbGlkZUNsYXNzOlwic3dpcGVyLXNsaWRlXCIsc2xpZGVCbGFua0NsYXNzOlwic3dpcGVyLXNsaWRlLWludmlzaWJsZS1ibGFua1wiLHNsaWRlQWN0aXZlQ2xhc3M6XCJzd2lwZXItc2xpZGUtYWN0aXZlXCIsc2xpZGVEdXBsaWNhdGVBY3RpdmVDbGFzczpcInN3aXBlci1zbGlkZS1kdXBsaWNhdGUtYWN0aXZlXCIsc2xpZGVWaXNpYmxlQ2xhc3M6XCJzd2lwZXItc2xpZGUtdmlzaWJsZVwiLHNsaWRlRHVwbGljYXRlQ2xhc3M6XCJzd2lwZXItc2xpZGUtZHVwbGljYXRlXCIsc2xpZGVOZXh0Q2xhc3M6XCJzd2lwZXItc2xpZGUtbmV4dFwiLHNsaWRlRHVwbGljYXRlTmV4dENsYXNzOlwic3dpcGVyLXNsaWRlLWR1cGxpY2F0ZS1uZXh0XCIsc2xpZGVQcmV2Q2xhc3M6XCJzd2lwZXItc2xpZGUtcHJldlwiLHNsaWRlRHVwbGljYXRlUHJldkNsYXNzOlwic3dpcGVyLXNsaWRlLWR1cGxpY2F0ZS1wcmV2XCIsd3JhcHBlckNsYXNzOlwic3dpcGVyLXdyYXBwZXJcIixydW5DYWxsYmFja3NPbkluaXQ6ITB9LHk9e3VwZGF0ZTpkLHRyYW5zbGF0ZTpwLHRyYW5zaXRpb246YyxzbGlkZTp1LGxvb3A6aCxncmFiQ3Vyc29yOnYsbWFuaXB1bGF0aW9uOm0sZXZlbnRzOnthdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYXJhbXMsYT1lLnRvdWNoRXZlbnRzLGk9ZS5lbCxzPWUud3JhcHBlckVsO2Uub25Ub3VjaFN0YXJ0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsYT10LnRvdWNoRXZlbnRzRGF0YSxpPXQucGFyYW1zLHM9dC50b3VjaGVzO2lmKCF0LmFuaW1hdGluZ3x8IWkucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uKXt2YXIgcj1lO2lmKHIub3JpZ2luYWxFdmVudCYmKHI9ci5vcmlnaW5hbEV2ZW50KSxhLmlzVG91Y2hFdmVudD1cInRvdWNoc3RhcnRcIj09PXIudHlwZSwoYS5pc1RvdWNoRXZlbnR8fCEoXCJ3aGljaFwiaW4gcil8fDMhPT1yLndoaWNoKSYmISghYS5pc1RvdWNoRXZlbnQmJlwiYnV0dG9uXCJpbiByJiYwPHIuYnV0dG9ufHxhLmlzVG91Y2hlZCYmYS5pc01vdmVkKSlpZihpLm5vU3dpcGluZyYmTChyLnRhcmdldCkuY2xvc2VzdChpLm5vU3dpcGluZ1NlbGVjdG9yP2kubm9Td2lwaW5nU2VsZWN0b3I6XCIuXCIraS5ub1N3aXBpbmdDbGFzcylbMF0pdC5hbGxvd0NsaWNrPSEwO2Vsc2UgaWYoIWkuc3dpcGVIYW5kbGVyfHxMKHIpLmNsb3Nlc3QoaS5zd2lwZUhhbmRsZXIpWzBdKXtzLmN1cnJlbnRYPVwidG91Y2hzdGFydFwiPT09ci50eXBlP3IudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDpyLnBhZ2VYLHMuY3VycmVudFk9XCJ0b3VjaHN0YXJ0XCI9PT1yLnR5cGU/ci50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZOnIucGFnZVk7dmFyIG49cy5jdXJyZW50WCxvPXMuY3VycmVudFksbD1pLmVkZ2VTd2lwZURldGVjdGlvbnx8aS5pT1NFZGdlU3dpcGVEZXRlY3Rpb24sZD1pLmVkZ2VTd2lwZVRocmVzaG9sZHx8aS5pT1NFZGdlU3dpcGVUaHJlc2hvbGQ7aWYoIWx8fCEobjw9ZHx8bj49Si5zY3JlZW4ud2lkdGgtZCkpe2lmKGVlLmV4dGVuZChhLHtpc1RvdWNoZWQ6ITAsaXNNb3ZlZDohMSxhbGxvd1RvdWNoQ2FsbGJhY2tzOiEwLGlzU2Nyb2xsaW5nOnZvaWQgMCxzdGFydE1vdmluZzp2b2lkIDB9KSxzLnN0YXJ0WD1uLHMuc3RhcnRZPW8sYS50b3VjaFN0YXJ0VGltZT1lZS5ub3coKSx0LmFsbG93Q2xpY2s9ITAsdC51cGRhdGVTaXplKCksdC5zd2lwZURpcmVjdGlvbj12b2lkIDAsMDxpLnRocmVzaG9sZCYmKGEuYWxsb3dUaHJlc2hvbGRNb3ZlPSExKSxcInRvdWNoc3RhcnRcIiE9PXIudHlwZSl7dmFyIHA9ITA7TChyLnRhcmdldCkuaXMoYS5mb3JtRWxlbWVudHMpJiYocD0hMSksZi5hY3RpdmVFbGVtZW50JiZMKGYuYWN0aXZlRWxlbWVudCkuaXMoYS5mb3JtRWxlbWVudHMpJiZmLmFjdGl2ZUVsZW1lbnQhPT1yLnRhcmdldCYmZi5hY3RpdmVFbGVtZW50LmJsdXIoKTt2YXIgYz1wJiZ0LmFsbG93VG91Y2hNb3ZlJiZpLnRvdWNoU3RhcnRQcmV2ZW50RGVmYXVsdDsoaS50b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdHx8YykmJnIucHJldmVudERlZmF1bHQoKX10LmVtaXQoXCJ0b3VjaFN0YXJ0XCIscil9fX19LmJpbmQoZSksZS5vblRvdWNoTW92ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC50b3VjaEV2ZW50c0RhdGEsaT10LnBhcmFtcyxzPXQudG91Y2hlcyxyPXQucnRsVHJhbnNsYXRlLG49ZTtpZihuLm9yaWdpbmFsRXZlbnQmJihuPW4ub3JpZ2luYWxFdmVudCksYS5pc1RvdWNoZWQpe2lmKCFhLmlzVG91Y2hFdmVudHx8XCJtb3VzZW1vdmVcIiE9PW4udHlwZSl7dmFyIG89XCJ0b3VjaG1vdmVcIj09PW4udHlwZT9uLnRhcmdldFRvdWNoZXNbMF0ucGFnZVg6bi5wYWdlWCxsPVwidG91Y2htb3ZlXCI9PT1uLnR5cGU/bi50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZOm4ucGFnZVk7aWYobi5wcmV2ZW50ZWRCeU5lc3RlZFN3aXBlcilyZXR1cm4gcy5zdGFydFg9byx2b2lkKHMuc3RhcnRZPWwpO2lmKCF0LmFsbG93VG91Y2hNb3ZlKXJldHVybiB0LmFsbG93Q2xpY2s9ITEsdm9pZChhLmlzVG91Y2hlZCYmKGVlLmV4dGVuZChzLHtzdGFydFg6byxzdGFydFk6bCxjdXJyZW50WDpvLGN1cnJlbnRZOmx9KSxhLnRvdWNoU3RhcnRUaW1lPWVlLm5vdygpKSk7aWYoYS5pc1RvdWNoRXZlbnQmJmkudG91Y2hSZWxlYXNlT25FZGdlcyYmIWkubG9vcClpZih0LmlzVmVydGljYWwoKSl7aWYobDxzLnN0YXJ0WSYmdC50cmFuc2xhdGU8PXQubWF4VHJhbnNsYXRlKCl8fGw+cy5zdGFydFkmJnQudHJhbnNsYXRlPj10Lm1pblRyYW5zbGF0ZSgpKXJldHVybiBhLmlzVG91Y2hlZD0hMSx2b2lkKGEuaXNNb3ZlZD0hMSl9ZWxzZSBpZihvPHMuc3RhcnRYJiZ0LnRyYW5zbGF0ZTw9dC5tYXhUcmFuc2xhdGUoKXx8bz5zLnN0YXJ0WCYmdC50cmFuc2xhdGU+PXQubWluVHJhbnNsYXRlKCkpcmV0dXJuO2lmKGEuaXNUb3VjaEV2ZW50JiZmLmFjdGl2ZUVsZW1lbnQmJm4udGFyZ2V0PT09Zi5hY3RpdmVFbGVtZW50JiZMKG4udGFyZ2V0KS5pcyhhLmZvcm1FbGVtZW50cykpcmV0dXJuIGEuaXNNb3ZlZD0hMCx2b2lkKHQuYWxsb3dDbGljaz0hMSk7aWYoYS5hbGxvd1RvdWNoQ2FsbGJhY2tzJiZ0LmVtaXQoXCJ0b3VjaE1vdmVcIixuKSwhKG4udGFyZ2V0VG91Y2hlcyYmMTxuLnRhcmdldFRvdWNoZXMubGVuZ3RoKSl7cy5jdXJyZW50WD1vLHMuY3VycmVudFk9bDt2YXIgZCxwPXMuY3VycmVudFgtcy5zdGFydFgsYz1zLmN1cnJlbnRZLXMuc3RhcnRZO2lmKCEodC5wYXJhbXMudGhyZXNob2xkJiZNYXRoLnNxcnQoTWF0aC5wb3cocCwyKStNYXRoLnBvdyhjLDIpKTx0LnBhcmFtcy50aHJlc2hvbGQpKWlmKHZvaWQgMD09PWEuaXNTY3JvbGxpbmcmJih0LmlzSG9yaXpvbnRhbCgpJiZzLmN1cnJlbnRZPT09cy5zdGFydFl8fHQuaXNWZXJ0aWNhbCgpJiZzLmN1cnJlbnRYPT09cy5zdGFydFg/YS5pc1Njcm9sbGluZz0hMToyNTw9cCpwK2MqYyYmKGQ9MTgwKk1hdGguYXRhbjIoTWF0aC5hYnMoYyksTWF0aC5hYnMocCkpL01hdGguUEksYS5pc1Njcm9sbGluZz10LmlzSG9yaXpvbnRhbCgpP2Q+aS50b3VjaEFuZ2xlOjkwLWQ+aS50b3VjaEFuZ2xlKSksYS5pc1Njcm9sbGluZyYmdC5lbWl0KFwidG91Y2hNb3ZlT3Bwb3NpdGVcIixuKSx2b2lkIDA9PT1hLnN0YXJ0TW92aW5nJiYocy5jdXJyZW50WD09PXMuc3RhcnRYJiZzLmN1cnJlbnRZPT09cy5zdGFydFl8fChhLnN0YXJ0TW92aW5nPSEwKSksYS5pc1Njcm9sbGluZylhLmlzVG91Y2hlZD0hMTtlbHNlIGlmKGEuc3RhcnRNb3Zpbmcpe3QuYWxsb3dDbGljaz0hMSxuLnByZXZlbnREZWZhdWx0KCksaS50b3VjaE1vdmVTdG9wUHJvcGFnYXRpb24mJiFpLm5lc3RlZCYmbi5zdG9wUHJvcGFnYXRpb24oKSxhLmlzTW92ZWR8fChpLmxvb3AmJnQubG9vcEZpeCgpLGEuc3RhcnRUcmFuc2xhdGU9dC5nZXRUcmFuc2xhdGUoKSx0LnNldFRyYW5zaXRpb24oMCksdC5hbmltYXRpbmcmJnQuJHdyYXBwZXJFbC50cmlnZ2VyKFwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIpLGEuYWxsb3dNb21lbnR1bUJvdW5jZT0hMSwhaS5ncmFiQ3Vyc29yfHwhMCE9PXQuYWxsb3dTbGlkZU5leHQmJiEwIT09dC5hbGxvd1NsaWRlUHJldnx8dC5zZXRHcmFiQ3Vyc29yKCEwKSx0LmVtaXQoXCJzbGlkZXJGaXJzdE1vdmVcIixuKSksdC5lbWl0KFwic2xpZGVyTW92ZVwiLG4pLGEuaXNNb3ZlZD0hMDt2YXIgdT10LmlzSG9yaXpvbnRhbCgpP3A6YztzLmRpZmY9dSx1Kj1pLnRvdWNoUmF0aW8sciYmKHU9LXUpLHQuc3dpcGVEaXJlY3Rpb249MDx1P1wicHJldlwiOlwibmV4dFwiLGEuY3VycmVudFRyYW5zbGF0ZT11K2Euc3RhcnRUcmFuc2xhdGU7dmFyIGg9ITAsdj1pLnJlc2lzdGFuY2VSYXRpbztpZihpLnRvdWNoUmVsZWFzZU9uRWRnZXMmJih2PTApLDA8dSYmYS5jdXJyZW50VHJhbnNsYXRlPnQubWluVHJhbnNsYXRlKCk/KGg9ITEsaS5yZXNpc3RhbmNlJiYoYS5jdXJyZW50VHJhbnNsYXRlPXQubWluVHJhbnNsYXRlKCktMStNYXRoLnBvdygtdC5taW5UcmFuc2xhdGUoKSthLnN0YXJ0VHJhbnNsYXRlK3UsdikpKTp1PDAmJmEuY3VycmVudFRyYW5zbGF0ZTx0Lm1heFRyYW5zbGF0ZSgpJiYoaD0hMSxpLnJlc2lzdGFuY2UmJihhLmN1cnJlbnRUcmFuc2xhdGU9dC5tYXhUcmFuc2xhdGUoKSsxLU1hdGgucG93KHQubWF4VHJhbnNsYXRlKCktYS5zdGFydFRyYW5zbGF0ZS11LHYpKSksaCYmKG4ucHJldmVudGVkQnlOZXN0ZWRTd2lwZXI9ITApLCF0LmFsbG93U2xpZGVOZXh0JiZcIm5leHRcIj09PXQuc3dpcGVEaXJlY3Rpb24mJmEuY3VycmVudFRyYW5zbGF0ZTxhLnN0YXJ0VHJhbnNsYXRlJiYoYS5jdXJyZW50VHJhbnNsYXRlPWEuc3RhcnRUcmFuc2xhdGUpLCF0LmFsbG93U2xpZGVQcmV2JiZcInByZXZcIj09PXQuc3dpcGVEaXJlY3Rpb24mJmEuY3VycmVudFRyYW5zbGF0ZT5hLnN0YXJ0VHJhbnNsYXRlJiYoYS5jdXJyZW50VHJhbnNsYXRlPWEuc3RhcnRUcmFuc2xhdGUpLDA8aS50aHJlc2hvbGQpe2lmKCEoTWF0aC5hYnModSk+aS50aHJlc2hvbGR8fGEuYWxsb3dUaHJlc2hvbGRNb3ZlKSlyZXR1cm4gdm9pZChhLmN1cnJlbnRUcmFuc2xhdGU9YS5zdGFydFRyYW5zbGF0ZSk7aWYoIWEuYWxsb3dUaHJlc2hvbGRNb3ZlKXJldHVybiBhLmFsbG93VGhyZXNob2xkTW92ZT0hMCxzLnN0YXJ0WD1zLmN1cnJlbnRYLHMuc3RhcnRZPXMuY3VycmVudFksYS5jdXJyZW50VHJhbnNsYXRlPWEuc3RhcnRUcmFuc2xhdGUsdm9pZChzLmRpZmY9dC5pc0hvcml6b250YWwoKT9zLmN1cnJlbnRYLXMuc3RhcnRYOnMuY3VycmVudFktcy5zdGFydFkpfWkuZm9sbG93RmluZ2VyJiYoKGkuZnJlZU1vZGV8fGkud2F0Y2hTbGlkZXNQcm9ncmVzc3x8aS53YXRjaFNsaWRlc1Zpc2liaWxpdHkpJiYodC51cGRhdGVBY3RpdmVJbmRleCgpLHQudXBkYXRlU2xpZGVzQ2xhc3NlcygpKSxpLmZyZWVNb2RlJiYoMD09PWEudmVsb2NpdGllcy5sZW5ndGgmJmEudmVsb2NpdGllcy5wdXNoKHtwb3NpdGlvbjpzW3QuaXNIb3Jpem9udGFsKCk/XCJzdGFydFhcIjpcInN0YXJ0WVwiXSx0aW1lOmEudG91Y2hTdGFydFRpbWV9KSxhLnZlbG9jaXRpZXMucHVzaCh7cG9zaXRpb246c1t0LmlzSG9yaXpvbnRhbCgpP1wiY3VycmVudFhcIjpcImN1cnJlbnRZXCJdLHRpbWU6ZWUubm93KCl9KSksdC51cGRhdGVQcm9ncmVzcyhhLmN1cnJlbnRUcmFuc2xhdGUpLHQuc2V0VHJhbnNsYXRlKGEuY3VycmVudFRyYW5zbGF0ZSkpfX19fWVsc2UgYS5zdGFydE1vdmluZyYmYS5pc1Njcm9sbGluZyYmdC5lbWl0KFwidG91Y2hNb3ZlT3Bwb3NpdGVcIixuKX0uYmluZChlKSxlLm9uVG91Y2hFbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxhPXQudG91Y2hFdmVudHNEYXRhLGk9dC5wYXJhbXMscz10LnRvdWNoZXMscj10LnJ0bFRyYW5zbGF0ZSxuPXQuJHdyYXBwZXJFbCxvPXQuc2xpZGVzR3JpZCxsPXQuc25hcEdyaWQsZD1lO2lmKGQub3JpZ2luYWxFdmVudCYmKGQ9ZC5vcmlnaW5hbEV2ZW50KSxhLmFsbG93VG91Y2hDYWxsYmFja3MmJnQuZW1pdChcInRvdWNoRW5kXCIsZCksYS5hbGxvd1RvdWNoQ2FsbGJhY2tzPSExLCFhLmlzVG91Y2hlZClyZXR1cm4gYS5pc01vdmVkJiZpLmdyYWJDdXJzb3ImJnQuc2V0R3JhYkN1cnNvcighMSksYS5pc01vdmVkPSExLHZvaWQoYS5zdGFydE1vdmluZz0hMSk7aS5ncmFiQ3Vyc29yJiZhLmlzTW92ZWQmJmEuaXNUb3VjaGVkJiYoITA9PT10LmFsbG93U2xpZGVOZXh0fHwhMD09PXQuYWxsb3dTbGlkZVByZXYpJiZ0LnNldEdyYWJDdXJzb3IoITEpO3ZhciBwLGM9ZWUubm93KCksdT1jLWEudG91Y2hTdGFydFRpbWU7aWYodC5hbGxvd0NsaWNrJiYodC51cGRhdGVDbGlja2VkU2xpZGUoZCksdC5lbWl0KFwidGFwXCIsZCksdTwzMDAmJjMwMDxjLWEubGFzdENsaWNrVGltZSYmKGEuY2xpY2tUaW1lb3V0JiZjbGVhclRpbWVvdXQoYS5jbGlja1RpbWVvdXQpLGEuY2xpY2tUaW1lb3V0PWVlLm5leHRUaWNrKGZ1bmN0aW9uKCl7dCYmIXQuZGVzdHJveWVkJiZ0LmVtaXQoXCJjbGlja1wiLGQpfSwzMDApKSx1PDMwMCYmYy1hLmxhc3RDbGlja1RpbWU8MzAwJiYoYS5jbGlja1RpbWVvdXQmJmNsZWFyVGltZW91dChhLmNsaWNrVGltZW91dCksdC5lbWl0KFwiZG91YmxlVGFwXCIsZCkpKSxhLmxhc3RDbGlja1RpbWU9ZWUubm93KCksZWUubmV4dFRpY2soZnVuY3Rpb24oKXt0LmRlc3Ryb3llZHx8KHQuYWxsb3dDbGljaz0hMCl9KSwhYS5pc1RvdWNoZWR8fCFhLmlzTW92ZWR8fCF0LnN3aXBlRGlyZWN0aW9ufHwwPT09cy5kaWZmfHxhLmN1cnJlbnRUcmFuc2xhdGU9PT1hLnN0YXJ0VHJhbnNsYXRlKXJldHVybiBhLmlzVG91Y2hlZD0hMSxhLmlzTW92ZWQ9ITEsdm9pZChhLnN0YXJ0TW92aW5nPSExKTtpZihhLmlzVG91Y2hlZD0hMSxhLmlzTW92ZWQ9ITEsYS5zdGFydE1vdmluZz0hMSxwPWkuZm9sbG93RmluZ2VyP3I/dC50cmFuc2xhdGU6LXQudHJhbnNsYXRlOi1hLmN1cnJlbnRUcmFuc2xhdGUsaS5mcmVlTW9kZSl7aWYocDwtdC5taW5UcmFuc2xhdGUoKSlyZXR1cm4gdm9pZCB0LnNsaWRlVG8odC5hY3RpdmVJbmRleCk7aWYocD4tdC5tYXhUcmFuc2xhdGUoKSlyZXR1cm4gdm9pZCh0LnNsaWRlcy5sZW5ndGg8bC5sZW5ndGg/dC5zbGlkZVRvKGwubGVuZ3RoLTEpOnQuc2xpZGVUbyh0LnNsaWRlcy5sZW5ndGgtMSkpO2lmKGkuZnJlZU1vZGVNb21lbnR1bSl7aWYoMTxhLnZlbG9jaXRpZXMubGVuZ3RoKXt2YXIgaD1hLnZlbG9jaXRpZXMucG9wKCksdj1hLnZlbG9jaXRpZXMucG9wKCksZj1oLnBvc2l0aW9uLXYucG9zaXRpb24sbT1oLnRpbWUtdi50aW1lO3QudmVsb2NpdHk9Zi9tLHQudmVsb2NpdHkvPTIsTWF0aC5hYnModC52ZWxvY2l0eSk8aS5mcmVlTW9kZU1pbmltdW1WZWxvY2l0eSYmKHQudmVsb2NpdHk9MCksKDE1MDxtfHwzMDA8ZWUubm93KCktaC50aW1lKSYmKHQudmVsb2NpdHk9MCl9ZWxzZSB0LnZlbG9jaXR5PTA7dC52ZWxvY2l0eSo9aS5mcmVlTW9kZU1vbWVudHVtVmVsb2NpdHlSYXRpbyxhLnZlbG9jaXRpZXMubGVuZ3RoPTA7dmFyIGc9MWUzKmkuZnJlZU1vZGVNb21lbnR1bVJhdGlvLGI9dC52ZWxvY2l0eSpnLHc9dC50cmFuc2xhdGUrYjtyJiYodz0tdyk7dmFyIHkseCxUPSExLEU9MjAqTWF0aC5hYnModC52ZWxvY2l0eSkqaS5mcmVlTW9kZU1vbWVudHVtQm91bmNlUmF0aW87aWYodzx0Lm1heFRyYW5zbGF0ZSgpKWkuZnJlZU1vZGVNb21lbnR1bUJvdW5jZT8odyt0Lm1heFRyYW5zbGF0ZSgpPC1FJiYodz10Lm1heFRyYW5zbGF0ZSgpLUUpLHk9dC5tYXhUcmFuc2xhdGUoKSxUPSEwLGEuYWxsb3dNb21lbnR1bUJvdW5jZT0hMCk6dz10Lm1heFRyYW5zbGF0ZSgpLGkubG9vcCYmaS5jZW50ZXJlZFNsaWRlcyYmKHg9ITApO2Vsc2UgaWYodz50Lm1pblRyYW5zbGF0ZSgpKWkuZnJlZU1vZGVNb21lbnR1bUJvdW5jZT8ody10Lm1pblRyYW5zbGF0ZSgpPkUmJih3PXQubWluVHJhbnNsYXRlKCkrRSkseT10Lm1pblRyYW5zbGF0ZSgpLFQ9ITAsYS5hbGxvd01vbWVudHVtQm91bmNlPSEwKTp3PXQubWluVHJhbnNsYXRlKCksaS5sb29wJiZpLmNlbnRlcmVkU2xpZGVzJiYoeD0hMCk7ZWxzZSBpZihpLmZyZWVNb2RlU3RpY2t5KXtmb3IodmFyIFMsQz0wO0M8bC5sZW5ndGg7Qys9MSlpZihsW0NdPi13KXtTPUM7YnJlYWt9dz0tKHc9TWF0aC5hYnMobFtTXS13KTxNYXRoLmFicyhsW1MtMV0tdyl8fFwibmV4dFwiPT09dC5zd2lwZURpcmVjdGlvbj9sW1NdOmxbUy0xXSl9aWYoeCYmdC5vbmNlKFwidHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7dC5sb29wRml4KCl9KSwwIT09dC52ZWxvY2l0eSlnPXI/TWF0aC5hYnMoKC13LXQudHJhbnNsYXRlKS90LnZlbG9jaXR5KTpNYXRoLmFicygody10LnRyYW5zbGF0ZSkvdC52ZWxvY2l0eSk7ZWxzZSBpZihpLmZyZWVNb2RlU3RpY2t5KXJldHVybiB2b2lkIHQuc2xpZGVUb0Nsb3Nlc3QoKTtpLmZyZWVNb2RlTW9tZW50dW1Cb3VuY2UmJlQ/KHQudXBkYXRlUHJvZ3Jlc3MoeSksdC5zZXRUcmFuc2l0aW9uKGcpLHQuc2V0VHJhbnNsYXRlKHcpLHQudHJhbnNpdGlvblN0YXJ0KCEwLHQuc3dpcGVEaXJlY3Rpb24pLHQuYW5pbWF0aW5nPSEwLG4udHJhbnNpdGlvbkVuZChmdW5jdGlvbigpe3QmJiF0LmRlc3Ryb3llZCYmYS5hbGxvd01vbWVudHVtQm91bmNlJiYodC5lbWl0KFwibW9tZW50dW1Cb3VuY2VcIiksdC5zZXRUcmFuc2l0aW9uKGkuc3BlZWQpLHQuc2V0VHJhbnNsYXRlKHkpLG4udHJhbnNpdGlvbkVuZChmdW5jdGlvbigpe3QmJiF0LmRlc3Ryb3llZCYmdC50cmFuc2l0aW9uRW5kKCl9KSl9KSk6dC52ZWxvY2l0eT8odC51cGRhdGVQcm9ncmVzcyh3KSx0LnNldFRyYW5zaXRpb24oZyksdC5zZXRUcmFuc2xhdGUodyksdC50cmFuc2l0aW9uU3RhcnQoITAsdC5zd2lwZURpcmVjdGlvbiksdC5hbmltYXRpbmd8fCh0LmFuaW1hdGluZz0hMCxuLnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXt0JiYhdC5kZXN0cm95ZWQmJnQudHJhbnNpdGlvbkVuZCgpfSkpKTp0LnVwZGF0ZVByb2dyZXNzKHcpLHQudXBkYXRlQWN0aXZlSW5kZXgoKSx0LnVwZGF0ZVNsaWRlc0NsYXNzZXMoKX1lbHNlIGlmKGkuZnJlZU1vZGVTdGlja3kpcmV0dXJuIHZvaWQgdC5zbGlkZVRvQ2xvc2VzdCgpOyghaS5mcmVlTW9kZU1vbWVudHVtfHx1Pj1pLmxvbmdTd2lwZXNNcykmJih0LnVwZGF0ZVByb2dyZXNzKCksdC51cGRhdGVBY3RpdmVJbmRleCgpLHQudXBkYXRlU2xpZGVzQ2xhc3NlcygpKX1lbHNle2Zvcih2YXIgTT0wLHo9dC5zbGlkZXNTaXplc0dyaWRbMF0sUD0wO1A8by5sZW5ndGg7UCs9aS5zbGlkZXNQZXJHcm91cCl2b2lkIDAhPT1vW1AraS5zbGlkZXNQZXJHcm91cF0/cD49b1tQXSYmcDxvW1AraS5zbGlkZXNQZXJHcm91cF0mJih6PW9bKE09UCkraS5zbGlkZXNQZXJHcm91cF0tb1tQXSk6cD49b1tQXSYmKE09UCx6PW9bby5sZW5ndGgtMV0tb1tvLmxlbmd0aC0yXSk7dmFyIGs9KHAtb1tNXSkvejtpZih1PmkubG9uZ1N3aXBlc01zKXtpZighaS5sb25nU3dpcGVzKXJldHVybiB2b2lkIHQuc2xpZGVUbyh0LmFjdGl2ZUluZGV4KTtcIm5leHRcIj09PXQuc3dpcGVEaXJlY3Rpb24mJihrPj1pLmxvbmdTd2lwZXNSYXRpbz90LnNsaWRlVG8oTStpLnNsaWRlc1Blckdyb3VwKTp0LnNsaWRlVG8oTSkpLFwicHJldlwiPT09dC5zd2lwZURpcmVjdGlvbiYmKGs+MS1pLmxvbmdTd2lwZXNSYXRpbz90LnNsaWRlVG8oTStpLnNsaWRlc1Blckdyb3VwKTp0LnNsaWRlVG8oTSkpfWVsc2V7aWYoIWkuc2hvcnRTd2lwZXMpcmV0dXJuIHZvaWQgdC5zbGlkZVRvKHQuYWN0aXZlSW5kZXgpO1wibmV4dFwiPT09dC5zd2lwZURpcmVjdGlvbiYmdC5zbGlkZVRvKE0raS5zbGlkZXNQZXJHcm91cCksXCJwcmV2XCI9PT10LnN3aXBlRGlyZWN0aW9uJiZ0LnNsaWRlVG8oTSl9fX0uYmluZChlKSxlLm9uQ2xpY2s9ZnVuY3Rpb24oZSl7dGhpcy5hbGxvd0NsaWNrfHwodGhpcy5wYXJhbXMucHJldmVudENsaWNrcyYmZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucGFyYW1zLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbiYmdGhpcy5hbmltYXRpbmcmJihlLnN0b3BQcm9wYWdhdGlvbigpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpKX0uYmluZChlKTt2YXIgcj1cImNvbnRhaW5lclwiPT09dC50b3VjaEV2ZW50c1RhcmdldD9pOnMsbj0hIXQubmVzdGVkO2lmKHRlLnRvdWNofHwhdGUucG9pbnRlckV2ZW50cyYmIXRlLnByZWZpeGVkUG9pbnRlckV2ZW50cyl7aWYodGUudG91Y2gpe3ZhciBvPSEoXCJ0b3VjaHN0YXJ0XCIhPT1hLnN0YXJ0fHwhdGUucGFzc2l2ZUxpc3RlbmVyfHwhdC5wYXNzaXZlTGlzdGVuZXJzKSYme3Bhc3NpdmU6ITAsY2FwdHVyZTohMX07ci5hZGRFdmVudExpc3RlbmVyKGEuc3RhcnQsZS5vblRvdWNoU3RhcnQsbyksci5hZGRFdmVudExpc3RlbmVyKGEubW92ZSxlLm9uVG91Y2hNb3ZlLHRlLnBhc3NpdmVMaXN0ZW5lcj97cGFzc2l2ZTohMSxjYXB0dXJlOm59Om4pLHIuYWRkRXZlbnRMaXN0ZW5lcihhLmVuZCxlLm9uVG91Y2hFbmQsbyl9KHQuc2ltdWxhdGVUb3VjaCYmIWcuaW9zJiYhZy5hbmRyb2lkfHx0LnNpbXVsYXRlVG91Y2gmJiF0ZS50b3VjaCYmZy5pb3MpJiYoci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZS5vblRvdWNoU3RhcnQsITEpLGYuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGUub25Ub3VjaE1vdmUsbiksZi5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGUub25Ub3VjaEVuZCwhMSkpfWVsc2Ugci5hZGRFdmVudExpc3RlbmVyKGEuc3RhcnQsZS5vblRvdWNoU3RhcnQsITEpLGYuYWRkRXZlbnRMaXN0ZW5lcihhLm1vdmUsZS5vblRvdWNoTW92ZSxuKSxmLmFkZEV2ZW50TGlzdGVuZXIoYS5lbmQsZS5vblRvdWNoRW5kLCExKTsodC5wcmV2ZW50Q2xpY2tzfHx0LnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbikmJnIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZS5vbkNsaWNrLCEwKSxlLm9uKGcuaW9zfHxnLmFuZHJvaWQ/XCJyZXNpemUgb3JpZW50YXRpb25jaGFuZ2Ugb2JzZXJ2ZXJVcGRhdGVcIjpcInJlc2l6ZSBvYnNlcnZlclVwZGF0ZVwiLGIsITApfSxkZXRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYXJhbXMsYT1lLnRvdWNoRXZlbnRzLGk9ZS5lbCxzPWUud3JhcHBlckVsLHI9XCJjb250YWluZXJcIj09PXQudG91Y2hFdmVudHNUYXJnZXQ/aTpzLG49ISF0Lm5lc3RlZDtpZih0ZS50b3VjaHx8IXRlLnBvaW50ZXJFdmVudHMmJiF0ZS5wcmVmaXhlZFBvaW50ZXJFdmVudHMpe2lmKHRlLnRvdWNoKXt2YXIgbz0hKFwib25Ub3VjaFN0YXJ0XCIhPT1hLnN0YXJ0fHwhdGUucGFzc2l2ZUxpc3RlbmVyfHwhdC5wYXNzaXZlTGlzdGVuZXJzKSYme3Bhc3NpdmU6ITAsY2FwdHVyZTohMX07ci5yZW1vdmVFdmVudExpc3RlbmVyKGEuc3RhcnQsZS5vblRvdWNoU3RhcnQsbyksci5yZW1vdmVFdmVudExpc3RlbmVyKGEubW92ZSxlLm9uVG91Y2hNb3ZlLG4pLHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLmVuZCxlLm9uVG91Y2hFbmQsbyl9KHQuc2ltdWxhdGVUb3VjaCYmIWcuaW9zJiYhZy5hbmRyb2lkfHx0LnNpbXVsYXRlVG91Y2gmJiF0ZS50b3VjaCYmZy5pb3MpJiYoci5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZS5vblRvdWNoU3RhcnQsITEpLGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGUub25Ub3VjaE1vdmUsbiksZi5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGUub25Ub3VjaEVuZCwhMSkpfWVsc2Ugci5yZW1vdmVFdmVudExpc3RlbmVyKGEuc3RhcnQsZS5vblRvdWNoU3RhcnQsITEpLGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLm1vdmUsZS5vblRvdWNoTW92ZSxuKSxmLnJlbW92ZUV2ZW50TGlzdGVuZXIoYS5lbmQsZS5vblRvdWNoRW5kLCExKTsodC5wcmV2ZW50Q2xpY2tzfHx0LnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbikmJnIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZS5vbkNsaWNrLCEwKSxlLm9mZihnLmlvc3x8Zy5hbmRyb2lkP1wicmVzaXplIG9yaWVudGF0aW9uY2hhbmdlIG9ic2VydmVyVXBkYXRlXCI6XCJyZXNpemUgb2JzZXJ2ZXJVcGRhdGVcIixiKX19LGJyZWFrcG9pbnRzOntzZXRCcmVha3BvaW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuYWN0aXZlSW5kZXgsYT1lLmluaXRpYWxpemVkLGk9ZS5sb29wZWRTbGlkZXM7dm9pZCAwPT09aSYmKGk9MCk7dmFyIHM9ZS5wYXJhbXMscj1zLmJyZWFrcG9pbnRzO2lmKHImJighcnx8MCE9PU9iamVjdC5rZXlzKHIpLmxlbmd0aCkpe3ZhciBuPWUuZ2V0QnJlYWtwb2ludChyKTtpZihuJiZlLmN1cnJlbnRCcmVha3BvaW50IT09bil7dmFyIG89biBpbiByP3Jbbl06dm9pZCAwO28mJltcInNsaWRlc1BlclZpZXdcIixcInNwYWNlQmV0d2VlblwiLFwic2xpZGVzUGVyR3JvdXBcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1vW2VdO3ZvaWQgMCE9PXQmJihvW2VdPVwic2xpZGVzUGVyVmlld1wiIT09ZXx8XCJBVVRPXCIhPT10JiZcImF1dG9cIiE9PXQ/XCJzbGlkZXNQZXJWaWV3XCI9PT1lP3BhcnNlRmxvYXQodCk6cGFyc2VJbnQodCwxMCk6XCJhdXRvXCIpfSk7dmFyIGw9b3x8ZS5vcmlnaW5hbFBhcmFtcyxkPWwuZGlyZWN0aW9uJiZsLmRpcmVjdGlvbiE9PXMuZGlyZWN0aW9uLHA9cy5sb29wJiYobC5zbGlkZXNQZXJWaWV3IT09cy5zbGlkZXNQZXJWaWV3fHxkKTtkJiZhJiZlLmNoYW5nZURpcmVjdGlvbigpLGVlLmV4dGVuZChlLnBhcmFtcyxsKSxlZS5leHRlbmQoZSx7YWxsb3dUb3VjaE1vdmU6ZS5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsYWxsb3dTbGlkZU5leHQ6ZS5wYXJhbXMuYWxsb3dTbGlkZU5leHQsYWxsb3dTbGlkZVByZXY6ZS5wYXJhbXMuYWxsb3dTbGlkZVByZXZ9KSxlLmN1cnJlbnRCcmVha3BvaW50PW4scCYmYSYmKGUubG9vcERlc3Ryb3koKSxlLmxvb3BDcmVhdGUoKSxlLnVwZGF0ZVNsaWRlcygpLGUuc2xpZGVUbyh0LWkrZS5sb29wZWRTbGlkZXMsMCwhMSkpLGUuZW1pdChcImJyZWFrcG9pbnRcIixsKX19fSxnZXRCcmVha3BvaW50OmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PSExLGE9W107T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihlKXthLnB1c2goZSl9KSxhLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gcGFyc2VJbnQoZSwxMCktcGFyc2VJbnQodCwxMCl9KTtmb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krPTEpe3ZhciBzPWFbaV07dGhpcy5wYXJhbXMuYnJlYWtwb2ludHNJbnZlcnNlP3M8PUouaW5uZXJXaWR0aCYmKHQ9cyk6cz49Si5pbm5lcldpZHRoJiYhdCYmKHQ9cyl9cmV0dXJuIHR8fFwibWF4XCJ9fX0sY2hlY2tPdmVyZmxvdzp7Y2hlY2tPdmVyZmxvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmlzTG9ja2VkO2UuaXNMb2NrZWQ9MT09PWUuc25hcEdyaWQubGVuZ3RoLGUuYWxsb3dTbGlkZU5leHQ9IWUuaXNMb2NrZWQsZS5hbGxvd1NsaWRlUHJldj0hZS5pc0xvY2tlZCx0IT09ZS5pc0xvY2tlZCYmZS5lbWl0KGUuaXNMb2NrZWQ/XCJsb2NrXCI6XCJ1bmxvY2tcIiksdCYmdCE9PWUuaXNMb2NrZWQmJihlLmlzRW5kPSExLGUubmF2aWdhdGlvbi51cGRhdGUoKSl9fSxjbGFzc2VzOnthZGRDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jbGFzc05hbWVzLGE9dGhpcy5wYXJhbXMsZT10aGlzLnJ0bCxpPXRoaXMuJGVsLHM9W107cy5wdXNoKFwiaW5pdGlhbGl6ZWRcIikscy5wdXNoKGEuZGlyZWN0aW9uKSxhLmZyZWVNb2RlJiZzLnB1c2goXCJmcmVlLW1vZGVcIiksdGUuZmxleGJveHx8cy5wdXNoKFwibm8tZmxleGJveFwiKSxhLmF1dG9IZWlnaHQmJnMucHVzaChcImF1dG9oZWlnaHRcIiksZSYmcy5wdXNoKFwicnRsXCIpLDE8YS5zbGlkZXNQZXJDb2x1bW4mJnMucHVzaChcIm11bHRpcm93XCIpLGcuYW5kcm9pZCYmcy5wdXNoKFwiYW5kcm9pZFwiKSxnLmlvcyYmcy5wdXNoKFwiaW9zXCIpLChJLmlzSUV8fEkuaXNFZGdlKSYmKHRlLnBvaW50ZXJFdmVudHN8fHRlLnByZWZpeGVkUG9pbnRlckV2ZW50cykmJnMucHVzaChcIndwOC1cIithLmRpcmVjdGlvbikscy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QucHVzaChhLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrZSl9KSxpLmFkZENsYXNzKHQuam9pbihcIiBcIikpfSxyZW1vdmVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kZWwsdD10aGlzLmNsYXNzTmFtZXM7ZS5yZW1vdmVDbGFzcyh0LmpvaW4oXCIgXCIpKX19LGltYWdlczp7bG9hZEltYWdlOmZ1bmN0aW9uKGUsdCxhLGkscyxyKXt2YXIgbjtmdW5jdGlvbiBvKCl7ciYmcigpfWUuY29tcGxldGUmJnM/bygpOnQ/KChuPW5ldyBKLkltYWdlKS5vbmxvYWQ9byxuLm9uZXJyb3I9byxpJiYobi5zaXplcz1pKSxhJiYobi5zcmNzZXQ9YSksdCYmKG4uc3JjPXQpKTpvKCl9LHByZWxvYWRJbWFnZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Z1bmN0aW9uIHQoKXtudWxsIT1lJiZlJiYhZS5kZXN0cm95ZWQmJih2b2lkIDAhPT1lLmltYWdlc0xvYWRlZCYmKGUuaW1hZ2VzTG9hZGVkKz0xKSxlLmltYWdlc0xvYWRlZD09PWUuaW1hZ2VzVG9Mb2FkLmxlbmd0aCYmKGUucGFyYW1zLnVwZGF0ZU9uSW1hZ2VzUmVhZHkmJmUudXBkYXRlKCksZS5lbWl0KFwiaW1hZ2VzUmVhZHlcIikpKX1lLmltYWdlc1RvTG9hZD1lLiRlbC5maW5kKFwiaW1nXCIpO2Zvcih2YXIgYT0wO2E8ZS5pbWFnZXNUb0xvYWQubGVuZ3RoO2ErPTEpe3ZhciBpPWUuaW1hZ2VzVG9Mb2FkW2FdO2UubG9hZEltYWdlKGksaS5jdXJyZW50U3JjfHxpLmdldEF0dHJpYnV0ZShcInNyY1wiKSxpLnNyY3NldHx8aS5nZXRBdHRyaWJ1dGUoXCJzcmNzZXRcIiksaS5zaXplc3x8aS5nZXRBdHRyaWJ1dGUoXCJzaXplc1wiKSwhMCx0KX19fX0seD17fSxUPWZ1bmN0aW9uKHUpe2Z1bmN0aW9uIGgoKXtmb3IodmFyIGUsdCxzLGE9W10saT1hcmd1bWVudHMubGVuZ3RoO2ktLTspYVtpXT1hcmd1bWVudHNbaV07MT09PWEubGVuZ3RoJiZhWzBdLmNvbnN0cnVjdG9yJiZhWzBdLmNvbnN0cnVjdG9yPT09T2JqZWN0P3M9YVswXToodD0oZT1hKVswXSxzPWVbMV0pLHN8fChzPXt9KSxzPWVlLmV4dGVuZCh7fSxzKSx0JiYhcy5lbCYmKHMuZWw9dCksdS5jYWxsKHRoaXMscyksT2JqZWN0LmtleXMoeSkuZm9yRWFjaChmdW5jdGlvbih0KXtPYmplY3Qua2V5cyh5W3RdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2gucHJvdG90eXBlW2VdfHwoaC5wcm90b3R5cGVbZV09eVt0XVtlXSl9KX0pO3ZhciByPXRoaXM7dm9pZCAwPT09ci5tb2R1bGVzJiYoci5tb2R1bGVzPXt9KSxPYmplY3Qua2V5cyhyLm1vZHVsZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ci5tb2R1bGVzW2VdO2lmKHQucGFyYW1zKXt2YXIgYT1PYmplY3Qua2V5cyh0LnBhcmFtcylbMF0saT10LnBhcmFtc1thXTtpZihcIm9iamVjdFwiIT10eXBlb2YgaXx8bnVsbD09PWkpcmV0dXJuO2lmKCEoYSBpbiBzJiZcImVuYWJsZWRcImluIGkpKXJldHVybjshMD09PXNbYV0mJihzW2FdPXtlbmFibGVkOiEwfSksXCJvYmplY3RcIiE9dHlwZW9mIHNbYV18fFwiZW5hYmxlZFwiaW4gc1thXXx8KHNbYV0uZW5hYmxlZD0hMCksc1thXXx8KHNbYV09e2VuYWJsZWQ6ITF9KX19KTt2YXIgbj1lZS5leHRlbmQoe30sdyk7ci51c2VNb2R1bGVzUGFyYW1zKG4pLHIucGFyYW1zPWVlLmV4dGVuZCh7fSxuLHgscyksci5vcmlnaW5hbFBhcmFtcz1lZS5leHRlbmQoe30sci5wYXJhbXMpLHIucGFzc2VkUGFyYW1zPWVlLmV4dGVuZCh7fSxzKTt2YXIgbz0oci4kPUwpKHIucGFyYW1zLmVsKTtpZih0PW9bMF0pe2lmKDE8by5sZW5ndGgpe3ZhciBsPVtdO3JldHVybiBvLmVhY2goZnVuY3Rpb24oZSx0KXt2YXIgYT1lZS5leHRlbmQoe30scyx7ZWw6dH0pO2wucHVzaChuZXcgaChhKSl9KSxsfXQuc3dpcGVyPXIsby5kYXRhKFwic3dpcGVyXCIscik7dmFyIGQscCxjPW8uY2hpbGRyZW4oXCIuXCIrci5wYXJhbXMud3JhcHBlckNsYXNzKTtyZXR1cm4gZWUuZXh0ZW5kKHIseyRlbDpvLGVsOnQsJHdyYXBwZXJFbDpjLHdyYXBwZXJFbDpjWzBdLGNsYXNzTmFtZXM6W10sc2xpZGVzOkwoKSxzbGlkZXNHcmlkOltdLHNuYXBHcmlkOltdLHNsaWRlc1NpemVzR3JpZDpbXSxpc0hvcml6b250YWw6ZnVuY3Rpb24oKXtyZXR1cm5cImhvcml6b250YWxcIj09PXIucGFyYW1zLmRpcmVjdGlvbn0saXNWZXJ0aWNhbDpmdW5jdGlvbigpe3JldHVyblwidmVydGljYWxcIj09PXIucGFyYW1zLmRpcmVjdGlvbn0scnRsOlwicnRsXCI9PT10LmRpci50b0xvd2VyQ2FzZSgpfHxcInJ0bFwiPT09by5jc3MoXCJkaXJlY3Rpb25cIikscnRsVHJhbnNsYXRlOlwiaG9yaXpvbnRhbFwiPT09ci5wYXJhbXMuZGlyZWN0aW9uJiYoXCJydGxcIj09PXQuZGlyLnRvTG93ZXJDYXNlKCl8fFwicnRsXCI9PT1vLmNzcyhcImRpcmVjdGlvblwiKSksd3JvbmdSVEw6XCItd2Via2l0LWJveFwiPT09Yy5jc3MoXCJkaXNwbGF5XCIpLGFjdGl2ZUluZGV4OjAscmVhbEluZGV4OjAsaXNCZWdpbm5pbmc6ITAsaXNFbmQ6ITEsdHJhbnNsYXRlOjAscHJldmlvdXNUcmFuc2xhdGU6MCxwcm9ncmVzczowLHZlbG9jaXR5OjAsYW5pbWF0aW5nOiExLGFsbG93U2xpZGVOZXh0OnIucGFyYW1zLmFsbG93U2xpZGVOZXh0LGFsbG93U2xpZGVQcmV2OnIucGFyYW1zLmFsbG93U2xpZGVQcmV2LHRvdWNoRXZlbnRzOihkPVtcInRvdWNoc3RhcnRcIixcInRvdWNobW92ZVwiLFwidG91Y2hlbmRcIl0scD1bXCJtb3VzZWRvd25cIixcIm1vdXNlbW92ZVwiLFwibW91c2V1cFwiXSx0ZS5wb2ludGVyRXZlbnRzP3A9W1wicG9pbnRlcmRvd25cIixcInBvaW50ZXJtb3ZlXCIsXCJwb2ludGVydXBcIl06dGUucHJlZml4ZWRQb2ludGVyRXZlbnRzJiYocD1bXCJNU1BvaW50ZXJEb3duXCIsXCJNU1BvaW50ZXJNb3ZlXCIsXCJNU1BvaW50ZXJVcFwiXSksci50b3VjaEV2ZW50c1RvdWNoPXtzdGFydDpkWzBdLG1vdmU6ZFsxXSxlbmQ6ZFsyXX0sci50b3VjaEV2ZW50c0Rlc2t0b3A9e3N0YXJ0OnBbMF0sbW92ZTpwWzFdLGVuZDpwWzJdfSx0ZS50b3VjaHx8IXIucGFyYW1zLnNpbXVsYXRlVG91Y2g/ci50b3VjaEV2ZW50c1RvdWNoOnIudG91Y2hFdmVudHNEZXNrdG9wKSx0b3VjaEV2ZW50c0RhdGE6e2lzVG91Y2hlZDp2b2lkIDAsaXNNb3ZlZDp2b2lkIDAsYWxsb3dUb3VjaENhbGxiYWNrczp2b2lkIDAsdG91Y2hTdGFydFRpbWU6dm9pZCAwLGlzU2Nyb2xsaW5nOnZvaWQgMCxjdXJyZW50VHJhbnNsYXRlOnZvaWQgMCxzdGFydFRyYW5zbGF0ZTp2b2lkIDAsYWxsb3dUaHJlc2hvbGRNb3ZlOnZvaWQgMCxmb3JtRWxlbWVudHM6XCJpbnB1dCwgc2VsZWN0LCBvcHRpb24sIHRleHRhcmVhLCBidXR0b24sIHZpZGVvXCIsbGFzdENsaWNrVGltZTplZS5ub3coKSxjbGlja1RpbWVvdXQ6dm9pZCAwLHZlbG9jaXRpZXM6W10sYWxsb3dNb21lbnR1bUJvdW5jZTp2b2lkIDAsaXNUb3VjaEV2ZW50OnZvaWQgMCxzdGFydE1vdmluZzp2b2lkIDB9LGFsbG93Q2xpY2s6ITAsYWxsb3dUb3VjaE1vdmU6ci5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsdG91Y2hlczp7c3RhcnRYOjAsc3RhcnRZOjAsY3VycmVudFg6MCxjdXJyZW50WTowLGRpZmY6MH0saW1hZ2VzVG9Mb2FkOltdLGltYWdlc0xvYWRlZDowfSksci51c2VNb2R1bGVzKCksci5wYXJhbXMuaW5pdCYmci5pbml0KCkscn19dSYmKGguX19wcm90b19fPXUpO3ZhciBlPXtleHRlbmRlZERlZmF1bHRzOntjb25maWd1cmFibGU6ITB9LGRlZmF1bHRzOntjb25maWd1cmFibGU6ITB9LENsYXNzOntjb25maWd1cmFibGU6ITB9LCQ6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybigoaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1JiZ1LnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWgpLnByb3RvdHlwZS5zbGlkZXNQZXJWaWV3RHluYW1pYz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBhcmFtcyxhPWUuc2xpZGVzLGk9ZS5zbGlkZXNHcmlkLHM9ZS5zaXplLHI9ZS5hY3RpdmVJbmRleCxuPTE7aWYodC5jZW50ZXJlZFNsaWRlcyl7Zm9yKHZhciBvLGw9YVtyXS5zd2lwZXJTbGlkZVNpemUsZD1yKzE7ZDxhLmxlbmd0aDtkKz0xKWFbZF0mJiFvJiYobis9MSxzPChsKz1hW2RdLnN3aXBlclNsaWRlU2l6ZSkmJihvPSEwKSk7Zm9yKHZhciBwPXItMTswPD1wO3AtPTEpYVtwXSYmIW8mJihuKz0xLHM8KGwrPWFbcF0uc3dpcGVyU2xpZGVTaXplKSYmKG89ITApKX1lbHNlIGZvcih2YXIgYz1yKzE7YzxhLmxlbmd0aDtjKz0xKWlbY10taVtyXTxzJiYobis9MSk7cmV0dXJuIG59LGgucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYSYmIWEuZGVzdHJveWVkKXt2YXIgZT1hLnNuYXBHcmlkLHQ9YS5wYXJhbXM7dC5icmVha3BvaW50cyYmYS5zZXRCcmVha3BvaW50KCksYS51cGRhdGVTaXplKCksYS51cGRhdGVTbGlkZXMoKSxhLnVwZGF0ZVByb2dyZXNzKCksYS51cGRhdGVTbGlkZXNDbGFzc2VzKCksYS5wYXJhbXMuZnJlZU1vZGU/KGkoKSxhLnBhcmFtcy5hdXRvSGVpZ2h0JiZhLnVwZGF0ZUF1dG9IZWlnaHQoKSk6KChcImF1dG9cIj09PWEucGFyYW1zLnNsaWRlc1BlclZpZXd8fDE8YS5wYXJhbXMuc2xpZGVzUGVyVmlldykmJmEuaXNFbmQmJiFhLnBhcmFtcy5jZW50ZXJlZFNsaWRlcz9hLnNsaWRlVG8oYS5zbGlkZXMubGVuZ3RoLTEsMCwhMSwhMCk6YS5zbGlkZVRvKGEuYWN0aXZlSW5kZXgsMCwhMSwhMCkpfHxpKCksdC53YXRjaE92ZXJmbG93JiZlIT09YS5zbmFwR3JpZCYmYS5jaGVja092ZXJmbG93KCksYS5lbWl0KFwidXBkYXRlXCIpfWZ1bmN0aW9uIGkoKXt2YXIgZT1hLnJ0bFRyYW5zbGF0ZT8tMSphLnRyYW5zbGF0ZTphLnRyYW5zbGF0ZSx0PU1hdGgubWluKE1hdGgubWF4KGUsYS5tYXhUcmFuc2xhdGUoKSksYS5taW5UcmFuc2xhdGUoKSk7YS5zZXRUcmFuc2xhdGUodCksYS51cGRhdGVBY3RpdmVJbmRleCgpLGEudXBkYXRlU2xpZGVzQ2xhc3NlcygpfX0saC5wcm90b3R5cGUuY2hhbmdlRGlyZWN0aW9uPWZ1bmN0aW9uKGEsZSl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciB0PXRoaXMsaT10LnBhcmFtcy5kaXJlY3Rpb247cmV0dXJuIGF8fChhPVwiaG9yaXpvbnRhbFwiPT09aT9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCIpLGE9PT1pfHxcImhvcml6b250YWxcIiE9PWEmJlwidmVydGljYWxcIiE9PWF8fChcInZlcnRpY2FsXCI9PT1pJiYodC4kZWwucmVtb3ZlQ2xhc3ModC5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcytcInZlcnRpY2FsIHdwOC12ZXJ0aWNhbFwiKS5hZGRDbGFzcyhcIlwiK3QucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrYSksKEkuaXNJRXx8SS5pc0VkZ2UpJiYodGUucG9pbnRlckV2ZW50c3x8dGUucHJlZml4ZWRQb2ludGVyRXZlbnRzKSYmdC4kZWwuYWRkQ2xhc3ModC5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcytcIndwOC1cIithKSksXCJob3Jpem9udGFsXCI9PT1pJiYodC4kZWwucmVtb3ZlQ2xhc3ModC5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcytcImhvcml6b250YWwgd3A4LWhvcml6b250YWxcIikuYWRkQ2xhc3MoXCJcIit0LnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzK2EpLChJLmlzSUV8fEkuaXNFZGdlKSYmKHRlLnBvaW50ZXJFdmVudHN8fHRlLnByZWZpeGVkUG9pbnRlckV2ZW50cykmJnQuJGVsLmFkZENsYXNzKHQucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJ3cDgtXCIrYSkpLHQucGFyYW1zLmRpcmVjdGlvbj1hLHQuc2xpZGVzLmVhY2goZnVuY3Rpb24oZSx0KXtcInZlcnRpY2FsXCI9PT1hP3Quc3R5bGUud2lkdGg9XCJcIjp0LnN0eWxlLmhlaWdodD1cIlwifSksdC5lbWl0KFwiY2hhbmdlRGlyZWN0aW9uXCIpLGUmJnQudXBkYXRlKCkpLHR9LGgucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuaW5pdGlhbGl6ZWR8fChlLmVtaXQoXCJiZWZvcmVJbml0XCIpLGUucGFyYW1zLmJyZWFrcG9pbnRzJiZlLnNldEJyZWFrcG9pbnQoKSxlLmFkZENsYXNzZXMoKSxlLnBhcmFtcy5sb29wJiZlLmxvb3BDcmVhdGUoKSxlLnVwZGF0ZVNpemUoKSxlLnVwZGF0ZVNsaWRlcygpLGUucGFyYW1zLndhdGNoT3ZlcmZsb3cmJmUuY2hlY2tPdmVyZmxvdygpLGUucGFyYW1zLmdyYWJDdXJzb3ImJmUuc2V0R3JhYkN1cnNvcigpLGUucGFyYW1zLnByZWxvYWRJbWFnZXMmJmUucHJlbG9hZEltYWdlcygpLGUucGFyYW1zLmxvb3A/ZS5zbGlkZVRvKGUucGFyYW1zLmluaXRpYWxTbGlkZStlLmxvb3BlZFNsaWRlcywwLGUucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCk6ZS5zbGlkZVRvKGUucGFyYW1zLmluaXRpYWxTbGlkZSwwLGUucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCksZS5hdHRhY2hFdmVudHMoKSxlLmluaXRpYWxpemVkPSEwLGUuZW1pdChcImluaXRcIikpfSxoLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9ITApLHZvaWQgMD09PXQmJih0PSEwKTt2YXIgYT10aGlzLGk9YS5wYXJhbXMscz1hLiRlbCxyPWEuJHdyYXBwZXJFbCxuPWEuc2xpZGVzO3JldHVybiB2b2lkIDA9PT1hLnBhcmFtc3x8YS5kZXN0cm95ZWR8fChhLmVtaXQoXCJiZWZvcmVEZXN0cm95XCIpLGEuaW5pdGlhbGl6ZWQ9ITEsYS5kZXRhY2hFdmVudHMoKSxpLmxvb3AmJmEubG9vcERlc3Ryb3koKSx0JiYoYS5yZW1vdmVDbGFzc2VzKCkscy5yZW1vdmVBdHRyKFwic3R5bGVcIiksci5yZW1vdmVBdHRyKFwic3R5bGVcIiksbiYmbi5sZW5ndGgmJm4ucmVtb3ZlQ2xhc3MoW2kuc2xpZGVWaXNpYmxlQ2xhc3MsaS5zbGlkZUFjdGl2ZUNsYXNzLGkuc2xpZGVOZXh0Q2xhc3MsaS5zbGlkZVByZXZDbGFzc10uam9pbihcIiBcIikpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5yZW1vdmVBdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikucmVtb3ZlQXR0cihcImRhdGEtc3dpcGVyLWNvbHVtblwiKS5yZW1vdmVBdHRyKFwiZGF0YS1zd2lwZXItcm93XCIpKSxhLmVtaXQoXCJkZXN0cm95XCIpLE9iamVjdC5rZXlzKGEuZXZlbnRzTGlzdGVuZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Eub2ZmKGUpfSksITEhPT1lJiYoYS4kZWxbMF0uc3dpcGVyPW51bGwsYS4kZWwuZGF0YShcInN3aXBlclwiLG51bGwpLGVlLmRlbGV0ZVByb3BzKGEpKSxhLmRlc3Ryb3llZD0hMCksbnVsbH0saC5leHRlbmREZWZhdWx0cz1mdW5jdGlvbihlKXtlZS5leHRlbmQoeCxlKX0sZS5leHRlbmRlZERlZmF1bHRzLmdldD1mdW5jdGlvbigpe3JldHVybiB4fSxlLmRlZmF1bHRzLmdldD1mdW5jdGlvbigpe3JldHVybiB3fSxlLkNsYXNzLmdldD1mdW5jdGlvbigpe3JldHVybiB1fSxlLiQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIEx9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGgsZSksaH0obiksRT17bmFtZTpcImRldmljZVwiLHByb3RvOntkZXZpY2U6Z30sc3RhdGljOntkZXZpY2U6Z319LFM9e25hbWU6XCJzdXBwb3J0XCIscHJvdG86e3N1cHBvcnQ6dGV9LHN0YXRpYzp7c3VwcG9ydDp0ZX19LEM9e25hbWU6XCJicm93c2VyXCIscHJvdG86e2Jyb3dzZXI6SX0sc3RhdGljOnticm93c2VyOkl9fSxNPXtuYW1lOlwicmVzaXplXCIsY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlZS5leHRlbmQoZSx7cmVzaXplOntyZXNpemVIYW5kbGVyOmZ1bmN0aW9uKCl7ZSYmIWUuZGVzdHJveWVkJiZlLmluaXRpYWxpemVkJiYoZS5lbWl0KFwiYmVmb3JlUmVzaXplXCIpLGUuZW1pdChcInJlc2l6ZVwiKSl9LG9yaWVudGF0aW9uQ2hhbmdlSGFuZGxlcjpmdW5jdGlvbigpe2UmJiFlLmRlc3Ryb3llZCYmZS5pbml0aWFsaXplZCYmZS5lbWl0KFwib3JpZW50YXRpb25jaGFuZ2VcIil9fX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe0ouYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMucmVzaXplLnJlc2l6ZUhhbmRsZXIpLEouYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsdGhpcy5yZXNpemUub3JpZW50YXRpb25DaGFuZ2VIYW5kbGVyKX0sZGVzdHJveTpmdW5jdGlvbigpe0oucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMucmVzaXplLnJlc2l6ZUhhbmRsZXIpLEoucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsdGhpcy5yZXNpemUub3JpZW50YXRpb25DaGFuZ2VIYW5kbGVyKX19fSx6PXtmdW5jOkouTXV0YXRpb25PYnNlcnZlcnx8Si5XZWJraXRNdXRhdGlvbk9ic2VydmVyLGF0dGFjaDpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgYT10aGlzLGk9bmV3IHouZnVuYyhmdW5jdGlvbihlKXtpZigxIT09ZS5sZW5ndGgpe3ZhciB0PWZ1bmN0aW9uKCl7YS5lbWl0KFwib2JzZXJ2ZXJVcGRhdGVcIixlWzBdKX07Si5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/Si5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCk6Si5zZXRUaW1lb3V0KHQsMCl9ZWxzZSBhLmVtaXQoXCJvYnNlcnZlclVwZGF0ZVwiLGVbMF0pfSk7aS5vYnNlcnZlKGUse2F0dHJpYnV0ZXM6dm9pZCAwPT09dC5hdHRyaWJ1dGVzfHx0LmF0dHJpYnV0ZXMsY2hpbGRMaXN0OnZvaWQgMD09PXQuY2hpbGRMaXN0fHx0LmNoaWxkTGlzdCxjaGFyYWN0ZXJEYXRhOnZvaWQgMD09PXQuY2hhcmFjdGVyRGF0YXx8dC5jaGFyYWN0ZXJEYXRhfSksYS5vYnNlcnZlci5vYnNlcnZlcnMucHVzaChpKX0saW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGUub2JzZXJ2ZXImJmUucGFyYW1zLm9ic2VydmVyKXtpZihlLnBhcmFtcy5vYnNlcnZlUGFyZW50cylmb3IodmFyIHQ9ZS4kZWwucGFyZW50cygpLGE9MDthPHQubGVuZ3RoO2ErPTEpZS5vYnNlcnZlci5hdHRhY2godFthXSk7ZS5vYnNlcnZlci5hdHRhY2goZS4kZWxbMF0se2NoaWxkTGlzdDplLnBhcmFtcy5vYnNlcnZlU2xpZGVDaGlsZHJlbn0pLGUub2JzZXJ2ZXIuYXR0YWNoKGUuJHdyYXBwZXJFbFswXSx7YXR0cmlidXRlczohMX0pfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5kaXNjb25uZWN0KCl9KSx0aGlzLm9ic2VydmVyLm9ic2VydmVycz1bXX19LFA9e25hbWU6XCJvYnNlcnZlclwiLHBhcmFtczp7b2JzZXJ2ZXI6ITEsb2JzZXJ2ZVBhcmVudHM6ITEsb2JzZXJ2ZVNsaWRlQ2hpbGRyZW46ITF9LGNyZWF0ZTpmdW5jdGlvbigpe2VlLmV4dGVuZCh0aGlzLHtvYnNlcnZlcjp7aW5pdDp6LmluaXQuYmluZCh0aGlzKSxhdHRhY2g6ei5hdHRhY2guYmluZCh0aGlzKSxkZXN0cm95OnouZGVzdHJveS5iaW5kKHRoaXMpLG9ic2VydmVyczpbXX19KX0sb246e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyLmluaXQoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXIuZGVzdHJveSgpfX19LGs9e3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC5wYXJhbXMsaT1hLnNsaWRlc1BlclZpZXcscz1hLnNsaWRlc1Blckdyb3VwLHI9YS5jZW50ZXJlZFNsaWRlcyxuPXQucGFyYW1zLnZpcnR1YWwsbz1uLmFkZFNsaWRlc0JlZm9yZSxsPW4uYWRkU2xpZGVzQWZ0ZXIsZD10LnZpcnR1YWwscD1kLmZyb20sYz1kLnRvLHU9ZC5zbGlkZXMsaD1kLnNsaWRlc0dyaWQsdj1kLnJlbmRlclNsaWRlLGY9ZC5vZmZzZXQ7dC51cGRhdGVBY3RpdmVJbmRleCgpO3ZhciBtLGcsYix3PXQuYWN0aXZlSW5kZXh8fDA7bT10LnJ0bFRyYW5zbGF0ZT9cInJpZ2h0XCI6dC5pc0hvcml6b250YWwoKT9cImxlZnRcIjpcInRvcFwiLHI/KGc9TWF0aC5mbG9vcihpLzIpK3MrbyxiPU1hdGguZmxvb3IoaS8yKStzK2wpOihnPWkrKHMtMSkrbyxiPXMrbCk7dmFyIHk9TWF0aC5tYXgoKHd8fDApLWIsMCkseD1NYXRoLm1pbigod3x8MCkrZyx1Lmxlbmd0aC0xKSxUPSh0LnNsaWRlc0dyaWRbeV18fDApLSh0LnNsaWRlc0dyaWRbMF18fDApO2Z1bmN0aW9uIEUoKXt0LnVwZGF0ZVNsaWRlcygpLHQudXBkYXRlUHJvZ3Jlc3MoKSx0LnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSx0LmxhenkmJnQucGFyYW1zLmxhenkuZW5hYmxlZCYmdC5sYXp5LmxvYWQoKX1pZihlZS5leHRlbmQodC52aXJ0dWFsLHtmcm9tOnksdG86eCxvZmZzZXQ6VCxzbGlkZXNHcmlkOnQuc2xpZGVzR3JpZH0pLHA9PT15JiZjPT09eCYmIWUpcmV0dXJuIHQuc2xpZGVzR3JpZCE9PWgmJlQhPT1mJiZ0LnNsaWRlcy5jc3MobSxUK1wicHhcIiksdm9pZCB0LnVwZGF0ZVByb2dyZXNzKCk7aWYodC5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbClyZXR1cm4gdC5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbC5jYWxsKHQse29mZnNldDpULGZyb206eSx0bzp4LHNsaWRlczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXk7dDw9eDt0Kz0xKWUucHVzaCh1W3RdKTtyZXR1cm4gZX0oKX0pLHZvaWQgRSgpO3ZhciBTPVtdLEM9W107aWYoZSl0LiR3cmFwcGVyRWwuZmluZChcIi5cIit0LnBhcmFtcy5zbGlkZUNsYXNzKS5yZW1vdmUoKTtlbHNlIGZvcih2YXIgTT1wO008PWM7TSs9MSkoTTx5fHx4PE0pJiZ0LiR3cmFwcGVyRWwuZmluZChcIi5cIit0LnBhcmFtcy5zbGlkZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK00rJ1wiXScpLnJlbW92ZSgpO2Zvcih2YXIgej0wO3o8dS5sZW5ndGg7eis9MSl5PD16JiZ6PD14JiYodm9pZCAwPT09Y3x8ZT9DLnB1c2goeik6KGM8eiYmQy5wdXNoKHopLHo8cCYmUy5wdXNoKHopKSk7Qy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuJHdyYXBwZXJFbC5hcHBlbmQodih1W2VdLGUpKX0pLFMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiB0LWV9KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuJHdyYXBwZXJFbC5wcmVwZW5kKHYodVtlXSxlKSl9KSx0LiR3cmFwcGVyRWwuY2hpbGRyZW4oXCIuc3dpcGVyLXNsaWRlXCIpLmNzcyhtLFQrXCJweFwiKSxFKCl9LHJlbmRlclNsaWRlOmZ1bmN0aW9uKGUsdCl7dmFyIGE9dGhpcyxpPWEucGFyYW1zLnZpcnR1YWw7aWYoaS5jYWNoZSYmYS52aXJ0dWFsLmNhY2hlW3RdKXJldHVybiBhLnZpcnR1YWwuY2FjaGVbdF07dmFyIHM9aS5yZW5kZXJTbGlkZT9MKGkucmVuZGVyU2xpZGUuY2FsbChhLGUsdCkpOkwoJzxkaXYgY2xhc3M9XCInK2EucGFyYW1zLnNsaWRlQ2xhc3MrJ1wiIGRhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJyt0KydcIj4nK2UrXCI8L2Rpdj5cIik7cmV0dXJuIHMuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpfHxzLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiLHQpLGkuY2FjaGUmJihhLnZpcnR1YWwuY2FjaGVbdF09cyksc30sYXBwZW5kU2xpZGU6ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibGVuZ3RoXCJpbiBlKWZvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCs9MSllW3RdJiZ0aGlzLnZpcnR1YWwuc2xpZGVzLnB1c2goZVt0XSk7ZWxzZSB0aGlzLnZpcnR1YWwuc2xpZGVzLnB1c2goZSk7dGhpcy52aXJ0dWFsLnVwZGF0ZSghMCl9LHByZXBlbmRTbGlkZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC5hY3RpdmVJbmRleCxpPWErMSxzPTE7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKz0xKWVbcl0mJnQudmlydHVhbC5zbGlkZXMudW5zaGlmdChlW3JdKTtpPWErZS5sZW5ndGgscz1lLmxlbmd0aH1lbHNlIHQudmlydHVhbC5zbGlkZXMudW5zaGlmdChlKTtpZih0LnBhcmFtcy52aXJ0dWFsLmNhY2hlKXt2YXIgbj10LnZpcnR1YWwuY2FjaGUsbz17fTtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe29bcGFyc2VJbnQoZSwxMCkrc109bltlXX0pLHQudmlydHVhbC5jYWNoZT1vfXQudmlydHVhbC51cGRhdGUoITApLHQuc2xpZGVUbyhpLDApfSxyZW1vdmVTbGlkZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKG51bGwhPWUpe3ZhciBhPXQuYWN0aXZlSW5kZXg7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9ZS5sZW5ndGgtMTswPD1pO2ktPTEpdC52aXJ0dWFsLnNsaWRlcy5zcGxpY2UoZVtpXSwxKSx0LnBhcmFtcy52aXJ0dWFsLmNhY2hlJiZkZWxldGUgdC52aXJ0dWFsLmNhY2hlW2VbaV1dLGVbaV08YSYmKGEtPTEpLGE9TWF0aC5tYXgoYSwwKTtlbHNlIHQudmlydHVhbC5zbGlkZXMuc3BsaWNlKGUsMSksdC5wYXJhbXMudmlydHVhbC5jYWNoZSYmZGVsZXRlIHQudmlydHVhbC5jYWNoZVtlXSxlPGEmJihhLT0xKSxhPU1hdGgubWF4KGEsMCk7dC52aXJ0dWFsLnVwZGF0ZSghMCksdC5zbGlkZVRvKGEsMCl9fSxyZW1vdmVBbGxTbGlkZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UudmlydHVhbC5zbGlkZXM9W10sZS5wYXJhbXMudmlydHVhbC5jYWNoZSYmKGUudmlydHVhbC5jYWNoZT17fSksZS52aXJ0dWFsLnVwZGF0ZSghMCksZS5zbGlkZVRvKDAsMCl9fSwkPXtuYW1lOlwidmlydHVhbFwiLHBhcmFtczp7dmlydHVhbDp7ZW5hYmxlZDohMSxzbGlkZXM6W10sY2FjaGU6ITAscmVuZGVyU2xpZGU6bnVsbCxyZW5kZXJFeHRlcm5hbDpudWxsLGFkZFNsaWRlc0JlZm9yZTowLGFkZFNsaWRlc0FmdGVyOjB9fSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2VlLmV4dGVuZChlLHt2aXJ0dWFsOnt1cGRhdGU6ay51cGRhdGUuYmluZChlKSxhcHBlbmRTbGlkZTprLmFwcGVuZFNsaWRlLmJpbmQoZSkscHJlcGVuZFNsaWRlOmsucHJlcGVuZFNsaWRlLmJpbmQoZSkscmVtb3ZlU2xpZGU6ay5yZW1vdmVTbGlkZS5iaW5kKGUpLHJlbW92ZUFsbFNsaWRlczprLnJlbW92ZUFsbFNsaWRlcy5iaW5kKGUpLHJlbmRlclNsaWRlOmsucmVuZGVyU2xpZGUuYmluZChlKSxzbGlkZXM6ZS5wYXJhbXMudmlydHVhbC5zbGlkZXMsY2FjaGU6e319fSl9LG9uOntiZWZvcmVJbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpe2UuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJ2aXJ0dWFsXCIpO3ZhciB0PXt3YXRjaFNsaWRlc1Byb2dyZXNzOiEwfTtlZS5leHRlbmQoZS5wYXJhbXMsdCksZWUuZXh0ZW5kKGUub3JpZ2luYWxQYXJhbXMsdCksZS5wYXJhbXMuaW5pdGlhbFNsaWRlfHxlLnZpcnR1YWwudXBkYXRlKCl9fSxzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQmJnRoaXMudmlydHVhbC51cGRhdGUoKX19fSxEPXtoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxhPXQucnRsVHJhbnNsYXRlLGk9ZTtpLm9yaWdpbmFsRXZlbnQmJihpPWkub3JpZ2luYWxFdmVudCk7dmFyIHM9aS5rZXlDb2RlfHxpLmNoYXJDb2RlO2lmKCF0LmFsbG93U2xpZGVOZXh0JiYodC5pc0hvcml6b250YWwoKSYmMzk9PT1zfHx0LmlzVmVydGljYWwoKSYmNDA9PT1zKSlyZXR1cm4hMTtpZighdC5hbGxvd1NsaWRlUHJldiYmKHQuaXNIb3Jpem9udGFsKCkmJjM3PT09c3x8dC5pc1ZlcnRpY2FsKCkmJjM4PT09cykpcmV0dXJuITE7aWYoIShpLnNoaWZ0S2V5fHxpLmFsdEtleXx8aS5jdHJsS2V5fHxpLm1ldGFLZXl8fGYuYWN0aXZlRWxlbWVudCYmZi5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lJiYoXCJpbnB1dFwiPT09Zi5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl8fFwidGV4dGFyZWFcIj09PWYuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSkpe2lmKHQucGFyYW1zLmtleWJvYXJkLm9ubHlJblZpZXdwb3J0JiYoMzc9PT1zfHwzOT09PXN8fDM4PT09c3x8NDA9PT1zKSl7dmFyIHI9ITE7aWYoMDx0LiRlbC5wYXJlbnRzKFwiLlwiK3QucGFyYW1zLnNsaWRlQ2xhc3MpLmxlbmd0aCYmMD09PXQuJGVsLnBhcmVudHMoXCIuXCIrdC5wYXJhbXMuc2xpZGVBY3RpdmVDbGFzcykubGVuZ3RoKXJldHVybjt2YXIgbj1KLmlubmVyV2lkdGgsbz1KLmlubmVySGVpZ2h0LGw9dC4kZWwub2Zmc2V0KCk7YSYmKGwubGVmdC09dC4kZWxbMF0uc2Nyb2xsTGVmdCk7Zm9yKHZhciBkPVtbbC5sZWZ0LGwudG9wXSxbbC5sZWZ0K3Qud2lkdGgsbC50b3BdLFtsLmxlZnQsbC50b3ArdC5oZWlnaHRdLFtsLmxlZnQrdC53aWR0aCxsLnRvcCt0LmhlaWdodF1dLHA9MDtwPGQubGVuZ3RoO3ArPTEpe3ZhciBjPWRbcF07MDw9Y1swXSYmY1swXTw9biYmMDw9Y1sxXSYmY1sxXTw9byYmKHI9ITApfWlmKCFyKXJldHVybn10LmlzSG9yaXpvbnRhbCgpPygzNyE9PXMmJjM5IT09c3x8KGkucHJldmVudERlZmF1bHQ/aS5wcmV2ZW50RGVmYXVsdCgpOmkucmV0dXJuVmFsdWU9ITEpLCgzOT09PXMmJiFhfHwzNz09PXMmJmEpJiZ0LnNsaWRlTmV4dCgpLCgzNz09PXMmJiFhfHwzOT09PXMmJmEpJiZ0LnNsaWRlUHJldigpKTooMzghPT1zJiY0MCE9PXN8fChpLnByZXZlbnREZWZhdWx0P2kucHJldmVudERlZmF1bHQoKTppLnJldHVyblZhbHVlPSExKSw0MD09PXMmJnQuc2xpZGVOZXh0KCksMzg9PT1zJiZ0LnNsaWRlUHJldigpKSx0LmVtaXQoXCJrZXlQcmVzc1wiLHMpfX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5rZXlib2FyZC5lbmFibGVkfHwoTChmKS5vbihcImtleWRvd25cIix0aGlzLmtleWJvYXJkLmhhbmRsZSksdGhpcy5rZXlib2FyZC5lbmFibGVkPSEwKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMua2V5Ym9hcmQuZW5hYmxlZCYmKEwoZikub2ZmKFwia2V5ZG93blwiLHRoaXMua2V5Ym9hcmQuaGFuZGxlKSx0aGlzLmtleWJvYXJkLmVuYWJsZWQ9ITEpfX0sTz17bmFtZTpcImtleWJvYXJkXCIscGFyYW1zOntrZXlib2FyZDp7ZW5hYmxlZDohMSxvbmx5SW5WaWV3cG9ydDohMH19LGNyZWF0ZTpmdW5jdGlvbigpe2VlLmV4dGVuZCh0aGlzLHtrZXlib2FyZDp7ZW5hYmxlZDohMSxlbmFibGU6RC5lbmFibGUuYmluZCh0aGlzKSxkaXNhYmxlOkQuZGlzYWJsZS5iaW5kKHRoaXMpLGhhbmRsZTpELmhhbmRsZS5iaW5kKHRoaXMpfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmtleWJvYXJkLmVuYWJsZWQmJnRoaXMua2V5Ym9hcmQuZW5hYmxlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmtleWJvYXJkLmVuYWJsZWQmJnRoaXMua2V5Ym9hcmQuZGlzYWJsZSgpfX19O3ZhciBBPXtsYXN0U2Nyb2xsVGltZTplZS5ub3coKSxldmVudDotMTxKLm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcImZpcmVmb3hcIik/XCJET01Nb3VzZVNjcm9sbFwiOmZ1bmN0aW9uKCl7dmFyIGU9XCJvbndoZWVsXCIsdD1lIGluIGY7aWYoIXQpe3ZhciBhPWYuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnNldEF0dHJpYnV0ZShlLFwicmV0dXJuO1wiKSx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGFbZV19cmV0dXJuIXQmJmYuaW1wbGVtZW50YXRpb24mJmYuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSYmITAhPT1mLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJcIixcIlwiKSYmKHQ9Zi5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKFwiRXZlbnRzLndoZWVsXCIsXCIzLjBcIikpLHR9KCk/XCJ3aGVlbFwiOlwibW91c2V3aGVlbFwiLG5vcm1hbGl6ZTpmdW5jdGlvbihlKXt2YXIgdD0wLGE9MCxpPTAscz0wO3JldHVyblwiZGV0YWlsXCJpbiBlJiYoYT1lLmRldGFpbCksXCJ3aGVlbERlbHRhXCJpbiBlJiYoYT0tZS53aGVlbERlbHRhLzEyMCksXCJ3aGVlbERlbHRhWVwiaW4gZSYmKGE9LWUud2hlZWxEZWx0YVkvMTIwKSxcIndoZWVsRGVsdGFYXCJpbiBlJiYodD0tZS53aGVlbERlbHRhWC8xMjApLFwiYXhpc1wiaW4gZSYmZS5heGlzPT09ZS5IT1JJWk9OVEFMX0FYSVMmJih0PWEsYT0wKSxpPTEwKnQscz0xMCphLFwiZGVsdGFZXCJpbiBlJiYocz1lLmRlbHRhWSksXCJkZWx0YVhcImluIGUmJihpPWUuZGVsdGFYKSwoaXx8cykmJmUuZGVsdGFNb2RlJiYoMT09PWUuZGVsdGFNb2RlPyhpKj00MCxzKj00MCk6KGkqPTgwMCxzKj04MDApKSxpJiYhdCYmKHQ9aTwxPy0xOjEpLHMmJiFhJiYoYT1zPDE/LTE6MSkse3NwaW5YOnQsc3Bpblk6YSxwaXhlbFg6aSxwaXhlbFk6c319LGhhbmRsZU1vdXNlRW50ZXI6ZnVuY3Rpb24oKXt0aGlzLm1vdXNlRW50ZXJlZD0hMH0saGFuZGxlTW91c2VMZWF2ZTpmdW5jdGlvbigpe3RoaXMubW91c2VFbnRlcmVkPSExfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSxhPXRoaXMsaT1hLnBhcmFtcy5tb3VzZXdoZWVsO2lmKCFhLm1vdXNlRW50ZXJlZCYmIWkucmVsZWFzZU9uRWRnZXMpcmV0dXJuITA7dC5vcmlnaW5hbEV2ZW50JiYodD10Lm9yaWdpbmFsRXZlbnQpO3ZhciBzPTAscj1hLnJ0bFRyYW5zbGF0ZT8tMToxLG49QS5ub3JtYWxpemUodCk7aWYoaS5mb3JjZVRvQXhpcylpZihhLmlzSG9yaXpvbnRhbCgpKXtpZighKE1hdGguYWJzKG4ucGl4ZWxYKT5NYXRoLmFicyhuLnBpeGVsWSkpKXJldHVybiEwO3M9bi5waXhlbFgqcn1lbHNle2lmKCEoTWF0aC5hYnMobi5waXhlbFkpPk1hdGguYWJzKG4ucGl4ZWxYKSkpcmV0dXJuITA7cz1uLnBpeGVsWX1lbHNlIHM9TWF0aC5hYnMobi5waXhlbFgpPk1hdGguYWJzKG4ucGl4ZWxZKT8tbi5waXhlbFgqcjotbi5waXhlbFk7aWYoMD09PXMpcmV0dXJuITA7aWYoaS5pbnZlcnQmJihzPS1zKSxhLnBhcmFtcy5mcmVlTW9kZSl7YS5wYXJhbXMubG9vcCYmYS5sb29wRml4KCk7dmFyIG89YS5nZXRUcmFuc2xhdGUoKStzKmkuc2Vuc2l0aXZpdHksbD1hLmlzQmVnaW5uaW5nLGQ9YS5pc0VuZDtpZihvPj1hLm1pblRyYW5zbGF0ZSgpJiYobz1hLm1pblRyYW5zbGF0ZSgpKSxvPD1hLm1heFRyYW5zbGF0ZSgpJiYobz1hLm1heFRyYW5zbGF0ZSgpKSxhLnNldFRyYW5zaXRpb24oMCksYS5zZXRUcmFuc2xhdGUobyksYS51cGRhdGVQcm9ncmVzcygpLGEudXBkYXRlQWN0aXZlSW5kZXgoKSxhLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSwoIWwmJmEuaXNCZWdpbm5pbmd8fCFkJiZhLmlzRW5kKSYmYS51cGRhdGVTbGlkZXNDbGFzc2VzKCksYS5wYXJhbXMuZnJlZU1vZGVTdGlja3kmJihjbGVhclRpbWVvdXQoYS5tb3VzZXdoZWVsLnRpbWVvdXQpLGEubW91c2V3aGVlbC50aW1lb3V0PWVlLm5leHRUaWNrKGZ1bmN0aW9uKCl7YS5zbGlkZVRvQ2xvc2VzdCgpfSwzMDApKSxhLmVtaXQoXCJzY3JvbGxcIix0KSxhLnBhcmFtcy5hdXRvcGxheSYmYS5wYXJhbXMuYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiYmYS5hdXRvcGxheS5zdG9wKCksbz09PWEubWluVHJhbnNsYXRlKCl8fG89PT1hLm1heFRyYW5zbGF0ZSgpKXJldHVybiEwfWVsc2V7aWYoNjA8ZWUubm93KCktYS5tb3VzZXdoZWVsLmxhc3RTY3JvbGxUaW1lKWlmKHM8MClpZihhLmlzRW5kJiYhYS5wYXJhbXMubG9vcHx8YS5hbmltYXRpbmcpe2lmKGkucmVsZWFzZU9uRWRnZXMpcmV0dXJuITB9ZWxzZSBhLnNsaWRlTmV4dCgpLGEuZW1pdChcInNjcm9sbFwiLHQpO2Vsc2UgaWYoYS5pc0JlZ2lubmluZyYmIWEucGFyYW1zLmxvb3B8fGEuYW5pbWF0aW5nKXtpZihpLnJlbGVhc2VPbkVkZ2VzKXJldHVybiEwfWVsc2UgYS5zbGlkZVByZXYoKSxhLmVtaXQoXCJzY3JvbGxcIix0KTthLm1vdXNld2hlZWwubGFzdFNjcm9sbFRpbWU9KG5ldyBKLkRhdGUpLmdldFRpbWUoKX1yZXR1cm4gdC5wcmV2ZW50RGVmYXVsdD90LnByZXZlbnREZWZhdWx0KCk6dC5yZXR1cm5WYWx1ZT0hMSwhMX0sZW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighQS5ldmVudClyZXR1cm4hMTtpZihlLm1vdXNld2hlZWwuZW5hYmxlZClyZXR1cm4hMTt2YXIgdD1lLiRlbDtyZXR1cm5cImNvbnRhaW5lclwiIT09ZS5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZWQmJih0PUwoZS5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZWQpKSx0Lm9uKFwibW91c2VlbnRlclwiLGUubW91c2V3aGVlbC5oYW5kbGVNb3VzZUVudGVyKSx0Lm9uKFwibW91c2VsZWF2ZVwiLGUubW91c2V3aGVlbC5oYW5kbGVNb3VzZUxlYXZlKSx0Lm9uKEEuZXZlbnQsZS5tb3VzZXdoZWVsLmhhbmRsZSksZS5tb3VzZXdoZWVsLmVuYWJsZWQ9ITB9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCFBLmV2ZW50KXJldHVybiExO2lmKCFlLm1vdXNld2hlZWwuZW5hYmxlZClyZXR1cm4hMTt2YXIgdD1lLiRlbDtyZXR1cm5cImNvbnRhaW5lclwiIT09ZS5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZWQmJih0PUwoZS5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZWQpKSx0Lm9mZihBLmV2ZW50LGUubW91c2V3aGVlbC5oYW5kbGUpLCEoZS5tb3VzZXdoZWVsLmVuYWJsZWQ9ITEpfX0sSD17dXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucGFyYW1zLm5hdmlnYXRpb247aWYoIWUucGFyYW1zLmxvb3Ape3ZhciBhPWUubmF2aWdhdGlvbixpPWEuJG5leHRFbCxzPWEuJHByZXZFbDtzJiYwPHMubGVuZ3RoJiYoZS5pc0JlZ2lubmluZz9zLmFkZENsYXNzKHQuZGlzYWJsZWRDbGFzcyk6cy5yZW1vdmVDbGFzcyh0LmRpc2FibGVkQ2xhc3MpLHNbZS5wYXJhbXMud2F0Y2hPdmVyZmxvdyYmZS5pc0xvY2tlZD9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXSh0LmxvY2tDbGFzcykpLGkmJjA8aS5sZW5ndGgmJihlLmlzRW5kP2kuYWRkQ2xhc3ModC5kaXNhYmxlZENsYXNzKTppLnJlbW92ZUNsYXNzKHQuZGlzYWJsZWRDbGFzcyksaVtlLnBhcmFtcy53YXRjaE92ZXJmbG93JiZlLmlzTG9ja2VkP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKHQubG9ja0NsYXNzKSl9fSxvblByZXZDbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5pc0JlZ2lubmluZyYmIXRoaXMucGFyYW1zLmxvb3B8fHRoaXMuc2xpZGVQcmV2KCl9LG9uTmV4dENsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmlzRW5kJiYhdGhpcy5wYXJhbXMubG9vcHx8dGhpcy5zbGlkZU5leHQoKX0saW5pdDpmdW5jdGlvbigpe3ZhciBlLHQsYT10aGlzLGk9YS5wYXJhbXMubmF2aWdhdGlvbjsoaS5uZXh0RWx8fGkucHJldkVsKSYmKGkubmV4dEVsJiYoZT1MKGkubmV4dEVsKSxhLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyYmXCJzdHJpbmdcIj09dHlwZW9mIGkubmV4dEVsJiYxPGUubGVuZ3RoJiYxPT09YS4kZWwuZmluZChpLm5leHRFbCkubGVuZ3RoJiYoZT1hLiRlbC5maW5kKGkubmV4dEVsKSkpLGkucHJldkVsJiYodD1MKGkucHJldkVsKSxhLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyYmXCJzdHJpbmdcIj09dHlwZW9mIGkucHJldkVsJiYxPHQubGVuZ3RoJiYxPT09YS4kZWwuZmluZChpLnByZXZFbCkubGVuZ3RoJiYodD1hLiRlbC5maW5kKGkucHJldkVsKSkpLGUmJjA8ZS5sZW5ndGgmJmUub24oXCJjbGlja1wiLGEubmF2aWdhdGlvbi5vbk5leHRDbGljayksdCYmMDx0Lmxlbmd0aCYmdC5vbihcImNsaWNrXCIsYS5uYXZpZ2F0aW9uLm9uUHJldkNsaWNrKSxlZS5leHRlbmQoYS5uYXZpZ2F0aW9uLHskbmV4dEVsOmUsbmV4dEVsOmUmJmVbMF0sJHByZXZFbDp0LHByZXZFbDp0JiZ0WzBdfSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubmF2aWdhdGlvbixhPXQuJG5leHRFbCxpPXQuJHByZXZFbDthJiZhLmxlbmd0aCYmKGEub2ZmKFwiY2xpY2tcIixlLm5hdmlnYXRpb24ub25OZXh0Q2xpY2spLGEucmVtb3ZlQ2xhc3MoZS5wYXJhbXMubmF2aWdhdGlvbi5kaXNhYmxlZENsYXNzKSksaSYmaS5sZW5ndGgmJihpLm9mZihcImNsaWNrXCIsZS5uYXZpZ2F0aW9uLm9uUHJldkNsaWNrKSxpLnJlbW92ZUNsYXNzKGUucGFyYW1zLm5hdmlnYXRpb24uZGlzYWJsZWRDbGFzcykpfX0sTj17dXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucnRsLHM9ZS5wYXJhbXMucGFnaW5hdGlvbjtpZihzLmVsJiZlLnBhZ2luYXRpb24uZWwmJmUucGFnaW5hdGlvbi4kZWwmJjAhPT1lLnBhZ2luYXRpb24uJGVsLmxlbmd0aCl7dmFyIHIsYT1lLnZpcnR1YWwmJmUucGFyYW1zLnZpcnR1YWwuZW5hYmxlZD9lLnZpcnR1YWwuc2xpZGVzLmxlbmd0aDplLnNsaWRlcy5sZW5ndGgsaT1lLnBhZ2luYXRpb24uJGVsLG49ZS5wYXJhbXMubG9vcD9NYXRoLmNlaWwoKGEtMiplLmxvb3BlZFNsaWRlcykvZS5wYXJhbXMuc2xpZGVzUGVyR3JvdXApOmUuc25hcEdyaWQubGVuZ3RoO2lmKGUucGFyYW1zLmxvb3A/KChyPU1hdGguY2VpbCgoZS5hY3RpdmVJbmRleC1lLmxvb3BlZFNsaWRlcykvZS5wYXJhbXMuc2xpZGVzUGVyR3JvdXApKT5hLTEtMiplLmxvb3BlZFNsaWRlcyYmKHItPWEtMiplLmxvb3BlZFNsaWRlcyksbi0xPHImJihyLT1uKSxyPDAmJlwiYnVsbGV0c1wiIT09ZS5wYXJhbXMucGFnaW5hdGlvblR5cGUmJihyPW4rcikpOnI9dm9pZCAwIT09ZS5zbmFwSW5kZXg/ZS5zbmFwSW5kZXg6ZS5hY3RpdmVJbmRleHx8MCxcImJ1bGxldHNcIj09PXMudHlwZSYmZS5wYWdpbmF0aW9uLmJ1bGxldHMmJjA8ZS5wYWdpbmF0aW9uLmJ1bGxldHMubGVuZ3RoKXt2YXIgbyxsLGQscD1lLnBhZ2luYXRpb24uYnVsbGV0cztpZihzLmR5bmFtaWNCdWxsZXRzJiYoZS5wYWdpbmF0aW9uLmJ1bGxldFNpemU9cC5lcSgwKVtlLmlzSG9yaXpvbnRhbCgpP1wib3V0ZXJXaWR0aFwiOlwib3V0ZXJIZWlnaHRcIl0oITApLGkuY3NzKGUuaXNIb3Jpem9udGFsKCk/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIsZS5wYWdpbmF0aW9uLmJ1bGxldFNpemUqKHMuZHluYW1pY01haW5CdWxsZXRzKzQpK1wicHhcIiksMTxzLmR5bmFtaWNNYWluQnVsbGV0cyYmdm9pZCAwIT09ZS5wcmV2aW91c0luZGV4JiYoZS5wYWdpbmF0aW9uLmR5bmFtaWNCdWxsZXRJbmRleCs9ci1lLnByZXZpb3VzSW5kZXgsZS5wYWdpbmF0aW9uLmR5bmFtaWNCdWxsZXRJbmRleD5zLmR5bmFtaWNNYWluQnVsbGV0cy0xP2UucGFnaW5hdGlvbi5keW5hbWljQnVsbGV0SW5kZXg9cy5keW5hbWljTWFpbkJ1bGxldHMtMTplLnBhZ2luYXRpb24uZHluYW1pY0J1bGxldEluZGV4PDAmJihlLnBhZ2luYXRpb24uZHluYW1pY0J1bGxldEluZGV4PTApKSxvPXItZS5wYWdpbmF0aW9uLmR5bmFtaWNCdWxsZXRJbmRleCxkPSgobD1vKyhNYXRoLm1pbihwLmxlbmd0aCxzLmR5bmFtaWNNYWluQnVsbGV0cyktMSkpK28pLzIpLHAucmVtb3ZlQ2xhc3Mocy5idWxsZXRBY3RpdmVDbGFzcytcIiBcIitzLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLW5leHQgXCIrcy5idWxsZXRBY3RpdmVDbGFzcytcIi1uZXh0LW5leHQgXCIrcy5idWxsZXRBY3RpdmVDbGFzcytcIi1wcmV2IFwiK3MuYnVsbGV0QWN0aXZlQ2xhc3MrXCItcHJldi1wcmV2IFwiK3MuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbWFpblwiKSwxPGkubGVuZ3RoKXAuZWFjaChmdW5jdGlvbihlLHQpe3ZhciBhPUwodCksaT1hLmluZGV4KCk7aT09PXImJmEuYWRkQ2xhc3Mocy5idWxsZXRBY3RpdmVDbGFzcykscy5keW5hbWljQnVsbGV0cyYmKG88PWkmJmk8PWwmJmEuYWRkQ2xhc3Mocy5idWxsZXRBY3RpdmVDbGFzcytcIi1tYWluXCIpLGk9PT1vJiZhLnByZXYoKS5hZGRDbGFzcyhzLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLXByZXZcIikucHJldigpLmFkZENsYXNzKHMuYnVsbGV0QWN0aXZlQ2xhc3MrXCItcHJldi1wcmV2XCIpLGk9PT1sJiZhLm5leHQoKS5hZGRDbGFzcyhzLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLW5leHRcIikubmV4dCgpLmFkZENsYXNzKHMuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbmV4dC1uZXh0XCIpKX0pO2Vsc2UgaWYocC5lcShyKS5hZGRDbGFzcyhzLmJ1bGxldEFjdGl2ZUNsYXNzKSxzLmR5bmFtaWNCdWxsZXRzKXtmb3IodmFyIGM9cC5lcShvKSx1PXAuZXEobCksaD1vO2g8PWw7aCs9MSlwLmVxKGgpLmFkZENsYXNzKHMuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbWFpblwiKTtjLnByZXYoKS5hZGRDbGFzcyhzLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLXByZXZcIikucHJldigpLmFkZENsYXNzKHMuYnVsbGV0QWN0aXZlQ2xhc3MrXCItcHJldi1wcmV2XCIpLHUubmV4dCgpLmFkZENsYXNzKHMuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbmV4dFwiKS5uZXh0KCkuYWRkQ2xhc3Mocy5idWxsZXRBY3RpdmVDbGFzcytcIi1uZXh0LW5leHRcIil9aWYocy5keW5hbWljQnVsbGV0cyl7dmFyIHY9TWF0aC5taW4ocC5sZW5ndGgscy5keW5hbWljTWFpbkJ1bGxldHMrNCksZj0oZS5wYWdpbmF0aW9uLmJ1bGxldFNpemUqdi1lLnBhZ2luYXRpb24uYnVsbGV0U2l6ZSkvMi1kKmUucGFnaW5hdGlvbi5idWxsZXRTaXplLG09dD9cInJpZ2h0XCI6XCJsZWZ0XCI7cC5jc3MoZS5pc0hvcml6b250YWwoKT9tOlwidG9wXCIsZitcInB4XCIpfX1pZihcImZyYWN0aW9uXCI9PT1zLnR5cGUmJihpLmZpbmQoXCIuXCIrcy5jdXJyZW50Q2xhc3MpLnRleHQocy5mb3JtYXRGcmFjdGlvbkN1cnJlbnQocisxKSksaS5maW5kKFwiLlwiK3MudG90YWxDbGFzcykudGV4dChzLmZvcm1hdEZyYWN0aW9uVG90YWwobikpKSxcInByb2dyZXNzYmFyXCI9PT1zLnR5cGUpe3ZhciBnO2c9cy5wcm9ncmVzc2Jhck9wcG9zaXRlP2UuaXNIb3Jpem9udGFsKCk/XCJ2ZXJ0aWNhbFwiOlwiaG9yaXpvbnRhbFwiOmUuaXNIb3Jpem9udGFsKCk/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwiO3ZhciBiPShyKzEpL24sdz0xLHk9MTtcImhvcml6b250YWxcIj09PWc/dz1iOnk9YixpLmZpbmQoXCIuXCIrcy5wcm9ncmVzc2JhckZpbGxDbGFzcykudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlWChcIit3K1wiKSBzY2FsZVkoXCIreStcIilcIikudHJhbnNpdGlvbihlLnBhcmFtcy5zcGVlZCl9XCJjdXN0b21cIj09PXMudHlwZSYmcy5yZW5kZXJDdXN0b20/KGkuaHRtbChzLnJlbmRlckN1c3RvbShlLHIrMSxuKSksZS5lbWl0KFwicGFnaW5hdGlvblJlbmRlclwiLGUsaVswXSkpOmUuZW1pdChcInBhZ2luYXRpb25VcGRhdGVcIixlLGlbMF0pLGlbZS5wYXJhbXMud2F0Y2hPdmVyZmxvdyYmZS5pc0xvY2tlZD9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShzLmxvY2tDbGFzcyl9fSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYXJhbXMucGFnaW5hdGlvbjtpZih0LmVsJiZlLnBhZ2luYXRpb24uZWwmJmUucGFnaW5hdGlvbi4kZWwmJjAhPT1lLnBhZ2luYXRpb24uJGVsLmxlbmd0aCl7dmFyIGE9ZS52aXJ0dWFsJiZlLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ/ZS52aXJ0dWFsLnNsaWRlcy5sZW5ndGg6ZS5zbGlkZXMubGVuZ3RoLGk9ZS5wYWdpbmF0aW9uLiRlbCxzPVwiXCI7aWYoXCJidWxsZXRzXCI9PT10LnR5cGUpe2Zvcih2YXIgcj1lLnBhcmFtcy5sb29wP01hdGguY2VpbCgoYS0yKmUubG9vcGVkU2xpZGVzKS9lLnBhcmFtcy5zbGlkZXNQZXJHcm91cCk6ZS5zbmFwR3JpZC5sZW5ndGgsbj0wO248cjtuKz0xKXQucmVuZGVyQnVsbGV0P3MrPXQucmVuZGVyQnVsbGV0LmNhbGwoZSxuLHQuYnVsbGV0Q2xhc3MpOnMrPVwiPFwiK3QuYnVsbGV0RWxlbWVudCsnIGNsYXNzPVwiJyt0LmJ1bGxldENsYXNzKydcIj48LycrdC5idWxsZXRFbGVtZW50K1wiPlwiO2kuaHRtbChzKSxlLnBhZ2luYXRpb24uYnVsbGV0cz1pLmZpbmQoXCIuXCIrdC5idWxsZXRDbGFzcyl9XCJmcmFjdGlvblwiPT09dC50eXBlJiYocz10LnJlbmRlckZyYWN0aW9uP3QucmVuZGVyRnJhY3Rpb24uY2FsbChlLHQuY3VycmVudENsYXNzLHQudG90YWxDbGFzcyk6JzxzcGFuIGNsYXNzPVwiJyt0LmN1cnJlbnRDbGFzcysnXCI+PC9zcGFuPiAvIDxzcGFuIGNsYXNzPVwiJyt0LnRvdGFsQ2xhc3MrJ1wiPjwvc3Bhbj4nLGkuaHRtbChzKSksXCJwcm9ncmVzc2JhclwiPT09dC50eXBlJiYocz10LnJlbmRlclByb2dyZXNzYmFyP3QucmVuZGVyUHJvZ3Jlc3NiYXIuY2FsbChlLHQucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MpOic8c3BhbiBjbGFzcz1cIicrdC5wcm9ncmVzc2JhckZpbGxDbGFzcysnXCI+PC9zcGFuPicsaS5odG1sKHMpKSxcImN1c3RvbVwiIT09dC50eXBlJiZlLmVtaXQoXCJwYWdpbmF0aW9uUmVuZGVyXCIsZS5wYWdpbmF0aW9uLiRlbFswXSl9fSxpbml0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxlPWEucGFyYW1zLnBhZ2luYXRpb247aWYoZS5lbCl7dmFyIHQ9TChlLmVsKTswIT09dC5sZW5ndGgmJihhLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyYmXCJzdHJpbmdcIj09dHlwZW9mIGUuZWwmJjE8dC5sZW5ndGgmJjE9PT1hLiRlbC5maW5kKGUuZWwpLmxlbmd0aCYmKHQ9YS4kZWwuZmluZChlLmVsKSksXCJidWxsZXRzXCI9PT1lLnR5cGUmJmUuY2xpY2thYmxlJiZ0LmFkZENsYXNzKGUuY2xpY2thYmxlQ2xhc3MpLHQuYWRkQ2xhc3MoZS5tb2RpZmllckNsYXNzK2UudHlwZSksXCJidWxsZXRzXCI9PT1lLnR5cGUmJmUuZHluYW1pY0J1bGxldHMmJih0LmFkZENsYXNzKFwiXCIrZS5tb2RpZmllckNsYXNzK2UudHlwZStcIi1keW5hbWljXCIpLGEucGFnaW5hdGlvbi5keW5hbWljQnVsbGV0SW5kZXg9MCxlLmR5bmFtaWNNYWluQnVsbGV0czwxJiYoZS5keW5hbWljTWFpbkJ1bGxldHM9MSkpLFwicHJvZ3Jlc3NiYXJcIj09PWUudHlwZSYmZS5wcm9ncmVzc2Jhck9wcG9zaXRlJiZ0LmFkZENsYXNzKGUucHJvZ3Jlc3NiYXJPcHBvc2l0ZUNsYXNzKSxlLmNsaWNrYWJsZSYmdC5vbihcImNsaWNrXCIsXCIuXCIrZS5idWxsZXRDbGFzcyxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9TCh0aGlzKS5pbmRleCgpKmEucGFyYW1zLnNsaWRlc1Blckdyb3VwO2EucGFyYW1zLmxvb3AmJih0Kz1hLmxvb3BlZFNsaWRlcyksYS5zbGlkZVRvKHQpfSksZWUuZXh0ZW5kKGEucGFnaW5hdGlvbix7JGVsOnQsZWw6dFswXX0pKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYXJhbXMucGFnaW5hdGlvbjtpZih0LmVsJiZlLnBhZ2luYXRpb24uZWwmJmUucGFnaW5hdGlvbi4kZWwmJjAhPT1lLnBhZ2luYXRpb24uJGVsLmxlbmd0aCl7dmFyIGE9ZS5wYWdpbmF0aW9uLiRlbDthLnJlbW92ZUNsYXNzKHQuaGlkZGVuQ2xhc3MpLGEucmVtb3ZlQ2xhc3ModC5tb2RpZmllckNsYXNzK3QudHlwZSksZS5wYWdpbmF0aW9uLmJ1bGxldHMmJmUucGFnaW5hdGlvbi5idWxsZXRzLnJlbW92ZUNsYXNzKHQuYnVsbGV0QWN0aXZlQ2xhc3MpLHQuY2xpY2thYmxlJiZhLm9mZihcImNsaWNrXCIsXCIuXCIrdC5idWxsZXRDbGFzcyl9fX0sRz17c2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLnBhcmFtcy5zY3JvbGxiYXIuZWwmJmUuc2Nyb2xsYmFyLmVsKXt2YXIgdD1lLnNjcm9sbGJhcixhPWUucnRsVHJhbnNsYXRlLGk9ZS5wcm9ncmVzcyxzPXQuZHJhZ1NpemUscj10LnRyYWNrU2l6ZSxuPXQuJGRyYWdFbCxvPXQuJGVsLGw9ZS5wYXJhbXMuc2Nyb2xsYmFyLGQ9cyxwPShyLXMpKmk7YT8wPChwPS1wKT8oZD1zLXAscD0wKTpyPC1wK3MmJihkPXIrcCk6cDwwPyhkPXMrcCxwPTApOnI8cCtzJiYoZD1yLXApLGUuaXNIb3Jpem9udGFsKCk/KHRlLnRyYW5zZm9ybXMzZD9uLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK3ArXCJweCwgMCwgMClcIik6bi50cmFuc2Zvcm0oXCJ0cmFuc2xhdGVYKFwiK3ArXCJweClcIiksblswXS5zdHlsZS53aWR0aD1kK1wicHhcIik6KHRlLnRyYW5zZm9ybXMzZD9uLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDBweCwgXCIrcCtcInB4LCAwKVwiKTpuLnRyYW5zZm9ybShcInRyYW5zbGF0ZVkoXCIrcCtcInB4KVwiKSxuWzBdLnN0eWxlLmhlaWdodD1kK1wicHhcIiksbC5oaWRlJiYoY2xlYXJUaW1lb3V0KGUuc2Nyb2xsYmFyLnRpbWVvdXQpLG9bMF0uc3R5bGUub3BhY2l0eT0xLGUuc2Nyb2xsYmFyLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe29bMF0uc3R5bGUub3BhY2l0eT0wLG8udHJhbnNpdGlvbig0MDApfSwxZTMpKX19LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7dGhpcy5wYXJhbXMuc2Nyb2xsYmFyLmVsJiZ0aGlzLnNjcm9sbGJhci5lbCYmdGhpcy5zY3JvbGxiYXIuJGRyYWdFbC50cmFuc2l0aW9uKGUpfSx1cGRhdGVTaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLnBhcmFtcy5zY3JvbGxiYXIuZWwmJmUuc2Nyb2xsYmFyLmVsKXt2YXIgdD1lLnNjcm9sbGJhcixhPXQuJGRyYWdFbCxpPXQuJGVsO2FbMF0uc3R5bGUud2lkdGg9XCJcIixhWzBdLnN0eWxlLmhlaWdodD1cIlwiO3ZhciBzLHI9ZS5pc0hvcml6b250YWwoKT9pWzBdLm9mZnNldFdpZHRoOmlbMF0ub2Zmc2V0SGVpZ2h0LG49ZS5zaXplL2UudmlydHVhbFNpemUsbz1uKihyL2Uuc2l6ZSk7cz1cImF1dG9cIj09PWUucGFyYW1zLnNjcm9sbGJhci5kcmFnU2l6ZT9yKm46cGFyc2VJbnQoZS5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdTaXplLDEwKSxlLmlzSG9yaXpvbnRhbCgpP2FbMF0uc3R5bGUud2lkdGg9cytcInB4XCI6YVswXS5zdHlsZS5oZWlnaHQ9cytcInB4XCIsaVswXS5zdHlsZS5kaXNwbGF5PTE8PW4/XCJub25lXCI6XCJcIixlLnBhcmFtcy5zY3JvbGxiYXIuaGlkZSYmKGlbMF0uc3R5bGUub3BhY2l0eT0wKSxlZS5leHRlbmQodCx7dHJhY2tTaXplOnIsZGl2aWRlcjpuLG1vdmVEaXZpZGVyOm8sZHJhZ1NpemU6c30pLHQuJGVsW2UucGFyYW1zLndhdGNoT3ZlcmZsb3cmJmUuaXNMb2NrZWQ/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZS5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcyl9fSxzZXREcmFnUG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQsYT10aGlzLGk9YS5zY3JvbGxiYXIscz1hLnJ0bFRyYW5zbGF0ZSxyPWkuJGVsLG49aS5kcmFnU2l6ZSxvPWkudHJhY2tTaXplO3Q9KChhLmlzSG9yaXpvbnRhbCgpP1widG91Y2hzdGFydFwiPT09ZS50eXBlfHxcInRvdWNobW92ZVwiPT09ZS50eXBlP2UudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDplLnBhZ2VYfHxlLmNsaWVudFg6XCJ0b3VjaHN0YXJ0XCI9PT1lLnR5cGV8fFwidG91Y2htb3ZlXCI9PT1lLnR5cGU/ZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZOmUucGFnZVl8fGUuY2xpZW50WSktci5vZmZzZXQoKVthLmlzSG9yaXpvbnRhbCgpP1wibGVmdFwiOlwidG9wXCJdLW4vMikvKG8tbiksdD1NYXRoLm1heChNYXRoLm1pbih0LDEpLDApLHMmJih0PTEtdCk7dmFyIGw9YS5taW5UcmFuc2xhdGUoKSsoYS5tYXhUcmFuc2xhdGUoKS1hLm1pblRyYW5zbGF0ZSgpKSp0O2EudXBkYXRlUHJvZ3Jlc3MobCksYS5zZXRUcmFuc2xhdGUobCksYS51cGRhdGVBY3RpdmVJbmRleCgpLGEudXBkYXRlU2xpZGVzQ2xhc3NlcygpfSxvbkRyYWdTdGFydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC5wYXJhbXMuc2Nyb2xsYmFyLGk9dC5zY3JvbGxiYXIscz10LiR3cmFwcGVyRWwscj1pLiRlbCxuPWkuJGRyYWdFbDt0LnNjcm9sbGJhci5pc1RvdWNoZWQ9ITAsZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkscy50cmFuc2l0aW9uKDEwMCksbi50cmFuc2l0aW9uKDEwMCksaS5zZXREcmFnUG9zaXRpb24oZSksY2xlYXJUaW1lb3V0KHQuc2Nyb2xsYmFyLmRyYWdUaW1lb3V0KSxyLnRyYW5zaXRpb24oMCksYS5oaWRlJiZyLmNzcyhcIm9wYWNpdHlcIiwxKSx0LmVtaXQoXCJzY3JvbGxiYXJEcmFnU3RhcnRcIixlKX0sb25EcmFnTW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNjcm9sbGJhcixhPXRoaXMuJHdyYXBwZXJFbCxpPXQuJGVsLHM9dC4kZHJhZ0VsO3RoaXMuc2Nyb2xsYmFyLmlzVG91Y2hlZCYmKGUucHJldmVudERlZmF1bHQ/ZS5wcmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITEsdC5zZXREcmFnUG9zaXRpb24oZSksYS50cmFuc2l0aW9uKDApLGkudHJhbnNpdGlvbigwKSxzLnRyYW5zaXRpb24oMCksdGhpcy5lbWl0KFwic2Nyb2xsYmFyRHJhZ01vdmVcIixlKSl9LG9uRHJhZ0VuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC5wYXJhbXMuc2Nyb2xsYmFyLGk9dC5zY3JvbGxiYXIuJGVsO3Quc2Nyb2xsYmFyLmlzVG91Y2hlZCYmKHQuc2Nyb2xsYmFyLmlzVG91Y2hlZD0hMSxhLmhpZGUmJihjbGVhclRpbWVvdXQodC5zY3JvbGxiYXIuZHJhZ1RpbWVvdXQpLHQuc2Nyb2xsYmFyLmRyYWdUaW1lb3V0PWVlLm5leHRUaWNrKGZ1bmN0aW9uKCl7aS5jc3MoXCJvcGFjaXR5XCIsMCksaS50cmFuc2l0aW9uKDQwMCl9LDFlMykpLHQuZW1pdChcInNjcm9sbGJhckRyYWdFbmRcIixlKSxhLnNuYXBPblJlbGVhc2UmJnQuc2xpZGVUb0Nsb3Nlc3QoKSl9LGVuYWJsZURyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5wYXJhbXMuc2Nyb2xsYmFyLmVsKXt2YXIgdD1lLnNjcm9sbGJhcixhPWUudG91Y2hFdmVudHNUb3VjaCxpPWUudG91Y2hFdmVudHNEZXNrdG9wLHM9ZS5wYXJhbXMscj10LiRlbFswXSxuPSEoIXRlLnBhc3NpdmVMaXN0ZW5lcnx8IXMucGFzc2l2ZUxpc3RlbmVycykmJntwYXNzaXZlOiExLGNhcHR1cmU6ITF9LG89ISghdGUucGFzc2l2ZUxpc3RlbmVyfHwhcy5wYXNzaXZlTGlzdGVuZXJzKSYme3Bhc3NpdmU6ITAsY2FwdHVyZTohMX07dGUudG91Y2g/KHIuYWRkRXZlbnRMaXN0ZW5lcihhLnN0YXJ0LGUuc2Nyb2xsYmFyLm9uRHJhZ1N0YXJ0LG4pLHIuYWRkRXZlbnRMaXN0ZW5lcihhLm1vdmUsZS5zY3JvbGxiYXIub25EcmFnTW92ZSxuKSxyLmFkZEV2ZW50TGlzdGVuZXIoYS5lbmQsZS5zY3JvbGxiYXIub25EcmFnRW5kLG8pKTooci5hZGRFdmVudExpc3RlbmVyKGkuc3RhcnQsZS5zY3JvbGxiYXIub25EcmFnU3RhcnQsbiksZi5hZGRFdmVudExpc3RlbmVyKGkubW92ZSxlLnNjcm9sbGJhci5vbkRyYWdNb3ZlLG4pLGYuYWRkRXZlbnRMaXN0ZW5lcihpLmVuZCxlLnNjcm9sbGJhci5vbkRyYWdFbmQsbykpfX0sZGlzYWJsZURyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5wYXJhbXMuc2Nyb2xsYmFyLmVsKXt2YXIgdD1lLnNjcm9sbGJhcixhPWUudG91Y2hFdmVudHNUb3VjaCxpPWUudG91Y2hFdmVudHNEZXNrdG9wLHM9ZS5wYXJhbXMscj10LiRlbFswXSxuPSEoIXRlLnBhc3NpdmVMaXN0ZW5lcnx8IXMucGFzc2l2ZUxpc3RlbmVycykmJntwYXNzaXZlOiExLGNhcHR1cmU6ITF9LG89ISghdGUucGFzc2l2ZUxpc3RlbmVyfHwhcy5wYXNzaXZlTGlzdGVuZXJzKSYme3Bhc3NpdmU6ITAsY2FwdHVyZTohMX07dGUudG91Y2g/KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLnN0YXJ0LGUuc2Nyb2xsYmFyLm9uRHJhZ1N0YXJ0LG4pLHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLm1vdmUsZS5zY3JvbGxiYXIub25EcmFnTW92ZSxuKSxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoYS5lbmQsZS5zY3JvbGxiYXIub25EcmFnRW5kLG8pKTooci5yZW1vdmVFdmVudExpc3RlbmVyKGkuc3RhcnQsZS5zY3JvbGxiYXIub25EcmFnU3RhcnQsbiksZi5yZW1vdmVFdmVudExpc3RlbmVyKGkubW92ZSxlLnNjcm9sbGJhci5vbkRyYWdNb3ZlLG4pLGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLmVuZCxlLnNjcm9sbGJhci5vbkRyYWdFbmQsbykpfX0saW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5wYXJhbXMuc2Nyb2xsYmFyLmVsKXt2YXIgdD1lLnNjcm9sbGJhcixhPWUuJGVsLGk9ZS5wYXJhbXMuc2Nyb2xsYmFyLHM9TChpLmVsKTtlLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyYmXCJzdHJpbmdcIj09dHlwZW9mIGkuZWwmJjE8cy5sZW5ndGgmJjE9PT1hLmZpbmQoaS5lbCkubGVuZ3RoJiYocz1hLmZpbmQoaS5lbCkpO3ZhciByPXMuZmluZChcIi5cIitlLnBhcmFtcy5zY3JvbGxiYXIuZHJhZ0NsYXNzKTswPT09ci5sZW5ndGgmJihyPUwoJzxkaXYgY2xhc3M9XCInK2UucGFyYW1zLnNjcm9sbGJhci5kcmFnQ2xhc3MrJ1wiPjwvZGl2PicpLHMuYXBwZW5kKHIpKSxlZS5leHRlbmQodCx7JGVsOnMsZWw6c1swXSwkZHJhZ0VsOnIsZHJhZ0VsOnJbMF19KSxpLmRyYWdnYWJsZSYmdC5lbmFibGVEcmFnZ2FibGUoKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhci5kaXNhYmxlRHJhZ2dhYmxlKCl9fSxCPXtzZXRUcmFuc2Zvcm06ZnVuY3Rpb24oZSx0KXt2YXIgYT10aGlzLnJ0bCxpPUwoZSkscz1hPy0xOjEscj1pLmF0dHIoXCJkYXRhLXN3aXBlci1wYXJhbGxheFwiKXx8XCIwXCIsbj1pLmF0dHIoXCJkYXRhLXN3aXBlci1wYXJhbGxheC14XCIpLG89aS5hdHRyKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgteVwiKSxsPWkuYXR0cihcImRhdGEtc3dpcGVyLXBhcmFsbGF4LXNjYWxlXCIpLGQ9aS5hdHRyKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eVwiKTtpZihufHxvPyhuPW58fFwiMFwiLG89b3x8XCIwXCIpOnRoaXMuaXNIb3Jpem9udGFsKCk/KG49cixvPVwiMFwiKToobz1yLG49XCIwXCIpLG49MDw9bi5pbmRleE9mKFwiJVwiKT9wYXJzZUludChuLDEwKSp0KnMrXCIlXCI6bip0KnMrXCJweFwiLG89MDw9by5pbmRleE9mKFwiJVwiKT9wYXJzZUludChvLDEwKSp0K1wiJVwiOm8qdCtcInB4XCIsbnVsbCE9ZCl7dmFyIHA9ZC0oZC0xKSooMS1NYXRoLmFicyh0KSk7aVswXS5zdHlsZS5vcGFjaXR5PXB9aWYobnVsbD09bClpLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK24rXCIsIFwiK28rXCIsIDBweClcIik7ZWxzZXt2YXIgYz1sLShsLTEpKigxLU1hdGguYWJzKHQpKTtpLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK24rXCIsIFwiK28rXCIsIDBweCkgc2NhbGUoXCIrYytcIilcIil9fSxzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLGU9aS4kZWwsdD1pLnNsaWRlcyxzPWkucHJvZ3Jlc3Mscj1pLnNuYXBHcmlkO2UuY2hpbGRyZW4oXCJbZGF0YS1zd2lwZXItcGFyYWxsYXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC15XVwiKS5lYWNoKGZ1bmN0aW9uKGUsdCl7aS5wYXJhbGxheC5zZXRUcmFuc2Zvcm0odCxzKX0pLHQuZWFjaChmdW5jdGlvbihlLHQpe3ZhciBhPXQucHJvZ3Jlc3M7MTxpLnBhcmFtcy5zbGlkZXNQZXJHcm91cCYmXCJhdXRvXCIhPT1pLnBhcmFtcy5zbGlkZXNQZXJWaWV3JiYoYSs9TWF0aC5jZWlsKGUvMiktcyooci5sZW5ndGgtMSkpLGE9TWF0aC5taW4oTWF0aC5tYXgoYSwtMSksMSksTCh0KS5maW5kKFwiW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV1cIikuZWFjaChmdW5jdGlvbihlLHQpe2kucGFyYWxsYXguc2V0VHJhbnNmb3JtKHQsYSl9KX0pfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKHMpe3ZvaWQgMD09PXMmJihzPXRoaXMucGFyYW1zLnNwZWVkKTt0aGlzLiRlbC5maW5kKFwiW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV1cIikuZWFjaChmdW5jdGlvbihlLHQpe3ZhciBhPUwodCksaT1wYXJzZUludChhLmF0dHIoXCJkYXRhLXN3aXBlci1wYXJhbGxheC1kdXJhdGlvblwiKSwxMCl8fHM7MD09PXMmJihpPTApLGEudHJhbnNpdGlvbihpKX0pfX0sWD17Z2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlczpmdW5jdGlvbihlKXtpZihlLnRhcmdldFRvdWNoZXMubGVuZ3RoPDIpcmV0dXJuIDE7dmFyIHQ9ZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLGE9ZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZLGk9ZS50YXJnZXRUb3VjaGVzWzFdLnBhZ2VYLHM9ZS50YXJnZXRUb3VjaGVzWzFdLnBhZ2VZO3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coaS10LDIpK01hdGgucG93KHMtYSwyKSl9LG9uR2VzdHVyZVN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsYT10LnBhcmFtcy56b29tLGk9dC56b29tLHM9aS5nZXN0dXJlO2lmKGkuZmFrZUdlc3R1cmVUb3VjaGVkPSExLGkuZmFrZUdlc3R1cmVNb3ZlZD0hMSwhdGUuZ2VzdHVyZXMpe2lmKFwidG91Y2hzdGFydFwiIT09ZS50eXBlfHxcInRvdWNoc3RhcnRcIj09PWUudHlwZSYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aDwyKXJldHVybjtpLmZha2VHZXN0dXJlVG91Y2hlZD0hMCxzLnNjYWxlU3RhcnQ9WC5nZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKGUpfXMuJHNsaWRlRWwmJnMuJHNsaWRlRWwubGVuZ3RofHwocy4kc2xpZGVFbD1MKGUudGFyZ2V0KS5jbG9zZXN0KFwiLnN3aXBlci1zbGlkZVwiKSwwPT09cy4kc2xpZGVFbC5sZW5ndGgmJihzLiRzbGlkZUVsPXQuc2xpZGVzLmVxKHQuYWN0aXZlSW5kZXgpKSxzLiRpbWFnZUVsPXMuJHNsaWRlRWwuZmluZChcImltZywgc3ZnLCBjYW52YXNcIikscy4kaW1hZ2VXcmFwRWw9cy4kaW1hZ2VFbC5wYXJlbnQoXCIuXCIrYS5jb250YWluZXJDbGFzcykscy5tYXhSYXRpbz1zLiRpbWFnZVdyYXBFbC5hdHRyKFwiZGF0YS1zd2lwZXItem9vbVwiKXx8YS5tYXhSYXRpbywwIT09cy4kaW1hZ2VXcmFwRWwubGVuZ3RoKT8ocy4kaW1hZ2VFbC50cmFuc2l0aW9uKDApLHQuem9vbS5pc1NjYWxpbmc9ITApOnMuJGltYWdlRWw9dm9pZCAwfSxvbkdlc3R1cmVDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJhbXMuem9vbSxhPXRoaXMuem9vbSxpPWEuZ2VzdHVyZTtpZighdGUuZ2VzdHVyZXMpe2lmKFwidG91Y2htb3ZlXCIhPT1lLnR5cGV8fFwidG91Y2htb3ZlXCI9PT1lLnR5cGUmJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg8MilyZXR1cm47YS5mYWtlR2VzdHVyZU1vdmVkPSEwLGkuc2NhbGVNb3ZlPVguZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlKX1pLiRpbWFnZUVsJiYwIT09aS4kaW1hZ2VFbC5sZW5ndGgmJihhLnNjYWxlPXRlLmdlc3R1cmVzP2Uuc2NhbGUqYS5jdXJyZW50U2NhbGU6aS5zY2FsZU1vdmUvaS5zY2FsZVN0YXJ0KmEuY3VycmVudFNjYWxlLGEuc2NhbGU+aS5tYXhSYXRpbyYmKGEuc2NhbGU9aS5tYXhSYXRpby0xK01hdGgucG93KGEuc2NhbGUtaS5tYXhSYXRpbysxLC41KSksYS5zY2FsZTx0Lm1pblJhdGlvJiYoYS5zY2FsZT10Lm1pblJhdGlvKzEtTWF0aC5wb3codC5taW5SYXRpby1hLnNjYWxlKzEsLjUpKSxpLiRpbWFnZUVsLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZShcIithLnNjYWxlK1wiKVwiKSl9LG9uR2VzdHVyZUVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnBhcmFtcy56b29tLGE9dGhpcy56b29tLGk9YS5nZXN0dXJlO2lmKCF0ZS5nZXN0dXJlcyl7aWYoIWEuZmFrZUdlc3R1cmVUb3VjaGVkfHwhYS5mYWtlR2VzdHVyZU1vdmVkKXJldHVybjtpZihcInRvdWNoZW5kXCIhPT1lLnR5cGV8fFwidG91Y2hlbmRcIj09PWUudHlwZSYmZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg8MiYmIWcuYW5kcm9pZClyZXR1cm47YS5mYWtlR2VzdHVyZVRvdWNoZWQ9ITEsYS5mYWtlR2VzdHVyZU1vdmVkPSExfWkuJGltYWdlRWwmJjAhPT1pLiRpbWFnZUVsLmxlbmd0aCYmKGEuc2NhbGU9TWF0aC5tYXgoTWF0aC5taW4oYS5zY2FsZSxpLm1heFJhdGlvKSx0Lm1pblJhdGlvKSxpLiRpbWFnZUVsLnRyYW5zaXRpb24odGhpcy5wYXJhbXMuc3BlZWQpLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZShcIithLnNjYWxlK1wiKVwiKSxhLmN1cnJlbnRTY2FsZT1hLnNjYWxlLGEuaXNTY2FsaW5nPSExLDE9PT1hLnNjYWxlJiYoaS4kc2xpZGVFbD12b2lkIDApKX0sb25Ub3VjaFN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuem9vbSxhPXQuZ2VzdHVyZSxpPXQuaW1hZ2U7YS4kaW1hZ2VFbCYmMCE9PWEuJGltYWdlRWwubGVuZ3RoJiYoaS5pc1RvdWNoZWR8fChnLmFuZHJvaWQmJmUucHJldmVudERlZmF1bHQoKSxpLmlzVG91Y2hlZD0hMCxpLnRvdWNoZXNTdGFydC54PVwidG91Y2hzdGFydFwiPT09ZS50eXBlP2UudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDplLnBhZ2VYLGkudG91Y2hlc1N0YXJ0Lnk9XCJ0b3VjaHN0YXJ0XCI9PT1lLnR5cGU/ZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZOmUucGFnZVkpKX0sb25Ub3VjaE1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxhPXQuem9vbSxpPWEuZ2VzdHVyZSxzPWEuaW1hZ2Uscj1hLnZlbG9jaXR5O2lmKGkuJGltYWdlRWwmJjAhPT1pLiRpbWFnZUVsLmxlbmd0aCYmKHQuYWxsb3dDbGljaz0hMSxzLmlzVG91Y2hlZCYmaS4kc2xpZGVFbCkpe3MuaXNNb3ZlZHx8KHMud2lkdGg9aS4kaW1hZ2VFbFswXS5vZmZzZXRXaWR0aCxzLmhlaWdodD1pLiRpbWFnZUVsWzBdLm9mZnNldEhlaWdodCxzLnN0YXJ0WD1lZS5nZXRUcmFuc2xhdGUoaS4kaW1hZ2VXcmFwRWxbMF0sXCJ4XCIpfHwwLHMuc3RhcnRZPWVlLmdldFRyYW5zbGF0ZShpLiRpbWFnZVdyYXBFbFswXSxcInlcIil8fDAsaS5zbGlkZVdpZHRoPWkuJHNsaWRlRWxbMF0ub2Zmc2V0V2lkdGgsaS5zbGlkZUhlaWdodD1pLiRzbGlkZUVsWzBdLm9mZnNldEhlaWdodCxpLiRpbWFnZVdyYXBFbC50cmFuc2l0aW9uKDApLHQucnRsJiYocy5zdGFydFg9LXMuc3RhcnRYLHMuc3RhcnRZPS1zLnN0YXJ0WSkpO3ZhciBuPXMud2lkdGgqYS5zY2FsZSxvPXMuaGVpZ2h0KmEuc2NhbGU7aWYoIShuPGkuc2xpZGVXaWR0aCYmbzxpLnNsaWRlSGVpZ2h0KSl7aWYocy5taW5YPU1hdGgubWluKGkuc2xpZGVXaWR0aC8yLW4vMiwwKSxzLm1heFg9LXMubWluWCxzLm1pblk9TWF0aC5taW4oaS5zbGlkZUhlaWdodC8yLW8vMiwwKSxzLm1heFk9LXMubWluWSxzLnRvdWNoZXNDdXJyZW50Lng9XCJ0b3VjaG1vdmVcIj09PWUudHlwZT9lLnRhcmdldFRvdWNoZXNbMF0ucGFnZVg6ZS5wYWdlWCxzLnRvdWNoZXNDdXJyZW50Lnk9XCJ0b3VjaG1vdmVcIj09PWUudHlwZT9lLnRhcmdldFRvdWNoZXNbMF0ucGFnZVk6ZS5wYWdlWSwhcy5pc01vdmVkJiYhYS5pc1NjYWxpbmcpe2lmKHQuaXNIb3Jpem9udGFsKCkmJihNYXRoLmZsb29yKHMubWluWCk9PT1NYXRoLmZsb29yKHMuc3RhcnRYKSYmcy50b3VjaGVzQ3VycmVudC54PHMudG91Y2hlc1N0YXJ0Lnh8fE1hdGguZmxvb3Iocy5tYXhYKT09PU1hdGguZmxvb3Iocy5zdGFydFgpJiZzLnRvdWNoZXNDdXJyZW50Lng+cy50b3VjaGVzU3RhcnQueCkpcmV0dXJuIHZvaWQocy5pc1RvdWNoZWQ9ITEpO2lmKCF0LmlzSG9yaXpvbnRhbCgpJiYoTWF0aC5mbG9vcihzLm1pblkpPT09TWF0aC5mbG9vcihzLnN0YXJ0WSkmJnMudG91Y2hlc0N1cnJlbnQueTxzLnRvdWNoZXNTdGFydC55fHxNYXRoLmZsb29yKHMubWF4WSk9PT1NYXRoLmZsb29yKHMuc3RhcnRZKSYmcy50b3VjaGVzQ3VycmVudC55PnMudG91Y2hlc1N0YXJ0LnkpKXJldHVybiB2b2lkKHMuaXNUb3VjaGVkPSExKX1lLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxzLmlzTW92ZWQ9ITAscy5jdXJyZW50WD1zLnRvdWNoZXNDdXJyZW50Lngtcy50b3VjaGVzU3RhcnQueCtzLnN0YXJ0WCxzLmN1cnJlbnRZPXMudG91Y2hlc0N1cnJlbnQueS1zLnRvdWNoZXNTdGFydC55K3Muc3RhcnRZLHMuY3VycmVudFg8cy5taW5YJiYocy5jdXJyZW50WD1zLm1pblgrMS1NYXRoLnBvdyhzLm1pblgtcy5jdXJyZW50WCsxLC44KSkscy5jdXJyZW50WD5zLm1heFgmJihzLmN1cnJlbnRYPXMubWF4WC0xK01hdGgucG93KHMuY3VycmVudFgtcy5tYXhYKzEsLjgpKSxzLmN1cnJlbnRZPHMubWluWSYmKHMuY3VycmVudFk9cy5taW5ZKzEtTWF0aC5wb3cocy5taW5ZLXMuY3VycmVudFkrMSwuOCkpLHMuY3VycmVudFk+cy5tYXhZJiYocy5jdXJyZW50WT1zLm1heFktMStNYXRoLnBvdyhzLmN1cnJlbnRZLXMubWF4WSsxLC44KSksci5wcmV2UG9zaXRpb25YfHwoci5wcmV2UG9zaXRpb25YPXMudG91Y2hlc0N1cnJlbnQueCksci5wcmV2UG9zaXRpb25ZfHwoci5wcmV2UG9zaXRpb25ZPXMudG91Y2hlc0N1cnJlbnQueSksci5wcmV2VGltZXx8KHIucHJldlRpbWU9RGF0ZS5ub3coKSksci54PShzLnRvdWNoZXNDdXJyZW50Lngtci5wcmV2UG9zaXRpb25YKS8oRGF0ZS5ub3coKS1yLnByZXZUaW1lKS8yLHIueT0ocy50b3VjaGVzQ3VycmVudC55LXIucHJldlBvc2l0aW9uWSkvKERhdGUubm93KCktci5wcmV2VGltZSkvMixNYXRoLmFicyhzLnRvdWNoZXNDdXJyZW50Lngtci5wcmV2UG9zaXRpb25YKTwyJiYoci54PTApLE1hdGguYWJzKHMudG91Y2hlc0N1cnJlbnQueS1yLnByZXZQb3NpdGlvblkpPDImJihyLnk9MCksci5wcmV2UG9zaXRpb25YPXMudG91Y2hlc0N1cnJlbnQueCxyLnByZXZQb3NpdGlvblk9cy50b3VjaGVzQ3VycmVudC55LHIucHJldlRpbWU9RGF0ZS5ub3coKSxpLiRpbWFnZVdyYXBFbC50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZChcIitzLmN1cnJlbnRYK1wicHgsIFwiK3MuY3VycmVudFkrXCJweCwwKVwiKX19fSxvblRvdWNoRW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy56b29tLHQ9ZS5nZXN0dXJlLGE9ZS5pbWFnZSxpPWUudmVsb2NpdHk7aWYodC4kaW1hZ2VFbCYmMCE9PXQuJGltYWdlRWwubGVuZ3RoKXtpZighYS5pc1RvdWNoZWR8fCFhLmlzTW92ZWQpcmV0dXJuIGEuaXNUb3VjaGVkPSExLHZvaWQoYS5pc01vdmVkPSExKTthLmlzVG91Y2hlZD0hMSxhLmlzTW92ZWQ9ITE7dmFyIHM9MzAwLHI9MzAwLG49aS54KnMsbz1hLmN1cnJlbnRYK24sbD1pLnkqcixkPWEuY3VycmVudFkrbDswIT09aS54JiYocz1NYXRoLmFicygoby1hLmN1cnJlbnRYKS9pLngpKSwwIT09aS55JiYocj1NYXRoLmFicygoZC1hLmN1cnJlbnRZKS9pLnkpKTt2YXIgcD1NYXRoLm1heChzLHIpO2EuY3VycmVudFg9byxhLmN1cnJlbnRZPWQ7dmFyIGM9YS53aWR0aCplLnNjYWxlLHU9YS5oZWlnaHQqZS5zY2FsZTthLm1pblg9TWF0aC5taW4odC5zbGlkZVdpZHRoLzItYy8yLDApLGEubWF4WD0tYS5taW5YLGEubWluWT1NYXRoLm1pbih0LnNsaWRlSGVpZ2h0LzItdS8yLDApLGEubWF4WT0tYS5taW5ZLGEuY3VycmVudFg9TWF0aC5tYXgoTWF0aC5taW4oYS5jdXJyZW50WCxhLm1heFgpLGEubWluWCksYS5jdXJyZW50WT1NYXRoLm1heChNYXRoLm1pbihhLmN1cnJlbnRZLGEubWF4WSksYS5taW5ZKSx0LiRpbWFnZVdyYXBFbC50cmFuc2l0aW9uKHApLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK2EuY3VycmVudFgrXCJweCwgXCIrYS5jdXJyZW50WStcInB4LDApXCIpfX0sb25UcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy56b29tLHQ9ZS5nZXN0dXJlO3QuJHNsaWRlRWwmJnRoaXMucHJldmlvdXNJbmRleCE9PXRoaXMuYWN0aXZlSW5kZXgmJih0LiRpbWFnZUVsLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgxKVwiKSx0LiRpbWFnZVdyYXBFbC50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZCgwLDAsMClcIiksZS5zY2FsZT0xLGUuY3VycmVudFNjYWxlPTEsdC4kc2xpZGVFbD12b2lkIDAsdC4kaW1hZ2VFbD12b2lkIDAsdC4kaW1hZ2VXcmFwRWw9dm9pZCAwKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuem9vbTt0LnNjYWxlJiYxIT09dC5zY2FsZT90Lm91dCgpOnQuaW4oZSl9LGluOmZ1bmN0aW9uKGUpe3ZhciB0LGEsaSxzLHIsbixvLGwsZCxwLGMsdSxoLHYsZixtLGc9dGhpcyxiPWcuem9vbSx3PWcucGFyYW1zLnpvb20seT1iLmdlc3R1cmUseD1iLmltYWdlOyh5LiRzbGlkZUVsfHwoeS4kc2xpZGVFbD1nLmNsaWNrZWRTbGlkZT9MKGcuY2xpY2tlZFNsaWRlKTpnLnNsaWRlcy5lcShnLmFjdGl2ZUluZGV4KSx5LiRpbWFnZUVsPXkuJHNsaWRlRWwuZmluZChcImltZywgc3ZnLCBjYW52YXNcIikseS4kaW1hZ2VXcmFwRWw9eS4kaW1hZ2VFbC5wYXJlbnQoXCIuXCIrdy5jb250YWluZXJDbGFzcykpLHkuJGltYWdlRWwmJjAhPT15LiRpbWFnZUVsLmxlbmd0aCkmJih5LiRzbGlkZUVsLmFkZENsYXNzKFwiXCIrdy56b29tZWRTbGlkZUNsYXNzKSx2b2lkIDA9PT14LnRvdWNoZXNTdGFydC54JiZlPyh0PVwidG91Y2hlbmRcIj09PWUudHlwZT9lLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYOmUucGFnZVgsYT1cInRvdWNoZW5kXCI9PT1lLnR5cGU/ZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTplLnBhZ2VZKToodD14LnRvdWNoZXNTdGFydC54LGE9eC50b3VjaGVzU3RhcnQueSksYi5zY2FsZT15LiRpbWFnZVdyYXBFbC5hdHRyKFwiZGF0YS1zd2lwZXItem9vbVwiKXx8dy5tYXhSYXRpbyxiLmN1cnJlbnRTY2FsZT15LiRpbWFnZVdyYXBFbC5hdHRyKFwiZGF0YS1zd2lwZXItem9vbVwiKXx8dy5tYXhSYXRpbyxlPyhmPXkuJHNsaWRlRWxbMF0ub2Zmc2V0V2lkdGgsbT15LiRzbGlkZUVsWzBdLm9mZnNldEhlaWdodCxpPXkuJHNsaWRlRWwub2Zmc2V0KCkubGVmdCtmLzItdCxzPXkuJHNsaWRlRWwub2Zmc2V0KCkudG9wK20vMi1hLG89eS4kaW1hZ2VFbFswXS5vZmZzZXRXaWR0aCxsPXkuJGltYWdlRWxbMF0ub2Zmc2V0SGVpZ2h0LGQ9bypiLnNjYWxlLHA9bCpiLnNjYWxlLGg9LShjPU1hdGgubWluKGYvMi1kLzIsMCkpLHY9LSh1PU1hdGgubWluKG0vMi1wLzIsMCkpLChyPWkqYi5zY2FsZSk8YyYmKHI9YyksaDxyJiYocj1oKSwobj1zKmIuc2NhbGUpPHUmJihuPXUpLHY8biYmKG49dikpOm49cj0wLHkuJGltYWdlV3JhcEVsLnRyYW5zaXRpb24oMzAwKS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZChcIityK1wicHgsIFwiK24rXCJweCwwKVwiKSx5LiRpbWFnZUVsLnRyYW5zaXRpb24oMzAwKS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoXCIrYi5zY2FsZStcIilcIikpfSxvdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS56b29tLGE9ZS5wYXJhbXMuem9vbSxpPXQuZ2VzdHVyZTtpLiRzbGlkZUVsfHwoaS4kc2xpZGVFbD1lLmNsaWNrZWRTbGlkZT9MKGUuY2xpY2tlZFNsaWRlKTplLnNsaWRlcy5lcShlLmFjdGl2ZUluZGV4KSxpLiRpbWFnZUVsPWkuJHNsaWRlRWwuZmluZChcImltZywgc3ZnLCBjYW52YXNcIiksaS4kaW1hZ2VXcmFwRWw9aS4kaW1hZ2VFbC5wYXJlbnQoXCIuXCIrYS5jb250YWluZXJDbGFzcykpLGkuJGltYWdlRWwmJjAhPT1pLiRpbWFnZUVsLmxlbmd0aCYmKHQuc2NhbGU9MSx0LmN1cnJlbnRTY2FsZT0xLGkuJGltYWdlV3JhcEVsLnRyYW5zaXRpb24oMzAwKS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZCgwLDAsMClcIiksaS4kaW1hZ2VFbC50cmFuc2l0aW9uKDMwMCkudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKDEpXCIpLGkuJHNsaWRlRWwucmVtb3ZlQ2xhc3MoXCJcIithLnpvb21lZFNsaWRlQ2xhc3MpLGkuJHNsaWRlRWw9dm9pZCAwKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuem9vbTtpZighdC5lbmFibGVkKXt0LmVuYWJsZWQ9ITA7dmFyIGE9IShcInRvdWNoc3RhcnRcIiE9PWUudG91Y2hFdmVudHMuc3RhcnR8fCF0ZS5wYXNzaXZlTGlzdGVuZXJ8fCFlLnBhcmFtcy5wYXNzaXZlTGlzdGVuZXJzKSYme3Bhc3NpdmU6ITAsY2FwdHVyZTohMX07dGUuZ2VzdHVyZXM/KGUuJHdyYXBwZXJFbC5vbihcImdlc3R1cmVzdGFydFwiLFwiLnN3aXBlci1zbGlkZVwiLHQub25HZXN0dXJlU3RhcnQsYSksZS4kd3JhcHBlckVsLm9uKFwiZ2VzdHVyZWNoYW5nZVwiLFwiLnN3aXBlci1zbGlkZVwiLHQub25HZXN0dXJlQ2hhbmdlLGEpLGUuJHdyYXBwZXJFbC5vbihcImdlc3R1cmVlbmRcIixcIi5zd2lwZXItc2xpZGVcIix0Lm9uR2VzdHVyZUVuZCxhKSk6XCJ0b3VjaHN0YXJ0XCI9PT1lLnRvdWNoRXZlbnRzLnN0YXJ0JiYoZS4kd3JhcHBlckVsLm9uKGUudG91Y2hFdmVudHMuc3RhcnQsXCIuc3dpcGVyLXNsaWRlXCIsdC5vbkdlc3R1cmVTdGFydCxhKSxlLiR3cmFwcGVyRWwub24oZS50b3VjaEV2ZW50cy5tb3ZlLFwiLnN3aXBlci1zbGlkZVwiLHQub25HZXN0dXJlQ2hhbmdlLGEpLGUuJHdyYXBwZXJFbC5vbihlLnRvdWNoRXZlbnRzLmVuZCxcIi5zd2lwZXItc2xpZGVcIix0Lm9uR2VzdHVyZUVuZCxhKSksZS4kd3JhcHBlckVsLm9uKGUudG91Y2hFdmVudHMubW92ZSxcIi5cIitlLnBhcmFtcy56b29tLmNvbnRhaW5lckNsYXNzLHQub25Ub3VjaE1vdmUpfX0sZGlzYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnpvb207aWYodC5lbmFibGVkKXtlLnpvb20uZW5hYmxlZD0hMTt2YXIgYT0hKFwidG91Y2hzdGFydFwiIT09ZS50b3VjaEV2ZW50cy5zdGFydHx8IXRlLnBhc3NpdmVMaXN0ZW5lcnx8IWUucGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMpJiZ7cGFzc2l2ZTohMCxjYXB0dXJlOiExfTt0ZS5nZXN0dXJlcz8oZS4kd3JhcHBlckVsLm9mZihcImdlc3R1cmVzdGFydFwiLFwiLnN3aXBlci1zbGlkZVwiLHQub25HZXN0dXJlU3RhcnQsYSksZS4kd3JhcHBlckVsLm9mZihcImdlc3R1cmVjaGFuZ2VcIixcIi5zd2lwZXItc2xpZGVcIix0Lm9uR2VzdHVyZUNoYW5nZSxhKSxlLiR3cmFwcGVyRWwub2ZmKFwiZ2VzdHVyZWVuZFwiLFwiLnN3aXBlci1zbGlkZVwiLHQub25HZXN0dXJlRW5kLGEpKTpcInRvdWNoc3RhcnRcIj09PWUudG91Y2hFdmVudHMuc3RhcnQmJihlLiR3cmFwcGVyRWwub2ZmKGUudG91Y2hFdmVudHMuc3RhcnQsXCIuc3dpcGVyLXNsaWRlXCIsdC5vbkdlc3R1cmVTdGFydCxhKSxlLiR3cmFwcGVyRWwub2ZmKGUudG91Y2hFdmVudHMubW92ZSxcIi5zd2lwZXItc2xpZGVcIix0Lm9uR2VzdHVyZUNoYW5nZSxhKSxlLiR3cmFwcGVyRWwub2ZmKGUudG91Y2hFdmVudHMuZW5kLFwiLnN3aXBlci1zbGlkZVwiLHQub25HZXN0dXJlRW5kLGEpKSxlLiR3cmFwcGVyRWwub2ZmKGUudG91Y2hFdmVudHMubW92ZSxcIi5cIitlLnBhcmFtcy56b29tLmNvbnRhaW5lckNsYXNzLHQub25Ub3VjaE1vdmUpfX19LFk9e2xvYWRJblNsaWRlOmZ1bmN0aW9uKGUsbCl7dm9pZCAwPT09bCYmKGw9ITApO3ZhciBkPXRoaXMscD1kLnBhcmFtcy5sYXp5O2lmKHZvaWQgMCE9PWUmJjAhPT1kLnNsaWRlcy5sZW5ndGgpe3ZhciBjPWQudmlydHVhbCYmZC5wYXJhbXMudmlydHVhbC5lbmFibGVkP2QuJHdyYXBwZXJFbC5jaGlsZHJlbihcIi5cIitkLnBhcmFtcy5zbGlkZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2UrJ1wiXScpOmQuc2xpZGVzLmVxKGUpLHQ9Yy5maW5kKFwiLlwiK3AuZWxlbWVudENsYXNzK1wiOm5vdCguXCIrcC5sb2FkZWRDbGFzcytcIik6bm90KC5cIitwLmxvYWRpbmdDbGFzcytcIilcIik7IWMuaGFzQ2xhc3MocC5lbGVtZW50Q2xhc3MpfHxjLmhhc0NsYXNzKHAubG9hZGVkQ2xhc3MpfHxjLmhhc0NsYXNzKHAubG9hZGluZ0NsYXNzKXx8KHQ9dC5hZGQoY1swXSkpLDAhPT10Lmxlbmd0aCYmdC5lYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIGk9TCh0KTtpLmFkZENsYXNzKHAubG9hZGluZ0NsYXNzKTt2YXIgcz1pLmF0dHIoXCJkYXRhLWJhY2tncm91bmRcIikscj1pLmF0dHIoXCJkYXRhLXNyY1wiKSxuPWkuYXR0cihcImRhdGEtc3Jjc2V0XCIpLG89aS5hdHRyKFwiZGF0YS1zaXplc1wiKTtkLmxvYWRJbWFnZShpWzBdLHJ8fHMsbixvLCExLGZ1bmN0aW9uKCl7aWYobnVsbCE9ZCYmZCYmKCFkfHxkLnBhcmFtcykmJiFkLmRlc3Ryb3llZCl7aWYocz8oaS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsJ3VybChcIicrcysnXCIpJyksaS5yZW1vdmVBdHRyKFwiZGF0YS1iYWNrZ3JvdW5kXCIpKToobiYmKGkuYXR0cihcInNyY3NldFwiLG4pLGkucmVtb3ZlQXR0cihcImRhdGEtc3Jjc2V0XCIpKSxvJiYoaS5hdHRyKFwic2l6ZXNcIixvKSxpLnJlbW92ZUF0dHIoXCJkYXRhLXNpemVzXCIpKSxyJiYoaS5hdHRyKFwic3JjXCIsciksaS5yZW1vdmVBdHRyKFwiZGF0YS1zcmNcIikpKSxpLmFkZENsYXNzKHAubG9hZGVkQ2xhc3MpLnJlbW92ZUNsYXNzKHAubG9hZGluZ0NsYXNzKSxjLmZpbmQoXCIuXCIrcC5wcmVsb2FkZXJDbGFzcykucmVtb3ZlKCksZC5wYXJhbXMubG9vcCYmbCl7dmFyIGU9Yy5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIik7aWYoYy5oYXNDbGFzcyhkLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSl7dmFyIHQ9ZC4kd3JhcHBlckVsLmNoaWxkcmVuKCdbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2UrJ1wiXTpub3QoLicrZC5wYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcytcIilcIik7ZC5sYXp5LmxvYWRJblNsaWRlKHQuaW5kZXgoKSwhMSl9ZWxzZXt2YXIgYT1kLiR3cmFwcGVyRWwuY2hpbGRyZW4oXCIuXCIrZC5wYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcysnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytlKydcIl0nKTtkLmxhenkubG9hZEluU2xpZGUoYS5pbmRleCgpLCExKX19ZC5lbWl0KFwibGF6eUltYWdlUmVhZHlcIixjWzBdLGlbMF0pfX0pLGQuZW1pdChcImxhenlJbWFnZUxvYWRcIixjWzBdLGlbMF0pfSl9fSxsb2FkOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcyx0PWkuJHdyYXBwZXJFbCxhPWkucGFyYW1zLHM9aS5zbGlkZXMsZT1pLmFjdGl2ZUluZGV4LHI9aS52aXJ0dWFsJiZhLnZpcnR1YWwuZW5hYmxlZCxuPWEubGF6eSxvPWEuc2xpZGVzUGVyVmlldztmdW5jdGlvbiBsKGUpe2lmKHIpe2lmKHQuY2hpbGRyZW4oXCIuXCIrYS5zbGlkZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2UrJ1wiXScpLmxlbmd0aClyZXR1cm4hMH1lbHNlIGlmKHNbZV0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gZChlKXtyZXR1cm4gcj9MKGUpLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKTpMKGUpLmluZGV4KCl9aWYoXCJhdXRvXCI9PT1vJiYobz0wKSxpLmxhenkuaW5pdGlhbEltYWdlTG9hZGVkfHwoaS5sYXp5LmluaXRpYWxJbWFnZUxvYWRlZD0hMCksaS5wYXJhbXMud2F0Y2hTbGlkZXNWaXNpYmlsaXR5KXQuY2hpbGRyZW4oXCIuXCIrYS5zbGlkZVZpc2libGVDbGFzcykuZWFjaChmdW5jdGlvbihlLHQpe3ZhciBhPXI/TCh0KS5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIik6TCh0KS5pbmRleCgpO2kubGF6eS5sb2FkSW5TbGlkZShhKX0pO2Vsc2UgaWYoMTxvKWZvcih2YXIgcD1lO3A8ZStvO3ArPTEpbChwKSYmaS5sYXp5LmxvYWRJblNsaWRlKHApO2Vsc2UgaS5sYXp5LmxvYWRJblNsaWRlKGUpO2lmKG4ubG9hZFByZXZOZXh0KWlmKDE8b3x8bi5sb2FkUHJldk5leHRBbW91bnQmJjE8bi5sb2FkUHJldk5leHRBbW91bnQpe2Zvcih2YXIgYz1uLmxvYWRQcmV2TmV4dEFtb3VudCx1PW8saD1NYXRoLm1pbihlK3UrTWF0aC5tYXgoYyx1KSxzLmxlbmd0aCksdj1NYXRoLm1heChlLU1hdGgubWF4KHUsYyksMCksZj1lK287ZjxoO2YrPTEpbChmKSYmaS5sYXp5LmxvYWRJblNsaWRlKGYpO2Zvcih2YXIgbT12O208ZTttKz0xKWwobSkmJmkubGF6eS5sb2FkSW5TbGlkZShtKX1lbHNle3ZhciBnPXQuY2hpbGRyZW4oXCIuXCIrYS5zbGlkZU5leHRDbGFzcyk7MDxnLmxlbmd0aCYmaS5sYXp5LmxvYWRJblNsaWRlKGQoZykpO3ZhciBiPXQuY2hpbGRyZW4oXCIuXCIrYS5zbGlkZVByZXZDbGFzcyk7MDxiLmxlbmd0aCYmaS5sYXp5LmxvYWRJblNsaWRlKGQoYikpfX19LFY9e0xpbmVhclNwbGluZTpmdW5jdGlvbihlLHQpe3ZhciBhLGkscyxyLG4sbz1mdW5jdGlvbihlLHQpe2ZvcihpPS0xLGE9ZS5sZW5ndGg7MTxhLWk7KWVbcz1hK2k+PjFdPD10P2k9czphPXM7cmV0dXJuIGF9O3JldHVybiB0aGlzLng9ZSx0aGlzLnk9dCx0aGlzLmxhc3RJbmRleD1lLmxlbmd0aC0xLHRoaXMuaW50ZXJwb2xhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KG49byh0aGlzLngsZSkscj1uLTEsKGUtdGhpcy54W3JdKSoodGhpcy55W25dLXRoaXMueVtyXSkvKHRoaXMueFtuXS10aGlzLnhbcl0pK3RoaXMueVtyXSk6MH0sdGhpc30sZ2V0SW50ZXJwb2xhdGVGdW5jdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuY29udHJvbGxlci5zcGxpbmV8fCh0LmNvbnRyb2xsZXIuc3BsaW5lPXQucGFyYW1zLmxvb3A/bmV3IFYuTGluZWFyU3BsaW5lKHQuc2xpZGVzR3JpZCxlLnNsaWRlc0dyaWQpOm5ldyBWLkxpbmVhclNwbGluZSh0LnNuYXBHcmlkLGUuc25hcEdyaWQpKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIGEsaSxzPXRoaXMscj1zLmNvbnRyb2xsZXIuY29udHJvbDtmdW5jdGlvbiBuKGUpe3ZhciB0PXMucnRsVHJhbnNsYXRlPy1zLnRyYW5zbGF0ZTpzLnRyYW5zbGF0ZTtcInNsaWRlXCI9PT1zLnBhcmFtcy5jb250cm9sbGVyLmJ5JiYocy5jb250cm9sbGVyLmdldEludGVycG9sYXRlRnVuY3Rpb24oZSksaT0tcy5jb250cm9sbGVyLnNwbGluZS5pbnRlcnBvbGF0ZSgtdCkpLGkmJlwiY29udGFpbmVyXCIhPT1zLnBhcmFtcy5jb250cm9sbGVyLmJ5fHwoYT0oZS5tYXhUcmFuc2xhdGUoKS1lLm1pblRyYW5zbGF0ZSgpKS8ocy5tYXhUcmFuc2xhdGUoKS1zLm1pblRyYW5zbGF0ZSgpKSxpPSh0LXMubWluVHJhbnNsYXRlKCkpKmErZS5taW5UcmFuc2xhdGUoKSkscy5wYXJhbXMuY29udHJvbGxlci5pbnZlcnNlJiYoaT1lLm1heFRyYW5zbGF0ZSgpLWkpLGUudXBkYXRlUHJvZ3Jlc3MoaSksZS5zZXRUcmFuc2xhdGUoaSxzKSxlLnVwZGF0ZUFjdGl2ZUluZGV4KCksZS51cGRhdGVTbGlkZXNDbGFzc2VzKCl9aWYoQXJyYXkuaXNBcnJheShyKSlmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rPTEpcltvXSE9PXQmJnJbb11pbnN0YW5jZW9mIFQmJm4ocltvXSk7ZWxzZSByIGluc3RhbmNlb2YgVCYmdCE9PXImJm4ocil9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24odCxlKXt2YXIgYSxpPXRoaXMscz1pLmNvbnRyb2xsZXIuY29udHJvbDtmdW5jdGlvbiByKGUpe2Uuc2V0VHJhbnNpdGlvbih0LGkpLDAhPT10JiYoZS50cmFuc2l0aW9uU3RhcnQoKSxlLnBhcmFtcy5hdXRvSGVpZ2h0JiZlZS5uZXh0VGljayhmdW5jdGlvbigpe2UudXBkYXRlQXV0b0hlaWdodCgpfSksZS4kd3JhcHBlckVsLnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXtzJiYoZS5wYXJhbXMubG9vcCYmXCJzbGlkZVwiPT09aS5wYXJhbXMuY29udHJvbGxlci5ieSYmZS5sb29wRml4KCksZS50cmFuc2l0aW9uRW5kKCkpfSkpfWlmKEFycmF5LmlzQXJyYXkocykpZm9yKGE9MDthPHMubGVuZ3RoO2ErPTEpc1thXSE9PWUmJnNbYV1pbnN0YW5jZW9mIFQmJnIoc1thXSk7ZWxzZSBzIGluc3RhbmNlb2YgVCYmZSE9PXMmJnIocyl9fSxGPXttYWtlRWxGb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXR0cihcInRhYkluZGV4XCIsXCIwXCIpLGV9LGFkZEVsUm9sZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmF0dHIoXCJyb2xlXCIsdCksZX0sYWRkRWxMYWJlbDpmdW5jdGlvbihlLHQpe3JldHVybiBlLmF0dHIoXCJhcmlhLWxhYmVsXCIsdCksZX0sZGlzYWJsZUVsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITApLGV9LGVuYWJsZUVsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITEpLGV9LG9uRW50ZXJLZXk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxhPXQucGFyYW1zLmExMXk7aWYoMTM9PT1lLmtleUNvZGUpe3ZhciBpPUwoZS50YXJnZXQpO3QubmF2aWdhdGlvbiYmdC5uYXZpZ2F0aW9uLiRuZXh0RWwmJmkuaXModC5uYXZpZ2F0aW9uLiRuZXh0RWwpJiYodC5pc0VuZCYmIXQucGFyYW1zLmxvb3B8fHQuc2xpZGVOZXh0KCksdC5pc0VuZD90LmExMXkubm90aWZ5KGEubGFzdFNsaWRlTWVzc2FnZSk6dC5hMTF5Lm5vdGlmeShhLm5leHRTbGlkZU1lc3NhZ2UpKSx0Lm5hdmlnYXRpb24mJnQubmF2aWdhdGlvbi4kcHJldkVsJiZpLmlzKHQubmF2aWdhdGlvbi4kcHJldkVsKSYmKHQuaXNCZWdpbm5pbmcmJiF0LnBhcmFtcy5sb29wfHx0LnNsaWRlUHJldigpLHQuaXNCZWdpbm5pbmc/dC5hMTF5Lm5vdGlmeShhLmZpcnN0U2xpZGVNZXNzYWdlKTp0LmExMXkubm90aWZ5KGEucHJldlNsaWRlTWVzc2FnZSkpLHQucGFnaW5hdGlvbiYmaS5pcyhcIi5cIit0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSYmaVswXS5jbGljaygpfX0sbm90aWZ5OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYTExeS5saXZlUmVnaW9uOzAhPT10Lmxlbmd0aCYmKHQuaHRtbChcIlwiKSx0Lmh0bWwoZSkpfSx1cGRhdGVOYXZpZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5wYXJhbXMubG9vcCl7dmFyIHQ9ZS5uYXZpZ2F0aW9uLGE9dC4kbmV4dEVsLGk9dC4kcHJldkVsO2kmJjA8aS5sZW5ndGgmJihlLmlzQmVnaW5uaW5nP2UuYTExeS5kaXNhYmxlRWwoaSk6ZS5hMTF5LmVuYWJsZUVsKGkpKSxhJiYwPGEubGVuZ3RoJiYoZS5pc0VuZD9lLmExMXkuZGlzYWJsZUVsKGEpOmUuYTExeS5lbmFibGVFbChhKSl9fSx1cGRhdGVQYWdpbmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcyxzPWkucGFyYW1zLmExMXk7aS5wYWdpbmF0aW9uJiZpLnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSYmaS5wYWdpbmF0aW9uLmJ1bGxldHMmJmkucGFnaW5hdGlvbi5idWxsZXRzLmxlbmd0aCYmaS5wYWdpbmF0aW9uLmJ1bGxldHMuZWFjaChmdW5jdGlvbihlLHQpe3ZhciBhPUwodCk7aS5hMTF5Lm1ha2VFbEZvY3VzYWJsZShhKSxpLmExMXkuYWRkRWxSb2xlKGEsXCJidXR0b25cIiksaS5hMTF5LmFkZEVsTGFiZWwoYSxzLnBhZ2luYXRpb25CdWxsZXRNZXNzYWdlLnJlcGxhY2UoL3t7aW5kZXh9fS8sYS5pbmRleCgpKzEpKX0pfSxpbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLiRlbC5hcHBlbmQoZS5hMTF5LmxpdmVSZWdpb24pO3ZhciB0LGEsaT1lLnBhcmFtcy5hMTF5O2UubmF2aWdhdGlvbiYmZS5uYXZpZ2F0aW9uLiRuZXh0RWwmJih0PWUubmF2aWdhdGlvbi4kbmV4dEVsKSxlLm5hdmlnYXRpb24mJmUubmF2aWdhdGlvbi4kcHJldkVsJiYoYT1lLm5hdmlnYXRpb24uJHByZXZFbCksdCYmKGUuYTExeS5tYWtlRWxGb2N1c2FibGUodCksZS5hMTF5LmFkZEVsUm9sZSh0LFwiYnV0dG9uXCIpLGUuYTExeS5hZGRFbExhYmVsKHQsaS5uZXh0U2xpZGVNZXNzYWdlKSx0Lm9uKFwia2V5ZG93blwiLGUuYTExeS5vbkVudGVyS2V5KSksYSYmKGUuYTExeS5tYWtlRWxGb2N1c2FibGUoYSksZS5hMTF5LmFkZEVsUm9sZShhLFwiYnV0dG9uXCIpLGUuYTExeS5hZGRFbExhYmVsKGEsaS5wcmV2U2xpZGVNZXNzYWdlKSxhLm9uKFwia2V5ZG93blwiLGUuYTExeS5vbkVudGVyS2V5KSksZS5wYWdpbmF0aW9uJiZlLnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSYmZS5wYWdpbmF0aW9uLmJ1bGxldHMmJmUucGFnaW5hdGlvbi5idWxsZXRzLmxlbmd0aCYmZS5wYWdpbmF0aW9uLiRlbC5vbihcImtleWRvd25cIixcIi5cIitlLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzLGUuYTExeS5vbkVudGVyS2V5KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlLHQsYT10aGlzO2EuYTExeS5saXZlUmVnaW9uJiYwPGEuYTExeS5saXZlUmVnaW9uLmxlbmd0aCYmYS5hMTF5LmxpdmVSZWdpb24ucmVtb3ZlKCksYS5uYXZpZ2F0aW9uJiZhLm5hdmlnYXRpb24uJG5leHRFbCYmKGU9YS5uYXZpZ2F0aW9uLiRuZXh0RWwpLGEubmF2aWdhdGlvbiYmYS5uYXZpZ2F0aW9uLiRwcmV2RWwmJih0PWEubmF2aWdhdGlvbi4kcHJldkVsKSxlJiZlLm9mZihcImtleWRvd25cIixhLmExMXkub25FbnRlcktleSksdCYmdC5vZmYoXCJrZXlkb3duXCIsYS5hMTF5Lm9uRW50ZXJLZXkpLGEucGFnaW5hdGlvbiYmYS5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUmJmEucGFnaW5hdGlvbi5idWxsZXRzJiZhLnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGgmJmEucGFnaW5hdGlvbi4kZWwub2ZmKFwia2V5ZG93blwiLFwiLlwiK2EucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MsYS5hMTF5Lm9uRW50ZXJLZXkpfX0sUj17aW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5wYXJhbXMuaGlzdG9yeSl7aWYoIUouaGlzdG9yeXx8IUouaGlzdG9yeS5wdXNoU3RhdGUpcmV0dXJuIGUucGFyYW1zLmhpc3RvcnkuZW5hYmxlZD0hMSx2b2lkKGUucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQ9ITApO3ZhciB0PWUuaGlzdG9yeTt0LmluaXRpYWxpemVkPSEwLHQucGF0aHM9Ui5nZXRQYXRoVmFsdWVzKCksKHQucGF0aHMua2V5fHx0LnBhdGhzLnZhbHVlKSYmKHQuc2Nyb2xsVG9TbGlkZSgwLHQucGF0aHMudmFsdWUsZS5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0KSxlLnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZXx8Si5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIixlLmhpc3Rvcnkuc2V0SGlzdG9yeVBvcFN0YXRlKSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGV8fEoucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5oaXN0b3J5LnNldEhpc3RvcnlQb3BTdGF0ZSl9LHNldEhpc3RvcnlQb3BTdGF0ZTpmdW5jdGlvbigpe3RoaXMuaGlzdG9yeS5wYXRocz1SLmdldFBhdGhWYWx1ZXMoKSx0aGlzLmhpc3Rvcnkuc2Nyb2xsVG9TbGlkZSh0aGlzLnBhcmFtcy5zcGVlZCx0aGlzLmhpc3RvcnkucGF0aHMudmFsdWUsITEpfSxnZXRQYXRoVmFsdWVzOmZ1bmN0aW9uKCl7dmFyIGU9Si5sb2NhdGlvbi5wYXRobmFtZS5zbGljZSgxKS5zcGxpdChcIi9cIikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPT1lfSksdD1lLmxlbmd0aDtyZXR1cm57a2V5OmVbdC0yXSx2YWx1ZTplW3QtMV19fSxzZXRIaXN0b3J5OmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5oaXN0b3J5LmluaXRpYWxpemVkJiZ0aGlzLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpe3ZhciBhPXRoaXMuc2xpZGVzLmVxKHQpLGk9Ui5zbHVnaWZ5KGEuYXR0cihcImRhdGEtaGlzdG9yeVwiKSk7Si5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcyhlKXx8KGk9ZStcIi9cIitpKTt2YXIgcz1KLmhpc3Rvcnkuc3RhdGU7cyYmcy52YWx1ZT09PWl8fCh0aGlzLnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZT9KLmhpc3RvcnkucmVwbGFjZVN0YXRlKHt2YWx1ZTppfSxudWxsLGkpOkouaGlzdG9yeS5wdXNoU3RhdGUoe3ZhbHVlOml9LG51bGwsaSkpfX0sc2x1Z2lmeTpmdW5jdGlvbihlKXtyZXR1cm4gZS50b1N0cmluZygpLnJlcGxhY2UoL1xccysvZyxcIi1cIikucmVwbGFjZSgvW15cXHctXSsvZyxcIlwiKS5yZXBsYWNlKC8tLSsvZyxcIi1cIikucmVwbGFjZSgvXi0rLyxcIlwiKS5yZXBsYWNlKC8tKyQvLFwiXCIpfSxzY3JvbGxUb1NsaWRlOmZ1bmN0aW9uKGUsdCxhKXt2YXIgaT10aGlzO2lmKHQpZm9yKHZhciBzPTAscj1pLnNsaWRlcy5sZW5ndGg7czxyO3MrPTEpe3ZhciBuPWkuc2xpZGVzLmVxKHMpO2lmKFIuc2x1Z2lmeShuLmF0dHIoXCJkYXRhLWhpc3RvcnlcIikpPT09dCYmIW4uaGFzQ2xhc3MoaS5wYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcykpe3ZhciBvPW4uaW5kZXgoKTtpLnNsaWRlVG8obyxlLGEpfX1lbHNlIGkuc2xpZGVUbygwLGUsYSl9fSxxPXtvbkhhc2hDYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1mLmxvY2F0aW9uLmhhc2gucmVwbGFjZShcIiNcIixcIlwiKTtpZih0IT09ZS5zbGlkZXMuZXEoZS5hY3RpdmVJbmRleCkuYXR0cihcImRhdGEtaGFzaFwiKSl7dmFyIGE9ZS4kd3JhcHBlckVsLmNoaWxkcmVuKFwiLlwiK2UucGFyYW1zLnNsaWRlQ2xhc3MrJ1tkYXRhLWhhc2g9XCInK3QrJ1wiXScpLmluZGV4KCk7aWYodm9pZCAwPT09YSlyZXR1cm47ZS5zbGlkZVRvKGEpfX0sc2V0SGFzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5oYXNoTmF2aWdhdGlvbi5pbml0aWFsaXplZCYmZS5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZClpZihlLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5yZXBsYWNlU3RhdGUmJkouaGlzdG9yeSYmSi5oaXN0b3J5LnJlcGxhY2VTdGF0ZSlKLmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsbnVsbCxcIiNcIitlLnNsaWRlcy5lcShlLmFjdGl2ZUluZGV4KS5hdHRyKFwiZGF0YS1oYXNoXCIpfHxcIlwiKTtlbHNle3ZhciB0PWUuc2xpZGVzLmVxKGUuYWN0aXZlSW5kZXgpLGE9dC5hdHRyKFwiZGF0YS1oYXNoXCIpfHx0LmF0dHIoXCJkYXRhLWhpc3RvcnlcIik7Zi5sb2NhdGlvbi5oYXNoPWF8fFwiXCJ9fSxpbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighKCFlLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkfHxlLnBhcmFtcy5oaXN0b3J5JiZlLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpKXtlLmhhc2hOYXZpZ2F0aW9uLmluaXRpYWxpemVkPSEwO3ZhciB0PWYubG9jYXRpb24uaGFzaC5yZXBsYWNlKFwiI1wiLFwiXCIpO2lmKHQpZm9yKHZhciBhPTAsaT1lLnNsaWRlcy5sZW5ndGg7YTxpO2ErPTEpe3ZhciBzPWUuc2xpZGVzLmVxKGEpO2lmKChzLmF0dHIoXCJkYXRhLWhhc2hcIil8fHMuYXR0cihcImRhdGEtaGlzdG9yeVwiKSk9PT10JiYhcy5oYXNDbGFzcyhlLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSl7dmFyIHI9cy5pbmRleCgpO2Uuc2xpZGVUbyhyLDAsZS5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCEwKX19ZS5wYXJhbXMuaGFzaE5hdmlnYXRpb24ud2F0Y2hTdGF0ZSYmTChKKS5vbihcImhhc2hjaGFuZ2VcIixlLmhhc2hOYXZpZ2F0aW9uLm9uSGFzaENhbmdlKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi53YXRjaFN0YXRlJiZMKEopLm9mZihcImhhc2hjaGFuZ2VcIix0aGlzLmhhc2hOYXZpZ2F0aW9uLm9uSGFzaENhbmdlKX19LFc9e3J1bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnNsaWRlcy5lcShlLmFjdGl2ZUluZGV4KSxhPWUucGFyYW1zLmF1dG9wbGF5LmRlbGF5O3QuYXR0cihcImRhdGEtc3dpcGVyLWF1dG9wbGF5XCIpJiYoYT10LmF0dHIoXCJkYXRhLXN3aXBlci1hdXRvcGxheVwiKXx8ZS5wYXJhbXMuYXV0b3BsYXkuZGVsYXkpLGUuYXV0b3BsYXkudGltZW91dD1lZS5uZXh0VGljayhmdW5jdGlvbigpe2UucGFyYW1zLmF1dG9wbGF5LnJldmVyc2VEaXJlY3Rpb24/ZS5wYXJhbXMubG9vcD8oZS5sb29wRml4KCksZS5zbGlkZVByZXYoZS5wYXJhbXMuc3BlZWQsITAsITApLGUuZW1pdChcImF1dG9wbGF5XCIpKTplLmlzQmVnaW5uaW5nP2UucGFyYW1zLmF1dG9wbGF5LnN0b3BPbkxhc3RTbGlkZT9lLmF1dG9wbGF5LnN0b3AoKTooZS5zbGlkZVRvKGUuc2xpZGVzLmxlbmd0aC0xLGUucGFyYW1zLnNwZWVkLCEwLCEwKSxlLmVtaXQoXCJhdXRvcGxheVwiKSk6KGUuc2xpZGVQcmV2KGUucGFyYW1zLnNwZWVkLCEwLCEwKSxlLmVtaXQoXCJhdXRvcGxheVwiKSk6ZS5wYXJhbXMubG9vcD8oZS5sb29wRml4KCksZS5zbGlkZU5leHQoZS5wYXJhbXMuc3BlZWQsITAsITApLGUuZW1pdChcImF1dG9wbGF5XCIpKTplLmlzRW5kP2UucGFyYW1zLmF1dG9wbGF5LnN0b3BPbkxhc3RTbGlkZT9lLmF1dG9wbGF5LnN0b3AoKTooZS5zbGlkZVRvKDAsZS5wYXJhbXMuc3BlZWQsITAsITApLGUuZW1pdChcImF1dG9wbGF5XCIpKTooZS5zbGlkZU5leHQoZS5wYXJhbXMuc3BlZWQsITAsITApLGUuZW1pdChcImF1dG9wbGF5XCIpKX0sYSl9LHN0YXJ0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdm9pZCAwPT09ZS5hdXRvcGxheS50aW1lb3V0JiYoIWUuYXV0b3BsYXkucnVubmluZyYmKGUuYXV0b3BsYXkucnVubmluZz0hMCxlLmVtaXQoXCJhdXRvcGxheVN0YXJ0XCIpLGUuYXV0b3BsYXkucnVuKCksITApKX0sc3RvcDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuISFlLmF1dG9wbGF5LnJ1bm5pbmcmJih2b2lkIDAhPT1lLmF1dG9wbGF5LnRpbWVvdXQmJihlLmF1dG9wbGF5LnRpbWVvdXQmJihjbGVhclRpbWVvdXQoZS5hdXRvcGxheS50aW1lb3V0KSxlLmF1dG9wbGF5LnRpbWVvdXQ9dm9pZCAwKSxlLmF1dG9wbGF5LnJ1bm5pbmc9ITEsZS5lbWl0KFwiYXV0b3BsYXlTdG9wXCIpLCEwKSl9LHBhdXNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5hdXRvcGxheS5ydW5uaW5nJiYodC5hdXRvcGxheS5wYXVzZWR8fCh0LmF1dG9wbGF5LnRpbWVvdXQmJmNsZWFyVGltZW91dCh0LmF1dG9wbGF5LnRpbWVvdXQpLHQuYXV0b3BsYXkucGF1c2VkPSEwLDAhPT1lJiZ0LnBhcmFtcy5hdXRvcGxheS53YWl0Rm9yVHJhbnNpdGlvbj8odC4kd3JhcHBlckVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsdC5hdXRvcGxheS5vblRyYW5zaXRpb25FbmQpLHQuJHdyYXBwZXJFbFswXS5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0VHJhbnNpdGlvbkVuZFwiLHQuYXV0b3BsYXkub25UcmFuc2l0aW9uRW5kKSk6KHQuYXV0b3BsYXkucGF1c2VkPSExLHQuYXV0b3BsYXkucnVuKCkpKSl9fSxqPXtzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcyx0PWUuc2xpZGVzLGE9MDthPHQubGVuZ3RoO2ErPTEpe3ZhciBpPWUuc2xpZGVzLmVxKGEpLHM9LWlbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7ZS5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZXx8KHMtPWUudHJhbnNsYXRlKTt2YXIgcj0wO2UuaXNIb3Jpem9udGFsKCl8fChyPXMscz0wKTt2YXIgbj1lLnBhcmFtcy5mYWRlRWZmZWN0LmNyb3NzRmFkZT9NYXRoLm1heCgxLU1hdGguYWJzKGlbMF0ucHJvZ3Jlc3MpLDApOjErTWF0aC5taW4oTWF0aC5tYXgoaVswXS5wcm9ncmVzcywtMSksMCk7aS5jc3Moe29wYWNpdHk6bn0pLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK3MrXCJweCwgXCIrcitcInB4LCAwcHgpXCIpfX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt2YXIgYT10aGlzLHQ9YS5zbGlkZXMsaT1hLiR3cmFwcGVyRWw7aWYodC50cmFuc2l0aW9uKGUpLGEucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUmJjAhPT1lKXt2YXIgcz0hMTt0LnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXtpZighcyYmYSYmIWEuZGVzdHJveWVkKXtzPSEwLGEuYW5pbWF0aW5nPSExO2Zvcih2YXIgZT1bXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCJdLHQ9MDt0PGUubGVuZ3RoO3QrPTEpaS50cmlnZ2VyKGVbdF0pfX0pfX19LFU9e3NldFRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxhPXQuJGVsLGk9dC4kd3JhcHBlckVsLHM9dC5zbGlkZXMscj10LndpZHRoLG49dC5oZWlnaHQsbz10LnJ0bFRyYW5zbGF0ZSxsPXQuc2l6ZSxkPXQucGFyYW1zLmN1YmVFZmZlY3QscD10LmlzSG9yaXpvbnRhbCgpLGM9dC52aXJ0dWFsJiZ0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQsdT0wO2Quc2hhZG93JiYocD8oMD09PShlPWkuZmluZChcIi5zd2lwZXItY3ViZS1zaGFkb3dcIikpLmxlbmd0aCYmKGU9TCgnPGRpdiBjbGFzcz1cInN3aXBlci1jdWJlLXNoYWRvd1wiPjwvZGl2PicpLGkuYXBwZW5kKGUpKSxlLmNzcyh7aGVpZ2h0OnIrXCJweFwifSkpOjA9PT0oZT1hLmZpbmQoXCIuc3dpcGVyLWN1YmUtc2hhZG93XCIpKS5sZW5ndGgmJihlPUwoJzxkaXYgY2xhc3M9XCJzd2lwZXItY3ViZS1zaGFkb3dcIj48L2Rpdj4nKSxhLmFwcGVuZChlKSkpO2Zvcih2YXIgaD0wO2g8cy5sZW5ndGg7aCs9MSl7dmFyIHY9cy5lcShoKSxmPWg7YyYmKGY9cGFyc2VJbnQodi5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksMTApKTt2YXIgbT05MCpmLGc9TWF0aC5mbG9vcihtLzM2MCk7byYmKG09LW0sZz1NYXRoLmZsb29yKC1tLzM2MCkpO3ZhciBiPU1hdGgubWF4KE1hdGgubWluKHZbMF0ucHJvZ3Jlc3MsMSksLTEpLHc9MCx5PTAseD0wO2YlND09MD8odz00Ki1nKmwseD0wKTooZi0xKSU0PT0wPyh3PTAseD00Ki1nKmwpOihmLTIpJTQ9PTA/KHc9bCs0KmcqbCx4PWwpOihmLTMpJTQ9PTAmJih3PS1sLHg9MypsKzQqbCpnKSxvJiYodz0tdykscHx8KHk9dyx3PTApO3ZhciBUPVwicm90YXRlWChcIisocD8wOi1tKStcImRlZykgcm90YXRlWShcIisocD9tOjApK1wiZGVnKSB0cmFuc2xhdGUzZChcIit3K1wicHgsIFwiK3krXCJweCwgXCIreCtcInB4KVwiO2lmKGI8PTEmJi0xPGImJih1PTkwKmYrOTAqYixvJiYodT05MCotZi05MCpiKSksdi50cmFuc2Zvcm0oVCksZC5zbGlkZVNoYWRvd3Mpe3ZhciBFPXA/di5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKTp2LmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3BcIiksUz1wP3YuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0XCIpOnYuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbVwiKTswPT09RS5sZW5ndGgmJihFPUwoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKHA/XCJsZWZ0XCI6XCJ0b3BcIikrJ1wiPjwvZGl2PicpLHYuYXBwZW5kKEUpKSwwPT09Uy5sZW5ndGgmJihTPUwoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKHA/XCJyaWdodFwiOlwiYm90dG9tXCIpKydcIj48L2Rpdj4nKSx2LmFwcGVuZChTKSksRS5sZW5ndGgmJihFWzBdLnN0eWxlLm9wYWNpdHk9TWF0aC5tYXgoLWIsMCkpLFMubGVuZ3RoJiYoU1swXS5zdHlsZS5vcGFjaXR5PU1hdGgubWF4KGIsMCkpfX1pZihpLmNzcyh7XCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW5cIjpcIjUwJSA1MCUgLVwiK2wvMitcInB4XCIsXCItbW96LXRyYW5zZm9ybS1vcmlnaW5cIjpcIjUwJSA1MCUgLVwiK2wvMitcInB4XCIsXCItbXMtdHJhbnNmb3JtLW9yaWdpblwiOlwiNTAlIDUwJSAtXCIrbC8yK1wicHhcIixcInRyYW5zZm9ybS1vcmlnaW5cIjpcIjUwJSA1MCUgLVwiK2wvMitcInB4XCJ9KSxkLnNoYWRvdylpZihwKWUudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMHB4LCBcIisoci8yK2Quc2hhZG93T2Zmc2V0KStcInB4LCBcIistci8yK1wicHgpIHJvdGF0ZVgoOTBkZWcpIHJvdGF0ZVooMGRlZykgc2NhbGUoXCIrZC5zaGFkb3dTY2FsZStcIilcIik7ZWxzZXt2YXIgQz1NYXRoLmFicyh1KS05MCpNYXRoLmZsb29yKE1hdGguYWJzKHUpLzkwKSxNPTEuNS0oTWF0aC5zaW4oMipDKk1hdGguUEkvMzYwKS8yK01hdGguY29zKDIqQypNYXRoLlBJLzM2MCkvMiksej1kLnNoYWRvd1NjYWxlLFA9ZC5zaGFkb3dTY2FsZS9NLGs9ZC5zaGFkb3dPZmZzZXQ7ZS50cmFuc2Zvcm0oXCJzY2FsZTNkKFwiK3orXCIsIDEsIFwiK1ArXCIpIHRyYW5zbGF0ZTNkKDBweCwgXCIrKG4vMitrKStcInB4LCBcIistbi8yL1ArXCJweCkgcm90YXRlWCgtOTBkZWcpXCIpfXZhciAkPUkuaXNTYWZhcml8fEkuaXNVaVdlYlZpZXc/LWwvMjowO2kudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMHB4LDAsXCIrJCtcInB4KSByb3RhdGVYKFwiKyh0LmlzSG9yaXpvbnRhbCgpPzA6dSkrXCJkZWcpIHJvdGF0ZVkoXCIrKHQuaXNIb3Jpem9udGFsKCk/LXU6MCkrXCJkZWcpXCIpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJGVsO3RoaXMuc2xpZGVzLnRyYW5zaXRpb24oZSkuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKS50cmFuc2l0aW9uKGUpLHRoaXMucGFyYW1zLmN1YmVFZmZlY3Quc2hhZG93JiYhdGhpcy5pc0hvcml6b250YWwoKSYmdC5maW5kKFwiLnN3aXBlci1jdWJlLXNoYWRvd1wiKS50cmFuc2l0aW9uKGUpfX0sSz17c2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1lLnNsaWRlcyxhPWUucnRsVHJhbnNsYXRlLGk9MDtpPHQubGVuZ3RoO2krPTEpe3ZhciBzPXQuZXEoaSkscj1zWzBdLnByb2dyZXNzO2UucGFyYW1zLmZsaXBFZmZlY3QubGltaXRSb3RhdGlvbiYmKHI9TWF0aC5tYXgoTWF0aC5taW4oc1swXS5wcm9ncmVzcywxKSwtMSkpO3ZhciBuPS0xODAqcixvPTAsbD0tc1swXS5zd2lwZXJTbGlkZU9mZnNldCxkPTA7aWYoZS5pc0hvcml6b250YWwoKT9hJiYobj0tbik6KGQ9bCxvPS1uLG49bD0wKSxzWzBdLnN0eWxlLnpJbmRleD0tTWF0aC5hYnMoTWF0aC5yb3VuZChyKSkrdC5sZW5ndGgsZS5wYXJhbXMuZmxpcEVmZmVjdC5zbGlkZVNoYWRvd3Mpe3ZhciBwPWUuaXNIb3Jpem9udGFsKCk/cy5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKTpzLmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3BcIiksYz1lLmlzSG9yaXpvbnRhbCgpP3MuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0XCIpOnMuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbVwiKTswPT09cC5sZW5ndGgmJihwPUwoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKGUuaXNIb3Jpem9udGFsKCk/XCJsZWZ0XCI6XCJ0b3BcIikrJ1wiPjwvZGl2PicpLHMuYXBwZW5kKHApKSwwPT09Yy5sZW5ndGgmJihjPUwoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKGUuaXNIb3Jpem9udGFsKCk/XCJyaWdodFwiOlwiYm90dG9tXCIpKydcIj48L2Rpdj4nKSxzLmFwcGVuZChjKSkscC5sZW5ndGgmJihwWzBdLnN0eWxlLm9wYWNpdHk9TWF0aC5tYXgoLXIsMCkpLGMubGVuZ3RoJiYoY1swXS5zdHlsZS5vcGFjaXR5PU1hdGgubWF4KHIsMCkpfXMudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoXCIrbCtcInB4LCBcIitkK1wicHgsIDBweCkgcm90YXRlWChcIitvK1wiZGVnKSByb3RhdGVZKFwiK24rXCJkZWcpXCIpfX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt2YXIgYT10aGlzLHQ9YS5zbGlkZXMsaT1hLmFjdGl2ZUluZGV4LHM9YS4kd3JhcHBlckVsO2lmKHQudHJhbnNpdGlvbihlKS5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpLnRyYW5zaXRpb24oZSksYS5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSYmMCE9PWUpe3ZhciByPSExO3QuZXEoaSkudHJhbnNpdGlvbkVuZChmdW5jdGlvbigpe2lmKCFyJiZhJiYhYS5kZXN0cm95ZWQpe3I9ITAsYS5hbmltYXRpbmc9ITE7Zm9yKHZhciBlPVtcIndlYmtpdFRyYW5zaXRpb25FbmRcIixcInRyYW5zaXRpb25lbmRcIl0sdD0wO3Q8ZS5sZW5ndGg7dCs9MSlzLnRyaWdnZXIoZVt0XSl9fSl9fX0sXz17c2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1lLndpZHRoLGE9ZS5oZWlnaHQsaT1lLnNsaWRlcyxzPWUuJHdyYXBwZXJFbCxyPWUuc2xpZGVzU2l6ZXNHcmlkLG49ZS5wYXJhbXMuY292ZXJmbG93RWZmZWN0LG89ZS5pc0hvcml6b250YWwoKSxsPWUudHJhbnNsYXRlLGQ9bz90LzItbDphLzItbCxwPW8/bi5yb3RhdGU6LW4ucm90YXRlLGM9bi5kZXB0aCx1PTAsaD1pLmxlbmd0aDt1PGg7dSs9MSl7dmFyIHY9aS5lcSh1KSxmPXJbdV0sbT0oZC12WzBdLnN3aXBlclNsaWRlT2Zmc2V0LWYvMikvZipuLm1vZGlmaWVyLGc9bz9wKm06MCxiPW8/MDpwKm0sdz0tYypNYXRoLmFicyhtKSx5PW8/MDpuLnN0cmV0Y2gqbSx4PW8/bi5zdHJldGNoKm06MDtNYXRoLmFicyh4KTwuMDAxJiYoeD0wKSxNYXRoLmFicyh5KTwuMDAxJiYoeT0wKSxNYXRoLmFicyh3KTwuMDAxJiYodz0wKSxNYXRoLmFicyhnKTwuMDAxJiYoZz0wKSxNYXRoLmFicyhiKTwuMDAxJiYoYj0wKTt2YXIgVD1cInRyYW5zbGF0ZTNkKFwiK3grXCJweCxcIit5K1wicHgsXCIrdytcInB4KSAgcm90YXRlWChcIitiK1wiZGVnKSByb3RhdGVZKFwiK2crXCJkZWcpXCI7aWYodi50cmFuc2Zvcm0oVCksdlswXS5zdHlsZS56SW5kZXg9MS1NYXRoLmFicyhNYXRoLnJvdW5kKG0pKSxuLnNsaWRlU2hhZG93cyl7dmFyIEU9bz92LmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpOnYuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcFwiKSxTPW8/di5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHRcIik6di5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tXCIpOzA9PT1FLmxlbmd0aCYmKEU9TCgnPGRpdiBjbGFzcz1cInN3aXBlci1zbGlkZS1zaGFkb3ctJysobz9cImxlZnRcIjpcInRvcFwiKSsnXCI+PC9kaXY+Jyksdi5hcHBlbmQoRSkpLDA9PT1TLmxlbmd0aCYmKFM9TCgnPGRpdiBjbGFzcz1cInN3aXBlci1zbGlkZS1zaGFkb3ctJysobz9cInJpZ2h0XCI6XCJib3R0b21cIikrJ1wiPjwvZGl2PicpLHYuYXBwZW5kKFMpKSxFLmxlbmd0aCYmKEVbMF0uc3R5bGUub3BhY2l0eT0wPG0/bTowKSxTLmxlbmd0aCYmKFNbMF0uc3R5bGUub3BhY2l0eT0wPC1tPy1tOjApfX0odGUucG9pbnRlckV2ZW50c3x8dGUucHJlZml4ZWRQb2ludGVyRXZlbnRzKSYmKHNbMF0uc3R5bGUucGVyc3BlY3RpdmVPcmlnaW49ZCtcInB4IDUwJVwiKX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnNsaWRlcy50cmFuc2l0aW9uKGUpLmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikudHJhbnNpdGlvbihlKX19LFo9e2luaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYXJhbXMudGh1bWJzLGE9ZS5jb25zdHJ1Y3Rvcjt0LnN3aXBlciBpbnN0YW5jZW9mIGE/KGUudGh1bWJzLnN3aXBlcj10LnN3aXBlcixlZS5leHRlbmQoZS50aHVtYnMuc3dpcGVyLm9yaWdpbmFsUGFyYW1zLHt3YXRjaFNsaWRlc1Byb2dyZXNzOiEwLHNsaWRlVG9DbGlja2VkU2xpZGU6ITF9KSxlZS5leHRlbmQoZS50aHVtYnMuc3dpcGVyLnBhcmFtcyx7d2F0Y2hTbGlkZXNQcm9ncmVzczohMCxzbGlkZVRvQ2xpY2tlZFNsaWRlOiExfSkpOmVlLmlzT2JqZWN0KHQuc3dpcGVyKSYmKGUudGh1bWJzLnN3aXBlcj1uZXcgYShlZS5leHRlbmQoe30sdC5zd2lwZXIse3dhdGNoU2xpZGVzVmlzaWJpbGl0eTohMCx3YXRjaFNsaWRlc1Byb2dyZXNzOiEwLHNsaWRlVG9DbGlja2VkU2xpZGU6ITF9KSksZS50aHVtYnMuc3dpcGVyQ3JlYXRlZD0hMCksZS50aHVtYnMuc3dpcGVyLiRlbC5hZGRDbGFzcyhlLnBhcmFtcy50aHVtYnMudGh1bWJzQ29udGFpbmVyQ2xhc3MpLGUudGh1bWJzLnN3aXBlci5vbihcInRhcFwiLGUudGh1bWJzLm9uVGh1bWJDbGljayl9LG9uVGh1bWJDbGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnRodW1icy5zd2lwZXI7aWYodCl7dmFyIGE9dC5jbGlja2VkSW5kZXgsaT10LmNsaWNrZWRTbGlkZTtpZighKGkmJkwoaSkuaGFzQ2xhc3MoZS5wYXJhbXMudGh1bWJzLnNsaWRlVGh1bWJBY3RpdmVDbGFzcyl8fG51bGw9PWEpKXt2YXIgcztpZihzPXQucGFyYW1zLmxvb3A/cGFyc2VJbnQoTCh0LmNsaWNrZWRTbGlkZSkuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpLDEwKTphLGUucGFyYW1zLmxvb3Ape3ZhciByPWUuYWN0aXZlSW5kZXg7ZS5zbGlkZXMuZXEocikuaGFzQ2xhc3MoZS5wYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcykmJihlLmxvb3BGaXgoKSxlLl9jbGllbnRMZWZ0PWUuJHdyYXBwZXJFbFswXS5jbGllbnRMZWZ0LHI9ZS5hY3RpdmVJbmRleCk7dmFyIG49ZS5zbGlkZXMuZXEocikucHJldkFsbCgnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytzKydcIl0nKS5lcSgwKS5pbmRleCgpLG89ZS5zbGlkZXMuZXEocikubmV4dEFsbCgnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytzKydcIl0nKS5lcSgwKS5pbmRleCgpO3M9dm9pZCAwPT09bj9vOnZvaWQgMD09PW8/bjpvLXI8ci1uP286bn1lLnNsaWRlVG8ocyl9fX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsYT10LnRodW1icy5zd2lwZXI7aWYoYSl7dmFyIGk9XCJhdXRvXCI9PT1hLnBhcmFtcy5zbGlkZXNQZXJWaWV3P2Euc2xpZGVzUGVyVmlld0R5bmFtaWMoKTphLnBhcmFtcy5zbGlkZXNQZXJWaWV3O2lmKHQucmVhbEluZGV4IT09YS5yZWFsSW5kZXgpe3ZhciBzLHI9YS5hY3RpdmVJbmRleDtpZihhLnBhcmFtcy5sb29wKXthLnNsaWRlcy5lcShyKS5oYXNDbGFzcyhhLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSYmKGEubG9vcEZpeCgpLGEuX2NsaWVudExlZnQ9YS4kd3JhcHBlckVsWzBdLmNsaWVudExlZnQscj1hLmFjdGl2ZUluZGV4KTt2YXIgbj1hLnNsaWRlcy5lcShyKS5wcmV2QWxsKCdbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK3QucmVhbEluZGV4KydcIl0nKS5lcSgwKS5pbmRleCgpLG89YS5zbGlkZXMuZXEocikubmV4dEFsbCgnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJyt0LnJlYWxJbmRleCsnXCJdJykuZXEoMCkuaW5kZXgoKTtzPXZvaWQgMD09PW4/bzp2b2lkIDA9PT1vP246by1yPT1yLW4/cjpvLXI8ci1uP286bn1lbHNlIHM9dC5yZWFsSW5kZXg7YS52aXNpYmxlU2xpZGVzSW5kZXhlcy5pbmRleE9mKHMpPDAmJihhLnBhcmFtcy5jZW50ZXJlZFNsaWRlcz9zPXI8cz9zLU1hdGguZmxvb3IoaS8yKSsxOnMrTWF0aC5mbG9vcihpLzIpLTE6cjxzJiYocz1zLWkrMSksYS5zbGlkZVRvKHMsZT8wOnZvaWQgMCkpfXZhciBsPTEsZD10LnBhcmFtcy50aHVtYnMuc2xpZGVUaHVtYkFjdGl2ZUNsYXNzO2lmKDE8dC5wYXJhbXMuc2xpZGVzUGVyVmlldyYmIXQucGFyYW1zLmNlbnRlcmVkU2xpZGVzJiYobD10LnBhcmFtcy5zbGlkZXNQZXJWaWV3KSxhLnNsaWRlcy5yZW1vdmVDbGFzcyhkKSxhLnBhcmFtcy5sb29wKWZvcih2YXIgcD0wO3A8bDtwKz0xKWEuJHdyYXBwZXJFbC5jaGlsZHJlbignW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJysodC5yZWFsSW5kZXgrcCkrJ1wiXScpLmFkZENsYXNzKGQpO2Vsc2UgZm9yKHZhciBjPTA7YzxsO2MrPTEpYS5zbGlkZXMuZXEodC5yZWFsSW5kZXgrYykuYWRkQ2xhc3MoZCl9fX0sUT1bRSxTLEMsTSxQLCQsTyx7bmFtZTpcIm1vdXNld2hlZWxcIixwYXJhbXM6e21vdXNld2hlZWw6e2VuYWJsZWQ6ITEscmVsZWFzZU9uRWRnZXM6ITEsaW52ZXJ0OiExLGZvcmNlVG9BeGlzOiExLHNlbnNpdGl2aXR5OjEsZXZlbnRzVGFyZ2VkOlwiY29udGFpbmVyXCJ9fSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2VlLmV4dGVuZChlLHttb3VzZXdoZWVsOntlbmFibGVkOiExLGVuYWJsZTpBLmVuYWJsZS5iaW5kKGUpLGRpc2FibGU6QS5kaXNhYmxlLmJpbmQoZSksaGFuZGxlOkEuaGFuZGxlLmJpbmQoZSksaGFuZGxlTW91c2VFbnRlcjpBLmhhbmRsZU1vdXNlRW50ZXIuYmluZChlKSxoYW5kbGVNb3VzZUxlYXZlOkEuaGFuZGxlTW91c2VMZWF2ZS5iaW5kKGUpLGxhc3RTY3JvbGxUaW1lOmVlLm5vdygpfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLm1vdXNld2hlZWwuZW5hYmxlZCYmdGhpcy5tb3VzZXdoZWVsLmVuYWJsZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tb3VzZXdoZWVsLmVuYWJsZWQmJnRoaXMubW91c2V3aGVlbC5kaXNhYmxlKCl9fX0se25hbWU6XCJuYXZpZ2F0aW9uXCIscGFyYW1zOntuYXZpZ2F0aW9uOntuZXh0RWw6bnVsbCxwcmV2RWw6bnVsbCxoaWRlT25DbGljazohMSxkaXNhYmxlZENsYXNzOlwic3dpcGVyLWJ1dHRvbi1kaXNhYmxlZFwiLGhpZGRlbkNsYXNzOlwic3dpcGVyLWJ1dHRvbi1oaWRkZW5cIixsb2NrQ2xhc3M6XCJzd2lwZXItYnV0dG9uLWxvY2tcIn19LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZWUuZXh0ZW5kKGUse25hdmlnYXRpb246e2luaXQ6SC5pbml0LmJpbmQoZSksdXBkYXRlOkgudXBkYXRlLmJpbmQoZSksZGVzdHJveTpILmRlc3Ryb3kuYmluZChlKSxvbk5leHRDbGljazpILm9uTmV4dENsaWNrLmJpbmQoZSksb25QcmV2Q2xpY2s6SC5vblByZXZDbGljay5iaW5kKGUpfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMubmF2aWdhdGlvbi5pbml0KCksdGhpcy5uYXZpZ2F0aW9uLnVwZGF0ZSgpfSx0b0VkZ2U6ZnVuY3Rpb24oKXt0aGlzLm5hdmlnYXRpb24udXBkYXRlKCl9LGZyb21FZGdlOmZ1bmN0aW9uKCl7dGhpcy5uYXZpZ2F0aW9uLnVwZGF0ZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5uYXZpZ2F0aW9uLmRlc3Ryb3koKX0sY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQsYT10aGlzLGk9YS5uYXZpZ2F0aW9uLHM9aS4kbmV4dEVsLHI9aS4kcHJldkVsOyFhLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGVPbkNsaWNrfHxMKGUudGFyZ2V0KS5pcyhyKXx8TChlLnRhcmdldCkuaXMocyl8fChzP3Q9cy5oYXNDbGFzcyhhLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGRlbkNsYXNzKTpyJiYodD1yLmhhc0NsYXNzKGEucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpKSwhMD09PXQ/YS5lbWl0KFwibmF2aWdhdGlvblNob3dcIixhKTphLmVtaXQoXCJuYXZpZ2F0aW9uSGlkZVwiLGEpLHMmJnMudG9nZ2xlQ2xhc3MoYS5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcyksciYmci50b2dnbGVDbGFzcyhhLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGRlbkNsYXNzKSl9fX0se25hbWU6XCJwYWdpbmF0aW9uXCIscGFyYW1zOntwYWdpbmF0aW9uOntlbDpudWxsLGJ1bGxldEVsZW1lbnQ6XCJzcGFuXCIsY2xpY2thYmxlOiExLGhpZGVPbkNsaWNrOiExLHJlbmRlckJ1bGxldDpudWxsLHJlbmRlclByb2dyZXNzYmFyOm51bGwscmVuZGVyRnJhY3Rpb246bnVsbCxyZW5kZXJDdXN0b206bnVsbCxwcm9ncmVzc2Jhck9wcG9zaXRlOiExLHR5cGU6XCJidWxsZXRzXCIsZHluYW1pY0J1bGxldHM6ITEsZHluYW1pY01haW5CdWxsZXRzOjEsZm9ybWF0RnJhY3Rpb25DdXJyZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlfSxmb3JtYXRGcmFjdGlvblRvdGFsOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxidWxsZXRDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldFwiLGJ1bGxldEFjdGl2ZUNsYXNzOlwic3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZVwiLG1vZGlmaWVyQ2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1cIixjdXJyZW50Q2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1jdXJyZW50XCIsdG90YWxDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLXRvdGFsXCIsaGlkZGVuQ2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1oaWRkZW5cIixwcm9ncmVzc2JhckZpbGxDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLWZpbGxcIixwcm9ncmVzc2Jhck9wcG9zaXRlQ2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci1vcHBvc2l0ZVwiLGNsaWNrYWJsZUNsYXNzOlwic3dpcGVyLXBhZ2luYXRpb24tY2xpY2thYmxlXCIsbG9ja0NsYXNzOlwic3dpcGVyLXBhZ2luYXRpb24tbG9ja1wifX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlZS5leHRlbmQoZSx7cGFnaW5hdGlvbjp7aW5pdDpOLmluaXQuYmluZChlKSxyZW5kZXI6Ti5yZW5kZXIuYmluZChlKSx1cGRhdGU6Ti51cGRhdGUuYmluZChlKSxkZXN0cm95Ok4uZGVzdHJveS5iaW5kKGUpLGR5bmFtaWNCdWxsZXRJbmRleDowfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMucGFnaW5hdGlvbi5pbml0KCksdGhpcy5wYWdpbmF0aW9uLnJlbmRlcigpLHRoaXMucGFnaW5hdGlvbi51cGRhdGUoKX0sYWN0aXZlSW5kZXhDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sb29wP3RoaXMucGFnaW5hdGlvbi51cGRhdGUoKTp2b2lkIDA9PT10aGlzLnNuYXBJbmRleCYmdGhpcy5wYWdpbmF0aW9uLnVwZGF0ZSgpfSxzbmFwSW5kZXhDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sb29wfHx0aGlzLnBhZ2luYXRpb24udXBkYXRlKCl9LHNsaWRlc0xlbmd0aENoYW5nZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxvb3AmJih0aGlzLnBhZ2luYXRpb24ucmVuZGVyKCksdGhpcy5wYWdpbmF0aW9uLnVwZGF0ZSgpKX0sc25hcEdyaWRMZW5ndGhDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sb29wfHwodGhpcy5wYWdpbmF0aW9uLnJlbmRlcigpLHRoaXMucGFnaW5hdGlvbi51cGRhdGUoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhZ2luYXRpb24uZGVzdHJveSgpfSxjbGljazpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QucGFyYW1zLnBhZ2luYXRpb24uZWwmJnQucGFyYW1zLnBhZ2luYXRpb24uaGlkZU9uQ2xpY2smJjA8dC5wYWdpbmF0aW9uLiRlbC5sZW5ndGgmJiFMKGUudGFyZ2V0KS5oYXNDbGFzcyh0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSYmKCEwPT09dC5wYWdpbmF0aW9uLiRlbC5oYXNDbGFzcyh0LnBhcmFtcy5wYWdpbmF0aW9uLmhpZGRlbkNsYXNzKT90LmVtaXQoXCJwYWdpbmF0aW9uU2hvd1wiLHQpOnQuZW1pdChcInBhZ2luYXRpb25IaWRlXCIsdCksdC5wYWdpbmF0aW9uLiRlbC50b2dnbGVDbGFzcyh0LnBhcmFtcy5wYWdpbmF0aW9uLmhpZGRlbkNsYXNzKSl9fX0se25hbWU6XCJzY3JvbGxiYXJcIixwYXJhbXM6e3Njcm9sbGJhcjp7ZWw6bnVsbCxkcmFnU2l6ZTpcImF1dG9cIixoaWRlOiExLGRyYWdnYWJsZTohMSxzbmFwT25SZWxlYXNlOiEwLGxvY2tDbGFzczpcInN3aXBlci1zY3JvbGxiYXItbG9ja1wiLGRyYWdDbGFzczpcInN3aXBlci1zY3JvbGxiYXItZHJhZ1wifX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlZS5leHRlbmQoZSx7c2Nyb2xsYmFyOntpbml0OkcuaW5pdC5iaW5kKGUpLGRlc3Ryb3k6Ry5kZXN0cm95LmJpbmQoZSksdXBkYXRlU2l6ZTpHLnVwZGF0ZVNpemUuYmluZChlKSxzZXRUcmFuc2xhdGU6Ry5zZXRUcmFuc2xhdGUuYmluZChlKSxzZXRUcmFuc2l0aW9uOkcuc2V0VHJhbnNpdGlvbi5iaW5kKGUpLGVuYWJsZURyYWdnYWJsZTpHLmVuYWJsZURyYWdnYWJsZS5iaW5kKGUpLGRpc2FibGVEcmFnZ2FibGU6Ry5kaXNhYmxlRHJhZ2dhYmxlLmJpbmQoZSksc2V0RHJhZ1Bvc2l0aW9uOkcuc2V0RHJhZ1Bvc2l0aW9uLmJpbmQoZSksb25EcmFnU3RhcnQ6Ry5vbkRyYWdTdGFydC5iaW5kKGUpLG9uRHJhZ01vdmU6Ry5vbkRyYWdNb3ZlLmJpbmQoZSksb25EcmFnRW5kOkcub25EcmFnRW5kLmJpbmQoZSksaXNUb3VjaGVkOiExLHRpbWVvdXQ6bnVsbCxkcmFnVGltZW91dDpudWxsfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLmluaXQoKSx0aGlzLnNjcm9sbGJhci51cGRhdGVTaXplKCksdGhpcy5zY3JvbGxiYXIuc2V0VHJhbnNsYXRlKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLnVwZGF0ZVNpemUoKX0scmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxiYXIudXBkYXRlU2l6ZSgpfSxvYnNlcnZlclVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLnVwZGF0ZVNpemUoKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxiYXIuc2V0VHJhbnNsYXRlKCl9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7dGhpcy5zY3JvbGxiYXIuc2V0VHJhbnNpdGlvbihlKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLmRlc3Ryb3koKX19fSx7bmFtZTpcInBhcmFsbGF4XCIscGFyYW1zOntwYXJhbGxheDp7ZW5hYmxlZDohMX19LGNyZWF0ZTpmdW5jdGlvbigpe2VlLmV4dGVuZCh0aGlzLHtwYXJhbGxheDp7c2V0VHJhbnNmb3JtOkIuc2V0VHJhbnNmb3JtLmJpbmQodGhpcyksc2V0VHJhbnNsYXRlOkIuc2V0VHJhbnNsYXRlLmJpbmQodGhpcyksc2V0VHJhbnNpdGlvbjpCLnNldFRyYW5zaXRpb24uYmluZCh0aGlzKX19KX0sb246e2JlZm9yZUluaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5wYXJhbGxheC5lbmFibGVkJiYodGhpcy5wYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcz0hMCx0aGlzLm9yaWdpbmFsUGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3M9ITApfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCYmdGhpcy5wYXJhbGxheC5zZXRUcmFuc2xhdGUoKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCYmdGhpcy5wYXJhbGxheC5zZXRUcmFuc2xhdGUoKX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnBhcmFtcy5wYXJhbGxheC5lbmFibGVkJiZ0aGlzLnBhcmFsbGF4LnNldFRyYW5zaXRpb24oZSl9fX0se25hbWU6XCJ6b29tXCIscGFyYW1zOnt6b29tOntlbmFibGVkOiExLG1heFJhdGlvOjMsbWluUmF0aW86MSx0b2dnbGU6ITAsY29udGFpbmVyQ2xhc3M6XCJzd2lwZXItem9vbS1jb250YWluZXJcIix6b29tZWRTbGlkZUNsYXNzOlwic3dpcGVyLXNsaWRlLXpvb21lZFwifX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcyx0PXtlbmFibGVkOiExLHNjYWxlOjEsY3VycmVudFNjYWxlOjEsaXNTY2FsaW5nOiExLGdlc3R1cmU6eyRzbGlkZUVsOnZvaWQgMCxzbGlkZVdpZHRoOnZvaWQgMCxzbGlkZUhlaWdodDp2b2lkIDAsJGltYWdlRWw6dm9pZCAwLCRpbWFnZVdyYXBFbDp2b2lkIDAsbWF4UmF0aW86M30saW1hZ2U6e2lzVG91Y2hlZDp2b2lkIDAsaXNNb3ZlZDp2b2lkIDAsY3VycmVudFg6dm9pZCAwLGN1cnJlbnRZOnZvaWQgMCxtaW5YOnZvaWQgMCxtaW5ZOnZvaWQgMCxtYXhYOnZvaWQgMCxtYXhZOnZvaWQgMCx3aWR0aDp2b2lkIDAsaGVpZ2h0OnZvaWQgMCxzdGFydFg6dm9pZCAwLHN0YXJ0WTp2b2lkIDAsdG91Y2hlc1N0YXJ0Ont9LHRvdWNoZXNDdXJyZW50Ont9fSx2ZWxvY2l0eTp7eDp2b2lkIDAseTp2b2lkIDAscHJldlBvc2l0aW9uWDp2b2lkIDAscHJldlBvc2l0aW9uWTp2b2lkIDAscHJldlRpbWU6dm9pZCAwfX07XCJvbkdlc3R1cmVTdGFydCBvbkdlc3R1cmVDaGFuZ2Ugb25HZXN0dXJlRW5kIG9uVG91Y2hTdGFydCBvblRvdWNoTW92ZSBvblRvdWNoRW5kIG9uVHJhbnNpdGlvbkVuZCB0b2dnbGUgZW5hYmxlIGRpc2FibGUgaW4gb3V0XCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1YW2VdLmJpbmQoaSl9KSxlZS5leHRlbmQoaSx7em9vbTp0fSk7dmFyIHM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS56b29tLFwic2NhbGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlKXtpZihzIT09ZSl7dmFyIHQ9aS56b29tLmdlc3R1cmUuJGltYWdlRWw/aS56b29tLmdlc3R1cmUuJGltYWdlRWxbMF06dm9pZCAwLGE9aS56b29tLmdlc3R1cmUuJHNsaWRlRWw/aS56b29tLmdlc3R1cmUuJHNsaWRlRWxbMF06dm9pZCAwO2kuZW1pdChcInpvb21DaGFuZ2VcIixlLHQsYSl9cz1lfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLnpvb20uZW5hYmxlZCYmdGhpcy56b29tLmVuYWJsZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy56b29tLmRpc2FibGUoKX0sdG91Y2hTdGFydDpmdW5jdGlvbihlKXt0aGlzLnpvb20uZW5hYmxlZCYmdGhpcy56b29tLm9uVG91Y2hTdGFydChlKX0sdG91Y2hFbmQ6ZnVuY3Rpb24oZSl7dGhpcy56b29tLmVuYWJsZWQmJnRoaXMuem9vbS5vblRvdWNoRW5kKGUpfSxkb3VibGVUYXA6ZnVuY3Rpb24oZSl7dGhpcy5wYXJhbXMuem9vbS5lbmFibGVkJiZ0aGlzLnpvb20uZW5hYmxlZCYmdGhpcy5wYXJhbXMuem9vbS50b2dnbGUmJnRoaXMuem9vbS50b2dnbGUoZSl9LHRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLnpvb20uZW5hYmxlZCYmdGhpcy5wYXJhbXMuem9vbS5lbmFibGVkJiZ0aGlzLnpvb20ub25UcmFuc2l0aW9uRW5kKCl9fX0se25hbWU6XCJsYXp5XCIscGFyYW1zOntsYXp5OntlbmFibGVkOiExLGxvYWRQcmV2TmV4dDohMSxsb2FkUHJldk5leHRBbW91bnQ6MSxsb2FkT25UcmFuc2l0aW9uU3RhcnQ6ITEsZWxlbWVudENsYXNzOlwic3dpcGVyLWxhenlcIixsb2FkaW5nQ2xhc3M6XCJzd2lwZXItbGF6eS1sb2FkaW5nXCIsbG9hZGVkQ2xhc3M6XCJzd2lwZXItbGF6eS1sb2FkZWRcIixwcmVsb2FkZXJDbGFzczpcInN3aXBlci1sYXp5LXByZWxvYWRlclwifX0sY3JlYXRlOmZ1bmN0aW9uKCl7ZWUuZXh0ZW5kKHRoaXMse2xhenk6e2luaXRpYWxJbWFnZUxvYWRlZDohMSxsb2FkOlkubG9hZC5iaW5kKHRoaXMpLGxvYWRJblNsaWRlOlkubG9hZEluU2xpZGUuYmluZCh0aGlzKX19KX0sb246e2JlZm9yZUluaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sYXp5LmVuYWJsZWQmJnRoaXMucGFyYW1zLnByZWxvYWRJbWFnZXMmJih0aGlzLnBhcmFtcy5wcmVsb2FkSW1hZ2VzPSExKX0saW5pdDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxhenkuZW5hYmxlZCYmIXRoaXMucGFyYW1zLmxvb3AmJjA9PT10aGlzLnBhcmFtcy5pbml0aWFsU2xpZGUmJnRoaXMubGF6eS5sb2FkKCl9LHNjcm9sbDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmZyZWVNb2RlJiYhdGhpcy5wYXJhbXMuZnJlZU1vZGVTdGlja3kmJnRoaXMubGF6eS5sb2FkKCl9LHJlc2l6ZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxhenkuZW5hYmxlZCYmdGhpcy5sYXp5LmxvYWQoKX0sc2Nyb2xsYmFyRHJhZ01vdmU6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sYXp5LmVuYWJsZWQmJnRoaXMubGF6eS5sb2FkKCl9LHRyYW5zaXRpb25TdGFydDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wYXJhbXMubGF6eS5lbmFibGVkJiYoZS5wYXJhbXMubGF6eS5sb2FkT25UcmFuc2l0aW9uU3RhcnR8fCFlLnBhcmFtcy5sYXp5LmxvYWRPblRyYW5zaXRpb25TdGFydCYmIWUubGF6eS5pbml0aWFsSW1hZ2VMb2FkZWQpJiZlLmxhenkubG9hZCgpfSx0cmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMubGF6eS5lbmFibGVkJiYhdGhpcy5wYXJhbXMubGF6eS5sb2FkT25UcmFuc2l0aW9uU3RhcnQmJnRoaXMubGF6eS5sb2FkKCl9fX0se25hbWU6XCJjb250cm9sbGVyXCIscGFyYW1zOntjb250cm9sbGVyOntjb250cm9sOnZvaWQgMCxpbnZlcnNlOiExLGJ5Olwic2xpZGVcIn19LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZWUuZXh0ZW5kKGUse2NvbnRyb2xsZXI6e2NvbnRyb2w6ZS5wYXJhbXMuY29udHJvbGxlci5jb250cm9sLGdldEludGVycG9sYXRlRnVuY3Rpb246Vi5nZXRJbnRlcnBvbGF0ZUZ1bmN0aW9uLmJpbmQoZSksc2V0VHJhbnNsYXRlOlYuc2V0VHJhbnNsYXRlLmJpbmQoZSksc2V0VHJhbnNpdGlvbjpWLnNldFRyYW5zaXRpb24uYmluZChlKX19KX0sb246e3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMuY29udHJvbGxlci5jb250cm9sJiZ0aGlzLmNvbnRyb2xsZXIuc3BsaW5lJiYodGhpcy5jb250cm9sbGVyLnNwbGluZT12b2lkIDAsZGVsZXRlIHRoaXMuY29udHJvbGxlci5zcGxpbmUpfSxyZXNpemU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRyb2xsZXIuY29udHJvbCYmdGhpcy5jb250cm9sbGVyLnNwbGluZSYmKHRoaXMuY29udHJvbGxlci5zcGxpbmU9dm9pZCAwLGRlbGV0ZSB0aGlzLmNvbnRyb2xsZXIuc3BsaW5lKX0sb2JzZXJ2ZXJVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRyb2xsZXIuY29udHJvbCYmdGhpcy5jb250cm9sbGVyLnNwbGluZSYmKHRoaXMuY29udHJvbGxlci5zcGxpbmU9dm9pZCAwLGRlbGV0ZSB0aGlzLmNvbnRyb2xsZXIuc3BsaW5lKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jb250cm9sbGVyLmNvbnRyb2wmJnRoaXMuY29udHJvbGxlci5zZXRUcmFuc2xhdGUoZSx0KX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlLHQpe3RoaXMuY29udHJvbGxlci5jb250cm9sJiZ0aGlzLmNvbnRyb2xsZXIuc2V0VHJhbnNpdGlvbihlLHQpfX19LHtuYW1lOlwiYTExeVwiLHBhcmFtczp7YTExeTp7ZW5hYmxlZDohMCxub3RpZmljYXRpb25DbGFzczpcInN3aXBlci1ub3RpZmljYXRpb25cIixwcmV2U2xpZGVNZXNzYWdlOlwiUHJldmlvdXMgc2xpZGVcIixuZXh0U2xpZGVNZXNzYWdlOlwiTmV4dCBzbGlkZVwiLGZpcnN0U2xpZGVNZXNzYWdlOlwiVGhpcyBpcyB0aGUgZmlyc3Qgc2xpZGVcIixsYXN0U2xpZGVNZXNzYWdlOlwiVGhpcyBpcyB0aGUgbGFzdCBzbGlkZVwiLHBhZ2luYXRpb25CdWxsZXRNZXNzYWdlOlwiR28gdG8gc2xpZGUge3tpbmRleH19XCJ9fSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2VlLmV4dGVuZCh0LHthMTF5OntsaXZlUmVnaW9uOkwoJzxzcGFuIGNsYXNzPVwiJyt0LnBhcmFtcy5hMTF5Lm5vdGlmaWNhdGlvbkNsYXNzKydcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIj48L3NwYW4+Jyl9fSksT2JqZWN0LmtleXMoRikuZm9yRWFjaChmdW5jdGlvbihlKXt0LmExMXlbZV09RltlXS5iaW5kKHQpfSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuYTExeS5lbmFibGVkJiYodGhpcy5hMTF5LmluaXQoKSx0aGlzLmExMXkudXBkYXRlTmF2aWdhdGlvbigpKX0sdG9FZGdlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuYTExeS5lbmFibGVkJiZ0aGlzLmExMXkudXBkYXRlTmF2aWdhdGlvbigpfSxmcm9tRWRnZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmExMXkuZW5hYmxlZCYmdGhpcy5hMTF5LnVwZGF0ZU5hdmlnYXRpb24oKX0scGFnaW5hdGlvblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmExMXkuZW5hYmxlZCYmdGhpcy5hMTF5LnVwZGF0ZVBhZ2luYXRpb24oKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmExMXkuZW5hYmxlZCYmdGhpcy5hMTF5LmRlc3Ryb3koKX19fSx7bmFtZTpcImhpc3RvcnlcIixwYXJhbXM6e2hpc3Rvcnk6e2VuYWJsZWQ6ITEscmVwbGFjZVN0YXRlOiExLGtleTpcInNsaWRlc1wifX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlZS5leHRlbmQoZSx7aGlzdG9yeTp7aW5pdDpSLmluaXQuYmluZChlKSxzZXRIaXN0b3J5OlIuc2V0SGlzdG9yeS5iaW5kKGUpLHNldEhpc3RvcnlQb3BTdGF0ZTpSLnNldEhpc3RvcnlQb3BTdGF0ZS5iaW5kKGUpLHNjcm9sbFRvU2xpZGU6Ui5zY3JvbGxUb1NsaWRlLmJpbmQoZSksZGVzdHJveTpSLmRlc3Ryb3kuYmluZChlKX19KX0sb246e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQmJnRoaXMuaGlzdG9yeS5pbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQmJnRoaXMuaGlzdG9yeS5kZXN0cm95KCl9LHRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLmhpc3RvcnkuaW5pdGlhbGl6ZWQmJnRoaXMuaGlzdG9yeS5zZXRIaXN0b3J5KHRoaXMucGFyYW1zLmhpc3Rvcnkua2V5LHRoaXMuYWN0aXZlSW5kZXgpfX19LHtuYW1lOlwiaGFzaC1uYXZpZ2F0aW9uXCIscGFyYW1zOntoYXNoTmF2aWdhdGlvbjp7ZW5hYmxlZDohMSxyZXBsYWNlU3RhdGU6ITEsd2F0Y2hTdGF0ZTohMX19LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZWUuZXh0ZW5kKGUse2hhc2hOYXZpZ2F0aW9uOntpbml0aWFsaXplZDohMSxpbml0OnEuaW5pdC5iaW5kKGUpLGRlc3Ryb3k6cS5kZXN0cm95LmJpbmQoZSksc2V0SGFzaDpxLnNldEhhc2guYmluZChlKSxvbkhhc2hDYW5nZTpxLm9uSGFzaENhbmdlLmJpbmQoZSl9fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCYmdGhpcy5oYXNoTmF2aWdhdGlvbi5pbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkJiZ0aGlzLmhhc2hOYXZpZ2F0aW9uLmRlc3Ryb3koKX0sdHJhbnNpdGlvbkVuZDpmdW5jdGlvbigpe3RoaXMuaGFzaE5hdmlnYXRpb24uaW5pdGlhbGl6ZWQmJnRoaXMuaGFzaE5hdmlnYXRpb24uc2V0SGFzaCgpfX19LHtuYW1lOlwiYXV0b3BsYXlcIixwYXJhbXM6e2F1dG9wbGF5OntlbmFibGVkOiExLGRlbGF5OjNlMyx3YWl0Rm9yVHJhbnNpdGlvbjohMCxkaXNhYmxlT25JbnRlcmFjdGlvbjohMCxzdG9wT25MYXN0U2xpZGU6ITEscmV2ZXJzZURpcmVjdGlvbjohMX19LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7ZWUuZXh0ZW5kKHQse2F1dG9wbGF5OntydW5uaW5nOiExLHBhdXNlZDohMSxydW46Vy5ydW4uYmluZCh0KSxzdGFydDpXLnN0YXJ0LmJpbmQodCksc3RvcDpXLnN0b3AuYmluZCh0KSxwYXVzZTpXLnBhdXNlLmJpbmQodCksb25UcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKGUpe3QmJiF0LmRlc3Ryb3llZCYmdC4kd3JhcHBlckVsJiZlLnRhcmdldD09PXRoaXMmJih0LiR3cmFwcGVyRWxbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIix0LmF1dG9wbGF5Lm9uVHJhbnNpdGlvbkVuZCksdC4kd3JhcHBlckVsWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsdC5hdXRvcGxheS5vblRyYW5zaXRpb25FbmQpLHQuYXV0b3BsYXkucGF1c2VkPSExLHQuYXV0b3BsYXkucnVubmluZz90LmF1dG9wbGF5LnJ1bigpOnQuYXV0b3BsYXkuc3RvcCgpKX19fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuYXV0b3BsYXkuZW5hYmxlZCYmdGhpcy5hdXRvcGxheS5zdGFydCgpfSxiZWZvcmVUcmFuc2l0aW9uU3RhcnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmF1dG9wbGF5LnJ1bm5pbmcmJih0fHwhdGhpcy5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24/dGhpcy5hdXRvcGxheS5wYXVzZShlKTp0aGlzLmF1dG9wbGF5LnN0b3AoKSl9LHNsaWRlckZpcnN0TW92ZTpmdW5jdGlvbigpe3RoaXMuYXV0b3BsYXkucnVubmluZyYmKHRoaXMucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uP3RoaXMuYXV0b3BsYXkuc3RvcCgpOnRoaXMuYXV0b3BsYXkucGF1c2UoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmF1dG9wbGF5LnJ1bm5pbmcmJnRoaXMuYXV0b3BsYXkuc3RvcCgpfX19LHtuYW1lOlwiZWZmZWN0LWZhZGVcIixwYXJhbXM6e2ZhZGVFZmZlY3Q6e2Nyb3NzRmFkZTohMX19LGNyZWF0ZTpmdW5jdGlvbigpe2VlLmV4dGVuZCh0aGlzLHtmYWRlRWZmZWN0OntzZXRUcmFuc2xhdGU6ai5zZXRUcmFuc2xhdGUuYmluZCh0aGlzKSxzZXRUcmFuc2l0aW9uOmouc2V0VHJhbnNpdGlvbi5iaW5kKHRoaXMpfX0pfSxvbjp7YmVmb3JlSW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoXCJmYWRlXCI9PT1lLnBhcmFtcy5lZmZlY3Qpe2UuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJmYWRlXCIpO3ZhciB0PXtzbGlkZXNQZXJWaWV3OjEsc2xpZGVzUGVyQ29sdW1uOjEsc2xpZGVzUGVyR3JvdXA6MSx3YXRjaFNsaWRlc1Byb2dyZXNzOiEwLHNwYWNlQmV0d2VlbjowLHZpcnR1YWxUcmFuc2xhdGU6ITB9O2VlLmV4dGVuZChlLnBhcmFtcyx0KSxlZS5leHRlbmQoZS5vcmlnaW5hbFBhcmFtcyx0KX19LHNldFRyYW5zbGF0ZTpmdW5jdGlvbigpe1wiZmFkZVwiPT09dGhpcy5wYXJhbXMuZWZmZWN0JiZ0aGlzLmZhZGVFZmZlY3Quc2V0VHJhbnNsYXRlKCl9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7XCJmYWRlXCI9PT10aGlzLnBhcmFtcy5lZmZlY3QmJnRoaXMuZmFkZUVmZmVjdC5zZXRUcmFuc2l0aW9uKGUpfX19LHtuYW1lOlwiZWZmZWN0LWN1YmVcIixwYXJhbXM6e2N1YmVFZmZlY3Q6e3NsaWRlU2hhZG93czohMCxzaGFkb3c6ITAsc2hhZG93T2Zmc2V0OjIwLHNoYWRvd1NjYWxlOi45NH19LGNyZWF0ZTpmdW5jdGlvbigpe2VlLmV4dGVuZCh0aGlzLHtjdWJlRWZmZWN0OntzZXRUcmFuc2xhdGU6VS5zZXRUcmFuc2xhdGUuYmluZCh0aGlzKSxzZXRUcmFuc2l0aW9uOlUuc2V0VHJhbnNpdGlvbi5iaW5kKHRoaXMpfX0pfSxvbjp7YmVmb3JlSW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoXCJjdWJlXCI9PT1lLnBhcmFtcy5lZmZlY3Qpe2UuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJjdWJlXCIpLGUuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCIzZFwiKTt2YXIgdD17c2xpZGVzUGVyVmlldzoxLHNsaWRlc1BlckNvbHVtbjoxLHNsaWRlc1Blckdyb3VwOjEsd2F0Y2hTbGlkZXNQcm9ncmVzczohMCxyZXNpc3RhbmNlUmF0aW86MCxzcGFjZUJldHdlZW46MCxjZW50ZXJlZFNsaWRlczohMSx2aXJ0dWFsVHJhbnNsYXRlOiEwfTtlZS5leHRlbmQoZS5wYXJhbXMsdCksZWUuZXh0ZW5kKGUub3JpZ2luYWxQYXJhbXMsdCl9fSxzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXtcImN1YmVcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5jdWJlRWZmZWN0LnNldFRyYW5zbGF0ZSgpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe1wiY3ViZVwiPT09dGhpcy5wYXJhbXMuZWZmZWN0JiZ0aGlzLmN1YmVFZmZlY3Quc2V0VHJhbnNpdGlvbihlKX19fSx7bmFtZTpcImVmZmVjdC1mbGlwXCIscGFyYW1zOntmbGlwRWZmZWN0OntzbGlkZVNoYWRvd3M6ITAsbGltaXRSb3RhdGlvbjohMH19LGNyZWF0ZTpmdW5jdGlvbigpe2VlLmV4dGVuZCh0aGlzLHtmbGlwRWZmZWN0OntzZXRUcmFuc2xhdGU6Sy5zZXRUcmFuc2xhdGUuYmluZCh0aGlzKSxzZXRUcmFuc2l0aW9uOksuc2V0VHJhbnNpdGlvbi5iaW5kKHRoaXMpfX0pfSxvbjp7YmVmb3JlSW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoXCJmbGlwXCI9PT1lLnBhcmFtcy5lZmZlY3Qpe2UuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJmbGlwXCIpLGUuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCIzZFwiKTt2YXIgdD17c2xpZGVzUGVyVmlldzoxLHNsaWRlc1BlckNvbHVtbjoxLHNsaWRlc1Blckdyb3VwOjEsd2F0Y2hTbGlkZXNQcm9ncmVzczohMCxzcGFjZUJldHdlZW46MCx2aXJ0dWFsVHJhbnNsYXRlOiEwfTtlZS5leHRlbmQoZS5wYXJhbXMsdCksZWUuZXh0ZW5kKGUub3JpZ2luYWxQYXJhbXMsdCl9fSxzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXtcImZsaXBcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5mbGlwRWZmZWN0LnNldFRyYW5zbGF0ZSgpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe1wiZmxpcFwiPT09dGhpcy5wYXJhbXMuZWZmZWN0JiZ0aGlzLmZsaXBFZmZlY3Quc2V0VHJhbnNpdGlvbihlKX19fSx7bmFtZTpcImVmZmVjdC1jb3ZlcmZsb3dcIixwYXJhbXM6e2NvdmVyZmxvd0VmZmVjdDp7cm90YXRlOjUwLHN0cmV0Y2g6MCxkZXB0aDoxMDAsbW9kaWZpZXI6MSxzbGlkZVNoYWRvd3M6ITB9fSxjcmVhdGU6ZnVuY3Rpb24oKXtlZS5leHRlbmQodGhpcyx7Y292ZXJmbG93RWZmZWN0OntzZXRUcmFuc2xhdGU6Xy5zZXRUcmFuc2xhdGUuYmluZCh0aGlzKSxzZXRUcmFuc2l0aW9uOl8uc2V0VHJhbnNpdGlvbi5iaW5kKHRoaXMpfX0pfSxvbjp7YmVmb3JlSW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7XCJjb3ZlcmZsb3dcIj09PWUucGFyYW1zLmVmZmVjdCYmKGUuY2xhc3NOYW1lcy5wdXNoKGUucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJjb3ZlcmZsb3dcIiksZS5jbGFzc05hbWVzLnB1c2goZS5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcytcIjNkXCIpLGUucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3M9ITAsZS5vcmlnaW5hbFBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzPSEwKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7XCJjb3ZlcmZsb3dcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5jb3ZlcmZsb3dFZmZlY3Quc2V0VHJhbnNsYXRlKCl9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7XCJjb3ZlcmZsb3dcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5jb3ZlcmZsb3dFZmZlY3Quc2V0VHJhbnNpdGlvbihlKX19fSx7bmFtZTpcInRodW1ic1wiLHBhcmFtczp7dGh1bWJzOntzd2lwZXI6bnVsbCxzbGlkZVRodW1iQWN0aXZlQ2xhc3M6XCJzd2lwZXItc2xpZGUtdGh1bWItYWN0aXZlXCIsdGh1bWJzQ29udGFpbmVyQ2xhc3M6XCJzd2lwZXItY29udGFpbmVyLXRodW1ic1wifX0sY3JlYXRlOmZ1bmN0aW9uKCl7ZWUuZXh0ZW5kKHRoaXMse3RodW1iczp7c3dpcGVyOm51bGwsaW5pdDpaLmluaXQuYmluZCh0aGlzKSx1cGRhdGU6Wi51cGRhdGUuYmluZCh0aGlzKSxvblRodW1iQ2xpY2s6Wi5vblRodW1iQ2xpY2suYmluZCh0aGlzKX19KX0sb246e2JlZm9yZUluaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhcmFtcy50aHVtYnM7ZSYmZS5zd2lwZXImJih0aGlzLnRodW1icy5pbml0KCksdGhpcy50aHVtYnMudXBkYXRlKCEwKSl9LHNsaWRlQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy50aHVtYnMuc3dpcGVyJiZ0aGlzLnRodW1icy51cGRhdGUoKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy50aHVtYnMuc3dpcGVyJiZ0aGlzLnRodW1icy51cGRhdGUoKX0scmVzaXplOmZ1bmN0aW9uKCl7dGhpcy50aHVtYnMuc3dpcGVyJiZ0aGlzLnRodW1icy51cGRhdGUoKX0sb2JzZXJ2ZXJVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnRodW1icy5zd2lwZXImJnRoaXMudGh1bWJzLnVwZGF0ZSgpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGh1bWJzLnN3aXBlcjt0JiZ0LnNldFRyYW5zaXRpb24oZSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRodW1icy5zd2lwZXI7ZSYmdGhpcy50aHVtYnMuc3dpcGVyQ3JlYXRlZCYmZSYmZS5kZXN0cm95KCl9fX1dO3JldHVybiB2b2lkIDA9PT1ULnVzZSYmKFQudXNlPVQuQ2xhc3MudXNlLFQuaW5zdGFsbE1vZHVsZT1ULkNsYXNzLmluc3RhbGxNb2R1bGUpLFQudXNlKFEpLFR9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXBlci5taW4uanMubWFwXG4vKiEgU2VsZWN0MiA0LjAuNi1yYy4xIHwgaHR0cHM6Ly9naXRodWIuY29tL3NlbGVjdDIvc2VsZWN0Mi9ibG9iL21hc3Rlci9MSUNFTlNFLm1kICovIWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIHZvaWQgMD09PWMmJihjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/cmVxdWlyZShcImpxdWVyeVwiKTpyZXF1aXJlKFwianF1ZXJ5XCIpKGIpKSxhKGMpLGN9OmEoalF1ZXJ5KX0oZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oKXtpZihhJiZhLmZuJiZhLmZuLnNlbGVjdDImJmEuZm4uc2VsZWN0Mi5hbWQpdmFyIGI9YS5mbi5zZWxlY3QyLmFtZDt2YXIgYjtyZXR1cm4gZnVuY3Rpb24oKXtpZighYnx8IWIucmVxdWlyZWpzKXtiP2M9YjpiPXt9O3ZhciBhLGMsZDshZnVuY3Rpb24oYil7ZnVuY3Rpb24gZShhLGIpe3JldHVybiB2LmNhbGwoYSxiKX1mdW5jdGlvbiBmKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG89YiYmYi5zcGxpdChcIi9cIikscD10Lm1hcCxxPXAmJnBbXCIqXCJdfHx7fTtpZihhKXtmb3IoYT1hLnNwbGl0KFwiL1wiKSxnPWEubGVuZ3RoLTEsdC5ub2RlSWRDb21wYXQmJngudGVzdChhW2ddKSYmKGFbZ109YVtnXS5yZXBsYWNlKHgsXCJcIikpLFwiLlwiPT09YVswXS5jaGFyQXQoMCkmJm8mJihuPW8uc2xpY2UoMCxvLmxlbmd0aC0xKSxhPW4uY29uY2F0KGEpKSxrPTA7azxhLmxlbmd0aDtrKyspaWYoXCIuXCI9PT0obT1hW2tdKSlhLnNwbGljZShrLDEpLGstPTE7ZWxzZSBpZihcIi4uXCI9PT1tKXtpZigwPT09a3x8MT09PWsmJlwiLi5cIj09PWFbMl18fFwiLi5cIj09PWFbay0xXSljb250aW51ZTtrPjAmJihhLnNwbGljZShrLTEsMiksay09Mil9YT1hLmpvaW4oXCIvXCIpfWlmKChvfHxxKSYmcCl7Zm9yKGM9YS5zcGxpdChcIi9cIiksaz1jLmxlbmd0aDtrPjA7ay09MSl7aWYoZD1jLnNsaWNlKDAsaykuam9pbihcIi9cIiksbylmb3IobD1vLmxlbmd0aDtsPjA7bC09MSlpZigoZT1wW28uc2xpY2UoMCxsKS5qb2luKFwiL1wiKV0pJiYoZT1lW2RdKSl7Zj1lLGg9azticmVha31pZihmKWJyZWFrOyFpJiZxJiZxW2RdJiYoaT1xW2RdLGo9ayl9IWYmJmkmJihmPWksaD1qKSxmJiYoYy5zcGxpY2UoMCxoLGYpLGE9Yy5qb2luKFwiL1wiKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZyhhLGMpe3JldHVybiBmdW5jdGlvbigpe3ZhciBkPXcuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGRbMF0mJjE9PT1kLmxlbmd0aCYmZC5wdXNoKG51bGwpLG8uYXBwbHkoYixkLmNvbmNhdChbYSxjXSkpfX1mdW5jdGlvbiBoKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZihiLGEpfX1mdW5jdGlvbiBpKGEpe3JldHVybiBmdW5jdGlvbihiKXtyW2FdPWJ9fWZ1bmN0aW9uIGooYSl7aWYoZShzLGEpKXt2YXIgYz1zW2FdO2RlbGV0ZSBzW2FdLHVbYV09ITAsbi5hcHBseShiLGMpfWlmKCFlKHIsYSkmJiFlKHUsYSkpdGhyb3cgbmV3IEVycm9yKFwiTm8gXCIrYSk7cmV0dXJuIHJbYV19ZnVuY3Rpb24gayhhKXt2YXIgYixjPWE/YS5pbmRleE9mKFwiIVwiKTotMTtyZXR1cm4gYz4tMSYmKGI9YS5zdWJzdHJpbmcoMCxjKSxhPWEuc3Vic3RyaW5nKGMrMSxhLmxlbmd0aCkpLFtiLGFdfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGE/ayhhKTpbXX1mdW5jdGlvbiBtKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0JiZ0LmNvbmZpZyYmdC5jb25maWdbYV18fHt9fX12YXIgbixvLHAscSxyPXt9LHM9e30sdD17fSx1PXt9LHY9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx3PVtdLnNsaWNlLHg9L1xcLmpzJC87cD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9ayhhKSxlPWRbMF0sZz1iWzFdO3JldHVybiBhPWRbMV0sZSYmKGU9ZihlLGcpLGM9aihlKSksZT9hPWMmJmMubm9ybWFsaXplP2Mubm9ybWFsaXplKGEsaChnKSk6ZihhLGcpOihhPWYoYSxnKSxkPWsoYSksZT1kWzBdLGE9ZFsxXSxlJiYoYz1qKGUpKSkse2Y6ZT9lK1wiIVwiK2E6YSxuOmEscHI6ZSxwOmN9fSxxPXtyZXF1aXJlOmZ1bmN0aW9uKGEpe3JldHVybiBnKGEpfSxleHBvcnRzOmZ1bmN0aW9uKGEpe3ZhciBiPXJbYV07cmV0dXJuIHZvaWQgMCE9PWI/YjpyW2FdPXt9fSxtb2R1bGU6ZnVuY3Rpb24oYSl7cmV0dXJue2lkOmEsdXJpOlwiXCIsZXhwb3J0czpyW2FdLGNvbmZpZzptKGEpfX19LG49ZnVuY3Rpb24oYSxjLGQsZil7dmFyIGgsayxtLG4sbyx0LHYsdz1bXSx4PXR5cGVvZiBkO2lmKGY9Znx8YSx0PWwoZiksXCJ1bmRlZmluZWRcIj09PXh8fFwiZnVuY3Rpb25cIj09PXgpe2ZvcihjPSFjLmxlbmd0aCYmZC5sZW5ndGg/W1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdOmMsbz0wO288Yy5sZW5ndGg7bys9MSlpZihuPXAoY1tvXSx0KSxcInJlcXVpcmVcIj09PShrPW4uZikpd1tvXT1xLnJlcXVpcmUoYSk7ZWxzZSBpZihcImV4cG9ydHNcIj09PWspd1tvXT1xLmV4cG9ydHMoYSksdj0hMDtlbHNlIGlmKFwibW9kdWxlXCI9PT1rKWg9d1tvXT1xLm1vZHVsZShhKTtlbHNlIGlmKGUocixrKXx8ZShzLGspfHxlKHUsaykpd1tvXT1qKGspO2Vsc2V7aWYoIW4ucCl0aHJvdyBuZXcgRXJyb3IoYStcIiBtaXNzaW5nIFwiK2spO24ucC5sb2FkKG4ubixnKGYsITApLGkoaykse30pLHdbb109cltrXX1tPWQ/ZC5hcHBseShyW2FdLHcpOnZvaWQgMCxhJiYoaCYmaC5leHBvcnRzIT09YiYmaC5leHBvcnRzIT09clthXT9yW2FdPWguZXhwb3J0czptPT09YiYmdnx8KHJbYV09bSkpfWVsc2UgYSYmKHJbYV09ZCl9LGE9Yz1vPWZ1bmN0aW9uKGEsYyxkLGUsZil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpcmV0dXJuIHFbYV0/cVthXShjKTpqKHAoYSxsKGMpKS5mKTtpZighYS5zcGxpY2Upe2lmKHQ9YSx0LmRlcHMmJm8odC5kZXBzLHQuY2FsbGJhY2spLCFjKXJldHVybjtjLnNwbGljZT8oYT1jLGM9ZCxkPW51bGwpOmE9Yn1yZXR1cm4gYz1jfHxmdW5jdGlvbigpe30sXCJmdW5jdGlvblwiPT10eXBlb2YgZCYmKGQ9ZSxlPWYpLGU/bihiLGEsYyxkKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bihiLGEsYyxkKX0sNCksb30sby5jb25maWc9ZnVuY3Rpb24oYSl7cmV0dXJuIG8oYSl9LGEuX2RlZmluZWQ9cixkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoXCJTZWUgYWxtb25kIFJFQURNRTogaW5jb3JyZWN0IG1vZHVsZSBidWlsZCwgbm8gbW9kdWxlIG5hbWVcIik7Yi5zcGxpY2V8fChjPWIsYj1bXSksZShyLGEpfHxlKHMsYSl8fChzW2FdPVthLGIsY10pfSxkLmFtZD17alF1ZXJ5OiEwfX0oKSxiLnJlcXVpcmVqcz1hLGIucmVxdWlyZT1jLGIuZGVmaW5lPWR9fSgpLGIuZGVmaW5lKFwiYWxtb25kXCIsZnVuY3Rpb24oKXt9KSxiLmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7dmFyIGI9YXx8JDtyZXR1cm4gbnVsbD09YiYmY29uc29sZSYmY29uc29sZS5lcnJvciYmY29uc29sZS5lcnJvcihcIlNlbGVjdDI6IEFuIGluc3RhbmNlIG9mIGpRdWVyeSBvciBhIGpRdWVyeS1jb21wYXRpYmxlIGxpYnJhcnkgd2FzIG5vdCBmb3VuZC4gTWFrZSBzdXJlIHRoYXQgeW91IGFyZSBpbmNsdWRpbmcgalF1ZXJ5IGJlZm9yZSBTZWxlY3QyIG9uIHlvdXIgd2ViIHBhZ2UuXCIpLGJ9KSxiLmRlZmluZShcInNlbGVjdDIvdXRpbHNcIixbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hLnByb3RvdHlwZSxjPVtdO2Zvcih2YXIgZCBpbiBiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiW2RdJiYoXCJjb25zdHJ1Y3RvclwiIT09ZCYmYy5wdXNoKGQpKX1yZXR1cm4gY312YXIgYz17fTtjLkV4dGVuZD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt0aGlzLmNvbnN0cnVjdG9yPWF9dmFyIGQ9e30uaGFzT3duUHJvcGVydHk7Zm9yKHZhciBlIGluIGIpZC5jYWxsKGIsZSkmJihhW2VdPWJbZV0pO3JldHVybiBjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLnByb3RvdHlwZT1uZXcgYyxhLl9fc3VwZXJfXz1iLnByb3RvdHlwZSxhfSxjLkRlY29yYXRlPWZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gZCgpe3ZhciBiPUFycmF5LnByb3RvdHlwZS51bnNoaWZ0LGQ9Yy5wcm90b3R5cGUuY29uc3RydWN0b3IubGVuZ3RoLGU9YS5wcm90b3R5cGUuY29uc3RydWN0b3I7ZD4wJiYoYi5jYWxsKGFyZ3VtZW50cyxhLnByb3RvdHlwZS5jb25zdHJ1Y3RvciksZT1jLnByb3RvdHlwZS5jb25zdHJ1Y3RvciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZSgpe3RoaXMuY29uc3RydWN0b3I9ZH12YXIgZj1iKGMpLGc9YihhKTtjLmRpc3BsYXlOYW1lPWEuZGlzcGxheU5hbWUsZC5wcm90b3R5cGU9bmV3IGU7Zm9yKHZhciBoPTA7aDxnLmxlbmd0aDtoKyspe3ZhciBpPWdbaF07ZC5wcm90b3R5cGVbaV09YS5wcm90b3R5cGVbaV19Zm9yKHZhciBqPShmdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbigpe307YSBpbiBkLnByb3RvdHlwZSYmKGI9ZC5wcm90b3R5cGVbYV0pO3ZhciBlPWMucHJvdG90eXBlW2FdO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyxiKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxrPTA7azxmLmxlbmd0aDtrKyspe3ZhciBsPWZba107ZC5wcm90b3R5cGVbbF09aihsKX1yZXR1cm4gZH07dmFyIGQ9ZnVuY3Rpb24oKXt0aGlzLmxpc3RlbmVycz17fX07ZC5wcm90b3R5cGUub249ZnVuY3Rpb24oYSxiKXt0aGlzLmxpc3RlbmVycz10aGlzLmxpc3RlbmVyc3x8e30sYSBpbiB0aGlzLmxpc3RlbmVycz90aGlzLmxpc3RlbmVyc1thXS5wdXNoKGIpOnRoaXMubGlzdGVuZXJzW2FdPVtiXX0sZC5wcm90b3R5cGUudHJpZ2dlcj1mdW5jdGlvbihhKXt2YXIgYj1BcnJheS5wcm90b3R5cGUuc2xpY2UsYz1iLmNhbGwoYXJndW1lbnRzLDEpO3RoaXMubGlzdGVuZXJzPXRoaXMubGlzdGVuZXJzfHx7fSxudWxsPT1jJiYoYz1bXSksMD09PWMubGVuZ3RoJiZjLnB1c2goe30pLGNbMF0uX3R5cGU9YSxhIGluIHRoaXMubGlzdGVuZXJzJiZ0aGlzLmludm9rZSh0aGlzLmxpc3RlbmVyc1thXSxiLmNhbGwoYXJndW1lbnRzLDEpKSxcIipcImluIHRoaXMubGlzdGVuZXJzJiZ0aGlzLmludm9rZSh0aGlzLmxpc3RlbmVyc1tcIipcIl0sYXJndW1lbnRzKX0sZC5wcm90b3R5cGUuaW52b2tlPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWFbY10uYXBwbHkodGhpcyxiKX0sYy5PYnNlcnZhYmxlPWQsYy5nZW5lcmF0ZUNoYXJzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGE7YysrKXtiKz1NYXRoLmZsb29yKDM2Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KX1yZXR1cm4gYn0sYy5iaW5kPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7YS5hcHBseShiLGFyZ3VtZW50cyl9fSxjLl9jb252ZXJ0RGF0YT1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl7dmFyIGM9Yi5zcGxpdChcIi1cIiksZD1hO2lmKDEhPT1jLmxlbmd0aCl7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07Zj1mLnN1YnN0cmluZygwLDEpLnRvTG93ZXJDYXNlKCkrZi5zdWJzdHJpbmcoMSksZiBpbiBkfHwoZFtmXT17fSksZT09Yy5sZW5ndGgtMSYmKGRbZl09YVtiXSksZD1kW2ZdfWRlbGV0ZSBhW2JdfX1yZXR1cm4gYX0sYy5oYXNTY3JvbGw9ZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpLGU9Yy5zdHlsZS5vdmVyZmxvd1gsZj1jLnN0eWxlLm92ZXJmbG93WTtyZXR1cm4oZSE9PWZ8fFwiaGlkZGVuXCIhPT1mJiZcInZpc2libGVcIiE9PWYpJiYoXCJzY3JvbGxcIj09PWV8fFwic2Nyb2xsXCI9PT1mfHwoZC5pbm5lckhlaWdodCgpPGMuc2Nyb2xsSGVpZ2h0fHxkLmlubmVyV2lkdGgoKTxjLnNjcm9sbFdpZHRoKSl9LGMuZXNjYXBlTWFya3VwPWZ1bmN0aW9uKGEpe3ZhciBiPXtcIlxcXFxcIjpcIiYjOTI7XCIsXCImXCI6XCImYW1wO1wiLFwiPFwiOlwiJmx0O1wiLFwiPlwiOlwiJmd0O1wiLCdcIic6XCImcXVvdDtcIixcIidcIjpcIiYjMzk7XCIsXCIvXCI6XCImIzQ3O1wifTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYT9hOlN0cmluZyhhKS5yZXBsYWNlKC9bJjw+XCInXFwvXFxcXF0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYlthXX0pfSxjLmFwcGVuZE1hbnk9ZnVuY3Rpb24oYixjKXtpZihcIjEuN1wiPT09YS5mbi5qcXVlcnkuc3Vic3RyKDAsMykpe3ZhciBkPWEoKTthLm1hcChjLGZ1bmN0aW9uKGEpe2Q9ZC5hZGQoYSl9KSxjPWR9Yi5hcHBlbmQoYyl9LGMuX19jYWNoZT17fTt2YXIgZT0wO3JldHVybiBjLkdldFVuaXF1ZUVsZW1lbnRJZD1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShcImRhdGEtc2VsZWN0Mi1pZFwiKTtyZXR1cm4gbnVsbD09YiYmKGEuaWQ/KGI9YS5pZCxhLnNldEF0dHJpYnV0ZShcImRhdGEtc2VsZWN0Mi1pZFwiLGIpKTooYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNlbGVjdDItaWRcIiwrK2UpLGI9ZS50b1N0cmluZygpKSksYn0sYy5TdG9yZURhdGE9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWMuR2V0VW5pcXVlRWxlbWVudElkKGEpO2MuX19jYWNoZVtlXXx8KGMuX19jYWNoZVtlXT17fSksYy5fX2NhY2hlW2VdW2JdPWR9LGMuR2V0RGF0YT1mdW5jdGlvbihiLGQpe3ZhciBlPWMuR2V0VW5pcXVlRWxlbWVudElkKGIpO3JldHVybiBkP2MuX19jYWNoZVtlXSYmbnVsbCE9Yy5fX2NhY2hlW2VdW2RdP2MuX19jYWNoZVtlXVtkXTphKGIpLmRhdGEoZCk6Yy5fX2NhY2hlW2VdfSxjLlJlbW92ZURhdGE9ZnVuY3Rpb24oYSl7dmFyIGI9Yy5HZXRVbmlxdWVFbGVtZW50SWQoYSk7bnVsbCE9Yy5fX2NhY2hlW2JdJiZkZWxldGUgYy5fX2NhY2hlW2JdfSxjfSksYi5kZWZpbmUoXCJzZWxlY3QyL3Jlc3VsdHNcIixbXCJqcXVlcnlcIixcIi4vdXRpbHNcIl0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixkKXt0aGlzLiRlbGVtZW50PWEsdGhpcy5kYXRhPWQsdGhpcy5vcHRpb25zPWIsYy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKX1yZXR1cm4gYi5FeHRlbmQoYyxiLk9ic2VydmFibGUpLGMucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBiPWEoJzx1bCBjbGFzcz1cInNlbGVjdDItcmVzdWx0c19fb3B0aW9uc1wiIHJvbGU9XCJ0cmVlXCI+PC91bD4nKTtyZXR1cm4gdGhpcy5vcHRpb25zLmdldChcIm11bHRpcGxlXCIpJiZiLmF0dHIoXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiLFwidHJ1ZVwiKSx0aGlzLiRyZXN1bHRzPWIsYn0sYy5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLiRyZXN1bHRzLmVtcHR5KCl9LGMucHJvdG90eXBlLmRpc3BsYXlNZXNzYWdlPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMub3B0aW9ucy5nZXQoXCJlc2NhcGVNYXJrdXBcIik7dGhpcy5jbGVhcigpLHRoaXMuaGlkZUxvYWRpbmcoKTt2YXIgZD1hKCc8bGkgcm9sZT1cInRyZWVpdGVtXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgY2xhc3M9XCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvblwiPjwvbGk+JyksZT10aGlzLm9wdGlvbnMuZ2V0KFwidHJhbnNsYXRpb25zXCIpLmdldChiLm1lc3NhZ2UpO2QuYXBwZW5kKGMoZShiLmFyZ3MpKSksZFswXS5jbGFzc05hbWUrPVwiIHNlbGVjdDItcmVzdWx0c19fbWVzc2FnZVwiLHRoaXMuJHJlc3VsdHMuYXBwZW5kKGQpfSxjLnByb3RvdHlwZS5oaWRlTWVzc2FnZXM9ZnVuY3Rpb24oKXt0aGlzLiRyZXN1bHRzLmZpbmQoXCIuc2VsZWN0Mi1yZXN1bHRzX19tZXNzYWdlXCIpLnJlbW92ZSgpfSxjLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oYSl7dGhpcy5oaWRlTG9hZGluZygpO3ZhciBiPVtdO2lmKG51bGw9PWEucmVzdWx0c3x8MD09PWEucmVzdWx0cy5sZW5ndGgpcmV0dXJuIHZvaWQoMD09PXRoaXMuJHJlc3VsdHMuY2hpbGRyZW4oKS5sZW5ndGgmJnRoaXMudHJpZ2dlcihcInJlc3VsdHM6bWVzc2FnZVwiLHttZXNzYWdlOlwibm9SZXN1bHRzXCJ9KSk7YS5yZXN1bHRzPXRoaXMuc29ydChhLnJlc3VsdHMpO2Zvcih2YXIgYz0wO2M8YS5yZXN1bHRzLmxlbmd0aDtjKyspe3ZhciBkPWEucmVzdWx0c1tjXSxlPXRoaXMub3B0aW9uKGQpO2IucHVzaChlKX10aGlzLiRyZXN1bHRzLmFwcGVuZChiKX0sYy5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oYSxiKXtiLmZpbmQoXCIuc2VsZWN0Mi1yZXN1bHRzXCIpLmFwcGVuZChhKX0sYy5wcm90b3R5cGUuc29ydD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zLmdldChcInNvcnRlclwiKShhKX0sYy5wcm90b3R5cGUuaGlnaGxpZ2h0Rmlyc3RJdGVtPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kcmVzdWx0cy5maW5kKFwiLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdXCIpLGI9YS5maWx0ZXIoXCJbYXJpYS1zZWxlY3RlZD10cnVlXVwiKTtiLmxlbmd0aD4wP2IuZmlyc3QoKS50cmlnZ2VyKFwibW91c2VlbnRlclwiKTphLmZpcnN0KCkudHJpZ2dlcihcIm1vdXNlZW50ZXJcIiksdGhpcy5lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCl9LGMucHJvdG90eXBlLnNldENsYXNzZXM9ZnVuY3Rpb24oKXt2YXIgYz10aGlzO3RoaXMuZGF0YS5jdXJyZW50KGZ1bmN0aW9uKGQpe3ZhciBlPWEubWFwKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWQudG9TdHJpbmcoKX0pO2MuJHJlc3VsdHMuZmluZChcIi5zZWxlY3QyLXJlc3VsdHNfX29wdGlvblthcmlhLXNlbGVjdGVkXVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWIuR2V0RGF0YSh0aGlzLFwiZGF0YVwiKSxmPVwiXCIrZC5pZDtudWxsIT1kLmVsZW1lbnQmJmQuZWxlbWVudC5zZWxlY3RlZHx8bnVsbD09ZC5lbGVtZW50JiZhLmluQXJyYXkoZixlKT4tMT9jLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsXCJ0cnVlXCIpOmMuYXR0cihcImFyaWEtc2VsZWN0ZWRcIixcImZhbHNlXCIpfSl9KX0sYy5wcm90b3R5cGUuc2hvd0xvYWRpbmc9ZnVuY3Rpb24oYSl7dGhpcy5oaWRlTG9hZGluZygpO3ZhciBiPXRoaXMub3B0aW9ucy5nZXQoXCJ0cmFuc2xhdGlvbnNcIikuZ2V0KFwic2VhcmNoaW5nXCIpLGM9e2Rpc2FibGVkOiEwLGxvYWRpbmc6ITAsdGV4dDpiKGEpfSxkPXRoaXMub3B0aW9uKGMpO2QuY2xhc3NOYW1lKz1cIiBsb2FkaW5nLXJlc3VsdHNcIix0aGlzLiRyZXN1bHRzLnByZXBlbmQoZCl9LGMucHJvdG90eXBlLmhpZGVMb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy4kcmVzdWx0cy5maW5kKFwiLmxvYWRpbmctcmVzdWx0c1wiKS5yZW1vdmUoKX0sYy5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGMpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtkLmNsYXNzTmFtZT1cInNlbGVjdDItcmVzdWx0c19fb3B0aW9uXCI7dmFyIGU9e3JvbGU6XCJ0cmVlaXRlbVwiLFwiYXJpYS1zZWxlY3RlZFwiOlwiZmFsc2VcIn07Yy5kaXNhYmxlZCYmKGRlbGV0ZSBlW1wiYXJpYS1zZWxlY3RlZFwiXSxlW1wiYXJpYS1kaXNhYmxlZFwiXT1cInRydWVcIiksbnVsbD09Yy5pZCYmZGVsZXRlIGVbXCJhcmlhLXNlbGVjdGVkXCJdLG51bGwhPWMuX3Jlc3VsdElkJiYoZC5pZD1jLl9yZXN1bHRJZCksYy50aXRsZSYmKGQudGl0bGU9Yy50aXRsZSksYy5jaGlsZHJlbiYmKGUucm9sZT1cImdyb3VwXCIsZVtcImFyaWEtbGFiZWxcIl09Yy50ZXh0LGRlbGV0ZSBlW1wiYXJpYS1zZWxlY3RlZFwiXSk7Zm9yKHZhciBmIGluIGUpe3ZhciBnPWVbZl07ZC5zZXRBdHRyaWJ1dGUoZixnKX1pZihjLmNoaWxkcmVuKXt2YXIgaD1hKGQpLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiKTtpLmNsYXNzTmFtZT1cInNlbGVjdDItcmVzdWx0c19fZ3JvdXBcIjthKGkpO3RoaXMudGVtcGxhdGUoYyxpKTtmb3IodmFyIGo9W10saz0wO2s8Yy5jaGlsZHJlbi5sZW5ndGg7aysrKXt2YXIgbD1jLmNoaWxkcmVuW2tdLG09dGhpcy5vcHRpb24obCk7ai5wdXNoKG0pfXZhciBuPWEoXCI8dWw+PC91bD5cIix7Y2xhc3M6XCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvbnMgc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25zLS1uZXN0ZWRcIn0pO24uYXBwZW5kKGopLGguYXBwZW5kKGkpLGguYXBwZW5kKG4pfWVsc2UgdGhpcy50ZW1wbGF0ZShjLGQpO3JldHVybiBiLlN0b3JlRGF0YShkLFwiZGF0YVwiLGMpLGR9LGMucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYyxkKXt2YXIgZT10aGlzLGY9Yy5pZCtcIi1yZXN1bHRzXCI7dGhpcy4kcmVzdWx0cy5hdHRyKFwiaWRcIixmKSxjLm9uKFwicmVzdWx0czphbGxcIixmdW5jdGlvbihhKXtlLmNsZWFyKCksZS5hcHBlbmQoYS5kYXRhKSxjLmlzT3BlbigpJiYoZS5zZXRDbGFzc2VzKCksZS5oaWdobGlnaHRGaXJzdEl0ZW0oKSl9KSxjLm9uKFwicmVzdWx0czphcHBlbmRcIixmdW5jdGlvbihhKXtlLmFwcGVuZChhLmRhdGEpLGMuaXNPcGVuKCkmJmUuc2V0Q2xhc3NlcygpfSksYy5vbihcInF1ZXJ5XCIsZnVuY3Rpb24oYSl7ZS5oaWRlTWVzc2FnZXMoKSxlLnNob3dMb2FkaW5nKGEpfSksYy5vbihcInNlbGVjdFwiLGZ1bmN0aW9uKCl7Yy5pc09wZW4oKSYmKGUuc2V0Q2xhc3NlcygpLGUuaGlnaGxpZ2h0Rmlyc3RJdGVtKCkpfSksYy5vbihcInVuc2VsZWN0XCIsZnVuY3Rpb24oKXtjLmlzT3BlbigpJiYoZS5zZXRDbGFzc2VzKCksZS5oaWdobGlnaHRGaXJzdEl0ZW0oKSl9KSxjLm9uKFwib3BlblwiLGZ1bmN0aW9uKCl7ZS4kcmVzdWx0cy5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwidHJ1ZVwiKSxlLiRyZXN1bHRzLmF0dHIoXCJhcmlhLWhpZGRlblwiLFwiZmFsc2VcIiksZS5zZXRDbGFzc2VzKCksZS5lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCl9KSxjLm9uKFwiY2xvc2VcIixmdW5jdGlvbigpe2UuJHJlc3VsdHMuYXR0cihcImFyaWEtZXhwYW5kZWRcIixcImZhbHNlXCIpLGUuJHJlc3VsdHMuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLGUuJHJlc3VsdHMucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKX0pLGMub24oXCJyZXN1bHRzOnRvZ2dsZVwiLGZ1bmN0aW9uKCl7dmFyIGE9ZS5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTswIT09YS5sZW5ndGgmJmEudHJpZ2dlcihcIm1vdXNldXBcIil9KSxjLm9uKFwicmVzdWx0czpzZWxlY3RcIixmdW5jdGlvbigpe3ZhciBhPWUuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7aWYoMCE9PWEubGVuZ3RoKXt2YXIgYz1iLkdldERhdGEoYVswXSxcImRhdGFcIik7XCJ0cnVlXCI9PWEuYXR0cihcImFyaWEtc2VsZWN0ZWRcIik/ZS50cmlnZ2VyKFwiY2xvc2VcIix7fSk6ZS50cmlnZ2VyKFwic2VsZWN0XCIse2RhdGE6Y30pfX0pLGMub24oXCJyZXN1bHRzOnByZXZpb3VzXCIsZnVuY3Rpb24oKXt2YXIgYT1lLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpLGI9ZS4kcmVzdWx0cy5maW5kKFwiW2FyaWEtc2VsZWN0ZWRdXCIpLGM9Yi5pbmRleChhKTtpZighKGM8PTApKXt2YXIgZD1jLTE7MD09PWEubGVuZ3RoJiYoZD0wKTt2YXIgZj1iLmVxKGQpO2YudHJpZ2dlcihcIm1vdXNlZW50ZXJcIik7dmFyIGc9ZS4kcmVzdWx0cy5vZmZzZXQoKS50b3AsaD1mLm9mZnNldCgpLnRvcCxpPWUuJHJlc3VsdHMuc2Nyb2xsVG9wKCkrKGgtZyk7MD09PWQ/ZS4kcmVzdWx0cy5zY3JvbGxUb3AoMCk6aC1nPDAmJmUuJHJlc3VsdHMuc2Nyb2xsVG9wKGkpfX0pLGMub24oXCJyZXN1bHRzOm5leHRcIixmdW5jdGlvbigpe3ZhciBhPWUuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCksYj1lLiRyZXN1bHRzLmZpbmQoXCJbYXJpYS1zZWxlY3RlZF1cIiksYz1iLmluZGV4KGEpLGQ9YysxO2lmKCEoZD49Yi5sZW5ndGgpKXt2YXIgZj1iLmVxKGQpO2YudHJpZ2dlcihcIm1vdXNlZW50ZXJcIik7dmFyIGc9ZS4kcmVzdWx0cy5vZmZzZXQoKS50b3ArZS4kcmVzdWx0cy5vdXRlckhlaWdodCghMSksaD1mLm9mZnNldCgpLnRvcCtmLm91dGVySGVpZ2h0KCExKSxpPWUuJHJlc3VsdHMuc2Nyb2xsVG9wKCkraC1nOzA9PT1kP2UuJHJlc3VsdHMuc2Nyb2xsVG9wKDApOmg+ZyYmZS4kcmVzdWx0cy5zY3JvbGxUb3AoaSl9fSksYy5vbihcInJlc3VsdHM6Zm9jdXNcIixmdW5jdGlvbihhKXthLmVsZW1lbnQuYWRkQ2xhc3MoXCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWRcIil9KSxjLm9uKFwicmVzdWx0czptZXNzYWdlXCIsZnVuY3Rpb24oYSl7ZS5kaXNwbGF5TWVzc2FnZShhKX0pLGEuZm4ubW91c2V3aGVlbCYmdGhpcy4kcmVzdWx0cy5vbihcIm1vdXNld2hlZWxcIixmdW5jdGlvbihhKXt2YXIgYj1lLiRyZXN1bHRzLnNjcm9sbFRvcCgpLGM9ZS4kcmVzdWx0cy5nZXQoMCkuc2Nyb2xsSGVpZ2h0LWIrYS5kZWx0YVksZD1hLmRlbHRhWT4wJiZiLWEuZGVsdGFZPD0wLGY9YS5kZWx0YVk8MCYmYzw9ZS4kcmVzdWx0cy5oZWlnaHQoKTtkPyhlLiRyZXN1bHRzLnNjcm9sbFRvcCgwKSxhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSk6ZiYmKGUuJHJlc3VsdHMuc2Nyb2xsVG9wKGUuJHJlc3VsdHMuZ2V0KDApLnNjcm9sbEhlaWdodC1lLiRyZXN1bHRzLmhlaWdodCgpKSxhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSl9KSx0aGlzLiRyZXN1bHRzLm9uKFwibW91c2V1cFwiLFwiLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdXCIsZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKSxmPWIuR2V0RGF0YSh0aGlzLFwiZGF0YVwiKTtpZihcInRydWVcIj09PWQuYXR0cihcImFyaWEtc2VsZWN0ZWRcIikpcmV0dXJuIHZvaWQoZS5vcHRpb25zLmdldChcIm11bHRpcGxlXCIpP2UudHJpZ2dlcihcInVuc2VsZWN0XCIse29yaWdpbmFsRXZlbnQ6YyxkYXRhOmZ9KTplLnRyaWdnZXIoXCJjbG9zZVwiLHt9KSk7ZS50cmlnZ2VyKFwic2VsZWN0XCIse29yaWdpbmFsRXZlbnQ6YyxkYXRhOmZ9KX0pLHRoaXMuJHJlc3VsdHMub24oXCJtb3VzZWVudGVyXCIsXCIuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF1cIixmdW5jdGlvbihjKXt2YXIgZD1iLkdldERhdGEodGhpcyxcImRhdGFcIik7ZS5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKS5yZW1vdmVDbGFzcyhcInNlbGVjdDItcmVzdWx0c19fb3B0aW9uLS1oaWdobGlnaHRlZFwiKSxlLnRyaWdnZXIoXCJyZXN1bHRzOmZvY3VzXCIse2RhdGE6ZCxlbGVtZW50OmEodGhpcyl9KX0pfSxjLnByb3RvdHlwZS5nZXRIaWdobGlnaHRlZFJlc3VsdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVzdWx0cy5maW5kKFwiLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uLS1oaWdobGlnaHRlZFwiKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuJHJlc3VsdHMucmVtb3ZlKCl9LGMucHJvdG90eXBlLmVuc3VyZUhpZ2hsaWdodFZpc2libGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO2lmKDAhPT1hLmxlbmd0aCl7dmFyIGI9dGhpcy4kcmVzdWx0cy5maW5kKFwiW2FyaWEtc2VsZWN0ZWRdXCIpLGM9Yi5pbmRleChhKSxkPXRoaXMuJHJlc3VsdHMub2Zmc2V0KCkudG9wLGU9YS5vZmZzZXQoKS50b3AsZj10aGlzLiRyZXN1bHRzLnNjcm9sbFRvcCgpKyhlLWQpLGc9ZS1kO2YtPTIqYS5vdXRlckhlaWdodCghMSksYzw9Mj90aGlzLiRyZXN1bHRzLnNjcm9sbFRvcCgwKTooZz50aGlzLiRyZXN1bHRzLm91dGVySGVpZ2h0KCl8fGc8MCkmJnRoaXMuJHJlc3VsdHMuc2Nyb2xsVG9wKGYpfX0sYy5wcm90b3R5cGUudGVtcGxhdGU9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLm9wdGlvbnMuZ2V0KFwidGVtcGxhdGVSZXN1bHRcIiksZT10aGlzLm9wdGlvbnMuZ2V0KFwiZXNjYXBlTWFya3VwXCIpLGY9ZChiLGMpO251bGw9PWY/Yy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiOlwic3RyaW5nXCI9PXR5cGVvZiBmP2MuaW5uZXJIVE1MPWUoZik6YShjKS5hcHBlbmQoZil9LGN9KSxiLmRlZmluZShcInNlbGVjdDIva2V5c1wiLFtdLGZ1bmN0aW9uKCl7cmV0dXJue0JBQ0tTUEFDRTo4LFRBQjo5LEVOVEVSOjEzLFNISUZUOjE2LENUUkw6MTcsQUxUOjE4LEVTQzoyNyxTUEFDRTozMixQQUdFX1VQOjMzLFBBR0VfRE9XTjozNCxFTkQ6MzUsSE9NRTozNixMRUZUOjM3LFVQOjM4LFJJR0hUOjM5LERPV046NDAsREVMRVRFOjQ2fX0pLGIuZGVmaW5lKFwic2VsZWN0Mi9zZWxlY3Rpb24vYmFzZVwiLFtcImpxdWVyeVwiLFwiLi4vdXRpbHNcIixcIi4uL2tleXNcIl0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXt0aGlzLiRlbGVtZW50PWEsdGhpcy5vcHRpb25zPWIsZC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKX1yZXR1cm4gYi5FeHRlbmQoZCxiLk9ic2VydmFibGUpLGQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBjPWEoJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1zZWxlY3Rpb25cIiByb2xlPVwiY29tYm9ib3hcIiAgYXJpYS1oYXNwb3B1cD1cInRydWVcIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj48L3NwYW4+Jyk7cmV0dXJuIHRoaXMuX3RhYmluZGV4PTAsbnVsbCE9Yi5HZXREYXRhKHRoaXMuJGVsZW1lbnRbMF0sXCJvbGQtdGFiaW5kZXhcIik/dGhpcy5fdGFiaW5kZXg9Yi5HZXREYXRhKHRoaXMuJGVsZW1lbnRbMF0sXCJvbGQtdGFiaW5kZXhcIik6bnVsbCE9dGhpcy4kZWxlbWVudC5hdHRyKFwidGFiaW5kZXhcIikmJih0aGlzLl90YWJpbmRleD10aGlzLiRlbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiKSksYy5hdHRyKFwidGl0bGVcIix0aGlzLiRlbGVtZW50LmF0dHIoXCJ0aXRsZVwiKSksYy5hdHRyKFwidGFiaW5kZXhcIix0aGlzLl90YWJpbmRleCksdGhpcy4kc2VsZWN0aW9uPWMsY30sZC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsZT0oYS5pZCxhLmlkK1wiLXJlc3VsdHNcIik7dGhpcy5jb250YWluZXI9YSx0aGlzLiRzZWxlY3Rpb24ub24oXCJmb2N1c1wiLGZ1bmN0aW9uKGEpe2QudHJpZ2dlcihcImZvY3VzXCIsYSl9KSx0aGlzLiRzZWxlY3Rpb24ub24oXCJibHVyXCIsZnVuY3Rpb24oYSl7ZC5faGFuZGxlQmx1cihhKX0pLHRoaXMuJHNlbGVjdGlvbi5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXtkLnRyaWdnZXIoXCJrZXlwcmVzc1wiLGEpLGEud2hpY2g9PT1jLlNQQUNFJiZhLnByZXZlbnREZWZhdWx0KCl9KSxhLm9uKFwicmVzdWx0czpmb2N1c1wiLGZ1bmN0aW9uKGEpe2QuJHNlbGVjdGlvbi5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsYS5kYXRhLl9yZXN1bHRJZCl9KSxhLm9uKFwic2VsZWN0aW9uOnVwZGF0ZVwiLGZ1bmN0aW9uKGEpe2QudXBkYXRlKGEuZGF0YSl9KSxhLm9uKFwib3BlblwiLGZ1bmN0aW9uKCl7ZC4kc2VsZWN0aW9uLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpLGQuJHNlbGVjdGlvbi5hdHRyKFwiYXJpYS1vd25zXCIsZSksZC5fYXR0YWNoQ2xvc2VIYW5kbGVyKGEpfSksYS5vbihcImNsb3NlXCIsZnVuY3Rpb24oKXtkLiRzZWxlY3Rpb24uYXR0cihcImFyaWEtZXhwYW5kZWRcIixcImZhbHNlXCIpLGQuJHNlbGVjdGlvbi5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLGQuJHNlbGVjdGlvbi5yZW1vdmVBdHRyKFwiYXJpYS1vd25zXCIpLGQuJHNlbGVjdGlvbi5mb2N1cygpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC4kc2VsZWN0aW9uLmZvY3VzKCl9LDApLGQuX2RldGFjaENsb3NlSGFuZGxlcihhKX0pLGEub24oXCJlbmFibGVcIixmdW5jdGlvbigpe2QuJHNlbGVjdGlvbi5hdHRyKFwidGFiaW5kZXhcIixkLl90YWJpbmRleCl9KSxhLm9uKFwiZGlzYWJsZVwiLGZ1bmN0aW9uKCl7ZC4kc2VsZWN0aW9uLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIil9KX0sZC5wcm90b3R5cGUuX2hhbmRsZUJsdXI9ZnVuY3Rpb24oYil7dmFyIGM9dGhpczt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PWMuJHNlbGVjdGlvblswXXx8YS5jb250YWlucyhjLiRzZWxlY3Rpb25bMF0sZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl8fGMudHJpZ2dlcihcImJsdXJcIixiKX0sMSl9LGQucHJvdG90eXBlLl9hdHRhY2hDbG9zZUhhbmRsZXI9ZnVuY3Rpb24oYyl7YShkb2N1bWVudC5ib2R5KS5vbihcIm1vdXNlZG93bi5zZWxlY3QyLlwiK2MuaWQsZnVuY3Rpb24oYyl7dmFyIGQ9YShjLnRhcmdldCksZT1kLmNsb3Nlc3QoXCIuc2VsZWN0MlwiKTthKFwiLnNlbGVjdDIuc2VsZWN0Mi1jb250YWluZXItLW9wZW5cIikuZWFjaChmdW5jdGlvbigpe2EodGhpcyksdGhpcyE9ZVswXSYmYi5HZXREYXRhKHRoaXMsXCJlbGVtZW50XCIpLnNlbGVjdDIoXCJjbG9zZVwiKX0pfSl9LGQucHJvdG90eXBlLl9kZXRhY2hDbG9zZUhhbmRsZXI9ZnVuY3Rpb24oYil7YShkb2N1bWVudC5ib2R5KS5vZmYoXCJtb3VzZWRvd24uc2VsZWN0Mi5cIitiLmlkKX0sZC5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oYSxiKXtiLmZpbmQoXCIuc2VsZWN0aW9uXCIpLmFwcGVuZChhKX0sZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX2RldGFjaENsb3NlSGFuZGxlcih0aGlzLmNvbnRhaW5lcil9LGQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYHVwZGF0ZWAgbWV0aG9kIG11c3QgYmUgZGVmaW5lZCBpbiBjaGlsZCBjbGFzc2VzLlwiKX0sZH0pLGIuZGVmaW5lKFwic2VsZWN0Mi9zZWxlY3Rpb24vc2luZ2xlXCIsW1wianF1ZXJ5XCIsXCIuL2Jhc2VcIixcIi4uL3V0aWxzXCIsXCIuLi9rZXlzXCJdLGZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGMuRXh0ZW5kKGUsYiksZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9ZS5fX3N1cGVyX18ucmVuZGVyLmNhbGwodGhpcyk7cmV0dXJuIGEuYWRkQ2xhc3MoXCJzZWxlY3QyLXNlbGVjdGlvbi0tc2luZ2xlXCIpLGEuaHRtbCgnPHNwYW4gY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fYXJyb3dcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+PGIgcm9sZT1cInByZXNlbnRhdGlvblwiPjwvYj48L3NwYW4+JyksYX0sZS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7ZS5fX3N1cGVyX18uYmluZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQ9YS5pZCtcIi1jb250YWluZXJcIjt0aGlzLiRzZWxlY3Rpb24uZmluZChcIi5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIikuYXR0cihcImlkXCIsZCkuYXR0cihcInJvbGVcIixcInRleHRib3hcIikuYXR0cihcImFyaWEtcmVhZG9ubHlcIixcInRydWVcIiksdGhpcy4kc2VsZWN0aW9uLmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIixkKSx0aGlzLiRzZWxlY3Rpb24ub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXsxPT09YS53aGljaCYmYy50cmlnZ2VyKFwidG9nZ2xlXCIse29yaWdpbmFsRXZlbnQ6YX0pfSksdGhpcy4kc2VsZWN0aW9uLm9uKFwiZm9jdXNcIixmdW5jdGlvbihhKXt9KSx0aGlzLiRzZWxlY3Rpb24ub24oXCJibHVyXCIsZnVuY3Rpb24oYSl7fSksYS5vbihcImZvY3VzXCIsZnVuY3Rpb24oYil7YS5pc09wZW4oKXx8Yy4kc2VsZWN0aW9uLmZvY3VzKCl9KX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRzZWxlY3Rpb24uZmluZChcIi5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIik7YS5lbXB0eSgpLGEucmVtb3ZlQXR0cihcInRpdGxlXCIpfSxlLnByb3RvdHlwZS5kaXNwbGF5PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5vcHRpb25zLmdldChcInRlbXBsYXRlU2VsZWN0aW9uXCIpO3JldHVybiB0aGlzLm9wdGlvbnMuZ2V0KFwiZXNjYXBlTWFya3VwXCIpKGMoYSxiKSl9LGUucHJvdG90eXBlLnNlbGVjdGlvbkNvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiBhKFwiPHNwYW4+PC9zcGFuPlwiKX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe2lmKDA9PT1hLmxlbmd0aClyZXR1cm4gdm9pZCB0aGlzLmNsZWFyKCk7dmFyIGI9YVswXSxjPXRoaXMuJHNlbGVjdGlvbi5maW5kKFwiLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZFwiKSxkPXRoaXMuZGlzcGxheShiLGMpO2MuZW1wdHkoKS5hcHBlbmQoZCksYy5hdHRyKFwidGl0bGVcIixiLnRpdGxlfHxiLnRleHQpfSxlfSksYi5kZWZpbmUoXCJzZWxlY3QyL3NlbGVjdGlvbi9tdWx0aXBsZVwiLFtcImpxdWVyeVwiLFwiLi9iYXNlXCIsXCIuLi91dGlsc1wiXSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe2QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gYy5FeHRlbmQoZCxiKSxkLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1kLl9fc3VwZXJfXy5yZW5kZXIuY2FsbCh0aGlzKTtyZXR1cm4gYS5hZGRDbGFzcyhcInNlbGVjdDItc2VsZWN0aW9uLS1tdWx0aXBsZVwiKSxhLmh0bWwoJzx1bCBjbGFzcz1cInNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZFwiPjwvdWw+JyksYX0sZC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihiLGUpe3ZhciBmPXRoaXM7ZC5fX3N1cGVyX18uYmluZC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy4kc2VsZWN0aW9uLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtmLnRyaWdnZXIoXCJ0b2dnbGVcIix7b3JpZ2luYWxFdmVudDphfSl9KSx0aGlzLiRzZWxlY3Rpb24ub24oXCJjbGlja1wiLFwiLnNlbGVjdDItc2VsZWN0aW9uX19jaG9pY2VfX3JlbW92ZVwiLGZ1bmN0aW9uKGIpe2lmKCFmLm9wdGlvbnMuZ2V0KFwiZGlzYWJsZWRcIikpe3ZhciBkPWEodGhpcyksZT1kLnBhcmVudCgpLGc9Yy5HZXREYXRhKGVbMF0sXCJkYXRhXCIpO2YudHJpZ2dlcihcInVuc2VsZWN0XCIse29yaWdpbmFsRXZlbnQ6YixkYXRhOmd9KX19KX0sZC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRzZWxlY3Rpb24uZmluZChcIi5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIik7YS5lbXB0eSgpLGEucmVtb3ZlQXR0cihcInRpdGxlXCIpfSxkLnByb3RvdHlwZS5kaXNwbGF5PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5vcHRpb25zLmdldChcInRlbXBsYXRlU2VsZWN0aW9uXCIpO3JldHVybiB0aGlzLm9wdGlvbnMuZ2V0KFwiZXNjYXBlTWFya3VwXCIpKGMoYSxiKSl9LGQucHJvdG90eXBlLnNlbGVjdGlvbkNvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiBhKCc8bGkgY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlXCI+PHNwYW4gY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlX19yZW1vdmVcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+JnRpbWVzOzwvc3Bhbj48L2xpPicpfSxkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7aWYodGhpcy5jbGVhcigpLDAhPT1hLmxlbmd0aCl7Zm9yKHZhciBiPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXSxmPXRoaXMuc2VsZWN0aW9uQ29udGFpbmVyKCksZz10aGlzLmRpc3BsYXkoZSxmKTtmLmFwcGVuZChnKSxmLmF0dHIoXCJ0aXRsZVwiLGUudGl0bGV8fGUudGV4dCksYy5TdG9yZURhdGEoZlswXSxcImRhdGFcIixlKSxiLnB1c2goZil9dmFyIGg9dGhpcy4kc2VsZWN0aW9uLmZpbmQoXCIuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkXCIpO2MuYXBwZW5kTWFueShoLGIpfX0sZH0pLGIuZGVmaW5lKFwic2VsZWN0Mi9zZWxlY3Rpb24vcGxhY2Vob2xkZXJcIixbXCIuLi91dGlsc1wiXSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjKXt0aGlzLnBsYWNlaG9sZGVyPXRoaXMubm9ybWFsaXplUGxhY2Vob2xkZXIoYy5nZXQoXCJwbGFjZWhvbGRlclwiKSksYS5jYWxsKHRoaXMsYixjKX1yZXR1cm4gYi5wcm90b3R5cGUubm9ybWFsaXplUGxhY2Vob2xkZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGI9e2lkOlwiXCIsdGV4dDpifSksYn0sYi5wcm90b3R5cGUuY3JlYXRlUGxhY2Vob2xkZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNlbGVjdGlvbkNvbnRhaW5lcigpO3JldHVybiBjLmh0bWwodGhpcy5kaXNwbGF5KGIpKSxjLmFkZENsYXNzKFwic2VsZWN0Mi1zZWxlY3Rpb25fX3BsYWNlaG9sZGVyXCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZVwiKSxjfSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz0xPT1iLmxlbmd0aCYmYlswXS5pZCE9dGhpcy5wbGFjZWhvbGRlci5pZDtpZihiLmxlbmd0aD4xfHxjKXJldHVybiBhLmNhbGwodGhpcyxiKTt0aGlzLmNsZWFyKCk7dmFyIGQ9dGhpcy5jcmVhdGVQbGFjZWhvbGRlcih0aGlzLnBsYWNlaG9sZGVyKTt0aGlzLiRzZWxlY3Rpb24uZmluZChcIi5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIikuYXBwZW5kKGQpfSxifSksYi5kZWZpbmUoXCJzZWxlY3QyL3NlbGVjdGlvbi9hbGxvd0NsZWFyXCIsW1wianF1ZXJ5XCIsXCIuLi9rZXlzXCIsXCIuLi91dGlsc1wiXSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe31yZXR1cm4gZC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpczthLmNhbGwodGhpcyxiLGMpLG51bGw9PXRoaXMucGxhY2Vob2xkZXImJnRoaXMub3B0aW9ucy5nZXQoXCJkZWJ1Z1wiKSYmd2luZG93LmNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IoXCJTZWxlY3QyOiBUaGUgYGFsbG93Q2xlYXJgIG9wdGlvbiBzaG91bGQgYmUgdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIHRoZSBgcGxhY2Vob2xkZXJgIG9wdGlvbi5cIiksdGhpcy4kc2VsZWN0aW9uLm9uKFwibW91c2Vkb3duXCIsXCIuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyXCIsZnVuY3Rpb24oYSl7ZC5faGFuZGxlQ2xlYXIoYSl9KSxiLm9uKFwia2V5cHJlc3NcIixmdW5jdGlvbihhKXtkLl9oYW5kbGVLZXlib2FyZENsZWFyKGEsYil9KX0sZC5wcm90b3R5cGUuX2hhbmRsZUNsZWFyPWZ1bmN0aW9uKGEsYil7aWYoIXRoaXMub3B0aW9ucy5nZXQoXCJkaXNhYmxlZFwiKSl7dmFyIGQ9dGhpcy4kc2VsZWN0aW9uLmZpbmQoXCIuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyXCIpO2lmKDAhPT1kLmxlbmd0aCl7Yi5zdG9wUHJvcGFnYXRpb24oKTt2YXIgZT1jLkdldERhdGEoZFswXSxcImRhdGFcIiksZj10aGlzLiRlbGVtZW50LnZhbCgpO3RoaXMuJGVsZW1lbnQudmFsKHRoaXMucGxhY2Vob2xkZXIuaWQpO3ZhciBnPXtkYXRhOmV9O2lmKHRoaXMudHJpZ2dlcihcImNsZWFyXCIsZyksZy5wcmV2ZW50ZWQpcmV0dXJuIHZvaWQgdGhpcy4kZWxlbWVudC52YWwoZik7Zm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspaWYoZz17ZGF0YTplW2hdfSx0aGlzLnRyaWdnZXIoXCJ1bnNlbGVjdFwiLGcpLGcucHJldmVudGVkKXJldHVybiB2b2lkIHRoaXMuJGVsZW1lbnQudmFsKGYpO3RoaXMuJGVsZW1lbnQudHJpZ2dlcihcImNoYW5nZVwiKSx0aGlzLnRyaWdnZXIoXCJ0b2dnbGVcIix7fSl9fX0sZC5wcm90b3R5cGUuX2hhbmRsZUtleWJvYXJkQ2xlYXI9ZnVuY3Rpb24oYSxjLGQpe2QuaXNPcGVuKCl8fGMud2hpY2ghPWIuREVMRVRFJiZjLndoaWNoIT1iLkJBQ0tTUEFDRXx8dGhpcy5faGFuZGxlQ2xlYXIoYyl9LGQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihiLGQpe2lmKGIuY2FsbCh0aGlzLGQpLCEodGhpcy4kc2VsZWN0aW9uLmZpbmQoXCIuc2VsZWN0Mi1zZWxlY3Rpb25fX3BsYWNlaG9sZGVyXCIpLmxlbmd0aD4wfHwwPT09ZC5sZW5ndGgpKXt2YXIgZT1hKCc8c3BhbiBjbGFzcz1cInNlbGVjdDItc2VsZWN0aW9uX19jbGVhclwiPiZ0aW1lczs8L3NwYW4+Jyk7Yy5TdG9yZURhdGEoZVswXSxcImRhdGFcIixkKSx0aGlzLiRzZWxlY3Rpb24uZmluZChcIi5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIikucHJlcGVuZChlKX19LGR9KSxiLmRlZmluZShcInNlbGVjdDIvc2VsZWN0aW9uL3NlYXJjaFwiLFtcImpxdWVyeVwiLFwiLi4vdXRpbHNcIixcIi4uL2tleXNcIl0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiLGMpe2EuY2FsbCh0aGlzLGIsYyl9cmV0dXJuIGQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihiKXt2YXIgYz1hKCc8bGkgY2xhc3M9XCJzZWxlY3QyLXNlYXJjaCBzZWxlY3QyLXNlYXJjaC0taW5saW5lXCI+PGlucHV0IGNsYXNzPVwic2VsZWN0Mi1zZWFyY2hfX2ZpZWxkXCIgdHlwZT1cInNlYXJjaFwiIHRhYmluZGV4PVwiLTFcIiBhdXRvY29tcGxldGU9XCJvZmZcIiBhdXRvY29ycmVjdD1cIm9mZlwiIGF1dG9jYXBpdGFsaXplPVwibm9uZVwiIHNwZWxsY2hlY2s9XCJmYWxzZVwiIHJvbGU9XCJ0ZXh0Ym94XCIgYXJpYS1hdXRvY29tcGxldGU9XCJsaXN0XCIgLz48L2xpPicpO3RoaXMuJHNlYXJjaENvbnRhaW5lcj1jLHRoaXMuJHNlYXJjaD1jLmZpbmQoXCJpbnB1dFwiKTt2YXIgZD1iLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMuX3RyYW5zZmVyVGFiSW5kZXgoKSxkfSxkLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsZCxlKXt2YXIgZj10aGlzO2EuY2FsbCh0aGlzLGQsZSksZC5vbihcIm9wZW5cIixmdW5jdGlvbigpe2YuJHNlYXJjaC50cmlnZ2VyKFwiZm9jdXNcIil9KSxkLm9uKFwiY2xvc2VcIixmdW5jdGlvbigpe2YuJHNlYXJjaC52YWwoXCJcIiksZi4kc2VhcmNoLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiksZi4kc2VhcmNoLnRyaWdnZXIoXCJmb2N1c1wiKX0pLGQub24oXCJlbmFibGVcIixmdW5jdGlvbigpe2YuJHNlYXJjaC5wcm9wKFwiZGlzYWJsZWRcIiwhMSksZi5fdHJhbnNmZXJUYWJJbmRleCgpfSksZC5vbihcImRpc2FibGVcIixmdW5jdGlvbigpe2YuJHNlYXJjaC5wcm9wKFwiZGlzYWJsZWRcIiwhMCl9KSxkLm9uKFwiZm9jdXNcIixmdW5jdGlvbihhKXtmLiRzZWFyY2gudHJpZ2dlcihcImZvY3VzXCIpfSksZC5vbihcInJlc3VsdHM6Zm9jdXNcIixmdW5jdGlvbihhKXtmLiRzZWFyY2guYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLGEuaWQpfSksdGhpcy4kc2VsZWN0aW9uLm9uKFwiZm9jdXNpblwiLFwiLnNlbGVjdDItc2VhcmNoLS1pbmxpbmVcIixmdW5jdGlvbihhKXtmLnRyaWdnZXIoXCJmb2N1c1wiLGEpfSksdGhpcy4kc2VsZWN0aW9uLm9uKFwiZm9jdXNvdXRcIixcIi5zZWxlY3QyLXNlYXJjaC0taW5saW5lXCIsZnVuY3Rpb24oYSl7Zi5faGFuZGxlQmx1cihhKX0pLHRoaXMuJHNlbGVjdGlvbi5vbihcImtleWRvd25cIixcIi5zZWxlY3QyLXNlYXJjaC0taW5saW5lXCIsZnVuY3Rpb24oYSl7aWYoYS5zdG9wUHJvcGFnYXRpb24oKSxmLnRyaWdnZXIoXCJrZXlwcmVzc1wiLGEpLGYuX2tleVVwUHJldmVudGVkPWEuaXNEZWZhdWx0UHJldmVudGVkKCksYS53aGljaD09PWMuQkFDS1NQQUNFJiZcIlwiPT09Zi4kc2VhcmNoLnZhbCgpKXt2YXIgZD1mLiRzZWFyY2hDb250YWluZXIucHJldihcIi5zZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlXCIpO2lmKGQubGVuZ3RoPjApe3ZhciBlPWIuR2V0RGF0YShkWzBdLFwiZGF0YVwiKTtmLnNlYXJjaFJlbW92ZUNob2ljZShlKSxhLnByZXZlbnREZWZhdWx0KCl9fX0pO3ZhciBnPWRvY3VtZW50LmRvY3VtZW50TW9kZSxoPWcmJmc8PTExO3RoaXMuJHNlbGVjdGlvbi5vbihcImlucHV0LnNlYXJjaGNoZWNrXCIsXCIuc2VsZWN0Mi1zZWFyY2gtLWlubGluZVwiLGZ1bmN0aW9uKGEpe2lmKGgpcmV0dXJuIHZvaWQgZi4kc2VsZWN0aW9uLm9mZihcImlucHV0LnNlYXJjaCBpbnB1dC5zZWFyY2hjaGVja1wiKTtmLiRzZWxlY3Rpb24ub2ZmKFwia2V5dXAuc2VhcmNoXCIpfSksdGhpcy4kc2VsZWN0aW9uLm9uKFwia2V5dXAuc2VhcmNoIGlucHV0LnNlYXJjaFwiLFwiLnNlbGVjdDItc2VhcmNoLS1pbmxpbmVcIixmdW5jdGlvbihhKXtpZihoJiZcImlucHV0XCI9PT1hLnR5cGUpcmV0dXJuIHZvaWQgZi4kc2VsZWN0aW9uLm9mZihcImlucHV0LnNlYXJjaCBpbnB1dC5zZWFyY2hjaGVja1wiKTt2YXIgYj1hLndoaWNoO2IhPWMuU0hJRlQmJmIhPWMuQ1RSTCYmYiE9Yy5BTFQmJmIhPWMuVEFCJiZmLmhhbmRsZVNlYXJjaChhKX0pfSxkLnByb3RvdHlwZS5fdHJhbnNmZXJUYWJJbmRleD1mdW5jdGlvbihhKXt0aGlzLiRzZWFyY2guYXR0cihcInRhYmluZGV4XCIsdGhpcy4kc2VsZWN0aW9uLmF0dHIoXCJ0YWJpbmRleFwiKSksdGhpcy4kc2VsZWN0aW9uLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIil9LGQucHJvdG90eXBlLmNyZWF0ZVBsYWNlaG9sZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy4kc2VhcmNoLmF0dHIoXCJwbGFjZWhvbGRlclwiLGIudGV4dCl9LGQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJHNlYXJjaFswXT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZih0aGlzLiRzZWFyY2guYXR0cihcInBsYWNlaG9sZGVyXCIsXCJcIiksYS5jYWxsKHRoaXMsYiksdGhpcy4kc2VsZWN0aW9uLmZpbmQoXCIuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkXCIpLmFwcGVuZCh0aGlzLiRzZWFyY2hDb250YWluZXIpLHRoaXMucmVzaXplU2VhcmNoKCksYyl7dGhpcy4kZWxlbWVudC5maW5kKFwiW2RhdGEtc2VsZWN0Mi10YWddXCIpLmxlbmd0aD90aGlzLiRlbGVtZW50LmZvY3VzKCk6dGhpcy4kc2VhcmNoLmZvY3VzKCl9fSxkLnByb3RvdHlwZS5oYW5kbGVTZWFyY2g9ZnVuY3Rpb24oKXtpZih0aGlzLnJlc2l6ZVNlYXJjaCgpLCF0aGlzLl9rZXlVcFByZXZlbnRlZCl7dmFyIGE9dGhpcy4kc2VhcmNoLnZhbCgpO3RoaXMudHJpZ2dlcihcInF1ZXJ5XCIse3Rlcm06YX0pfXRoaXMuX2tleVVwUHJldmVudGVkPSExfSxkLnByb3RvdHlwZS5zZWFyY2hSZW1vdmVDaG9pY2U9ZnVuY3Rpb24oYSxiKXt0aGlzLnRyaWdnZXIoXCJ1bnNlbGVjdFwiLHtkYXRhOmJ9KSx0aGlzLiRzZWFyY2gudmFsKGIudGV4dCksdGhpcy5oYW5kbGVTZWFyY2goKX0sZC5wcm90b3R5cGUucmVzaXplU2VhcmNoPWZ1bmN0aW9uKCl7dGhpcy4kc2VhcmNoLmNzcyhcIndpZHRoXCIsXCIyNXB4XCIpO3ZhciBhPVwiXCI7aWYoXCJcIiE9PXRoaXMuJHNlYXJjaC5hdHRyKFwicGxhY2Vob2xkZXJcIikpYT10aGlzLiRzZWxlY3Rpb24uZmluZChcIi5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIikuaW5uZXJXaWR0aCgpO2Vsc2V7YT0uNzUqKHRoaXMuJHNlYXJjaC52YWwoKS5sZW5ndGgrMSkrXCJlbVwifXRoaXMuJHNlYXJjaC5jc3MoXCJ3aWR0aFwiLGEpfSxkfSksYi5kZWZpbmUoXCJzZWxlY3QyL3NlbGVjdGlvbi9ldmVudFJlbGF5XCIsW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9cmV0dXJuIGIucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPXRoaXMsZj1bXCJvcGVuXCIsXCJvcGVuaW5nXCIsXCJjbG9zZVwiLFwiY2xvc2luZ1wiLFwic2VsZWN0XCIsXCJzZWxlY3RpbmdcIixcInVuc2VsZWN0XCIsXCJ1bnNlbGVjdGluZ1wiLFwiY2xlYXJcIixcImNsZWFyaW5nXCJdLGc9W1wib3BlbmluZ1wiLFwiY2xvc2luZ1wiLFwic2VsZWN0aW5nXCIsXCJ1bnNlbGVjdGluZ1wiLFwiY2xlYXJpbmdcIl07Yi5jYWxsKHRoaXMsYyxkKSxjLm9uKFwiKlwiLGZ1bmN0aW9uKGIsYyl7aWYoLTEhPT1hLmluQXJyYXkoYixmKSl7Yz1jfHx7fTt2YXIgZD1hLkV2ZW50KFwic2VsZWN0MjpcIitiLHtwYXJhbXM6Y30pO2UuJGVsZW1lbnQudHJpZ2dlcihkKSwtMSE9PWEuaW5BcnJheShiLGcpJiYoYy5wcmV2ZW50ZWQ9ZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl9fSl9LGJ9KSxiLmRlZmluZShcInNlbGVjdDIvdHJhbnNsYXRpb25cIixbXCJqcXVlcnlcIixcInJlcXVpcmVcIl0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3RoaXMuZGljdD1hfHx7fX1yZXR1cm4gYy5wcm90b3R5cGUuYWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGljdH0sYy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRpY3RbYV19LGMucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihiKXt0aGlzLmRpY3Q9YS5leHRlbmQoe30sYi5hbGwoKSx0aGlzLmRpY3QpfSxjLl9jYWNoZT17fSxjLmxvYWRQYXRoPWZ1bmN0aW9uKGEpe2lmKCEoYSBpbiBjLl9jYWNoZSkpe3ZhciBkPWIoYSk7Yy5fY2FjaGVbYV09ZH1yZXR1cm4gbmV3IGMoYy5fY2FjaGVbYV0pfSxjfSksYi5kZWZpbmUoXCJzZWxlY3QyL2RpYWNyaXRpY3NcIixbXSxmdW5jdGlvbigpe3JldHVybntcIuKStlwiOlwiQVwiLFwi77yhXCI6XCJBXCIsXCLDgFwiOlwiQVwiLFwiw4FcIjpcIkFcIixcIsOCXCI6XCJBXCIsXCLhuqZcIjpcIkFcIixcIuG6pFwiOlwiQVwiLFwi4bqqXCI6XCJBXCIsXCLhuqhcIjpcIkFcIixcIsODXCI6XCJBXCIsXCLEgFwiOlwiQVwiLFwixIJcIjpcIkFcIixcIuG6sFwiOlwiQVwiLFwi4bquXCI6XCJBXCIsXCLhurRcIjpcIkFcIixcIuG6slwiOlwiQVwiLFwiyKZcIjpcIkFcIixcIsegXCI6XCJBXCIsXCLDhFwiOlwiQVwiLFwix55cIjpcIkFcIixcIuG6olwiOlwiQVwiLFwiw4VcIjpcIkFcIixcIse6XCI6XCJBXCIsXCLHjVwiOlwiQVwiLFwiyIBcIjpcIkFcIixcIsiCXCI6XCJBXCIsXCLhuqBcIjpcIkFcIixcIuG6rFwiOlwiQVwiLFwi4bq2XCI6XCJBXCIsXCLhuIBcIjpcIkFcIixcIsSEXCI6XCJBXCIsXCLIulwiOlwiQVwiLFwi4rGvXCI6XCJBXCIsXCLqnLJcIjpcIkFBXCIsXCLDhlwiOlwiQUVcIixcIse8XCI6XCJBRVwiLFwix6JcIjpcIkFFXCIsXCLqnLRcIjpcIkFPXCIsXCLqnLZcIjpcIkFVXCIsXCLqnLhcIjpcIkFWXCIsXCLqnLpcIjpcIkFWXCIsXCLqnLxcIjpcIkFZXCIsXCLikrdcIjpcIkJcIixcIu+8olwiOlwiQlwiLFwi4biCXCI6XCJCXCIsXCLhuIRcIjpcIkJcIixcIuG4hlwiOlwiQlwiLFwiyYNcIjpcIkJcIixcIsaCXCI6XCJCXCIsXCLGgVwiOlwiQlwiLFwi4pK4XCI6XCJDXCIsXCLvvKNcIjpcIkNcIixcIsSGXCI6XCJDXCIsXCLEiFwiOlwiQ1wiLFwixIpcIjpcIkNcIixcIsSMXCI6XCJDXCIsXCLDh1wiOlwiQ1wiLFwi4biIXCI6XCJDXCIsXCLGh1wiOlwiQ1wiLFwiyLtcIjpcIkNcIixcIuqcvlwiOlwiQ1wiLFwi4pK5XCI6XCJEXCIsXCLvvKRcIjpcIkRcIixcIuG4ilwiOlwiRFwiLFwixI5cIjpcIkRcIixcIuG4jFwiOlwiRFwiLFwi4biQXCI6XCJEXCIsXCLhuJJcIjpcIkRcIixcIuG4jlwiOlwiRFwiLFwixJBcIjpcIkRcIixcIsaLXCI6XCJEXCIsXCLGilwiOlwiRFwiLFwixolcIjpcIkRcIixcIuqduVwiOlwiRFwiLFwix7FcIjpcIkRaXCIsXCLHhFwiOlwiRFpcIixcIseyXCI6XCJEelwiLFwix4VcIjpcIkR6XCIsXCLikrpcIjpcIkVcIixcIu+8pVwiOlwiRVwiLFwiw4hcIjpcIkVcIixcIsOJXCI6XCJFXCIsXCLDilwiOlwiRVwiLFwi4buAXCI6XCJFXCIsXCLhur5cIjpcIkVcIixcIuG7hFwiOlwiRVwiLFwi4buCXCI6XCJFXCIsXCLhurxcIjpcIkVcIixcIsSSXCI6XCJFXCIsXCLhuJRcIjpcIkVcIixcIuG4llwiOlwiRVwiLFwixJRcIjpcIkVcIixcIsSWXCI6XCJFXCIsXCLDi1wiOlwiRVwiLFwi4bq6XCI6XCJFXCIsXCLEmlwiOlwiRVwiLFwiyIRcIjpcIkVcIixcIsiGXCI6XCJFXCIsXCLhurhcIjpcIkVcIixcIuG7hlwiOlwiRVwiLFwiyKhcIjpcIkVcIixcIuG4nFwiOlwiRVwiLFwixJhcIjpcIkVcIixcIuG4mFwiOlwiRVwiLFwi4biaXCI6XCJFXCIsXCLGkFwiOlwiRVwiLFwixo5cIjpcIkVcIixcIuKSu1wiOlwiRlwiLFwi77ymXCI6XCJGXCIsXCLhuJ5cIjpcIkZcIixcIsaRXCI6XCJGXCIsXCLqnbtcIjpcIkZcIixcIuKSvFwiOlwiR1wiLFwi77ynXCI6XCJHXCIsXCLHtFwiOlwiR1wiLFwixJxcIjpcIkdcIixcIuG4oFwiOlwiR1wiLFwixJ5cIjpcIkdcIixcIsSgXCI6XCJHXCIsXCLHplwiOlwiR1wiLFwixKJcIjpcIkdcIixcIsekXCI6XCJHXCIsXCLGk1wiOlwiR1wiLFwi6p6gXCI6XCJHXCIsXCLqnb1cIjpcIkdcIixcIuqdvlwiOlwiR1wiLFwi4pK9XCI6XCJIXCIsXCLvvKhcIjpcIkhcIixcIsSkXCI6XCJIXCIsXCLhuKJcIjpcIkhcIixcIuG4plwiOlwiSFwiLFwiyJ5cIjpcIkhcIixcIuG4pFwiOlwiSFwiLFwi4bioXCI6XCJIXCIsXCLhuKpcIjpcIkhcIixcIsSmXCI6XCJIXCIsXCLisadcIjpcIkhcIixcIuKxtVwiOlwiSFwiLFwi6p6NXCI6XCJIXCIsXCLikr5cIjpcIklcIixcIu+8qVwiOlwiSVwiLFwiw4xcIjpcIklcIixcIsONXCI6XCJJXCIsXCLDjlwiOlwiSVwiLFwixKhcIjpcIklcIixcIsSqXCI6XCJJXCIsXCLErFwiOlwiSVwiLFwixLBcIjpcIklcIixcIsOPXCI6XCJJXCIsXCLhuK5cIjpcIklcIixcIuG7iFwiOlwiSVwiLFwix49cIjpcIklcIixcIsiIXCI6XCJJXCIsXCLIilwiOlwiSVwiLFwi4buKXCI6XCJJXCIsXCLErlwiOlwiSVwiLFwi4bisXCI6XCJJXCIsXCLGl1wiOlwiSVwiLFwi4pK/XCI6XCJKXCIsXCLvvKpcIjpcIkpcIixcIsS0XCI6XCJKXCIsXCLJiFwiOlwiSlwiLFwi4pOAXCI6XCJLXCIsXCLvvKtcIjpcIktcIixcIuG4sFwiOlwiS1wiLFwix6hcIjpcIktcIixcIuG4slwiOlwiS1wiLFwixLZcIjpcIktcIixcIuG4tFwiOlwiS1wiLFwixphcIjpcIktcIixcIuKxqVwiOlwiS1wiLFwi6p2AXCI6XCJLXCIsXCLqnYJcIjpcIktcIixcIuqdhFwiOlwiS1wiLFwi6p6iXCI6XCJLXCIsXCLik4FcIjpcIkxcIixcIu+8rFwiOlwiTFwiLFwixL9cIjpcIkxcIixcIsS5XCI6XCJMXCIsXCLEvVwiOlwiTFwiLFwi4bi2XCI6XCJMXCIsXCLhuLhcIjpcIkxcIixcIsS7XCI6XCJMXCIsXCLhuLxcIjpcIkxcIixcIuG4ulwiOlwiTFwiLFwixYFcIjpcIkxcIixcIsi9XCI6XCJMXCIsXCLisaJcIjpcIkxcIixcIuKxoFwiOlwiTFwiLFwi6p2IXCI6XCJMXCIsXCLqnYZcIjpcIkxcIixcIuqegFwiOlwiTFwiLFwix4dcIjpcIkxKXCIsXCLHiFwiOlwiTGpcIixcIuKTglwiOlwiTVwiLFwi77ytXCI6XCJNXCIsXCLhuL5cIjpcIk1cIixcIuG5gFwiOlwiTVwiLFwi4bmCXCI6XCJNXCIsXCLisa5cIjpcIk1cIixcIsacXCI6XCJNXCIsXCLik4NcIjpcIk5cIixcIu+8rlwiOlwiTlwiLFwix7hcIjpcIk5cIixcIsWDXCI6XCJOXCIsXCLDkVwiOlwiTlwiLFwi4bmEXCI6XCJOXCIsXCLFh1wiOlwiTlwiLFwi4bmGXCI6XCJOXCIsXCLFhVwiOlwiTlwiLFwi4bmKXCI6XCJOXCIsXCLhuYhcIjpcIk5cIixcIsigXCI6XCJOXCIsXCLGnVwiOlwiTlwiLFwi6p6QXCI6XCJOXCIsXCLqnqRcIjpcIk5cIixcIseKXCI6XCJOSlwiLFwix4tcIjpcIk5qXCIsXCLik4RcIjpcIk9cIixcIu+8r1wiOlwiT1wiLFwiw5JcIjpcIk9cIixcIsOTXCI6XCJPXCIsXCLDlFwiOlwiT1wiLFwi4buSXCI6XCJPXCIsXCLhu5BcIjpcIk9cIixcIuG7llwiOlwiT1wiLFwi4buUXCI6XCJPXCIsXCLDlVwiOlwiT1wiLFwi4bmMXCI6XCJPXCIsXCLIrFwiOlwiT1wiLFwi4bmOXCI6XCJPXCIsXCLFjFwiOlwiT1wiLFwi4bmQXCI6XCJPXCIsXCLhuZJcIjpcIk9cIixcIsWOXCI6XCJPXCIsXCLIrlwiOlwiT1wiLFwiyLBcIjpcIk9cIixcIsOWXCI6XCJPXCIsXCLIqlwiOlwiT1wiLFwi4buOXCI6XCJPXCIsXCLFkFwiOlwiT1wiLFwix5FcIjpcIk9cIixcIsiMXCI6XCJPXCIsXCLIjlwiOlwiT1wiLFwixqBcIjpcIk9cIixcIuG7nFwiOlwiT1wiLFwi4buaXCI6XCJPXCIsXCLhu6BcIjpcIk9cIixcIuG7nlwiOlwiT1wiLFwi4buiXCI6XCJPXCIsXCLhu4xcIjpcIk9cIixcIuG7mFwiOlwiT1wiLFwix6pcIjpcIk9cIixcIsesXCI6XCJPXCIsXCLDmFwiOlwiT1wiLFwix75cIjpcIk9cIixcIsaGXCI6XCJPXCIsXCLGn1wiOlwiT1wiLFwi6p2KXCI6XCJPXCIsXCLqnYxcIjpcIk9cIixcIsaiXCI6XCJPSVwiLFwi6p2OXCI6XCJPT1wiLFwiyKJcIjpcIk9VXCIsXCLik4VcIjpcIlBcIixcIu+8sFwiOlwiUFwiLFwi4bmUXCI6XCJQXCIsXCLhuZZcIjpcIlBcIixcIsakXCI6XCJQXCIsXCLisaNcIjpcIlBcIixcIuqdkFwiOlwiUFwiLFwi6p2SXCI6XCJQXCIsXCLqnZRcIjpcIlBcIixcIuKThlwiOlwiUVwiLFwi77yxXCI6XCJRXCIsXCLqnZZcIjpcIlFcIixcIuqdmFwiOlwiUVwiLFwiyYpcIjpcIlFcIixcIuKTh1wiOlwiUlwiLFwi77yyXCI6XCJSXCIsXCLFlFwiOlwiUlwiLFwi4bmYXCI6XCJSXCIsXCLFmFwiOlwiUlwiLFwiyJBcIjpcIlJcIixcIsiSXCI6XCJSXCIsXCLhuZpcIjpcIlJcIixcIuG5nFwiOlwiUlwiLFwixZZcIjpcIlJcIixcIuG5nlwiOlwiUlwiLFwiyYxcIjpcIlJcIixcIuKxpFwiOlwiUlwiLFwi6p2aXCI6XCJSXCIsXCLqnqZcIjpcIlJcIixcIuqeglwiOlwiUlwiLFwi4pOIXCI6XCJTXCIsXCLvvLNcIjpcIlNcIixcIuG6nlwiOlwiU1wiLFwixZpcIjpcIlNcIixcIuG5pFwiOlwiU1wiLFwixZxcIjpcIlNcIixcIuG5oFwiOlwiU1wiLFwixaBcIjpcIlNcIixcIuG5plwiOlwiU1wiLFwi4bmiXCI6XCJTXCIsXCLhuahcIjpcIlNcIixcIsiYXCI6XCJTXCIsXCLFnlwiOlwiU1wiLFwi4rG+XCI6XCJTXCIsXCLqnqhcIjpcIlNcIixcIuqehFwiOlwiU1wiLFwi4pOJXCI6XCJUXCIsXCLvvLRcIjpcIlRcIixcIuG5qlwiOlwiVFwiLFwixaRcIjpcIlRcIixcIuG5rFwiOlwiVFwiLFwiyJpcIjpcIlRcIixcIsWiXCI6XCJUXCIsXCLhubBcIjpcIlRcIixcIuG5rlwiOlwiVFwiLFwixaZcIjpcIlRcIixcIsasXCI6XCJUXCIsXCLGrlwiOlwiVFwiLFwiyL5cIjpcIlRcIixcIuqehlwiOlwiVFwiLFwi6pyoXCI6XCJUWlwiLFwi4pOKXCI6XCJVXCIsXCLvvLVcIjpcIlVcIixcIsOZXCI6XCJVXCIsXCLDmlwiOlwiVVwiLFwiw5tcIjpcIlVcIixcIsWoXCI6XCJVXCIsXCLhubhcIjpcIlVcIixcIsWqXCI6XCJVXCIsXCLhubpcIjpcIlVcIixcIsWsXCI6XCJVXCIsXCLDnFwiOlwiVVwiLFwix5tcIjpcIlVcIixcIseXXCI6XCJVXCIsXCLHlVwiOlwiVVwiLFwix5lcIjpcIlVcIixcIuG7plwiOlwiVVwiLFwixa5cIjpcIlVcIixcIsWwXCI6XCJVXCIsXCLHk1wiOlwiVVwiLFwiyJRcIjpcIlVcIixcIsiWXCI6XCJVXCIsXCLGr1wiOlwiVVwiLFwi4buqXCI6XCJVXCIsXCLhu6hcIjpcIlVcIixcIuG7rlwiOlwiVVwiLFwi4busXCI6XCJVXCIsXCLhu7BcIjpcIlVcIixcIuG7pFwiOlwiVVwiLFwi4bmyXCI6XCJVXCIsXCLFslwiOlwiVVwiLFwi4bm2XCI6XCJVXCIsXCLhubRcIjpcIlVcIixcIsmEXCI6XCJVXCIsXCLik4tcIjpcIlZcIixcIu+8tlwiOlwiVlwiLFwi4bm8XCI6XCJWXCIsXCLhub5cIjpcIlZcIixcIsayXCI6XCJWXCIsXCLqnZ5cIjpcIlZcIixcIsmFXCI6XCJWXCIsXCLqnaBcIjpcIlZZXCIsXCLik4xcIjpcIldcIixcIu+8t1wiOlwiV1wiLFwi4bqAXCI6XCJXXCIsXCLhuoJcIjpcIldcIixcIsW0XCI6XCJXXCIsXCLhuoZcIjpcIldcIixcIuG6hFwiOlwiV1wiLFwi4bqIXCI6XCJXXCIsXCLisbJcIjpcIldcIixcIuKTjVwiOlwiWFwiLFwi77y4XCI6XCJYXCIsXCLhuopcIjpcIlhcIixcIuG6jFwiOlwiWFwiLFwi4pOOXCI6XCJZXCIsXCLvvLlcIjpcIllcIixcIuG7slwiOlwiWVwiLFwiw51cIjpcIllcIixcIsW2XCI6XCJZXCIsXCLhu7hcIjpcIllcIixcIsiyXCI6XCJZXCIsXCLhuo5cIjpcIllcIixcIsW4XCI6XCJZXCIsXCLhu7ZcIjpcIllcIixcIuG7tFwiOlwiWVwiLFwixrNcIjpcIllcIixcIsmOXCI6XCJZXCIsXCLhu75cIjpcIllcIixcIuKTj1wiOlwiWlwiLFwi77y6XCI6XCJaXCIsXCLFuVwiOlwiWlwiLFwi4bqQXCI6XCJaXCIsXCLFu1wiOlwiWlwiLFwixb1cIjpcIlpcIixcIuG6klwiOlwiWlwiLFwi4bqUXCI6XCJaXCIsXCLGtVwiOlwiWlwiLFwiyKRcIjpcIlpcIixcIuKxv1wiOlwiWlwiLFwi4rGrXCI6XCJaXCIsXCLqnaJcIjpcIlpcIixcIuKTkFwiOlwiYVwiLFwi772BXCI6XCJhXCIsXCLhuppcIjpcImFcIixcIsOgXCI6XCJhXCIsXCLDoVwiOlwiYVwiLFwiw6JcIjpcImFcIixcIuG6p1wiOlwiYVwiLFwi4bqlXCI6XCJhXCIsXCLhuqtcIjpcImFcIixcIuG6qVwiOlwiYVwiLFwiw6NcIjpcImFcIixcIsSBXCI6XCJhXCIsXCLEg1wiOlwiYVwiLFwi4bqxXCI6XCJhXCIsXCLhuq9cIjpcImFcIixcIuG6tVwiOlwiYVwiLFwi4bqzXCI6XCJhXCIsXCLIp1wiOlwiYVwiLFwix6FcIjpcImFcIixcIsOkXCI6XCJhXCIsXCLHn1wiOlwiYVwiLFwi4bqjXCI6XCJhXCIsXCLDpVwiOlwiYVwiLFwix7tcIjpcImFcIixcIseOXCI6XCJhXCIsXCLIgVwiOlwiYVwiLFwiyINcIjpcImFcIixcIuG6oVwiOlwiYVwiLFwi4bqtXCI6XCJhXCIsXCLhurdcIjpcImFcIixcIuG4gVwiOlwiYVwiLFwixIVcIjpcImFcIixcIuKxpVwiOlwiYVwiLFwiyZBcIjpcImFcIixcIuqcs1wiOlwiYWFcIixcIsOmXCI6XCJhZVwiLFwix71cIjpcImFlXCIsXCLHo1wiOlwiYWVcIixcIuqctVwiOlwiYW9cIixcIuqct1wiOlwiYXVcIixcIuqcuVwiOlwiYXZcIixcIuqcu1wiOlwiYXZcIixcIuqcvVwiOlwiYXlcIixcIuKTkVwiOlwiYlwiLFwi772CXCI6XCJiXCIsXCLhuINcIjpcImJcIixcIuG4hVwiOlwiYlwiLFwi4biHXCI6XCJiXCIsXCLGgFwiOlwiYlwiLFwixoNcIjpcImJcIixcIsmTXCI6XCJiXCIsXCLik5JcIjpcImNcIixcIu+9g1wiOlwiY1wiLFwixIdcIjpcImNcIixcIsSJXCI6XCJjXCIsXCLEi1wiOlwiY1wiLFwixI1cIjpcImNcIixcIsOnXCI6XCJjXCIsXCLhuIlcIjpcImNcIixcIsaIXCI6XCJjXCIsXCLIvFwiOlwiY1wiLFwi6py/XCI6XCJjXCIsXCLihoRcIjpcImNcIixcIuKTk1wiOlwiZFwiLFwi772EXCI6XCJkXCIsXCLhuItcIjpcImRcIixcIsSPXCI6XCJkXCIsXCLhuI1cIjpcImRcIixcIuG4kVwiOlwiZFwiLFwi4biTXCI6XCJkXCIsXCLhuI9cIjpcImRcIixcIsSRXCI6XCJkXCIsXCLGjFwiOlwiZFwiLFwiyZZcIjpcImRcIixcIsmXXCI6XCJkXCIsXCLqnbpcIjpcImRcIixcIsezXCI6XCJkelwiLFwix4ZcIjpcImR6XCIsXCLik5RcIjpcImVcIixcIu+9hVwiOlwiZVwiLFwiw6hcIjpcImVcIixcIsOpXCI6XCJlXCIsXCLDqlwiOlwiZVwiLFwi4buBXCI6XCJlXCIsXCLhur9cIjpcImVcIixcIuG7hVwiOlwiZVwiLFwi4buDXCI6XCJlXCIsXCLhur1cIjpcImVcIixcIsSTXCI6XCJlXCIsXCLhuJVcIjpcImVcIixcIuG4l1wiOlwiZVwiLFwixJVcIjpcImVcIixcIsSXXCI6XCJlXCIsXCLDq1wiOlwiZVwiLFwi4bq7XCI6XCJlXCIsXCLEm1wiOlwiZVwiLFwiyIVcIjpcImVcIixcIsiHXCI6XCJlXCIsXCLhurlcIjpcImVcIixcIuG7h1wiOlwiZVwiLFwiyKlcIjpcImVcIixcIuG4nVwiOlwiZVwiLFwixJlcIjpcImVcIixcIuG4mVwiOlwiZVwiLFwi4bibXCI6XCJlXCIsXCLJh1wiOlwiZVwiLFwiyZtcIjpcImVcIixcIsedXCI6XCJlXCIsXCLik5VcIjpcImZcIixcIu+9hlwiOlwiZlwiLFwi4bifXCI6XCJmXCIsXCLGklwiOlwiZlwiLFwi6p28XCI6XCJmXCIsXCLik5ZcIjpcImdcIixcIu+9h1wiOlwiZ1wiLFwix7VcIjpcImdcIixcIsSdXCI6XCJnXCIsXCLhuKFcIjpcImdcIixcIsSfXCI6XCJnXCIsXCLEoVwiOlwiZ1wiLFwix6dcIjpcImdcIixcIsSjXCI6XCJnXCIsXCLHpVwiOlwiZ1wiLFwiyaBcIjpcImdcIixcIuqeoVwiOlwiZ1wiLFwi4bW5XCI6XCJnXCIsXCLqnb9cIjpcImdcIixcIuKTl1wiOlwiaFwiLFwi772IXCI6XCJoXCIsXCLEpVwiOlwiaFwiLFwi4bijXCI6XCJoXCIsXCLhuKdcIjpcImhcIixcIsifXCI6XCJoXCIsXCLhuKVcIjpcImhcIixcIuG4qVwiOlwiaFwiLFwi4birXCI6XCJoXCIsXCLhupZcIjpcImhcIixcIsSnXCI6XCJoXCIsXCLisahcIjpcImhcIixcIuKxtlwiOlwiaFwiLFwiyaVcIjpcImhcIixcIsaVXCI6XCJodlwiLFwi4pOYXCI6XCJpXCIsXCLvvYlcIjpcImlcIixcIsOsXCI6XCJpXCIsXCLDrVwiOlwiaVwiLFwiw65cIjpcImlcIixcIsSpXCI6XCJpXCIsXCLEq1wiOlwiaVwiLFwixK1cIjpcImlcIixcIsOvXCI6XCJpXCIsXCLhuK9cIjpcImlcIixcIuG7iVwiOlwiaVwiLFwix5BcIjpcImlcIixcIsiJXCI6XCJpXCIsXCLIi1wiOlwiaVwiLFwi4buLXCI6XCJpXCIsXCLEr1wiOlwiaVwiLFwi4bitXCI6XCJpXCIsXCLJqFwiOlwiaVwiLFwixLFcIjpcImlcIixcIuKTmVwiOlwialwiLFwi772KXCI6XCJqXCIsXCLEtVwiOlwialwiLFwix7BcIjpcImpcIixcIsmJXCI6XCJqXCIsXCLik5pcIjpcImtcIixcIu+9i1wiOlwia1wiLFwi4bixXCI6XCJrXCIsXCLHqVwiOlwia1wiLFwi4bizXCI6XCJrXCIsXCLEt1wiOlwia1wiLFwi4bi1XCI6XCJrXCIsXCLGmVwiOlwia1wiLFwi4rGqXCI6XCJrXCIsXCLqnYFcIjpcImtcIixcIuqdg1wiOlwia1wiLFwi6p2FXCI6XCJrXCIsXCLqnqNcIjpcImtcIixcIuKTm1wiOlwibFwiLFwi772MXCI6XCJsXCIsXCLFgFwiOlwibFwiLFwixLpcIjpcImxcIixcIsS+XCI6XCJsXCIsXCLhuLdcIjpcImxcIixcIuG4uVwiOlwibFwiLFwixLxcIjpcImxcIixcIuG4vVwiOlwibFwiLFwi4bi7XCI6XCJsXCIsXCLFv1wiOlwibFwiLFwixYJcIjpcImxcIixcIsaaXCI6XCJsXCIsXCLJq1wiOlwibFwiLFwi4rGhXCI6XCJsXCIsXCLqnYlcIjpcImxcIixcIuqegVwiOlwibFwiLFwi6p2HXCI6XCJsXCIsXCLHiVwiOlwibGpcIixcIuKTnFwiOlwibVwiLFwi772NXCI6XCJtXCIsXCLhuL9cIjpcIm1cIixcIuG5gVwiOlwibVwiLFwi4bmDXCI6XCJtXCIsXCLJsVwiOlwibVwiLFwiya9cIjpcIm1cIixcIuKTnVwiOlwiblwiLFwi772OXCI6XCJuXCIsXCLHuVwiOlwiblwiLFwixYRcIjpcIm5cIixcIsOxXCI6XCJuXCIsXCLhuYVcIjpcIm5cIixcIsWIXCI6XCJuXCIsXCLhuYdcIjpcIm5cIixcIsWGXCI6XCJuXCIsXCLhuYtcIjpcIm5cIixcIuG5iVwiOlwiblwiLFwixp5cIjpcIm5cIixcIsmyXCI6XCJuXCIsXCLFiVwiOlwiblwiLFwi6p6RXCI6XCJuXCIsXCLqnqVcIjpcIm5cIixcIseMXCI6XCJualwiLFwi4pOeXCI6XCJvXCIsXCLvvY9cIjpcIm9cIixcIsOyXCI6XCJvXCIsXCLDs1wiOlwib1wiLFwiw7RcIjpcIm9cIixcIuG7k1wiOlwib1wiLFwi4buRXCI6XCJvXCIsXCLhu5dcIjpcIm9cIixcIuG7lVwiOlwib1wiLFwiw7VcIjpcIm9cIixcIuG5jVwiOlwib1wiLFwiyK1cIjpcIm9cIixcIuG5j1wiOlwib1wiLFwixY1cIjpcIm9cIixcIuG5kVwiOlwib1wiLFwi4bmTXCI6XCJvXCIsXCLFj1wiOlwib1wiLFwiyK9cIjpcIm9cIixcIsixXCI6XCJvXCIsXCLDtlwiOlwib1wiLFwiyKtcIjpcIm9cIixcIuG7j1wiOlwib1wiLFwixZFcIjpcIm9cIixcIseSXCI6XCJvXCIsXCLIjVwiOlwib1wiLFwiyI9cIjpcIm9cIixcIsahXCI6XCJvXCIsXCLhu51cIjpcIm9cIixcIuG7m1wiOlwib1wiLFwi4buhXCI6XCJvXCIsXCLhu59cIjpcIm9cIixcIuG7o1wiOlwib1wiLFwi4buNXCI6XCJvXCIsXCLhu5lcIjpcIm9cIixcIserXCI6XCJvXCIsXCLHrVwiOlwib1wiLFwiw7hcIjpcIm9cIixcIse/XCI6XCJvXCIsXCLJlFwiOlwib1wiLFwi6p2LXCI6XCJvXCIsXCLqnY1cIjpcIm9cIixcIsm1XCI6XCJvXCIsXCLGo1wiOlwib2lcIixcIsijXCI6XCJvdVwiLFwi6p2PXCI6XCJvb1wiLFwi4pOfXCI6XCJwXCIsXCLvvZBcIjpcInBcIixcIuG5lVwiOlwicFwiLFwi4bmXXCI6XCJwXCIsXCLGpVwiOlwicFwiLFwi4bW9XCI6XCJwXCIsXCLqnZFcIjpcInBcIixcIuqdk1wiOlwicFwiLFwi6p2VXCI6XCJwXCIsXCLik6BcIjpcInFcIixcIu+9kVwiOlwicVwiLFwiyYtcIjpcInFcIixcIuqdl1wiOlwicVwiLFwi6p2ZXCI6XCJxXCIsXCLik6FcIjpcInJcIixcIu+9klwiOlwiclwiLFwixZVcIjpcInJcIixcIuG5mVwiOlwiclwiLFwixZlcIjpcInJcIixcIsiRXCI6XCJyXCIsXCLIk1wiOlwiclwiLFwi4bmbXCI6XCJyXCIsXCLhuZ1cIjpcInJcIixcIsWXXCI6XCJyXCIsXCLhuZ9cIjpcInJcIixcIsmNXCI6XCJyXCIsXCLJvVwiOlwiclwiLFwi6p2bXCI6XCJyXCIsXCLqnqdcIjpcInJcIixcIuqeg1wiOlwiclwiLFwi4pOiXCI6XCJzXCIsXCLvvZNcIjpcInNcIixcIsOfXCI6XCJzXCIsXCLFm1wiOlwic1wiLFwi4bmlXCI6XCJzXCIsXCLFnVwiOlwic1wiLFwi4bmhXCI6XCJzXCIsXCLFoVwiOlwic1wiLFwi4bmnXCI6XCJzXCIsXCLhuaNcIjpcInNcIixcIuG5qVwiOlwic1wiLFwiyJlcIjpcInNcIixcIsWfXCI6XCJzXCIsXCLIv1wiOlwic1wiLFwi6p6pXCI6XCJzXCIsXCLqnoVcIjpcInNcIixcIuG6m1wiOlwic1wiLFwi4pOjXCI6XCJ0XCIsXCLvvZRcIjpcInRcIixcIuG5q1wiOlwidFwiLFwi4bqXXCI6XCJ0XCIsXCLFpVwiOlwidFwiLFwi4bmtXCI6XCJ0XCIsXCLIm1wiOlwidFwiLFwixaNcIjpcInRcIixcIuG5sVwiOlwidFwiLFwi4bmvXCI6XCJ0XCIsXCLFp1wiOlwidFwiLFwixq1cIjpcInRcIixcIsqIXCI6XCJ0XCIsXCLisaZcIjpcInRcIixcIuqeh1wiOlwidFwiLFwi6pypXCI6XCJ0elwiLFwi4pOkXCI6XCJ1XCIsXCLvvZVcIjpcInVcIixcIsO5XCI6XCJ1XCIsXCLDulwiOlwidVwiLFwiw7tcIjpcInVcIixcIsWpXCI6XCJ1XCIsXCLhublcIjpcInVcIixcIsWrXCI6XCJ1XCIsXCLhubtcIjpcInVcIixcIsWtXCI6XCJ1XCIsXCLDvFwiOlwidVwiLFwix5xcIjpcInVcIixcIseYXCI6XCJ1XCIsXCLHllwiOlwidVwiLFwix5pcIjpcInVcIixcIuG7p1wiOlwidVwiLFwixa9cIjpcInVcIixcIsWxXCI6XCJ1XCIsXCLHlFwiOlwidVwiLFwiyJVcIjpcInVcIixcIsiXXCI6XCJ1XCIsXCLGsFwiOlwidVwiLFwi4burXCI6XCJ1XCIsXCLhu6lcIjpcInVcIixcIuG7r1wiOlwidVwiLFwi4butXCI6XCJ1XCIsXCLhu7FcIjpcInVcIixcIuG7pVwiOlwidVwiLFwi4bmzXCI6XCJ1XCIsXCLFs1wiOlwidVwiLFwi4bm3XCI6XCJ1XCIsXCLhubVcIjpcInVcIixcIsqJXCI6XCJ1XCIsXCLik6VcIjpcInZcIixcIu+9llwiOlwidlwiLFwi4bm9XCI6XCJ2XCIsXCLhub9cIjpcInZcIixcIsqLXCI6XCJ2XCIsXCLqnZ9cIjpcInZcIixcIsqMXCI6XCJ2XCIsXCLqnaFcIjpcInZ5XCIsXCLik6ZcIjpcIndcIixcIu+9l1wiOlwid1wiLFwi4bqBXCI6XCJ3XCIsXCLhuoNcIjpcIndcIixcIsW1XCI6XCJ3XCIsXCLhuodcIjpcIndcIixcIuG6hVwiOlwid1wiLFwi4bqYXCI6XCJ3XCIsXCLhuolcIjpcIndcIixcIuKxs1wiOlwid1wiLFwi4pOnXCI6XCJ4XCIsXCLvvZhcIjpcInhcIixcIuG6i1wiOlwieFwiLFwi4bqNXCI6XCJ4XCIsXCLik6hcIjpcInlcIixcIu+9mVwiOlwieVwiLFwi4buzXCI6XCJ5XCIsXCLDvVwiOlwieVwiLFwixbdcIjpcInlcIixcIuG7uVwiOlwieVwiLFwiyLNcIjpcInlcIixcIuG6j1wiOlwieVwiLFwiw79cIjpcInlcIixcIuG7t1wiOlwieVwiLFwi4bqZXCI6XCJ5XCIsXCLhu7VcIjpcInlcIixcIsa0XCI6XCJ5XCIsXCLJj1wiOlwieVwiLFwi4bu/XCI6XCJ5XCIsXCLik6lcIjpcInpcIixcIu+9mlwiOlwielwiLFwixbpcIjpcInpcIixcIuG6kVwiOlwielwiLFwixbxcIjpcInpcIixcIsW+XCI6XCJ6XCIsXCLhupNcIjpcInpcIixcIuG6lVwiOlwielwiLFwixrZcIjpcInpcIixcIsilXCI6XCJ6XCIsXCLJgFwiOlwielwiLFwi4rGsXCI6XCJ6XCIsXCLqnaNcIjpcInpcIixcIs6GXCI6XCLOkVwiLFwizohcIjpcIs6VXCIsXCLOiVwiOlwizpdcIixcIs6KXCI6XCLOmVwiLFwizqpcIjpcIs6ZXCIsXCLOjFwiOlwizp9cIixcIs6OXCI6XCLOpVwiLFwizqtcIjpcIs6lXCIsXCLOj1wiOlwizqlcIixcIs6sXCI6XCLOsVwiLFwizq1cIjpcIs61XCIsXCLOrlwiOlwizrdcIixcIs6vXCI6XCLOuVwiLFwiz4pcIjpcIs65XCIsXCLOkFwiOlwizrlcIixcIs+MXCI6XCLOv1wiLFwiz41cIjpcIs+FXCIsXCLPi1wiOlwiz4VcIixcIs6wXCI6XCLPhVwiLFwiz4lcIjpcIs+JXCIsXCLPglwiOlwiz4NcIn19KSxiLmRlZmluZShcInNlbGVjdDIvZGF0YS9iYXNlXCIsW1wiLi4vdXRpbHNcIl0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMpe2IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9cmV0dXJuIGEuRXh0ZW5kKGIsYS5PYnNlcnZhYmxlKSxiLnByb3RvdHlwZS5jdXJyZW50PWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlRoZSBgY3VycmVudGAgbWV0aG9kIG11c3QgYmUgZGVmaW5lZCBpbiBjaGlsZCBjbGFzc2VzLlwiKX0sYi5wcm90b3R5cGUucXVlcnk9ZnVuY3Rpb24oYSxiKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYHF1ZXJ5YCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuXCIpfSxiLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7fSxiLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7fSxiLnByb3RvdHlwZS5nZW5lcmF0ZVJlc3VsdElkPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9Yi5pZCtcIi1yZXN1bHQtXCI7cmV0dXJuIGQrPWEuZ2VuZXJhdGVDaGFycyg0KSxudWxsIT1jLmlkP2QrPVwiLVwiK2MuaWQudG9TdHJpbmcoKTpkKz1cIi1cIithLmdlbmVyYXRlQ2hhcnMoNCksZH0sYn0pLGIuZGVmaW5lKFwic2VsZWN0Mi9kYXRhL3NlbGVjdFwiLFtcIi4vYmFzZVwiLFwiLi4vdXRpbHNcIixcImpxdWVyeVwiXSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3RoaXMuJGVsZW1lbnQ9YSx0aGlzLm9wdGlvbnM9YixkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfXJldHVybiBiLkV4dGVuZChkLGEpLGQucHJvdG90eXBlLmN1cnJlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9W10sZD10aGlzO3RoaXMuJGVsZW1lbnQuZmluZChcIjpzZWxlY3RlZFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGE9Yyh0aGlzKSxlPWQuaXRlbShhKTtiLnB1c2goZSl9KSxhKGIpfSxkLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhLnNlbGVjdGVkPSEwLGMoYS5lbGVtZW50KS5pcyhcIm9wdGlvblwiKSlyZXR1cm4gYS5lbGVtZW50LnNlbGVjdGVkPSEwLHZvaWQgdGhpcy4kZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpO2lmKHRoaXMuJGVsZW1lbnQucHJvcChcIm11bHRpcGxlXCIpKXRoaXMuY3VycmVudChmdW5jdGlvbihkKXt2YXIgZT1bXTthPVthXSxhLnB1c2guYXBwbHkoYSxkKTtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrKyl7dmFyIGc9YVtmXS5pZDstMT09PWMuaW5BcnJheShnLGUpJiZlLnB1c2goZyl9Yi4kZWxlbWVudC52YWwoZSksYi4kZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpfSk7ZWxzZXt2YXIgZD1hLmlkO3RoaXMuJGVsZW1lbnQudmFsKGQpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImNoYW5nZVwiKX19LGQucHJvdG90eXBlLnVuc2VsZWN0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYodGhpcy4kZWxlbWVudC5wcm9wKFwibXVsdGlwbGVcIikpe2lmKGEuc2VsZWN0ZWQ9ITEsYyhhLmVsZW1lbnQpLmlzKFwib3B0aW9uXCIpKXJldHVybiBhLmVsZW1lbnQuc2VsZWN0ZWQ9ITEsdm9pZCB0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJjaGFuZ2VcIik7dGhpcy5jdXJyZW50KGZ1bmN0aW9uKGQpe2Zvcih2YXIgZT1bXSxmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBnPWRbZl0uaWQ7ZyE9PWEuaWQmJi0xPT09Yy5pbkFycmF5KGcsZSkmJmUucHVzaChnKX1iLiRlbGVtZW50LnZhbChlKSxiLiRlbGVtZW50LnRyaWdnZXIoXCJjaGFuZ2VcIil9KX19LGQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3RoaXMuY29udGFpbmVyPWEsYS5vbihcInNlbGVjdFwiLGZ1bmN0aW9uKGEpe2Muc2VsZWN0KGEuZGF0YSl9KSxhLm9uKFwidW5zZWxlY3RcIixmdW5jdGlvbihhKXtjLnVuc2VsZWN0KGEuZGF0YSl9KX0sZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZmluZChcIipcIikuZWFjaChmdW5jdGlvbigpe2IuUmVtb3ZlRGF0YSh0aGlzKX0pfSxkLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihhLGIpe3ZhciBkPVtdLGU9dGhpczt0aGlzLiRlbGVtZW50LmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciBiPWModGhpcyk7aWYoYi5pcyhcIm9wdGlvblwiKXx8Yi5pcyhcIm9wdGdyb3VwXCIpKXt2YXIgZj1lLml0ZW0oYiksZz1lLm1hdGNoZXMoYSxmKTtudWxsIT09ZyYmZC5wdXNoKGcpfX0pLGIoe3Jlc3VsdHM6ZH0pfSxkLnByb3RvdHlwZS5hZGRPcHRpb25zPWZ1bmN0aW9uKGEpe2IuYXBwZW5kTWFueSh0aGlzLiRlbGVtZW50LGEpfSxkLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24oYSl7dmFyIGQ7YS5jaGlsZHJlbj8oZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0Z3JvdXBcIiksZC5sYWJlbD1hLnRleHQpOihkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiksdm9pZCAwIT09ZC50ZXh0Q29udGVudD9kLnRleHRDb250ZW50PWEudGV4dDpkLmlubmVyVGV4dD1hLnRleHQpLHZvaWQgMCE9PWEuaWQmJihkLnZhbHVlPWEuaWQpLGEuZGlzYWJsZWQmJihkLmRpc2FibGVkPSEwKSxhLnNlbGVjdGVkJiYoZC5zZWxlY3RlZD0hMCksYS50aXRsZSYmKGQudGl0bGU9YS50aXRsZSk7dmFyIGU9YyhkKSxmPXRoaXMuX25vcm1hbGl6ZUl0ZW0oYSk7cmV0dXJuIGYuZWxlbWVudD1kLGIuU3RvcmVEYXRhKGQsXCJkYXRhXCIsZiksZX0sZC5wcm90b3R5cGUuaXRlbT1mdW5jdGlvbihhKXt2YXIgZD17fTtpZihudWxsIT0oZD1iLkdldERhdGEoYVswXSxcImRhdGFcIikpKXJldHVybiBkO2lmKGEuaXMoXCJvcHRpb25cIikpZD17aWQ6YS52YWwoKSx0ZXh0OmEudGV4dCgpLGRpc2FibGVkOmEucHJvcChcImRpc2FibGVkXCIpLHNlbGVjdGVkOmEucHJvcChcInNlbGVjdGVkXCIpLHRpdGxlOmEucHJvcChcInRpdGxlXCIpfTtlbHNlIGlmKGEuaXMoXCJvcHRncm91cFwiKSl7ZD17dGV4dDphLnByb3AoXCJsYWJlbFwiKSxjaGlsZHJlbjpbXSx0aXRsZTphLnByb3AoXCJ0aXRsZVwiKX07Zm9yKHZhciBlPWEuY2hpbGRyZW4oXCJvcHRpb25cIiksZj1bXSxnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBoPWMoZVtnXSksaT10aGlzLml0ZW0oaCk7Zi5wdXNoKGkpfWQuY2hpbGRyZW49Zn1yZXR1cm4gZD10aGlzLl9ub3JtYWxpemVJdGVtKGQpLGQuZWxlbWVudD1hWzBdLGIuU3RvcmVEYXRhKGFbMF0sXCJkYXRhXCIsZCksZH0sZC5wcm90b3R5cGUuX25vcm1hbGl6ZUl0ZW09ZnVuY3Rpb24oYSl7YSE9PU9iamVjdChhKSYmKGE9e2lkOmEsdGV4dDphfSksYT1jLmV4dGVuZCh7fSx7dGV4dDpcIlwifSxhKTt2YXIgYj17c2VsZWN0ZWQ6ITEsZGlzYWJsZWQ6ITF9O3JldHVybiBudWxsIT1hLmlkJiYoYS5pZD1hLmlkLnRvU3RyaW5nKCkpLG51bGwhPWEudGV4dCYmKGEudGV4dD1hLnRleHQudG9TdHJpbmcoKSksbnVsbD09YS5fcmVzdWx0SWQmJmEuaWQmJm51bGwhPXRoaXMuY29udGFpbmVyJiYoYS5fcmVzdWx0SWQ9dGhpcy5nZW5lcmF0ZVJlc3VsdElkKHRoaXMuY29udGFpbmVyLGEpKSxjLmV4dGVuZCh7fSxiLGEpfSxkLnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub3B0aW9ucy5nZXQoXCJtYXRjaGVyXCIpKGEsYil9LGR9KSxiLmRlZmluZShcInNlbGVjdDIvZGF0YS9hcnJheVwiLFtcIi4vc2VsZWN0XCIsXCIuLi91dGlsc1wiLFwianF1ZXJ5XCJdLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9Yi5nZXQoXCJkYXRhXCIpfHxbXTtkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKSx0aGlzLmFkZE9wdGlvbnModGhpcy5jb252ZXJ0VG9PcHRpb25zKGMpKX1yZXR1cm4gYi5FeHRlbmQoZCxhKSxkLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kZWxlbWVudC5maW5kKFwib3B0aW9uXCIpLmZpbHRlcihmdW5jdGlvbihiLGMpe3JldHVybiBjLnZhbHVlPT1hLmlkLnRvU3RyaW5nKCl9KTswPT09Yi5sZW5ndGgmJihiPXRoaXMub3B0aW9uKGEpLHRoaXMuYWRkT3B0aW9ucyhiKSksZC5fX3N1cGVyX18uc2VsZWN0LmNhbGwodGhpcyxhKX0sZC5wcm90b3R5cGUuY29udmVydFRvT3B0aW9ucz1mdW5jdGlvbihhKXtmdW5jdGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjKHRoaXMpLnZhbCgpPT1hLmlkfX1mb3IodmFyIGU9dGhpcyxmPXRoaXMuJGVsZW1lbnQuZmluZChcIm9wdGlvblwiKSxnPWYubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGUuaXRlbShjKHRoaXMpKS5pZH0pLmdldCgpLGg9W10saT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgaj10aGlzLl9ub3JtYWxpemVJdGVtKGFbaV0pO2lmKGMuaW5BcnJheShqLmlkLGcpPj0wKXt2YXIgaz1mLmZpbHRlcihkKGopKSxsPXRoaXMuaXRlbShrKSxtPWMuZXh0ZW5kKCEwLHt9LGosbCksbj10aGlzLm9wdGlvbihtKTtrLnJlcGxhY2VXaXRoKG4pfWVsc2V7dmFyIG89dGhpcy5vcHRpb24oaik7aWYoai5jaGlsZHJlbil7dmFyIHA9dGhpcy5jb252ZXJ0VG9PcHRpb25zKGouY2hpbGRyZW4pO2IuYXBwZW5kTWFueShvLHApfWgucHVzaChvKX19cmV0dXJuIGh9LGR9KSxiLmRlZmluZShcInNlbGVjdDIvZGF0YS9hamF4XCIsW1wiLi9hcnJheVwiLFwiLi4vdXRpbHNcIixcImpxdWVyeVwiXSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3RoaXMuYWpheE9wdGlvbnM9dGhpcy5fYXBwbHlEZWZhdWx0cyhiLmdldChcImFqYXhcIikpLG51bGwhPXRoaXMuYWpheE9wdGlvbnMucHJvY2Vzc1Jlc3VsdHMmJih0aGlzLnByb2Nlc3NSZXN1bHRzPXRoaXMuYWpheE9wdGlvbnMucHJvY2Vzc1Jlc3VsdHMpLGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhLGIpfXJldHVybiBiLkV4dGVuZChkLGEpLGQucHJvdG90eXBlLl9hcHBseURlZmF1bHRzPWZ1bmN0aW9uKGEpe3ZhciBiPXtkYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBjLmV4dGVuZCh7fSxhLHtxOmEudGVybX0pfSx0cmFuc3BvcnQ6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWMuYWpheChhKTtyZXR1cm4gZS50aGVuKGIpLGUuZmFpbChkKSxlfX07cmV0dXJuIGMuZXh0ZW5kKHt9LGIsYSwhMCl9LGQucHJvdG90eXBlLnByb2Nlc3NSZXN1bHRzPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxkLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoKXt2YXIgZD1mLnRyYW5zcG9ydChmLGZ1bmN0aW9uKGQpe3ZhciBmPWUucHJvY2Vzc1Jlc3VsdHMoZCxhKTtlLm9wdGlvbnMuZ2V0KFwiZGVidWdcIikmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLmVycm9yJiYoZiYmZi5yZXN1bHRzJiZjLmlzQXJyYXkoZi5yZXN1bHRzKXx8Y29uc29sZS5lcnJvcihcIlNlbGVjdDI6IFRoZSBBSkFYIHJlc3VsdHMgZGlkIG5vdCByZXR1cm4gYW4gYXJyYXkgaW4gdGhlIGByZXN1bHRzYCBrZXkgb2YgdGhlIHJlc3BvbnNlLlwiKSksYihmKX0sZnVuY3Rpb24oKXtcInN0YXR1c1wiaW4gZCYmKDA9PT1kLnN0YXR1c3x8XCIwXCI9PT1kLnN0YXR1cyl8fGUudHJpZ2dlcihcInJlc3VsdHM6bWVzc2FnZVwiLHttZXNzYWdlOlwiZXJyb3JMb2FkaW5nXCJ9KX0pO2UuX3JlcXVlc3Q9ZH12YXIgZT10aGlzO251bGwhPXRoaXMuX3JlcXVlc3QmJihjLmlzRnVuY3Rpb24odGhpcy5fcmVxdWVzdC5hYm9ydCkmJnRoaXMuX3JlcXVlc3QuYWJvcnQoKSx0aGlzLl9yZXF1ZXN0PW51bGwpO3ZhciBmPWMuZXh0ZW5kKHt0eXBlOlwiR0VUXCJ9LHRoaXMuYWpheE9wdGlvbnMpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGYudXJsJiYoZi51cmw9Zi51cmwuY2FsbCh0aGlzLiRlbGVtZW50LGEpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmLmRhdGEmJihmLmRhdGE9Zi5kYXRhLmNhbGwodGhpcy4kZWxlbWVudCxhKSksdGhpcy5hamF4T3B0aW9ucy5kZWxheSYmbnVsbCE9YS50ZXJtPyh0aGlzLl9xdWVyeVRpbWVvdXQmJndpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fcXVlcnlUaW1lb3V0KSx0aGlzLl9xdWVyeVRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoZCx0aGlzLmFqYXhPcHRpb25zLmRlbGF5KSk6ZCgpfSxkfSksYi5kZWZpbmUoXCJzZWxlY3QyL2RhdGEvdGFnc1wiLFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsYyxkKXt2YXIgZT1kLmdldChcInRhZ3NcIiksZj1kLmdldChcImNyZWF0ZVRhZ1wiKTt2b2lkIDAhPT1mJiYodGhpcy5jcmVhdGVUYWc9Zik7dmFyIGc9ZC5nZXQoXCJpbnNlcnRUYWdcIik7aWYodm9pZCAwIT09ZyYmKHRoaXMuaW5zZXJ0VGFnPWcpLGIuY2FsbCh0aGlzLGMsZCksYS5pc0FycmF5KGUpKWZvcih2YXIgaD0wO2g8ZS5sZW5ndGg7aCsrKXt2YXIgaT1lW2hdLGo9dGhpcy5fbm9ybWFsaXplSXRlbShpKSxrPXRoaXMub3B0aW9uKGopO3RoaXMuJGVsZW1lbnQuYXBwZW5kKGspfX1yZXR1cm4gYi5wcm90b3R5cGUucXVlcnk9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxmKXtmb3IodmFyIGc9YS5yZXN1bHRzLGg9MDtoPGcubGVuZ3RoO2grKyl7dmFyIGk9Z1toXSxqPW51bGwhPWkuY2hpbGRyZW4mJiFkKHtyZXN1bHRzOmkuY2hpbGRyZW59LCEwKTtpZigoaS50ZXh0fHxcIlwiKS50b1VwcGVyQ2FzZSgpPT09KGIudGVybXx8XCJcIikudG9VcHBlckNhc2UoKXx8ailyZXR1cm4hZiYmKGEuZGF0YT1nLHZvaWQgYyhhKSl9aWYoZilyZXR1cm4hMDt2YXIgaz1lLmNyZWF0ZVRhZyhiKTtpZihudWxsIT1rKXt2YXIgbD1lLm9wdGlvbihrKTtsLmF0dHIoXCJkYXRhLXNlbGVjdDItdGFnXCIsITApLGUuYWRkT3B0aW9ucyhbbF0pLGUuaW5zZXJ0VGFnKGcsayl9YS5yZXN1bHRzPWcsYyhhKX12YXIgZT10aGlzO2lmKHRoaXMuX3JlbW92ZU9sZFRhZ3MoKSxudWxsPT1iLnRlcm18fG51bGwhPWIucGFnZSlyZXR1cm4gdm9pZCBhLmNhbGwodGhpcyxiLGMpO2EuY2FsbCh0aGlzLGIsZCl9LGIucHJvdG90eXBlLmNyZWF0ZVRhZz1mdW5jdGlvbihiLGMpe3ZhciBkPWEudHJpbShjLnRlcm0pO3JldHVyblwiXCI9PT1kP251bGw6e2lkOmQsdGV4dDpkfX0sYi5wcm90b3R5cGUuaW5zZXJ0VGFnPWZ1bmN0aW9uKGEsYixjKXtiLnVuc2hpZnQoYyl9LGIucHJvdG90eXBlLl9yZW1vdmVPbGRUYWdzPWZ1bmN0aW9uKGIpe3RoaXMuX2xhc3RUYWc7dGhpcy4kZWxlbWVudC5maW5kKFwib3B0aW9uW2RhdGEtc2VsZWN0Mi10YWddXCIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkfHxhKHRoaXMpLnJlbW92ZSgpfSl9LGJ9KSxiLmRlZmluZShcInNlbGVjdDIvZGF0YS90b2tlbml6ZXJcIixbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9Yy5nZXQoXCJ0b2tlbml6ZXJcIik7dm9pZCAwIT09ZCYmKHRoaXMudG9rZW5pemVyPWQpLGEuY2FsbCh0aGlzLGIsYyl9cmV0dXJuIGIucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2EuY2FsbCh0aGlzLGIsYyksdGhpcy4kc2VhcmNoPWIuZHJvcGRvd24uJHNlYXJjaHx8Yi5zZWxlY3Rpb24uJHNlYXJjaHx8Yy5maW5kKFwiLnNlbGVjdDItc2VhcmNoX19maWVsZFwiKX0sYi5wcm90b3R5cGUucXVlcnk9ZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoYil7dmFyIGM9Zy5fbm9ybWFsaXplSXRlbShiKTtpZighZy4kZWxlbWVudC5maW5kKFwib3B0aW9uXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBhKHRoaXMpLnZhbCgpPT09Yy5pZH0pLmxlbmd0aCl7dmFyIGQ9Zy5vcHRpb24oYyk7ZC5hdHRyKFwiZGF0YS1zZWxlY3QyLXRhZ1wiLCEwKSxnLl9yZW1vdmVPbGRUYWdzKCksZy5hZGRPcHRpb25zKFtkXSl9ZihjKX1mdW5jdGlvbiBmKGEpe2cudHJpZ2dlcihcInNlbGVjdFwiLHtkYXRhOmF9KX12YXIgZz10aGlzO2MudGVybT1jLnRlcm18fFwiXCI7dmFyIGg9dGhpcy50b2tlbml6ZXIoYyx0aGlzLm9wdGlvbnMsZSk7aC50ZXJtIT09Yy50ZXJtJiYodGhpcy4kc2VhcmNoLmxlbmd0aCYmKHRoaXMuJHNlYXJjaC52YWwoaC50ZXJtKSx0aGlzLiRzZWFyY2guZm9jdXMoKSksYy50ZXJtPWgudGVybSksYi5jYWxsKHRoaXMsYyxkKX0sYi5wcm90b3R5cGUudG9rZW5pemVyPWZ1bmN0aW9uKGIsYyxkLGUpe2Zvcih2YXIgZj1kLmdldChcInRva2VuU2VwYXJhdG9yc1wiKXx8W10sZz1jLnRlcm0saD0wLGk9dGhpcy5jcmVhdGVUYWd8fGZ1bmN0aW9uKGEpe3JldHVybntpZDphLnRlcm0sdGV4dDphLnRlcm19fTtoPGcubGVuZ3RoOyl7dmFyIGo9Z1toXTtpZigtMSE9PWEuaW5BcnJheShqLGYpKXt2YXIgaz1nLnN1YnN0cigwLGgpLGw9YS5leHRlbmQoe30sYyx7dGVybTprfSksbT1pKGwpO251bGwhPW0/KGUobSksZz1nLnN1YnN0cihoKzEpfHxcIlwiLGg9MCk6aCsrfWVsc2UgaCsrfXJldHVybnt0ZXJtOmd9fSxifSksYi5kZWZpbmUoXCJzZWxlY3QyL2RhdGEvbWluaW11bUlucHV0TGVuZ3RoXCIsW10sZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjKXt0aGlzLm1pbmltdW1JbnB1dExlbmd0aD1jLmdldChcIm1pbmltdW1JbnB1dExlbmd0aFwiKSxhLmNhbGwodGhpcyxiLGMpfXJldHVybiBhLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihhLGIsYyl7aWYoYi50ZXJtPWIudGVybXx8XCJcIixiLnRlcm0ubGVuZ3RoPHRoaXMubWluaW11bUlucHV0TGVuZ3RoKXJldHVybiB2b2lkIHRoaXMudHJpZ2dlcihcInJlc3VsdHM6bWVzc2FnZVwiLHttZXNzYWdlOlwiaW5wdXRUb29TaG9ydFwiLGFyZ3M6e21pbmltdW06dGhpcy5taW5pbXVtSW5wdXRMZW5ndGgsaW5wdXQ6Yi50ZXJtLHBhcmFtczpifX0pO2EuY2FsbCh0aGlzLGIsYyl9LGF9KSxiLmRlZmluZShcInNlbGVjdDIvZGF0YS9tYXhpbXVtSW5wdXRMZW5ndGhcIixbXSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMpe3RoaXMubWF4aW11bUlucHV0TGVuZ3RoPWMuZ2V0KFwibWF4aW11bUlucHV0TGVuZ3RoXCIpLGEuY2FsbCh0aGlzLGIsYyl9cmV0dXJuIGEucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKGEsYixjKXtpZihiLnRlcm09Yi50ZXJtfHxcIlwiLHRoaXMubWF4aW11bUlucHV0TGVuZ3RoPjAmJmIudGVybS5sZW5ndGg+dGhpcy5tYXhpbXVtSW5wdXRMZW5ndGgpcmV0dXJuIHZvaWQgdGhpcy50cmlnZ2VyKFwicmVzdWx0czptZXNzYWdlXCIse21lc3NhZ2U6XCJpbnB1dFRvb0xvbmdcIixhcmdzOnttYXhpbXVtOnRoaXMubWF4aW11bUlucHV0TGVuZ3RoLGlucHV0OmIudGVybSxwYXJhbXM6Yn19KTthLmNhbGwodGhpcyxiLGMpfSxhfSksYi5kZWZpbmUoXCJzZWxlY3QyL2RhdGEvbWF4aW11bVNlbGVjdGlvbkxlbmd0aFwiLFtdLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dGhpcy5tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoPWMuZ2V0KFwibWF4aW11bVNlbGVjdGlvbkxlbmd0aFwiKSxhLmNhbGwodGhpcyxiLGMpfXJldHVybiBhLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpczt0aGlzLmN1cnJlbnQoZnVuY3Rpb24oZSl7dmFyIGY9bnVsbCE9ZT9lLmxlbmd0aDowO2lmKGQubWF4aW11bVNlbGVjdGlvbkxlbmd0aD4wJiZmPj1kLm1heGltdW1TZWxlY3Rpb25MZW5ndGgpcmV0dXJuIHZvaWQgZC50cmlnZ2VyKFwicmVzdWx0czptZXNzYWdlXCIse21lc3NhZ2U6XCJtYXhpbXVtU2VsZWN0ZWRcIixhcmdzOnttYXhpbXVtOmQubWF4aW11bVNlbGVjdGlvbkxlbmd0aH19KTthLmNhbGwoZCxiLGMpfSl9LGF9KSxiLmRlZmluZShcInNlbGVjdDIvZHJvcGRvd25cIixbXCJqcXVlcnlcIixcIi4vdXRpbHNcIl0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dGhpcy4kZWxlbWVudD1hLHRoaXMub3B0aW9ucz1iLGMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9cmV0dXJuIGIuRXh0ZW5kKGMsYi5PYnNlcnZhYmxlKSxjLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYj1hKCc8c3BhbiBjbGFzcz1cInNlbGVjdDItZHJvcGRvd25cIj48c3BhbiBjbGFzcz1cInNlbGVjdDItcmVzdWx0c1wiPjwvc3Bhbj48L3NwYW4+Jyk7cmV0dXJuIGIuYXR0cihcImRpclwiLHRoaXMub3B0aW9ucy5nZXQoXCJkaXJcIikpLHRoaXMuJGRyb3Bkb3duPWIsYn0sYy5wcm90b3R5cGUuYmluZD1mdW5jdGlvbigpe30sYy5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oYSxiKXt9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLiRkcm9wZG93bi5yZW1vdmUoKX0sY30pLGIuZGVmaW5lKFwic2VsZWN0Mi9kcm9wZG93bi9zZWFyY2hcIixbXCJqcXVlcnlcIixcIi4uL3V0aWxzXCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe31yZXR1cm4gYy5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGIpe3ZhciBjPWIuY2FsbCh0aGlzKSxkPWEoJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1zZWFyY2ggc2VsZWN0Mi1zZWFyY2gtLWRyb3Bkb3duXCI+PGlucHV0IGNsYXNzPVwic2VsZWN0Mi1zZWFyY2hfX2ZpZWxkXCIgdHlwZT1cInNlYXJjaFwiIHRhYmluZGV4PVwiLTFcIiBhdXRvY29tcGxldGU9XCJvZmZcIiBhdXRvY29ycmVjdD1cIm9mZlwiIGF1dG9jYXBpdGFsaXplPVwibm9uZVwiIHNwZWxsY2hlY2s9XCJmYWxzZVwiIHJvbGU9XCJ0ZXh0Ym94XCIgLz48L3NwYW4+Jyk7cmV0dXJuIHRoaXMuJHNlYXJjaENvbnRhaW5lcj1kLHRoaXMuJHNlYXJjaD1kLmZpbmQoXCJpbnB1dFwiKSxjLnByZXBlbmQoZCksY30sYy5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihiLGMsZCl7dmFyIGU9dGhpcztiLmNhbGwodGhpcyxjLGQpLHRoaXMuJHNlYXJjaC5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXtlLnRyaWdnZXIoXCJrZXlwcmVzc1wiLGEpLGUuX2tleVVwUHJldmVudGVkPWEuaXNEZWZhdWx0UHJldmVudGVkKCl9KSx0aGlzLiRzZWFyY2gub24oXCJpbnB1dFwiLGZ1bmN0aW9uKGIpe2EodGhpcykub2ZmKFwia2V5dXBcIil9KSx0aGlzLiRzZWFyY2gub24oXCJrZXl1cCBpbnB1dFwiLGZ1bmN0aW9uKGEpe2UuaGFuZGxlU2VhcmNoKGEpfSksYy5vbihcIm9wZW5cIixmdW5jdGlvbigpe2UuJHNlYXJjaC5hdHRyKFwidGFiaW5kZXhcIiwwKSxlLiRzZWFyY2guZm9jdXMoKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuJHNlYXJjaC5mb2N1cygpfSwwKX0pLGMub24oXCJjbG9zZVwiLGZ1bmN0aW9uKCl7ZS4kc2VhcmNoLmF0dHIoXCJ0YWJpbmRleFwiLC0xKSxlLiRzZWFyY2gudmFsKFwiXCIpLGUuJHNlYXJjaC5ibHVyKCl9KSxjLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe2MuaXNPcGVuKCl8fGUuJHNlYXJjaC5mb2N1cygpfSksYy5vbihcInJlc3VsdHM6YWxsXCIsZnVuY3Rpb24oYSl7aWYobnVsbD09YS5xdWVyeS50ZXJtfHxcIlwiPT09YS5xdWVyeS50ZXJtKXtlLnNob3dTZWFyY2goYSk/ZS4kc2VhcmNoQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwic2VsZWN0Mi1zZWFyY2gtLWhpZGVcIik6ZS4kc2VhcmNoQ29udGFpbmVyLmFkZENsYXNzKFwic2VsZWN0Mi1zZWFyY2gtLWhpZGVcIil9fSl9LGMucHJvdG90eXBlLmhhbmRsZVNlYXJjaD1mdW5jdGlvbihhKXtpZighdGhpcy5fa2V5VXBQcmV2ZW50ZWQpe3ZhciBiPXRoaXMuJHNlYXJjaC52YWwoKTt0aGlzLnRyaWdnZXIoXCJxdWVyeVwiLHt0ZXJtOmJ9KX10aGlzLl9rZXlVcFByZXZlbnRlZD0hMX0sYy5wcm90b3R5cGUuc2hvd1NlYXJjaD1mdW5jdGlvbihhLGIpe3JldHVybiEwfSxjfSksYi5kZWZpbmUoXCJzZWxlY3QyL2Ryb3Bkb3duL2hpZGVQbGFjZWhvbGRlclwiLFtdLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkKXt0aGlzLnBsYWNlaG9sZGVyPXRoaXMubm9ybWFsaXplUGxhY2Vob2xkZXIoYy5nZXQoXCJwbGFjZWhvbGRlclwiKSksYS5jYWxsKHRoaXMsYixjLGQpfXJldHVybiBhLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oYSxiKXtiLnJlc3VsdHM9dGhpcy5yZW1vdmVQbGFjZWhvbGRlcihiLnJlc3VsdHMpLGEuY2FsbCh0aGlzLGIpfSxhLnByb3RvdHlwZS5ub3JtYWxpemVQbGFjZWhvbGRlcj1mdW5jdGlvbihhLGIpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYj17aWQ6XCJcIix0ZXh0OmJ9KSxifSxhLnByb3RvdHlwZS5yZW1vdmVQbGFjZWhvbGRlcj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1iLnNsaWNlKDApLGQ9Yi5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGU9YltkXTt0aGlzLnBsYWNlaG9sZGVyLmlkPT09ZS5pZCYmYy5zcGxpY2UoZCwxKX1yZXR1cm4gY30sYX0pLGIuZGVmaW5lKFwic2VsZWN0Mi9kcm9wZG93bi9pbmZpbml0ZVNjcm9sbFwiLFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMubGFzdFBhcmFtcz17fSxhLmNhbGwodGhpcyxiLGMsZCksdGhpcy4kbG9hZGluZ01vcmU9dGhpcy5jcmVhdGVMb2FkaW5nTW9yZSgpLHRoaXMubG9hZGluZz0hMX1yZXR1cm4gYi5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGEsYil7dGhpcy4kbG9hZGluZ01vcmUucmVtb3ZlKCksdGhpcy5sb2FkaW5nPSExLGEuY2FsbCh0aGlzLGIpLHRoaXMuc2hvd0xvYWRpbmdNb3JlKGIpJiZ0aGlzLiRyZXN1bHRzLmFwcGVuZCh0aGlzLiRsb2FkaW5nTW9yZSl9LGIucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPXRoaXM7Yi5jYWxsKHRoaXMsYyxkKSxjLm9uKFwicXVlcnlcIixmdW5jdGlvbihhKXtlLmxhc3RQYXJhbXM9YSxlLmxvYWRpbmc9ITB9KSxjLm9uKFwicXVlcnk6YXBwZW5kXCIsZnVuY3Rpb24oYSl7ZS5sYXN0UGFyYW1zPWEsZS5sb2FkaW5nPSEwfSksdGhpcy4kcmVzdWx0cy5vbihcInNjcm9sbFwiLGZ1bmN0aW9uKCl7dmFyIGI9YS5jb250YWlucyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZS4kbG9hZGluZ01vcmVbMF0pO2lmKCFlLmxvYWRpbmcmJmIpe2UuJHJlc3VsdHMub2Zmc2V0KCkudG9wK2UuJHJlc3VsdHMub3V0ZXJIZWlnaHQoITEpKzUwPj1lLiRsb2FkaW5nTW9yZS5vZmZzZXQoKS50b3ArZS4kbG9hZGluZ01vcmUub3V0ZXJIZWlnaHQoITEpJiZlLmxvYWRNb3JlKCl9fSl9LGIucHJvdG90eXBlLmxvYWRNb3JlPWZ1bmN0aW9uKCl7dGhpcy5sb2FkaW5nPSEwO3ZhciBiPWEuZXh0ZW5kKHt9LHtwYWdlOjF9LHRoaXMubGFzdFBhcmFtcyk7Yi5wYWdlKyssdGhpcy50cmlnZ2VyKFwicXVlcnk6YXBwZW5kXCIsYil9LGIucHJvdG90eXBlLnNob3dMb2FkaW5nTW9yZT1mdW5jdGlvbihhLGIpe3JldHVybiBiLnBhZ2luYXRpb24mJmIucGFnaW5hdGlvbi5tb3JlfSxiLnByb3RvdHlwZS5jcmVhdGVMb2FkaW5nTW9yZT1mdW5jdGlvbigpe3ZhciBiPWEoJzxsaSBjbGFzcz1cInNlbGVjdDItcmVzdWx0c19fb3B0aW9uIHNlbGVjdDItcmVzdWx0c19fb3B0aW9uLS1sb2FkLW1vcmVcInJvbGU9XCJ0cmVlaXRlbVwiIGFyaWEtZGlzYWJsZWQ9XCJ0cnVlXCI+PC9saT4nKSxjPXRoaXMub3B0aW9ucy5nZXQoXCJ0cmFuc2xhdGlvbnNcIikuZ2V0KFwibG9hZGluZ01vcmVcIik7cmV0dXJuIGIuaHRtbChjKHRoaXMubGFzdFBhcmFtcykpLGJ9LGJ9KSxiLmRlZmluZShcInNlbGVjdDIvZHJvcGRvd24vYXR0YWNoQm9keVwiLFtcImpxdWVyeVwiLFwiLi4vdXRpbHNcIl0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGIsYyxkKXt0aGlzLiRkcm9wZG93blBhcmVudD1kLmdldChcImRyb3Bkb3duUGFyZW50XCIpfHxhKGRvY3VtZW50LmJvZHkpLGIuY2FsbCh0aGlzLGMsZCl9cmV0dXJuIGMucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT0hMTthLmNhbGwodGhpcyxiLGMpLGIub24oXCJvcGVuXCIsZnVuY3Rpb24oKXtkLl9zaG93RHJvcGRvd24oKSxkLl9hdHRhY2hQb3NpdGlvbmluZ0hhbmRsZXIoYiksZXx8KGU9ITAsYi5vbihcInJlc3VsdHM6YWxsXCIsZnVuY3Rpb24oKXtkLl9wb3NpdGlvbkRyb3Bkb3duKCksZC5fcmVzaXplRHJvcGRvd24oKX0pLGIub24oXCJyZXN1bHRzOmFwcGVuZFwiLGZ1bmN0aW9uKCl7ZC5fcG9zaXRpb25Ecm9wZG93bigpLGQuX3Jlc2l6ZURyb3Bkb3duKCl9KSl9KSxiLm9uKFwiY2xvc2VcIixmdW5jdGlvbigpe2QuX2hpZGVEcm9wZG93bigpLGQuX2RldGFjaFBvc2l0aW9uaW5nSGFuZGxlcihiKX0pLHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGEpe2EuY2FsbCh0aGlzKSx0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5yZW1vdmUoKX0sYy5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oYSxiLGMpe2IuYXR0cihcImNsYXNzXCIsYy5hdHRyKFwiY2xhc3NcIikpLGIucmVtb3ZlQ2xhc3MoXCJzZWxlY3QyXCIpLGIuYWRkQ2xhc3MoXCJzZWxlY3QyLWNvbnRhaW5lci0tb3BlblwiKSxiLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDotOTk5OTk5fSksdGhpcy4kY29udGFpbmVyPWN9LGMucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihiKXt2YXIgYz1hKFwiPHNwYW4+PC9zcGFuPlwiKSxkPWIuY2FsbCh0aGlzKTtyZXR1cm4gYy5hcHBlbmQoZCksdGhpcy4kZHJvcGRvd25Db250YWluZXI9YyxjfSxjLnByb3RvdHlwZS5faGlkZURyb3Bkb3duPWZ1bmN0aW9uKGEpe3RoaXMuJGRyb3Bkb3duQ29udGFpbmVyLmRldGFjaCgpfSxjLnByb3RvdHlwZS5fYXR0YWNoUG9zaXRpb25pbmdIYW5kbGVyPWZ1bmN0aW9uKGMsZCl7dmFyIGU9dGhpcyxmPVwic2Nyb2xsLnNlbGVjdDIuXCIrZC5pZCxnPVwicmVzaXplLnNlbGVjdDIuXCIrZC5pZCxoPVwib3JpZW50YXRpb25jaGFuZ2Uuc2VsZWN0Mi5cIitkLmlkLGk9dGhpcy4kY29udGFpbmVyLnBhcmVudHMoKS5maWx0ZXIoYi5oYXNTY3JvbGwpO2kuZWFjaChmdW5jdGlvbigpe2IuU3RvcmVEYXRhKHRoaXMsXCJzZWxlY3QyLXNjcm9sbC1wb3NpdGlvblwiLHt4OmEodGhpcykuc2Nyb2xsTGVmdCgpLHk6YSh0aGlzKS5zY3JvbGxUb3AoKX0pfSksaS5vbihmLGZ1bmN0aW9uKGMpe3ZhciBkPWIuR2V0RGF0YSh0aGlzLFwic2VsZWN0Mi1zY3JvbGwtcG9zaXRpb25cIik7YSh0aGlzKS5zY3JvbGxUb3AoZC55KX0pLGEod2luZG93KS5vbihmK1wiIFwiK2crXCIgXCIraCxmdW5jdGlvbihhKXtlLl9wb3NpdGlvbkRyb3Bkb3duKCksZS5fcmVzaXplRHJvcGRvd24oKX0pfSxjLnByb3RvdHlwZS5fZGV0YWNoUG9zaXRpb25pbmdIYW5kbGVyPWZ1bmN0aW9uKGMsZCl7dmFyIGU9XCJzY3JvbGwuc2VsZWN0Mi5cIitkLmlkLGY9XCJyZXNpemUuc2VsZWN0Mi5cIitkLmlkLGc9XCJvcmllbnRhdGlvbmNoYW5nZS5zZWxlY3QyLlwiK2QuaWQ7dGhpcy4kY29udGFpbmVyLnBhcmVudHMoKS5maWx0ZXIoYi5oYXNTY3JvbGwpLm9mZihlKSxhKHdpbmRvdykub2ZmKGUrXCIgXCIrZitcIiBcIitnKX0sYy5wcm90b3R5cGUuX3Bvc2l0aW9uRHJvcGRvd249ZnVuY3Rpb24oKXt2YXIgYj1hKHdpbmRvdyksYz10aGlzLiRkcm9wZG93bi5oYXNDbGFzcyhcInNlbGVjdDItZHJvcGRvd24tLWFib3ZlXCIpLGQ9dGhpcy4kZHJvcGRvd24uaGFzQ2xhc3MoXCJzZWxlY3QyLWRyb3Bkb3duLS1iZWxvd1wiKSxlPW51bGwsZj10aGlzLiRjb250YWluZXIub2Zmc2V0KCk7Zi5ib3R0b209Zi50b3ArdGhpcy4kY29udGFpbmVyLm91dGVySGVpZ2h0KCExKTt2YXIgZz17aGVpZ2h0OnRoaXMuJGNvbnRhaW5lci5vdXRlckhlaWdodCghMSl9O2cudG9wPWYudG9wLGcuYm90dG9tPWYudG9wK2cuaGVpZ2h0O3ZhciBoPXtoZWlnaHQ6dGhpcy4kZHJvcGRvd24ub3V0ZXJIZWlnaHQoITEpfSxpPXt0b3A6Yi5zY3JvbGxUb3AoKSxib3R0b206Yi5zY3JvbGxUb3AoKStiLmhlaWdodCgpfSxqPWkudG9wPGYudG9wLWguaGVpZ2h0LGs9aS5ib3R0b20+Zi5ib3R0b20raC5oZWlnaHQsbD17bGVmdDpmLmxlZnQsdG9wOmcuYm90dG9tfSxtPXRoaXMuJGRyb3Bkb3duUGFyZW50O1wic3RhdGljXCI9PT1tLmNzcyhcInBvc2l0aW9uXCIpJiYobT1tLm9mZnNldFBhcmVudCgpKTt2YXIgbj1tLm9mZnNldCgpO2wudG9wLT1uLnRvcCxsLmxlZnQtPW4ubGVmdCxjfHxkfHwoZT1cImJlbG93XCIpLGt8fCFqfHxjPyFqJiZrJiZjJiYoZT1cImJlbG93XCIpOmU9XCJhYm92ZVwiLChcImFib3ZlXCI9PWV8fGMmJlwiYmVsb3dcIiE9PWUpJiYobC50b3A9Zy50b3Atbi50b3AtaC5oZWlnaHQpLG51bGwhPWUmJih0aGlzLiRkcm9wZG93bi5yZW1vdmVDbGFzcyhcInNlbGVjdDItZHJvcGRvd24tLWJlbG93IHNlbGVjdDItZHJvcGRvd24tLWFib3ZlXCIpLmFkZENsYXNzKFwic2VsZWN0Mi1kcm9wZG93bi0tXCIrZSksdGhpcy4kY29udGFpbmVyLnJlbW92ZUNsYXNzKFwic2VsZWN0Mi1jb250YWluZXItLWJlbG93IHNlbGVjdDItY29udGFpbmVyLS1hYm92ZVwiKS5hZGRDbGFzcyhcInNlbGVjdDItY29udGFpbmVyLS1cIitlKSksdGhpcy4kZHJvcGRvd25Db250YWluZXIuY3NzKGwpfSxjLnByb3RvdHlwZS5fcmVzaXplRHJvcGRvd249ZnVuY3Rpb24oKXt2YXIgYT17d2lkdGg6dGhpcy4kY29udGFpbmVyLm91dGVyV2lkdGgoITEpK1wicHhcIn07dGhpcy5vcHRpb25zLmdldChcImRyb3Bkb3duQXV0b1dpZHRoXCIpJiYoYS5taW5XaWR0aD1hLndpZHRoLGEucG9zaXRpb249XCJyZWxhdGl2ZVwiLGEud2lkdGg9XCJhdXRvXCIpLHRoaXMuJGRyb3Bkb3duLmNzcyhhKX0sYy5wcm90b3R5cGUuX3Nob3dEcm9wZG93bj1mdW5jdGlvbihhKXt0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5hcHBlbmRUbyh0aGlzLiRkcm9wZG93blBhcmVudCksdGhpcy5fcG9zaXRpb25Ecm9wZG93bigpLHRoaXMuX3Jlc2l6ZURyb3Bkb3duKCl9LGN9KSxiLmRlZmluZShcInNlbGVjdDIvZHJvcGRvd24vbWluaW11bVJlc3VsdHNGb3JTZWFyY2hcIixbXSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7Zm9yKHZhciBjPTAsZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO2UuY2hpbGRyZW4/Yys9YShlLmNoaWxkcmVuKTpjKyt9cmV0dXJuIGN9ZnVuY3Rpb24gYihhLGIsYyxkKXt0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPWMuZ2V0KFwibWluaW11bVJlc3VsdHNGb3JTZWFyY2hcIiksdGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDwwJiYodGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaD0xLzApLGEuY2FsbCh0aGlzLGIsYyxkKX1yZXR1cm4gYi5wcm90b3R5cGUuc2hvd1NlYXJjaD1mdW5jdGlvbihiLGMpe3JldHVybiEoYShjLmRhdGEucmVzdWx0cyk8dGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCkmJmIuY2FsbCh0aGlzLGMpfSxifSksYi5kZWZpbmUoXCJzZWxlY3QyL2Ryb3Bkb3duL3NlbGVjdE9uQ2xvc2VcIixbXCIuLi91dGlsc1wiXSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7fXJldHVybiBiLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO2EuY2FsbCh0aGlzLGIsYyksYi5vbihcImNsb3NlXCIsZnVuY3Rpb24oYSl7ZC5faGFuZGxlU2VsZWN0T25DbG9zZShhKX0pfSxiLnByb3RvdHlwZS5faGFuZGxlU2VsZWN0T25DbG9zZT1mdW5jdGlvbihiLGMpe2lmKGMmJm51bGwhPWMub3JpZ2luYWxTZWxlY3QyRXZlbnQpe3ZhciBkPWMub3JpZ2luYWxTZWxlY3QyRXZlbnQ7aWYoXCJzZWxlY3RcIj09PWQuX3R5cGV8fFwidW5zZWxlY3RcIj09PWQuX3R5cGUpcmV0dXJufXZhciBlPXRoaXMuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7aWYoIShlLmxlbmd0aDwxKSl7dmFyIGY9YS5HZXREYXRhKGVbMF0sXCJkYXRhXCIpO251bGwhPWYuZWxlbWVudCYmZi5lbGVtZW50LnNlbGVjdGVkfHxudWxsPT1mLmVsZW1lbnQmJmYuc2VsZWN0ZWR8fHRoaXMudHJpZ2dlcihcInNlbGVjdFwiLHtkYXRhOmZ9KX19LGJ9KSxiLmRlZmluZShcInNlbGVjdDIvZHJvcGRvd24vY2xvc2VPblNlbGVjdFwiLFtdLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31yZXR1cm4gYS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpczthLmNhbGwodGhpcyxiLGMpLGIub24oXCJzZWxlY3RcIixmdW5jdGlvbihhKXtkLl9zZWxlY3RUcmlnZ2VyZWQoYSl9KSxiLm9uKFwidW5zZWxlY3RcIixmdW5jdGlvbihhKXtkLl9zZWxlY3RUcmlnZ2VyZWQoYSl9KX0sYS5wcm90b3R5cGUuX3NlbGVjdFRyaWdnZXJlZD1mdW5jdGlvbihhLGIpe3ZhciBjPWIub3JpZ2luYWxFdmVudDtjJiZjLmN0cmxLZXl8fHRoaXMudHJpZ2dlcihcImNsb3NlXCIse29yaWdpbmFsRXZlbnQ6YyxvcmlnaW5hbFNlbGVjdDJFdmVudDpifSl9LGF9KSxiLmRlZmluZShcInNlbGVjdDIvaTE4bi9lblwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJue2Vycm9yTG9hZGluZzpmdW5jdGlvbigpe3JldHVyblwiVGhlIHJlc3VsdHMgY291bGQgbm90IGJlIGxvYWRlZC5cIn0saW5wdXRUb29Mb25nOmZ1bmN0aW9uKGEpe3ZhciBiPWEuaW5wdXQubGVuZ3RoLWEubWF4aW11bSxjPVwiUGxlYXNlIGRlbGV0ZSBcIitiK1wiIGNoYXJhY3RlclwiO3JldHVybiAxIT1iJiYoYys9XCJzXCIpLGN9LGlucHV0VG9vU2hvcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJQbGVhc2UgZW50ZXIgXCIrKGEubWluaW11bS1hLmlucHV0Lmxlbmd0aCkrXCIgb3IgbW9yZSBjaGFyYWN0ZXJzXCJ9LGxvYWRpbmdNb3JlOmZ1bmN0aW9uKCl7cmV0dXJuXCJMb2FkaW5nIG1vcmUgcmVzdWx0c+KAplwifSxtYXhpbXVtU2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9XCJZb3UgY2FuIG9ubHkgc2VsZWN0IFwiK2EubWF4aW11bStcIiBpdGVtXCI7cmV0dXJuIDEhPWEubWF4aW11bSYmKGIrPVwic1wiKSxifSxub1Jlc3VsdHM6ZnVuY3Rpb24oKXtyZXR1cm5cIk5vIHJlc3VsdHMgZm91bmRcIn0sc2VhcmNoaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJTZWFyY2hpbmfigKZcIn19fSksYi5kZWZpbmUoXCJzZWxlY3QyL2RlZmF1bHRzXCIsW1wianF1ZXJ5XCIsXCJyZXF1aXJlXCIsXCIuL3Jlc3VsdHNcIixcIi4vc2VsZWN0aW9uL3NpbmdsZVwiLFwiLi9zZWxlY3Rpb24vbXVsdGlwbGVcIixcIi4vc2VsZWN0aW9uL3BsYWNlaG9sZGVyXCIsXCIuL3NlbGVjdGlvbi9hbGxvd0NsZWFyXCIsXCIuL3NlbGVjdGlvbi9zZWFyY2hcIixcIi4vc2VsZWN0aW9uL2V2ZW50UmVsYXlcIixcIi4vdXRpbHNcIixcIi4vdHJhbnNsYXRpb25cIixcIi4vZGlhY3JpdGljc1wiLFwiLi9kYXRhL3NlbGVjdFwiLFwiLi9kYXRhL2FycmF5XCIsXCIuL2RhdGEvYWpheFwiLFwiLi9kYXRhL3RhZ3NcIixcIi4vZGF0YS90b2tlbml6ZXJcIixcIi4vZGF0YS9taW5pbXVtSW5wdXRMZW5ndGhcIixcIi4vZGF0YS9tYXhpbXVtSW5wdXRMZW5ndGhcIixcIi4vZGF0YS9tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoXCIsXCIuL2Ryb3Bkb3duXCIsXCIuL2Ryb3Bkb3duL3NlYXJjaFwiLFwiLi9kcm9wZG93bi9oaWRlUGxhY2Vob2xkZXJcIixcIi4vZHJvcGRvd24vaW5maW5pdGVTY3JvbGxcIixcIi4vZHJvcGRvd24vYXR0YWNoQm9keVwiLFwiLi9kcm9wZG93bi9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaFwiLFwiLi9kcm9wZG93bi9zZWxlY3RPbkNsb3NlXCIsXCIuL2Ryb3Bkb3duL2Nsb3NlT25TZWxlY3RcIixcIi4vaTE4bi9lblwiXSxmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdSx2LHcseCx5LHosQSxCLEMpe2Z1bmN0aW9uIEQoKXt0aGlzLnJlc2V0KCl9cmV0dXJuIEQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGwpe2lmKGw9YS5leHRlbmQoITAse30sdGhpcy5kZWZhdWx0cyxsKSxudWxsPT1sLmRhdGFBZGFwdGVyKXtpZihudWxsIT1sLmFqYXg/bC5kYXRhQWRhcHRlcj1vOm51bGwhPWwuZGF0YT9sLmRhdGFBZGFwdGVyPW46bC5kYXRhQWRhcHRlcj1tLGwubWluaW11bUlucHV0TGVuZ3RoPjAmJihsLmRhdGFBZGFwdGVyPWouRGVjb3JhdGUobC5kYXRhQWRhcHRlcixyKSksbC5tYXhpbXVtSW5wdXRMZW5ndGg+MCYmKGwuZGF0YUFkYXB0ZXI9ai5EZWNvcmF0ZShsLmRhdGFBZGFwdGVyLHMpKSxsLm1heGltdW1TZWxlY3Rpb25MZW5ndGg+MCYmKGwuZGF0YUFkYXB0ZXI9ai5EZWNvcmF0ZShsLmRhdGFBZGFwdGVyLHQpKSxsLnRhZ3MmJihsLmRhdGFBZGFwdGVyPWouRGVjb3JhdGUobC5kYXRhQWRhcHRlcixwKSksbnVsbD09bC50b2tlblNlcGFyYXRvcnMmJm51bGw9PWwudG9rZW5pemVyfHwobC5kYXRhQWRhcHRlcj1qLkRlY29yYXRlKGwuZGF0YUFkYXB0ZXIscSkpLG51bGwhPWwucXVlcnkpe3ZhciBDPWIobC5hbWRCYXNlK1wiY29tcGF0L3F1ZXJ5XCIpO2wuZGF0YUFkYXB0ZXI9ai5EZWNvcmF0ZShsLmRhdGFBZGFwdGVyLEMpfWlmKG51bGwhPWwuaW5pdFNlbGVjdGlvbil7dmFyIEQ9YihsLmFtZEJhc2UrXCJjb21wYXQvaW5pdFNlbGVjdGlvblwiKTtsLmRhdGFBZGFwdGVyPWouRGVjb3JhdGUobC5kYXRhQWRhcHRlcixEKX19aWYobnVsbD09bC5yZXN1bHRzQWRhcHRlciYmKGwucmVzdWx0c0FkYXB0ZXI9YyxudWxsIT1sLmFqYXgmJihsLnJlc3VsdHNBZGFwdGVyPWouRGVjb3JhdGUobC5yZXN1bHRzQWRhcHRlcix4KSksbnVsbCE9bC5wbGFjZWhvbGRlciYmKGwucmVzdWx0c0FkYXB0ZXI9ai5EZWNvcmF0ZShsLnJlc3VsdHNBZGFwdGVyLHcpKSxsLnNlbGVjdE9uQ2xvc2UmJihsLnJlc3VsdHNBZGFwdGVyPWouRGVjb3JhdGUobC5yZXN1bHRzQWRhcHRlcixBKSkpLG51bGw9PWwuZHJvcGRvd25BZGFwdGVyKXtpZihsLm11bHRpcGxlKWwuZHJvcGRvd25BZGFwdGVyPXU7ZWxzZXt2YXIgRT1qLkRlY29yYXRlKHUsdik7bC5kcm9wZG93bkFkYXB0ZXI9RX1pZigwIT09bC5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCYmKGwuZHJvcGRvd25BZGFwdGVyPWouRGVjb3JhdGUobC5kcm9wZG93bkFkYXB0ZXIseikpLGwuY2xvc2VPblNlbGVjdCYmKGwuZHJvcGRvd25BZGFwdGVyPWouRGVjb3JhdGUobC5kcm9wZG93bkFkYXB0ZXIsQikpLG51bGwhPWwuZHJvcGRvd25Dc3NDbGFzc3x8bnVsbCE9bC5kcm9wZG93bkNzc3x8bnVsbCE9bC5hZGFwdERyb3Bkb3duQ3NzQ2xhc3Mpe3ZhciBGPWIobC5hbWRCYXNlK1wiY29tcGF0L2Ryb3Bkb3duQ3NzXCIpO2wuZHJvcGRvd25BZGFwdGVyPWouRGVjb3JhdGUobC5kcm9wZG93bkFkYXB0ZXIsRil9bC5kcm9wZG93bkFkYXB0ZXI9ai5EZWNvcmF0ZShsLmRyb3Bkb3duQWRhcHRlcix5KX1pZihudWxsPT1sLnNlbGVjdGlvbkFkYXB0ZXIpe2lmKGwubXVsdGlwbGU/bC5zZWxlY3Rpb25BZGFwdGVyPWU6bC5zZWxlY3Rpb25BZGFwdGVyPWQsbnVsbCE9bC5wbGFjZWhvbGRlciYmKGwuc2VsZWN0aW9uQWRhcHRlcj1qLkRlY29yYXRlKGwuc2VsZWN0aW9uQWRhcHRlcixmKSksbC5hbGxvd0NsZWFyJiYobC5zZWxlY3Rpb25BZGFwdGVyPWouRGVjb3JhdGUobC5zZWxlY3Rpb25BZGFwdGVyLGcpKSxsLm11bHRpcGxlJiYobC5zZWxlY3Rpb25BZGFwdGVyPWouRGVjb3JhdGUobC5zZWxlY3Rpb25BZGFwdGVyLGgpKSxudWxsIT1sLmNvbnRhaW5lckNzc0NsYXNzfHxudWxsIT1sLmNvbnRhaW5lckNzc3x8bnVsbCE9bC5hZGFwdENvbnRhaW5lckNzc0NsYXNzKXt2YXIgRz1iKGwuYW1kQmFzZStcImNvbXBhdC9jb250YWluZXJDc3NcIik7bC5zZWxlY3Rpb25BZGFwdGVyPWouRGVjb3JhdGUobC5zZWxlY3Rpb25BZGFwdGVyLEcpfWwuc2VsZWN0aW9uQWRhcHRlcj1qLkRlY29yYXRlKGwuc2VsZWN0aW9uQWRhcHRlcixpKX1pZihcInN0cmluZ1wiPT10eXBlb2YgbC5sYW5ndWFnZSlpZihsLmxhbmd1YWdlLmluZGV4T2YoXCItXCIpPjApe3ZhciBIPWwubGFuZ3VhZ2Uuc3BsaXQoXCItXCIpLEk9SFswXTtsLmxhbmd1YWdlPVtsLmxhbmd1YWdlLEldfWVsc2UgbC5sYW5ndWFnZT1bbC5sYW5ndWFnZV07aWYoYS5pc0FycmF5KGwubGFuZ3VhZ2UpKXt2YXIgSj1uZXcgaztsLmxhbmd1YWdlLnB1c2goXCJlblwiKTtmb3IodmFyIEs9bC5sYW5ndWFnZSxMPTA7TDxLLmxlbmd0aDtMKyspe3ZhciBNPUtbTF0sTj17fTt0cnl7Tj1rLmxvYWRQYXRoKE0pfWNhdGNoKGEpe3RyeXtNPXRoaXMuZGVmYXVsdHMuYW1kTGFuZ3VhZ2VCYXNlK00sTj1rLmxvYWRQYXRoKE0pfWNhdGNoKGEpe2wuZGVidWcmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGxhbmd1YWdlIGZpbGUgZm9yIFwiJytNKydcIiBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBsb2FkZWQuIEEgZmFsbGJhY2sgd2lsbCBiZSB1c2VkIGluc3RlYWQuJyk7Y29udGludWV9fUouZXh0ZW5kKE4pfWwudHJhbnNsYXRpb25zPUp9ZWxzZXt2YXIgTz1rLmxvYWRQYXRoKHRoaXMuZGVmYXVsdHMuYW1kTGFuZ3VhZ2VCYXNlK1wiZW5cIiksUD1uZXcgayhsLmxhbmd1YWdlKTtQLmV4dGVuZChPKSxsLnRyYW5zbGF0aW9ucz1QfXJldHVybiBsfSxELnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gbFthXXx8YX1yZXR1cm4gYS5yZXBsYWNlKC9bXlxcdTAwMDAtXFx1MDA3RV0vZyxiKX1mdW5jdGlvbiBjKGQsZSl7aWYoXCJcIj09PWEudHJpbShkLnRlcm0pKXJldHVybiBlO2lmKGUuY2hpbGRyZW4mJmUuY2hpbGRyZW4ubGVuZ3RoPjApe2Zvcih2YXIgZj1hLmV4dGVuZCghMCx7fSxlKSxnPWUuY2hpbGRyZW4ubGVuZ3RoLTE7Zz49MDtnLS0pe251bGw9PWMoZCxlLmNoaWxkcmVuW2ddKSYmZi5jaGlsZHJlbi5zcGxpY2UoZywxKX1yZXR1cm4gZi5jaGlsZHJlbi5sZW5ndGg+MD9mOmMoZCxmKX12YXIgaD1iKGUudGV4dCkudG9VcHBlckNhc2UoKSxpPWIoZC50ZXJtKS50b1VwcGVyQ2FzZSgpO3JldHVybiBoLmluZGV4T2YoaSk+LTE/ZTpudWxsfXRoaXMuZGVmYXVsdHM9e2FtZEJhc2U6XCIuL1wiLGFtZExhbmd1YWdlQmFzZTpcIi4vaTE4bi9cIixjbG9zZU9uU2VsZWN0OiEwLGRlYnVnOiExLGRyb3Bkb3duQXV0b1dpZHRoOiExLGVzY2FwZU1hcmt1cDpqLmVzY2FwZU1hcmt1cCxsYW5ndWFnZTpDLG1hdGNoZXI6YyxtaW5pbXVtSW5wdXRMZW5ndGg6MCxtYXhpbXVtSW5wdXRMZW5ndGg6MCxtYXhpbXVtU2VsZWN0aW9uTGVuZ3RoOjAsbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6MCxzZWxlY3RPbkNsb3NlOiExLHNvcnRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sdGVtcGxhdGVSZXN1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGV4dH0sdGVtcGxhdGVTZWxlY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGV4dH0sdGhlbWU6XCJkZWZhdWx0XCIsd2lkdGg6XCJyZXNvbHZlXCJ9fSxELnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYixjKXt2YXIgZD1hLmNhbWVsQ2FzZShiKSxlPXt9O2VbZF09Yzt2YXIgZj1qLl9jb252ZXJ0RGF0YShlKTthLmV4dGVuZCghMCx0aGlzLmRlZmF1bHRzLGYpfSxuZXcgRH0pLGIuZGVmaW5lKFwic2VsZWN0Mi9vcHRpb25zXCIsW1wicmVxdWlyZVwiLFwianF1ZXJ5XCIsXCIuL2RlZmF1bHRzXCIsXCIuL3V0aWxzXCJdLGZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYixlKXtpZih0aGlzLm9wdGlvbnM9YixudWxsIT1lJiZ0aGlzLmZyb21FbGVtZW50KGUpLHRoaXMub3B0aW9ucz1jLmFwcGx5KHRoaXMub3B0aW9ucyksZSYmZS5pcyhcImlucHV0XCIpKXt2YXIgZj1hKHRoaXMuZ2V0KFwiYW1kQmFzZVwiKStcImNvbXBhdC9pbnB1dERhdGFcIik7dGhpcy5vcHRpb25zLmRhdGFBZGFwdGVyPWQuRGVjb3JhdGUodGhpcy5vcHRpb25zLmRhdGFBZGFwdGVyLGYpfX1yZXR1cm4gZS5wcm90b3R5cGUuZnJvbUVsZW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGM9W1wic2VsZWN0MlwiXTtudWxsPT10aGlzLm9wdGlvbnMubXVsdGlwbGUmJih0aGlzLm9wdGlvbnMubXVsdGlwbGU9YS5wcm9wKFwibXVsdGlwbGVcIikpLG51bGw9PXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmKHRoaXMub3B0aW9ucy5kaXNhYmxlZD1hLnByb3AoXCJkaXNhYmxlZFwiKSksbnVsbD09dGhpcy5vcHRpb25zLmxhbmd1YWdlJiYoYS5wcm9wKFwibGFuZ1wiKT90aGlzLm9wdGlvbnMubGFuZ3VhZ2U9YS5wcm9wKFwibGFuZ1wiKS50b0xvd2VyQ2FzZSgpOmEuY2xvc2VzdChcIltsYW5nXVwiKS5wcm9wKFwibGFuZ1wiKSYmKHRoaXMub3B0aW9ucy5sYW5ndWFnZT1hLmNsb3Nlc3QoXCJbbGFuZ11cIikucHJvcChcImxhbmdcIikpKSxudWxsPT10aGlzLm9wdGlvbnMuZGlyJiYoYS5wcm9wKFwiZGlyXCIpP3RoaXMub3B0aW9ucy5kaXI9YS5wcm9wKFwiZGlyXCIpOmEuY2xvc2VzdChcIltkaXJdXCIpLnByb3AoXCJkaXJcIik/dGhpcy5vcHRpb25zLmRpcj1hLmNsb3Nlc3QoXCJbZGlyXVwiKS5wcm9wKFwiZGlyXCIpOnRoaXMub3B0aW9ucy5kaXI9XCJsdHJcIiksYS5wcm9wKFwiZGlzYWJsZWRcIix0aGlzLm9wdGlvbnMuZGlzYWJsZWQpLGEucHJvcChcIm11bHRpcGxlXCIsdGhpcy5vcHRpb25zLm11bHRpcGxlKSxkLkdldERhdGEoYVswXSxcInNlbGVjdDJUYWdzXCIpJiYodGhpcy5vcHRpb25zLmRlYnVnJiZ3aW5kb3cuY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgZGF0YS1zZWxlY3QyLXRhZ3NgIGF0dHJpYnV0ZSBoYXMgYmVlbiBjaGFuZ2VkIHRvIHVzZSB0aGUgYGRhdGEtZGF0YWAgYW5kIGBkYXRhLXRhZ3M9XCJ0cnVlXCJgIGF0dHJpYnV0ZXMgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgU2VsZWN0Mi4nKSxkLlN0b3JlRGF0YShhWzBdLFwiZGF0YVwiLGQuR2V0RGF0YShhWzBdLFwic2VsZWN0MlRhZ3NcIikpLGQuU3RvcmVEYXRhKGFbMF0sXCJ0YWdzXCIsITApKSxkLkdldERhdGEoYVswXSxcImFqYXhVcmxcIikmJih0aGlzLm9wdGlvbnMuZGVidWcmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihcIlNlbGVjdDI6IFRoZSBgZGF0YS1hamF4LXVybGAgYXR0cmlidXRlIGhhcyBiZWVuIGNoYW5nZWQgdG8gYGRhdGEtYWpheC0tdXJsYCBhbmQgc3VwcG9ydCBmb3IgdGhlIG9sZCBhdHRyaWJ1dGUgd2lsbCBiZSByZW1vdmVkIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBTZWxlY3QyLlwiKSxhLmF0dHIoXCJhamF4LS11cmxcIixkLkdldERhdGEoYVswXSxcImFqYXhVcmxcIikpLGQuU3RvcmVEYXRhKGFbMF0sXCJhamF4LVVybFwiLGQuR2V0RGF0YShhWzBdLFwiYWpheFVybFwiKSkpO3ZhciBlPXt9O2U9Yi5mbi5qcXVlcnkmJlwiMS5cIj09Yi5mbi5qcXVlcnkuc3Vic3RyKDAsMikmJmFbMF0uZGF0YXNldD9iLmV4dGVuZCghMCx7fSxhWzBdLmRhdGFzZXQsZC5HZXREYXRhKGFbMF0pKTpkLkdldERhdGEoYVswXSk7dmFyIGY9Yi5leHRlbmQoITAse30sZSk7Zj1kLl9jb252ZXJ0RGF0YShmKTtmb3IodmFyIGcgaW4gZiliLmluQXJyYXkoZyxjKT4tMXx8KGIuaXNQbGFpbk9iamVjdCh0aGlzLm9wdGlvbnNbZ10pP2IuZXh0ZW5kKHRoaXMub3B0aW9uc1tnXSxmW2ddKTp0aGlzLm9wdGlvbnNbZ109ZltnXSk7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zW2FdfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt0aGlzLm9wdGlvbnNbYV09Yn0sZX0pLGIuZGVmaW5lKFwic2VsZWN0Mi9jb3JlXCIsW1wianF1ZXJ5XCIsXCIuL29wdGlvbnNcIixcIi4vdXRpbHNcIixcIi4va2V5c1wiXSxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1mdW5jdGlvbihhLGQpe251bGwhPWMuR2V0RGF0YShhWzBdLFwic2VsZWN0MlwiKSYmYy5HZXREYXRhKGFbMF0sXCJzZWxlY3QyXCIpLmRlc3Ryb3koKSx0aGlzLiRlbGVtZW50PWEsdGhpcy5pZD10aGlzLl9nZW5lcmF0ZUlkKGEpLGQ9ZHx8e30sdGhpcy5vcHRpb25zPW5ldyBiKGQsYSksZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZj1hLmF0dHIoXCJ0YWJpbmRleFwiKXx8MDtjLlN0b3JlRGF0YShhWzBdLFwib2xkLXRhYmluZGV4XCIsZiksYS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpO3ZhciBnPXRoaXMub3B0aW9ucy5nZXQoXCJkYXRhQWRhcHRlclwiKTt0aGlzLmRhdGFBZGFwdGVyPW5ldyBnKGEsdGhpcy5vcHRpb25zKTt2YXIgaD10aGlzLnJlbmRlcigpO3RoaXMuX3BsYWNlQ29udGFpbmVyKGgpO3ZhciBpPXRoaXMub3B0aW9ucy5nZXQoXCJzZWxlY3Rpb25BZGFwdGVyXCIpO3RoaXMuc2VsZWN0aW9uPW5ldyBpKGEsdGhpcy5vcHRpb25zKSx0aGlzLiRzZWxlY3Rpb249dGhpcy5zZWxlY3Rpb24ucmVuZGVyKCksdGhpcy5zZWxlY3Rpb24ucG9zaXRpb24odGhpcy4kc2VsZWN0aW9uLGgpO3ZhciBqPXRoaXMub3B0aW9ucy5nZXQoXCJkcm9wZG93bkFkYXB0ZXJcIik7dGhpcy5kcm9wZG93bj1uZXcgaihhLHRoaXMub3B0aW9ucyksdGhpcy4kZHJvcGRvd249dGhpcy5kcm9wZG93bi5yZW5kZXIoKSx0aGlzLmRyb3Bkb3duLnBvc2l0aW9uKHRoaXMuJGRyb3Bkb3duLGgpO3ZhciBrPXRoaXMub3B0aW9ucy5nZXQoXCJyZXN1bHRzQWRhcHRlclwiKTt0aGlzLnJlc3VsdHM9bmV3IGsoYSx0aGlzLm9wdGlvbnMsdGhpcy5kYXRhQWRhcHRlciksdGhpcy4kcmVzdWx0cz10aGlzLnJlc3VsdHMucmVuZGVyKCksdGhpcy5yZXN1bHRzLnBvc2l0aW9uKHRoaXMuJHJlc3VsdHMsdGhpcy4kZHJvcGRvd24pO3ZhciBsPXRoaXM7dGhpcy5fYmluZEFkYXB0ZXJzKCksdGhpcy5fcmVnaXN0ZXJEb21FdmVudHMoKSx0aGlzLl9yZWdpc3RlckRhdGFFdmVudHMoKSx0aGlzLl9yZWdpc3RlclNlbGVjdGlvbkV2ZW50cygpLHRoaXMuX3JlZ2lzdGVyRHJvcGRvd25FdmVudHMoKSx0aGlzLl9yZWdpc3RlclJlc3VsdHNFdmVudHMoKSx0aGlzLl9yZWdpc3RlckV2ZW50cygpLHRoaXMuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbihhKXtsLnRyaWdnZXIoXCJzZWxlY3Rpb246dXBkYXRlXCIse2RhdGE6YX0pfSksYS5hZGRDbGFzcyhcInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGVcIiksYS5hdHRyKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIiksdGhpcy5fc3luY0F0dHJpYnV0ZXMoKSxjLlN0b3JlRGF0YShhWzBdLFwic2VsZWN0MlwiLHRoaXMpLGEuZGF0YShcInNlbGVjdDJcIix0aGlzKX07cmV0dXJuIGMuRXh0ZW5kKGUsYy5PYnNlcnZhYmxlKSxlLnByb3RvdHlwZS5fZ2VuZXJhdGVJZD1mdW5jdGlvbihhKXt2YXIgYj1cIlwiO3JldHVybiBiPW51bGwhPWEuYXR0cihcImlkXCIpP2EuYXR0cihcImlkXCIpOm51bGwhPWEuYXR0cihcIm5hbWVcIik/YS5hdHRyKFwibmFtZVwiKStcIi1cIitjLmdlbmVyYXRlQ2hhcnMoMik6Yy5nZW5lcmF0ZUNoYXJzKDQpLGI9Yi5yZXBsYWNlKC8oOnxcXC58XFxbfFxcXXwsKS9nLFwiXCIpLGI9XCJzZWxlY3QyLVwiK2J9LGUucHJvdG90eXBlLl9wbGFjZUNvbnRhaW5lcj1mdW5jdGlvbihhKXthLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpO3ZhciBiPXRoaXMuX3Jlc29sdmVXaWR0aCh0aGlzLiRlbGVtZW50LHRoaXMub3B0aW9ucy5nZXQoXCJ3aWR0aFwiKSk7bnVsbCE9YiYmYS5jc3MoXCJ3aWR0aFwiLGIpfSxlLnByb3RvdHlwZS5fcmVzb2x2ZVdpZHRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9L153aWR0aDooKFstK10/KFswLTldKlxcLik/WzAtOV0rKShweHxlbXxleHwlfGlufGNtfG1tfHB0fHBjKSkvaTtpZihcInJlc29sdmVcIj09Yil7dmFyIGQ9dGhpcy5fcmVzb2x2ZVdpZHRoKGEsXCJzdHlsZVwiKTtyZXR1cm4gbnVsbCE9ZD9kOnRoaXMuX3Jlc29sdmVXaWR0aChhLFwiZWxlbWVudFwiKX1pZihcImVsZW1lbnRcIj09Yil7dmFyIGU9YS5vdXRlcldpZHRoKCExKTtyZXR1cm4gZTw9MD9cImF1dG9cIjplK1wicHhcIn1pZihcInN0eWxlXCI9PWIpe3ZhciBmPWEuYXR0cihcInN0eWxlXCIpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBmKXJldHVybiBudWxsO2Zvcih2YXIgZz1mLnNwbGl0KFwiO1wiKSxoPTAsaT1nLmxlbmd0aDtoPGk7aCs9MSl7dmFyIGo9Z1toXS5yZXBsYWNlKC9cXHMvZyxcIlwiKSxrPWoubWF0Y2goYyk7aWYobnVsbCE9PWsmJmsubGVuZ3RoPj0xKXJldHVybiBrWzFdfXJldHVybiBudWxsfXJldHVybiBifSxlLnByb3RvdHlwZS5fYmluZEFkYXB0ZXJzPWZ1bmN0aW9uKCl7dGhpcy5kYXRhQWRhcHRlci5iaW5kKHRoaXMsdGhpcy4kY29udGFpbmVyKSx0aGlzLnNlbGVjdGlvbi5iaW5kKHRoaXMsdGhpcy4kY29udGFpbmVyKSx0aGlzLmRyb3Bkb3duLmJpbmQodGhpcyx0aGlzLiRjb250YWluZXIpLHRoaXMucmVzdWx0cy5iaW5kKHRoaXMsdGhpcy4kY29udGFpbmVyKX0sZS5wcm90b3R5cGUuX3JlZ2lzdGVyRG9tRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczt0aGlzLiRlbGVtZW50Lm9uKFwiY2hhbmdlLnNlbGVjdDJcIixmdW5jdGlvbigpe2IuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbihhKXtiLnRyaWdnZXIoXCJzZWxlY3Rpb246dXBkYXRlXCIse2RhdGE6YX0pfSl9KSx0aGlzLiRlbGVtZW50Lm9uKFwiZm9jdXMuc2VsZWN0MlwiLGZ1bmN0aW9uKGEpe2IudHJpZ2dlcihcImZvY3VzXCIsYSl9KSx0aGlzLl9zeW5jQT1jLmJpbmQodGhpcy5fc3luY0F0dHJpYnV0ZXMsdGhpcyksdGhpcy5fc3luY1M9Yy5iaW5kKHRoaXMuX3N5bmNTdWJ0cmVlLHRoaXMpLHRoaXMuJGVsZW1lbnRbMF0uYXR0YWNoRXZlbnQmJnRoaXMuJGVsZW1lbnRbMF0uYXR0YWNoRXZlbnQoXCJvbnByb3BlcnR5Y2hhbmdlXCIsdGhpcy5fc3luY0EpO3ZhciBkPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXI7bnVsbCE9ZD8odGhpcy5fb2JzZXJ2ZXI9bmV3IGQoZnVuY3Rpb24oYyl7YS5lYWNoKGMsYi5fc3luY0EpLGEuZWFjaChjLGIuX3N5bmNTKX0pLHRoaXMuX29ic2VydmVyLm9ic2VydmUodGhpcy4kZWxlbWVudFswXSx7YXR0cmlidXRlczohMCxjaGlsZExpc3Q6ITAsc3VidHJlZTohMX0pKTp0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXImJih0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIixiLl9zeW5jQSwhMSksdGhpcy4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZUluc2VydGVkXCIsYi5fc3luY1MsITEpLHRoaXMuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsYi5fc3luY1MsITEpKX0sZS5wcm90b3R5cGUuX3JlZ2lzdGVyRGF0YUV2ZW50cz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5kYXRhQWRhcHRlci5vbihcIipcIixmdW5jdGlvbihiLGMpe2EudHJpZ2dlcihiLGMpfSl9LGUucHJvdG90eXBlLl9yZWdpc3RlclNlbGVjdGlvbkV2ZW50cz1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1bXCJ0b2dnbGVcIixcImZvY3VzXCJdO3RoaXMuc2VsZWN0aW9uLm9uKFwidG9nZ2xlXCIsZnVuY3Rpb24oKXtiLnRvZ2dsZURyb3Bkb3duKCl9KSx0aGlzLnNlbGVjdGlvbi5vbihcImZvY3VzXCIsZnVuY3Rpb24oYSl7Yi5mb2N1cyhhKX0pLHRoaXMuc2VsZWN0aW9uLm9uKFwiKlwiLGZ1bmN0aW9uKGQsZSl7LTE9PT1hLmluQXJyYXkoZCxjKSYmYi50cmlnZ2VyKGQsZSl9KX0sZS5wcm90b3R5cGUuX3JlZ2lzdGVyRHJvcGRvd25FdmVudHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuZHJvcGRvd24ub24oXCIqXCIsZnVuY3Rpb24oYixjKXthLnRyaWdnZXIoYixjKX0pfSxlLnByb3RvdHlwZS5fcmVnaXN0ZXJSZXN1bHRzRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLnJlc3VsdHMub24oXCIqXCIsZnVuY3Rpb24oYixjKXthLnRyaWdnZXIoYixjKX0pfSxlLnByb3RvdHlwZS5fcmVnaXN0ZXJFdmVudHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMub24oXCJvcGVuXCIsZnVuY3Rpb24oKXthLiRjb250YWluZXIuYWRkQ2xhc3MoXCJzZWxlY3QyLWNvbnRhaW5lci0tb3BlblwiKX0pLHRoaXMub24oXCJjbG9zZVwiLGZ1bmN0aW9uKCl7YS4kY29udGFpbmVyLnJlbW92ZUNsYXNzKFwic2VsZWN0Mi1jb250YWluZXItLW9wZW5cIil9KSx0aGlzLm9uKFwiZW5hYmxlXCIsZnVuY3Rpb24oKXthLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoXCJzZWxlY3QyLWNvbnRhaW5lci0tZGlzYWJsZWRcIil9KSx0aGlzLm9uKFwiZGlzYWJsZVwiLGZ1bmN0aW9uKCl7YS4kY29udGFpbmVyLmFkZENsYXNzKFwic2VsZWN0Mi1jb250YWluZXItLWRpc2FibGVkXCIpfSksdGhpcy5vbihcImJsdXJcIixmdW5jdGlvbigpe2EuJGNvbnRhaW5lci5yZW1vdmVDbGFzcyhcInNlbGVjdDItY29udGFpbmVyLS1mb2N1c1wiKX0pLHRoaXMub24oXCJxdWVyeVwiLGZ1bmN0aW9uKGIpe2EuaXNPcGVuKCl8fGEudHJpZ2dlcihcIm9wZW5cIix7fSksdGhpcy5kYXRhQWRhcHRlci5xdWVyeShiLGZ1bmN0aW9uKGMpe2EudHJpZ2dlcihcInJlc3VsdHM6YWxsXCIse2RhdGE6YyxxdWVyeTpifSl9KX0pLHRoaXMub24oXCJxdWVyeTphcHBlbmRcIixmdW5jdGlvbihiKXt0aGlzLmRhdGFBZGFwdGVyLnF1ZXJ5KGIsZnVuY3Rpb24oYyl7YS50cmlnZ2VyKFwicmVzdWx0czphcHBlbmRcIix7ZGF0YTpjLHF1ZXJ5OmJ9KX0pfSksdGhpcy5vbihcImtleXByZXNzXCIsZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaDthLmlzT3BlbigpP2M9PT1kLkVTQ3x8Yz09PWQuVEFCfHxjPT09ZC5VUCYmYi5hbHRLZXk/KGEuY2xvc2UoKSxiLnByZXZlbnREZWZhdWx0KCkpOmM9PT1kLkVOVEVSPyhhLnRyaWdnZXIoXCJyZXN1bHRzOnNlbGVjdFwiLHt9KSxiLnByZXZlbnREZWZhdWx0KCkpOmM9PT1kLlNQQUNFJiZiLmN0cmxLZXk/KGEudHJpZ2dlcihcInJlc3VsdHM6dG9nZ2xlXCIse30pLGIucHJldmVudERlZmF1bHQoKSk6Yz09PWQuVVA/KGEudHJpZ2dlcihcInJlc3VsdHM6cHJldmlvdXNcIix7fSksYi5wcmV2ZW50RGVmYXVsdCgpKTpjPT09ZC5ET1dOJiYoYS50cmlnZ2VyKFwicmVzdWx0czpuZXh0XCIse30pLGIucHJldmVudERlZmF1bHQoKSk6KGM9PT1kLkVOVEVSfHxjPT09ZC5TUEFDRXx8Yz09PWQuRE9XTiYmYi5hbHRLZXkpJiYoYS5vcGVuKCksYi5wcmV2ZW50RGVmYXVsdCgpKX0pfSxlLnByb3RvdHlwZS5fc3luY0F0dHJpYnV0ZXM9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuc2V0KFwiZGlzYWJsZWRcIix0aGlzLiRlbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiKSksdGhpcy5vcHRpb25zLmdldChcImRpc2FibGVkXCIpPyh0aGlzLmlzT3BlbigpJiZ0aGlzLmNsb3NlKCksdGhpcy50cmlnZ2VyKFwiZGlzYWJsZVwiLHt9KSk6dGhpcy50cmlnZ2VyKFwiZW5hYmxlXCIse30pfSxlLnByb3RvdHlwZS5fc3luY1N1YnRyZWU9ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMSxkPXRoaXM7aWYoIWF8fCFhLnRhcmdldHx8XCJPUFRJT05cIj09PWEudGFyZ2V0Lm5vZGVOYW1lfHxcIk9QVEdST1VQXCI9PT1hLnRhcmdldC5ub2RlTmFtZSl7aWYoYilpZihiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcy5sZW5ndGg+MClmb3IodmFyIGU9MDtlPGIuYWRkZWROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgZj1iLmFkZGVkTm9kZXNbZV07Zi5zZWxlY3RlZCYmKGM9ITApfWVsc2UgYi5yZW1vdmVkTm9kZXMmJmIucmVtb3ZlZE5vZGVzLmxlbmd0aD4wJiYoYz0hMCk7ZWxzZSBjPSEwO2MmJnRoaXMuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbihhKXtkLnRyaWdnZXIoXCJzZWxlY3Rpb246dXBkYXRlXCIse2RhdGE6YX0pfSl9fSxlLnByb3RvdHlwZS50cmlnZ2VyPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5fX3N1cGVyX18udHJpZ2dlcixkPXtvcGVuOlwib3BlbmluZ1wiLGNsb3NlOlwiY2xvc2luZ1wiLHNlbGVjdDpcInNlbGVjdGluZ1wiLHVuc2VsZWN0OlwidW5zZWxlY3RpbmdcIixjbGVhcjpcImNsZWFyaW5nXCJ9O2lmKHZvaWQgMD09PWImJihiPXt9KSxhIGluIGQpe3ZhciBmPWRbYV0sZz17cHJldmVudGVkOiExLG5hbWU6YSxhcmdzOmJ9O2lmKGMuY2FsbCh0aGlzLGYsZyksZy5wcmV2ZW50ZWQpcmV0dXJuIHZvaWQoYi5wcmV2ZW50ZWQ9ITApfWMuY2FsbCh0aGlzLGEsYil9LGUucHJvdG90eXBlLnRvZ2dsZURyb3Bkb3duPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmdldChcImRpc2FibGVkXCIpfHwodGhpcy5pc09wZW4oKT90aGlzLmNsb3NlKCk6dGhpcy5vcGVuKCkpfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dGhpcy5pc09wZW4oKXx8dGhpcy50cmlnZ2VyKFwicXVlcnlcIix7fSl9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc09wZW4oKSYmdGhpcy50cmlnZ2VyKFwiY2xvc2VcIix7fSl9LGUucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRjb250YWluZXIuaGFzQ2xhc3MoXCJzZWxlY3QyLWNvbnRhaW5lci0tb3BlblwiKX0sZS5wcm90b3R5cGUuaGFzRm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKFwic2VsZWN0Mi1jb250YWluZXItLWZvY3VzXCIpfSxlLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbihhKXt0aGlzLmhhc0ZvY3VzKCl8fCh0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJzZWxlY3QyLWNvbnRhaW5lci0tZm9jdXNcIiksdGhpcy50cmlnZ2VyKFwiZm9jdXNcIix7fSkpfSxlLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zLmdldChcImRlYnVnXCIpJiZ3aW5kb3cuY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MihcImVuYWJsZVwiKWAgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBsYXRlciBTZWxlY3QyIHZlcnNpb25zLiBVc2UgJGVsZW1lbnQucHJvcChcImRpc2FibGVkXCIpIGluc3RlYWQuJyksbnVsbCE9YSYmMCE9PWEubGVuZ3RofHwoYT1bITBdKTt2YXIgYj0hYVswXTt0aGlzLiRlbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLGIpfSxlLnByb3RvdHlwZS5kYXRhPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmdldChcImRlYnVnXCIpJiZhcmd1bWVudHMubGVuZ3RoPjAmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybignU2VsZWN0MjogRGF0YSBjYW4gbm8gbG9uZ2VyIGJlIHNldCB1c2luZyBgc2VsZWN0MihcImRhdGFcIilgLiBZb3Ugc2hvdWxkIGNvbnNpZGVyIHNldHRpbmcgdGhlIHZhbHVlIGluc3RlYWQgdXNpbmcgYCRlbGVtZW50LnZhbCgpYC4nKTt2YXIgYT1bXTtyZXR1cm4gdGhpcy5kYXRhQWRhcHRlci5jdXJyZW50KGZ1bmN0aW9uKGIpe2E9Yn0pLGF9LGUucHJvdG90eXBlLnZhbD1mdW5jdGlvbihiKXtpZih0aGlzLm9wdGlvbnMuZ2V0KFwiZGVidWdcIikmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybignU2VsZWN0MjogVGhlIGBzZWxlY3QyKFwidmFsXCIpYCBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGxhdGVyIFNlbGVjdDIgdmVyc2lvbnMuIFVzZSAkZWxlbWVudC52YWwoKSBpbnN0ZWFkLicpLG51bGw9PWJ8fDA9PT1iLmxlbmd0aClyZXR1cm4gdGhpcy4kZWxlbWVudC52YWwoKTt2YXIgYz1iWzBdO2EuaXNBcnJheShjKSYmKGM9YS5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1N0cmluZygpfSkpLHRoaXMuJGVsZW1lbnQudmFsKGMpLnRyaWdnZXIoXCJjaGFuZ2VcIil9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLiRjb250YWluZXIucmVtb3ZlKCksdGhpcy4kZWxlbWVudFswXS5kZXRhY2hFdmVudCYmdGhpcy4kZWxlbWVudFswXS5kZXRhY2hFdmVudChcIm9ucHJvcGVydHljaGFuZ2VcIix0aGlzLl9zeW5jQSksbnVsbCE9dGhpcy5fb2JzZXJ2ZXI/KHRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKSx0aGlzLl9vYnNlcnZlcj1udWxsKTp0aGlzLiRlbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXImJih0aGlzLiRlbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIix0aGlzLl9zeW5jQSwhMSksdGhpcy4kZWxlbWVudFswXS5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NTm9kZUluc2VydGVkXCIsdGhpcy5fc3luY1MsITEpLHRoaXMuJGVsZW1lbnRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsdGhpcy5fc3luY1MsITEpKSx0aGlzLl9zeW5jQT1udWxsLHRoaXMuX3N5bmNTPW51bGwsdGhpcy4kZWxlbWVudC5vZmYoXCIuc2VsZWN0MlwiKSx0aGlzLiRlbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiLGMuR2V0RGF0YSh0aGlzLiRlbGVtZW50WzBdLFwib2xkLXRhYmluZGV4XCIpKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwic2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZVwiKSx0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWhpZGRlblwiLFwiZmFsc2VcIiksYy5SZW1vdmVEYXRhKHRoaXMuJGVsZW1lbnRbMF0pLHRoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YShcInNlbGVjdDJcIiksdGhpcy5kYXRhQWRhcHRlci5kZXN0cm95KCksdGhpcy5zZWxlY3Rpb24uZGVzdHJveSgpLHRoaXMuZHJvcGRvd24uZGVzdHJveSgpLHRoaXMucmVzdWx0cy5kZXN0cm95KCksdGhpcy5kYXRhQWRhcHRlcj1udWxsLHRoaXMuc2VsZWN0aW9uPW51bGwsdGhpcy5kcm9wZG93bj1udWxsLHRoaXMucmVzdWx0cz1udWxsfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYj1hKCc8c3BhbiBjbGFzcz1cInNlbGVjdDIgc2VsZWN0Mi1jb250YWluZXJcIj48c3BhbiBjbGFzcz1cInNlbGVjdGlvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImRyb3Bkb3duLXdyYXBwZXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9zcGFuPicpO3JldHVybiBiLmF0dHIoXCJkaXJcIix0aGlzLm9wdGlvbnMuZ2V0KFwiZGlyXCIpKSx0aGlzLiRjb250YWluZXI9Yix0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJzZWxlY3QyLWNvbnRhaW5lci0tXCIrdGhpcy5vcHRpb25zLmdldChcInRoZW1lXCIpKSxjLlN0b3JlRGF0YShiWzBdLFwiZWxlbWVudFwiLHRoaXMuJGVsZW1lbnQpLGJ9LGV9KSxiLmRlZmluZShcImpxdWVyeS1tb3VzZXdoZWVsXCIsW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBhfSksYi5kZWZpbmUoXCJqcXVlcnkuc2VsZWN0MlwiLFtcImpxdWVyeVwiLFwianF1ZXJ5LW1vdXNld2hlZWxcIixcIi4vc2VsZWN0Mi9jb3JlXCIsXCIuL3NlbGVjdDIvZGVmYXVsdHNcIixcIi4vc2VsZWN0Mi91dGlsc1wiXSxmdW5jdGlvbihhLGIsYyxkLGUpe2lmKG51bGw9PWEuZm4uc2VsZWN0Mil7dmFyIGY9W1wib3BlblwiLFwiY2xvc2VcIixcImRlc3Ryb3lcIl07YS5mbi5zZWxlY3QyPWZ1bmN0aW9uKGIpe2lmKFwib2JqZWN0XCI9PXR5cGVvZihiPWJ8fHt9KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YS5leHRlbmQoITAse30sYik7bmV3IGMoYSh0aGlzKSxkKX0pLHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe3ZhciBkLGc9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYT1lLkdldERhdGEodGhpcyxcInNlbGVjdDJcIik7bnVsbD09YSYmd2luZG93LmNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IoXCJUaGUgc2VsZWN0MignXCIrYitcIicpIG1ldGhvZCB3YXMgY2FsbGVkIG9uIGFuIGVsZW1lbnQgdGhhdCBpcyBub3QgdXNpbmcgU2VsZWN0Mi5cIiksZD1hW2JdLmFwcGx5KGEsZyl9KSxhLmluQXJyYXkoYixmKT4tMT90aGlzOmR9dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgZm9yIFNlbGVjdDI6IFwiK2IpfX1yZXR1cm4gbnVsbD09YS5mbi5zZWxlY3QyLmRlZmF1bHRzJiYoYS5mbi5zZWxlY3QyLmRlZmF1bHRzPWQpLGN9KSx7ZGVmaW5lOmIuZGVmaW5lLHJlcXVpcmU6Yi5yZXF1aXJlfX0oKSxjPWIucmVxdWlyZShcImpxdWVyeS5zZWxlY3QyXCIpO3JldHVybiBhLmZuLnNlbGVjdDIuYW1kPWIsY30pO1xuLyohIGxpZ2h0Z2FsbGVyeSAtIHYxLjYuMTIgLSAyMDE5LTAyLTE5XG4qIGh0dHA6Ly9zYWNoaW5jaG9vbHVyLmdpdGh1Yi5pby9saWdodEdhbGxlcnkvXG4qIENvcHlyaWdodCAoYykgMjAxOSBTYWNoaW4gTjsgTGljZW5zZWQgR1BMdjMgKi9cbiFmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGEualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIsZCl7aWYodGhpcy5lbD1iLHRoaXMuJGVsPWEoYiksdGhpcy5zPWEuZXh0ZW5kKHt9LGMsZCksdGhpcy5zLmR5bmFtaWMmJlwidW5kZWZpbmVkXCIhPT10aGlzLnMuZHluYW1pY0VsJiZ0aGlzLnMuZHluYW1pY0VsLmNvbnN0cnVjdG9yPT09QXJyYXkmJiF0aGlzLnMuZHluYW1pY0VsLmxlbmd0aCl0aHJvd1wiV2hlbiB1c2luZyBkeW5hbWljIG1vZGUsIHlvdSBtdXN0IGFsc28gZGVmaW5lIGR5bmFtaWNFbCBhcyBhbiBBcnJheS5cIjtyZXR1cm4gdGhpcy5tb2R1bGVzPXt9LHRoaXMubEdhbGxlcnlPbj0hMSx0aGlzLmxnQnVzeT0hMSx0aGlzLmhpZGVCYXJ0aW1lb3V0PSExLHRoaXMuaXNUb3VjaD1cIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMucy5zbGlkZUVuZEFuaW1hdG9pbiYmKHRoaXMucy5oaWRlQ29udHJvbE9uRW5kPSExKSx0aGlzLnMuZHluYW1pYz90aGlzLiRpdGVtcz10aGlzLnMuZHluYW1pY0VsOlwidGhpc1wiPT09dGhpcy5zLnNlbGVjdG9yP3RoaXMuJGl0ZW1zPXRoaXMuJGVsOlwiXCIhPT10aGlzLnMuc2VsZWN0b3I/dGhpcy5zLnNlbGVjdFdpdGhpbj90aGlzLiRpdGVtcz1hKHRoaXMucy5zZWxlY3RXaXRoaW4pLmZpbmQodGhpcy5zLnNlbGVjdG9yKTp0aGlzLiRpdGVtcz10aGlzLiRlbC5maW5kKGEodGhpcy5zLnNlbGVjdG9yKSk6dGhpcy4kaXRlbXM9dGhpcy4kZWwuY2hpbGRyZW4oKSx0aGlzLiRzbGlkZT1cIlwiLHRoaXMuJG91dGVyPVwiXCIsdGhpcy5pbml0KCksdGhpc312YXIgYz17bW9kZTpcImxnLXNsaWRlXCIsY3NzRWFzaW5nOlwiZWFzZVwiLGVhc2luZzpcImxpbmVhclwiLHNwZWVkOjYwMCxoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsYWRkQ2xhc3M6XCJcIixzdGFydENsYXNzOlwibGctc3RhcnQtem9vbVwiLGJhY2tkcm9wRHVyYXRpb246MTUwLGhpZGVCYXJzRGVsYXk6NmUzLHVzZUxlZnQ6ITEsY2xvc2FibGU6ITAsbG9vcDohMCxlc2NLZXk6ITAsa2V5UHJlc3M6ITAsY29udHJvbHM6ITAsc2xpZGVFbmRBbmltYXRvaW46ITAsaGlkZUNvbnRyb2xPbkVuZDohMSxtb3VzZXdoZWVsOiEwLGdldENhcHRpb25Gcm9tVGl0bGVPckFsdDohMCxhcHBlbmRTdWJIdG1sVG86XCIubGctc3ViLWh0bWxcIixzdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZTohMSxwcmVsb2FkOjEsc2hvd0FmdGVyTG9hZDohMCxzZWxlY3RvcjpcIlwiLHNlbGVjdFdpdGhpbjpcIlwiLG5leHRIdG1sOlwiXCIscHJldkh0bWw6XCJcIixpbmRleDohMSxpZnJhbWVNYXhXaWR0aDpcIjEwMCVcIixkb3dubG9hZDohMCxjb3VudGVyOiEwLGFwcGVuZENvdW50ZXJUbzpcIi5sZy10b29sYmFyXCIsc3dpcGVUaHJlc2hvbGQ6NTAsZW5hYmxlU3dpcGU6ITAsZW5hYmxlRHJhZzohMCxkeW5hbWljOiExLGR5bmFtaWNFbDpbXSxnYWxsZXJ5SWQ6MX07Yi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBiPXRoaXM7Yi5zLnByZWxvYWQ+Yi4kaXRlbXMubGVuZ3RoJiYoYi5zLnByZWxvYWQ9Yi4kaXRlbXMubGVuZ3RoKTt2YXIgYz13aW5kb3cubG9jYXRpb24uaGFzaDtjLmluZGV4T2YoXCJsZz1cIit0aGlzLnMuZ2FsbGVyeUlkKT4wJiYoYi5pbmRleD1wYXJzZUludChjLnNwbGl0KFwiJnNsaWRlPVwiKVsxXSwxMCksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1mcm9tLWhhc2hcIiksYShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1vblwiKXx8KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmJ1aWxkKGIuaW5kZXgpfSksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1vblwiKSkpLGIucy5keW5hbWljPyhiLiRlbC50cmlnZ2VyKFwib25CZWZvcmVPcGVuLmxnXCIpLGIuaW5kZXg9Yi5zLmluZGV4fHwwLGEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctb25cIil8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmJ1aWxkKGIuaW5kZXgpLGEoXCJib2R5XCIpLmFkZENsYXNzKFwibGctb25cIil9KSk6Yi4kaXRlbXMub24oXCJjbGljay5sZ2N1c3RvbVwiLGZ1bmN0aW9uKGMpe3RyeXtjLnByZXZlbnREZWZhdWx0KCksYy5wcmV2ZW50RGVmYXVsdCgpfWNhdGNoKGEpe2MucmV0dXJuVmFsdWU9ITF9Yi4kZWwudHJpZ2dlcihcIm9uQmVmb3JlT3Blbi5sZ1wiKSxiLmluZGV4PWIucy5pbmRleHx8Yi4kaXRlbXMuaW5kZXgodGhpcyksYShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1vblwiKXx8KGIuYnVpbGQoYi5pbmRleCksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1vblwiKSl9KX0sYi5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztjLnN0cnVjdHVyZSgpLGEuZWFjaChhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLGZ1bmN0aW9uKGIpe2MubW9kdWxlc1tiXT1uZXcgYS5mbi5saWdodEdhbGxlcnkubW9kdWxlc1tiXShjLmVsKX0pLGMuc2xpZGUoYiwhMSwhMSwhMSksYy5zLmtleVByZXNzJiZjLmtleVByZXNzKCksYy4kaXRlbXMubGVuZ3RoPjE/KGMuYXJyb3coKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5lbmFibGVEcmFnKCksYy5lbmFibGVTd2lwZSgpfSw1MCksYy5zLm1vdXNld2hlZWwmJmMubW91c2V3aGVlbCgpKTpjLiRzbGlkZS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtjLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpfSksYy5jb3VudGVyKCksYy5jbG9zZUdhbGxlcnkoKSxjLiRlbC50cmlnZ2VyKFwib25BZnRlck9wZW4ubGdcIiksYy4kb3V0ZXIub24oXCJtb3VzZW1vdmUubGcgY2xpY2subGcgdG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKCl7Yy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oaWRlLWl0ZW1zXCIpLGNsZWFyVGltZW91dChjLmhpZGVCYXJ0aW1lb3V0KSxjLmhpZGVCYXJ0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtaXRlbXNcIil9LGMucy5oaWRlQmFyc0RlbGF5KX0pLGMuJG91dGVyLnRyaWdnZXIoXCJtb3VzZW1vdmUubGdcIil9LGIucHJvdG90eXBlLnN0cnVjdHVyZT1mdW5jdGlvbigpe3ZhciBiLGM9XCJcIixkPVwiXCIsZT0wLGY9XCJcIixnPXRoaXM7Zm9yKGEoXCJib2R5XCIpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxnLWJhY2tkcm9wXCI+PC9kaXY+JyksYShcIi5sZy1iYWNrZHJvcFwiKS5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsdGhpcy5zLmJhY2tkcm9wRHVyYXRpb24rXCJtc1wiKSxlPTA7ZTx0aGlzLiRpdGVtcy5sZW5ndGg7ZSsrKWMrPSc8ZGl2IGNsYXNzPVwibGctaXRlbVwiPjwvZGl2Pic7aWYodGhpcy5zLmNvbnRyb2xzJiZ0aGlzLiRpdGVtcy5sZW5ndGg+MSYmKGQ9JzxkaXYgY2xhc3M9XCJsZy1hY3Rpb25zXCI+PGJ1dHRvbiBjbGFzcz1cImxnLXByZXYgbGctaWNvblwiPicrdGhpcy5zLnByZXZIdG1sKyc8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwibGctbmV4dCBsZy1pY29uXCI+Jyt0aGlzLnMubmV4dEh0bWwrXCI8L2J1dHRvbj48L2Rpdj5cIiksXCIubGctc3ViLWh0bWxcIj09PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8mJihmPSc8ZGl2IGNsYXNzPVwibGctc3ViLWh0bWxcIj48L2Rpdj4nKSxiPSc8ZGl2IGNsYXNzPVwibGctb3V0ZXIgJyt0aGlzLnMuYWRkQ2xhc3MrXCIgXCIrdGhpcy5zLnN0YXJ0Q2xhc3MrJ1wiPjxkaXYgY2xhc3M9XCJsZ1wiIHN0eWxlPVwid2lkdGg6Jyt0aGlzLnMud2lkdGgrXCI7IGhlaWdodDpcIit0aGlzLnMuaGVpZ2h0KydcIj48ZGl2IGNsYXNzPVwibGctaW5uZXJcIj4nK2MrJzwvZGl2PjxkaXYgY2xhc3M9XCJsZy10b29sYmFyIGxnLWdyb3VwXCI+PHNwYW4gY2xhc3M9XCJsZy1jbG9zZSBsZy1pY29uXCI+PC9zcGFuPjwvZGl2PicrZCtmK1wiPC9kaXY+PC9kaXY+XCIsYShcImJvZHlcIikuYXBwZW5kKGIpLHRoaXMuJG91dGVyPWEoXCIubGctb3V0ZXJcIiksdGhpcy4kc2xpZGU9dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1pdGVtXCIpLHRoaXMucy51c2VMZWZ0Pyh0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLXVzZS1sZWZ0XCIpLHRoaXMucy5tb2RlPVwibGctc2xpZGVcIik6dGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy11c2UtY3NzM1wiKSxnLnNldFRvcCgpLGEod2luZG93KS5vbihcInJlc2l6ZS5sZyBvcmllbnRhdGlvbmNoYW5nZS5sZ1wiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2cuc2V0VG9wKCl9LDEwMCl9KSx0aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS5hZGRDbGFzcyhcImxnLWN1cnJlbnRcIiksdGhpcy5kb0NzcygpP3RoaXMuJG91dGVyLmFkZENsYXNzKFwibGctY3NzM1wiKToodGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1jc3NcIiksdGhpcy5zLnNwZWVkPTApLHRoaXMuJG91dGVyLmFkZENsYXNzKHRoaXMucy5tb2RlKSx0aGlzLnMuZW5hYmxlRHJhZyYmdGhpcy4kaXRlbXMubGVuZ3RoPjEmJnRoaXMuJG91dGVyLmFkZENsYXNzKFwibGctZ3JhYlwiKSx0aGlzLnMuc2hvd0FmdGVyTG9hZCYmdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1zaG93LWFmdGVyLWxvYWRcIiksdGhpcy5kb0NzcygpKXt2YXIgaD10aGlzLiRvdXRlci5maW5kKFwiLmxnLWlubmVyXCIpO2guY3NzKFwidHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIix0aGlzLnMuY3NzRWFzaW5nKSxoLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIix0aGlzLnMuc3BlZWQrXCJtc1wiKX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShcIi5sZy1iYWNrZHJvcFwiKS5hZGRDbGFzcyhcImluXCIpfSksc2V0VGltZW91dChmdW5jdGlvbigpe2cuJG91dGVyLmFkZENsYXNzKFwibGctdmlzaWJsZVwiKX0sdGhpcy5zLmJhY2tkcm9wRHVyYXRpb24pLHRoaXMucy5kb3dubG9hZCYmdGhpcy4kb3V0ZXIuZmluZChcIi5sZy10b29sYmFyXCIpLmFwcGVuZCgnPGEgaWQ9XCJsZy1kb3dubG9hZFwiIHRhcmdldD1cIl9ibGFua1wiIGRvd25sb2FkIGNsYXNzPVwibGctZG93bmxvYWQgbGctaWNvblwiPjwvYT4nKSx0aGlzLnByZXZTY3JvbGxUb3A9YSh3aW5kb3cpLnNjcm9sbFRvcCgpfSxiLnByb3RvdHlwZS5zZXRUb3A9ZnVuY3Rpb24oKXtpZihcIjEwMCVcIiE9PXRoaXMucy5oZWlnaHQpe3ZhciBiPWEod2luZG93KS5oZWlnaHQoKSxjPShiLXBhcnNlSW50KHRoaXMucy5oZWlnaHQsMTApKS8yLGQ9dGhpcy4kb3V0ZXIuZmluZChcIi5sZ1wiKTtiPj1wYXJzZUludCh0aGlzLnMuaGVpZ2h0LDEwKT9kLmNzcyhcInRvcFwiLGMrXCJweFwiKTpkLmNzcyhcInRvcFwiLFwiMHB4XCIpfX0sYi5wcm90b3R5cGUuZG9Dc3M9ZnVuY3Rpb24oKXtyZXR1cm4hIWZ1bmN0aW9uKCl7dmFyIGE9W1widHJhbnNpdGlvblwiLFwiTW96VHJhbnNpdGlvblwiLFwiV2Via2l0VHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIixcIm1zVHJhbnNpdGlvblwiLFwiS2h0bWxUcmFuc2l0aW9uXCJdLGI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGM9MDtmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWlmKGFbY11pbiBiLnN0eWxlKXJldHVybiEwfSgpfSxiLnByb3RvdHlwZS5pc1ZpZGVvPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYz10aGlzLnMuZHluYW1pYz90aGlzLnMuZHluYW1pY0VsW2JdLmh0bWw6dGhpcy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaHRtbFwiKSwhYSlyZXR1cm4gYz97aHRtbDU6ITB9Oihjb25zb2xlLmVycm9yKFwibGlnaHRHYWxsZXJ5IDotIGRhdGEtc3JjIGlzIG5vdCBwdm92aWRlZCBvbiBzbGlkZSBpdGVtIFwiKyhiKzEpK1wiLiBQbGVhc2UgbWFrZSBzdXJlIHRoZSBzZWxlY3RvciBwcm9wZXJ0eSBpcyBwcm9wZXJseSBjb25maWd1cmVkLiBNb3JlIGluZm8gLSBodHRwOi8vc2FjaGluY2hvb2x1ci5naXRodWIuaW8vbGlnaHRHYWxsZXJ5L2RlbW9zL2h0bWwtbWFya3VwLmh0bWxcIiksITEpO3ZhciBkPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/eW91dHUoPzpcXC5iZXxiZVxcLmNvbXxiZS1ub2Nvb2tpZVxcLmNvbSlcXC8oPzp3YXRjaFxcP3Y9fGVtYmVkXFwvKT8oW2EtejAtOVxcLVxcX1xcJV0rKS9pKSxlPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/dmltZW8uY29tXFwvKFswLTlhLXpcXC1fXSspL2kpLGY9YS5tYXRjaCgvXFwvXFwvKD86d3d3XFwuKT9kYWkubHlcXC8oWzAtOWEtelxcLV9dKykvaSksZz1hLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pPyg/OnZrXFwuY29tfHZrb250YWt0ZVxcLnJ1KVxcLyg/OnZpZGVvX2V4dFxcLnBocFxcPykoLiopL2kpO3JldHVybiBkP3t5b3V0dWJlOmR9OmU/e3ZpbWVvOmV9OmY/e2RhaWx5bW90aW9uOmZ9Omc/e3ZrOmd9OnZvaWQgMH0sYi5wcm90b3R5cGUuY291bnRlcj1mdW5jdGlvbigpe3RoaXMucy5jb3VudGVyJiZhKHRoaXMucy5hcHBlbmRDb3VudGVyVG8pLmFwcGVuZCgnPGRpdiBpZD1cImxnLWNvdW50ZXJcIj48c3BhbiBpZD1cImxnLWNvdW50ZXItY3VycmVudFwiPicrKHBhcnNlSW50KHRoaXMuaW5kZXgsMTApKzEpKyc8L3NwYW4+IC8gPHNwYW4gaWQ9XCJsZy1jb3VudGVyLWFsbFwiPicrdGhpcy4kaXRlbXMubGVuZ3RoK1wiPC9zcGFuPjwvZGl2PlwiKX0sYi5wcm90b3R5cGUuYWRkSHRtbD1mdW5jdGlvbihiKXt2YXIgYyxkLGU9bnVsbDtpZih0aGlzLnMuZHluYW1pYz90aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWxVcmw/Yz10aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWxVcmw6ZT10aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWw6KGQ9dGhpcy4kaXRlbXMuZXEoYiksZC5hdHRyKFwiZGF0YS1zdWItaHRtbC11cmxcIik/Yz1kLmF0dHIoXCJkYXRhLXN1Yi1odG1sLXVybFwiKTooZT1kLmF0dHIoXCJkYXRhLXN1Yi1odG1sXCIpLHRoaXMucy5nZXRDYXB0aW9uRnJvbVRpdGxlT3JBbHQmJiFlJiYoZT1kLmF0dHIoXCJ0aXRsZVwiKXx8ZC5maW5kKFwiaW1nXCIpLmZpcnN0KCkuYXR0cihcImFsdFwiKSkpKSwhYylpZih2b2lkIDAhPT1lJiZudWxsIT09ZSl7dmFyIGY9ZS5zdWJzdHJpbmcoMCwxKTtcIi5cIiE9PWYmJlwiI1wiIT09Znx8KGU9dGhpcy5zLnN1Ykh0bWxTZWxlY3RvclJlbGF0aXZlJiYhdGhpcy5zLmR5bmFtaWM/ZC5maW5kKGUpLmh0bWwoKTphKGUpLmh0bWwoKSl9ZWxzZSBlPVwiXCI7XCIubGctc3ViLWh0bWxcIj09PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8/Yz90aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmxvYWQoYyk6dGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5odG1sKGUpOmM/dGhpcy4kc2xpZGUuZXEoYikubG9hZChjKTp0aGlzLiRzbGlkZS5lcShiKS5hcHBlbmQoZSksdm9pZCAwIT09ZSYmbnVsbCE9PWUmJihcIlwiPT09ZT90aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmFkZENsYXNzKFwibGctZW1wdHktaHRtbFwiKTp0aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLnJlbW92ZUNsYXNzKFwibGctZW1wdHktaHRtbFwiKSksdGhpcy4kZWwudHJpZ2dlcihcIm9uQWZ0ZXJBcHBlbmRTdWJIdG1sLmxnXCIsW2JdKX0sYi5wcm90b3R5cGUucHJlbG9hZD1mdW5jdGlvbihhKXt2YXIgYj0xLGM9MTtmb3IoYj0xO2I8PXRoaXMucy5wcmVsb2FkJiYhKGI+PXRoaXMuJGl0ZW1zLmxlbmd0aC1hKTtiKyspdGhpcy5sb2FkQ29udGVudChhK2IsITEsMCk7Zm9yKGM9MTtjPD10aGlzLnMucHJlbG9hZCYmIShhLWM8MCk7YysrKXRoaXMubG9hZENvbnRlbnQoYS1jLCExLDApfSxiLnByb3RvdHlwZS5sb2FkQ29udGVudD1mdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGgsaSxqLGs9dGhpcyxsPSExLG09ZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9W10sZT0wO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZz1iW2VdLnNwbGl0KFwiIFwiKTtcIlwiPT09Z1swXSYmZy5zcGxpY2UoMCwxKSxkLnB1c2goZ1swXSksYy5wdXNoKGdbMV0pfWZvcih2YXIgaD1hKHdpbmRvdykud2lkdGgoKSxpPTA7aTxjLmxlbmd0aDtpKyspaWYocGFyc2VJbnQoY1tpXSwxMCk+aCl7Zj1kW2ldO2JyZWFrfX07aWYoay5zLmR5bmFtaWMpe2lmKGsucy5keW5hbWljRWxbYl0ucG9zdGVyJiYobD0hMCxnPWsucy5keW5hbWljRWxbYl0ucG9zdGVyKSxqPWsucy5keW5hbWljRWxbYl0uaHRtbCxmPWsucy5keW5hbWljRWxbYl0uc3JjLGsucy5keW5hbWljRWxbYl0ucmVzcG9uc2l2ZSl7bShrLnMuZHluYW1pY0VsW2JdLnJlc3BvbnNpdmUuc3BsaXQoXCIsXCIpKX1oPWsucy5keW5hbWljRWxbYl0uc3Jjc2V0LGk9ay5zLmR5bmFtaWNFbFtiXS5zaXplc31lbHNle2lmKGsuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLXBvc3RlclwiKSYmKGw9ITAsZz1rLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1wb3N0ZXJcIikpLGo9ay4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaHRtbFwiKSxmPWsuJGl0ZW1zLmVxKGIpLmF0dHIoXCJocmVmXCIpfHxrLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1zcmNcIiksay4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtcmVzcG9uc2l2ZVwiKSl7bShrLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1yZXNwb25zaXZlXCIpLnNwbGl0KFwiLFwiKSl9aD1rLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1zcmNzZXRcIiksaT1rLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1zaXplc1wiKX12YXIgbj0hMTtrLnMuZHluYW1pYz9rLnMuZHluYW1pY0VsW2JdLmlmcmFtZSYmKG49ITApOlwidHJ1ZVwiPT09ay4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaWZyYW1lXCIpJiYobj0hMCk7dmFyIG89ay5pc1ZpZGVvKGYsYik7aWYoIWsuJHNsaWRlLmVxKGIpLmhhc0NsYXNzKFwibGctbG9hZGVkXCIpKXtpZihuKWsuJHNsaWRlLmVxKGIpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250IGxnLWhhcy1pZnJhbWVcIiBzdHlsZT1cIm1heC13aWR0aDonK2sucy5pZnJhbWVNYXhXaWR0aCsnXCI+PGRpdiBjbGFzcz1cImxnLXZpZGVvXCI+PGlmcmFtZSBjbGFzcz1cImxnLW9iamVjdFwiIGZyYW1lYm9yZGVyPVwiMFwiIHNyYz1cIicrZisnXCIgIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIj48L2lmcmFtZT48L2Rpdj48L2Rpdj4nKTtlbHNlIGlmKGwpe3ZhciBwPVwiXCI7cD1vJiZvLnlvdXR1YmU/XCJsZy1oYXMteW91dHViZVwiOm8mJm8udmltZW8/XCJsZy1oYXMtdmltZW9cIjpcImxnLWhhcy1odG1sNVwiLGsuJHNsaWRlLmVxKGIpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250ICcrcCsnIFwiPjxkaXYgY2xhc3M9XCJsZy12aWRlb1wiPjxzcGFuIGNsYXNzPVwibGctdmlkZW8tcGxheVwiPjwvc3Bhbj48aW1nIGNsYXNzPVwibGctb2JqZWN0IGxnLWhhcy1wb3N0ZXJcIiBzcmM9XCInK2crJ1wiIC8+PC9kaXY+PC9kaXY+Jyl9ZWxzZSBvPyhrLiRzbGlkZS5lcShiKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibGctdmlkZW8tY29udCBcIj48ZGl2IGNsYXNzPVwibGctdmlkZW9cIj48L2Rpdj48L2Rpdj4nKSxrLiRlbC50cmlnZ2VyKFwiaGFzVmlkZW8ubGdcIixbYixmLGpdKSk6ay4kc2xpZGUuZXEoYikucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxnLWltZy13cmFwXCI+PGltZyBjbGFzcz1cImxnLW9iamVjdCBsZy1pbWFnZVwiIHNyYz1cIicrZisnXCIgLz48L2Rpdj4nKTtpZihrLiRlbC50cmlnZ2VyKFwib25BZmVyQXBwZW5kU2xpZGUubGdcIixbYl0pLGU9ay4kc2xpZGUuZXEoYikuZmluZChcIi5sZy1vYmplY3RcIiksaSYmZS5hdHRyKFwic2l6ZXNcIixpKSxoKXtlLmF0dHIoXCJzcmNzZXRcIixoKTt0cnl7cGljdHVyZWZpbGwoe2VsZW1lbnRzOltlWzBdXX0pfWNhdGNoKGEpe2NvbnNvbGUud2FybihcImxpZ2h0R2FsbGVyeSA6LSBJZiB5b3Ugd2FudCBzcmNzZXQgdG8gYmUgc3VwcG9ydGVkIGZvciBvbGRlciBicm93c2VyIHBsZWFzZSBpbmNsdWRlIHBpY3R1cmVmaWwgdmVyc2lvbiAyIGphdmFzY3JpcHQgbGlicmFyeSBpbiB5b3VyIGRvY3VtZW50LlwiKX19XCIubGctc3ViLWh0bWxcIiE9PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8mJmsuYWRkSHRtbChiKSxrLiRzbGlkZS5lcShiKS5hZGRDbGFzcyhcImxnLWxvYWRlZFwiKX1rLiRzbGlkZS5lcShiKS5maW5kKFwiLmxnLW9iamVjdFwiKS5vbihcImxvYWQubGcgZXJyb3IubGdcIixmdW5jdGlvbigpe3ZhciBjPTA7ZCYmIWEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctZnJvbS1oYXNoXCIpJiYoYz1kKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ay4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jb21wbGV0ZVwiKSxrLiRlbC50cmlnZ2VyKFwib25TbGlkZUl0ZW1Mb2FkLmxnXCIsW2IsZHx8MF0pfSxjKX0pLG8mJm8uaHRtbDUmJiFsJiZrLiRzbGlkZS5lcShiKS5hZGRDbGFzcyhcImxnLWNvbXBsZXRlXCIpLCEwPT09YyYmKGsuJHNsaWRlLmVxKGIpLmhhc0NsYXNzKFwibGctY29tcGxldGVcIik/ay5wcmVsb2FkKGIpOmsuJHNsaWRlLmVxKGIpLmZpbmQoXCIubGctb2JqZWN0XCIpLm9uKFwibG9hZC5sZyBlcnJvci5sZ1wiLGZ1bmN0aW9uKCl7ay5wcmVsb2FkKGIpfSkpfSxiLnByb3RvdHlwZS5zbGlkZT1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj10aGlzLiRvdXRlci5maW5kKFwiLmxnLWN1cnJlbnRcIikuaW5kZXgoKSxnPXRoaXM7aWYoIWcubEdhbGxlcnlPbnx8ZiE9PWIpe3ZhciBoPXRoaXMuJHNsaWRlLmxlbmd0aCxpPWcubEdhbGxlcnlPbj90aGlzLnMuc3BlZWQ6MDtpZighZy5sZ0J1c3kpe2lmKHRoaXMucy5kb3dubG9hZCl7dmFyIGo7aj1nLnMuZHluYW1pYz8hMSE9PWcucy5keW5hbWljRWxbYl0uZG93bmxvYWRVcmwmJihnLnMuZHluYW1pY0VsW2JdLmRvd25sb2FkVXJsfHxnLnMuZHluYW1pY0VsW2JdLnNyYyk6XCJmYWxzZVwiIT09Zy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtZG93bmxvYWQtdXJsXCIpJiYoZy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtZG93bmxvYWQtdXJsXCIpfHxnLiRpdGVtcy5lcShiKS5hdHRyKFwiaHJlZlwiKXx8Zy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtc3JjXCIpKSxqPyhhKFwiI2xnLWRvd25sb2FkXCIpLmF0dHIoXCJocmVmXCIsaiksZy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oaWRlLWRvd25sb2FkXCIpKTpnLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtZG93bmxvYWRcIil9aWYodGhpcy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlU2xpZGUubGdcIixbZixiLGMsZF0pLGcubGdCdXN5PSEwLGNsZWFyVGltZW91dChnLmhpZGVCYXJ0aW1lb3V0KSxcIi5sZy1zdWItaHRtbFwiPT09dGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyYmc2V0VGltZW91dChmdW5jdGlvbigpe2cuYWRkSHRtbChiKX0saSksdGhpcy5hcnJvd0Rpc2FibGUoYiksZXx8KGI8Zj9lPVwicHJldlwiOmI+ZiYmKGU9XCJuZXh0XCIpKSxjKXt0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLXByZXYtc2xpZGUgbGctY3VycmVudCBsZy1uZXh0LXNsaWRlXCIpO3ZhciBrLGw7aD4yPyhrPWItMSxsPWIrMSwwPT09YiYmZj09PWgtMT8obD0wLGs9aC0xKTpiPT09aC0xJiYwPT09ZiYmKGw9MCxrPWgtMSkpOihrPTAsbD0xKSxcInByZXZcIj09PWU/Zy4kc2xpZGUuZXEobCkuYWRkQ2xhc3MoXCJsZy1uZXh0LXNsaWRlXCIpOmcuJHNsaWRlLmVxKGspLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSxnLiRzbGlkZS5lcShiKS5hZGRDbGFzcyhcImxnLWN1cnJlbnRcIil9ZWxzZSBnLiRvdXRlci5hZGRDbGFzcyhcImxnLW5vLXRyYW5zXCIpLHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKFwibGctcHJldi1zbGlkZSBsZy1uZXh0LXNsaWRlXCIpLFwicHJldlwiPT09ZT8odGhpcy4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1wcmV2LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKGYpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSk6KHRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShmKS5hZGRDbGFzcyhcImxnLXByZXYtc2xpZGVcIikpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLWN1cnJlbnRcIiksZy4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jdXJyZW50XCIpLGcuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctbm8tdHJhbnNcIil9LDUwKTtnLmxHYWxsZXJ5T24/KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLmxvYWRDb250ZW50KGIsITAsMCl9LHRoaXMucy5zcGVlZCs1MCksc2V0VGltZW91dChmdW5jdGlvbigpe2cubGdCdXN5PSExLGcuJGVsLnRyaWdnZXIoXCJvbkFmdGVyU2xpZGUubGdcIixbZixiLGMsZF0pfSx0aGlzLnMuc3BlZWQpKTooZy5sb2FkQ29udGVudChiLCEwLGcucy5iYWNrZHJvcER1cmF0aW9uKSxnLmxnQnVzeT0hMSxnLiRlbC50cmlnZ2VyKFwib25BZnRlclNsaWRlLmxnXCIsW2YsYixjLGRdKSksZy5sR2FsbGVyeU9uPSEwLHRoaXMucy5jb3VudGVyJiZhKFwiI2xnLWNvdW50ZXItY3VycmVudFwiKS50ZXh0KGIrMSl9Zy5pbmRleD1ifX0sYi5wcm90b3R5cGUuZ29Ub05leHRTbGlkZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5zLmxvb3A7YSYmYi4kc2xpZGUubGVuZ3RoPDMmJihjPSExKSxiLmxnQnVzeXx8KGIuaW5kZXgrMTxiLiRzbGlkZS5sZW5ndGg/KGIuaW5kZXgrKyxiLiRlbC50cmlnZ2VyKFwib25CZWZvcmVOZXh0U2xpZGUubGdcIixbYi5pbmRleF0pLGIuc2xpZGUoYi5pbmRleCxhLCExLFwibmV4dFwiKSk6Yz8oYi5pbmRleD0wLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU5leHRTbGlkZS5sZ1wiLFtiLmluZGV4XSksYi5zbGlkZShiLmluZGV4LGEsITEsXCJuZXh0XCIpKTpiLnMuc2xpZGVFbmRBbmltYXRvaW4mJiFhJiYoYi4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1yaWdodC1lbmRcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2IuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctcmlnaHQtZW5kXCIpfSw0MDApKSl9LGIucHJvdG90eXBlLmdvVG9QcmV2U2xpZGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIucy5sb29wO2EmJmIuJHNsaWRlLmxlbmd0aDwzJiYoYz0hMSksYi5sZ0J1c3l8fChiLmluZGV4PjA/KGIuaW5kZXgtLSxiLiRlbC50cmlnZ2VyKFwib25CZWZvcmVQcmV2U2xpZGUubGdcIixbYi5pbmRleCxhXSksYi5zbGlkZShiLmluZGV4LGEsITEsXCJwcmV2XCIpKTpjPyhiLmluZGV4PWIuJGl0ZW1zLmxlbmd0aC0xLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZVByZXZTbGlkZS5sZ1wiLFtiLmluZGV4LGFdKSxiLnNsaWRlKGIuaW5kZXgsYSwhMSxcInByZXZcIikpOmIucy5zbGlkZUVuZEFuaW1hdG9pbiYmIWEmJihiLiRvdXRlci5hZGRDbGFzcyhcImxnLWxlZnQtZW5kXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWxlZnQtZW5kXCIpfSw0MDApKSl9LGIucHJvdG90eXBlLmtleVByZXNzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczt0aGlzLiRpdGVtcy5sZW5ndGg+MSYmYSh3aW5kb3cpLm9uKFwia2V5dXAubGdcIixmdW5jdGlvbihhKXtiLiRpdGVtcy5sZW5ndGg+MSYmKDM3PT09YS5rZXlDb2RlJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGIuZ29Ub1ByZXZTbGlkZSgpKSwzOT09PWEua2V5Q29kZSYmKGEucHJldmVudERlZmF1bHQoKSxiLmdvVG9OZXh0U2xpZGUoKSkpfSksYSh3aW5kb3cpLm9uKFwia2V5ZG93bi5sZ1wiLGZ1bmN0aW9uKGEpeyEwPT09Yi5zLmVzY0tleSYmMjc9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYi4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpP2IuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdGh1bWItb3BlblwiKTpiLmRlc3Ryb3koKSl9KX0sYi5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9QcmV2U2xpZGUoKX0pLHRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9OZXh0U2xpZGUoKX0pfSxiLnByb3RvdHlwZS5hcnJvd0Rpc2FibGU9ZnVuY3Rpb24oYSl7IXRoaXMucy5sb29wJiZ0aGlzLnMuaGlkZUNvbnRyb2xPbkVuZCYmKGErMTx0aGlzLiRzbGlkZS5sZW5ndGg/dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1uZXh0XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpOnRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIiksYT4wP3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTp0aGlzLiRvdXRlci5maW5kKFwiLmxnLXByZXZcIikuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpKX0sYi5wcm90b3R5cGUuc2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnMudXNlTGVmdD9hLmNzcyhcImxlZnRcIixiKTphLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrYitcInB4LCBcIitjK1wicHgsIDBweClcIn0pfSxiLnByb3RvdHlwZS50b3VjaE1vdmU9ZnVuY3Rpb24oYixjKXt2YXIgZD1jLWI7TWF0aC5hYnMoZCk+MTUmJih0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLWRyYWdnaW5nXCIpLHRoaXMuc2V0VHJhbnNsYXRlKHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLGQsMCksdGhpcy5zZXRUcmFuc2xhdGUoYShcIi5sZy1wcmV2LXNsaWRlXCIpLC10aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS53aWR0aCgpK2QsMCksdGhpcy5zZXRUcmFuc2xhdGUoYShcIi5sZy1uZXh0LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLndpZHRoKCkrZCwwKSl9LGIucHJvdG90eXBlLnRvdWNoRW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7XCJsZy1zbGlkZVwiIT09Yi5zLm1vZGUmJmIuJG91dGVyLmFkZENsYXNzKFwibGctc2xpZGVcIiksdGhpcy4kc2xpZGUubm90KFwiLmxnLWN1cnJlbnQsIC5sZy1wcmV2LXNsaWRlLCAubGctbmV4dC1zbGlkZVwiKS5jc3MoXCJvcGFjaXR5XCIsXCIwXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGE8MCYmTWF0aC5hYnMoYSk+Yi5zLnN3aXBlVGhyZXNob2xkP2IuZ29Ub05leHRTbGlkZSghMCk6YT4wJiZNYXRoLmFicyhhKT5iLnMuc3dpcGVUaHJlc2hvbGQ/Yi5nb1RvUHJldlNsaWRlKCEwKTpNYXRoLmFicyhhKTw1JiZiLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpLGIuJHNsaWRlLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxcImxnLXNsaWRlXCI9PT1iLnMubW9kZXx8Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zbGlkZVwiKX0sYi5zLnNwZWVkKzEwMCl9LGIucHJvdG90eXBlLmVuYWJsZVN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTAsYz0wLGQ9ITE7YS5zLmVuYWJsZVN3aXBlJiZhLmRvQ3NzKCkmJihhLiRzbGlkZS5vbihcInRvdWNoc3RhcnQubGdcIixmdW5jdGlvbihjKXthLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKXx8YS5sZ0J1c3l8fChjLnByZXZlbnREZWZhdWx0KCksYS5tYW5hZ2VTd2lwZUNsYXNzKCksYj1jLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCl9KSxhLiRzbGlkZS5vbihcInRvdWNobW92ZS5sZ1wiLGZ1bmN0aW9uKGUpe2EuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHwoZS5wcmV2ZW50RGVmYXVsdCgpLGM9ZS5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgsYS50b3VjaE1vdmUoYixjKSxkPSEwKX0pLGEuJHNsaWRlLm9uKFwidG91Y2hlbmQubGdcIixmdW5jdGlvbigpe2EuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHwoZD8oZD0hMSxhLnRvdWNoRW5kKGMtYikpOmEuJGVsLnRyaWdnZXIoXCJvblNsaWRlQ2xpY2subGdcIikpfSkpfSxiLnByb3RvdHlwZS5lbmFibGVEcmFnPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPTAsZD0wLGU9ITEsZj0hMTtiLnMuZW5hYmxlRHJhZyYmYi5kb0NzcygpJiYoYi4kc2xpZGUub24oXCJtb3VzZWRvd24ubGdcIixmdW5jdGlvbihkKXtiLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKXx8Yi5sZ0J1c3l8fGEoZC50YXJnZXQpLnRleHQoKS50cmltKCl8fChkLnByZXZlbnREZWZhdWx0KCksYi5tYW5hZ2VTd2lwZUNsYXNzKCksYz1kLnBhZ2VYLGU9ITAsYi4kb3V0ZXIuc2Nyb2xsTGVmdCs9MSxiLiRvdXRlci5zY3JvbGxMZWZ0LT0xLGIuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYlwiKS5hZGRDbGFzcyhcImxnLWdyYWJiaW5nXCIpLGIuJGVsLnRyaWdnZXIoXCJvbkRyYWdzdGFydC5sZ1wiKSl9KSxhKHdpbmRvdykub24oXCJtb3VzZW1vdmUubGdcIixmdW5jdGlvbihhKXtlJiYoZj0hMCxkPWEucGFnZVgsYi50b3VjaE1vdmUoYyxkKSxiLiRlbC50cmlnZ2VyKFwib25EcmFnbW92ZS5sZ1wiKSl9KSxhKHdpbmRvdykub24oXCJtb3VzZXVwLmxnXCIsZnVuY3Rpb24oZyl7Zj8oZj0hMSxiLnRvdWNoRW5kKGQtYyksYi4kZWwudHJpZ2dlcihcIm9uRHJhZ2VuZC5sZ1wiKSk6KGEoZy50YXJnZXQpLmhhc0NsYXNzKFwibGctb2JqZWN0XCIpfHxhKGcudGFyZ2V0KS5oYXNDbGFzcyhcImxnLXZpZGVvLXBsYXlcIikpJiZiLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpLGUmJihlPSExLGIuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYmJpbmdcIikuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpKX0pKX0sYi5wcm90b3R5cGUubWFuYWdlU3dpcGVDbGFzcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5kZXgrMSxiPXRoaXMuaW5kZXgtMTt0aGlzLnMubG9vcCYmdGhpcy4kc2xpZGUubGVuZ3RoPjImJigwPT09dGhpcy5pbmRleD9iPXRoaXMuJHNsaWRlLmxlbmd0aC0xOnRoaXMuaW5kZXg9PT10aGlzLiRzbGlkZS5sZW5ndGgtMSYmKGE9MCkpLHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKFwibGctbmV4dC1zbGlkZSBsZy1wcmV2LXNsaWRlXCIpLGI+LTEmJnRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShhKS5hZGRDbGFzcyhcImxnLW5leHQtc2xpZGVcIil9LGIucHJvdG90eXBlLm1vdXNld2hlZWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuJG91dGVyLm9uKFwibW91c2V3aGVlbC5sZ1wiLGZ1bmN0aW9uKGIpe2IuZGVsdGFZJiYoYi5kZWx0YVk+MD9hLmdvVG9QcmV2U2xpZGUoKTphLmdvVG9OZXh0U2xpZGUoKSxiLnByZXZlbnREZWZhdWx0KCkpfSl9LGIucHJvdG90eXBlLmNsb3NlR2FsbGVyeT1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0hMTt0aGlzLiRvdXRlci5maW5kKFwiLmxnLWNsb3NlXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuZGVzdHJveSgpfSksYi5zLmNsb3NhYmxlJiYoYi4kb3V0ZXIub24oXCJtb3VzZWRvd24ubGdcIixmdW5jdGlvbihiKXtjPSEhKGEoYi50YXJnZXQpLmlzKFwiLmxnLW91dGVyXCIpfHxhKGIudGFyZ2V0KS5pcyhcIi5sZy1pdGVtIFwiKXx8YShiLnRhcmdldCkuaXMoXCIubGctaW1nLXdyYXBcIikpfSksYi4kb3V0ZXIub24oXCJtb3VzZW1vdmUubGdcIixmdW5jdGlvbigpe2M9ITF9KSxiLiRvdXRlci5vbihcIm1vdXNldXAubGdcIixmdW5jdGlvbihkKXsoYShkLnRhcmdldCkuaXMoXCIubGctb3V0ZXJcIil8fGEoZC50YXJnZXQpLmlzKFwiLmxnLWl0ZW0gXCIpfHxhKGQudGFyZ2V0KS5pcyhcIi5sZy1pbWctd3JhcFwiKSYmYykmJihiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxiLmRlc3Ryb3koKSl9KSl9LGIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztifHwoYy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlQ2xvc2UubGdcIiksYSh3aW5kb3cpLnNjcm9sbFRvcChjLnByZXZTY3JvbGxUb3ApKSxiJiYoYy5zLmR5bmFtaWN8fHRoaXMuJGl0ZW1zLm9mZihcImNsaWNrLmxnIGNsaWNrLmxnY3VzdG9tXCIpLGEucmVtb3ZlRGF0YShjLmVsLFwibGlnaHRHYWxsZXJ5XCIpKSx0aGlzLiRlbC5vZmYoXCIubGcudG1cIiksYS5lYWNoKGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMsZnVuY3Rpb24oYSl7Yy5tb2R1bGVzW2FdJiZjLm1vZHVsZXNbYV0uZGVzdHJveSgpfSksdGhpcy5sR2FsbGVyeU9uPSExLGNsZWFyVGltZW91dChjLmhpZGVCYXJ0aW1lb3V0KSx0aGlzLmhpZGVCYXJ0aW1lb3V0PSExLGEod2luZG93KS5vZmYoXCIubGdcIiksYShcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJsZy1vbiBsZy1mcm9tLWhhc2hcIiksYy4kb3V0ZXImJmMuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdmlzaWJsZVwiKSxhKFwiLmxnLWJhY2tkcm9wXCIpLnJlbW92ZUNsYXNzKFwiaW5cIiksc2V0VGltZW91dChmdW5jdGlvbigpe2MuJG91dGVyJiZjLiRvdXRlci5yZW1vdmUoKSxhKFwiLmxnLWJhY2tkcm9wXCIpLnJlbW92ZSgpLGJ8fGMuJGVsLnRyaWdnZXIoXCJvbkNsb3NlQWZ0ZXIubGdcIil9LGMucy5iYWNrZHJvcER1cmF0aW9uKzUwKX0sYS5mbi5saWdodEdhbGxlcnk9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGEuZGF0YSh0aGlzLFwibGlnaHRHYWxsZXJ5XCIpKXRyeXthKHRoaXMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIikuaW5pdCgpfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJsaWdodEdhbGxlcnkgaGFzIG5vdCBpbml0aWF0ZWQgcHJvcGVybHlcIil9ZWxzZSBhLmRhdGEodGhpcyxcImxpZ2h0R2FsbGVyeVwiLG5ldyBiKHRoaXMsYykpfSl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXM9e319KCl9KSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGpRdWVyeSl9KDAsZnVuY3Rpb24oYSl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9e2F1dG9wbGF5OiExLHBhdXNlOjVlMyxwcm9ncmVzc0JhcjohMCxmb3VyY2VBdXRvcGxheTohMSxhdXRvcGxheUNvbnRyb2xzOiEwLGFwcGVuZEF1dG9wbGF5Q29udHJvbHNUbzpcIi5sZy10b29sYmFyXCJ9LGM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuY29yZT1hKGMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShjKSwhKHRoaXMuY29yZS4kaXRlbXMubGVuZ3RoPDIpJiYodGhpcy5jb3JlLnM9YS5leHRlbmQoe30sYix0aGlzLmNvcmUucyksdGhpcy5pbnRlcnZhbD0hMSx0aGlzLmZyb21BdXRvPSEwLHRoaXMuY2FuY2VsZWRPblRvdWNoPSExLHRoaXMuZm91cmNlQXV0b3BsYXlUZW1wPXRoaXMuY29yZS5zLmZvdXJjZUF1dG9wbGF5LHRoaXMuY29yZS5kb0NzcygpfHwodGhpcy5jb3JlLnMucHJvZ3Jlc3NCYXI9ITEpLHRoaXMuaW5pdCgpLHRoaXMpfTtjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvcmUucy5hdXRvcGxheUNvbnRyb2xzJiZhLmNvbnRyb2xzKCksYS5jb3JlLnMucHJvZ3Jlc3NCYXImJmEuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsZy1wcm9ncmVzcy1iYXJcIj48ZGl2IGNsYXNzPVwibGctcHJvZ3Jlc3NcIj48L2Rpdj48L2Rpdj4nKSxhLnByb2dyZXNzKCksYS5jb3JlLnMuYXV0b3BsYXkmJmEuJGVsLm9uZShcIm9uU2xpZGVJdGVtTG9hZC5sZy50bVwiLGZ1bmN0aW9uKCl7YS5zdGFydGxBdXRvKCl9KSxhLiRlbC5vbihcIm9uRHJhZ3N0YXJ0LmxnLnRtIHRvdWNoc3RhcnQubGcudG1cIixmdW5jdGlvbigpe2EuaW50ZXJ2YWwmJihhLmNhbmNlbEF1dG8oKSxhLmNhbmNlbGVkT25Ub3VjaD0hMCl9KSxhLiRlbC5vbihcIm9uRHJhZ2VuZC5sZy50bSB0b3VjaGVuZC5sZy50bSBvblNsaWRlQ2xpY2subGcudG1cIixmdW5jdGlvbigpeyFhLmludGVydmFsJiZhLmNhbmNlbGVkT25Ub3VjaCYmKGEuc3RhcnRsQXV0bygpLGEuY2FuY2VsZWRPblRvdWNoPSExKX0pfSxjLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzO2MuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7Yy5jb3JlLnMucHJvZ3Jlc3NCYXImJmMuZnJvbUF1dG8mJihhPWMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIiksYj1jLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3NcIiksYy5pbnRlcnZhbCYmKGIucmVtb3ZlQXR0cihcInN0eWxlXCIpLGEucmVtb3ZlQ2xhc3MoXCJsZy1zdGFydFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jc3MoXCJ0cmFuc2l0aW9uXCIsXCJ3aWR0aCBcIisoYy5jb3JlLnMuc3BlZWQrYy5jb3JlLnMucGF1c2UpK1wibXMgZWFzZSAwc1wiKSxhLmFkZENsYXNzKFwibGctc3RhcnRcIil9LDIwKSkpLGMuZnJvbUF1dG98fGMuY29yZS5zLmZvdXJjZUF1dG9wbGF5fHxjLmNhbmNlbEF1dG8oKSxjLmZyb21BdXRvPSExfSl9LGMucHJvdG90eXBlLmNvbnRyb2xzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczthKHRoaXMuY29yZS5zLmFwcGVuZEF1dG9wbGF5Q29udHJvbHNUbykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImxnLWF1dG9wbGF5LWJ1dHRvbiBsZy1pY29uXCI+PC9zcGFuPicpLGIuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1hdXRvcGxheS1idXR0b25cIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7YShiLmNvcmUuJG91dGVyKS5oYXNDbGFzcyhcImxnLXNob3ctYXV0b3BsYXlcIik/KGIuY2FuY2VsQXV0bygpLGIuY29yZS5zLmZvdXJjZUF1dG9wbGF5PSExKTpiLmludGVydmFsfHwoYi5zdGFydGxBdXRvKCksYi5jb3JlLnMuZm91cmNlQXV0b3BsYXk9Yi5mb3VyY2VBdXRvcGxheVRlbXApfSl9LGMucHJvdG90eXBlLnN0YXJ0bEF1dG89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzc1wiKS5jc3MoXCJ0cmFuc2l0aW9uXCIsXCJ3aWR0aCBcIisoYS5jb3JlLnMuc3BlZWQrYS5jb3JlLnMucGF1c2UpK1wibXMgZWFzZSAwc1wiKSxhLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctc2hvdy1hdXRvcGxheVwiKSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3MtYmFyXCIpLmFkZENsYXNzKFwibGctc3RhcnRcIiksYS5pbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2EuY29yZS5pbmRleCsxPGEuY29yZS4kaXRlbXMubGVuZ3RoP2EuY29yZS5pbmRleCsrOmEuY29yZS5pbmRleD0wLGEuZnJvbUF1dG89ITAsYS5jb3JlLnNsaWRlKGEuY29yZS5pbmRleCwhMSwhMSxcIm5leHRcIil9LGEuY29yZS5zLnNwZWVkK2EuY29yZS5zLnBhdXNlKX0sYy5wcm90b3R5cGUuY2FuY2VsQXV0bz1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5pbnRlcnZhbD0hMSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3NcIikucmVtb3ZlQXR0cihcInN0eWxlXCIpLHRoaXMuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zaG93LWF1dG9wbGF5XCIpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIikucmVtb3ZlQ2xhc3MoXCJsZy1zdGFydFwiKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY2FuY2VsQXV0bygpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIikucmVtb3ZlKCl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuYXV0b3BsYXk9Y30oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoYS5qUXVlcnkpfSh0aGlzLGZ1bmN0aW9uKGEpeyFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoKXtyZXR1cm4gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnR8fGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50fHxkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudH12YXIgYz17ZnVsbFNjcmVlbjohMH0sZD1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jb3JlPWEoYikuZGF0YShcImxpZ2h0R2FsbGVyeVwiKSx0aGlzLiRlbD1hKGIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGMsdGhpcy5jb3JlLnMpLHRoaXMuaW5pdCgpLHRoaXN9O2QucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT1cIlwiO2lmKHRoaXMuY29yZS5zLmZ1bGxTY3JlZW4pe2lmKCEoZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWR8fGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkfHxkb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZHx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRW5hYmxlZCkpcmV0dXJuO2E9JzxzcGFuIGNsYXNzPVwibGctZnVsbHNjcmVlbiBsZy1pY29uXCI+PC9zcGFuPicsdGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRvb2xiYXJcIikuYXBwZW5kKGEpLHRoaXMuZnVsbFNjcmVlbigpfX0sZC5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7YS5yZXF1ZXN0RnVsbHNjcmVlbj9hLnJlcXVlc3RGdWxsc2NyZWVuKCk6YS5tc1JlcXVlc3RGdWxsc2NyZWVuP2EubXNSZXF1ZXN0RnVsbHNjcmVlbigpOmEubW96UmVxdWVzdEZ1bGxTY3JlZW4/YS5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOmEud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4mJmEud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKX0sZC5wcm90b3R5cGUuZXhpdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXtkb2N1bWVudC5leGl0RnVsbHNjcmVlbj9kb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4/ZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4/ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOmRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuJiZkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpfSxkLnByb3RvdHlwZS5mdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGM9dGhpczthKGRvY3VtZW50KS5vbihcImZ1bGxzY3JlZW5jaGFuZ2UubGcgd2Via2l0ZnVsbHNjcmVlbmNoYW5nZS5sZyBtb3pmdWxsc2NyZWVuY2hhbmdlLmxnIE1TRnVsbHNjcmVlbkNoYW5nZS5sZ1wiLGZ1bmN0aW9uKCl7Yy5jb3JlLiRvdXRlci50b2dnbGVDbGFzcyhcImxnLWZ1bGxzY3JlZW4tb25cIil9KSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctZnVsbHNjcmVlblwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtiKCk/Yy5leGl0RnVsbHNjcmVlbigpOmMucmVxdWVzdEZ1bGxzY3JlZW4oKX0pfSxkLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7YigpJiZ0aGlzLmV4aXRGdWxsc2NyZWVuKCksYShkb2N1bWVudCkub2ZmKFwiZnVsbHNjcmVlbmNoYW5nZS5sZyB3ZWJraXRmdWxsc2NyZWVuY2hhbmdlLmxnIG1vemZ1bGxzY3JlZW5jaGFuZ2UubGcgTVNGdWxsc2NyZWVuQ2hhbmdlLmxnXCIpfSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLmZ1bGxzY3JlZW49ZH0oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0oMCxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgYj17cGFnZXI6ITF9LGM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuY29yZT1hKGMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShjKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxiLHRoaXMuY29yZS5zKSx0aGlzLmNvcmUucy5wYWdlciYmdGhpcy5jb3JlLiRpdGVtcy5sZW5ndGg+MSYmdGhpcy5pbml0KCksdGhpc307Yy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBiLGMsZCxlPXRoaXMsZj1cIlwiO2lmKGUuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsZy1wYWdlci1vdXRlclwiPjwvZGl2PicpLGUuY29yZS5zLmR5bmFtaWMpZm9yKHZhciBnPTA7ZzxlLmNvcmUucy5keW5hbWljRWwubGVuZ3RoO2crKylmKz0nPHNwYW4gY2xhc3M9XCJsZy1wYWdlci1jb250XCI+IDxzcGFuIGNsYXNzPVwibGctcGFnZXJcIj48L3NwYW4+PGRpdiBjbGFzcz1cImxnLXBhZ2VyLXRodW1iLWNvbnRcIj48c3BhbiBjbGFzcz1cImxnLWNhcmV0XCI+PC9zcGFuPiA8aW1nIHNyYz1cIicrZS5jb3JlLnMuZHluYW1pY0VsW2ddLnRodW1iKydcIiAvPjwvZGl2Pjwvc3Bhbj4nO2Vsc2UgZS5jb3JlLiRpdGVtcy5lYWNoKGZ1bmN0aW9uKCl7ZS5jb3JlLnMuZXhUaHVtYkltYWdlP2YrPSc8c3BhbiBjbGFzcz1cImxnLXBhZ2VyLWNvbnRcIj4gPHNwYW4gY2xhc3M9XCJsZy1wYWdlclwiPjwvc3Bhbj48ZGl2IGNsYXNzPVwibGctcGFnZXItdGh1bWItY29udFwiPjxzcGFuIGNsYXNzPVwibGctY2FyZXRcIj48L3NwYW4+IDxpbWcgc3JjPVwiJythKHRoaXMpLmF0dHIoZS5jb3JlLnMuZXhUaHVtYkltYWdlKSsnXCIgLz48L2Rpdj48L3NwYW4+JzpmKz0nPHNwYW4gY2xhc3M9XCJsZy1wYWdlci1jb250XCI+IDxzcGFuIGNsYXNzPVwibGctcGFnZXJcIj48L3NwYW4+PGRpdiBjbGFzcz1cImxnLXBhZ2VyLXRodW1iLWNvbnRcIj48c3BhbiBjbGFzcz1cImxnLWNhcmV0XCI+PC9zcGFuPiA8aW1nIHNyYz1cIicrYSh0aGlzKS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIikrJ1wiIC8+PC9kaXY+PC9zcGFuPid9KTtjPWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wYWdlci1vdXRlclwiKSxjLmh0bWwoZiksYj1lLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcGFnZXItY29udFwiKSxiLm9uKFwiY2xpY2subGcgdG91Y2hlbmQubGdcIixmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7ZS5jb3JlLmluZGV4PWIuaW5kZXgoKSxlLmNvcmUuc2xpZGUoZS5jb3JlLmluZGV4LCExLCEwLCExKX0pLGMub24oXCJtb3VzZW92ZXIubGdcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChkKSxjLmFkZENsYXNzKFwibGctcGFnZXItaG92ZXJcIil9KSxjLm9uKFwibW91c2VvdXQubGdcIixmdW5jdGlvbigpe2Q9c2V0VGltZW91dChmdW5jdGlvbigpe2MucmVtb3ZlQ2xhc3MoXCJsZy1wYWdlci1ob3ZlclwiKX0pfSksZS5jb3JlLiRlbC5vbihcIm9uQmVmb3JlU2xpZGUubGcudG1cIixmdW5jdGlvbihhLGMsZCl7Yi5yZW1vdmVDbGFzcyhcImxnLXBhZ2VyLWFjdGl2ZVwiKSxiLmVxKGQpLmFkZENsYXNzKFwibGctcGFnZXItYWN0aXZlXCIpfSl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMucGFnZXI9Y30oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0oMCxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgYj17dGh1bWJuYWlsOiEwLGFuaW1hdGVUaHVtYjohMCxjdXJyZW50UGFnZXJQb3NpdGlvbjpcIm1pZGRsZVwiLHRodW1iV2lkdGg6MTAwLHRodW1iSGVpZ2h0OlwiODBweFwiLHRodW1iQ29udEhlaWdodDoxMDAsdGh1bWJNYXJnaW46NSxleFRodW1iSW1hZ2U6ITEsc2hvd1RodW1iQnlEZWZhdWx0OiEwLHRvb2dsZVRodW1iOiEwLHB1bGxDYXB0aW9uVXA6ITAsZW5hYmxlVGh1bWJEcmFnOiEwLGVuYWJsZVRodW1iU3dpcGU6ITAsc3dpcGVUaHJlc2hvbGQ6NTAsbG9hZFlvdXR1YmVUaHVtYm5haWw6ITAseW91dHViZVRodW1iU2l6ZToxLGxvYWRWaW1lb1RodW1ibmFpbDohMCx2aW1lb1RodW1iU2l6ZTpcInRodW1ibmFpbF9zbWFsbFwiLGxvYWREYWlseW1vdGlvblRodW1ibmFpbDohMH0sYz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5jb3JlPWEoYykuZGF0YShcImxpZ2h0R2FsbGVyeVwiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxiLHRoaXMuY29yZS5zKSx0aGlzLiRlbD1hKGMpLHRoaXMuJHRodW1iT3V0ZXI9bnVsbCx0aGlzLnRodW1iT3V0ZXJXaWR0aD0wLHRoaXMudGh1bWJUb3RhbFdpZHRoPXRoaXMuY29yZS4kaXRlbXMubGVuZ3RoKih0aGlzLmNvcmUucy50aHVtYldpZHRoK3RoaXMuY29yZS5zLnRodW1iTWFyZ2luKSx0aGlzLnRodW1iSW5kZXg9dGhpcy5jb3JlLmluZGV4LHRoaXMuY29yZS5zLmFuaW1hdGVUaHVtYiYmKHRoaXMuY29yZS5zLnRodW1iSGVpZ2h0PVwiMTAwJVwiKSx0aGlzLmxlZnQ9MCx0aGlzLmluaXQoKSx0aGlzfTtjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLmNvcmUucy50aHVtYm5haWwmJnRoaXMuY29yZS4kaXRlbXMubGVuZ3RoPjEmJih0aGlzLmNvcmUucy5zaG93VGh1bWJCeURlZmF1bHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctdGh1bWItb3BlblwiKX0sNzAwKSx0aGlzLmNvcmUucy5wdWxsQ2FwdGlvblVwJiZ0aGlzLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctcHVsbC1jYXB0aW9uLXVwXCIpLHRoaXMuYnVpbGQoKSx0aGlzLmNvcmUucy5hbmltYXRlVGh1bWImJnRoaXMuY29yZS5kb0NzcygpPyh0aGlzLmNvcmUucy5lbmFibGVUaHVtYkRyYWcmJnRoaXMuZW5hYmxlVGh1bWJEcmFnKCksdGhpcy5jb3JlLnMuZW5hYmxlVGh1bWJTd2lwZSYmdGhpcy5lbmFibGVUaHVtYlN3aXBlKCksdGhpcy50aHVtYkNsaWNrYWJsZT0hMSk6dGhpcy50aHVtYkNsaWNrYWJsZT0hMCx0aGlzLnRvb2dsZSgpLHRoaXMudGh1bWJrZXlQcmVzcygpKX0sYy5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZyxoPWQuY29yZS5pc1ZpZGVvKGEsYyl8fHt9LGk9XCJcIjtoLnlvdXR1YmV8fGgudmltZW98fGguZGFpbHltb3Rpb24/aC55b3V0dWJlP2c9ZC5jb3JlLnMubG9hZFlvdXR1YmVUaHVtYm5haWw/XCIvL2ltZy55b3V0dWJlLmNvbS92aS9cIitoLnlvdXR1YmVbMV0rXCIvXCIrZC5jb3JlLnMueW91dHViZVRodW1iU2l6ZStcIi5qcGdcIjpiOmgudmltZW8/ZC5jb3JlLnMubG9hZFZpbWVvVGh1bWJuYWlsPyhnPVwiLy9pLnZpbWVvY2RuLmNvbS92aWRlby9lcnJvcl9cIitmK1wiLmpwZ1wiLGk9aC52aW1lb1sxXSk6Zz1iOmguZGFpbHltb3Rpb24mJihnPWQuY29yZS5zLmxvYWREYWlseW1vdGlvblRodW1ibmFpbD9cIi8vd3d3LmRhaWx5bW90aW9uLmNvbS90aHVtYm5haWwvdmlkZW8vXCIraC5kYWlseW1vdGlvblsxXTpiKTpnPWIsZSs9JzxkaXYgZGF0YS12aW1lby1pZD1cIicraSsnXCIgY2xhc3M9XCJsZy10aHVtYi1pdGVtXCIgc3R5bGU9XCJ3aWR0aDonK2QuY29yZS5zLnRodW1iV2lkdGgrXCJweDsgaGVpZ2h0OiBcIitkLmNvcmUucy50aHVtYkhlaWdodCtcIjsgbWFyZ2luLXJpZ2h0OiBcIitkLmNvcmUucy50aHVtYk1hcmdpbisncHhcIj48aW1nIHNyYz1cIicrZysnXCIgLz48L2Rpdj4nLGk9XCJcIn12YXIgYyxkPXRoaXMsZT1cIlwiLGY9XCJcIixnPSc8ZGl2IGNsYXNzPVwibGctdGh1bWItb3V0ZXJcIj48ZGl2IGNsYXNzPVwibGctdGh1bWIgbGctZ3JvdXBcIj48L2Rpdj48L2Rpdj4nO3N3aXRjaCh0aGlzLmNvcmUucy52aW1lb1RodW1iU2l6ZSl7Y2FzZVwidGh1bWJuYWlsX2xhcmdlXCI6Zj1cIjY0MFwiO2JyZWFrO2Nhc2VcInRodW1ibmFpbF9tZWRpdW1cIjpmPVwiMjAweDE1MFwiO2JyZWFrO2Nhc2VcInRodW1ibmFpbF9zbWFsbFwiOmY9XCIxMDB4NzVcIn1pZihkLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctaGFzLXRodW1iXCIpLGQuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5hcHBlbmQoZyksZC4kdGh1bWJPdXRlcj1kLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWItb3V0ZXJcIiksZC50aHVtYk91dGVyV2lkdGg9ZC4kdGh1bWJPdXRlci53aWR0aCgpLGQuY29yZS5zLmFuaW1hdGVUaHVtYiYmZC5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLmNzcyh7d2lkdGg6ZC50aHVtYlRvdGFsV2lkdGgrXCJweFwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIn0pLHRoaXMuY29yZS5zLmFuaW1hdGVUaHVtYiYmZC4kdGh1bWJPdXRlci5jc3MoXCJoZWlnaHRcIixkLmNvcmUucy50aHVtYkNvbnRIZWlnaHQrXCJweFwiKSxkLmNvcmUucy5keW5hbWljKWZvcih2YXIgaD0wO2g8ZC5jb3JlLnMuZHluYW1pY0VsLmxlbmd0aDtoKyspYihkLmNvcmUucy5keW5hbWljRWxbaF0uc3JjLGQuY29yZS5zLmR5bmFtaWNFbFtoXS50aHVtYixoKTtlbHNlIGQuY29yZS4kaXRlbXMuZWFjaChmdW5jdGlvbihjKXtkLmNvcmUucy5leFRodW1iSW1hZ2U/YihhKHRoaXMpLmF0dHIoXCJocmVmXCIpfHxhKHRoaXMpLmF0dHIoXCJkYXRhLXNyY1wiKSxhKHRoaXMpLmF0dHIoZC5jb3JlLnMuZXhUaHVtYkltYWdlKSxjKTpiKGEodGhpcykuYXR0cihcImhyZWZcIil8fGEodGhpcykuYXR0cihcImRhdGEtc3JjXCIpLGEodGhpcykuZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIpLGMpfSk7ZC5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLmh0bWwoZSksYz1kLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWItaXRlbVwiKSxjLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGM9Yi5hdHRyKFwiZGF0YS12aW1lby1pZFwiKTtjJiZhLmdldEpTT04oXCIvL3d3dy52aW1lby5jb20vYXBpL3YyL3ZpZGVvL1wiK2MrXCIuanNvbj9jYWxsYmFjaz0/XCIse2Zvcm1hdDpcImpzb25cIn0sZnVuY3Rpb24oYSl7Yi5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIixhWzBdW2QuY29yZS5zLnZpbWVvVGh1bWJTaXplXSl9KX0pLGMuZXEoZC5jb3JlLmluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxkLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7Yy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxjLmVxKGQuY29yZS5pbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIil9KSxjLm9uKFwiY2xpY2subGcgdG91Y2hlbmQubGdcIixmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7c2V0VGltZW91dChmdW5jdGlvbigpeyhkLnRodW1iQ2xpY2thYmxlJiYhZC5jb3JlLmxnQnVzeXx8IWQuY29yZS5kb0NzcygpKSYmKGQuY29yZS5pbmRleD1iLmluZGV4KCksZC5jb3JlLnNsaWRlKGQuY29yZS5pbmRleCwhMSwhMCwhMSkpfSw1MCl9KSxkLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7ZC5hbmltYXRlVGh1bWIoZC5jb3JlLmluZGV4KX0pLGEod2luZG93KS5vbihcInJlc2l6ZS5sZy50aHVtYiBvcmllbnRhdGlvbmNoYW5nZS5sZy50aHVtYlwiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2QuYW5pbWF0ZVRodW1iKGQuY29yZS5pbmRleCksZC50aHVtYk91dGVyV2lkdGg9ZC4kdGh1bWJPdXRlci53aWR0aCgpfSwyMDApfSl9LGMucHJvdG90eXBlLnNldFRyYW5zbGF0ZT1mdW5jdGlvbihhKXt0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtXCIrYStcInB4LCAwcHgsIDBweClcIn0pfSxjLnByb3RvdHlwZS5hbmltYXRlVGh1bWI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpO2lmKHRoaXMuY29yZS5zLmFuaW1hdGVUaHVtYil7dmFyIGM7c3dpdGNoKHRoaXMuY29yZS5zLmN1cnJlbnRQYWdlclBvc2l0aW9uKXtjYXNlXCJsZWZ0XCI6Yz0wO2JyZWFrO2Nhc2VcIm1pZGRsZVwiOmM9dGhpcy50aHVtYk91dGVyV2lkdGgvMi10aGlzLmNvcmUucy50aHVtYldpZHRoLzI7YnJlYWs7Y2FzZVwicmlnaHRcIjpjPXRoaXMudGh1bWJPdXRlcldpZHRoLXRoaXMuY29yZS5zLnRodW1iV2lkdGh9dGhpcy5sZWZ0PSh0aGlzLmNvcmUucy50aHVtYldpZHRoK3RoaXMuY29yZS5zLnRodW1iTWFyZ2luKSphLTEtYyx0aGlzLmxlZnQ+dGhpcy50aHVtYlRvdGFsV2lkdGgtdGhpcy50aHVtYk91dGVyV2lkdGgmJih0aGlzLmxlZnQ9dGhpcy50aHVtYlRvdGFsV2lkdGgtdGhpcy50aHVtYk91dGVyV2lkdGgpLHRoaXMubGVmdDwwJiYodGhpcy5sZWZ0PTApLHRoaXMuY29yZS5sR2FsbGVyeU9uPyhiLmhhc0NsYXNzKFwib25cIil8fHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsdGhpcy5jb3JlLnMuc3BlZWQrXCJtc1wiKSx0aGlzLmNvcmUuZG9Dc3MoKXx8Yi5hbmltYXRlKHtsZWZ0Oi10aGlzLmxlZnQrXCJweFwifSx0aGlzLmNvcmUucy5zcGVlZCkpOnRoaXMuY29yZS5kb0NzcygpfHxiLmNzcyhcImxlZnRcIiwtdGhpcy5sZWZ0K1wicHhcIiksdGhpcy5zZXRUcmFuc2xhdGUodGhpcy5sZWZ0KX19LGMucHJvdG90eXBlLmVuYWJsZVRodW1iRHJhZz1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0wLGQ9MCxlPSExLGY9ITEsZz0wO2IuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpLGIuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5vbihcIm1vdXNlZG93bi5sZy50aHVtYlwiLGZ1bmN0aW9uKGEpe2IudGh1bWJUb3RhbFdpZHRoPmIudGh1bWJPdXRlcldpZHRoJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGM9YS5wYWdlWCxlPSEwLGIuY29yZS4kb3V0ZXIuc2Nyb2xsTGVmdCs9MSxiLmNvcmUuJG91dGVyLnNjcm9sbExlZnQtPTEsYi50aHVtYkNsaWNrYWJsZT0hMSxiLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYlwiKS5hZGRDbGFzcyhcImxnLWdyYWJiaW5nXCIpKX0pLGEod2luZG93KS5vbihcIm1vdXNlbW92ZS5sZy50aHVtYlwiLGZ1bmN0aW9uKGEpe2UmJihnPWIubGVmdCxmPSEwLGQ9YS5wYWdlWCxiLiR0aHVtYk91dGVyLmFkZENsYXNzKFwibGctZHJhZ2dpbmdcIiksZy09ZC1jLGc+Yi50aHVtYlRvdGFsV2lkdGgtYi50aHVtYk91dGVyV2lkdGgmJihnPWIudGh1bWJUb3RhbFdpZHRoLWIudGh1bWJPdXRlcldpZHRoKSxnPDAmJihnPTApLGIuc2V0VHJhbnNsYXRlKGcpKX0pLGEod2luZG93KS5vbihcIm1vdXNldXAubGcudGh1bWJcIixmdW5jdGlvbigpe2Y/KGY9ITEsYi4kdGh1bWJPdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGIubGVmdD1nLE1hdGguYWJzKGQtYyk8Yi5jb3JlLnMuc3dpcGVUaHJlc2hvbGQmJihiLnRodW1iQ2xpY2thYmxlPSEwKSk6Yi50aHVtYkNsaWNrYWJsZT0hMCxlJiYoZT0hMSxiLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYmJpbmdcIikuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpKX0pfSxjLnByb3RvdHlwZS5lbmFibGVUaHVtYlN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTAsYz0wLGQ9ITEsZT0wO2EuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5vbihcInRvdWNoc3RhcnQubGdcIixmdW5jdGlvbihjKXthLnRodW1iVG90YWxXaWR0aD5hLnRodW1iT3V0ZXJXaWR0aCYmKGMucHJldmVudERlZmF1bHQoKSxiPWMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLGEudGh1bWJDbGlja2FibGU9ITEpfSksYS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwidG91Y2htb3ZlLmxnXCIsZnVuY3Rpb24oZil7YS50aHVtYlRvdGFsV2lkdGg+YS50aHVtYk91dGVyV2lkdGgmJihmLnByZXZlbnREZWZhdWx0KCksYz1mLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCxkPSEwLGEuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSxlPWEubGVmdCxlLT1jLWIsZT5hLnRodW1iVG90YWxXaWR0aC1hLnRodW1iT3V0ZXJXaWR0aCYmKGU9YS50aHVtYlRvdGFsV2lkdGgtYS50aHVtYk91dGVyV2lkdGgpLGU8MCYmKGU9MCksYS5zZXRUcmFuc2xhdGUoZSkpfSksYS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwidG91Y2hlbmQubGdcIixmdW5jdGlvbigpe2EudGh1bWJUb3RhbFdpZHRoPmEudGh1bWJPdXRlcldpZHRoJiZkPyhkPSExLGEuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSxNYXRoLmFicyhjLWIpPGEuY29yZS5zLnN3aXBlVGhyZXNob2xkJiYoYS50aHVtYkNsaWNrYWJsZT0hMCksYS5sZWZ0PWUpOmEudGh1bWJDbGlja2FibGU9ITB9KX0sYy5wcm90b3R5cGUudG9vZ2xlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvcmUucy50b29nbGVUaHVtYiYmKGEuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1jYW4tdG9nZ2xlXCIpLGEuJHRodW1iT3V0ZXIuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImxnLXRvb2dsZS10aHVtYiBsZy1pY29uXCI+PC9zcGFuPicpLGEuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10b29nbGUtdGh1bWJcIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7YS5jb3JlLiRvdXRlci50b2dnbGVDbGFzcyhcImxnLXRodW1iLW9wZW5cIil9KSl9LGMucHJvdG90eXBlLnRodW1ia2V5UHJlc3M9ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2Eod2luZG93KS5vbihcImtleWRvd24ubGcudGh1bWJcIixmdW5jdGlvbihhKXszOD09PWEua2V5Q29kZT8oYS5wcmV2ZW50RGVmYXVsdCgpLGIuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpKTo0MD09PWEua2V5Q29kZSYmKGEucHJldmVudERlZmF1bHQoKSxiLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdGh1bWItb3BlblwiKSl9KX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe1xudGhpcy5jb3JlLnMudGh1bWJuYWlsJiZ0aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aD4xJiYoYSh3aW5kb3cpLm9mZihcInJlc2l6ZS5sZy50aHVtYiBvcmllbnRhdGlvbmNoYW5nZS5sZy50aHVtYiBrZXlkb3duLmxnLnRodW1iXCIpLHRoaXMuJHRodW1iT3V0ZXIucmVtb3ZlKCksdGhpcy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWhhcy10aHVtYlwiKSl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuVGh1bWJuYWlsPWN9KCl9KSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGEualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGEsYixjLGQpe3ZhciBlPXRoaXM7aWYoZS5jb3JlLiRzbGlkZS5lcShiKS5maW5kKFwiLmxnLXZpZGVvXCIpLmFwcGVuZChlLmxvYWRWaWRlbyhjLFwibGctb2JqZWN0XCIsITAsYixkKSksZClpZihlLmNvcmUucy52aWRlb2pzKXRyeXt2aWRlb2pzKGUuY29yZS4kc2xpZGUuZXEoYikuZmluZChcIi5sZy1odG1sNVwiKS5nZXQoMCksZS5jb3JlLnMudmlkZW9qc09wdGlvbnMsZnVuY3Rpb24oKXshZS52aWRlb0xvYWRlZCYmZS5jb3JlLnMuYXV0b3BsYXlGaXJzdFZpZGVvJiZ0aGlzLnBsYXkoKX0pfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgdmlkZW9qc1wiKX1lbHNlIWUudmlkZW9Mb2FkZWQmJmUuY29yZS5zLmF1dG9wbGF5Rmlyc3RWaWRlbyYmZS5jb3JlLiRzbGlkZS5lcShiKS5maW5kKFwiLmxnLWh0bWw1XCIpLmdldCgwKS5wbGF5KCl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPXRoaXMuY29yZS4kc2xpZGUuZXEoYikuZmluZChcIi5sZy12aWRlby1jb250XCIpO2MuaGFzQ2xhc3MoXCJsZy1oYXMtaWZyYW1lXCIpfHwoYy5jc3MoXCJtYXgtd2lkdGhcIix0aGlzLmNvcmUucy52aWRlb01heFdpZHRoKSx0aGlzLnZpZGVvTG9hZGVkPSEwKX1mdW5jdGlvbiBkKGIsYyxkKXt2YXIgZT10aGlzLGY9ZS5jb3JlLiRzbGlkZS5lcShjKSxnPWYuZmluZChcIi5sZy15b3V0dWJlXCIpLmdldCgwKSxoPWYuZmluZChcIi5sZy12aW1lb1wiKS5nZXQoMCksaT1mLmZpbmQoXCIubGctZGFpbHltb3Rpb25cIikuZ2V0KDApLGo9Zi5maW5kKFwiLmxnLXZrXCIpLmdldCgwKSxrPWYuZmluZChcIi5sZy1odG1sNVwiKS5nZXQoMCk7aWYoZylnLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoJ3tcImV2ZW50XCI6XCJjb21tYW5kXCIsXCJmdW5jXCI6XCJwYXVzZVZpZGVvXCIsXCJhcmdzXCI6XCJcIn0nLFwiKlwiKTtlbHNlIGlmKGgpdHJ5eyRmKGgpLmFwaShcInBhdXNlXCIpfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgZnJvb2dhbG9vcDIganNcIil9ZWxzZSBpZihpKWkuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShcInBhdXNlXCIsXCIqXCIpO2Vsc2UgaWYoaylpZihlLmNvcmUucy52aWRlb2pzKXRyeXt2aWRlb2pzKGspLnBhdXNlKCl9Y2F0Y2goYSl7Y29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCB2aWRlb2pzXCIpfWVsc2Ugay5wYXVzZSgpO2omJmEoaikuYXR0cihcInNyY1wiLGEoaikuYXR0cihcInNyY1wiKS5yZXBsYWNlKFwiJmF1dG9wbGF5XCIsXCImbm9wbGF5XCIpKTt2YXIgbDtsPWUuY29yZS5zLmR5bmFtaWM/ZS5jb3JlLnMuZHluYW1pY0VsW2RdLnNyYzplLmNvcmUuJGl0ZW1zLmVxKGQpLmF0dHIoXCJocmVmXCIpfHxlLmNvcmUuJGl0ZW1zLmVxKGQpLmF0dHIoXCJkYXRhLXNyY1wiKTt2YXIgbT1lLmNvcmUuaXNWaWRlbyhsLGQpfHx7fTsobS55b3V0dWJlfHxtLnZpbWVvfHxtLmRhaWx5bW90aW9ufHxtLnZrKSYmZS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtZG93bmxvYWRcIil9dmFyIGU9e3ZpZGVvTWF4V2lkdGg6XCI4NTVweFwiLGF1dG9wbGF5Rmlyc3RWaWRlbzohMCx5b3V0dWJlUGxheWVyUGFyYW1zOiExLHZpbWVvUGxheWVyUGFyYW1zOiExLGRhaWx5bW90aW9uUGxheWVyUGFyYW1zOiExLHZrUGxheWVyUGFyYW1zOiExLHZpZGVvanM6ITEsdmlkZW9qc09wdGlvbnM6e319LGY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY29yZT1hKGIpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxlLHRoaXMuY29yZS5zKSx0aGlzLnZpZGVvTG9hZGVkPSExLHRoaXMuaW5pdCgpLHRoaXN9O2YucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuY29yZS4kZWwub24oXCJoYXNWaWRlby5sZy50bVwiLGIuYmluZCh0aGlzKSksZS5jb3JlLiRlbC5vbihcIm9uQWZlckFwcGVuZFNsaWRlLmxnLnRtXCIsYy5iaW5kKHRoaXMpKSxlLmNvcmUuZG9Dc3MoKSYmZS5jb3JlLiRpdGVtcy5sZW5ndGg+MSYmKGUuY29yZS5zLmVuYWJsZVN3aXBlfHxlLmNvcmUucy5lbmFibGVEcmFnKT9lLmNvcmUuJGVsLm9uKFwib25TbGlkZUNsaWNrLmxnLnRtXCIsZnVuY3Rpb24oKXt2YXIgYT1lLmNvcmUuJHNsaWRlLmVxKGUuY29yZS5pbmRleCk7ZS5sb2FkVmlkZW9PbmNsaWNrKGEpfSk6ZS5jb3JlLiRzbGlkZS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtlLmxvYWRWaWRlb09uY2xpY2soYSh0aGlzKSl9KSxlLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGQuYmluZCh0aGlzKSksZS5jb3JlLiRlbC5vbihcIm9uQWZ0ZXJTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKGEsYil7ZS5jb3JlLiRzbGlkZS5lcShiKS5yZW1vdmVDbGFzcyhcImxnLXZpZGVvLXBsYXlpbmdcIil9KSxlLmNvcmUucy5hdXRvcGxheUZpcnN0VmlkZW8mJmUuY29yZS4kZWwub24oXCJvbkFmZXJBcHBlbmRTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKGEsYil7aWYoIWUuY29yZS5sR2FsbGVyeU9uKXt2YXIgYz1lLmNvcmUuJHNsaWRlLmVxKGIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmxvYWRWaWRlb09uY2xpY2soYyl9LDEwMCl9fSl9LGYucHJvdG90eXBlLmxvYWRWaWRlbz1mdW5jdGlvbihiLGMsZCxlLGYpe3ZhciBnPVwiXCIsaD0xLGk9XCJcIixqPXRoaXMuY29yZS5pc1ZpZGVvKGIsZSl8fHt9O2lmKGQmJihoPXRoaXMudmlkZW9Mb2FkZWQ/MDp0aGlzLmNvcmUucy5hdXRvcGxheUZpcnN0VmlkZW8/MTowKSxqLnlvdXR1YmUpaT1cIj93bW9kZT1vcGFxdWUmYXV0b3BsYXk9XCIraCtcIiZlbmFibGVqc2FwaT0xXCIsdGhpcy5jb3JlLnMueW91dHViZVBsYXllclBhcmFtcyYmKGk9aStcIiZcIithLnBhcmFtKHRoaXMuY29yZS5zLnlvdXR1YmVQbGF5ZXJQYXJhbXMpKSxnPSc8aWZyYW1lIGNsYXNzPVwibGctdmlkZW8tb2JqZWN0IGxnLXlvdXR1YmUgJytjKydcIiB3aWR0aD1cIjU2MFwiIGhlaWdodD1cIjMxNVwiIHNyYz1cIi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycrai55b3V0dWJlWzFdK2krJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nO2Vsc2UgaWYoai52aW1lbylpPVwiP2F1dG9wbGF5PVwiK2grXCImYXBpPTFcIix0aGlzLmNvcmUucy52aW1lb1BsYXllclBhcmFtcyYmKGk9aStcIiZcIithLnBhcmFtKHRoaXMuY29yZS5zLnZpbWVvUGxheWVyUGFyYW1zKSksZz0nPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy12aW1lbyAnK2MrJ1wiIHdpZHRoPVwiNTYwXCIgaGVpZ2h0PVwiMzE1XCIgIHNyYz1cIi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nK2oudmltZW9bMV0raSsnXCIgZnJhbWVib3JkZXI9XCIwXCIgd2Via2l0QWxsb3dGdWxsU2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd0Z1bGxTY3JlZW4+PC9pZnJhbWU+JztlbHNlIGlmKGouZGFpbHltb3Rpb24paT1cIj93bW9kZT1vcGFxdWUmYXV0b3BsYXk9XCIraCtcIiZhcGk9cG9zdE1lc3NhZ2VcIix0aGlzLmNvcmUucy5kYWlseW1vdGlvblBsYXllclBhcmFtcyYmKGk9aStcIiZcIithLnBhcmFtKHRoaXMuY29yZS5zLmRhaWx5bW90aW9uUGxheWVyUGFyYW1zKSksZz0nPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy1kYWlseW1vdGlvbiAnK2MrJ1wiIHdpZHRoPVwiNTYwXCIgaGVpZ2h0PVwiMzE1XCIgc3JjPVwiLy93d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLycrai5kYWlseW1vdGlvblsxXStpKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztlbHNlIGlmKGouaHRtbDUpe3ZhciBrPWYuc3Vic3RyaW5nKDAsMSk7XCIuXCIhPT1rJiZcIiNcIiE9PWt8fChmPWEoZikuaHRtbCgpKSxnPWZ9ZWxzZSBqLnZrJiYoaT1cIiZhdXRvcGxheT1cIitoLHRoaXMuY29yZS5zLnZrUGxheWVyUGFyYW1zJiYoaT1pK1wiJlwiK2EucGFyYW0odGhpcy5jb3JlLnMudmtQbGF5ZXJQYXJhbXMpKSxnPSc8aWZyYW1lIGNsYXNzPVwibGctdmlkZW8tb2JqZWN0IGxnLXZrICcrYysnXCIgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiBzcmM9XCIvL3ZrLmNvbS92aWRlb19leHQucGhwPycrai52a1sxXStpKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+Jyk7cmV0dXJuIGd9LGYucHJvdG90eXBlLmxvYWRWaWRlb09uY2xpY2s9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhLmZpbmQoXCIubGctb2JqZWN0XCIpLmhhc0NsYXNzKFwibGctaGFzLXBvc3RlclwiKSYmYS5maW5kKFwiLmxnLW9iamVjdFwiKS5pcyhcIjp2aXNpYmxlXCIpKWlmKGEuaGFzQ2xhc3MoXCJsZy1oYXMtdmlkZW9cIikpe3ZhciBjPWEuZmluZChcIi5sZy15b3V0dWJlXCIpLmdldCgwKSxkPWEuZmluZChcIi5sZy12aW1lb1wiKS5nZXQoMCksZT1hLmZpbmQoXCIubGctZGFpbHltb3Rpb25cIikuZ2V0KDApLGY9YS5maW5kKFwiLmxnLWh0bWw1XCIpLmdldCgwKTtpZihjKWMuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgne1wiZXZlbnRcIjpcImNvbW1hbmRcIixcImZ1bmNcIjpcInBsYXlWaWRlb1wiLFwiYXJnc1wiOlwiXCJ9JyxcIipcIik7ZWxzZSBpZihkKXRyeXskZihkKS5hcGkoXCJwbGF5XCIpfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgZnJvb2dhbG9vcDIganNcIil9ZWxzZSBpZihlKWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShcInBsYXlcIixcIipcIik7ZWxzZSBpZihmKWlmKGIuY29yZS5zLnZpZGVvanMpdHJ5e3ZpZGVvanMoZikucGxheSgpfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgdmlkZW9qc1wiKX1lbHNlIGYucGxheSgpO2EuYWRkQ2xhc3MoXCJsZy12aWRlby1wbGF5aW5nXCIpfWVsc2V7YS5hZGRDbGFzcyhcImxnLXZpZGVvLXBsYXlpbmcgbGctaGFzLXZpZGVvXCIpO3ZhciBnLGgsaT1mdW5jdGlvbihjLGQpe2lmKGEuZmluZChcIi5sZy12aWRlb1wiKS5hcHBlbmQoYi5sb2FkVmlkZW8oYyxcIlwiLCExLGIuY29yZS5pbmRleCxkKSksZClpZihiLmNvcmUucy52aWRlb2pzKXRyeXt2aWRlb2pzKGIuY29yZS4kc2xpZGUuZXEoYi5jb3JlLmluZGV4KS5maW5kKFwiLmxnLWh0bWw1XCIpLmdldCgwKSxiLmNvcmUucy52aWRlb2pzT3B0aW9ucyxmdW5jdGlvbigpe3RoaXMucGxheSgpfSl9Y2F0Y2goYSl7Y29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCB2aWRlb2pzXCIpfWVsc2UgYi5jb3JlLiRzbGlkZS5lcShiLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApLnBsYXkoKX07Yi5jb3JlLnMuZHluYW1pYz8oZz1iLmNvcmUucy5keW5hbWljRWxbYi5jb3JlLmluZGV4XS5zcmMsaD1iLmNvcmUucy5keW5hbWljRWxbYi5jb3JlLmluZGV4XS5odG1sLGkoZyxoKSk6KGc9Yi5jb3JlLiRpdGVtcy5lcShiLmNvcmUuaW5kZXgpLmF0dHIoXCJocmVmXCIpfHxiLmNvcmUuJGl0ZW1zLmVxKGIuY29yZS5pbmRleCkuYXR0cihcImRhdGEtc3JjXCIpLGg9Yi5jb3JlLiRpdGVtcy5lcShiLmNvcmUuaW5kZXgpLmF0dHIoXCJkYXRhLWh0bWxcIiksaShnLGgpKTt2YXIgaj1hLmZpbmQoXCIubGctb2JqZWN0XCIpO2EuZmluZChcIi5sZy12aWRlb1wiKS5hcHBlbmQoaiksYS5maW5kKFwiLmxnLXZpZGVvLW9iamVjdFwiKS5oYXNDbGFzcyhcImxnLWh0bWw1XCIpfHwoYS5yZW1vdmVDbGFzcyhcImxnLWNvbXBsZXRlXCIpLGEuZmluZChcIi5sZy12aWRlby1vYmplY3RcIikub24oXCJsb2FkLmxnIGVycm9yLmxnXCIsZnVuY3Rpb24oKXthLmFkZENsYXNzKFwibGctY29tcGxldGVcIil9KSl9fSxmLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy52aWRlb0xvYWRlZD0hMX0sYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcy52aWRlbz1mfSgpfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYihhKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcImpxdWVyeVwiKSk6YihqUXVlcnkpfSgwLGZ1bmN0aW9uKGEpeyFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBiPWZ1bmN0aW9uKCl7dmFyIGE9ITEsYj1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbShlfGl1bSlcXC8oWzAtOV0rKVxcLi8pO3JldHVybiBiJiZwYXJzZUludChiWzJdLDEwKTw1NCYmKGE9ITApLGF9LGM9e3NjYWxlOjEsem9vbTohMCxhY3R1YWxTaXplOiEwLGVuYWJsZVpvb21BZnRlcjozMDAsdXNlTGVmdEZvclpvb206YigpfSxkPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmNvcmU9YShiKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGMsdGhpcy5jb3JlLnMpLHRoaXMuY29yZS5zLnpvb20mJnRoaXMuY29yZS5kb0NzcygpJiYodGhpcy5pbml0KCksdGhpcy56b29tYWJsZXRpbWVvdXQ9ITEsdGhpcy5wYWdlWD1hKHdpbmRvdykud2lkdGgoKS8yLHRoaXMucGFnZVk9YSh3aW5kb3cpLmhlaWdodCgpLzIrYSh3aW5kb3cpLnNjcm9sbFRvcCgpKSx0aGlzfTtkLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPSc8c3BhbiBpZD1cImxnLXpvb20taW5cIiBjbGFzcz1cImxnLWljb25cIj48L3NwYW4+PHNwYW4gaWQ9XCJsZy16b29tLW91dFwiIGNsYXNzPVwibGctaWNvblwiPjwvc3Bhbj4nO2IuY29yZS5zLmFjdHVhbFNpemUmJihjKz0nPHNwYW4gaWQ9XCJsZy1hY3R1YWwtc2l6ZVwiIGNsYXNzPVwibGctaWNvblwiPjwvc3Bhbj4nKSxiLmNvcmUucy51c2VMZWZ0Rm9yWm9vbT9iLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctdXNlLWxlZnQtZm9yLXpvb21cIik6Yi5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXVzZS10cmFuc2l0aW9uLWZvci16b29tXCIpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10b29sYmFyXCIpLmFwcGVuZChjKSxiLmNvcmUuJGVsLm9uKFwib25TbGlkZUl0ZW1Mb2FkLmxnLnRtLnpvb21cIixmdW5jdGlvbihjLGQsZSl7dmFyIGY9Yi5jb3JlLnMuZW5hYmxlWm9vbUFmdGVyK2U7YShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1mcm9tLWhhc2hcIikmJmU/Zj0wOmEoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwibGctZnJvbS1oYXNoXCIpLGIuem9vbWFibGV0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmNvcmUuJHNsaWRlLmVxKGQpLmFkZENsYXNzKFwibGctem9vbWFibGVcIil9LGYrMzApfSk7dmFyIGQ9MSxlPWZ1bmN0aW9uKGMpe3ZhciBkLGUsZj1iLmNvcmUuJG91dGVyLmZpbmQoXCIubGctY3VycmVudCAubGctaW1hZ2VcIiksZz0oYSh3aW5kb3cpLndpZHRoKCktZi5wcm9wKFwib2Zmc2V0V2lkdGhcIikpLzIsaD0oYSh3aW5kb3cpLmhlaWdodCgpLWYucHJvcChcIm9mZnNldEhlaWdodFwiKSkvMithKHdpbmRvdykuc2Nyb2xsVG9wKCk7ZD1iLnBhZ2VYLWcsZT1iLnBhZ2VZLWg7dmFyIGk9KGMtMSkqZCxqPShjLTEpKmU7Zi5jc3MoXCJ0cmFuc2Zvcm1cIixcInNjYWxlM2QoXCIrYytcIiwgXCIrYytcIiwgMSlcIikuYXR0cihcImRhdGEtc2NhbGVcIixjKSxiLmNvcmUucy51c2VMZWZ0Rm9yWm9vbT9mLnBhcmVudCgpLmNzcyh7bGVmdDotaStcInB4XCIsdG9wOi1qK1wicHhcIn0pLmF0dHIoXCJkYXRhLXhcIixpKS5hdHRyKFwiZGF0YS15XCIsaik6Zi5wYXJlbnQoKS5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZTNkKC1cIitpK1wicHgsIC1cIitqK1wicHgsIDApXCIpLmF0dHIoXCJkYXRhLXhcIixpKS5hdHRyKFwiZGF0YS15XCIsail9LGY9ZnVuY3Rpb24oKXtkPjE/Yi5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXpvb21lZFwiKTpiLnJlc2V0Wm9vbSgpLGQ8MSYmKGQ9MSksZShkKX0sZz1mdW5jdGlvbihjLGUsZyxoKXt2YXIgaSxqPWUucHJvcChcIm9mZnNldFdpZHRoXCIpO2k9Yi5jb3JlLnMuZHluYW1pYz9iLmNvcmUucy5keW5hbWljRWxbZ10ud2lkdGh8fGVbMF0ubmF0dXJhbFdpZHRofHxqOmIuY29yZS4kaXRlbXMuZXEoZykuYXR0cihcImRhdGEtd2lkdGhcIil8fGVbMF0ubmF0dXJhbFdpZHRofHxqO3ZhciBrO2IuY29yZS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIik/ZD0xOmk+aiYmKGs9aS9qLGQ9a3x8MiksaD8oYi5wYWdlWD1hKHdpbmRvdykud2lkdGgoKS8yLGIucGFnZVk9YSh3aW5kb3cpLmhlaWdodCgpLzIrYSh3aW5kb3cpLnNjcm9sbFRvcCgpKTooYi5wYWdlWD1jLnBhZ2VYfHxjLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCxiLnBhZ2VZPWMucGFnZVl8fGMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZKSxmKCksc2V0VGltZW91dChmdW5jdGlvbigpe2IuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIil9LDEwKX0saD0hMTtiLmNvcmUuJGVsLm9uKFwib25BZmVyQXBwZW5kU2xpZGUubGcudG0uem9vbVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yi5jb3JlLiRzbGlkZS5lcShjKS5maW5kKFwiLmxnLWltYWdlXCIpO2Qub24oXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGEpe2coYSxkLGMpfSksZC5vbihcInRvdWNoc3RhcnRcIixmdW5jdGlvbihhKXtoPyhjbGVhclRpbWVvdXQoaCksaD1udWxsLGcoYSxkLGMpKTpoPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtoPW51bGx9LDMwMCksYS5wcmV2ZW50RGVmYXVsdCgpfSl9KSxhKHdpbmRvdykub24oXCJyZXNpemUubGcuem9vbSBzY3JvbGwubGcuem9vbSBvcmllbnRhdGlvbmNoYW5nZS5sZy56b29tXCIsZnVuY3Rpb24oKXtiLnBhZ2VYPWEod2luZG93KS53aWR0aCgpLzIsYi5wYWdlWT1hKHdpbmRvdykuaGVpZ2h0KCkvMithKHdpbmRvdykuc2Nyb2xsVG9wKCksZShkKX0pLGEoXCIjbGctem9vbS1vdXRcIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7Yi5jb3JlLiRvdXRlci5maW5kKFwiLmxnLWN1cnJlbnQgLmxnLWltYWdlXCIpLmxlbmd0aCYmKGQtPWIuY29yZS5zLnNjYWxlLGYoKSl9KSxhKFwiI2xnLXpvb20taW5cIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7Yi5jb3JlLiRvdXRlci5maW5kKFwiLmxnLWN1cnJlbnQgLmxnLWltYWdlXCIpLmxlbmd0aCYmKGQrPWIuY29yZS5zLnNjYWxlLGYoKSl9KSxhKFwiI2xnLWFjdHVhbC1zaXplXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbihhKXtnKGEsYi5jb3JlLiRzbGlkZS5lcShiLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctaW1hZ2VcIiksYi5jb3JlLmluZGV4LCEwKX0pLGIuY29yZS4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtkPTEsYi5yZXNldFpvb20oKX0pLGIuem9vbURyYWcoKSxiLnpvb21Td2lwZSgpfSxkLnByb3RvdHlwZS5yZXNldFpvb209ZnVuY3Rpb24oKXt0aGlzLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctem9vbWVkXCIpLHRoaXMuY29yZS4kc2xpZGUuZmluZChcIi5sZy1pbWctd3JhcFwiKS5yZW1vdmVBdHRyKFwic3R5bGUgZGF0YS14IGRhdGEteVwiKSx0aGlzLmNvcmUuJHNsaWRlLmZpbmQoXCIubGctaW1hZ2VcIikucmVtb3ZlQXR0cihcInN0eWxlIGRhdGEtc2NhbGVcIiksdGhpcy5wYWdlWD1hKHdpbmRvdykud2lkdGgoKS8yLHRoaXMucGFnZVk9YSh3aW5kb3cpLmhlaWdodCgpLzIrYSh3aW5kb3cpLnNjcm9sbFRvcCgpfSxkLnByb3RvdHlwZS56b29tU3dpcGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9e30sYz17fSxkPSExLGU9ITEsZj0hMTthLmNvcmUuJHNsaWRlLm9uKFwidG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKGMpe2lmKGEuY29yZS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIikpe3ZhciBkPWEuY29yZS4kc2xpZGUuZXEoYS5jb3JlLmluZGV4KS5maW5kKFwiLmxnLW9iamVjdFwiKTtmPWQucHJvcChcIm9mZnNldEhlaWdodFwiKSpkLmF0dHIoXCJkYXRhLXNjYWxlXCIpPmEuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5oZWlnaHQoKSxlPWQucHJvcChcIm9mZnNldFdpZHRoXCIpKmQuYXR0cihcImRhdGEtc2NhbGVcIik+YS5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLndpZHRoKCksKGV8fGYpJiYoYy5wcmV2ZW50RGVmYXVsdCgpLGI9e3g6Yy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgseTpjLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWX0pfX0pLGEuY29yZS4kc2xpZGUub24oXCJ0b3VjaG1vdmUubGdcIixmdW5jdGlvbihnKXtpZihhLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpKXt2YXIgaCxpLGo9YS5jb3JlLiRzbGlkZS5lcShhLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctaW1nLXdyYXBcIik7Zy5wcmV2ZW50RGVmYXVsdCgpLGQ9ITAsYz17eDpnLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCx5Omcub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZfSxhLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctem9vbS1kcmFnZ2luZ1wiKSxpPWY/LU1hdGguYWJzKGouYXR0cihcImRhdGEteVwiKSkrKGMueS1iLnkpOi1NYXRoLmFicyhqLmF0dHIoXCJkYXRhLXlcIikpLGg9ZT8tTWF0aC5hYnMoai5hdHRyKFwiZGF0YS14XCIpKSsoYy54LWIueCk6LU1hdGguYWJzKGouYXR0cihcImRhdGEteFwiKSksKE1hdGguYWJzKGMueC1iLngpPjE1fHxNYXRoLmFicyhjLnktYi55KT4xNSkmJihhLmNvcmUucy51c2VMZWZ0Rm9yWm9vbT9qLmNzcyh7bGVmdDpoK1wicHhcIix0b3A6aStcInB4XCJ9KTpqLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlM2QoXCIraCtcInB4LCBcIitpK1wicHgsIDApXCIpKX19KSxhLmNvcmUuJHNsaWRlLm9uKFwidG91Y2hlbmQubGdcIixmdW5jdGlvbigpe2EuY29yZS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIikmJmQmJihkPSExLGEuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy16b29tLWRyYWdnaW5nXCIpLGEudG91Y2hlbmRab29tKGIsYyxlLGYpKX0pfSxkLnByb3RvdHlwZS56b29tRHJhZz1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz17fSxkPXt9LGU9ITEsZj0hMSxnPSExLGg9ITE7Yi5jb3JlLiRzbGlkZS5vbihcIm1vdXNlZG93bi5sZy56b29tXCIsZnVuY3Rpb24oZCl7dmFyIGY9Yi5jb3JlLiRzbGlkZS5lcShiLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctb2JqZWN0XCIpO2g9Zi5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpKmYuYXR0cihcImRhdGEtc2NhbGVcIik+Yi5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLmhlaWdodCgpLGc9Zi5wcm9wKFwib2Zmc2V0V2lkdGhcIikqZi5hdHRyKFwiZGF0YS1zY2FsZVwiKT5iLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikud2lkdGgoKSxiLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpJiZhKGQudGFyZ2V0KS5oYXNDbGFzcyhcImxnLW9iamVjdFwiKSYmKGd8fGgpJiYoZC5wcmV2ZW50RGVmYXVsdCgpLGM9e3g6ZC5wYWdlWCx5OmQucGFnZVl9LGU9ITAsYi5jb3JlLiRvdXRlci5zY3JvbGxMZWZ0Kz0xLGIuY29yZS4kb3V0ZXIuc2Nyb2xsTGVmdC09MSxiLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYlwiKS5hZGRDbGFzcyhcImxnLWdyYWJiaW5nXCIpKX0pLGEod2luZG93KS5vbihcIm1vdXNlbW92ZS5sZy56b29tXCIsZnVuY3Rpb24oYSl7aWYoZSl7dmFyIGksaixrPWIuY29yZS4kc2xpZGUuZXEoYi5jb3JlLmluZGV4KS5maW5kKFwiLmxnLWltZy13cmFwXCIpO2Y9ITAsZD17eDphLnBhZ2VYLHk6YS5wYWdlWX0sYi5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXpvb20tZHJhZ2dpbmdcIiksaj1oPy1NYXRoLmFicyhrLmF0dHIoXCJkYXRhLXlcIikpKyhkLnktYy55KTotTWF0aC5hYnMoay5hdHRyKFwiZGF0YS15XCIpKSxpPWc/LU1hdGguYWJzKGsuYXR0cihcImRhdGEteFwiKSkrKGQueC1jLngpOi1NYXRoLmFicyhrLmF0dHIoXCJkYXRhLXhcIikpLGIuY29yZS5zLnVzZUxlZnRGb3Jab29tP2suY3NzKHtsZWZ0OmkrXCJweFwiLHRvcDpqK1wicHhcIn0pOmsuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZChcIitpK1wicHgsIFwiK2orXCJweCwgMClcIil9fSksYSh3aW5kb3cpLm9uKFwibW91c2V1cC5sZy56b29tXCIsZnVuY3Rpb24oYSl7ZSYmKGU9ITEsYi5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLXpvb20tZHJhZ2dpbmdcIiksIWZ8fGMueD09PWQueCYmYy55PT09ZC55fHwoZD17eDphLnBhZ2VYLHk6YS5wYWdlWX0sYi50b3VjaGVuZFpvb20oYyxkLGcsaCkpLGY9ITEpLGIuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIil9KX0sZC5wcm90b3R5cGUudG91Y2hlbmRab29tPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1lLmNvcmUuJHNsaWRlLmVxKGUuY29yZS5pbmRleCkuZmluZChcIi5sZy1pbWctd3JhcFwiKSxnPWUuY29yZS4kc2xpZGUuZXEoZS5jb3JlLmluZGV4KS5maW5kKFwiLmxnLW9iamVjdFwiKSxoPS1NYXRoLmFicyhmLmF0dHIoXCJkYXRhLXhcIikpKyhiLngtYS54KSxpPS1NYXRoLmFicyhmLmF0dHIoXCJkYXRhLXlcIikpKyhiLnktYS55KSxqPShlLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuaGVpZ2h0KCktZy5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpKS8yLGs9TWF0aC5hYnMoZy5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpKk1hdGguYWJzKGcuYXR0cihcImRhdGEtc2NhbGVcIikpLWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5oZWlnaHQoKStqKSxsPShlLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikud2lkdGgoKS1nLnByb3AoXCJvZmZzZXRXaWR0aFwiKSkvMixtPU1hdGguYWJzKGcucHJvcChcIm9mZnNldFdpZHRoXCIpKk1hdGguYWJzKGcuYXR0cihcImRhdGEtc2NhbGVcIikpLWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS53aWR0aCgpK2wpOyhNYXRoLmFicyhiLngtYS54KT4xNXx8TWF0aC5hYnMoYi55LWEueSk+MTUpJiYoZCYmKGk8PS1rP2k9LWs6aT49LWomJihpPS1qKSksYyYmKGg8PS1tP2g9LW06aD49LWwmJihoPS1sKSksZD9mLmF0dHIoXCJkYXRhLXlcIixNYXRoLmFicyhpKSk6aT0tTWF0aC5hYnMoZi5hdHRyKFwiZGF0YS15XCIpKSxjP2YuYXR0cihcImRhdGEteFwiLE1hdGguYWJzKGgpKTpoPS1NYXRoLmFicyhmLmF0dHIoXCJkYXRhLXhcIikpLGUuY29yZS5zLnVzZUxlZnRGb3Jab29tP2YuY3NzKHtsZWZ0OmgrXCJweFwiLHRvcDppK1wicHhcIn0pOmYuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZChcIitoK1wicHgsIFwiK2krXCJweCwgMClcIikpfSxkLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcztiLmNvcmUuJGVsLm9mZihcIi5sZy56b29tXCIpLGEod2luZG93KS5vZmYoXCIubGcuem9vbVwiKSxiLmNvcmUuJHNsaWRlLm9mZihcIi5sZy56b29tXCIpLGIuY29yZS4kZWwub2ZmKFwiLmxnLnRtLnpvb21cIiksYi5yZXNldFpvb20oKSxjbGVhclRpbWVvdXQoYi56b29tYWJsZXRpbWVvdXQpLGIuem9vbWFibGV0aW1lb3V0PSExfSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLnpvb209ZH0oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0oMCxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgYj17aGFzaDohMH0sYz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5jb3JlPWEoYykuZGF0YShcImxpZ2h0R2FsbGVyeVwiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxiLHRoaXMuY29yZS5zKSx0aGlzLmNvcmUucy5oYXNoJiYodGhpcy5vbGRIYXNoPXdpbmRvdy5sb2NhdGlvbi5oYXNoLHRoaXMuaW5pdCgpKSx0aGlzfTtjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGIsYz10aGlzO2MuY29yZS4kZWwub24oXCJvbkFmdGVyU2xpZGUubGcudG1cIixmdW5jdGlvbihhLGIsZCl7aGlzdG9yeS5yZXBsYWNlU3RhdGU/aGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCxudWxsLHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSt3aW5kb3cubG9jYXRpb24uc2VhcmNoK1wiI2xnPVwiK2MuY29yZS5zLmdhbGxlcnlJZCtcIiZzbGlkZT1cIitkKTp3aW5kb3cubG9jYXRpb24uaGFzaD1cImxnPVwiK2MuY29yZS5zLmdhbGxlcnlJZCtcIiZzbGlkZT1cIitkfSksYSh3aW5kb3cpLm9uKFwiaGFzaGNoYW5nZS5sZy5oYXNoXCIsZnVuY3Rpb24oKXtiPXdpbmRvdy5sb2NhdGlvbi5oYXNoO3ZhciBhPXBhcnNlSW50KGIuc3BsaXQoXCImc2xpZGU9XCIpWzFdLDEwKTtiLmluZGV4T2YoXCJsZz1cIitjLmNvcmUucy5nYWxsZXJ5SWQpPi0xP2MuY29yZS5zbGlkZShhLCExLCExKTpjLmNvcmUubEdhbGxlcnlPbiYmYy5jb3JlLmRlc3Ryb3koKX0pfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5jb3JlLnMuaGFzaCYmKHRoaXMub2xkSGFzaCYmdGhpcy5vbGRIYXNoLmluZGV4T2YoXCJsZz1cIit0aGlzLmNvcmUucy5nYWxsZXJ5SWQpPDA/aGlzdG9yeS5yZXBsYWNlU3RhdGU/aGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCxudWxsLHRoaXMub2xkSGFzaCk6d2luZG93LmxvY2F0aW9uLmhhc2g9dGhpcy5vbGRIYXNoOmhpc3RvcnkucmVwbGFjZVN0YXRlP2hpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsZG9jdW1lbnQudGl0bGUsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lK3dpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOndpbmRvdy5sb2NhdGlvbi5oYXNoPVwiXCIsdGhpcy5jb3JlLiRlbC5vZmYoXCIubGcuaGFzaFwiKSl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuaGFzaD1jfSgpfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYihhKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcImpxdWVyeVwiKSk6YihqUXVlcnkpfSgwLGZ1bmN0aW9uKGEpeyFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBiPXtzaGFyZTohMCxmYWNlYm9vazohMCxmYWNlYm9va0Ryb3Bkb3duVGV4dDpcIkZhY2Vib29rXCIsdHdpdHRlcjohMCx0d2l0dGVyRHJvcGRvd25UZXh0OlwiVHdpdHRlclwiLGdvb2dsZVBsdXM6ITAsZ29vZ2xlUGx1c0Ryb3Bkb3duVGV4dDpcIkdvb2dsZVBsdXNcIixwaW50ZXJlc3Q6ITAscGludGVyZXN0RHJvcGRvd25UZXh0OlwiUGludGVyZXN0XCJ9LGM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuY29yZT1hKGMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy5jb3JlLnM9YS5leHRlbmQoe30sYix0aGlzLmNvcmUucyksdGhpcy5jb3JlLnMuc2hhcmUmJnRoaXMuaW5pdCgpLHRoaXN9O2MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9JzxzcGFuIGlkPVwibGctc2hhcmVcIiBjbGFzcz1cImxnLWljb25cIj48dWwgY2xhc3M9XCJsZy1kcm9wZG93blwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlO1wiPic7Yys9Yi5jb3JlLnMuZmFjZWJvb2s/JzxsaT48YSBpZD1cImxnLXNoYXJlLWZhY2Vib29rXCIgdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3M9XCJsZy1pY29uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGctZHJvcGRvd24tdGV4dFwiPicrdGhpcy5jb3JlLnMuZmFjZWJvb2tEcm9wZG93blRleHQrXCI8L3NwYW4+PC9hPjwvbGk+XCI6XCJcIixjKz1iLmNvcmUucy50d2l0dGVyPyc8bGk+PGEgaWQ9XCJsZy1zaGFyZS10d2l0dGVyXCIgdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3M9XCJsZy1pY29uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGctZHJvcGRvd24tdGV4dFwiPicrdGhpcy5jb3JlLnMudHdpdHRlckRyb3Bkb3duVGV4dCtcIjwvc3Bhbj48L2E+PC9saT5cIjpcIlwiLGMrPWIuY29yZS5zLmdvb2dsZVBsdXM/JzxsaT48YSBpZD1cImxnLXNoYXJlLWdvb2dsZXBsdXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzcz1cImxnLWljb25cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZy1kcm9wZG93bi10ZXh0XCI+Jyt0aGlzLmNvcmUucy5nb29nbGVQbHVzRHJvcGRvd25UZXh0K1wiPC9zcGFuPjwvYT48L2xpPlwiOlwiXCIsYys9Yi5jb3JlLnMucGludGVyZXN0Pyc8bGk+PGEgaWQ9XCJsZy1zaGFyZS1waW50ZXJlc3RcIiB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzcz1cImxnLWljb25cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZy1kcm9wZG93bi10ZXh0XCI+Jyt0aGlzLmNvcmUucy5waW50ZXJlc3REcm9wZG93blRleHQrXCI8L3NwYW4+PC9hPjwvbGk+XCI6XCJcIixjKz1cIjwvdWw+PC9zcGFuPlwiLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10b29sYmFyXCIpLmFwcGVuZChjKSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuYXBwZW5kKCc8ZGl2IGlkPVwibGctZHJvcGRvd24tb3ZlcmxheVwiPjwvZGl2PicpLGEoXCIjbGctc2hhcmVcIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7Yi5jb3JlLiRvdXRlci50b2dnbGVDbGFzcyhcImxnLWRyb3Bkb3duLWFjdGl2ZVwiKX0pLGEoXCIjbGctZHJvcGRvd24tb3ZlcmxheVwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtiLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZHJvcGRvd24tYWN0aXZlXCIpfSksYi5jb3JlLiRlbC5vbihcIm9uQWZ0ZXJTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKGMsZCxlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShcIiNsZy1zaGFyZS1mYWNlYm9va1wiKS5hdHRyKFwiaHJlZlwiLFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwP3U9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIuZ2V0U2FocmVQcm9wcyhlLFwiZmFjZWJvb2tTaGFyZVVybFwiKXx8d2luZG93LmxvY2F0aW9uLmhyZWYpKSxhKFwiI2xnLXNoYXJlLXR3aXR0ZXJcIikuYXR0cihcImhyZWZcIixcImh0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0P3RleHQ9XCIrYi5nZXRTYWhyZVByb3BzKGUsXCJ0d2VldFRleHRcIikrXCImdXJsPVwiK2VuY29kZVVSSUNvbXBvbmVudChiLmdldFNhaHJlUHJvcHMoZSxcInR3aXR0ZXJTaGFyZVVybFwiKXx8d2luZG93LmxvY2F0aW9uLmhyZWYpKSxhKFwiI2xnLXNoYXJlLWdvb2dsZXBsdXNcIikuYXR0cihcImhyZWZcIixcImh0dHBzOi8vcGx1cy5nb29nbGUuY29tL3NoYXJlP3VybD1cIitlbmNvZGVVUklDb21wb25lbnQoYi5nZXRTYWhyZVByb3BzKGUsXCJnb29nbGVwbHVzU2hhcmVVcmxcIil8fHdpbmRvdy5sb2NhdGlvbi5ocmVmKSksYShcIiNsZy1zaGFyZS1waW50ZXJlc3RcIikuYXR0cihcImhyZWZcIixcImh0dHA6Ly93d3cucGludGVyZXN0LmNvbS9waW4vY3JlYXRlL2J1dHRvbi8/dXJsPVwiK2VuY29kZVVSSUNvbXBvbmVudChiLmdldFNhaHJlUHJvcHMoZSxcInBpbnRlcmVzdFNoYXJlVXJsXCIpfHx3aW5kb3cubG9jYXRpb24uaHJlZikrXCImbWVkaWE9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIuZ2V0U2FocmVQcm9wcyhlLFwic3JjXCIpKStcIiZkZXNjcmlwdGlvbj1cIitiLmdldFNhaHJlUHJvcHMoZSxcInBpbnRlcmVzdFRleHRcIikpfSwxMDApfSl9LGMucHJvdG90eXBlLmdldFNhaHJlUHJvcHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1cIlwiO2lmKHRoaXMuY29yZS5zLmR5bmFtaWMpYz10aGlzLmNvcmUucy5keW5hbWljRWxbYV1bYl07ZWxzZXt2YXIgZD10aGlzLmNvcmUuJGl0ZW1zLmVxKGEpLmF0dHIoXCJocmVmXCIpLGU9dGhpcy5jb3JlLiRpdGVtcy5lcShhKS5kYXRhKGIpO2M9XCJzcmNcIj09PWI/ZHx8ZTplfXJldHVybiBjfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7fSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLnNoYXJlPWN9KCl9KTtcbi8qXG4gKiBlYXN5LWF1dG9jb21wbGV0ZVxuICogalF1ZXJ5IHBsdWdpbiBmb3IgYXV0b2NvbXBsZXRpb25cbiAqIFxuICogQGF1dGhvciDFgXVrYXN6IFBhd2XFgmN6YWsgKGh0dHA6Ly9naXRodWIuY29tL3Bhd2VsY3phaylcbiAqIEB2ZXJzaW9uIDEuMy41XG4gKiBDb3B5cmlnaHQgIExpY2Vuc2U6IFxuICovXG5cbnZhciBFYXN5QXV0b2NvbXBsZXRlPWZ1bmN0aW9uKGEpe3JldHVybiBhLkNvbmZpZ3VyYXRpb249ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2lmKFwieG1sXCI9PT1hLmRhdGFUeXBlJiYoYS5nZXRWYWx1ZXx8KGEuZ2V0VmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuICQoYSkudGV4dCgpfSksYS5saXN0fHwoYS5saXN0PXt9KSxhLmxpc3Quc29ydHx8KGEubGlzdC5zb3J0PXt9KSxhLmxpc3Quc29ydC5tZXRob2Q9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYj1hLmdldFZhbHVlKGIpLGM9YS5nZXRWYWx1ZShjKSxjPmI/LTE6Yj5jPzE6MH0sYS5saXN0Lm1hdGNofHwoYS5saXN0Lm1hdGNoPXt9KSxhLmxpc3QubWF0Y2gubWV0aG9kPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc2VhcmNoKGIpPi0xfSksdm9pZCAwIT09YS5jYXRlZ29yaWVzJiZhLmNhdGVnb3JpZXMgaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY2F0ZWdvcmllcy5sZW5ndGg7ZD5jO2MrPTEpe3ZhciBlPWEuY2F0ZWdvcmllc1tjXTtmb3IodmFyIGYgaW4gaC5jYXRlZ29yaWVzWzBdKXZvaWQgMD09PWVbZl0mJihlW2ZdPWguY2F0ZWdvcmllc1swXVtmXSk7Yi5wdXNoKGUpfWEuY2F0ZWdvcmllcz1ifX1mdW5jdGlvbiBjKCl7ZnVuY3Rpb24gYihhLGMpe3ZhciBkPWF8fHt9O2Zvcih2YXIgZSBpbiBhKXZvaWQgMCE9PWNbZV0mJm51bGwhPT1jW2VdJiYoXCJvYmplY3RcIiE9dHlwZW9mIGNbZV18fGNbZV1pbnN0YW5jZW9mIEFycmF5P2RbZV09Y1tlXTpiKGFbZV0sY1tlXSkpO3JldHVybiB2b2lkIDAhPT1jLmRhdGEmJm51bGwhPT1jLmRhdGEmJlwib2JqZWN0XCI9PXR5cGVvZiBjLmRhdGEmJihkLmRhdGE9Yy5kYXRhKSxkfWg9YihoLGEpfWZ1bmN0aW9uIGQoKXtpZihcImxpc3QtcmVxdWlyZWRcIiE9PWgudXJsJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBoLnVybCl7dmFyIGI9aC51cmw7aC51cmw9ZnVuY3Rpb24oKXtyZXR1cm4gYn19aWYodm9pZCAwIT09aC5hamF4U2V0dGluZ3MudXJsJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBoLmFqYXhTZXR0aW5ncy51cmwpe3ZhciBiPWguYWpheFNldHRpbmdzLnVybDtoLmFqYXhTZXR0aW5ncy51cmw9ZnVuY3Rpb24oKXtyZXR1cm4gYn19aWYoXCJzdHJpbmdcIj09dHlwZW9mIGgubGlzdExvY2F0aW9uKXt2YXIgYz1oLmxpc3RMb2NhdGlvbjtcIlhNTFwiPT09aC5kYXRhVHlwZS50b1VwcGVyQ2FzZSgpP2gubGlzdExvY2F0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiAkKGEpLmZpbmQoYyl9OmgubGlzdExvY2F0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhW2NdfX1pZihcInN0cmluZ1wiPT10eXBlb2YgaC5nZXRWYWx1ZSl7dmFyIGQ9aC5nZXRWYWx1ZTtoLmdldFZhbHVlPWZ1bmN0aW9uKGEpe3JldHVybiBhW2RdfX12b2lkIDAhPT1hLmNhdGVnb3JpZXMmJihoLmNhdGVnb3JpZXNBc3NpZ25lZD0hMCl9ZnVuY3Rpb24gZSgpe3ZvaWQgMCE9PWEuYWpheFNldHRpbmdzJiZcIm9iamVjdFwiPT10eXBlb2YgYS5hamF4U2V0dGluZ3M/aC5hamF4U2V0dGluZ3M9YS5hamF4U2V0dGluZ3M6aC5hamF4U2V0dGluZ3M9e319ZnVuY3Rpb24gZihhKXtyZXR1cm4gdm9pZCAwIT09aFthXSYmbnVsbCE9PWhbYV19ZnVuY3Rpb24gZyhhLGIpe2Z1bmN0aW9uIGMoYixkKXtmb3IodmFyIGUgaW4gZCl2b2lkIDA9PT1iW2VdJiZhLmxvZyhcIlByb3BlcnR5ICdcIitlK1wiJyBkb2VzIG5vdCBleGlzdCBpbiBFYXN5QXV0b2NvbXBsZXRlIG9wdGlvbnMgQVBJLlwiKSxcIm9iamVjdFwiPT10eXBlb2YgYltlXSYmLTE9PT0kLmluQXJyYXkoZSxpKSYmYyhiW2VdLGRbZV0pfWMoaCxiKX12YXIgaD17ZGF0YTpcImxpc3QtcmVxdWlyZWRcIix1cmw6XCJsaXN0LXJlcXVpcmVkXCIsZGF0YVR5cGU6XCJqc29uXCIsbGlzdExvY2F0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhfSx4bWxFbGVtZW50TmFtZTpcIlwiLGdldFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxhdXRvY29tcGxldGVPZmY6ITAscGxhY2Vob2xkZXI6ITEsYWpheENhbGxiYWNrOmZ1bmN0aW9uKCl7fSxtYXRjaFJlc3BvbnNlUHJvcGVydHk6ITEsbGlzdDp7c29ydDp7ZW5hYmxlZDohMSxtZXRob2Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1oLmdldFZhbHVlKGEpLGI9aC5nZXRWYWx1ZShiKSxiPmE/LTE6YT5iPzE6MH19LG1heE51bWJlck9mRWxlbWVudHM6NixoaWRlT25FbXB0eVBocmFzZTohMCxtYXRjaDp7ZW5hYmxlZDohMSxjYXNlU2Vuc2l0aXZlOiExLG1ldGhvZDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnNlYXJjaChiKT4tMX19LHNob3dBbmltYXRpb246e3R5cGU6XCJub3JtYWxcIix0aW1lOjQwMCxjYWxsYmFjazpmdW5jdGlvbigpe319LGhpZGVBbmltYXRpb246e3R5cGU6XCJub3JtYWxcIix0aW1lOjQwMCxjYWxsYmFjazpmdW5jdGlvbigpe319LG9uQ2xpY2tFdmVudDpmdW5jdGlvbigpe30sb25TZWxlY3RJdGVtRXZlbnQ6ZnVuY3Rpb24oKXt9LG9uTG9hZEV2ZW50OmZ1bmN0aW9uKCl7fSxvbkNob29zZUV2ZW50OmZ1bmN0aW9uKCl7fSxvbktleUVudGVyRXZlbnQ6ZnVuY3Rpb24oKXt9LG9uTW91c2VPdmVyRXZlbnQ6ZnVuY3Rpb24oKXt9LG9uTW91c2VPdXRFdmVudDpmdW5jdGlvbigpe30sb25TaG93TGlzdEV2ZW50OmZ1bmN0aW9uKCl7fSxvbkhpZGVMaXN0RXZlbnQ6ZnVuY3Rpb24oKXt9fSxoaWdobGlnaHRQaHJhc2U6ITAsdGhlbWU6XCJcIixjc3NDbGFzc2VzOlwiXCIsbWluQ2hhck51bWJlcjowLHJlcXVlc3REZWxheTowLGFkanVzdFdpZHRoOiEwLGFqYXhTZXR0aW5nczp7fSxwcmVwYXJlUG9zdERhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYX0sbG9nZ2VyRW5hYmxlZDohMCx0ZW1wbGF0ZTpcIlwiLGNhdGVnb3JpZXNBc3NpZ25lZDohMSxjYXRlZ29yaWVzOlt7bWF4TnVtYmVyT2ZFbGVtZW50czo0fV19LGk9W1wiYWpheFNldHRpbmdzXCIsXCJ0ZW1wbGF0ZVwiXTt0aGlzLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gaFthXX0sdGhpcy5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hKCFmKGEpfHxoW2FdIT09Yil9LHRoaXMuY2hlY2tEYXRhVXJsUHJvcGVydGllcz1mdW5jdGlvbigpe3JldHVyblwibGlzdC1yZXF1aXJlZFwiIT09aC51cmx8fFwibGlzdC1yZXF1aXJlZFwiIT09aC5kYXRhfSx0aGlzLmNoZWNrUmVxdWlyZWRQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGgpaWYoXCJyZXF1aXJlZFwiPT09aFthXSlyZXR1cm4gbG9nZ2VyLmVycm9yKFwiT3B0aW9uIFwiK2ErXCIgbXVzdCBiZSBkZWZpbmVkXCIpLCExO3JldHVybiEwfSx0aGlzLnByaW50UHJvcGVydGllc1RoYXREb2VzbnRFeGlzdD1mdW5jdGlvbihhLGIpe2coYSxiKX0sYigpLGMoKSxoLmxvZ2dlckVuYWJsZWQ9PT0hMCYmZyhjb25zb2xlLGEpLGUoKSxkKCl9LGF9KEVhc3lBdXRvY29tcGxldGV8fHt9KSxFYXN5QXV0b2NvbXBsZXRlPWZ1bmN0aW9uKGEpe3JldHVybiBhLkxvZ2dlcj1mdW5jdGlvbigpe3RoaXMuZXJyb3I9ZnVuY3Rpb24oYSl7Y29uc29sZS5sb2coXCJFUlJPUjogXCIrYSl9LHRoaXMud2FybmluZz1mdW5jdGlvbihhKXtjb25zb2xlLmxvZyhcIldBUk5JTkc6IFwiK2EpfX0sYX0oRWFzeUF1dG9jb21wbGV0ZXx8e30pLEVhc3lBdXRvY29tcGxldGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuQ29uc3RhbnM9ZnVuY3Rpb24oKXt2YXIgYT17Q09OVEFJTkVSX0NMQVNTOlwiZWFzeS1hdXRvY29tcGxldGUtY29udGFpbmVyXCIsQ09OVEFJTkVSX0lEOlwiZWFjLWNvbnRhaW5lci1cIixXUkFQUEVSX0NTU19DTEFTUzpcImVhc3ktYXV0b2NvbXBsZXRlXCJ9O3RoaXMuZ2V0VmFsdWU9ZnVuY3Rpb24oYil7cmV0dXJuIGFbYl19fSxhfShFYXN5QXV0b2NvbXBsZXRlfHx7fSksRWFzeUF1dG9jb21wbGV0ZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5MaXN0QnVpbGRlclNlcnZpY2U9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGIsYyl7ZnVuY3Rpb24gZCgpe3ZhciBkLGU9e307cmV0dXJuIHZvaWQgMCE9PWIueG1sRWxlbWVudE5hbWUmJihlLnhtbEVsZW1lbnROYW1lPWIueG1sRWxlbWVudE5hbWUpLHZvaWQgMCE9PWIubGlzdExvY2F0aW9uP2Q9Yi5saXN0TG9jYXRpb246dm9pZCAwIT09YS5nZXQoXCJsaXN0TG9jYXRpb25cIikmJihkPWEuZ2V0KFwibGlzdExvY2F0aW9uXCIpKSx2b2lkIDAhPT1kP1wic3RyaW5nXCI9PXR5cGVvZiBkP2UuZGF0YT0kKGMpLmZpbmQoZCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZCYmKGUuZGF0YT1kKGMpKTplLmRhdGE9YyxlfWZ1bmN0aW9uIGUoKXt2YXIgYT17fTtyZXR1cm4gdm9pZCAwIT09Yi5saXN0TG9jYXRpb24/XCJzdHJpbmdcIj09dHlwZW9mIGIubGlzdExvY2F0aW9uP2EuZGF0YT1jW2IubGlzdExvY2F0aW9uXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmxpc3RMb2NhdGlvbiYmKGEuZGF0YT1iLmxpc3RMb2NhdGlvbihjKSk6YS5kYXRhPWMsYX12YXIgZj17fTtpZihmPVwiWE1MXCI9PT1hLmdldChcImRhdGFUeXBlXCIpLnRvVXBwZXJDYXNlKCk/ZCgpOmUoKSx2b2lkIDAhPT1iLmhlYWRlciYmKGYuaGVhZGVyPWIuaGVhZGVyKSx2b2lkIDAhPT1iLm1heE51bWJlck9mRWxlbWVudHMmJihmLm1heE51bWJlck9mRWxlbWVudHM9Yi5tYXhOdW1iZXJPZkVsZW1lbnRzKSx2b2lkIDAhPT1hLmdldChcImxpc3RcIikubWF4TnVtYmVyT2ZFbGVtZW50cyYmKGYubWF4TGlzdFNpemU9YS5nZXQoXCJsaXN0XCIpLm1heE51bWJlck9mRWxlbWVudHMpLHZvaWQgMCE9PWIuZ2V0VmFsdWUpaWYoXCJzdHJpbmdcIj09dHlwZW9mIGIuZ2V0VmFsdWUpe3ZhciBnPWIuZ2V0VmFsdWU7Zi5nZXRWYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gYVtnXX19ZWxzZVwiZnVuY3Rpb25cIj09dHlwZW9mIGIuZ2V0VmFsdWUmJihmLmdldFZhbHVlPWIuZ2V0VmFsdWUpO2Vsc2UgZi5nZXRWYWx1ZT1hLmdldChcImdldFZhbHVlXCIpO3JldHVybiBmfWZ1bmN0aW9uIGQoYil7dmFyIGM9W107cmV0dXJuIHZvaWQgMD09PWIueG1sRWxlbWVudE5hbWUmJihiLnhtbEVsZW1lbnROYW1lPWEuZ2V0KFwieG1sRWxlbWVudE5hbWVcIikpLCQoYi5kYXRhKS5maW5kKGIueG1sRWxlbWVudE5hbWUpLmVhY2goZnVuY3Rpb24oKXtjLnB1c2godGhpcyl9KSxjfXRoaXMuaW5pdD1mdW5jdGlvbihiKXt2YXIgYz1bXSxkPXt9O3JldHVybiBkLmRhdGE9YS5nZXQoXCJsaXN0TG9jYXRpb25cIikoYiksZC5nZXRWYWx1ZT1hLmdldChcImdldFZhbHVlXCIpLGQubWF4TGlzdFNpemU9YS5nZXQoXCJsaXN0XCIpLm1heE51bWJlck9mRWxlbWVudHMsYy5wdXNoKGQpLGN9LHRoaXMudXBkYXRlQ2F0ZWdvcmllcz1mdW5jdGlvbihiLGQpe2lmKGEuZ2V0KFwiY2F0ZWdvcmllc0Fzc2lnbmVkXCIpKXtiPVtdO2Zvcih2YXIgZT0wO2U8YS5nZXQoXCJjYXRlZ29yaWVzXCIpLmxlbmd0aDtlKz0xKXt2YXIgZj1jKGEuZ2V0KFwiY2F0ZWdvcmllc1wiKVtlXSxkKTtiLnB1c2goZil9fXJldHVybiBifSx0aGlzLmNvbnZlcnRYbWw9ZnVuY3Rpb24oYil7aWYoXCJYTUxcIj09PWEuZ2V0KFwiZGF0YVR5cGVcIikudG9VcHBlckNhc2UoKSlmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrPTEpYltjXS5kYXRhPWQoYltjXSk7cmV0dXJuIGJ9LHRoaXMucHJvY2Vzc0RhdGE9ZnVuY3Rpb24oYyxkKXtmb3IodmFyIGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKz0xKWNbZV0uZGF0YT1iKGEsY1tlXSxkKTtyZXR1cm4gY30sdGhpcy5jaGVja0lmRGF0YUV4aXN0cz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKz0xKWlmKHZvaWQgMCE9PWFbYl0uZGF0YSYmYVtiXS5kYXRhIGluc3RhbmNlb2YgQXJyYXkmJmFbYl0uZGF0YS5sZW5ndGg+MClyZXR1cm4hMDtyZXR1cm4hMX19LGF9KEVhc3lBdXRvY29tcGxldGV8fHt9KSxFYXN5QXV0b2NvbXBsZXRlPWZ1bmN0aW9uKGEpe3JldHVybiBhLnByb2NjZXNzPWZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGEsYyl7dmFyIGQ9W10sZT1cIlwiO2lmKGIuZ2V0KFwibGlzdFwiKS5tYXRjaC5lbmFibGVkKWZvcih2YXIgZz0wLGg9YS5sZW5ndGg7aD5nO2crPTEpZT1iLmdldChcImdldFZhbHVlXCIpKGFbZ10pLGYoZSxjKSYmZC5wdXNoKGFbZ10pO2Vsc2UgZD1hO3JldHVybiBkfWZ1bmN0aW9uIGYoYSxjKXtyZXR1cm4gYi5nZXQoXCJsaXN0XCIpLm1hdGNoLmNhc2VTZW5zaXRpdmV8fChcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9YS50b0xvd2VyQ2FzZSgpKSxjPWMudG9Mb3dlckNhc2UoKSksISFiLmdldChcImxpc3RcIikubWF0Y2gubWV0aG9kKGEsYyl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gdm9pZCAwIT09Yy5tYXhOdW1iZXJPZkVsZW1lbnRzJiZhLmxlbmd0aD5jLm1heE51bWJlck9mRWxlbWVudHMmJihhPWEuc2xpY2UoMCxjLm1heE51bWJlck9mRWxlbWVudHMpKSxhfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGIuZ2V0KFwibGlzdFwiKS5zb3J0LmVuYWJsZWQmJmEuc29ydChiLmdldChcImxpc3RcIikuc29ydC5tZXRob2QpLGF9YS5wcm9jY2Vzcy5tYXRjaD1mO3ZhciBpPWMuZGF0YSxqPWQ7cmV0dXJuIGk9ZShpLGopLGk9ZyhpKSxpPWgoaSl9LGF9KEVhc3lBdXRvY29tcGxldGV8fHt9KSxFYXN5QXV0b2NvbXBsZXRlPWZ1bmN0aW9uKGEpe3JldHVybiBhLlRlbXBsYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPXtiYXNpYzp7dHlwZTpcImJhc2ljXCIsbWV0aG9kOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxjc3NDbGFzczpcIlwifSxkZXNjcmlwdGlvbjp7dHlwZTpcImRlc2NyaXB0aW9uXCIsZmllbGRzOntkZXNjcmlwdGlvbjpcImRlc2NyaXB0aW9uXCJ9LG1ldGhvZDpmdW5jdGlvbihhKXtyZXR1cm4gYStcIiAtIGRlc2NyaXB0aW9uXCJ9LGNzc0NsYXNzOlwiZWFjLWRlc2NyaXB0aW9uXCJ9LGljb25MZWZ0Ont0eXBlOlwiaWNvbkxlZnRcIixmaWVsZHM6e2ljb246XCJcIn0sbWV0aG9kOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxjc3NDbGFzczpcImVhYy1pY29uLWxlZnRcIn0saWNvblJpZ2h0Ont0eXBlOlwiaWNvblJpZ2h0XCIsZmllbGRzOntpY29uU3JjOlwiXCJ9LG1ldGhvZDpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY3NzQ2xhc3M6XCJlYWMtaWNvbi1yaWdodFwifSxsaW5rczp7dHlwZTpcImxpbmtzXCIsZmllbGRzOntsaW5rOlwiXCJ9LG1ldGhvZDpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY3NzQ2xhc3M6XCJcIn0sY3VzdG9tOnt0eXBlOlwiY3VzdG9tXCIsbWV0aG9kOmZ1bmN0aW9uKCl7fSxjc3NDbGFzczpcIlwifX0sYz1mdW5jdGlvbihhKXt2YXIgYyxkPWEuZmllbGRzO3JldHVyblwiZGVzY3JpcHRpb25cIj09PWEudHlwZT8oYz1iLmRlc2NyaXB0aW9uLm1ldGhvZCxcInN0cmluZ1wiPT10eXBlb2YgZC5kZXNjcmlwdGlvbj9jPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGErXCIgLSA8c3Bhbj5cIitiW2QuZGVzY3JpcHRpb25dK1wiPC9zcGFuPlwifTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkLmRlc2NyaXB0aW9uJiYoYz1mdW5jdGlvbihhLGIpe3JldHVybiBhK1wiIC0gPHNwYW4+XCIrZC5kZXNjcmlwdGlvbihiKStcIjwvc3Bhbj5cIn0pLGMpOlwiaWNvblJpZ2h0XCI9PT1hLnR5cGU/KFwic3RyaW5nXCI9PXR5cGVvZiBkLmljb25TcmM/Yz1mdW5jdGlvbihhLGIpe3JldHVybiBhK1wiPGltZyBjbGFzcz0nZWFjLWljb24nIHNyYz0nXCIrYltkLmljb25TcmNdK1wiJyAvPlwifTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkLmljb25TcmMmJihjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGErXCI8aW1nIGNsYXNzPSdlYWMtaWNvbicgc3JjPSdcIitkLmljb25TcmMoYikrXCInIC8+XCJ9KSxjKTpcImljb25MZWZ0XCI9PT1hLnR5cGU/KFwic3RyaW5nXCI9PXR5cGVvZiBkLmljb25TcmM/Yz1mdW5jdGlvbihhLGIpe3JldHVyblwiPGltZyBjbGFzcz0nZWFjLWljb24nIHNyYz0nXCIrYltkLmljb25TcmNdK1wiJyAvPlwiK2F9OlwiZnVuY3Rpb25cIj09dHlwZW9mIGQuaWNvblNyYyYmKGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxpbWcgY2xhc3M9J2VhYy1pY29uJyBzcmM9J1wiK2QuaWNvblNyYyhiKStcIicgLz5cIithfSksYyk6XCJsaW5rc1wiPT09YS50eXBlPyhcInN0cmluZ1wiPT10eXBlb2YgZC5saW5rP2M9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxhIGhyZWY9J1wiK2JbZC5saW5rXStcIicgPlwiK2ErXCI8L2E+XCJ9OlwiZnVuY3Rpb25cIj09dHlwZW9mIGQubGluayYmKGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxhIGhyZWY9J1wiK2QubGluayhiKStcIicgPlwiK2ErXCI8L2E+XCJ9KSxjKTpcImN1c3RvbVwiPT09YS50eXBlP2EubWV0aG9kOmIuYmFzaWMubWV0aG9kfSxkPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLnR5cGUmJmEudHlwZSYmYlthLnR5cGVdP2MoYSk6Yi5iYXNpYy5tZXRob2R9LGU9ZnVuY3Rpb24oYSl7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm5cIlwifTtyZXR1cm4gYSYmYS50eXBlJiZhLnR5cGUmJmJbYS50eXBlXT9mdW5jdGlvbigpe3ZhciBjPWJbYS50eXBlXS5jc3NDbGFzcztyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gY319KCk6Y307dGhpcy5nZXRUZW1wbGF0ZUNsYXNzPWUoYSksdGhpcy5idWlsZD1kKGEpfSxhfShFYXN5QXV0b2NvbXBsZXRlfHx7fSksRWFzeUF1dG9jb21wbGV0ZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5tYWluPWZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZCgpe3JldHVybiAwPT09dC5sZW5ndGg/dm9pZCBwLmVycm9yKFwiSW5wdXQgZmllbGQgZG9lc24ndCBleGlzdC5cIik6by5jaGVja0RhdGFVcmxQcm9wZXJ0aWVzKCk/by5jaGVja1JlcXVpcmVkUHJvcGVydGllcygpPyhlKCksdm9pZCBnKCkpOnZvaWQgcC5lcnJvcihcIldpbGwgbm90IHdvcmsgd2l0aG91dCBtZW50aW9uZWQgcHJvcGVydGllcy5cIik6dm9pZCBwLmVycm9yKFwiT25lIG9mIG9wdGlvbnMgdmFyaWFibGVzICdkYXRhJyBvciAndXJsJyBtdXN0IGJlIGRlZmluZWQuXCIpfWZ1bmN0aW9uIGUoKXtmdW5jdGlvbiBhKCl7dmFyIGE9JChcIjxkaXY+XCIpLGM9bi5nZXRWYWx1ZShcIldSQVBQRVJfQ1NTX0NMQVNTXCIpO28uZ2V0KFwidGhlbWVcIikmJlwiXCIhPT1vLmdldChcInRoZW1lXCIpJiYoYys9XCIgZWFjLVwiK28uZ2V0KFwidGhlbWVcIikpLG8uZ2V0KFwiY3NzQ2xhc3Nlc1wiKSYmXCJcIiE9PW8uZ2V0KFwiY3NzQ2xhc3Nlc1wiKSYmKGMrPVwiIFwiK28uZ2V0KFwiY3NzQ2xhc3Nlc1wiKSksXCJcIiE9PXEuZ2V0VGVtcGxhdGVDbGFzcygpJiYoYys9XCIgXCIrcS5nZXRUZW1wbGF0ZUNsYXNzKCkpLGEuYWRkQ2xhc3MoYyksdC53cmFwKGEpLG8uZ2V0KFwiYWRqdXN0V2lkdGhcIik9PT0hMCYmYigpfWZ1bmN0aW9uIGIoKXt2YXIgYT10Lm91dGVyV2lkdGgoKTt0LnBhcmVudCgpLmNzcyhcIndpZHRoXCIsYSl9ZnVuY3Rpb24gYygpe3QudW53cmFwKCl9ZnVuY3Rpb24gZCgpe3ZhciBhPSQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhuLmdldFZhbHVlKFwiQ09OVEFJTkVSX0NMQVNTXCIpKTthLmF0dHIoXCJpZFwiLGYoKSkucHJlcGVuZCgkKFwiPHVsPlwiKSksZnVuY3Rpb24oKXthLm9uKFwic2hvdy5lYWNcIixmdW5jdGlvbigpe3N3aXRjaChvLmdldChcImxpc3RcIikuc2hvd0FuaW1hdGlvbi50eXBlKXtjYXNlXCJzbGlkZVwiOnZhciBiPW8uZ2V0KFwibGlzdFwiKS5zaG93QW5pbWF0aW9uLnRpbWUsYz1vLmdldChcImxpc3RcIikuc2hvd0FuaW1hdGlvbi5jYWxsYmFjazthLmZpbmQoXCJ1bFwiKS5zbGlkZURvd24oYixjKTticmVhaztjYXNlXCJmYWRlXCI6dmFyIGI9by5nZXQoXCJsaXN0XCIpLnNob3dBbmltYXRpb24udGltZSxjPW8uZ2V0KFwibGlzdFwiKS5zaG93QW5pbWF0aW9uLmNhbGxiYWNrO2EuZmluZChcInVsXCIpLmZhZGVJbihiKSxjO2JyZWFrO2RlZmF1bHQ6YS5maW5kKFwidWxcIikuc2hvdygpfW8uZ2V0KFwibGlzdFwiKS5vblNob3dMaXN0RXZlbnQoKX0pLm9uKFwiaGlkZS5lYWNcIixmdW5jdGlvbigpe3N3aXRjaChvLmdldChcImxpc3RcIikuaGlkZUFuaW1hdGlvbi50eXBlKXtjYXNlXCJzbGlkZVwiOnZhciBiPW8uZ2V0KFwibGlzdFwiKS5oaWRlQW5pbWF0aW9uLnRpbWUsYz1vLmdldChcImxpc3RcIikuaGlkZUFuaW1hdGlvbi5jYWxsYmFjazthLmZpbmQoXCJ1bFwiKS5zbGlkZVVwKGIsYyk7YnJlYWs7Y2FzZVwiZmFkZVwiOnZhciBiPW8uZ2V0KFwibGlzdFwiKS5oaWRlQW5pbWF0aW9uLnRpbWUsYz1vLmdldChcImxpc3RcIikuaGlkZUFuaW1hdGlvbi5jYWxsYmFjazthLmZpbmQoXCJ1bFwiKS5mYWRlT3V0KGIsYyk7YnJlYWs7ZGVmYXVsdDphLmZpbmQoXCJ1bFwiKS5oaWRlKCl9by5nZXQoXCJsaXN0XCIpLm9uSGlkZUxpc3RFdmVudCgpfSkub24oXCJzZWxlY3RFbGVtZW50LmVhY1wiLGZ1bmN0aW9uKCl7YS5maW5kKFwidWwgbGlcIikucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKSxhLmZpbmQoXCJ1bCBsaVwiKS5lcSh3KS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLG8uZ2V0KFwibGlzdFwiKS5vblNlbGVjdEl0ZW1FdmVudCgpfSkub24oXCJsb2FkRWxlbWVudHMuZWFjXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlPVwiXCIsZj1hLmZpbmQoXCJ1bFwiKTtmLmVtcHR5KCkuZGV0YWNoKCksdj1bXTtmb3IodmFyIGg9MCxpPTAsaz1jLmxlbmd0aDtrPmk7aSs9MSl7dmFyIGw9Y1tpXS5kYXRhO2lmKDAhPT1sLmxlbmd0aCl7dm9pZCAwIT09Y1tpXS5oZWFkZXImJmNbaV0uaGVhZGVyLmxlbmd0aD4wJiZmLmFwcGVuZChcIjxkaXYgY2xhc3M9J2VhYy1jYXRlZ29yeScgPlwiK2NbaV0uaGVhZGVyK1wiPC9kaXY+XCIpO2Zvcih2YXIgbT0wLG49bC5sZW5ndGg7bj5tJiZoPGNbaV0ubWF4TGlzdFNpemU7bSs9MSllPSQoXCI8bGk+PGRpdiBjbGFzcz0nZWFjLWl0ZW0nPjwvZGl2PjwvbGk+XCIpLGZ1bmN0aW9uKCl7dmFyIGE9bSxiPWgsZj1jW2ldLmdldFZhbHVlKGxbYV0pO2UuZmluZChcIiA+IGRpdlwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXt0LnZhbChmKS50cmlnZ2VyKFwiY2hhbmdlXCIpLHc9YixqKGIpLG8uZ2V0KFwibGlzdFwiKS5vbkNsaWNrRXZlbnQoKSxvLmdldChcImxpc3RcIikub25DaG9vc2VFdmVudCgpfSkubW91c2VvdmVyKGZ1bmN0aW9uKCl7dz1iLGooYiksby5nZXQoXCJsaXN0XCIpLm9uTW91c2VPdmVyRXZlbnQoKX0pLm1vdXNlb3V0KGZ1bmN0aW9uKCl7by5nZXQoXCJsaXN0XCIpLm9uTW91c2VPdXRFdmVudCgpfSkuaHRtbChxLmJ1aWxkKGcoZixkKSxsW2FdKSl9KCksZi5hcHBlbmQoZSksdi5wdXNoKGxbbV0pLGgrPTF9fWEuYXBwZW5kKGYpLG8uZ2V0KFwibGlzdFwiKS5vbkxvYWRFdmVudCgpfSl9KCksdC5hZnRlcihhKX1mdW5jdGlvbiBlKCl7dC5uZXh0KFwiLlwiK24uZ2V0VmFsdWUoXCJDT05UQUlORVJfQ0xBU1NcIikpLnJlbW92ZSgpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gby5nZXQoXCJoaWdobGlnaHRQaHJhc2VcIikmJlwiXCIhPT1iP2koYSxiKTphfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGEucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csXCJcXFxcJCZcIil9ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWgoYik7cmV0dXJuKGErXCJcIikucmVwbGFjZShuZXcgUmVnRXhwKFwiKFwiK2MrXCIpXCIsXCJnaVwiKSxcIjxiPiQxPC9iPlwiKX10LnBhcmVudCgpLmhhc0NsYXNzKG4uZ2V0VmFsdWUoXCJXUkFQUEVSX0NTU19DTEFTU1wiKSkmJihlKCksYygpKSxhKCksZCgpLHU9JChcIiNcIitmKCkpLG8uZ2V0KFwicGxhY2Vob2xkZXJcIikmJnQuYXR0cihcInBsYWNlaG9sZGVyXCIsby5nZXQoXCJwbGFjZWhvbGRlclwiKSl9ZnVuY3Rpb24gZigpe3ZhciBhPXQuYXR0cihcImlkXCIpO3JldHVybiBhPW4uZ2V0VmFsdWUoXCJDT05UQUlORVJfSURcIikrYX1mdW5jdGlvbiBnKCl7ZnVuY3Rpb24gYSgpe3MoXCJhdXRvY29tcGxldGVPZmZcIiwhMCkmJm4oKSxiKCksYygpLGQoKSxlKCksZigpLGcoKX1mdW5jdGlvbiBiKCl7dC5mb2N1c291dChmdW5jdGlvbigpe3ZhciBhLGI9dC52YWwoKTtvLmdldChcImxpc3RcIikubWF0Y2guY2FzZVNlbnNpdGl2ZXx8KGI9Yi50b0xvd2VyQ2FzZSgpKTtmb3IodmFyIGM9MCxkPXYubGVuZ3RoO2Q+YztjKz0xKWlmKGE9by5nZXQoXCJnZXRWYWx1ZVwiKSh2W2NdKSxvLmdldChcImxpc3RcIikubWF0Y2guY2FzZVNlbnNpdGl2ZXx8KGE9YS50b0xvd2VyQ2FzZSgpKSxhPT09YilyZXR1cm4gdz1jLHZvaWQgaih3KX0pfWZ1bmN0aW9uIGMoKXt0Lm9mZihcImtleXVwXCIpLmtleXVwKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7ZnVuY3Rpb24gYigpe3ZhciBhPXt9LGI9by5nZXQoXCJhamF4U2V0dGluZ3NcIil8fHt9O2Zvcih2YXIgYyBpbiBiKWFbY109YltjXTtyZXR1cm4gYX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIG8uZ2V0KFwibWF0Y2hSZXNwb25zZVByb3BlcnR5XCIpIT09ITE/XCJzdHJpbmdcIj09dHlwZW9mIG8uZ2V0KFwibWF0Y2hSZXNwb25zZVByb3BlcnR5XCIpP2Jbby5nZXQoXCJtYXRjaFJlc3BvbnNlUHJvcGVydHlcIildPT09YTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBvLmdldChcIm1hdGNoUmVzcG9uc2VQcm9wZXJ0eVwiKT9vLmdldChcIm1hdGNoUmVzcG9uc2VQcm9wZXJ0eVwiKShiKT09PWE6ITA6ITB9aWYoIShhLmxlbmd0aDxvLmdldChcIm1pbkNoYXJOdW1iZXJcIikpKXtpZihcImxpc3QtcmVxdWlyZWRcIiE9PW8uZ2V0KFwiZGF0YVwiKSl7dmFyIGQ9by5nZXQoXCJkYXRhXCIpLGU9ci5pbml0KGQpO2U9ci51cGRhdGVDYXRlZ29yaWVzKGUsZCksZT1yLnByb2Nlc3NEYXRhKGUsYSksayhlLGEpLHQucGFyZW50KCkuZmluZChcImxpXCIpLmxlbmd0aD4wP2goKTppKCl9dmFyIGY9YigpO3ZvaWQgMCE9PWYudXJsJiZcIlwiIT09Zi51cmx8fChmLnVybD1vLmdldChcInVybFwiKSksdm9pZCAwIT09Zi5kYXRhVHlwZSYmXCJcIiE9PWYuZGF0YVR5cGV8fChmLmRhdGFUeXBlPW8uZ2V0KFwiZGF0YVR5cGVcIikpLHZvaWQgMCE9PWYudXJsJiZcImxpc3QtcmVxdWlyZWRcIiE9PWYudXJsJiYoZi51cmw9Zi51cmwoYSksZi5kYXRhPW8uZ2V0KFwicHJlcGFyZVBvc3REYXRhXCIpKGYuZGF0YSxhKSwkLmFqYXgoZikuZG9uZShmdW5jdGlvbihiKXt2YXIgZD1yLmluaXQoYik7ZD1yLnVwZGF0ZUNhdGVnb3JpZXMoZCxiKSxkPXIuY29udmVydFhtbChkKSxjKGEsYikmJihkPXIucHJvY2Vzc0RhdGEoZCxhKSxrKGQsYSkpLHIuY2hlY2tJZkRhdGFFeGlzdHMoZCkmJnQucGFyZW50KCkuZmluZChcImxpXCIpLmxlbmd0aD4wP2goKTppKCksby5nZXQoXCJhamF4Q2FsbGJhY2tcIikoKX0pLmZhaWwoZnVuY3Rpb24oKXtwLndhcm5pbmcoXCJGYWlsIHRvIGxvYWQgcmVzcG9uc2UgZGF0YVwiKX0pLmFsd2F5cyhmdW5jdGlvbigpe30pKX19c3dpdGNoKGEua2V5Q29kZSl7Y2FzZSAyNzppKCksbCgpO2JyZWFrO2Nhc2UgMzg6YS5wcmV2ZW50RGVmYXVsdCgpLHYubGVuZ3RoPjAmJnc+MCYmKHctPTEsdC52YWwoby5nZXQoXCJnZXRWYWx1ZVwiKSh2W3ddKSksaih3KSk7YnJlYWs7Y2FzZSA0MDphLnByZXZlbnREZWZhdWx0KCksdi5sZW5ndGg+MCYmdzx2Lmxlbmd0aC0xJiYodys9MSx0LnZhbChvLmdldChcImdldFZhbHVlXCIpKHZbd10pKSxqKHcpKTticmVhaztkZWZhdWx0OmlmKGEua2V5Q29kZT40MHx8OD09PWEua2V5Q29kZSl7dmFyIGM9dC52YWwoKTtvLmdldChcImxpc3RcIikuaGlkZU9uRW1wdHlQaHJhc2UhPT0hMHx8OCE9PWEua2V5Q29kZXx8XCJcIiE9PWM/by5nZXQoXCJyZXF1ZXN0RGVsYXlcIik+MD8odm9pZCAwIT09bSYmY2xlYXJUaW1lb3V0KG0pLG09c2V0VGltZW91dChmdW5jdGlvbigpe2IoYyl9LG8uZ2V0KFwicmVxdWVzdERlbGF5XCIpKSk6YihjKTppKCl9fX0pfWZ1bmN0aW9uIGQoKXt0Lm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe2E9YXx8d2luZG93LmV2ZW50O3ZhciBiPWEua2V5Q29kZTtyZXR1cm4gMzg9PT1iPyhzdXBwcmVzc0tleXByZXNzPSEwLCExKTp2b2lkIDB9KS5rZXlkb3duKGZ1bmN0aW9uKGEpezEzPT09YS5rZXlDb2RlJiZ3Pi0xJiYodC52YWwoby5nZXQoXCJnZXRWYWx1ZVwiKSh2W3ddKSksby5nZXQoXCJsaXN0XCIpLm9uS2V5RW50ZXJFdmVudCgpLG8uZ2V0KFwibGlzdFwiKS5vbkNob29zZUV2ZW50KCksdz0tMSxpKCksYS5wcmV2ZW50RGVmYXVsdCgpKX0pfWZ1bmN0aW9uIGUoKXt0Lm9mZihcImtleXByZXNzXCIpfWZ1bmN0aW9uIGYoKXt0LmZvY3VzKGZ1bmN0aW9uKCl7XCJcIiE9PXQudmFsKCkmJnYubGVuZ3RoPjAmJih3PS0xLGgoKSl9KX1mdW5jdGlvbiBnKCl7dC5ibHVyKGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3c9LTEsaSgpfSwyNTApfSl9ZnVuY3Rpb24gbigpe3QuYXR0cihcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpfWEoKX1mdW5jdGlvbiBoKCl7dS50cmlnZ2VyKFwic2hvdy5lYWNcIil9ZnVuY3Rpb24gaSgpe3UudHJpZ2dlcihcImhpZGUuZWFjXCIpfWZ1bmN0aW9uIGooYSl7dS50cmlnZ2VyKFwic2VsZWN0RWxlbWVudC5lYWNcIixhKX1mdW5jdGlvbiBrKGEsYil7dS50cmlnZ2VyKFwibG9hZEVsZW1lbnRzLmVhY1wiLFthLGJdKX1mdW5jdGlvbiBsKCl7dC50cmlnZ2VyKFwiYmx1clwiKX12YXIgbSxuPW5ldyBhLkNvbnN0YW5zLG89bmV3IGEuQ29uZmlndXJhdGlvbihjKSxwPW5ldyBhLkxvZ2dlcixxPW5ldyBhLlRlbXBsYXRlKGMudGVtcGxhdGUpLHI9bmV3IGEuTGlzdEJ1aWxkZXJTZXJ2aWNlKG8sYS5wcm9jY2Vzcykscz1vLmVxdWFscyx0PWIsdT1cIlwiLHY9W10sdz0tMTthLmNvbnN0cz1uLHRoaXMuZ2V0Q29uc3RhbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIG59LHRoaXMuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBvfSx0aGlzLmdldENvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiB1fSx0aGlzLmdldFNlbGVjdGVkSXRlbUluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHd9LHRoaXMuZ2V0SXRlbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdn0sdGhpcy5nZXRJdGVtRGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gdi5sZW5ndGg8YXx8dm9pZCAwPT09dlthXT8tMTp2W2FdfSx0aGlzLmdldFNlbGVjdGVkSXRlbURhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJdGVtRGF0YSh3KX0sdGhpcy5idWlsZD1mdW5jdGlvbigpe2UoKX0sdGhpcy5pbml0PWZ1bmN0aW9uKCl7ZCgpfX0sYS5lYWNIYW5kbGVzPVtdLGEuZ2V0SGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiBhLmVhY0hhbmRsZXNbYl19LGEuaW5wdXRIYXNJZD1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09JChhKS5hdHRyKFwiaWRcIikmJiQoYSkuYXR0cihcImlkXCIpLmxlbmd0aD4wfSxhLmFzc2lnblJhbmRvbUlkPWZ1bmN0aW9uKGIpe3ZhciBjPVwiXCI7ZG8gYz1cImVhYy1cIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTt3aGlsZSgwIT09JChcIiNcIitjKS5sZW5ndGgpO2VsZW1lbnRJZD1hLmNvbnN0cy5nZXRWYWx1ZShcIkNPTlRBSU5FUl9JRFwiKStjLCQoYikuYXR0cihcImlkXCIsYyl9LGEuc2V0SGFuZGxlPWZ1bmN0aW9uKGIsYyl7YS5lYWNIYW5kbGVzW2NdPWJ9LGF9KEVhc3lBdXRvY29tcGxldGV8fHt9KTshZnVuY3Rpb24oYSl7YS5mbi5lYXN5QXV0b2NvbXBsZXRlPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9bmV3IEVhc3lBdXRvY29tcGxldGUubWFpbihjLGIpO0Vhc3lBdXRvY29tcGxldGUuaW5wdXRIYXNJZChjKXx8RWFzeUF1dG9jb21wbGV0ZS5hc3NpZ25SYW5kb21JZChjKSxkLmluaXQoKSxFYXN5QXV0b2NvbXBsZXRlLnNldEhhbmRsZShkLGMuYXR0cihcImlkXCIpKX0pfSxhLmZuLmdldFNlbGVjdGVkSXRlbUluZGV4PWZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKS5hdHRyKFwiaWRcIik7cmV0dXJuIHZvaWQgMCE9PWI/RWFzeUF1dG9jb21wbGV0ZS5nZXRIYW5kbGUoYikuZ2V0U2VsZWN0ZWRJdGVtSW5kZXgoKTotMX0sYS5mbi5nZXRJdGVtcz1mdW5jdGlvbigpe3ZhciBiPWEodGhpcykuYXR0cihcImlkXCIpO3JldHVybiB2b2lkIDAhPT1iP0Vhc3lBdXRvY29tcGxldGUuZ2V0SGFuZGxlKGIpLmdldEl0ZW1zKCk6LTF9LGEuZm4uZ2V0SXRlbURhdGE9ZnVuY3Rpb24oYil7dmFyIGM9YSh0aGlzKS5hdHRyKFwiaWRcIik7cmV0dXJuIHZvaWQgMCE9PWMmJmI+LTE/RWFzeUF1dG9jb21wbGV0ZS5nZXRIYW5kbGUoYykuZ2V0SXRlbURhdGEoYik6LTF9LGEuZm4uZ2V0U2VsZWN0ZWRJdGVtRGF0YT1mdW5jdGlvbigpe3ZhciBiPWEodGhpcykuYXR0cihcImlkXCIpO3JldHVybiB2b2lkIDAhPT1iP0Vhc3lBdXRvY29tcGxldGUuZ2V0SGFuZGxlKGIpLmdldFNlbGVjdGVkSXRlbURhdGEoKTotMX19KGpRdWVyeSk7XG4vKiEgalF1ZXJ5IFVJIC0gdjEuMTEuMiAtIDIwMTQtMTAtMTZcbiogaHR0cDovL2pxdWVyeXVpLmNvbVxuKiBJbmNsdWRlczogY29yZS5qcywgd2lkZ2V0LmpzLCBtb3VzZS5qcywgcG9zaXRpb24uanMsIGFjY29yZGlvbi5qcywgYXV0b2NvbXBsZXRlLmpzLCBidXR0b24uanMsIGRhdGVwaWNrZXIuanMsIGRpYWxvZy5qcywgZHJhZ2dhYmxlLmpzLCBkcm9wcGFibGUuanMsIGVmZmVjdC5qcywgZWZmZWN0LWJsaW5kLmpzLCBlZmZlY3QtYm91bmNlLmpzLCBlZmZlY3QtY2xpcC5qcywgZWZmZWN0LWRyb3AuanMsIGVmZmVjdC1leHBsb2RlLmpzLCBlZmZlY3QtZmFkZS5qcywgZWZmZWN0LWZvbGQuanMsIGVmZmVjdC1oaWdobGlnaHQuanMsIGVmZmVjdC1wdWZmLmpzLCBlZmZlY3QtcHVsc2F0ZS5qcywgZWZmZWN0LXNjYWxlLmpzLCBlZmZlY3Qtc2hha2UuanMsIGVmZmVjdC1zaXplLmpzLCBlZmZlY3Qtc2xpZGUuanMsIGVmZmVjdC10cmFuc2Zlci5qcywgbWVudS5qcywgcHJvZ3Jlc3NiYXIuanMsIHJlc2l6YWJsZS5qcywgc2VsZWN0YWJsZS5qcywgc2VsZWN0bWVudS5qcywgc2xpZGVyLmpzLCBzb3J0YWJsZS5qcywgc3Bpbm5lci5qcywgdGFicy5qcywgdG9vbHRpcC5qc1xuKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi9cblxuKGZ1bmN0aW9uIChlKSB7XG4gICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbXCJqcXVlcnlcIl0sIGUpIDogZShqUXVlcnkpXG59KShmdW5jdGlvbiAoZSkge1xuICAgIGZ1bmN0aW9uIHQodCwgcykge1xuICAgICAgICB2YXIgbiwgYSwgbywgciA9IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIFwiYXJlYVwiID09PSByID8gKG4gPSB0LnBhcmVudE5vZGUsIGEgPSBuLm5hbWUsIHQuaHJlZiAmJiBhICYmIFwibWFwXCIgPT09IG4ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA/IChvID0gZShcImltZ1t1c2VtYXA9JyNcIiArIGEgKyBcIiddXCIpWzBdLCAhIW8gJiYgaShvKSkgOiAhMSkgOiAoL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KHIpID8gIXQuZGlzYWJsZWQgOiBcImFcIiA9PT0gciA/IHQuaHJlZiB8fCBzIDogcykgJiYgaSh0KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGkodCkge1xuICAgICAgICByZXR1cm4gZS5leHByLmZpbHRlcnMudmlzaWJsZSh0KSAmJiAhZSh0KS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJoaWRkZW5cIiA9PT0gZS5jc3ModGhpcywgXCJ2aXNpYmlsaXR5XCIpXG4gICAgICAgIH0pLmxlbmd0aFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHMoZSkge1xuICAgICAgICBmb3IgKHZhciB0LCBpOyBlLmxlbmd0aCAmJiBlWzBdICE9PSBkb2N1bWVudDspIHtcbiAgICAgICAgICAgIGlmICh0ID0gZS5jc3MoXCJwb3NpdGlvblwiKSwgKFwiYWJzb2x1dGVcIiA9PT0gdCB8fCBcInJlbGF0aXZlXCIgPT09IHQgfHwgXCJmaXhlZFwiID09PSB0KSAmJiAoaSA9IHBhcnNlSW50KGUuY3NzKFwiekluZGV4XCIpLCAxMCksICFpc05hTihpKSAmJiAwICE9PSBpKSkgcmV0dXJuIGk7XG4gICAgICAgICAgICBlID0gZS5wYXJlbnQoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbigpIHtcbiAgICAgICAgdGhpcy5fY3VySW5zdCA9IG51bGwsIHRoaXMuX2tleUV2ZW50ID0gITEsIHRoaXMuX2Rpc2FibGVkSW5wdXRzID0gW10sIHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nID0gITEsIHRoaXMuX2luRGlhbG9nID0gITEsIHRoaXMuX21haW5EaXZJZCA9IFwidWktZGF0ZXBpY2tlci1kaXZcIiwgdGhpcy5faW5saW5lQ2xhc3MgPSBcInVpLWRhdGVwaWNrZXItaW5saW5lXCIsIHRoaXMuX2FwcGVuZENsYXNzID0gXCJ1aS1kYXRlcGlja2VyLWFwcGVuZFwiLCB0aGlzLl90cmlnZ2VyQ2xhc3MgPSBcInVpLWRhdGVwaWNrZXItdHJpZ2dlclwiLCB0aGlzLl9kaWFsb2dDbGFzcyA9IFwidWktZGF0ZXBpY2tlci1kaWFsb2dcIiwgdGhpcy5fZGlzYWJsZUNsYXNzID0gXCJ1aS1kYXRlcGlja2VyLWRpc2FibGVkXCIsIHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzID0gXCJ1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZVwiLCB0aGlzLl9jdXJyZW50Q2xhc3MgPSBcInVpLWRhdGVwaWNrZXItY3VycmVudC1kYXlcIiwgdGhpcy5fZGF5T3ZlckNsYXNzID0gXCJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyXCIsIHRoaXMucmVnaW9uYWwgPSBbXSwgdGhpcy5yZWdpb25hbFtcIlwiXSA9IHtcbiAgICAgICAgICAgIGNsb3NlVGV4dDogXCJEb25lXCIsXG4gICAgICAgICAgICBwcmV2VGV4dDogXCJQcmV2XCIsXG4gICAgICAgICAgICBuZXh0VGV4dDogXCJOZXh0XCIsXG4gICAgICAgICAgICBjdXJyZW50VGV4dDogXCJUb2RheVwiLFxuICAgICAgICAgICAgbW9udGhOYW1lczogW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl0sXG4gICAgICAgICAgICBtb250aE5hbWVzU2hvcnQ6IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXSxcbiAgICAgICAgICAgIGRheU5hbWVzOiBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXSxcbiAgICAgICAgICAgIGRheU5hbWVzU2hvcnQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcbiAgICAgICAgICAgIGRheU5hbWVzTWluOiBbXCJTdVwiLCBcIk1vXCIsIFwiVHVcIiwgXCJXZVwiLCBcIlRoXCIsIFwiRnJcIiwgXCJTYVwiXSxcbiAgICAgICAgICAgIHdlZWtIZWFkZXI6IFwiV2tcIixcbiAgICAgICAgICAgIGRhdGVGb3JtYXQ6IFwibW0vZGQveXlcIixcbiAgICAgICAgICAgIGZpcnN0RGF5OiAwLFxuICAgICAgICAgICAgaXNSVEw6ICExLFxuICAgICAgICAgICAgc2hvd01vbnRoQWZ0ZXJZZWFyOiAhMSxcbiAgICAgICAgICAgIHllYXJTdWZmaXg6IFwiXCJcbiAgICAgICAgfSwgdGhpcy5fZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBzaG93T246IFwiZm9jdXNcIixcbiAgICAgICAgICAgIHNob3dBbmltOiBcImZhZGVJblwiLFxuICAgICAgICAgICAgc2hvd09wdGlvbnM6IHt9LFxuICAgICAgICAgICAgZGVmYXVsdERhdGU6IG51bGwsXG4gICAgICAgICAgICBhcHBlbmRUZXh0OiBcIlwiLFxuICAgICAgICAgICAgYnV0dG9uVGV4dDogXCIuLi5cIixcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlOiBcIlwiLFxuICAgICAgICAgICAgYnV0dG9uSW1hZ2VPbmx5OiAhMSxcbiAgICAgICAgICAgIGhpZGVJZk5vUHJldk5leHQ6ICExLFxuICAgICAgICAgICAgbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDogITEsXG4gICAgICAgICAgICBnb3RvQ3VycmVudDogITEsXG4gICAgICAgICAgICBjaGFuZ2VNb250aDogITEsXG4gICAgICAgICAgICBjaGFuZ2VZZWFyOiAhMSxcbiAgICAgICAgICAgIHllYXJSYW5nZTogXCJjLTEwOmMrMTBcIixcbiAgICAgICAgICAgIHNob3dPdGhlck1vbnRoczogITEsXG4gICAgICAgICAgICBzZWxlY3RPdGhlck1vbnRoczogITEsXG4gICAgICAgICAgICBzaG93V2VlazogITEsXG4gICAgICAgICAgICBjYWxjdWxhdGVXZWVrOiB0aGlzLmlzbzg2MDFXZWVrLFxuICAgICAgICAgICAgc2hvcnRZZWFyQ3V0b2ZmOiBcIisxMFwiLFxuICAgICAgICAgICAgbWluRGF0ZTogbnVsbCxcbiAgICAgICAgICAgIG1heERhdGU6IG51bGwsXG4gICAgICAgICAgICBkdXJhdGlvbjogXCJmYXN0XCIsXG4gICAgICAgICAgICBiZWZvcmVTaG93RGF5OiBudWxsLFxuICAgICAgICAgICAgYmVmb3JlU2hvdzogbnVsbCxcbiAgICAgICAgICAgIG9uU2VsZWN0OiBudWxsLFxuICAgICAgICAgICAgb25DaGFuZ2VNb250aFllYXI6IG51bGwsXG4gICAgICAgICAgICBvbkNsb3NlOiBudWxsLFxuICAgICAgICAgICAgbnVtYmVyT2ZNb250aHM6IDEsXG4gICAgICAgICAgICBzaG93Q3VycmVudEF0UG9zOiAwLFxuICAgICAgICAgICAgc3RlcE1vbnRoczogMSxcbiAgICAgICAgICAgIHN0ZXBCaWdNb250aHM6IDEyLFxuICAgICAgICAgICAgYWx0RmllbGQ6IFwiXCIsXG4gICAgICAgICAgICBhbHRGb3JtYXQ6IFwiXCIsXG4gICAgICAgICAgICBjb25zdHJhaW5JbnB1dDogITAsXG4gICAgICAgICAgICBzaG93QnV0dG9uUGFuZWw6ICExLFxuICAgICAgICAgICAgYXV0b1NpemU6ICExLFxuICAgICAgICAgICAgZGlzYWJsZWQ6ICExXG4gICAgICAgIH0sIGUuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLCB0aGlzLnJlZ2lvbmFsW1wiXCJdKSwgdGhpcy5yZWdpb25hbC5lbiA9IGUuZXh0ZW5kKCEwLCB7fSwgdGhpcy5yZWdpb25hbFtcIlwiXSksIHRoaXMucmVnaW9uYWxbXCJlbi1VU1wiXSA9IGUuZXh0ZW5kKCEwLCB7fSwgdGhpcy5yZWdpb25hbC5lbiksIHRoaXMuZHBEaXYgPSBhKGUoXCI8ZGl2IGlkPSdcIiArIHRoaXMuX21haW5EaXZJZCArIFwiJyBjbGFzcz0ndWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PlwiKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhKHQpIHtcbiAgICAgICAgdmFyIGkgPSBcImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYVwiO1xuICAgICAgICByZXR1cm4gdC5kZWxlZ2F0ZShpLCBcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSwgLTEgIT09IHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLXByZXZcIikgJiYgZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlclwiKSwgLTEgIT09IHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLW5leHRcIikgJiYgZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlclwiKVxuICAgICAgICB9KS5kZWxlZ2F0ZShpLCBcIm1vdXNlb3ZlclwiLCBvKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgIGUuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIodi5pbmxpbmUgPyB2LmRwRGl2LnBhcmVudCgpWzBdIDogdi5pbnB1dFswXSkgfHwgKGUodGhpcykucGFyZW50cyhcIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyXCIpLmZpbmQoXCJhXCIpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtaG92ZXJcIiksIGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSwgLTEgIT09IHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLXByZXZcIikgJiYgZSh0aGlzKS5hZGRDbGFzcyhcInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlclwiKSwgLTEgIT09IHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLW5leHRcIikgJiYgZSh0aGlzKS5hZGRDbGFzcyhcInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlclwiKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByKHQsIGkpIHtcbiAgICAgICAgZS5leHRlbmQodCwgaSk7XG4gICAgICAgIGZvciAodmFyIHMgaW4gaSkgbnVsbCA9PSBpW3NdICYmICh0W3NdID0gaVtzXSk7XG4gICAgICAgIHJldHVybiB0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaChlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuZWxlbWVudC52YWwoKTtcbiAgICAgICAgICAgIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5fcmVmcmVzaCgpLCB0ICE9PSB0aGlzLmVsZW1lbnQudmFsKCkgJiYgdGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZS51aSA9IGUudWkgfHwge30sIGUuZXh0ZW5kKGUudWksIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAga2V5Q29kZToge1xuICAgICAgICAgICAgQkFDS1NQQUNFOiA4LFxuICAgICAgICAgICAgQ09NTUE6IDE4OCxcbiAgICAgICAgICAgIERFTEVURTogNDYsXG4gICAgICAgICAgICBET1dOOiA0MCxcbiAgICAgICAgICAgIEVORDogMzUsXG4gICAgICAgICAgICBFTlRFUjogMTMsXG4gICAgICAgICAgICBFU0NBUEU6IDI3LFxuICAgICAgICAgICAgSE9NRTogMzYsXG4gICAgICAgICAgICBMRUZUOiAzNyxcbiAgICAgICAgICAgIFBBR0VfRE9XTjogMzQsXG4gICAgICAgICAgICBQQUdFX1VQOiAzMyxcbiAgICAgICAgICAgIFBFUklPRDogMTkwLFxuICAgICAgICAgICAgUklHSFQ6IDM5LFxuICAgICAgICAgICAgU1BBQ0U6IDMyLFxuICAgICAgICAgICAgVEFCOiA5LFxuICAgICAgICAgICAgVVA6IDM4XG4gICAgICAgIH1cbiAgICB9KSwgZS5mbi5leHRlbmQoe1xuICAgICAgICBzY3JvbGxQYXJlbnQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuY3NzKFwicG9zaXRpb25cIiksIHMgPSBcImFic29sdXRlXCIgPT09IGksIG4gPSB0ID8gLyhhdXRvfHNjcm9sbHxoaWRkZW4pLyA6IC8oYXV0b3xzY3JvbGwpLyxcbiAgICAgICAgICAgICAgICBhID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyAmJiBcInN0YXRpY1wiID09PSB0LmNzcyhcInBvc2l0aW9uXCIpID8gITEgOiBuLnRlc3QodC5jc3MoXCJvdmVyZmxvd1wiKSArIHQuY3NzKFwib3ZlcmZsb3cteVwiKSArIHQuY3NzKFwib3ZlcmZsb3cteFwiKSlcbiAgICAgICAgICAgICAgICB9KS5lcSgwKTtcbiAgICAgICAgICAgIHJldHVybiBcImZpeGVkXCIgIT09IGkgJiYgYS5sZW5ndGggPyBhIDogZSh0aGlzWzBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpXG4gICAgICAgIH0sIHVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IDA7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkIHx8ICh0aGlzLmlkID0gXCJ1aS1pZC1cIiArICsrZSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KCksIHJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvXnVpLWlkLVxcZCskLy50ZXN0KHRoaXMuaWQpICYmIGUodGhpcykucmVtb3ZlQXR0cihcImlkXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSksIGUuZXh0ZW5kKGUuZXhwcltcIjpcIl0sIHtcbiAgICAgICAgZGF0YTogZS5leHByLmNyZWF0ZVBzZXVkbyA/IGUuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIWUuZGF0YShpLCB0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSA6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4gISFlLmRhdGEodCwgc1szXSlcbiAgICAgICAgfSwgZm9jdXNhYmxlOiBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgcmV0dXJuIHQoaSwgIWlzTmFOKGUuYXR0cihpLCBcInRhYmluZGV4XCIpKSlcbiAgICAgICAgfSwgdGFiYmFibGU6IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGUuYXR0cihpLCBcInRhYmluZGV4XCIpLCBuID0gaXNOYU4ocyk7XG4gICAgICAgICAgICByZXR1cm4gKG4gfHwgcyA+PSAwKSAmJiB0KGksICFuKVxuICAgICAgICB9XG4gICAgfSksIGUoXCI8YT5cIikub3V0ZXJXaWR0aCgxKS5qcXVlcnkgfHwgZS5lYWNoKFtcIldpZHRoXCIsIFwiSGVpZ2h0XCJdLCBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICBmdW5jdGlvbiBzKHQsIGksIHMsIGEpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmVhY2gobiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGkgLT0gcGFyc2VGbG9hdChlLmNzcyh0LCBcInBhZGRpbmdcIiArIHRoaXMpKSB8fCAwLCBzICYmIChpIC09IHBhcnNlRmxvYXQoZS5jc3ModCwgXCJib3JkZXJcIiArIHRoaXMgKyBcIldpZHRoXCIpKSB8fCAwKSwgYSAmJiAoaSAtPSBwYXJzZUZsb2F0KGUuY3NzKHQsIFwibWFyZ2luXCIgKyB0aGlzKSkgfHwgMClcbiAgICAgICAgICAgIH0pLCBpXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbiA9IFwiV2lkdGhcIiA9PT0gaSA/IFtcIkxlZnRcIiwgXCJSaWdodFwiXSA6IFtcIlRvcFwiLCBcIkJvdHRvbVwiXSwgYSA9IGkudG9Mb3dlckNhc2UoKSwgbyA9IHtcbiAgICAgICAgICAgIGlubmVyV2lkdGg6IGUuZm4uaW5uZXJXaWR0aCxcbiAgICAgICAgICAgIGlubmVySGVpZ2h0OiBlLmZuLmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgb3V0ZXJXaWR0aDogZS5mbi5vdXRlcldpZHRoLFxuICAgICAgICAgICAgb3V0ZXJIZWlnaHQ6IGUuZm4ub3V0ZXJIZWlnaHRcbiAgICAgICAgfTtcbiAgICAgICAgZS5mbltcImlubmVyXCIgKyBpXSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gb1tcImlubmVyXCIgKyBpXS5jYWxsKHRoaXMpIDogdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlKHRoaXMpLmNzcyhhLCBzKHRoaXMsIHQpICsgXCJweFwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgZS5mbltcIm91dGVyXCIgKyBpXSA9IGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIiAhPSB0eXBlb2YgdCA/IG9bXCJvdXRlclwiICsgaV0uY2FsbCh0aGlzLCB0KSA6IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5jc3MoYSwgcyh0aGlzLCB0LCAhMCwgbikgKyBcInB4XCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSksIGUuZm4uYWRkQmFjayB8fCAoZS5mbi5hZGRCYWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKG51bGwgPT0gZSA/IHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpXG4gICAgfSksIGUoXCI8YT5cIikuZGF0YShcImEtYlwiLCBcImFcIikucmVtb3ZlRGF0YShcImEtYlwiKS5kYXRhKFwiYS1iXCIpICYmIChlLmZuLnJlbW92ZURhdGEgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gdC5jYWxsKHRoaXMsIGUuY2FtZWxDYXNlKGkpKSA6IHQuY2FsbCh0aGlzKVxuICAgICAgICB9XG4gICAgfShlLmZuLnJlbW92ZURhdGEpKSwgZS51aS5pZSA9ICEhL21zaWUgW1xcdy5dKy8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpLCBlLmZuLmV4dGVuZCh7XG4gICAgICAgIGZvY3VzOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIGkgPyB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZSh0KS5mb2N1cygpLCBzICYmIHMuY2FsbCh0KVxuICAgICAgICAgICAgICAgICAgICB9LCBpKVxuICAgICAgICAgICAgICAgIH0pIDogdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5mbi5mb2N1cyksIGRpc2FibGVTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSA/IFwic2VsZWN0c3RhcnRcIiA6IFwibW91c2Vkb3duXCI7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJpbmQoZSArIFwiLnVpLWRpc2FibGVTZWxlY3Rpb25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSgpLCBlbmFibGVTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVuYmluZChcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIpXG4gICAgICAgIH0sIHpJbmRleDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQpIHJldHVybiB0aGlzLmNzcyhcInpJbmRleFwiLCB0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCkgZm9yICh2YXIgaSwgcywgbiA9IGUodGhpc1swXSk7IG4ubGVuZ3RoICYmIG5bMF0gIT09IGRvY3VtZW50Oykge1xuICAgICAgICAgICAgICAgIGlmIChpID0gbi5jc3MoXCJwb3NpdGlvblwiKSwgKFwiYWJzb2x1dGVcIiA9PT0gaSB8fCBcInJlbGF0aXZlXCIgPT09IGkgfHwgXCJmaXhlZFwiID09PSBpKSAmJiAocyA9IHBhcnNlSW50KG4uY3NzKFwiekluZGV4XCIpLCAxMCksICFpc05hTihzKSAmJiAwICE9PSBzKSkgcmV0dXJuIHM7XG4gICAgICAgICAgICAgICAgbiA9IG4ucGFyZW50KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5wbHVnaW4gPSB7XG4gICAgICAgIGFkZDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuLCBhID0gZS51aVt0XS5wcm90b3R5cGU7XG4gICAgICAgICAgICBmb3IgKG4gaW4gcykgYS5wbHVnaW5zW25dID0gYS5wbHVnaW5zW25dIHx8IFtdLCBhLnBsdWdpbnNbbl0ucHVzaChbaSwgc1tuXV0pXG4gICAgICAgIH0sIGNhbGw6IGZ1bmN0aW9uIChlLCB0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiwgYSA9IGUucGx1Z2luc1t0XTtcbiAgICAgICAgICAgIGlmIChhICYmIChzIHx8IGUuZWxlbWVudFswXS5wYXJlbnROb2RlICYmIDExICE9PSBlLmVsZW1lbnRbMF0ucGFyZW50Tm9kZS5ub2RlVHlwZSkpIGZvciAobiA9IDA7IGEubGVuZ3RoID4gbjsgbisrKSBlLm9wdGlvbnNbYVtuXVswXV0gJiYgYVtuXVsxXS5hcHBseShlLmVsZW1lbnQsIGkpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBsID0gMCwgdSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbiAgICBlLmNsZWFuRGF0YSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgdmFyIHMsIG4sIGE7XG4gICAgICAgICAgICBmb3IgKGEgPSAwOyBudWxsICE9IChuID0gaVthXSk7IGErKykgdHJ5IHtcbiAgICAgICAgICAgICAgICBzID0gZS5fZGF0YShuLCBcImV2ZW50c1wiKSwgcyAmJiBzLnJlbW92ZSAmJiBlKG4pLnRyaWdnZXJIYW5kbGVyKFwicmVtb3ZlXCIpXG4gICAgICAgICAgICB9IGNhdGNoIChvKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0KGkpXG4gICAgICAgIH1cbiAgICB9KGUuY2xlYW5EYXRhKSwgZS53aWRnZXQgPSBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICB2YXIgbiwgYSwgbywgciwgaCA9IHt9LCBsID0gdC5zcGxpdChcIi5cIilbMF07XG4gICAgICAgIHJldHVybiB0ID0gdC5zcGxpdChcIi5cIilbMV0sIG4gPSBsICsgXCItXCIgKyB0LCBzIHx8IChzID0gaSwgaSA9IGUuV2lkZ2V0KSwgZS5leHByW1wiOlwiXVtuLnRvTG93ZXJDYXNlKCldID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWUuZGF0YSh0LCBuKVxuICAgICAgICB9LCBlW2xdID0gZVtsXSB8fCB7fSwgYSA9IGVbbF1bdF0sIG8gPSBlW2xdW3RdID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVXaWRnZXQgPyAoYXJndW1lbnRzLmxlbmd0aCAmJiB0aGlzLl9jcmVhdGVXaWRnZXQoZSwgdCksIHZvaWQgMCkgOiBuZXcgbyhlLCB0KVxuICAgICAgICB9LCBlLmV4dGVuZChvLCBhLCB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBzLnZlcnNpb24sXG4gICAgICAgICAgICBfcHJvdG86IGUuZXh0ZW5kKHt9LCBzKSxcbiAgICAgICAgICAgIF9jaGlsZENvbnN0cnVjdG9yczogW11cbiAgICAgICAgfSksIHIgPSBuZXcgaSwgci5vcHRpb25zID0gZS53aWRnZXQuZXh0ZW5kKHt9LCByLm9wdGlvbnMpLCBlLmVhY2gocywgZnVuY3Rpb24gKHQsIHMpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmlzRnVuY3Rpb24ocykgPyAoaFt0XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkucHJvdG90eXBlW3RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICB9LCBuID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkucHJvdG90eXBlW3RdLmFwcGx5KHRoaXMsIGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCwgaSA9IHRoaXMuX3N1cGVyLCBhID0gdGhpcy5fc3VwZXJBcHBseTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyID0gZSwgdGhpcy5fc3VwZXJBcHBseSA9IG4sIHQgPSBzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX3N1cGVyID0gaSwgdGhpcy5fc3VwZXJBcHBseSA9IGEsIHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KCksIHZvaWQgMCkgOiAoaFt0XSA9IHMsIHZvaWQgMClcbiAgICAgICAgfSksIG8ucHJvdG90eXBlID0gZS53aWRnZXQuZXh0ZW5kKHIsIHt3aWRnZXRFdmVudFByZWZpeDogYSA/IHIud2lkZ2V0RXZlbnRQcmVmaXggfHwgdCA6IHR9LCBoLCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogbyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogbCxcbiAgICAgICAgICAgIHdpZGdldE5hbWU6IHQsXG4gICAgICAgICAgICB3aWRnZXRGdWxsTmFtZTogblxuICAgICAgICB9KSwgYSA/IChlLmVhY2goYS5fY2hpbGRDb25zdHJ1Y3RvcnMsIGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGkucHJvdG90eXBlO1xuICAgICAgICAgICAgZS53aWRnZXQocy5uYW1lc3BhY2UgKyBcIi5cIiArIHMud2lkZ2V0TmFtZSwgbywgaS5fcHJvdG8pXG4gICAgICAgIH0pLCBkZWxldGUgYS5fY2hpbGRDb25zdHJ1Y3RvcnMpIDogaS5fY2hpbGRDb25zdHJ1Y3RvcnMucHVzaChvKSwgZS53aWRnZXQuYnJpZGdlKHQsIG8pLCBvXG4gICAgfSwgZS53aWRnZXQuZXh0ZW5kID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZm9yICh2YXIgaSwgcywgbiA9IHUuY2FsbChhcmd1bWVudHMsIDEpLCBhID0gMCwgbyA9IG4ubGVuZ3RoOyBvID4gYTsgYSsrKSBmb3IgKGkgaW4gblthXSkgcyA9IG5bYV1baV0sIG5bYV0uaGFzT3duUHJvcGVydHkoaSkgJiYgdm9pZCAwICE9PSBzICYmICh0W2ldID0gZS5pc1BsYWluT2JqZWN0KHMpID8gZS5pc1BsYWluT2JqZWN0KHRbaV0pID8gZS53aWRnZXQuZXh0ZW5kKHt9LCB0W2ldLCBzKSA6IGUud2lkZ2V0LmV4dGVuZCh7fSwgcykgOiBzKTtcbiAgICAgICAgcmV0dXJuIHRcbiAgICB9LCBlLndpZGdldC5icmlkZ2UgPSBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICB2YXIgcyA9IGkucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lIHx8IHQ7XG4gICAgICAgIGUuZm5bdF0gPSBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgdmFyIGEgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLCBvID0gdS5jYWxsKGFyZ3VtZW50cywgMSksIHIgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSAhYSAmJiBvLmxlbmd0aCA/IGUud2lkZ2V0LmV4dGVuZC5hcHBseShudWxsLCBbbl0uY29uY2F0KG8pKSA6IG4sIGEgPyB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBhID0gZS5kYXRhKHRoaXMsIHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcImluc3RhbmNlXCIgPT09IG4gPyAociA9IGEsICExKSA6IGEgPyBlLmlzRnVuY3Rpb24oYVtuXSkgJiYgXCJfXCIgIT09IG4uY2hhckF0KDApID8gKGkgPSBhW25dLmFwcGx5KGEsIG8pLCBpICE9PSBhICYmIHZvaWQgMCAhPT0gaSA/IChyID0gaSAmJiBpLmpxdWVyeSA/IHIucHVzaFN0YWNrKGkuZ2V0KCkpIDogaSwgITEpIDogdm9pZCAwKSA6IGUuZXJyb3IoXCJubyBzdWNoIG1ldGhvZCAnXCIgKyBuICsgXCInIGZvciBcIiArIHQgKyBcIiB3aWRnZXQgaW5zdGFuY2VcIikgOiBlLmVycm9yKFwiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiBcIiArIHQgKyBcIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgXCIgKyBcImF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnXCIgKyBuICsgXCInXCIpXG4gICAgICAgICAgICB9KSA6IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBlLmRhdGEodGhpcywgcyk7XG4gICAgICAgICAgICAgICAgdCA/ICh0Lm9wdGlvbihuIHx8IHt9KSwgdC5faW5pdCAmJiB0Ll9pbml0KCkpIDogZS5kYXRhKHRoaXMsIHMsIG5ldyBpKG4sIHRoaXMpKVxuICAgICAgICAgICAgfSksIHJcbiAgICAgICAgfVxuICAgIH0sIGUuV2lkZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIH0sIGUuV2lkZ2V0Ll9jaGlsZENvbnN0cnVjdG9ycyA9IFtdLCBlLldpZGdldC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHdpZGdldE5hbWU6IFwid2lkZ2V0XCIsXG4gICAgICAgIHdpZGdldEV2ZW50UHJlZml4OiBcIlwiLFxuICAgICAgICBkZWZhdWx0RWxlbWVudDogXCI8ZGl2PlwiLFxuICAgICAgICBvcHRpb25zOiB7ZGlzYWJsZWQ6ICExLCBjcmVhdGU6IG51bGx9LFxuICAgICAgICBfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgaSA9IGUoaSB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMpWzBdLCB0aGlzLmVsZW1lbnQgPSBlKGkpLCB0aGlzLnV1aWQgPSBsKyssIHRoaXMuZXZlbnROYW1lc3BhY2UgPSBcIi5cIiArIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZCwgdGhpcy5iaW5kaW5ncyA9IGUoKSwgdGhpcy5ob3ZlcmFibGUgPSBlKCksIHRoaXMuZm9jdXNhYmxlID0gZSgpLCBpICE9PSB0aGlzICYmIChlLmRhdGEoaSwgdGhpcy53aWRnZXRGdWxsTmFtZSwgdGhpcyksIHRoaXMuX29uKCEwLCB0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0ID09PSBpICYmIHRoaXMuZGVzdHJveSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksIHRoaXMuZG9jdW1lbnQgPSBlKGkuc3R5bGUgPyBpLm93bmVyRG9jdW1lbnQgOiBpLmRvY3VtZW50IHx8IGkpLCB0aGlzLndpbmRvdyA9IGUodGhpcy5kb2N1bWVudFswXS5kZWZhdWx0VmlldyB8fCB0aGlzLmRvY3VtZW50WzBdLnBhcmVudFdpbmRvdykpLCB0aGlzLm9wdGlvbnMgPSBlLndpZGdldC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgdGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLCB0KSwgdGhpcy5fY3JlYXRlKCksIHRoaXMuX3RyaWdnZXIoXCJjcmVhdGVcIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkpLCB0aGlzLl9pbml0KClcbiAgICAgICAgfSxcbiAgICAgICAgX2dldENyZWF0ZU9wdGlvbnM6IGUubm9vcCxcbiAgICAgICAgX2dldENyZWF0ZUV2ZW50RGF0YTogZS5ub29wLFxuICAgICAgICBfY3JlYXRlOiBlLm5vb3AsXG4gICAgICAgIF9pbml0OiBlLm5vb3AsXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3koKSwgdGhpcy5lbGVtZW50LnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0RnVsbE5hbWUpLnJlbW92ZURhdGEoZS5jYW1lbENhc2UodGhpcy53aWRnZXRGdWxsTmFtZSkpLCB0aGlzLndpZGdldCgpLnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVBdHRyKFwiYXJpYS1kaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyh0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWQgXCIgKyBcInVpLXN0YXRlLWRpc2FibGVkXCIpLCB0aGlzLmJpbmRpbmdzLnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKSwgdGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSwgdGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKVxuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveTogZS5ub29wLFxuICAgICAgICB3aWRnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMsIG4sIGEsIG8gPSB0O1xuICAgICAgICAgICAgaWYgKDAgPT09IGFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBlLndpZGdldC5leHRlbmQoe30sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgaWYgKG8gPSB7fSwgcyA9IHQuc3BsaXQoXCIuXCIpLCB0ID0gcy5zaGlmdCgpLCBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZvciAobiA9IG9bdF0gPSBlLndpZGdldC5leHRlbmQoe30sIHRoaXMub3B0aW9uc1t0XSksIGEgPSAwOyBzLmxlbmd0aCAtIDEgPiBhOyBhKyspIG5bc1thXV0gPSBuW3NbYV1dIHx8IHt9LCBuID0gbltzW2FdXTtcbiAgICAgICAgICAgICAgICBpZiAodCA9IHMucG9wKCksIDEgPT09IGFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB2b2lkIDAgPT09IG5bdF0gPyBudWxsIDogblt0XTtcbiAgICAgICAgICAgICAgICBuW3RdID0gaVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy5vcHRpb25zW3RdID8gbnVsbCA6IHRoaXMub3B0aW9uc1t0XTtcbiAgICAgICAgICAgICAgICBvW3RdID0gaVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldE9wdGlvbnMobyksIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbnM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgIGZvciAodCBpbiBlKSB0aGlzLl9zZXRPcHRpb24odCwgZVt0XSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1tlXSA9IHQsIFwiZGlzYWJsZWRcIiA9PT0gZSAmJiAodGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyh0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWRcIiwgISF0KSwgdCAmJiAodGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSwgdGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKSkpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoe2Rpc2FibGVkOiAhMX0pXG4gICAgICAgIH0sXG4gICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXRPcHRpb25zKHtkaXNhYmxlZDogITB9KVxuICAgICAgICB9LFxuICAgICAgICBfb246IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiwgYSA9IHRoaXM7XG4gICAgICAgICAgICBcImJvb2xlYW5cIiAhPSB0eXBlb2YgdCAmJiAocyA9IGksIGkgPSB0LCB0ID0gITEpLCBzID8gKGkgPSBuID0gZShpKSwgdGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuYWRkKGkpKSA6IChzID0gaSwgaSA9IHRoaXMuZWxlbWVudCwgbiA9IHRoaXMud2lkZ2V0KCkpLCBlLmVhY2gocywgZnVuY3Rpb24gKHMsIG8pIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCB8fCBhLm9wdGlvbnMuZGlzYWJsZWQgIT09ICEwICYmICFlKHRoaXMpLmhhc0NsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikgPyAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgbyA/IGFbb10gOiBvKS5hcHBseShhLCBhcmd1bWVudHMpIDogdm9pZCAwXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAhPSB0eXBlb2YgbyAmJiAoci5ndWlkID0gby5ndWlkID0gby5ndWlkIHx8IHIuZ3VpZCB8fCBlLmd1aWQrKyk7XG4gICAgICAgICAgICAgICAgdmFyIGggPSBzLm1hdGNoKC9eKFtcXHc6LV0qKVxccyooLiopJC8pLCBsID0gaFsxXSArIGEuZXZlbnROYW1lc3BhY2UsIHUgPSBoWzJdO1xuICAgICAgICAgICAgICAgIHUgPyBuLmRlbGVnYXRlKHUsIGwsIHIpIDogaS5iaW5kKGwsIHIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfb2ZmOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgaSA9IChpIHx8IFwiXCIpLnNwbGl0KFwiIFwiKS5qb2luKHRoaXMuZXZlbnROYW1lc3BhY2UgKyBcIiBcIikgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCB0LnVuYmluZChpKS51bmRlbGVnYXRlKGkpLCB0aGlzLmJpbmRpbmdzID0gZSh0aGlzLmJpbmRpbmdzLm5vdCh0KS5nZXQoKSksIHRoaXMuZm9jdXNhYmxlID0gZSh0aGlzLmZvY3VzYWJsZS5ub3QodCkuZ2V0KCkpLCB0aGlzLmhvdmVyYWJsZSA9IGUodGhpcy5ob3ZlcmFibGUubm90KHQpLmdldCgpKVxuICAgICAgICB9LFxuICAgICAgICBfZGVsYXk6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBpKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IHNbZV0gOiBlKS5hcHBseShzLCBhcmd1bWVudHMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGksIHQgfHwgMClcbiAgICAgICAgfSxcbiAgICAgICAgX2hvdmVyYWJsZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHRoaXMuaG92ZXJhYmxlID0gdGhpcy5ob3ZlcmFibGUuYWRkKHQpLCB0aGlzLl9vbih0LCB7XG4gICAgICAgICAgICAgICAgbW91c2VlbnRlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwidWktc3RhdGUtaG92ZXJcIilcbiAgICAgICAgICAgICAgICB9LCBtb3VzZWxlYXZlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICBlKHQuY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9mb2N1c2FibGU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzYWJsZSA9IHRoaXMuZm9jdXNhYmxlLmFkZCh0KSwgdGhpcy5fb24odCwge1xuICAgICAgICAgICAgICAgIGZvY3VzaW46IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGUodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpXG4gICAgICAgICAgICAgICAgfSwgZm9jdXNvdXQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGUodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgX3RyaWdnZXI6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiwgYSwgbyA9IHRoaXMub3B0aW9uc1t0XTtcbiAgICAgICAgICAgIGlmIChzID0gcyB8fCB7fSwgaSA9IGUuRXZlbnQoaSksIGkudHlwZSA9ICh0ID09PSB0aGlzLndpZGdldEV2ZW50UHJlZml4ID8gdCA6IHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggKyB0KS50b0xvd2VyQ2FzZSgpLCBpLnRhcmdldCA9IHRoaXMuZWxlbWVudFswXSwgYSA9IGkub3JpZ2luYWxFdmVudCkgZm9yIChuIGluIGEpIG4gaW4gaSB8fCAoaVtuXSA9IGFbbl0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC50cmlnZ2VyKGksIHMpLCAhKGUuaXNGdW5jdGlvbihvKSAmJiBvLmFwcGx5KHRoaXMuZWxlbWVudFswXSwgW2ldLmNvbmNhdChzKSkgPT09ICExIHx8IGkuaXNEZWZhdWx0UHJldmVudGVkKCkpXG4gICAgICAgIH1cbiAgICB9LCBlLmVhY2goe3Nob3c6IFwiZmFkZUluXCIsIGhpZGU6IFwiZmFkZU91dFwifSwgZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgZS5XaWRnZXQucHJvdG90eXBlW1wiX1wiICsgdF0gPSBmdW5jdGlvbiAocywgbiwgYSkge1xuICAgICAgICAgICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiAmJiAobiA9IHtlZmZlY3Q6IG59KTtcbiAgICAgICAgICAgIHZhciBvLCByID0gbiA/IG4gPT09ICEwIHx8IFwibnVtYmVyXCIgPT0gdHlwZW9mIG4gPyBpIDogbi5lZmZlY3QgfHwgaSA6IHQ7XG4gICAgICAgICAgICBuID0gbiB8fCB7fSwgXCJudW1iZXJcIiA9PSB0eXBlb2YgbiAmJiAobiA9IHtkdXJhdGlvbjogbn0pLCBvID0gIWUuaXNFbXB0eU9iamVjdChuKSwgbi5jb21wbGV0ZSA9IGEsIG4uZGVsYXkgJiYgcy5kZWxheShuLmRlbGF5KSwgbyAmJiBlLmVmZmVjdHMgJiYgZS5lZmZlY3RzLmVmZmVjdFtyXSA/IHNbdF0obikgOiByICE9PSB0ICYmIHNbcl0gPyBzW3JdKG4uZHVyYXRpb24sIG4uZWFzaW5nLCBhKSA6IHMucXVldWUoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICBlKHRoaXMpW3RdKCksIGEgJiYgYS5jYWxsKHNbMF0pLCBpKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KSwgZS53aWRnZXQ7XG4gICAgdmFyIGQgPSAhMTtcbiAgICBlKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZCA9ICExXG4gICAgfSksIGUud2lkZ2V0KFwidWkubW91c2VcIiwge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLFxuICAgICAgICBvcHRpb25zOiB7Y2FuY2VsOiBcImlucHV0LHRleHRhcmVhLGJ1dHRvbixzZWxlY3Qsb3B0aW9uXCIsIGRpc3RhbmNlOiAxLCBkZWxheTogMH0sXG4gICAgICAgIF9tb3VzZUluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5iaW5kKFwibW91c2Vkb3duLlwiICsgdGhpcy53aWRnZXROYW1lLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9tb3VzZURvd24oZSlcbiAgICAgICAgICAgIH0pLmJpbmQoXCJjbGljay5cIiArIHRoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gITAgPT09IGUuZGF0YShpLnRhcmdldCwgdC53aWRnZXROYW1lICsgXCIucHJldmVudENsaWNrRXZlbnRcIikgPyAoZS5yZW1vdmVEYXRhKGkudGFyZ2V0LCB0LndpZGdldE5hbWUgKyBcIi5wcmV2ZW50Q2xpY2tFdmVudFwiKSwgaS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwgITEpIDogdm9pZCAwXG4gICAgICAgICAgICB9KSwgdGhpcy5zdGFydGVkID0gITFcbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlRGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVuYmluZChcIi5cIiArIHRoaXMud2lkZ2V0TmFtZSksIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlICYmIHRoaXMuZG9jdW1lbnQudW5iaW5kKFwibW91c2Vtb3ZlLlwiICsgdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkudW5iaW5kKFwibW91c2V1cC5cIiArIHRoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VVcERlbGVnYXRlKVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VEb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgaWYgKCFkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW91c2VNb3ZlZCA9ICExLCB0aGlzLl9tb3VzZVN0YXJ0ZWQgJiYgdGhpcy5fbW91c2VVcCh0KSwgdGhpcy5fbW91c2VEb3duRXZlbnQgPSB0O1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcywgcyA9IDEgPT09IHQud2hpY2gsXG4gICAgICAgICAgICAgICAgICAgIG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiB0aGlzLm9wdGlvbnMuY2FuY2VsICYmIHQudGFyZ2V0Lm5vZGVOYW1lID8gZSh0LnRhcmdldCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuY2FuY2VsKS5sZW5ndGggOiAhMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcyAmJiAhbiAmJiB0aGlzLl9tb3VzZUNhcHR1cmUodCkgPyAodGhpcy5tb3VzZURlbGF5TWV0ID0gIXRoaXMub3B0aW9ucy5kZWxheSwgdGhpcy5tb3VzZURlbGF5TWV0IHx8ICh0aGlzLl9tb3VzZURlbGF5VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaS5tb3VzZURlbGF5TWV0ID0gITBcbiAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZGVsYXkpKSwgdGhpcy5fbW91c2VEaXN0YW5jZU1ldCh0KSAmJiB0aGlzLl9tb3VzZURlbGF5TWV0KHQpICYmICh0aGlzLl9tb3VzZVN0YXJ0ZWQgPSB0aGlzLl9tb3VzZVN0YXJ0KHQpICE9PSAhMSwgIXRoaXMuX21vdXNlU3RhcnRlZCkgPyAodC5wcmV2ZW50RGVmYXVsdCgpLCAhMCkgOiAoITAgPT09IGUuZGF0YSh0LnRhcmdldCwgdGhpcy53aWRnZXROYW1lICsgXCIucHJldmVudENsaWNrRXZlbnRcIikgJiYgZS5yZW1vdmVEYXRhKHQudGFyZ2V0LCB0aGlzLndpZGdldE5hbWUgKyBcIi5wcmV2ZW50Q2xpY2tFdmVudFwiKSwgdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5fbW91c2VNb3ZlKGUpXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5fbW91c2VVcERlbGVnYXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuX21vdXNlVXAoZSlcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmJpbmQoXCJtb3VzZW1vdmUuXCIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS5iaW5kKFwibW91c2V1cC5cIiArIHRoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VVcERlbGVnYXRlKSwgdC5wcmV2ZW50RGVmYXVsdCgpLCBkID0gITAsICEwKSkgOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VNb3ZlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX21vdXNlTW92ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS51aS5pZSAmJiAoIWRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCA5ID4gZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSAmJiAhdC5idXR0b24pIHJldHVybiB0aGlzLl9tb3VzZVVwKHQpO1xuICAgICAgICAgICAgICAgIGlmICghdC53aGljaCkgcmV0dXJuIHRoaXMuX21vdXNlVXAodClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAodC53aGljaCB8fCB0LmJ1dHRvbikgJiYgKHRoaXMuX21vdXNlTW92ZWQgPSAhMCksIHRoaXMuX21vdXNlU3RhcnRlZCA/ICh0aGlzLl9tb3VzZURyYWcodCksIHQucHJldmVudERlZmF1bHQoKSkgOiAodGhpcy5fbW91c2VEaXN0YW5jZU1ldCh0KSAmJiB0aGlzLl9tb3VzZURlbGF5TWV0KHQpICYmICh0aGlzLl9tb3VzZVN0YXJ0ZWQgPSB0aGlzLl9tb3VzZVN0YXJ0KHRoaXMuX21vdXNlRG93bkV2ZW50LCB0KSAhPT0gITEsIHRoaXMuX21vdXNlU3RhcnRlZCA/IHRoaXMuX21vdXNlRHJhZyh0KSA6IHRoaXMuX21vdXNlVXAodCkpLCAhdGhpcy5fbW91c2VTdGFydGVkKVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VVcDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50LnVuYmluZChcIm1vdXNlbW92ZS5cIiArIHRoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLnVuYmluZChcIm1vdXNldXAuXCIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSksIHRoaXMuX21vdXNlU3RhcnRlZCAmJiAodGhpcy5fbW91c2VTdGFydGVkID0gITEsIHQudGFyZ2V0ID09PSB0aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQgJiYgZS5kYXRhKHQudGFyZ2V0LCB0aGlzLndpZGdldE5hbWUgKyBcIi5wcmV2ZW50Q2xpY2tFdmVudFwiLCAhMCksIHRoaXMuX21vdXNlU3RvcCh0KSksIGQgPSAhMSwgITFcbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlRGlzdGFuY2VNZXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVggLSBlLnBhZ2VYKSwgTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVkgLSBlLnBhZ2VZKSkgPj0gdGhpcy5vcHRpb25zLmRpc3RhbmNlXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZURlbGF5TWV0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0XG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZVN0YXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZURyYWc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlU3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICB9LFxuICAgICAgICBfbW91c2VDYXB0dXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gITBcbiAgICAgICAgfVxuICAgIH0pLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIHQoZSwgdCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIFtwYXJzZUZsb2F0KGVbMF0pICogKHAudGVzdChlWzBdKSA/IHQgLyAxMDAgOiAxKSwgcGFyc2VGbG9hdChlWzFdKSAqIChwLnRlc3QoZVsxXSkgPyBpIC8gMTAwIDogMSldXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpKHQsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlLmNzcyh0LCBpKSwgMTApIHx8IDBcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHModCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0WzBdO1xuICAgICAgICAgICAgcmV0dXJuIDkgPT09IGkubm9kZVR5cGUgPyB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHQud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHQuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiB7dG9wOiAwLCBsZWZ0OiAwfVxuICAgICAgICAgICAgfSA6IGUuaXNXaW5kb3coaSkgPyB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHQud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHQuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiB7dG9wOiB0LnNjcm9sbFRvcCgpLCBsZWZ0OiB0LnNjcm9sbExlZnQoKX1cbiAgICAgICAgICAgIH0gOiBpLnByZXZlbnREZWZhdWx0ID8ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHt0b3A6IGkucGFnZVksIGxlZnQ6IGkucGFnZVh9XG4gICAgICAgICAgICB9IDoge3dpZHRoOiB0Lm91dGVyV2lkdGgoKSwgaGVpZ2h0OiB0Lm91dGVySGVpZ2h0KCksIG9mZnNldDogdC5vZmZzZXQoKX1cbiAgICAgICAgfVxuXG4gICAgICAgIGUudWkgPSBlLnVpIHx8IHt9O1xuICAgICAgICB2YXIgbiwgYSwgbyA9IE1hdGgubWF4LCByID0gTWF0aC5hYnMsIGggPSBNYXRoLnJvdW5kLCBsID0gL2xlZnR8Y2VudGVyfHJpZ2h0LywgdSA9IC90b3B8Y2VudGVyfGJvdHRvbS8sXG4gICAgICAgICAgICBkID0gL1tcXCtcXC1dXFxkKyhcXC5bXFxkXSspPyU/LywgYyA9IC9eXFx3Ky8sIHAgPSAvJSQvLCBmID0gZS5mbi5wb3NpdGlvbjtcbiAgICAgICAgZS5wb3NpdGlvbiA9IHtcbiAgICAgICAgICAgIHNjcm9sbGJhcldpZHRoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICAgICAgdmFyIHQsIGksXG4gICAgICAgICAgICAgICAgICAgIHMgPSBlKFwiPGRpdiBzdHlsZT0nZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmhpZGRlbjsnPjxkaXYgc3R5bGU9J2hlaWdodDoxMDBweDt3aWR0aDphdXRvOyc+PC9kaXY+PC9kaXY+XCIpLFxuICAgICAgICAgICAgICAgICAgICBhID0gcy5jaGlsZHJlbigpWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBlKFwiYm9keVwiKS5hcHBlbmQocyksIHQgPSBhLm9mZnNldFdpZHRoLCBzLmNzcyhcIm92ZXJmbG93XCIsIFwic2Nyb2xsXCIpLCBpID0gYS5vZmZzZXRXaWR0aCwgdCA9PT0gaSAmJiAoaSA9IHNbMF0uY2xpZW50V2lkdGgpLCBzLnJlbW92ZSgpLCBuID0gdCAtIGlcbiAgICAgICAgICAgIH0sIGdldFNjcm9sbEluZm86IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0LmlzV2luZG93IHx8IHQuaXNEb2N1bWVudCA/IFwiXCIgOiB0LmVsZW1lbnQuY3NzKFwib3ZlcmZsb3cteFwiKSxcbiAgICAgICAgICAgICAgICAgICAgcyA9IHQuaXNXaW5kb3cgfHwgdC5pc0RvY3VtZW50ID8gXCJcIiA6IHQuZWxlbWVudC5jc3MoXCJvdmVyZmxvdy15XCIpLFxuICAgICAgICAgICAgICAgICAgICBuID0gXCJzY3JvbGxcIiA9PT0gaSB8fCBcImF1dG9cIiA9PT0gaSAmJiB0LndpZHRoIDwgdC5lbGVtZW50WzBdLnNjcm9sbFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBhID0gXCJzY3JvbGxcIiA9PT0gcyB8fCBcImF1dG9cIiA9PT0gcyAmJiB0LmhlaWdodCA8IHQuZWxlbWVudFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt3aWR0aDogYSA/IGUucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKSA6IDAsIGhlaWdodDogbiA/IGUucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKSA6IDB9XG4gICAgICAgICAgICB9LCBnZXRXaXRoaW5JbmZvOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZSh0IHx8IHdpbmRvdyksIHMgPSBlLmlzV2luZG93KGlbMF0pLCBuID0gISFpWzBdICYmIDkgPT09IGlbMF0ubm9kZVR5cGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogaSxcbiAgICAgICAgICAgICAgICAgICAgaXNXaW5kb3c6IHMsXG4gICAgICAgICAgICAgICAgICAgIGlzRG9jdW1lbnQ6IG4sXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogaS5vZmZzZXQoKSB8fCB7bGVmdDogMCwgdG9wOiAwfSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogaS5zY3JvbGxMZWZ0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogaS5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHMgfHwgbiA/IGkud2lkdGgoKSA6IGkub3V0ZXJXaWR0aCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHMgfHwgbiA/IGkuaGVpZ2h0KCkgOiBpLm91dGVySGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGUuZm4ucG9zaXRpb24gPSBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgaWYgKCFuIHx8ICFuLm9mKSByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgbiA9IGUuZXh0ZW5kKHt9LCBuKTtcbiAgICAgICAgICAgIHZhciBwLCBtLCBnLCB2LCB5LCBiLCBfID0gZShuLm9mKSwgeCA9IGUucG9zaXRpb24uZ2V0V2l0aGluSW5mbyhuLndpdGhpbiksIHcgPSBlLnBvc2l0aW9uLmdldFNjcm9sbEluZm8oeCksXG4gICAgICAgICAgICAgICAgayA9IChuLmNvbGxpc2lvbiB8fCBcImZsaXBcIikuc3BsaXQoXCIgXCIpLCBUID0ge307XG4gICAgICAgICAgICByZXR1cm4gYiA9IHMoXyksIF9bMF0ucHJldmVudERlZmF1bHQgJiYgKG4uYXQgPSBcImxlZnQgdG9wXCIpLCBtID0gYi53aWR0aCwgZyA9IGIuaGVpZ2h0LCB2ID0gYi5vZmZzZXQsIHkgPSBlLmV4dGVuZCh7fSwgdiksIGUuZWFjaChbXCJteVwiLCBcImF0XCJdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUsIHQsIGkgPSAoblt0aGlzXSB8fCBcIlwiKS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICAgICAgMSA9PT0gaS5sZW5ndGggJiYgKGkgPSBsLnRlc3QoaVswXSkgPyBpLmNvbmNhdChbXCJjZW50ZXJcIl0pIDogdS50ZXN0KGlbMF0pID8gW1wiY2VudGVyXCJdLmNvbmNhdChpKSA6IFtcImNlbnRlclwiLCBcImNlbnRlclwiXSksIGlbMF0gPSBsLnRlc3QoaVswXSkgPyBpWzBdIDogXCJjZW50ZXJcIiwgaVsxXSA9IHUudGVzdChpWzFdKSA/IGlbMV0gOiBcImNlbnRlclwiLCBlID0gZC5leGVjKGlbMF0pLCB0ID0gZC5leGVjKGlbMV0pLCBUW3RoaXNdID0gW2UgPyBlWzBdIDogMCwgdCA/IHRbMF0gOiAwXSwgblt0aGlzXSA9IFtjLmV4ZWMoaVswXSlbMF0sIGMuZXhlYyhpWzFdKVswXV1cbiAgICAgICAgICAgIH0pLCAxID09PSBrLmxlbmd0aCAmJiAoa1sxXSA9IGtbMF0pLCBcInJpZ2h0XCIgPT09IG4uYXRbMF0gPyB5LmxlZnQgKz0gbSA6IFwiY2VudGVyXCIgPT09IG4uYXRbMF0gJiYgKHkubGVmdCArPSBtIC8gMiksIFwiYm90dG9tXCIgPT09IG4uYXRbMV0gPyB5LnRvcCArPSBnIDogXCJjZW50ZXJcIiA9PT0gbi5hdFsxXSAmJiAoeS50b3AgKz0gZyAvIDIpLCBwID0gdChULmF0LCBtLCBnKSwgeS5sZWZ0ICs9IHBbMF0sIHkudG9wICs9IHBbMV0sIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMsIGwsIHUgPSBlKHRoaXMpLCBkID0gdS5vdXRlcldpZHRoKCksIGMgPSB1Lm91dGVySGVpZ2h0KCksIGYgPSBpKHRoaXMsIFwibWFyZ2luTGVmdFwiKSxcbiAgICAgICAgICAgICAgICAgICAgYiA9IGkodGhpcywgXCJtYXJnaW5Ub3BcIiksIEQgPSBkICsgZiArIGkodGhpcywgXCJtYXJnaW5SaWdodFwiKSArIHcud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIFMgPSBjICsgYiArIGkodGhpcywgXCJtYXJnaW5Cb3R0b21cIikgKyB3LmhlaWdodCwgTSA9IGUuZXh0ZW5kKHt9LCB5KSxcbiAgICAgICAgICAgICAgICAgICAgQyA9IHQoVC5teSwgdS5vdXRlcldpZHRoKCksIHUub3V0ZXJIZWlnaHQoKSk7XG4gICAgICAgICAgICAgICAgXCJyaWdodFwiID09PSBuLm15WzBdID8gTS5sZWZ0IC09IGQgOiBcImNlbnRlclwiID09PSBuLm15WzBdICYmIChNLmxlZnQgLT0gZCAvIDIpLCBcImJvdHRvbVwiID09PSBuLm15WzFdID8gTS50b3AgLT0gYyA6IFwiY2VudGVyXCIgPT09IG4ubXlbMV0gJiYgKE0udG9wIC09IGMgLyAyKSwgTS5sZWZ0ICs9IENbMF0sIE0udG9wICs9IENbMV0sIGEgfHwgKE0ubGVmdCA9IGgoTS5sZWZ0KSwgTS50b3AgPSBoKE0udG9wKSksIHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IGYsXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogYlxuICAgICAgICAgICAgICAgIH0sIGUuZWFjaChbXCJsZWZ0XCIsIFwidG9wXCJdLCBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBlLnVpLnBvc2l0aW9uW2tbdF1dICYmIGUudWkucG9zaXRpb25ba1t0XV1baV0oTSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0V2lkdGg6IG0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRIZWlnaHQ6IGcsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtV2lkdGg6IGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtSGVpZ2h0OiBjLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uUG9zaXRpb246IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25XaWR0aDogRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvbkhlaWdodDogUyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogW3BbMF0gKyBDWzBdLCBwWzFdICsgQ1sxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBteTogbi5teSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBuLmF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgd2l0aGluOiB4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbTogdVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pLCBuLnVzaW5nICYmIChsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB2LmxlZnQgLSBNLmxlZnQsIGkgPSB0ICsgbSAtIGQsIHMgPSB2LnRvcCAtIE0udG9wLCBhID0gcyArIGcgLSBjLCBoID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB7ZWxlbWVudDogXywgbGVmdDogdi5sZWZ0LCB0b3A6IHYudG9wLCB3aWR0aDogbSwgaGVpZ2h0OiBnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHtlbGVtZW50OiB1LCBsZWZ0OiBNLmxlZnQsIHRvcDogTS50b3AsIHdpZHRoOiBkLCBoZWlnaHQ6IGN9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbDogMCA+IGkgPyBcImxlZnRcIiA6IHQgPiAwID8gXCJyaWdodFwiIDogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsOiAwID4gYSA/IFwidG9wXCIgOiBzID4gMCA/IFwiYm90dG9tXCIgOiBcIm1pZGRsZVwiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGQgPiBtICYmIG0gPiByKHQgKyBpKSAmJiAoaC5ob3Jpem9udGFsID0gXCJjZW50ZXJcIiksIGMgPiBnICYmIGcgPiByKHMgKyBhKSAmJiAoaC52ZXJ0aWNhbCA9IFwibWlkZGxlXCIpLCBoLmltcG9ydGFudCA9IG8ocih0KSwgcihpKSkgPiBvKHIocyksIHIoYSkpID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIsIG4udXNpbmcuY2FsbCh0aGlzLCBlLCBoKVxuICAgICAgICAgICAgICAgIH0pLCB1Lm9mZnNldChlLmV4dGVuZChNLCB7dXNpbmc6IGx9KSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIGUudWkucG9zaXRpb24gPSB7XG4gICAgICAgICAgICBmaXQ6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSwgcyA9IHQud2l0aGluLCBuID0gcy5pc1dpbmRvdyA/IHMuc2Nyb2xsTGVmdCA6IHMub2Zmc2V0LmxlZnQsIGEgPSBzLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUubGVmdCAtIHQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCwgaCA9IG4gLSByLCBsID0gciArIHQuY29sbGlzaW9uV2lkdGggLSBhIC0gbjtcbiAgICAgICAgICAgICAgICAgICAgdC5jb2xsaXNpb25XaWR0aCA+IGEgPyBoID4gMCAmJiAwID49IGwgPyAoaSA9IGUubGVmdCArIGggKyB0LmNvbGxpc2lvbldpZHRoIC0gYSAtIG4sIGUubGVmdCArPSBoIC0gaSkgOiBlLmxlZnQgPSBsID4gMCAmJiAwID49IGggPyBuIDogaCA+IGwgPyBuICsgYSAtIHQuY29sbGlzaW9uV2lkdGggOiBuIDogaCA+IDAgPyBlLmxlZnQgKz0gaCA6IGwgPiAwID8gZS5sZWZ0IC09IGwgOiBlLmxlZnQgPSBvKGUubGVmdCAtIHIsIGUubGVmdClcbiAgICAgICAgICAgICAgICB9LCB0b3A6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpLCBzID0gdC53aXRoaW4sIG4gPSBzLmlzV2luZG93ID8gcy5zY3JvbGxUb3AgOiBzLm9mZnNldC50b3AsIGEgPSB0LndpdGhpbi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICByID0gZS50b3AgLSB0LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCwgaCA9IG4gLSByLCBsID0gciArIHQuY29sbGlzaW9uSGVpZ2h0IC0gYSAtIG47XG4gICAgICAgICAgICAgICAgICAgIHQuY29sbGlzaW9uSGVpZ2h0ID4gYSA/IGggPiAwICYmIDAgPj0gbCA/IChpID0gZS50b3AgKyBoICsgdC5jb2xsaXNpb25IZWlnaHQgLSBhIC0gbiwgZS50b3AgKz0gaCAtIGkpIDogZS50b3AgPSBsID4gMCAmJiAwID49IGggPyBuIDogaCA+IGwgPyBuICsgYSAtIHQuY29sbGlzaW9uSGVpZ2h0IDogbiA6IGggPiAwID8gZS50b3AgKz0gaCA6IGwgPiAwID8gZS50b3AgLT0gbCA6IGUudG9wID0gbyhlLnRvcCAtIHIsIGUudG9wKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZsaXA6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSwgcywgbiA9IHQud2l0aGluLCBhID0gbi5vZmZzZXQubGVmdCArIG4uc2Nyb2xsTGVmdCwgbyA9IG4ud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoID0gbi5pc1dpbmRvdyA/IG4uc2Nyb2xsTGVmdCA6IG4ub2Zmc2V0LmxlZnQsIGwgPSBlLmxlZnQgLSB0LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1ID0gbCAtIGgsIGQgPSBsICsgdC5jb2xsaXNpb25XaWR0aCAtIG8gLSBoLFxuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFwibGVmdFwiID09PSB0Lm15WzBdID8gLXQuZWxlbVdpZHRoIDogXCJyaWdodFwiID09PSB0Lm15WzBdID8gdC5lbGVtV2lkdGggOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcCA9IFwibGVmdFwiID09PSB0LmF0WzBdID8gdC50YXJnZXRXaWR0aCA6IFwicmlnaHRcIiA9PT0gdC5hdFswXSA/IC10LnRhcmdldFdpZHRoIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSAtMiAqIHQub2Zmc2V0WzBdO1xuICAgICAgICAgICAgICAgICAgICAwID4gdSA/IChpID0gZS5sZWZ0ICsgYyArIHAgKyBmICsgdC5jb2xsaXNpb25XaWR0aCAtIG8gLSBhLCAoMCA+IGkgfHwgcih1KSA+IGkpICYmIChlLmxlZnQgKz0gYyArIHAgKyBmKSkgOiBkID4gMCAmJiAocyA9IGUubGVmdCAtIHQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCArIGMgKyBwICsgZiAtIGgsIChzID4gMCB8fCBkID4gcihzKSkgJiYgKGUubGVmdCArPSBjICsgcCArIGYpKVxuICAgICAgICAgICAgICAgIH0sIHRvcDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGksIHMsIG4gPSB0LndpdGhpbiwgYSA9IG4ub2Zmc2V0LnRvcCArIG4uc2Nyb2xsVG9wLCBvID0gbi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoID0gbi5pc1dpbmRvdyA/IG4uc2Nyb2xsVG9wIDogbi5vZmZzZXQudG9wLCBsID0gZS50b3AgLSB0LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBsIC0gaCwgZCA9IGwgKyB0LmNvbGxpc2lvbkhlaWdodCAtIG8gLSBoLCBjID0gXCJ0b3BcIiA9PT0gdC5teVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBjID8gLXQuZWxlbUhlaWdodCA6IFwiYm90dG9tXCIgPT09IHQubXlbMV0gPyB0LmVsZW1IZWlnaHQgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IFwidG9wXCIgPT09IHQuYXRbMV0gPyB0LnRhcmdldEhlaWdodCA6IFwiYm90dG9tXCIgPT09IHQuYXRbMV0gPyAtdC50YXJnZXRIZWlnaHQgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IC0yICogdC5vZmZzZXRbMV07XG4gICAgICAgICAgICAgICAgICAgIDAgPiB1ID8gKHMgPSBlLnRvcCArIHAgKyBmICsgbSArIHQuY29sbGlzaW9uSGVpZ2h0IC0gbyAtIGEsIGUudG9wICsgcCArIGYgKyBtID4gdSAmJiAoMCA+IHMgfHwgcih1KSA+IHMpICYmIChlLnRvcCArPSBwICsgZiArIG0pKSA6IGQgPiAwICYmIChpID0gZS50b3AgLSB0LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCArIHAgKyBmICsgbSAtIGgsIGUudG9wICsgcCArIGYgKyBtID4gZCAmJiAoaSA+IDAgfHwgZCA+IHIoaSkpICYmIChlLnRvcCArPSBwICsgZiArIG0pKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZsaXBmaXQ6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGUudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIGUudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIH0sIHRvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIGUudWkucG9zaXRpb24uZml0LnRvcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSwgcywgbiwgbywgciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSwgaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChyID8gXCJkaXZcIiA6IFwiYm9keVwiKSwgcyA9IHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgICBib3JkZXI6IDAsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwibm9uZVwiXG4gICAgICAgICAgICB9LCByICYmIGUuZXh0ZW5kKHMsIHtwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCBsZWZ0OiBcIi0xMDAwcHhcIiwgdG9wOiBcIi0xMDAwcHhcIn0pO1xuICAgICAgICAgICAgZm9yIChvIGluIHMpIHQuc3R5bGVbb10gPSBzW29dO1xuICAgICAgICAgICAgdC5hcHBlbmRDaGlsZChoKSwgaSA9IHIgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBpLmluc2VydEJlZm9yZSh0LCBpLmZpcnN0Q2hpbGQpLCBoLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTAuNzQzMjIyMnB4O1wiLCBuID0gZShoKS5vZmZzZXQoKS5sZWZ0LCBhID0gbiA+IDEwICYmIDExID4gbiwgdC5pbm5lckhUTUwgPSBcIlwiLCBpLnJlbW92ZUNoaWxkKHQpXG4gICAgICAgIH0oKVxuICAgIH0oKSwgZS51aS5wb3NpdGlvbiwgZS53aWRnZXQoXCJ1aS5hY2NvcmRpb25cIiwge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBhY3RpdmU6IDAsXG4gICAgICAgICAgICBhbmltYXRlOiB7fSxcbiAgICAgICAgICAgIGNvbGxhcHNpYmxlOiAhMSxcbiAgICAgICAgICAgIGV2ZW50OiBcImNsaWNrXCIsXG4gICAgICAgICAgICBoZWFkZXI6IFwiPiBsaSA+IDpmaXJzdC1jaGlsZCw+IDpub3QobGkpOmV2ZW5cIixcbiAgICAgICAgICAgIGhlaWdodFN0eWxlOiBcImF1dG9cIixcbiAgICAgICAgICAgIGljb25zOiB7YWN0aXZlSGVhZGVyOiBcInVpLWljb24tdHJpYW5nbGUtMS1zXCIsIGhlYWRlcjogXCJ1aS1pY29uLXRyaWFuZ2xlLTEtZVwifSxcbiAgICAgICAgICAgIGFjdGl2YXRlOiBudWxsLFxuICAgICAgICAgICAgYmVmb3JlQWN0aXZhdGU6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgaGlkZVByb3BzOiB7XG4gICAgICAgICAgICBib3JkZXJUb3BXaWR0aDogXCJoaWRlXCIsXG4gICAgICAgICAgICBib3JkZXJCb3R0b21XaWR0aDogXCJoaWRlXCIsXG4gICAgICAgICAgICBwYWRkaW5nVG9wOiBcImhpZGVcIixcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IFwiaGlkZVwiLFxuICAgICAgICAgICAgaGVpZ2h0OiBcImhpZGVcIlxuICAgICAgICB9LFxuICAgICAgICBzaG93UHJvcHM6IHtcbiAgICAgICAgICAgIGJvcmRlclRvcFdpZHRoOiBcInNob3dcIixcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbVdpZHRoOiBcInNob3dcIixcbiAgICAgICAgICAgIHBhZGRpbmdUb3A6IFwic2hvd1wiLFxuICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogXCJzaG93XCIsXG4gICAgICAgICAgICBoZWlnaHQ6IFwic2hvd1wiXG4gICAgICAgIH0sXG4gICAgICAgIF9jcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5wcmV2U2hvdyA9IHRoaXMucHJldkhpZGUgPSBlKCksIHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWFjY29yZGlvbiB1aS13aWRnZXQgdWktaGVscGVyLXJlc2V0XCIpLmF0dHIoXCJyb2xlXCIsIFwidGFibGlzdFwiKSwgdC5jb2xsYXBzaWJsZSB8fCB0LmFjdGl2ZSAhPT0gITEgJiYgbnVsbCAhPSB0LmFjdGl2ZSB8fCAodC5hY3RpdmUgPSAwKSwgdGhpcy5fcHJvY2Vzc1BhbmVscygpLCAwID4gdC5hY3RpdmUgJiYgKHQuYWN0aXZlICs9IHRoaXMuaGVhZGVycy5sZW5ndGgpLCB0aGlzLl9yZWZyZXNoKClcbiAgICAgICAgfSxcbiAgICAgICAgX2dldENyZWF0ZUV2ZW50RGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtoZWFkZXI6IHRoaXMuYWN0aXZlLCBwYW5lbDogdGhpcy5hY3RpdmUubGVuZ3RoID8gdGhpcy5hY3RpdmUubmV4dCgpIDogZSgpfVxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlSWNvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vcHRpb25zLmljb25zO1xuICAgICAgICAgICAgdCAmJiAoZShcIjxzcGFuPlwiKS5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXItaWNvbiB1aS1pY29uIFwiICsgdC5oZWFkZXIpLnByZXBlbmRUbyh0aGlzLmhlYWRlcnMpLCB0aGlzLmFjdGl2ZS5jaGlsZHJlbihcIi51aS1hY2NvcmRpb24taGVhZGVyLWljb25cIikucmVtb3ZlQ2xhc3ModC5oZWFkZXIpLmFkZENsYXNzKHQuYWN0aXZlSGVhZGVyKSwgdGhpcy5oZWFkZXJzLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWljb25zXCIpKVxuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveUljb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnMucmVtb3ZlQ2xhc3MoXCJ1aS1hY2NvcmRpb24taWNvbnNcIikuY2hpbGRyZW4oXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIpLnJlbW92ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLWFjY29yZGlvbiB1aS13aWRnZXQgdWktaGVscGVyLXJlc2V0XCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLCB0aGlzLmhlYWRlcnMucmVtb3ZlQ2xhc3MoXCJ1aS1hY2NvcmRpb24taGVhZGVyIHVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgdWktY29ybmVyLXRvcFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1leHBhbmRlZFwiKS5yZW1vdmVBdHRyKFwiYXJpYS1zZWxlY3RlZFwiKS5yZW1vdmVBdHRyKFwiYXJpYS1jb250cm9sc1wiKS5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIikucmVtb3ZlVW5pcXVlSWQoKSwgdGhpcy5fZGVzdHJveUljb25zKCksIGUgPSB0aGlzLmhlYWRlcnMubmV4dCgpLnJlbW92ZUNsYXNzKFwidWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20gdWktYWNjb3JkaW9uLWNvbnRlbnQgdWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIikucmVtb3ZlVW5pcXVlSWQoKSwgXCJjb250ZW50XCIgIT09IHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSAmJiBlLmNzcyhcImhlaWdodFwiLCBcIlwiKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCIgPT09IGUgPyAodGhpcy5fYWN0aXZhdGUodCksIHZvaWQgMCkgOiAoXCJldmVudFwiID09PSBlICYmICh0aGlzLm9wdGlvbnMuZXZlbnQgJiYgdGhpcy5fb2ZmKHRoaXMuaGVhZGVycywgdGhpcy5vcHRpb25zLmV2ZW50KSwgdGhpcy5fc2V0dXBFdmVudHModCkpLCB0aGlzLl9zdXBlcihlLCB0KSwgXCJjb2xsYXBzaWJsZVwiICE9PSBlIHx8IHQgfHwgdGhpcy5vcHRpb25zLmFjdGl2ZSAhPT0gITEgfHwgdGhpcy5fYWN0aXZhdGUoMCksIFwiaWNvbnNcIiA9PT0gZSAmJiAodGhpcy5fZGVzdHJveUljb25zKCksIHQgJiYgdGhpcy5fY3JlYXRlSWNvbnMoKSksIFwiZGlzYWJsZWRcIiA9PT0gZSAmJiAodGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiwgISF0KS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCB0KSwgdGhpcy5oZWFkZXJzLmFkZCh0aGlzLmhlYWRlcnMubmV4dCgpKS50b2dnbGVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhdCkpLCB2b2lkIDApXG4gICAgICAgIH0sXG4gICAgICAgIF9rZXlkb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgaWYgKCF0LmFsdEtleSAmJiAhdC5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBlLnVpLmtleUNvZGUsIHMgPSB0aGlzLmhlYWRlcnMubGVuZ3RoLCBuID0gdGhpcy5oZWFkZXJzLmluZGV4KHQudGFyZ2V0KSwgYSA9ICExO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaS5SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpLkRPV046XG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5oZWFkZXJzWyhuICsgMSkgJSBzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGkuTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpLlVQOlxuICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuaGVhZGVyc1sobiAtIDEgKyBzKSAlIHNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaS5TUEFDRTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpLkVOVEVSOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRIYW5kbGVyKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaS5IT01FOlxuICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuaGVhZGVyc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGkuRU5EOlxuICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuaGVhZGVyc1tzIC0gMV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYSAmJiAoZSh0LnRhcmdldCkuYXR0cihcInRhYkluZGV4XCIsIC0xKSwgZShhKS5hdHRyKFwidGFiSW5kZXhcIiwgMCksIGEuZm9jdXMoKSwgdC5wcmV2ZW50RGVmYXVsdCgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfcGFuZWxLZXlEb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5rZXlDb2RlID09PSBlLnVpLmtleUNvZGUuVVAgJiYgdC5jdHJsS2V5ICYmIGUodC5jdXJyZW50VGFyZ2V0KS5wcmV2KCkuZm9jdXMoKVxuICAgICAgICB9LFxuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NQYW5lbHMoKSwgdC5hY3RpdmUgPT09ICExICYmIHQuY29sbGFwc2libGUgPT09ICEwIHx8ICF0aGlzLmhlYWRlcnMubGVuZ3RoID8gKHQuYWN0aXZlID0gITEsIHRoaXMuYWN0aXZlID0gZSgpKSA6IHQuYWN0aXZlID09PSAhMSA/IHRoaXMuX2FjdGl2YXRlKDApIDogdGhpcy5hY3RpdmUubGVuZ3RoICYmICFlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSwgdGhpcy5hY3RpdmVbMF0pID8gdGhpcy5oZWFkZXJzLmxlbmd0aCA9PT0gdGhpcy5oZWFkZXJzLmZpbmQoXCIudWktc3RhdGUtZGlzYWJsZWRcIikubGVuZ3RoID8gKHQuYWN0aXZlID0gITEsIHRoaXMuYWN0aXZlID0gZSgpKSA6IHRoaXMuX2FjdGl2YXRlKE1hdGgubWF4KDAsIHQuYWN0aXZlIC0gMSkpIDogdC5hY3RpdmUgPSB0aGlzLmhlYWRlcnMuaW5kZXgodGhpcy5hY3RpdmUpLCB0aGlzLl9kZXN0cm95SWNvbnMoKSwgdGhpcy5fcmVmcmVzaCgpXG4gICAgICAgIH0sXG4gICAgICAgIF9wcm9jZXNzUGFuZWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMuaGVhZGVycywgdCA9IHRoaXMucGFuZWxzO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzID0gdGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhlYWRlcikuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24taGVhZGVyIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbFwiKSwgdGhpcy5wYW5lbHMgPSB0aGlzLmhlYWRlcnMubmV4dCgpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWNvbnRlbnQgdWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIikuZmlsdGVyKFwiOm5vdCgudWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlKVwiKS5oaWRlKCksIHQgJiYgKHRoaXMuX29mZihlLm5vdCh0aGlzLmhlYWRlcnMpKSwgdGhpcy5fb2ZmKHQubm90KHRoaXMucGFuZWxzKSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9yZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSA9IHRoaXMub3B0aW9ucywgcyA9IGkuaGVpZ2h0U3R5bGUsIG4gPSB0aGlzLmVsZW1lbnQucGFyZW50KCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoaS5hY3RpdmUpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIHVpLWNvcm5lci10b3BcIikucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsXCIpLCB0aGlzLmFjdGl2ZS5uZXh0KCkuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmVcIikuc2hvdygpLCB0aGlzLmhlYWRlcnMuYXR0cihcInJvbGVcIiwgXCJ0YWJcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLCBpID0gdC51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKSwgcyA9IHQubmV4dCgpLCBuID0gcy51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKTtcbiAgICAgICAgICAgICAgICB0LmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsIG4pLCBzLmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIiwgaSlcbiAgICAgICAgICAgIH0pLm5leHQoKS5hdHRyKFwicm9sZVwiLCBcInRhYnBhbmVsXCIpLCB0aGlzLmhlYWRlcnMubm90KHRoaXMuYWN0aXZlKS5hdHRyKHtcbiAgICAgICAgICAgICAgICBcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg6IC0xXG4gICAgICAgICAgICB9KS5uZXh0KCkuYXR0cih7XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIn0pLmhpZGUoKSwgdGhpcy5hY3RpdmUubGVuZ3RoID8gdGhpcy5hY3RpdmUuYXR0cih7XG4gICAgICAgICAgICAgICAgXCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogMFxuICAgICAgICAgICAgfSkubmV4dCgpLmF0dHIoe1wiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwifSkgOiB0aGlzLmhlYWRlcnMuZXEoMCkuYXR0cihcInRhYkluZGV4XCIsIDApLCB0aGlzLl9jcmVhdGVJY29ucygpLCB0aGlzLl9zZXR1cEV2ZW50cyhpLmV2ZW50KSwgXCJmaWxsXCIgPT09IHMgPyAodCA9IG4uaGVpZ2h0KCksIHRoaXMuZWxlbWVudC5zaWJsaW5ncyhcIjp2aXNpYmxlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZSh0aGlzKSwgcyA9IGkuY3NzKFwicG9zaXRpb25cIik7XG4gICAgICAgICAgICAgICAgXCJhYnNvbHV0ZVwiICE9PSBzICYmIFwiZml4ZWRcIiAhPT0gcyAmJiAodCAtPSBpLm91dGVySGVpZ2h0KCEwKSlcbiAgICAgICAgICAgIH0pLCB0aGlzLmhlYWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdCAtPSBlKHRoaXMpLm91dGVySGVpZ2h0KCEwKVxuICAgICAgICAgICAgfSksIHRoaXMuaGVhZGVycy5uZXh0KCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5oZWlnaHQoTWF0aC5tYXgoMCwgdCAtIGUodGhpcykuaW5uZXJIZWlnaHQoKSArIGUodGhpcykuaGVpZ2h0KCkpKVxuICAgICAgICAgICAgfSkuY3NzKFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIpKSA6IFwiYXV0b1wiID09PSBzICYmICh0ID0gMCwgdGhpcy5oZWFkZXJzLm5leHQoKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0ID0gTWF0aC5tYXgodCwgZSh0aGlzKS5jc3MoXCJoZWlnaHRcIiwgXCJcIikuaGVpZ2h0KCkpXG4gICAgICAgICAgICB9KS5oZWlnaHQodCkpXG4gICAgICAgIH0sXG4gICAgICAgIF9hY3RpdmF0ZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5fZmluZEFjdGl2ZSh0KVswXTtcbiAgICAgICAgICAgIGkgIT09IHRoaXMuYWN0aXZlWzBdICYmIChpID0gaSB8fCB0aGlzLmFjdGl2ZVswXSwgdGhpcy5fZXZlbnRIYW5kbGVyKHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGksXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogaSxcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZS5ub29wXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfSxcbiAgICAgICAgX2ZpbmRBY3RpdmU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHRoaXMuaGVhZGVycy5lcSh0KSA6IGUoKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0dXBFdmVudHM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHtrZXlkb3duOiBcIl9rZXlkb3duXCJ9O1xuICAgICAgICAgICAgdCAmJiBlLmVhY2godC5zcGxpdChcIiBcIiksIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgaVt0XSA9IFwiX2V2ZW50SGFuZGxlclwiXG4gICAgICAgICAgICB9KSwgdGhpcy5fb2ZmKHRoaXMuaGVhZGVycy5hZGQodGhpcy5oZWFkZXJzLm5leHQoKSkpLCB0aGlzLl9vbih0aGlzLmhlYWRlcnMsIGkpLCB0aGlzLl9vbih0aGlzLmhlYWRlcnMubmV4dCgpLCB7a2V5ZG93bjogXCJfcGFuZWxLZXlEb3duXCJ9KSwgdGhpcy5faG92ZXJhYmxlKHRoaXMuaGVhZGVycyksIHRoaXMuX2ZvY3VzYWJsZSh0aGlzLmhlYWRlcnMpXG4gICAgICAgIH0sXG4gICAgICAgIF9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMub3B0aW9ucywgcyA9IHRoaXMuYWN0aXZlLCBuID0gZSh0LmN1cnJlbnRUYXJnZXQpLCBhID0gblswXSA9PT0gc1swXSwgbyA9IGEgJiYgaS5jb2xsYXBzaWJsZSxcbiAgICAgICAgICAgICAgICByID0gbyA/IGUoKSA6IG4ubmV4dCgpLCBoID0gcy5uZXh0KCksXG4gICAgICAgICAgICAgICAgbCA9IHtvbGRIZWFkZXI6IHMsIG9sZFBhbmVsOiBoLCBuZXdIZWFkZXI6IG8gPyBlKCkgOiBuLCBuZXdQYW5lbDogcn07XG4gICAgICAgICAgICB0LnByZXZlbnREZWZhdWx0KCksIGEgJiYgIWkuY29sbGFwc2libGUgfHwgdGhpcy5fdHJpZ2dlcihcImJlZm9yZUFjdGl2YXRlXCIsIHQsIGwpID09PSAhMSB8fCAoaS5hY3RpdmUgPSBvID8gITEgOiB0aGlzLmhlYWRlcnMuaW5kZXgobiksIHRoaXMuYWN0aXZlID0gYSA/IGUoKSA6IG4sIHRoaXMuX3RvZ2dsZShsKSwgcy5yZW1vdmVDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiKSwgaS5pY29ucyAmJiBzLmNoaWxkcmVuKFwiLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvblwiKS5yZW1vdmVDbGFzcyhpLmljb25zLmFjdGl2ZUhlYWRlcikuYWRkQ2xhc3MoaS5pY29ucy5oZWFkZXIpLCBhIHx8IChuLnJlbW92ZUNsYXNzKFwidWktY29ybmVyLWFsbFwiKS5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wXCIpLCBpLmljb25zICYmIG4uY2hpbGRyZW4oXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIpLnJlbW92ZUNsYXNzKGkuaWNvbnMuaGVhZGVyKS5hZGRDbGFzcyhpLmljb25zLmFjdGl2ZUhlYWRlciksIG4ubmV4dCgpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlXCIpKSlcbiAgICAgICAgfSxcbiAgICAgICAgX3RvZ2dsZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdC5uZXdQYW5lbCwgcyA9IHRoaXMucHJldlNob3cubGVuZ3RoID8gdGhpcy5wcmV2U2hvdyA6IHQub2xkUGFuZWw7XG4gICAgICAgICAgICB0aGlzLnByZXZTaG93LmFkZCh0aGlzLnByZXZIaWRlKS5zdG9wKCEwLCAhMCksIHRoaXMucHJldlNob3cgPSBpLCB0aGlzLnByZXZIaWRlID0gcywgdGhpcy5vcHRpb25zLmFuaW1hdGUgPyB0aGlzLl9hbmltYXRlKGksIHMsIHQpIDogKHMuaGlkZSgpLCBpLnNob3coKSwgdGhpcy5fdG9nZ2xlQ29tcGxldGUodCkpLCBzLmF0dHIoe1wiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJ9KSwgcy5wcmV2KCkuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiKSwgaS5sZW5ndGggJiYgcy5sZW5ndGggPyBzLnByZXYoKS5hdHRyKHtcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgXCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIlxuICAgICAgICAgICAgfSkgOiBpLmxlbmd0aCAmJiB0aGlzLmhlYWRlcnMuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gZSh0aGlzKS5hdHRyKFwidGFiSW5kZXhcIilcbiAgICAgICAgICAgIH0pLmF0dHIoXCJ0YWJJbmRleFwiLCAtMSksIGkuYXR0cihcImFyaWEtaGlkZGVuXCIsIFwiZmFsc2VcIikucHJldigpLmF0dHIoe1xuICAgICAgICAgICAgICAgIFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogMCxcbiAgICAgICAgICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9hbmltYXRlOiBmdW5jdGlvbiAoZSwgdCwgaSkge1xuICAgICAgICAgICAgdmFyIHMsIG4sIGEsIG8gPSB0aGlzLCByID0gMCwgaCA9IGUubGVuZ3RoICYmICghdC5sZW5ndGggfHwgZS5pbmRleCgpIDwgdC5pbmRleCgpKSxcbiAgICAgICAgICAgICAgICBsID0gdGhpcy5vcHRpb25zLmFuaW1hdGUgfHwge30sIHUgPSBoICYmIGwuZG93biB8fCBsLCBkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvLl90b2dnbGVDb21wbGV0ZShpKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdSAmJiAoYSA9IHUpLCBcInN0cmluZ1wiID09IHR5cGVvZiB1ICYmIChuID0gdSksIG4gPSBuIHx8IHUuZWFzaW5nIHx8IGwuZWFzaW5nLCBhID0gYSB8fCB1LmR1cmF0aW9uIHx8IGwuZHVyYXRpb24sIHQubGVuZ3RoID8gZS5sZW5ndGggPyAocyA9IGUuc2hvdygpLm91dGVySGVpZ2h0KCksIHQuYW5pbWF0ZSh0aGlzLmhpZGVQcm9wcywge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBhLFxuICAgICAgICAgICAgICAgIGVhc2luZzogbixcbiAgICAgICAgICAgICAgICBzdGVwOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICB0Lm5vdyA9IE1hdGgucm91bmQoZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgZS5oaWRlKCkuYW5pbWF0ZSh0aGlzLnNob3dQcm9wcywge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBhLCBlYXNpbmc6IG4sIGNvbXBsZXRlOiBkLCBzdGVwOiBmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgICAgICAgICAgICBpLm5vdyA9IE1hdGgucm91bmQoZSksIFwiaGVpZ2h0XCIgIT09IGkucHJvcCA/IHIgKz0gaS5ub3cgOiBcImNvbnRlbnRcIiAhPT0gby5vcHRpb25zLmhlaWdodFN0eWxlICYmIChpLm5vdyA9IE1hdGgucm91bmQocyAtIHQub3V0ZXJIZWlnaHQoKSAtIHIpLCByID0gMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgdm9pZCAwKSA6IHQuYW5pbWF0ZSh0aGlzLmhpZGVQcm9wcywgYSwgbiwgZCkgOiBlLmFuaW1hdGUodGhpcy5zaG93UHJvcHMsIGEsIG4sIGQpXG4gICAgICAgIH0sXG4gICAgICAgIF90b2dnbGVDb21wbGV0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gZS5vbGRQYW5lbDtcbiAgICAgICAgICAgIHQucmVtb3ZlQ2xhc3MoXCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmVcIikucHJldigpLnJlbW92ZUNsYXNzKFwidWktY29ybmVyLXRvcFwiKS5hZGRDbGFzcyhcInVpLWNvcm5lci1hbGxcIiksIHQubGVuZ3RoICYmICh0LnBhcmVudCgpWzBdLmNsYXNzTmFtZSA9IHQucGFyZW50KClbMF0uY2xhc3NOYW1lKSwgdGhpcy5fdHJpZ2dlcihcImFjdGl2YXRlXCIsIG51bGwsIGUpXG4gICAgICAgIH1cbiAgICB9KSwgZS53aWRnZXQoXCJ1aS5tZW51XCIsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgZGVmYXVsdEVsZW1lbnQ6IFwiPHVsPlwiLFxuICAgICAgICBkZWxheTogMzAwLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBpY29uczoge3N1Ym1lbnU6IFwidWktaWNvbi1jYXJhdC0xLWVcIn0sXG4gICAgICAgICAgICBpdGVtczogXCI+ICpcIixcbiAgICAgICAgICAgIG1lbnVzOiBcInVsXCIsXG4gICAgICAgICAgICBwb3NpdGlvbjoge215OiBcImxlZnQtMSB0b3BcIiwgYXQ6IFwicmlnaHQgdG9wXCJ9LFxuICAgICAgICAgICAgcm9sZTogXCJtZW51XCIsXG4gICAgICAgICAgICBibHVyOiBudWxsLFxuICAgICAgICAgICAgZm9jdXM6IG51bGwsXG4gICAgICAgICAgICBzZWxlY3Q6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVNZW51ID0gdGhpcy5lbGVtZW50LCB0aGlzLm1vdXNlSGFuZGxlZCA9ICExLCB0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hZGRDbGFzcyhcInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50XCIpLnRvZ2dsZUNsYXNzKFwidWktbWVudS1pY29uc1wiLCAhIXRoaXMuZWxlbWVudC5maW5kKFwiLnVpLWljb25cIikubGVuZ3RoKS5hdHRyKHtcbiAgICAgICAgICAgICAgICByb2xlOiB0aGlzLm9wdGlvbnMucm9sZSxcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogMFxuICAgICAgICAgICAgfSksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCBcInRydWVcIiksIHRoaXMuX29uKHtcbiAgICAgICAgICAgICAgICBcIm1vdXNlZG93biAudWktbWVudS1pdGVtXCI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIH0sIFwiY2xpY2sgLnVpLW1lbnUtaXRlbVwiOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUodC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAhdGhpcy5tb3VzZUhhbmRsZWQgJiYgaS5ub3QoXCIudWktc3RhdGUtZGlzYWJsZWRcIikubGVuZ3RoICYmICh0aGlzLnNlbGVjdCh0KSwgdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpIHx8ICh0aGlzLm1vdXNlSGFuZGxlZCA9ICEwKSwgaS5oYXMoXCIudWktbWVudVwiKS5sZW5ndGggPyB0aGlzLmV4cGFuZCh0KSA6ICF0aGlzLmVsZW1lbnQuaXMoXCI6Zm9jdXNcIikgJiYgZSh0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQpLmNsb3Nlc3QoXCIudWktbWVudVwiKS5sZW5ndGggJiYgKHRoaXMuZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIiwgWyEwXSksIHRoaXMuYWN0aXZlICYmIDEgPT09IHRoaXMuYWN0aXZlLnBhcmVudHMoXCIudWktbWVudVwiKS5sZW5ndGggJiYgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpKSlcbiAgICAgICAgICAgICAgICB9LCBcIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbVwiOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJldmlvdXNGaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZSh0LmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaS5zaWJsaW5ncyhcIi51aS1zdGF0ZS1hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksIHRoaXMuZm9jdXModCwgaSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIG1vdXNlbGVhdmU6IFwiY29sbGFwc2VBbGxcIiwgXCJtb3VzZWxlYXZlIC51aS1tZW51XCI6IFwiY29sbGFwc2VBbGxcIiwgZm9jdXM6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5hY3RpdmUgfHwgdGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5lcSgwKTtcbiAgICAgICAgICAgICAgICAgICAgdCB8fCB0aGlzLmZvY3VzKGUsIGkpXG4gICAgICAgICAgICAgICAgfSwgYmx1cjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sIHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkgfHwgdGhpcy5jb2xsYXBzZUFsbCh0KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIGtleWRvd246IFwiX2tleWRvd25cIlxuICAgICAgICAgICAgfSksIHRoaXMucmVmcmVzaCgpLCB0aGlzLl9vbih0aGlzLmRvY3VtZW50LCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nsb3NlT25Eb2N1bWVudENsaWNrKGUpICYmIHRoaXMuY29sbGFwc2VBbGwoZSksIHRoaXMubW91c2VIYW5kbGVkID0gITFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikuZmluZChcIi51aS1tZW51XCIpLmFkZEJhY2soKS5yZW1vdmVDbGFzcyhcInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtaWNvbnMgdWktZnJvbnRcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLnJlbW92ZUF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIikucmVtb3ZlQXR0cihcImFyaWEtZXhwYW5kZWRcIikucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWRpc2FibGVkXCIpLnJlbW92ZVVuaXF1ZUlkKCkuc2hvdygpLCB0aGlzLmVsZW1lbnQuZmluZChcIi51aS1tZW51LWl0ZW1cIikucmVtb3ZlQ2xhc3MoXCJ1aS1tZW51LWl0ZW1cIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcImFyaWEtZGlzYWJsZWRcIikucmVtb3ZlVW5pcXVlSWQoKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oYXNwb3B1cFwiKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB0LmRhdGEoXCJ1aS1tZW51LXN1Ym1lbnUtY2FyYXRcIikgJiYgdC5yZW1vdmUoKVxuICAgICAgICAgICAgfSksIHRoaXMuZWxlbWVudC5maW5kKFwiLnVpLW1lbnUtZGl2aWRlclwiKS5yZW1vdmVDbGFzcyhcInVpLW1lbnUtZGl2aWRlciB1aS13aWRnZXQtY29udGVudFwiKVxuICAgICAgICB9LFxuICAgICAgICBfa2V5ZG93bjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuLCBhLCBvID0gITA7XG4gICAgICAgICAgICBzd2l0Y2ggKHQua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLlBBR0VfVVA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQYWdlKHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5QQUdFX0RPV046XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFBhZ2UodCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLkhPTUU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmUoXCJmaXJzdFwiLCBcImZpcnN0XCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5FTkQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmUoXCJsYXN0XCIsIFwibGFzdFwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuVVA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXModCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLkRPV046XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dCh0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlICYmICF0aGlzLmFjdGl2ZS5pcyhcIi51aS1zdGF0ZS1kaXNhYmxlZFwiKSAmJiB0aGlzLmV4cGFuZCh0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuRU5URVI6XG4gICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuU1BBQ0U6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5FU0NBUEU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UodCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIG8gPSAhMSwgcyA9IHRoaXMucHJldmlvdXNGaWx0ZXIgfHwgXCJcIiwgbiA9IFN0cmluZy5mcm9tQ2hhckNvZGUodC5rZXlDb2RlKSwgYSA9ICExLCBjbGVhclRpbWVvdXQodGhpcy5maWx0ZXJUaW1lciksIG4gPT09IHMgPyBhID0gITAgOiBuID0gcyArIG4sIGkgPSB0aGlzLl9maWx0ZXJNZW51SXRlbXMobiksIGkgPSBhICYmIC0xICE9PSBpLmluZGV4KHRoaXMuYWN0aXZlLm5leHQoKSkgPyB0aGlzLmFjdGl2ZS5uZXh0QWxsKFwiLnVpLW1lbnUtaXRlbVwiKSA6IGksIGkubGVuZ3RoIHx8IChuID0gU3RyaW5nLmZyb21DaGFyQ29kZSh0LmtleUNvZGUpLCBpID0gdGhpcy5fZmlsdGVyTWVudUl0ZW1zKG4pKSwgaS5sZW5ndGggPyAodGhpcy5mb2N1cyh0LCBpKSwgdGhpcy5wcmV2aW91c0ZpbHRlciA9IG4sIHRoaXMuZmlsdGVyVGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlclxuICAgICAgICAgICAgICAgICAgICB9LCAxZTMpKSA6IGRlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvICYmIHQucHJldmVudERlZmF1bHQoKVxuICAgICAgICB9LFxuICAgICAgICBfYWN0aXZhdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZS5pcyhcIi51aS1zdGF0ZS1kaXNhYmxlZFwiKSB8fCAodGhpcy5hY3RpdmUuaXMoXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddXCIpID8gdGhpcy5leHBhbmQoZSkgOiB0aGlzLnNlbGVjdChlKSlcbiAgICAgICAgfSxcbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMgPSB0aGlzLCBuID0gdGhpcy5vcHRpb25zLmljb25zLnN1Ym1lbnUsIGEgPSB0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMubWVudXMpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWktbWVudS1pY29uc1wiLCAhIXRoaXMuZWxlbWVudC5maW5kKFwiLnVpLWljb25cIikubGVuZ3RoKSwgYS5maWx0ZXIoXCI6bm90KC51aS1tZW51KVwiKS5hZGRDbGFzcyhcInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWZyb250XCIpLmhpZGUoKS5hdHRyKHtcbiAgICAgICAgICAgICAgICByb2xlOiB0aGlzLm9wdGlvbnMucm9sZSxcbiAgICAgICAgICAgICAgICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCJcbiAgICAgICAgICAgIH0pLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKSwgaSA9IHQucGFyZW50KCksXG4gICAgICAgICAgICAgICAgICAgIHMgPSBlKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwidWktbWVudS1pY29uIHVpLWljb24gXCIgKyBuKS5kYXRhKFwidWktbWVudS1zdWJtZW51LWNhcmF0XCIsICEwKTtcbiAgICAgICAgICAgICAgICBpLmF0dHIoXCJhcmlhLWhhc3BvcHVwXCIsIFwidHJ1ZVwiKS5wcmVwZW5kKHMpLCB0LmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIiwgaS5hdHRyKFwiaWRcIikpXG4gICAgICAgICAgICB9KSwgdCA9IGEuYWRkKHRoaXMuZWxlbWVudCksIGkgPSB0LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKSwgaS5ub3QoXCIudWktbWVudS1pdGVtXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBzLl9pc0RpdmlkZXIodCkgJiYgdC5hZGRDbGFzcyhcInVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtZGl2aWRlclwiKVxuICAgICAgICAgICAgfSksIGkubm90KFwiLnVpLW1lbnUtaXRlbSwgLnVpLW1lbnUtZGl2aWRlclwiKS5hZGRDbGFzcyhcInVpLW1lbnUtaXRlbVwiKS51bmlxdWVJZCgpLmF0dHIoe1xuICAgICAgICAgICAgICAgIHRhYkluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICByb2xlOiB0aGlzLl9pdGVtUm9sZSgpXG4gICAgICAgICAgICB9KSwgaS5maWx0ZXIoXCIudWktc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpLCB0aGlzLmFjdGl2ZSAmJiAhZS5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sIHRoaXMuYWN0aXZlWzBdKSAmJiB0aGlzLmJsdXIoKVxuICAgICAgICB9LFxuICAgICAgICBfaXRlbVJvbGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7bWVudTogXCJtZW51aXRlbVwiLCBsaXN0Ym94OiBcIm9wdGlvblwifVt0aGlzLm9wdGlvbnMucm9sZV1cbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIFwiaWNvbnNcIiA9PT0gZSAmJiB0aGlzLmVsZW1lbnQuZmluZChcIi51aS1tZW51LWljb25cIikucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmljb25zLnN1Ym1lbnUpLmFkZENsYXNzKHQuc3VibWVudSksIFwiZGlzYWJsZWRcIiA9PT0gZSAmJiB0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIXQpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsIHQpLCB0aGlzLl9zdXBlcihlLCB0KVxuICAgICAgICB9LFxuICAgICAgICBmb2N1czogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzO1xuICAgICAgICAgICAgdGhpcy5ibHVyKGUsIGUgJiYgXCJmb2N1c1wiID09PSBlLnR5cGUpLCB0aGlzLl9zY3JvbGxJbnRvVmlldyh0KSwgdGhpcy5hY3RpdmUgPSB0LmZpcnN0KCksIHMgPSB0aGlzLmFjdGl2ZS5hZGRDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLCB0aGlzLm9wdGlvbnMucm9sZSAmJiB0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLCBzLmF0dHIoXCJpZFwiKSksIHRoaXMuYWN0aXZlLnBhcmVudCgpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLCBlICYmIFwia2V5ZG93blwiID09PSBlLnR5cGUgPyB0aGlzLl9jbG9zZSgpIDogdGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZSgpXG4gICAgICAgICAgICB9LCB0aGlzLmRlbGF5KSwgaSA9IHQuY2hpbGRyZW4oXCIudWktbWVudVwiKSwgaS5sZW5ndGggJiYgZSAmJiAvXm1vdXNlLy50ZXN0KGUudHlwZSkgJiYgdGhpcy5fc3RhcnRPcGVuaW5nKGkpLCB0aGlzLmFjdGl2ZU1lbnUgPSB0LnBhcmVudCgpLCB0aGlzLl90cmlnZ2VyKFwiZm9jdXNcIiwgZSwge2l0ZW06IHR9KVxuICAgICAgICB9LFxuICAgICAgICBfc2Nyb2xsSW50b1ZpZXc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiwgYSwgbywgcjtcbiAgICAgICAgICAgIHRoaXMuX2hhc1Njcm9sbCgpICYmIChpID0gcGFyc2VGbG9hdChlLmNzcyh0aGlzLmFjdGl2ZU1lbnVbMF0sIFwiYm9yZGVyVG9wV2lkdGhcIikpIHx8IDAsIHMgPSBwYXJzZUZsb2F0KGUuY3NzKHRoaXMuYWN0aXZlTWVudVswXSwgXCJwYWRkaW5nVG9wXCIpKSB8fCAwLCBuID0gdC5vZmZzZXQoKS50b3AgLSB0aGlzLmFjdGl2ZU1lbnUub2Zmc2V0KCkudG9wIC0gaSAtIHMsIGEgPSB0aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKCksIG8gPSB0aGlzLmFjdGl2ZU1lbnUuaGVpZ2h0KCksIHIgPSB0Lm91dGVySGVpZ2h0KCksIDAgPiBuID8gdGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChhICsgbikgOiBuICsgciA+IG8gJiYgdGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChhICsgbiAtIG8gKyByKSlcbiAgICAgICAgfSxcbiAgICAgICAgYmx1cjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHQgfHwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLCB0aGlzLmFjdGl2ZSAmJiAodGhpcy5hY3RpdmUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKSwgdGhpcy5hY3RpdmUgPSBudWxsLCB0aGlzLl90cmlnZ2VyKFwiYmx1clwiLCBlLCB7aXRlbTogdGhpcy5hY3RpdmV9KSlcbiAgICAgICAgfSxcbiAgICAgICAgX3N0YXJ0T3BlbmluZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSwgXCJ0cnVlXCIgPT09IGUuYXR0cihcImFyaWEtaGlkZGVuXCIpICYmICh0aGlzLnRpbWVyID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Nsb3NlKCksIHRoaXMuX29wZW4oZSlcbiAgICAgICAgICAgIH0sIHRoaXMuZGVsYXkpKVxuICAgICAgICB9LFxuICAgICAgICBfb3BlbjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gZS5leHRlbmQoe29mOiB0aGlzLmFjdGl2ZX0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lciksIHRoaXMuZWxlbWVudC5maW5kKFwiLnVpLW1lbnVcIikubm90KHQucGFyZW50cyhcIi51aS1tZW51XCIpKS5oaWRlKCkuYXR0cihcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKSwgdC5zaG93KCkucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiKS5wb3NpdGlvbihpKVxuICAgICAgICB9LFxuICAgICAgICBjb2xsYXBzZUFsbDogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSwgdGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGkgPyB0aGlzLmVsZW1lbnQgOiBlKHQgJiYgdC50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQoXCIudWktbWVudVwiKSk7XG4gICAgICAgICAgICAgICAgcy5sZW5ndGggfHwgKHMgPSB0aGlzLmVsZW1lbnQpLCB0aGlzLl9jbG9zZShzKSwgdGhpcy5ibHVyKHQpLCB0aGlzLmFjdGl2ZU1lbnUgPSBzXG4gICAgICAgICAgICB9LCB0aGlzLmRlbGF5KVxuICAgICAgICB9LFxuICAgICAgICBfY2xvc2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlIHx8IChlID0gdGhpcy5hY3RpdmUgPyB0aGlzLmFjdGl2ZS5wYXJlbnQoKSA6IHRoaXMuZWxlbWVudCksIGUuZmluZChcIi51aS1tZW51XCIpLmhpZGUoKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIFwiZmFsc2VcIikuZW5kKCkuZmluZChcIi51aS1zdGF0ZS1hY3RpdmVcIikubm90KFwiLnVpLXN0YXRlLWZvY3VzXCIpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9jbG9zZU9uRG9jdW1lbnRDbGljazogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAhZSh0LnRhcmdldCkuY2xvc2VzdChcIi51aS1tZW51XCIpLmxlbmd0aFxuICAgICAgICB9LFxuICAgICAgICBfaXNEaXZpZGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEvW15cXC1cXHUyMDE0XFx1MjAxM1xcc10vLnRlc3QoZS50ZXh0KCkpXG4gICAgICAgIH0sXG4gICAgICAgIGNvbGxhcHNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmFjdGl2ZSAmJiB0aGlzLmFjdGl2ZS5wYXJlbnQoKS5jbG9zZXN0KFwiLnVpLW1lbnUtaXRlbVwiLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdCAmJiB0Lmxlbmd0aCAmJiAodGhpcy5fY2xvc2UoKSwgdGhpcy5mb2N1cyhlLCB0KSlcbiAgICAgICAgfSxcbiAgICAgICAgZXhwYW5kOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmFjdGl2ZSAmJiB0aGlzLmFjdGl2ZS5jaGlsZHJlbihcIi51aS1tZW51IFwiKS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlyc3QoKTtcbiAgICAgICAgICAgIHQgJiYgdC5sZW5ndGggJiYgKHRoaXMuX29wZW4odC5wYXJlbnQoKSksIHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKGUsIHQpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdmUoXCJuZXh0XCIsIFwiZmlyc3RcIiwgZSlcbiAgICAgICAgfSxcbiAgICAgICAgcHJldmlvdXM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9tb3ZlKFwicHJldlwiLCBcImxhc3RcIiwgZSlcbiAgICAgICAgfSxcbiAgICAgICAgaXNGaXJzdEl0ZW06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZSAmJiAhdGhpcy5hY3RpdmUucHJldkFsbChcIi51aS1tZW51LWl0ZW1cIikubGVuZ3RoXG4gICAgICAgIH0sXG4gICAgICAgIGlzTGFzdEl0ZW06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZSAmJiAhdGhpcy5hY3RpdmUubmV4dEFsbChcIi51aS1tZW51LWl0ZW1cIikubGVuZ3RoXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3ZlOiBmdW5jdGlvbiAoZSwgdCwgaSkge1xuICAgICAgICAgICAgdmFyIHM7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSAmJiAocyA9IFwiZmlyc3RcIiA9PT0gZSB8fCBcImxhc3RcIiA9PT0gZSA/IHRoaXMuYWN0aXZlW1wiZmlyc3RcIiA9PT0gZSA/IFwicHJldkFsbFwiIDogXCJuZXh0QWxsXCJdKFwiLnVpLW1lbnUtaXRlbVwiKS5lcSgtMSkgOiB0aGlzLmFjdGl2ZVtlICsgXCJBbGxcIl0oXCIudWktbWVudS1pdGVtXCIpLmVxKDApKSwgcyAmJiBzLmxlbmd0aCAmJiB0aGlzLmFjdGl2ZSB8fCAocyA9IHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcylbdF0oKSksIHRoaXMuZm9jdXMoaSwgcylcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dFBhZ2U6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZSA/ICh0aGlzLmlzTGFzdEl0ZW0oKSB8fCAodGhpcy5faGFzU2Nyb2xsKCkgPyAocyA9IHRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcCwgbiA9IHRoaXMuZWxlbWVudC5oZWlnaHQoKSwgdGhpcy5hY3RpdmUubmV4dEFsbChcIi51aS1tZW51LWl0ZW1cIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgPSBlKHRoaXMpLCAwID4gaS5vZmZzZXQoKS50b3AgLSBzIC0gblxuICAgICAgICAgICAgfSksIHRoaXMuZm9jdXModCwgaSkpIDogdGhpcy5mb2N1cyh0LCB0aGlzLmFjdGl2ZU1lbnUuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpW3RoaXMuYWN0aXZlID8gXCJsYXN0XCIgOiBcImZpcnN0XCJdKCkpKSwgdm9pZCAwKSA6ICh0aGlzLm5leHQodCksIHZvaWQgMClcbiAgICAgICAgfSxcbiAgICAgICAgcHJldmlvdXNQYWdlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMsIG47XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmUgPyAodGhpcy5pc0ZpcnN0SXRlbSgpIHx8ICh0aGlzLl9oYXNTY3JvbGwoKSA/IChzID0gdGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wLCBuID0gdGhpcy5lbGVtZW50LmhlaWdodCgpLCB0aGlzLmFjdGl2ZS5wcmV2QWxsKFwiLnVpLW1lbnUtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaSA9IGUodGhpcyksIGkub2Zmc2V0KCkudG9wIC0gcyArIG4gPiAwXG4gICAgICAgICAgICB9KSwgdGhpcy5mb2N1cyh0LCBpKSkgOiB0aGlzLmZvY3VzKHQsIHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlyc3QoKSkpLCB2b2lkIDApIDogKHRoaXMubmV4dCh0KSwgdm9pZCAwKVxuICAgICAgICB9LFxuICAgICAgICBfaGFzU2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkgPCB0aGlzLmVsZW1lbnQucHJvcChcInNjcm9sbEhlaWdodFwiKVxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlIHx8IGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpO1xuICAgICAgICAgICAgdmFyIGkgPSB7aXRlbTogdGhpcy5hY3RpdmV9O1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUuaGFzKFwiLnVpLW1lbnVcIikubGVuZ3RoIHx8IHRoaXMuY29sbGFwc2VBbGwodCwgITApLCB0aGlzLl90cmlnZ2VyKFwic2VsZWN0XCIsIHQsIGkpXG4gICAgICAgIH0sXG4gICAgICAgIF9maWx0ZXJNZW51SXRlbXM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHQucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNcXHNdL2csIFwiXFxcXCQmXCIpLCBzID0gUmVnRXhwKFwiXlwiICsgaSwgXCJpXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlsdGVyKFwiLnVpLW1lbnUtaXRlbVwiKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzLnRlc3QoZS50cmltKGUodGhpcykudGV4dCgpKSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KSwgZS53aWRnZXQoXCJ1aS5hdXRvY29tcGxldGVcIiwge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLFxuICAgICAgICBkZWZhdWx0RWxlbWVudDogXCI8aW5wdXQ+XCIsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGFwcGVuZFRvOiBudWxsLFxuICAgICAgICAgICAgYXV0b0ZvY3VzOiAhMSxcbiAgICAgICAgICAgIGRlbGF5OiAzMDAsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IDEsXG4gICAgICAgICAgICBwb3NpdGlvbjoge215OiBcImxlZnQgdG9wXCIsIGF0OiBcImxlZnQgYm90dG9tXCIsIGNvbGxpc2lvbjogXCJub25lXCJ9LFxuICAgICAgICAgICAgc291cmNlOiBudWxsLFxuICAgICAgICAgICAgY2hhbmdlOiBudWxsLFxuICAgICAgICAgICAgY2xvc2U6IG51bGwsXG4gICAgICAgICAgICBmb2N1czogbnVsbCxcbiAgICAgICAgICAgIG9wZW46IG51bGwsXG4gICAgICAgICAgICByZXNwb25zZTogbnVsbCxcbiAgICAgICAgICAgIHNlYXJjaDogbnVsbCxcbiAgICAgICAgICAgIHNlbGVjdDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICByZXF1ZXN0SW5kZXg6IDAsXG4gICAgICAgIHBlbmRpbmc6IDAsXG4gICAgICAgIF9jcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0LCBpLCBzLCBuID0gdGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIGEgPSBcInRleHRhcmVhXCIgPT09IG4sIG8gPSBcImlucHV0XCIgPT09IG47XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlMaW5lID0gYSA/ICEwIDogbyA/ICExIDogdGhpcy5lbGVtZW50LnByb3AoXCJpc0NvbnRlbnRFZGl0YWJsZVwiKSwgdGhpcy52YWx1ZU1ldGhvZCA9IHRoaXMuZWxlbWVudFthIHx8IG8gPyBcInZhbFwiIDogXCJ0ZXh0XCJdLCB0aGlzLmlzTmV3TWVudSA9ICEwLCB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUtaW5wdXRcIikuYXR0cihcImF1dG9jb21wbGV0ZVwiLCBcIm9mZlwiKSwgdGhpcy5fb24odGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcm9wKFwicmVhZE9ubHlcIikpIHJldHVybiB0ID0gITAsIHMgPSAhMCwgaSA9ICEwLCB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHQgPSAhMSwgcyA9ICExLCBpID0gITE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gZS51aS5rZXlDb2RlO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG4ua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBhLlBBR0VfVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9ICEwLCB0aGlzLl9tb3ZlKFwicHJldmlvdXNQYWdlXCIsIG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBhLlBBR0VfRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gITAsIHRoaXMuX21vdmUoXCJuZXh0UGFnZVwiLCBuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgYS5VUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gITAsIHRoaXMuX2tleUV2ZW50KFwicHJldmlvdXNcIiwgbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGEuRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gITAsIHRoaXMuX2tleUV2ZW50KFwibmV4dFwiLCBuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgYS5FTlRFUjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuYWN0aXZlICYmICh0ID0gITAsIG4ucHJldmVudERlZmF1bHQoKSwgdGhpcy5tZW51LnNlbGVjdChuKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGEuVEFCOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVudS5hY3RpdmUgJiYgdGhpcy5tZW51LnNlbGVjdChuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgYS5FU0NBUEU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51LmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSAmJiAodGhpcy5pc011bHRpTGluZSB8fCB0aGlzLl92YWx1ZSh0aGlzLnRlcm0pLCB0aGlzLmNsb3NlKG4pLCBuLnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gITAsIHRoaXMuX3NlYXJjaFRpbWVvdXQobilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGtleXByZXNzOiBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQgPSAhMSwgKCF0aGlzLmlzTXVsdGlMaW5lIHx8IHRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIikpICYmIHMucHJldmVudERlZmF1bHQoKSwgdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS51aS5rZXlDb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG4uUEFHRV9VUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZShcInByZXZpb3VzUGFnZVwiLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBuLlBBR0VfRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZShcIm5leHRQYWdlXCIsIHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG4uVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleUV2ZW50KFwicHJldmlvdXNcIiwgcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugbi5ET1dOOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlFdmVudChcIm5leHRcIiwgcylcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGlucHV0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyA/IChzID0gITEsIGUucHJldmVudERlZmF1bHQoKSwgdm9pZCAwKSA6ICh0aGlzLl9zZWFyY2hUaW1lb3V0KGUpLCB2b2lkIDApXG4gICAgICAgICAgICAgICAgfSwgZm9jdXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsLCB0aGlzLnByZXZpb3VzID0gdGhpcy5fdmFsdWUoKVxuICAgICAgICAgICAgICAgIH0sIGJsdXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbmNlbEJsdXIgPyAoZGVsZXRlIHRoaXMuY2FuY2VsQmx1ciwgdm9pZCAwKSA6IChjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hpbmcpLCB0aGlzLmNsb3NlKGUpLCB0aGlzLl9jaGFuZ2UoZSksIHZvaWQgMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgdGhpcy5faW5pdFNvdXJjZSgpLCB0aGlzLm1lbnUgPSBlKFwiPHVsPlwiKS5hZGRDbGFzcyhcInVpLWF1dG9jb21wbGV0ZSB1aS1mcm9udFwiKS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKS5tZW51KHtyb2xlOiBudWxsfSkuaGlkZSgpLm1lbnUoXCJpbnN0YW5jZVwiKSwgdGhpcy5fb24odGhpcy5tZW51LmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgdGhpcy5jYW5jZWxCbHVyID0gITAsIHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhbmNlbEJsdXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5tZW51LmVsZW1lbnRbMF07XG4gICAgICAgICAgICAgICAgICAgIGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpLmxlbmd0aCB8fCB0aGlzLl9kZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY3VtZW50Lm9uZShcIm1vdXNlZG93blwiLCBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMudGFyZ2V0ID09PSB0LmVsZW1lbnRbMF0gfHwgcy50YXJnZXQgPT09IGkgfHwgZS5jb250YWlucyhpLCBzLnRhcmdldCkgfHwgdC5jbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIG1lbnVmb2N1czogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMsIG47XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTmV3TWVudSAmJiAodGhpcy5pc05ld01lbnUgPSAhMSwgdC5vcmlnaW5hbEV2ZW50ICYmIC9ebW91c2UvLnRlc3QodC5vcmlnaW5hbEV2ZW50LnR5cGUpKSA/ICh0aGlzLm1lbnUuYmx1cigpLCB0aGlzLmRvY3VtZW50Lm9uZShcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlKHQudGFyZ2V0KS50cmlnZ2VyKHQub3JpZ2luYWxFdmVudClcbiAgICAgICAgICAgICAgICAgICAgfSksIHZvaWQgMCkgOiAobiA9IGkuaXRlbS5kYXRhKFwidWktYXV0b2NvbXBsZXRlLWl0ZW1cIiksICExICE9PSB0aGlzLl90cmlnZ2VyKFwiZm9jdXNcIiwgdCwge2l0ZW06IG59KSAmJiB0Lm9yaWdpbmFsRXZlbnQgJiYgL15rZXkvLnRlc3QodC5vcmlnaW5hbEV2ZW50LnR5cGUpICYmIHRoaXMuX3ZhbHVlKG4udmFsdWUpLCBzID0gaS5pdGVtLmF0dHIoXCJhcmlhLWxhYmVsXCIpIHx8IG4udmFsdWUsIHMgJiYgZS50cmltKHMpLmxlbmd0aCAmJiAodGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpLCBlKFwiPGRpdj5cIikudGV4dChzKS5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pKSwgdm9pZCAwKVxuICAgICAgICAgICAgICAgIH0sIG1lbnVzZWxlY3Q6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5pdGVtLmRhdGEoXCJ1aS1hdXRvY29tcGxldGUtaXRlbVwiKSwgcyA9IHRoaXMucHJldmlvdXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudFswXSAhPT0gdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ICYmICh0aGlzLmVsZW1lbnQuZm9jdXMoKSwgdGhpcy5wcmV2aW91cyA9IHMsIHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXMgPSBzLCB0aGlzLnNlbGVjdGVkSXRlbSA9IGlcbiAgICAgICAgICAgICAgICAgICAgfSkpLCAhMSAhPT0gdGhpcy5fdHJpZ2dlcihcInNlbGVjdFwiLCBlLCB7aXRlbTogaX0pICYmIHRoaXMuX3ZhbHVlKGkudmFsdWUpLCB0aGlzLnRlcm0gPSB0aGlzLl92YWx1ZSgpLCB0aGlzLmNsb3NlKGUpLCB0aGlzLnNlbGVjdGVkSXRlbSA9IGlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgdGhpcy5saXZlUmVnaW9uID0gZShcIjxzcGFuPlwiLCB7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJzdGF0dXNcIixcbiAgICAgICAgICAgICAgICBcImFyaWEtbGl2ZVwiOiBcImFzc2VydGl2ZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1yZWxldmFudFwiOiBcImFkZGl0aW9uc1wiXG4gICAgICAgICAgICB9KS5hZGRDbGFzcyhcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiKS5hcHBlbmRUbyh0aGlzLmRvY3VtZW50WzBdLmJvZHkpLCB0aGlzLl9vbih0aGlzLndpbmRvdywge1xuICAgICAgICAgICAgICAgIGJlZm9yZXVubG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcImF1dG9jb21wbGV0ZVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hpbmcpLCB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUtaW5wdXRcIikucmVtb3ZlQXR0cihcImF1dG9jb21wbGV0ZVwiKSwgdGhpcy5tZW51LmVsZW1lbnQucmVtb3ZlKCksIHRoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoZSwgdCksIFwic291cmNlXCIgPT09IGUgJiYgdGhpcy5faW5pdFNvdXJjZSgpLCBcImFwcGVuZFRvXCIgPT09IGUgJiYgdGhpcy5tZW51LmVsZW1lbnQuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSksIFwiZGlzYWJsZWRcIiA9PT0gZSAmJiB0ICYmIHRoaXMueGhyICYmIHRoaXMueGhyLmFib3J0KClcbiAgICAgICAgfSxcbiAgICAgICAgX2FwcGVuZFRvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucy5hcHBlbmRUbztcbiAgICAgICAgICAgIHJldHVybiB0ICYmICh0ID0gdC5qcXVlcnkgfHwgdC5ub2RlVHlwZSA/IGUodCkgOiB0aGlzLmRvY3VtZW50LmZpbmQodCkuZXEoMCkpLCB0ICYmIHRbMF0gfHwgKHQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdChcIi51aS1mcm9udFwiKSksIHQubGVuZ3RoIHx8ICh0ID0gdGhpcy5kb2N1bWVudFswXS5ib2R5KSwgdFxuICAgICAgICB9LFxuICAgICAgICBfaW5pdFNvdXJjZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMgPSB0aGlzO1xuICAgICAgICAgICAgZS5pc0FycmF5KHRoaXMub3B0aW9ucy5zb3VyY2UpID8gKHQgPSB0aGlzLm9wdGlvbnMuc291cmNlLCB0aGlzLnNvdXJjZSA9IGZ1bmN0aW9uIChpLCBzKSB7XG4gICAgICAgICAgICAgICAgcyhlLnVpLmF1dG9jb21wbGV0ZS5maWx0ZXIodCwgaS50ZXJtKSlcbiAgICAgICAgICAgIH0pIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdGhpcy5vcHRpb25zLnNvdXJjZSA/IChpID0gdGhpcy5vcHRpb25zLnNvdXJjZSwgdGhpcy5zb3VyY2UgPSBmdW5jdGlvbiAodCwgbikge1xuICAgICAgICAgICAgICAgIHMueGhyICYmIHMueGhyLmFib3J0KCksIHMueGhyID0gZS5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBpLCBkYXRhOiB0LCBkYXRhVHlwZTogXCJqc29uXCIsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuKGUpXG4gICAgICAgICAgICAgICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuKFtdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pIDogdGhpcy5zb3VyY2UgPSB0aGlzLm9wdGlvbnMuc291cmNlXG4gICAgICAgIH0sXG4gICAgICAgIF9zZWFyY2hUaW1lb3V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKSwgdGhpcy5zZWFyY2hpbmcgPSB0aGlzLl9kZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnRlcm0gPT09IHRoaXMuX3ZhbHVlKCksIGkgPSB0aGlzLm1lbnUuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpLFxuICAgICAgICAgICAgICAgICAgICBzID0gZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5O1xuICAgICAgICAgICAgICAgICghdCB8fCB0ICYmICFpICYmICFzKSAmJiAodGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsLCB0aGlzLnNlYXJjaChudWxsLCBlKSlcbiAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5kZWxheSlcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIGUgPSBudWxsICE9IGUgPyBlIDogdGhpcy5fdmFsdWUoKSwgdGhpcy50ZXJtID0gdGhpcy5fdmFsdWUoKSwgZS5sZW5ndGggPCB0aGlzLm9wdGlvbnMubWluTGVuZ3RoID8gdGhpcy5jbG9zZSh0KSA6IHRoaXMuX3RyaWdnZXIoXCJzZWFyY2hcIiwgdCkgIT09ICExID8gdGhpcy5fc2VhcmNoKGUpIDogdm9pZCAwXG4gICAgICAgIH0sXG4gICAgICAgIF9zZWFyY2g6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcrKywgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktYXV0b2NvbXBsZXRlLWxvYWRpbmdcIiksIHRoaXMuY2FuY2VsU2VhcmNoID0gITEsIHRoaXMuc291cmNlKHt0ZXJtOiBlfSwgdGhpcy5fcmVzcG9uc2UoKSlcbiAgICAgICAgfSxcbiAgICAgICAgX3Jlc3BvbnNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9ICsrdGhpcy5yZXF1ZXN0SW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gZS5wcm94eShmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHQgPT09IHRoaXMucmVxdWVzdEluZGV4ICYmIHRoaXMuX19yZXNwb25zZShlKSwgdGhpcy5wZW5kaW5nLS0sIHRoaXMucGVuZGluZyB8fCB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZ1wiKVxuICAgICAgICAgICAgfSwgdGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgX19yZXNwb25zZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUgJiYgKGUgPSB0aGlzLl9ub3JtYWxpemUoZSkpLCB0aGlzLl90cmlnZ2VyKFwicmVzcG9uc2VcIiwgbnVsbCwge2NvbnRlbnQ6IGV9KSwgIXRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiBlICYmIGUubGVuZ3RoICYmICF0aGlzLmNhbmNlbFNlYXJjaCA/ICh0aGlzLl9zdWdnZXN0KGUpLCB0aGlzLl90cmlnZ2VyKFwib3BlblwiKSkgOiB0aGlzLl9jbG9zZSgpXG4gICAgICAgIH0sXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxTZWFyY2ggPSAhMCwgdGhpcy5fY2xvc2UoZSlcbiAgICAgICAgfSxcbiAgICAgICAgX2Nsb3NlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5tZW51LmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSAmJiAodGhpcy5tZW51LmVsZW1lbnQuaGlkZSgpLCB0aGlzLm1lbnUuYmx1cigpLCB0aGlzLmlzTmV3TWVudSA9ICEwLCB0aGlzLl90cmlnZ2VyKFwiY2xvc2VcIiwgZSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9jaGFuZ2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzICE9PSB0aGlzLl92YWx1ZSgpICYmIHRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIiwgZSwge2l0ZW06IHRoaXMuc2VsZWN0ZWRJdGVtfSlcbiAgICAgICAgfSxcbiAgICAgICAgX25vcm1hbGl6ZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0Lmxlbmd0aCAmJiB0WzBdLmxhYmVsICYmIHRbMF0udmFsdWUgPyB0IDogZS5tYXAodCwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IHtsYWJlbDogdCwgdmFsdWU6IHR9IDogZS5leHRlbmQoe30sIHQsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQubGFiZWwgfHwgdC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQudmFsdWUgfHwgdC5sYWJlbFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfc3VnZ2VzdDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5tZW51LmVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlck1lbnUoaSwgdCksIHRoaXMuaXNOZXdNZW51ID0gITAsIHRoaXMubWVudS5yZWZyZXNoKCksIGkuc2hvdygpLCB0aGlzLl9yZXNpemVNZW51KCksIGkucG9zaXRpb24oZS5leHRlbmQoe29mOiB0aGlzLmVsZW1lbnR9LCB0aGlzLm9wdGlvbnMucG9zaXRpb24pKSwgdGhpcy5vcHRpb25zLmF1dG9Gb2N1cyAmJiB0aGlzLm1lbnUubmV4dCgpXG4gICAgICAgIH0sXG4gICAgICAgIF9yZXNpemVNZW51OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMubWVudS5lbGVtZW50O1xuICAgICAgICAgICAgZS5vdXRlcldpZHRoKE1hdGgubWF4KGUud2lkdGgoXCJcIikub3V0ZXJXaWR0aCgpICsgMSwgdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9yZW5kZXJNZW51OiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMgPSB0aGlzO1xuICAgICAgICAgICAgZS5lYWNoKGksIGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgICAgICAgICAgICAgcy5fcmVuZGVySXRlbURhdGEodCwgaSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9yZW5kZXJJdGVtRGF0YTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJJdGVtKGUsIHQpLmRhdGEoXCJ1aS1hdXRvY29tcGxldGUtaXRlbVwiLCB0KVxuICAgICAgICB9LFxuICAgICAgICBfcmVuZGVySXRlbTogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBlKFwiPGxpPlwiKS50ZXh0KGkubGFiZWwpLmFwcGVuZFRvKHQpXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3ZlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIikgPyB0aGlzLm1lbnUuaXNGaXJzdEl0ZW0oKSAmJiAvXnByZXZpb3VzLy50ZXN0KGUpIHx8IHRoaXMubWVudS5pc0xhc3RJdGVtKCkgJiYgL15uZXh0Ly50ZXN0KGUpID8gKHRoaXMuaXNNdWx0aUxpbmUgfHwgdGhpcy5fdmFsdWUodGhpcy50ZXJtKSwgdGhpcy5tZW51LmJsdXIoKSwgdm9pZCAwKSA6ICh0aGlzLm1lbnVbZV0odCksIHZvaWQgMCkgOiAodGhpcy5zZWFyY2gobnVsbCwgdCksIHZvaWQgMClcbiAgICAgICAgfSxcbiAgICAgICAgd2lkZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW51LmVsZW1lbnRcbiAgICAgICAgfSxcbiAgICAgICAgX3ZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZU1ldGhvZC5hcHBseSh0aGlzLmVsZW1lbnQsIGFyZ3VtZW50cylcbiAgICAgICAgfSxcbiAgICAgICAgX2tleUV2ZW50OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgKCF0aGlzLmlzTXVsdGlMaW5lIHx8IHRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIikpICYmICh0aGlzLl9tb3ZlKGUsIHQpLCB0LnByZXZlbnREZWZhdWx0KCkpXG4gICAgICAgIH1cbiAgICB9KSwgZS5leHRlbmQoZS51aS5hdXRvY29tcGxldGUsIHtcbiAgICAgICAgZXNjYXBlUmVnZXg6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5yZXBsYWNlKC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZywgXCJcXFxcJCZcIilcbiAgICAgICAgfSwgZmlsdGVyOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMgPSBSZWdFeHAoZS51aS5hdXRvY29tcGxldGUuZXNjYXBlUmVnZXgoaSksIFwiaVwiKTtcbiAgICAgICAgICAgIHJldHVybiBlLmdyZXAodCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy50ZXN0KGUubGFiZWwgfHwgZS52YWx1ZSB8fCBlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pLCBlLndpZGdldChcInVpLmF1dG9jb21wbGV0ZVwiLCBlLnVpLmF1dG9jb21wbGV0ZSwge1xuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgICAgIG5vUmVzdWx0czogXCJObyBzZWFyY2ggcmVzdWx0cy5cIixcbiAgICAgICAgICAgICAgICByZXN1bHRzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSArIChlID4gMSA/IFwiIHJlc3VsdHMgYXJlXCIgOiBcIiByZXN1bHQgaXNcIikgKyBcIiBhdmFpbGFibGUsIHVzZSB1cCBhbmQgZG93biBhcnJvdyBrZXlzIHRvIG5hdmlnYXRlLlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBfX3Jlc3BvbnNlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICB0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmNhbmNlbFNlYXJjaCB8fCAoaSA9IHQgJiYgdC5sZW5ndGggPyB0aGlzLm9wdGlvbnMubWVzc2FnZXMucmVzdWx0cyh0Lmxlbmd0aCkgOiB0aGlzLm9wdGlvbnMubWVzc2FnZXMubm9SZXN1bHRzLCB0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCksIGUoXCI8ZGl2PlwiKS50ZXh0KGkpLmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbikpXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5hdXRvY29tcGxldGU7XG4gICAgdmFyIGMsIHAgPSBcInVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIsXG4gICAgICAgIGYgPSBcInVpLWJ1dHRvbi1pY29ucy1vbmx5IHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktYnV0dG9uLXRleHQtaWNvbnMgdWktYnV0dG9uLXRleHQtaWNvbi1wcmltYXJ5IHVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IHVpLWJ1dHRvbi10ZXh0LW9ubHlcIixcbiAgICAgICAgbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQuZmluZChcIjp1aS1idXR0b25cIikuYnV0dG9uKFwicmVmcmVzaFwiKVxuICAgICAgICAgICAgfSwgMSlcbiAgICAgICAgfSwgZyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHQubmFtZSwgcyA9IHQuZm9ybSwgbiA9IGUoW10pO1xuICAgICAgICAgICAgcmV0dXJuIGkgJiYgKGkgPSBpLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKSwgbiA9IHMgPyBlKHMpLmZpbmQoXCJbbmFtZT0nXCIgKyBpICsgXCInXVt0eXBlPXJhZGlvXVwiKSA6IGUoXCJbbmFtZT0nXCIgKyBpICsgXCInXVt0eXBlPXJhZGlvXVwiLCB0Lm93bmVyRG9jdW1lbnQpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmZvcm1cbiAgICAgICAgICAgIH0pKSwgblxuICAgICAgICB9O1xuICAgIGUud2lkZ2V0KFwidWkuYnV0dG9uXCIsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgZGVmYXVsdEVsZW1lbnQ6IFwiPGJ1dHRvbj5cIixcbiAgICAgICAgb3B0aW9uczoge2Rpc2FibGVkOiBudWxsLCB0ZXh0OiAhMCwgbGFiZWw6IG51bGwsIGljb25zOiB7cHJpbWFyeTogbnVsbCwgc2Vjb25kYXJ5OiBudWxsfX0sXG4gICAgICAgIF9jcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbG9zZXN0KFwiZm9ybVwiKS51bmJpbmQoXCJyZXNldFwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSkuYmluZChcInJlc2V0XCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBtKSwgXCJib29sZWFuXCIgIT0gdHlwZW9mIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA/IHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9ICEhdGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiKSA6IHRoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIiwgdGhpcy5vcHRpb25zLmRpc2FibGVkKSwgdGhpcy5fZGV0ZXJtaW5lQnV0dG9uVHlwZSgpLCB0aGlzLmhhc1RpdGxlID0gISF0aGlzLmJ1dHRvbkVsZW1lbnQuYXR0cihcInRpdGxlXCIpO1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLCBpID0gdGhpcy5vcHRpb25zLCBzID0gXCJjaGVja2JveFwiID09PSB0aGlzLnR5cGUgfHwgXCJyYWRpb1wiID09PSB0aGlzLnR5cGUsXG4gICAgICAgICAgICAgICAgbiA9IHMgPyBcIlwiIDogXCJ1aS1zdGF0ZS1hY3RpdmVcIjtcbiAgICAgICAgICAgIG51bGwgPT09IGkubGFiZWwgJiYgKGkubGFiZWwgPSBcImlucHV0XCIgPT09IHRoaXMudHlwZSA/IHRoaXMuYnV0dG9uRWxlbWVudC52YWwoKSA6IHRoaXMuYnV0dG9uRWxlbWVudC5odG1sKCkpLCB0aGlzLl9ob3ZlcmFibGUodGhpcy5idXR0b25FbGVtZW50KSwgdGhpcy5idXR0b25FbGVtZW50LmFkZENsYXNzKHApLmF0dHIoXCJyb2xlXCIsIFwiYnV0dG9uXCIpLmJpbmQoXCJtb3VzZWVudGVyXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaS5kaXNhYmxlZCB8fCB0aGlzID09PSBjICYmIGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIilcbiAgICAgICAgICAgIH0pLmJpbmQoXCJtb3VzZWxlYXZlXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaS5kaXNhYmxlZCB8fCBlKHRoaXMpLnJlbW92ZUNsYXNzKG4pXG4gICAgICAgICAgICB9KS5iaW5kKFwiY2xpY2tcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaS5kaXNhYmxlZCAmJiAoZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKVxuICAgICAgICAgICAgfSksIHRoaXMuX29uKHtcbiAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKVxuICAgICAgICAgICAgICAgIH0sIGJsdXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgcyAmJiB0aGlzLmVsZW1lbnQuYmluZChcImNoYW5nZVwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQucmVmcmVzaCgpXG4gICAgICAgICAgICB9KSwgXCJjaGVja2JveFwiID09PSB0aGlzLnR5cGUgPyB0aGlzLmJ1dHRvbkVsZW1lbnQuYmluZChcImNsaWNrXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkuZGlzYWJsZWQgPyAhMSA6IHZvaWQgMFxuICAgICAgICAgICAgfSkgOiBcInJhZGlvXCIgPT09IHRoaXMudHlwZSA/IHRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKFwiY2xpY2tcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaS5kaXNhYmxlZCkgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksIHQuYnV0dG9uRWxlbWVudC5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHQuZWxlbWVudFswXTtcbiAgICAgICAgICAgICAgICBnKHMpLm5vdChzKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIilbMF1cbiAgICAgICAgICAgICAgICB9KS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsIFwiZmFsc2VcIilcbiAgICAgICAgICAgIH0pIDogKHRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKFwibW91c2Vkb3duXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkuZGlzYWJsZWQgPyAhMSA6IChlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLCBjID0gdGhpcywgdC5kb2N1bWVudC5vbmUoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IG51bGxcbiAgICAgICAgICAgICAgICB9KSwgdm9pZCAwKVxuICAgICAgICAgICAgfSkuYmluZChcIm1vdXNldXBcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaS5kaXNhYmxlZCA/ICExIDogKGUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksIHZvaWQgMClcbiAgICAgICAgICAgIH0pLmJpbmQoXCJrZXlkb3duXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpLmRpc2FibGVkID8gITEgOiAoKHQua2V5Q29kZSA9PT0gZS51aS5rZXlDb2RlLlNQQUNFIHx8IHQua2V5Q29kZSA9PT0gZS51aS5rZXlDb2RlLkVOVEVSKSAmJiBlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLCB2b2lkIDApXG4gICAgICAgICAgICB9KS5iaW5kKFwia2V5dXBcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UgKyBcIiBibHVyXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKVxuICAgICAgICAgICAgfSksIHRoaXMuYnV0dG9uRWxlbWVudC5pcyhcImFcIikgJiYgdGhpcy5idXR0b25FbGVtZW50LmtleXVwKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5rZXlDb2RlID09PSBlLnVpLmtleUNvZGUuU1BBQ0UgJiYgZSh0aGlzKS5jbGljaygpXG4gICAgICAgICAgICB9KSksIHRoaXMuX3NldE9wdGlvbihcImRpc2FibGVkXCIsIGkuZGlzYWJsZWQpLCB0aGlzLl9yZXNldEJ1dHRvbigpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXRlcm1pbmVCdXR0b25UeXBlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSwgdCwgaTtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHRoaXMuZWxlbWVudC5pcyhcIlt0eXBlPWNoZWNrYm94XVwiKSA/IFwiY2hlY2tib3hcIiA6IHRoaXMuZWxlbWVudC5pcyhcIlt0eXBlPXJhZGlvXVwiKSA/IFwicmFkaW9cIiA6IHRoaXMuZWxlbWVudC5pcyhcImlucHV0XCIpID8gXCJpbnB1dFwiIDogXCJidXR0b25cIiwgXCJjaGVja2JveFwiID09PSB0aGlzLnR5cGUgfHwgXCJyYWRpb1wiID09PSB0aGlzLnR5cGUgPyAoZSA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCkubGFzdCgpLCB0ID0gXCJsYWJlbFtmb3I9J1wiICsgdGhpcy5lbGVtZW50LmF0dHIoXCJpZFwiKSArIFwiJ11cIiwgdGhpcy5idXR0b25FbGVtZW50ID0gZS5maW5kKHQpLCB0aGlzLmJ1dHRvbkVsZW1lbnQubGVuZ3RoIHx8IChlID0gZS5sZW5ndGggPyBlLnNpYmxpbmdzKCkgOiB0aGlzLmVsZW1lbnQuc2libGluZ3MoKSwgdGhpcy5idXR0b25FbGVtZW50ID0gZS5maWx0ZXIodCksIHRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGggfHwgKHRoaXMuYnV0dG9uRWxlbWVudCA9IGUuZmluZCh0KSkpLCB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGVcIiksIGkgPSB0aGlzLmVsZW1lbnQuaXMoXCI6Y2hlY2tlZFwiKSwgaSAmJiB0aGlzLmJ1dHRvbkVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksIHRoaXMuYnV0dG9uRWxlbWVudC5wcm9wKFwiYXJpYS1wcmVzc2VkXCIsIGkpKSA6IHRoaXMuYnV0dG9uRWxlbWVudCA9IHRoaXMuZWxlbWVudFxuICAgICAgICB9LFxuICAgICAgICB3aWRnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbkVsZW1lbnRcbiAgICAgICAgfSxcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiKSwgdGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKHAgKyBcIiB1aS1zdGF0ZS1hY3RpdmUgXCIgKyBmKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1wcmVzc2VkXCIpLmh0bWwodGhpcy5idXR0b25FbGVtZW50LmZpbmQoXCIudWktYnV0dG9uLXRleHRcIikuaHRtbCgpKSwgdGhpcy5oYXNUaXRsZSB8fCB0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cihcInRpdGxlXCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRPcHRpb246IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoZSwgdCksIFwiZGlzYWJsZWRcIiA9PT0gZSA/ICh0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiwgISF0KSwgdGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLCAhIXQpLCB0ICYmIChcImNoZWNrYm94XCIgPT09IHRoaXMudHlwZSB8fCBcInJhZGlvXCIgPT09IHRoaXMudHlwZSA/IHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpIDogdGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXMgdWktc3RhdGUtYWN0aXZlXCIpKSwgdm9pZCAwKSA6ICh0aGlzLl9yZXNldEJ1dHRvbigpLCB2b2lkIDApXG4gICAgICAgIH0sXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5lbGVtZW50LmlzKFwiaW5wdXQsIGJ1dHRvblwiKSA/IHRoaXMuZWxlbWVudC5pcyhcIjpkaXNhYmxlZFwiKSA6IHRoaXMuZWxlbWVudC5oYXNDbGFzcyhcInVpLWJ1dHRvbi1kaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIHQgIT09IHRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiB0aGlzLl9zZXRPcHRpb24oXCJkaXNhYmxlZFwiLCB0KSwgXCJyYWRpb1wiID09PSB0aGlzLnR5cGUgPyBnKHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5pcyhcIjpjaGVja2VkXCIpID8gZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIikuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIikuYXR0cihcImFyaWEtcHJlc3NlZFwiLCBcInRydWVcIikgOiBlKHRoaXMpLmJ1dHRvbihcIndpZGdldFwiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsIFwiZmFsc2VcIilcbiAgICAgICAgICAgIH0pIDogXCJjaGVja2JveFwiID09PSB0aGlzLnR5cGUgJiYgKHRoaXMuZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpID8gdGhpcy5idXR0b25FbGVtZW50LmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLmF0dHIoXCJhcmlhLXByZXNzZWRcIiwgXCJ0cnVlXCIpIDogdGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLmF0dHIoXCJhcmlhLXByZXNzZWRcIiwgXCJmYWxzZVwiKSlcbiAgICAgICAgfSxcbiAgICAgICAgX3Jlc2V0QnV0dG9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoXCJpbnB1dFwiID09PSB0aGlzLnR5cGUpIHJldHVybiB0aGlzLm9wdGlvbnMubGFiZWwgJiYgdGhpcy5lbGVtZW50LnZhbCh0aGlzLm9wdGlvbnMubGFiZWwpLCB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhmKSxcbiAgICAgICAgICAgICAgICBpID0gZShcIjxzcGFuPjwvc3Bhbj5cIiwgdGhpcy5kb2N1bWVudFswXSkuYWRkQ2xhc3MoXCJ1aS1idXR0b24tdGV4dFwiKS5odG1sKHRoaXMub3B0aW9ucy5sYWJlbCkuYXBwZW5kVG8odC5lbXB0eSgpKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgcyA9IHRoaXMub3B0aW9ucy5pY29ucywgbiA9IHMucHJpbWFyeSAmJiBzLnNlY29uZGFyeSwgYSA9IFtdO1xuICAgICAgICAgICAgcy5wcmltYXJ5IHx8IHMuc2Vjb25kYXJ5ID8gKHRoaXMub3B0aW9ucy50ZXh0ICYmIGEucHVzaChcInVpLWJ1dHRvbi10ZXh0LWljb25cIiArIChuID8gXCJzXCIgOiBzLnByaW1hcnkgPyBcIi1wcmltYXJ5XCIgOiBcIi1zZWNvbmRhcnlcIikpLCBzLnByaW1hcnkgJiYgdC5wcmVwZW5kKFwiPHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiBcIiArIHMucHJpbWFyeSArIFwiJz48L3NwYW4+XCIpLCBzLnNlY29uZGFyeSAmJiB0LmFwcGVuZChcIjxzcGFuIGNsYXNzPSd1aS1idXR0b24taWNvbi1zZWNvbmRhcnkgdWktaWNvbiBcIiArIHMuc2Vjb25kYXJ5ICsgXCInPjwvc3Bhbj5cIiksIHRoaXMub3B0aW9ucy50ZXh0IHx8IChhLnB1c2gobiA/IFwidWktYnV0dG9uLWljb25zLW9ubHlcIiA6IFwidWktYnV0dG9uLWljb24tb25seVwiKSwgdGhpcy5oYXNUaXRsZSB8fCB0LmF0dHIoXCJ0aXRsZVwiLCBlLnRyaW0oaSkpKSkgOiBhLnB1c2goXCJ1aS1idXR0b24tdGV4dC1vbmx5XCIpLCB0LmFkZENsYXNzKGEuam9pbihcIiBcIikpXG4gICAgICAgIH1cbiAgICB9KSwgZS53aWRnZXQoXCJ1aS5idXR0b25zZXRcIiwge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLFxuICAgICAgICBvcHRpb25zOiB7aXRlbXM6IFwiYnV0dG9uLCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGlucHV0W3R5cGU9c3VibWl0XSwgaW5wdXRbdHlwZT1yZXNldF0sIGlucHV0W3R5cGU9Y2hlY2tib3hdLCBpbnB1dFt0eXBlPXJhZGlvXSwgYSwgOmRhdGEodWktYnV0dG9uKVwifSxcbiAgICAgICAgX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktYnV0dG9uc2V0XCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgXCJkaXNhYmxlZFwiID09PSBlICYmIHRoaXMuYnV0dG9ucy5idXR0b24oXCJvcHRpb25cIiwgZSwgdCksIHRoaXMuX3N1cGVyKGUsIHQpXG4gICAgICAgIH0sXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gXCJydGxcIiA9PT0gdGhpcy5lbGVtZW50LmNzcyhcImRpcmVjdGlvblwiKSwgaSA9IHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcyksXG4gICAgICAgICAgICAgICAgcyA9IGkuZmlsdGVyKFwiOnVpLWJ1dHRvblwiKTtcbiAgICAgICAgICAgIGkubm90KFwiOnVpLWJ1dHRvblwiKS5idXR0b24oKSwgcy5idXR0b24oXCJyZWZyZXNoXCIpLCB0aGlzLmJ1dHRvbnMgPSBpLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUodGhpcykuYnV0dG9uKFwid2lkZ2V0XCIpWzBdXG4gICAgICAgICAgICB9KS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1hbGwgdWktY29ybmVyLWxlZnQgdWktY29ybmVyLXJpZ2h0XCIpLmZpbHRlcihcIjpmaXJzdFwiKS5hZGRDbGFzcyh0ID8gXCJ1aS1jb3JuZXItcmlnaHRcIiA6IFwidWktY29ybmVyLWxlZnRcIikuZW5kKCkuZmlsdGVyKFwiOmxhc3RcIikuYWRkQ2xhc3ModCA/IFwidWktY29ybmVyLWxlZnRcIiA6IFwidWktY29ybmVyLXJpZ2h0XCIpLmVuZCgpLmVuZCgpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1idXR0b25zZXRcIiksIHRoaXMuYnV0dG9ucy5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlKHRoaXMpLmJ1dHRvbihcIndpZGdldFwiKVswXVxuICAgICAgICAgICAgfSkucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItbGVmdCB1aS1jb3JuZXItcmlnaHRcIikuZW5kKCkuYnV0dG9uKFwiZGVzdHJveVwiKVxuICAgICAgICB9XG4gICAgfSksIGUudWkuYnV0dG9uLCBlLmV4dGVuZChlLnVpLCB7ZGF0ZXBpY2tlcjoge3ZlcnNpb246IFwiMS4xMS4yXCJ9fSk7XG4gICAgdmFyIHY7XG4gICAgZS5leHRlbmQobi5wcm90b3R5cGUsIHtcbiAgICAgICAgbWFya2VyQ2xhc3NOYW1lOiBcImhhc0RhdGVwaWNrZXJcIixcbiAgICAgICAgbWF4Um93czogNCxcbiAgICAgICAgX3dpZGdldERhdGVwaWNrZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRwRGl2XG4gICAgICAgIH0sXG4gICAgICAgIHNldERlZmF1bHRzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHIodGhpcy5fZGVmYXVsdHMsIGUgfHwge30pLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIF9hdHRhY2hEYXRlcGlja2VyOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMsIG4sIGE7XG4gICAgICAgICAgICBzID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCBuID0gXCJkaXZcIiA9PT0gcyB8fCBcInNwYW5cIiA9PT0gcywgdC5pZCB8fCAodGhpcy51dWlkICs9IDEsIHQuaWQgPSBcImRwXCIgKyB0aGlzLnV1aWQpLCBhID0gdGhpcy5fbmV3SW5zdChlKHQpLCBuKSwgYS5zZXR0aW5ncyA9IGUuZXh0ZW5kKHt9LCBpIHx8IHt9KSwgXCJpbnB1dFwiID09PSBzID8gdGhpcy5fY29ubmVjdERhdGVwaWNrZXIodCwgYSkgOiBuICYmIHRoaXMuX2lubGluZURhdGVwaWNrZXIodCwgYSlcbiAgICAgICAgfSxcbiAgICAgICAgX25ld0luc3Q6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IHRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05X1xcLV0pL2csIFwiXFxcXFxcXFwkMVwiKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IHMsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXk6IDAsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRNb250aDogMCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFllYXI6IDAsXG4gICAgICAgICAgICAgICAgZHJhd01vbnRoOiAwLFxuICAgICAgICAgICAgICAgIGRyYXdZZWFyOiAwLFxuICAgICAgICAgICAgICAgIGlubGluZTogaSxcbiAgICAgICAgICAgICAgICBkcERpdjogaSA/IGEoZShcIjxkaXYgY2xhc3M9J1wiICsgdGhpcy5faW5saW5lQ2xhc3MgKyBcIiB1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+XCIpKSA6IHRoaXMuZHBEaXZcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2Nvbm5lY3REYXRlcGlja2VyOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMgPSBlKHQpO1xuICAgICAgICAgICAgaS5hcHBlbmQgPSBlKFtdKSwgaS50cmlnZ2VyID0gZShbXSksIHMuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpIHx8ICh0aGlzLl9hdHRhY2htZW50cyhzLCBpKSwgcy5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkua2V5ZG93bih0aGlzLl9kb0tleURvd24pLmtleXByZXNzKHRoaXMuX2RvS2V5UHJlc3MpLmtleXVwKHRoaXMuX2RvS2V5VXApLCB0aGlzLl9hdXRvU2l6ZShpKSwgZS5kYXRhKHQsIFwiZGF0ZXBpY2tlclwiLCBpKSwgaS5zZXR0aW5ncy5kaXNhYmxlZCAmJiB0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KSlcbiAgICAgICAgfSxcbiAgICAgICAgX2F0dGFjaG1lbnRzOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMsIG4sIGEsIG8gPSB0aGlzLl9nZXQoaSwgXCJhcHBlbmRUZXh0XCIpLCByID0gdGhpcy5fZ2V0KGksIFwiaXNSVExcIik7XG4gICAgICAgICAgICBpLmFwcGVuZCAmJiBpLmFwcGVuZC5yZW1vdmUoKSwgbyAmJiAoaS5hcHBlbmQgPSBlKFwiPHNwYW4gY2xhc3M9J1wiICsgdGhpcy5fYXBwZW5kQ2xhc3MgKyBcIic+XCIgKyBvICsgXCI8L3NwYW4+XCIpLCB0W3IgPyBcImJlZm9yZVwiIDogXCJhZnRlclwiXShpLmFwcGVuZCkpLCB0LnVuYmluZChcImZvY3VzXCIsIHRoaXMuX3Nob3dEYXRlcGlja2VyKSwgaS50cmlnZ2VyICYmIGkudHJpZ2dlci5yZW1vdmUoKSwgcyA9IHRoaXMuX2dldChpLCBcInNob3dPblwiKSwgKFwiZm9jdXNcIiA9PT0gcyB8fCBcImJvdGhcIiA9PT0gcykgJiYgdC5mb2N1cyh0aGlzLl9zaG93RGF0ZXBpY2tlciksIChcImJ1dHRvblwiID09PSBzIHx8IFwiYm90aFwiID09PSBzKSAmJiAobiA9IHRoaXMuX2dldChpLCBcImJ1dHRvblRleHRcIiksIGEgPSB0aGlzLl9nZXQoaSwgXCJidXR0b25JbWFnZVwiKSwgaS50cmlnZ2VyID0gZSh0aGlzLl9nZXQoaSwgXCJidXR0b25JbWFnZU9ubHlcIikgPyBlKFwiPGltZy8+XCIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7XG4gICAgICAgICAgICAgICAgc3JjOiBhLFxuICAgICAgICAgICAgICAgIGFsdDogbixcbiAgICAgICAgICAgICAgICB0aXRsZTogblxuICAgICAgICAgICAgfSkgOiBlKFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPlwiKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmh0bWwoYSA/IGUoXCI8aW1nLz5cIikuYXR0cih7XG4gICAgICAgICAgICAgICAgc3JjOiBhLFxuICAgICAgICAgICAgICAgIGFsdDogbixcbiAgICAgICAgICAgICAgICB0aXRsZTogblxuICAgICAgICAgICAgfSkgOiBuKSksIHRbciA/IFwiYmVmb3JlXCIgOiBcImFmdGVyXCJdKGkudHJpZ2dlciksIGkudHJpZ2dlci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgZS5kYXRlcGlja2VyLl9sYXN0SW5wdXQgPT09IHRbMF0gPyBlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCkgOiBlLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICYmIGUuZGF0ZXBpY2tlci5fbGFzdElucHV0ICE9PSB0WzBdID8gKGUuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKSwgZS5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0WzBdKSkgOiBlLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKHRbMF0pLCAhMVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9hdXRvU2l6ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9nZXQoZSwgXCJhdXRvU2l6ZVwiKSAmJiAhZS5pbmxpbmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCwgaSwgcywgbiwgYSA9IG5ldyBEYXRlKDIwMDksIDExLCAyMCksIG8gPSB0aGlzLl9nZXQoZSwgXCJkYXRlRm9ybWF0XCIpO1xuICAgICAgICAgICAgICAgIG8ubWF0Y2goL1tETV0vKSAmJiAodCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIHMgPSAwLCBuID0gMDsgZS5sZW5ndGggPiBuOyBuKyspIGVbbl0ubGVuZ3RoID4gaSAmJiAoaSA9IGVbbl0ubGVuZ3RoLCBzID0gbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzXG4gICAgICAgICAgICAgICAgfSwgYS5zZXRNb250aCh0KHRoaXMuX2dldChlLCBvLm1hdGNoKC9NTS8pID8gXCJtb250aE5hbWVzXCIgOiBcIm1vbnRoTmFtZXNTaG9ydFwiKSkpLCBhLnNldERhdGUodCh0aGlzLl9nZXQoZSwgby5tYXRjaCgvREQvKSA/IFwiZGF5TmFtZXNcIiA6IFwiZGF5TmFtZXNTaG9ydFwiKSkgKyAyMCAtIGEuZ2V0RGF5KCkpKSwgZS5pbnB1dC5hdHRyKFwic2l6ZVwiLCB0aGlzLl9mb3JtYXREYXRlKGUsIGEpLmxlbmd0aClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2lubGluZURhdGVwaWNrZXI6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGUodCk7XG4gICAgICAgICAgICBzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSB8fCAocy5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGkuZHBEaXYpLCBlLmRhdGEodCwgXCJkYXRlcGlja2VyXCIsIGkpLCB0aGlzLl9zZXREYXRlKGksIHRoaXMuX2dldERlZmF1bHREYXRlKGkpLCAhMCksIHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSksIHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKSwgaS5zZXR0aW5ncy5kaXNhYmxlZCAmJiB0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KSwgaS5kcERpdi5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIikpXG4gICAgICAgIH0sXG4gICAgICAgIF9kaWFsb2dEYXRlcGlja2VyOiBmdW5jdGlvbiAodCwgaSwgcywgbiwgYSkge1xuICAgICAgICAgICAgdmFyIG8sIGgsIGwsIHUsIGQsIGMgPSB0aGlzLl9kaWFsb2dJbnN0O1xuICAgICAgICAgICAgcmV0dXJuIGMgfHwgKHRoaXMudXVpZCArPSAxLCBvID0gXCJkcFwiICsgdGhpcy51dWlkLCB0aGlzLl9kaWFsb2dJbnB1dCA9IGUoXCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J1wiICsgbyArIFwiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz5cIiksIHRoaXMuX2RpYWxvZ0lucHV0LmtleWRvd24odGhpcy5fZG9LZXlEb3duKSwgZShcImJvZHlcIikuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KSwgYyA9IHRoaXMuX2RpYWxvZ0luc3QgPSB0aGlzLl9uZXdJbnN0KHRoaXMuX2RpYWxvZ0lucHV0LCAhMSksIGMuc2V0dGluZ3MgPSB7fSwgZS5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLCBcImRhdGVwaWNrZXJcIiwgYykpLCByKGMuc2V0dGluZ3MsIG4gfHwge30pLCBpID0gaSAmJiBpLmNvbnN0cnVjdG9yID09PSBEYXRlID8gdGhpcy5fZm9ybWF0RGF0ZShjLCBpKSA6IGksIHRoaXMuX2RpYWxvZ0lucHV0LnZhbChpKSwgdGhpcy5fcG9zID0gYSA/IGEubGVuZ3RoID8gYSA6IFthLnBhZ2VYLCBhLnBhZ2VZXSA6IG51bGwsIHRoaXMuX3BvcyB8fCAoaCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsIHUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsIGQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLCB0aGlzLl9wb3MgPSBbaCAvIDIgLSAxMDAgKyB1LCBsIC8gMiAtIDE1MCArIGRdKSwgdGhpcy5fZGlhbG9nSW5wdXQuY3NzKFwibGVmdFwiLCB0aGlzLl9wb3NbMF0gKyAyMCArIFwicHhcIikuY3NzKFwidG9wXCIsIHRoaXMuX3Bvc1sxXSArIFwicHhcIiksIGMuc2V0dGluZ3Mub25TZWxlY3QgPSBzLCB0aGlzLl9pbkRpYWxvZyA9ICEwLCB0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKSwgdGhpcy5fc2hvd0RhdGVwaWNrZXIodGhpcy5fZGlhbG9nSW5wdXRbMF0pLCBlLmJsb2NrVUkgJiYgZS5ibG9ja1VJKHRoaXMuZHBEaXYpLCBlLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sIFwiZGF0ZXBpY2tlclwiLCBjKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveURhdGVwaWNrZXI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcyA9IGUodCksIG4gPSBlLmRhdGEodCwgXCJkYXRlcGlja2VyXCIpO1xuICAgICAgICAgICAgcy5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkgJiYgKGkgPSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIGUucmVtb3ZlRGF0YSh0LCBcImRhdGVwaWNrZXJcIiksIFwiaW5wdXRcIiA9PT0gaSA/IChuLmFwcGVuZC5yZW1vdmUoKSwgbi50cmlnZ2VyLnJlbW92ZSgpLCBzLnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS51bmJpbmQoXCJmb2N1c1wiLCB0aGlzLl9zaG93RGF0ZXBpY2tlcikudW5iaW5kKFwia2V5ZG93blwiLCB0aGlzLl9kb0tleURvd24pLnVuYmluZChcImtleXByZXNzXCIsIHRoaXMuX2RvS2V5UHJlc3MpLnVuYmluZChcImtleXVwXCIsIHRoaXMuX2RvS2V5VXApKSA6IChcImRpdlwiID09PSBpIHx8IFwic3BhblwiID09PSBpKSAmJiBzLnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpKVxuICAgICAgICB9LFxuICAgICAgICBfZW5hYmxlRGF0ZXBpY2tlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuID0gZSh0KSwgYSA9IGUuZGF0YSh0LCBcImRhdGVwaWNrZXJcIik7XG4gICAgICAgICAgICBuLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSAmJiAoaSA9IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgXCJpbnB1dFwiID09PSBpID8gKHQuZGlzYWJsZWQgPSAhMSwgYS50cmlnZ2VyLmZpbHRlcihcImJ1dHRvblwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gITFcbiAgICAgICAgICAgIH0pLmVuZCgpLmZpbHRlcihcImltZ1wiKS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMS4wXCIsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcIlwiXG4gICAgICAgICAgICB9KSkgOiAoXCJkaXZcIiA9PT0gaSB8fCBcInNwYW5cIiA9PT0gaSkgJiYgKHMgPSBuLmNoaWxkcmVuKFwiLlwiICsgdGhpcy5faW5saW5lQ2xhc3MpLCBzLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSwgcy5maW5kKFwic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXJcIikucHJvcChcImRpc2FibGVkXCIsICExKSksIHRoaXMuX2Rpc2FibGVkSW5wdXRzID0gZS5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IHQgPyBudWxsIDogZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9kaXNhYmxlRGF0ZXBpY2tlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuID0gZSh0KSwgYSA9IGUuZGF0YSh0LCBcImRhdGVwaWNrZXJcIik7XG4gICAgICAgICAgICBuLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSAmJiAoaSA9IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgXCJpbnB1dFwiID09PSBpID8gKHQuZGlzYWJsZWQgPSAhMCwgYS50cmlnZ2VyLmZpbHRlcihcImJ1dHRvblwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gITBcbiAgICAgICAgICAgIH0pLmVuZCgpLmZpbHRlcihcImltZ1wiKS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMC41XCIsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcImRlZmF1bHRcIlxuICAgICAgICAgICAgfSkpIDogKFwiZGl2XCIgPT09IGkgfHwgXCJzcGFuXCIgPT09IGkpICYmIChzID0gbi5jaGlsZHJlbihcIi5cIiArIHRoaXMuX2lubGluZUNsYXNzKSwgcy5jaGlsZHJlbigpLmFkZENsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiksIHMuZmluZChcInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyXCIpLnByb3AoXCJkaXNhYmxlZFwiLCAhMCkpLCB0aGlzLl9kaXNhYmxlZElucHV0cyA9IGUubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlID09PSB0ID8gbnVsbCA6IGVcbiAgICAgICAgICAgIH0pLCB0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdID0gdClcbiAgICAgICAgfSxcbiAgICAgICAgX2lzRGlzYWJsZWREYXRlcGlja2VyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoID4gdDsgdCsrKSBpZiAodGhpcy5fZGlzYWJsZWRJbnB1dHNbdF0gPT09IGUpIHJldHVybiAhMDtcbiAgICAgICAgICAgIHJldHVybiAhMVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0SW5zdDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZGF0YSh0LCBcImRhdGVwaWNrZXJcIilcbiAgICAgICAgICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgICAgICAgICAgICB0aHJvd1wiTWlzc2luZyBpbnN0YW5jZSBkYXRhIGZvciB0aGlzIGRhdGVwaWNrZXJcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfb3B0aW9uRGF0ZXBpY2tlcjogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuLCBhLCBvLCBoLCBsID0gdGhpcy5fZ2V0SW5zdCh0KTtcbiAgICAgICAgICAgIHJldHVybiAyID09PSBhcmd1bWVudHMubGVuZ3RoICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGkgPyBcImRlZmF1bHRzXCIgPT09IGkgPyBlLmV4dGVuZCh7fSwgZS5kYXRlcGlja2VyLl9kZWZhdWx0cykgOiBsID8gXCJhbGxcIiA9PT0gaSA/IGUuZXh0ZW5kKHt9LCBsLnNldHRpbmdzKSA6IHRoaXMuX2dldChsLCBpKSA6IG51bGwgOiAobiA9IGkgfHwge30sIFwic3RyaW5nXCIgPT0gdHlwZW9mIGkgJiYgKG4gPSB7fSwgbltpXSA9IHMpLCBsICYmICh0aGlzLl9jdXJJbnN0ID09PSBsICYmIHRoaXMuX2hpZGVEYXRlcGlja2VyKCksIGEgPSB0aGlzLl9nZXREYXRlRGF0ZXBpY2tlcih0LCAhMCksIG8gPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGwsIFwibWluXCIpLCBoID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShsLCBcIm1heFwiKSwgcihsLnNldHRpbmdzLCBuKSwgbnVsbCAhPT0gbyAmJiB2b2lkIDAgIT09IG4uZGF0ZUZvcm1hdCAmJiB2b2lkIDAgPT09IG4ubWluRGF0ZSAmJiAobC5zZXR0aW5ncy5taW5EYXRlID0gdGhpcy5fZm9ybWF0RGF0ZShsLCBvKSksIG51bGwgIT09IGggJiYgdm9pZCAwICE9PSBuLmRhdGVGb3JtYXQgJiYgdm9pZCAwID09PSBuLm1heERhdGUgJiYgKGwuc2V0dGluZ3MubWF4RGF0ZSA9IHRoaXMuX2Zvcm1hdERhdGUobCwgaCkpLCBcImRpc2FibGVkXCIgaW4gbiAmJiAobi5kaXNhYmxlZCA/IHRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpIDogdGhpcy5fZW5hYmxlRGF0ZXBpY2tlcih0KSksIHRoaXMuX2F0dGFjaG1lbnRzKGUodCksIGwpLCB0aGlzLl9hdXRvU2l6ZShsKSwgdGhpcy5fc2V0RGF0ZShsLCBhKSwgdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGwpLCB0aGlzLl91cGRhdGVEYXRlcGlja2VyKGwpKSwgdm9pZCAwKVxuICAgICAgICB9LFxuICAgICAgICBfY2hhbmdlRGF0ZXBpY2tlcjogZnVuY3Rpb24gKGUsIHQsIGkpIHtcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbkRhdGVwaWNrZXIoZSwgdCwgaSlcbiAgICAgICAgfSxcbiAgICAgICAgX3JlZnJlc2hEYXRlcGlja2VyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9nZXRJbnN0KGUpO1xuICAgICAgICAgICAgdCAmJiB0aGlzLl91cGRhdGVEYXRlcGlja2VyKHQpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXREYXRlRGF0ZXBpY2tlcjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5fZ2V0SW5zdChlKTtcbiAgICAgICAgICAgIGkgJiYgKHRoaXMuX3NldERhdGUoaSwgdCksIHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSksIHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2dldERhdGVEYXRlcGlja2VyOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLl9nZXRJbnN0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIGkgJiYgIWkuaW5saW5lICYmIHRoaXMuX3NldERhdGVGcm9tRmllbGQoaSwgdCksIGkgPyB0aGlzLl9nZXREYXRlKGkpIDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBfZG9LZXlEb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMsIG4sIGEgPSBlLmRhdGVwaWNrZXIuX2dldEluc3QodC50YXJnZXQpLCBvID0gITAsIHIgPSBhLmRwRGl2LmlzKFwiLnVpLWRhdGVwaWNrZXItcnRsXCIpO1xuICAgICAgICAgICAgaWYgKGEuX2tleUV2ZW50ID0gITAsIGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpIHN3aXRjaCAodC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCksIG8gPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBlKFwidGQuXCIgKyBlLmRhdGVwaWNrZXIuX2RheU92ZXJDbGFzcyArIFwiOm5vdCguXCIgKyBlLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcyArIFwiKVwiLCBhLmRwRGl2KSwgblswXSAmJiBlLmRhdGVwaWNrZXIuX3NlbGVjdERheSh0LnRhcmdldCwgYS5zZWxlY3RlZE1vbnRoLCBhLnNlbGVjdGVkWWVhciwgblswXSksIGkgPSBlLmRhdGVwaWNrZXIuX2dldChhLCBcIm9uU2VsZWN0XCIpLCBpID8gKHMgPSBlLmRhdGVwaWNrZXIuX2Zvcm1hdERhdGUoYSksIGkuYXBwbHkoYS5pbnB1dCA/IGEuaW5wdXRbMF0gOiBudWxsLCBbcywgYV0pKSA6IGUuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKSwgITE7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgICAgICAgICAgICBlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsIHQuY3RybEtleSA/IC1lLmRhdGVwaWNrZXIuX2dldChhLCBcInN0ZXBCaWdNb250aHNcIikgOiAtZS5kYXRlcGlja2VyLl9nZXQoYSwgXCJzdGVwTW9udGhzXCIpLCBcIk1cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCwgdC5jdHJsS2V5ID8gK2UuZGF0ZXBpY2tlci5fZ2V0KGEsIFwic3RlcEJpZ01vbnRoc1wiKSA6ICtlLmRhdGVwaWNrZXIuX2dldChhLCBcInN0ZXBNb250aHNcIiksIFwiTVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNTpcbiAgICAgICAgICAgICAgICAgICAgKHQuY3RybEtleSB8fCB0Lm1ldGFLZXkpICYmIGUuZGF0ZXBpY2tlci5fY2xlYXJEYXRlKHQudGFyZ2V0KSwgbyA9IHQuY3RybEtleSB8fCB0Lm1ldGFLZXk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzY6XG4gICAgICAgICAgICAgICAgICAgICh0LmN0cmxLZXkgfHwgdC5tZXRhS2V5KSAmJiBlLmRhdGVwaWNrZXIuX2dvdG9Ub2RheSh0LnRhcmdldCksIG8gPSB0LmN0cmxLZXkgfHwgdC5tZXRhS2V5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgICAgICAodC5jdHJsS2V5IHx8IHQubWV0YUtleSkgJiYgZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LCByID8gMSA6IC0xLCBcIkRcIiksIG8gPSB0LmN0cmxLZXkgfHwgdC5tZXRhS2V5LCB0Lm9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmIGUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCwgdC5jdHJsS2V5ID8gLWUuZGF0ZXBpY2tlci5fZ2V0KGEsIFwic3RlcEJpZ01vbnRoc1wiKSA6IC1lLmRhdGVwaWNrZXIuX2dldChhLCBcInN0ZXBNb250aHNcIiksIFwiTVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgKHQuY3RybEtleSB8fCB0Lm1ldGFLZXkpICYmIGUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCwgLTcsIFwiRFwiKSwgbyA9IHQuY3RybEtleSB8fCB0Lm1ldGFLZXk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICh0LmN0cmxLZXkgfHwgdC5tZXRhS2V5KSAmJiBlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsIHIgPyAtMSA6IDEsIFwiRFwiKSwgbyA9IHQuY3RybEtleSB8fCB0Lm1ldGFLZXksIHQub3JpZ2luYWxFdmVudC5hbHRLZXkgJiYgZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LCB0LmN0cmxLZXkgPyArZS5kYXRlcGlja2VyLl9nZXQoYSwgXCJzdGVwQmlnTW9udGhzXCIpIDogK2UuZGF0ZXBpY2tlci5fZ2V0KGEsIFwic3RlcE1vbnRoc1wiKSwgXCJNXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAodC5jdHJsS2V5IHx8IHQubWV0YUtleSkgJiYgZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LCA3LCBcIkRcIiksIG8gPSB0LmN0cmxLZXkgfHwgdC5tZXRhS2V5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBvID0gITFcbiAgICAgICAgICAgIH0gZWxzZSAzNiA9PT0gdC5rZXlDb2RlICYmIHQuY3RybEtleSA/IGUuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcykgOiBvID0gITE7XG4gICAgICAgICAgICBvICYmICh0LnByZXZlbnREZWZhdWx0KCksIHQuc3RvcFByb3BhZ2F0aW9uKCkpXG4gICAgICAgIH0sXG4gICAgICAgIF9kb0tleVByZXNzOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMsIG4gPSBlLmRhdGVwaWNrZXIuX2dldEluc3QodC50YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZGF0ZXBpY2tlci5fZ2V0KG4sIFwiY29uc3RyYWluSW5wdXRcIikgPyAoaSA9IGUuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycyhlLmRhdGVwaWNrZXIuX2dldChuLCBcImRhdGVGb3JtYXRcIikpLCBzID0gU3RyaW5nLmZyb21DaGFyQ29kZShudWxsID09IHQuY2hhckNvZGUgPyB0LmtleUNvZGUgOiB0LmNoYXJDb2RlKSwgdC5jdHJsS2V5IHx8IHQubWV0YUtleSB8fCBcIiBcIiA+IHMgfHwgIWkgfHwgaS5pbmRleE9mKHMpID4gLTEpIDogdm9pZCAwXG4gICAgICAgIH0sXG4gICAgICAgIF9kb0tleVVwOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMgPSBlLmRhdGVwaWNrZXIuX2dldEluc3QodC50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKHMuaW5wdXQudmFsKCkgIT09IHMubGFzdFZhbCkgdHJ5IHtcbiAgICAgICAgICAgICAgICBpID0gZS5kYXRlcGlja2VyLnBhcnNlRGF0ZShlLmRhdGVwaWNrZXIuX2dldChzLCBcImRhdGVGb3JtYXRcIiksIHMuaW5wdXQgPyBzLmlucHV0LnZhbCgpIDogbnVsbCwgZS5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcocykpLCBpICYmIChlLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQocyksIGUuZGF0ZXBpY2tlci5fdXBkYXRlQWx0ZXJuYXRlKHMpLCBlLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIocykpXG4gICAgICAgICAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITBcbiAgICAgICAgfSxcbiAgICAgICAgX3Nob3dEYXRlcGlja2VyOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgaWYgKHQgPSB0LnRhcmdldCB8fCB0LCBcImlucHV0XCIgIT09IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAmJiAodCA9IGUoXCJpbnB1dFwiLCB0LnBhcmVudE5vZGUpWzBdKSwgIWUuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIodCkgJiYgZS5kYXRlcGlja2VyLl9sYXN0SW5wdXQgIT09IHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgbiwgYSwgbywgaCwgbCwgdTtcbiAgICAgICAgICAgICAgICBpID0gZS5kYXRlcGlja2VyLl9nZXRJbnN0KHQpLCBlLmRhdGVwaWNrZXIuX2N1ckluc3QgJiYgZS5kYXRlcGlja2VyLl9jdXJJbnN0ICE9PSBpICYmIChlLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCghMCwgITApLCBpICYmIGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcihlLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0pKSwgbiA9IGUuZGF0ZXBpY2tlci5fZ2V0KGksIFwiYmVmb3JlU2hvd1wiKSwgYSA9IG4gPyBuLmFwcGx5KHQsIFt0LCBpXSkgOiB7fSwgYSAhPT0gITEgJiYgKHIoaS5zZXR0aW5ncywgYSksIGkubGFzdFZhbCA9IG51bGwsIGUuZGF0ZXBpY2tlci5fbGFzdElucHV0ID0gdCwgZS5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGkpLCBlLmRhdGVwaWNrZXIuX2luRGlhbG9nICYmICh0LnZhbHVlID0gXCJcIiksIGUuZGF0ZXBpY2tlci5fcG9zIHx8IChlLmRhdGVwaWNrZXIuX3BvcyA9IGUuZGF0ZXBpY2tlci5fZmluZFBvcyh0KSwgZS5kYXRlcGlja2VyLl9wb3NbMV0gKz0gdC5vZmZzZXRIZWlnaHQpLCBvID0gITEsIGUodCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyB8PSBcImZpeGVkXCIgPT09IGUodGhpcykuY3NzKFwicG9zaXRpb25cIiksICFvXG4gICAgICAgICAgICAgICAgfSksIGggPSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGUuZGF0ZXBpY2tlci5fcG9zWzBdLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IGUuZGF0ZXBpY2tlci5fcG9zWzFdXG4gICAgICAgICAgICAgICAgfSwgZS5kYXRlcGlja2VyLl9wb3MgPSBudWxsLCBpLmRwRGl2LmVtcHR5KCksIGkuZHBEaXYuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiLTEwMDBweFwiXG4gICAgICAgICAgICAgICAgfSksIGUuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihpKSwgaCA9IGUuZGF0ZXBpY2tlci5fY2hlY2tPZmZzZXQoaSwgaCwgbyksIGkuZHBEaXYuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGUuZGF0ZXBpY2tlci5faW5EaWFsb2cgJiYgZS5ibG9ja1VJID8gXCJzdGF0aWNcIiA6IG8gPyBcImZpeGVkXCIgOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBoLmxlZnQgKyBcInB4XCIsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogaC50b3AgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9KSwgaS5pbmxpbmUgfHwgKGwgPSBlLmRhdGVwaWNrZXIuX2dldChpLCBcInNob3dBbmltXCIpLCB1ID0gZS5kYXRlcGlja2VyLl9nZXQoaSwgXCJkdXJhdGlvblwiKSwgaS5kcERpdi5jc3MoXCJ6LWluZGV4XCIsIHMoZSh0KSkgKyAxKSwgZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyA9ICEwLCBlLmVmZmVjdHMgJiYgZS5lZmZlY3RzLmVmZmVjdFtsXSA/IGkuZHBEaXYuc2hvdyhsLCBlLmRhdGVwaWNrZXIuX2dldChpLCBcInNob3dPcHRpb25zXCIpLCB1KSA6IGkuZHBEaXZbbCB8fCBcInNob3dcIl0obCA/IHUgOiBudWxsKSwgZS5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KGkpICYmIGkuaW5wdXQuZm9jdXMoKSwgZS5kYXRlcGlja2VyLl9jdXJJbnN0ID0gaSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF91cGRhdGVEYXRlcGlja2VyOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdGhpcy5tYXhSb3dzID0gNCwgdiA9IHQsIHQuZHBEaXYuZW1wdHkoKS5hcHBlbmQodGhpcy5fZ2VuZXJhdGVIVE1MKHQpKSwgdGhpcy5fYXR0YWNoSGFuZGxlcnModCk7XG4gICAgICAgICAgICB2YXIgaSwgcyA9IHRoaXMuX2dldE51bWJlck9mTW9udGhzKHQpLCBuID0gc1sxXSwgYSA9IDE3LCByID0gdC5kcERpdi5maW5kKFwiLlwiICsgdGhpcy5fZGF5T3ZlckNsYXNzICsgXCIgYVwiKTtcbiAgICAgICAgICAgIHIubGVuZ3RoID4gMCAmJiBvLmFwcGx5KHIuZ2V0KDApKSwgdC5kcERpdi5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItbXVsdGktMiB1aS1kYXRlcGlja2VyLW11bHRpLTMgdWktZGF0ZXBpY2tlci1tdWx0aS00XCIpLndpZHRoKFwiXCIpLCBuID4gMSAmJiB0LmRwRGl2LmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS1cIiArIG4pLmNzcyhcIndpZHRoXCIsIGEgKiBuICsgXCJlbVwiKSwgdC5kcERpdlsoMSAhPT0gc1swXSB8fCAxICE9PSBzWzFdID8gXCJhZGRcIiA6IFwicmVtb3ZlXCIpICsgXCJDbGFzc1wiXShcInVpLWRhdGVwaWNrZXItbXVsdGlcIiksIHQuZHBEaXZbKHRoaXMuX2dldCh0LCBcImlzUlRMXCIpID8gXCJhZGRcIiA6IFwicmVtb3ZlXCIpICsgXCJDbGFzc1wiXShcInVpLWRhdGVwaWNrZXItcnRsXCIpLCB0ID09PSBlLmRhdGVwaWNrZXIuX2N1ckluc3QgJiYgZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyAmJiBlLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQodCkgJiYgdC5pbnB1dC5mb2N1cygpLCB0LnllYXJzaHRtbCAmJiAoaSA9IHQueWVhcnNodG1sLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpID09PSB0LnllYXJzaHRtbCAmJiB0LnllYXJzaHRtbCAmJiB0LmRwRGl2LmZpbmQoXCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0XCIpLnJlcGxhY2VXaXRoKHQueWVhcnNodG1sKSwgaSA9IHQueWVhcnNodG1sID0gbnVsbFxuICAgICAgICAgICAgfSwgMCkpXG4gICAgICAgIH0sXG4gICAgICAgIF9zaG91bGRGb2N1c0lucHV0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuaW5wdXQgJiYgZS5pbnB1dC5pcyhcIjp2aXNpYmxlXCIpICYmICFlLmlucHV0LmlzKFwiOmRpc2FibGVkXCIpICYmICFlLmlucHV0LmlzKFwiOmZvY3VzXCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9jaGVja09mZnNldDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuID0gdC5kcERpdi5vdXRlcldpZHRoKCksIGEgPSB0LmRwRGl2Lm91dGVySGVpZ2h0KCksIG8gPSB0LmlucHV0ID8gdC5pbnB1dC5vdXRlcldpZHRoKCkgOiAwLFxuICAgICAgICAgICAgICAgIHIgPSB0LmlucHV0ID8gdC5pbnB1dC5vdXRlckhlaWdodCgpIDogMCxcbiAgICAgICAgICAgICAgICBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICsgKHMgPyAwIDogZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSxcbiAgICAgICAgICAgICAgICBsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCArIChzID8gMCA6IGUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTtcbiAgICAgICAgICAgIHJldHVybiBpLmxlZnQgLT0gdGhpcy5fZ2V0KHQsIFwiaXNSVExcIikgPyBuIC0gbyA6IDAsIGkubGVmdCAtPSBzICYmIGkubGVmdCA9PT0gdC5pbnB1dC5vZmZzZXQoKS5sZWZ0ID8gZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpIDogMCwgaS50b3AgLT0gcyAmJiBpLnRvcCA9PT0gdC5pbnB1dC5vZmZzZXQoKS50b3AgKyByID8gZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkgOiAwLCBpLmxlZnQgLT0gTWF0aC5taW4oaS5sZWZ0LCBpLmxlZnQgKyBuID4gaCAmJiBoID4gbiA/IE1hdGguYWJzKGkubGVmdCArIG4gLSBoKSA6IDApLCBpLnRvcCAtPSBNYXRoLm1pbihpLnRvcCwgaS50b3AgKyBhID4gbCAmJiBsID4gYSA/IE1hdGguYWJzKGEgKyByKSA6IDApLCBpXG4gICAgICAgIH0sXG4gICAgICAgIF9maW5kUG9zOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSwgcyA9IHRoaXMuX2dldEluc3QodCksIG4gPSB0aGlzLl9nZXQocywgXCJpc1JUTFwiKTsgdCAmJiAoXCJoaWRkZW5cIiA9PT0gdC50eXBlIHx8IDEgIT09IHQubm9kZVR5cGUgfHwgZS5leHByLmZpbHRlcnMuaGlkZGVuKHQpKTspIHQgPSB0W24gPyBcInByZXZpb3VzU2libGluZ1wiIDogXCJuZXh0U2libGluZ1wiXTtcbiAgICAgICAgICAgIHJldHVybiBpID0gZSh0KS5vZmZzZXQoKSwgW2kubGVmdCwgaS50b3BdXG4gICAgICAgIH0sXG4gICAgICAgIF9oaWRlRGF0ZXBpY2tlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuLCBhLCBvID0gdGhpcy5fY3VySW5zdDtcbiAgICAgICAgICAgICFvIHx8IHQgJiYgbyAhPT0gZS5kYXRhKHQsIFwiZGF0ZXBpY2tlclwiKSB8fCB0aGlzLl9kYXRlcGlja2VyU2hvd2luZyAmJiAoaSA9IHRoaXMuX2dldChvLCBcInNob3dBbmltXCIpLCBzID0gdGhpcy5fZ2V0KG8sIFwiZHVyYXRpb25cIiksIG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZS5kYXRlcGlja2VyLl90aWR5RGlhbG9nKG8pXG4gICAgICAgICAgICB9LCBlLmVmZmVjdHMgJiYgKGUuZWZmZWN0cy5lZmZlY3RbaV0gfHwgZS5lZmZlY3RzW2ldKSA/IG8uZHBEaXYuaGlkZShpLCBlLmRhdGVwaWNrZXIuX2dldChvLCBcInNob3dPcHRpb25zXCIpLCBzLCBuKSA6IG8uZHBEaXZbXCJzbGlkZURvd25cIiA9PT0gaSA/IFwic2xpZGVVcFwiIDogXCJmYWRlSW5cIiA9PT0gaSA/IFwiZmFkZU91dFwiIDogXCJoaWRlXCJdKGkgPyBzIDogbnVsbCwgbiksIGkgfHwgbigpLCB0aGlzLl9kYXRlcGlja2VyU2hvd2luZyA9ICExLCBhID0gdGhpcy5fZ2V0KG8sIFwib25DbG9zZVwiKSwgYSAmJiBhLmFwcGx5KG8uaW5wdXQgPyBvLmlucHV0WzBdIDogbnVsbCwgW28uaW5wdXQgPyBvLmlucHV0LnZhbCgpIDogXCJcIiwgb10pLCB0aGlzLl9sYXN0SW5wdXQgPSBudWxsLCB0aGlzLl9pbkRpYWxvZyAmJiAodGhpcy5fZGlhbG9nSW5wdXQuY3NzKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIHRvcDogXCItMTAwcHhcIlxuICAgICAgICAgICAgfSksIGUuYmxvY2tVSSAmJiAoZS51bmJsb2NrVUkoKSwgZShcImJvZHlcIikuYXBwZW5kKHRoaXMuZHBEaXYpKSksIHRoaXMuX2luRGlhbG9nID0gITEpXG4gICAgICAgIH0sXG4gICAgICAgIF90aWR5RGlhbG9nOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5kcERpdi5yZW1vdmVDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcykudW5iaW5kKFwiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXJcIilcbiAgICAgICAgfSxcbiAgICAgICAgX2NoZWNrRXh0ZXJuYWxDbGljazogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmIChlLmRhdGVwaWNrZXIuX2N1ckluc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGUodC50YXJnZXQpLCBzID0gZS5kYXRlcGlja2VyLl9nZXRJbnN0KGlbMF0pO1xuICAgICAgICAgICAgICAgIChpWzBdLmlkICE9PSBlLmRhdGVwaWNrZXIuX21haW5EaXZJZCAmJiAwID09PSBpLnBhcmVudHMoXCIjXCIgKyBlLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoICYmICFpLmhhc0NsYXNzKGUuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpICYmICFpLmNsb3Nlc3QoXCIuXCIgKyBlLmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoICYmIGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgKCFlLmRhdGVwaWNrZXIuX2luRGlhbG9nIHx8ICFlLmJsb2NrVUkpIHx8IGkuaGFzQ2xhc3MoZS5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkgJiYgZS5kYXRlcGlja2VyLl9jdXJJbnN0ICE9PSBzKSAmJiBlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2FkanVzdERhdGU6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiA9IGUodCksIGEgPSB0aGlzLl9nZXRJbnN0KG5bMF0pO1xuICAgICAgICAgICAgdGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIoblswXSkgfHwgKHRoaXMuX2FkanVzdEluc3REYXRlKGEsIGkgKyAoXCJNXCIgPT09IHMgPyB0aGlzLl9nZXQoYSwgXCJzaG93Q3VycmVudEF0UG9zXCIpIDogMCksIHMpLCB0aGlzLl91cGRhdGVEYXRlcGlja2VyKGEpKVxuICAgICAgICB9LFxuICAgICAgICBfZ290b1RvZGF5OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMgPSBlKHQpLCBuID0gdGhpcy5fZ2V0SW5zdChzWzBdKTtcbiAgICAgICAgICAgIHRoaXMuX2dldChuLCBcImdvdG9DdXJyZW50XCIpICYmIG4uY3VycmVudERheSA/IChuLnNlbGVjdGVkRGF5ID0gbi5jdXJyZW50RGF5LCBuLmRyYXdNb250aCA9IG4uc2VsZWN0ZWRNb250aCA9IG4uY3VycmVudE1vbnRoLCBuLmRyYXdZZWFyID0gbi5zZWxlY3RlZFllYXIgPSBuLmN1cnJlbnRZZWFyKSA6IChpID0gbmV3IERhdGUsIG4uc2VsZWN0ZWREYXkgPSBpLmdldERhdGUoKSwgbi5kcmF3TW9udGggPSBuLnNlbGVjdGVkTW9udGggPSBpLmdldE1vbnRoKCksIG4uZHJhd1llYXIgPSBuLnNlbGVjdGVkWWVhciA9IGkuZ2V0RnVsbFllYXIoKSksIHRoaXMuX25vdGlmeUNoYW5nZShuKSwgdGhpcy5fYWRqdXN0RGF0ZShzKVxuICAgICAgICB9LFxuICAgICAgICBfc2VsZWN0TW9udGhZZWFyOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4gPSBlKHQpLCBhID0gdGhpcy5fZ2V0SW5zdChuWzBdKTtcbiAgICAgICAgICAgIGFbXCJzZWxlY3RlZFwiICsgKFwiTVwiID09PSBzID8gXCJNb250aFwiIDogXCJZZWFyXCIpXSA9IGFbXCJkcmF3XCIgKyAoXCJNXCIgPT09IHMgPyBcIk1vbnRoXCIgOiBcIlllYXJcIildID0gcGFyc2VJbnQoaS5vcHRpb25zW2kuc2VsZWN0ZWRJbmRleF0udmFsdWUsIDEwKSwgdGhpcy5fbm90aWZ5Q2hhbmdlKGEpLCB0aGlzLl9hZGp1c3REYXRlKG4pXG4gICAgICAgIH0sXG4gICAgICAgIF9zZWxlY3REYXk6IGZ1bmN0aW9uICh0LCBpLCBzLCBuKSB7XG4gICAgICAgICAgICB2YXIgYSwgbyA9IGUodCk7XG4gICAgICAgICAgICBlKG4pLmhhc0NsYXNzKHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKSB8fCB0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihvWzBdKSB8fCAoYSA9IHRoaXMuX2dldEluc3Qob1swXSksIGEuc2VsZWN0ZWREYXkgPSBhLmN1cnJlbnREYXkgPSBlKFwiYVwiLCBuKS5odG1sKCksIGEuc2VsZWN0ZWRNb250aCA9IGEuY3VycmVudE1vbnRoID0gaSwgYS5zZWxlY3RlZFllYXIgPSBhLmN1cnJlbnRZZWFyID0gcywgdGhpcy5fc2VsZWN0RGF0ZSh0LCB0aGlzLl9mb3JtYXREYXRlKGEsIGEuY3VycmVudERheSwgYS5jdXJyZW50TW9udGgsIGEuY3VycmVudFllYXIpKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2NsZWFyRGF0ZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gZSh0KTtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdERhdGUoaSwgXCJcIilcbiAgICAgICAgfSxcbiAgICAgICAgX3NlbGVjdERhdGU6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcywgbiA9IGUodCksIGEgPSB0aGlzLl9nZXRJbnN0KG5bMF0pO1xuICAgICAgICAgICAgaSA9IG51bGwgIT0gaSA/IGkgOiB0aGlzLl9mb3JtYXREYXRlKGEpLCBhLmlucHV0ICYmIGEuaW5wdXQudmFsKGkpLCB0aGlzLl91cGRhdGVBbHRlcm5hdGUoYSksIHMgPSB0aGlzLl9nZXQoYSwgXCJvblNlbGVjdFwiKSwgcyA/IHMuYXBwbHkoYS5pbnB1dCA/IGEuaW5wdXRbMF0gOiBudWxsLCBbaSwgYV0pIDogYS5pbnB1dCAmJiBhLmlucHV0LnRyaWdnZXIoXCJjaGFuZ2VcIiksIGEuaW5saW5lID8gdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihhKSA6ICh0aGlzLl9oaWRlRGF0ZXBpY2tlcigpLCB0aGlzLl9sYXN0SW5wdXQgPSBhLmlucHV0WzBdLCBcIm9iamVjdFwiICE9IHR5cGVvZiBhLmlucHV0WzBdICYmIGEuaW5wdXQuZm9jdXMoKSwgdGhpcy5fbGFzdElucHV0ID0gbnVsbClcbiAgICAgICAgfSxcbiAgICAgICAgX3VwZGF0ZUFsdGVybmF0ZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuLCBhID0gdGhpcy5fZ2V0KHQsIFwiYWx0RmllbGRcIik7XG4gICAgICAgICAgICBhICYmIChpID0gdGhpcy5fZ2V0KHQsIFwiYWx0Rm9ybWF0XCIpIHx8IHRoaXMuX2dldCh0LCBcImRhdGVGb3JtYXRcIiksIHMgPSB0aGlzLl9nZXREYXRlKHQpLCBuID0gdGhpcy5mb3JtYXREYXRlKGksIHMsIHRoaXMuX2dldEZvcm1hdENvbmZpZyh0KSksIGUoYSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS52YWwobilcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9LFxuICAgICAgICBub1dlZWtlbmRzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBlLmdldERheSgpO1xuICAgICAgICAgICAgcmV0dXJuIFt0ID4gMCAmJiA2ID4gdCwgXCJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgaXNvODYwMVdlZWs6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSA9IG5ldyBEYXRlKGUuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBpLnNldERhdGUoaS5nZXREYXRlKCkgKyA0IC0gKGkuZ2V0RGF5KCkgfHwgNykpLCB0ID0gaS5nZXRUaW1lKCksIGkuc2V0TW9udGgoMCksIGkuc2V0RGF0ZSgxKSwgTWF0aC5mbG9vcihNYXRoLnJvdW5kKCh0IC0gaSkgLyA4NjRlNSkgLyA3KSArIDFcbiAgICAgICAgfSxcbiAgICAgICAgcGFyc2VEYXRlOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdCB8fCBudWxsID09IGkpIHRocm93XCJJbnZhbGlkIGFyZ3VtZW50c1wiO1xuICAgICAgICAgICAgaWYgKGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBpID8gXCJcIiArIGkgOiBpICsgXCJcIiwgXCJcIiA9PT0gaSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB2YXIgbiwgYSwgbywgciwgaCA9IDAsIGwgPSAocyA/IHMuc2hvcnRZZWFyQ3V0b2ZmIDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMuc2hvcnRZZWFyQ3V0b2ZmLFxuICAgICAgICAgICAgICAgIHUgPSBcInN0cmluZ1wiICE9IHR5cGVvZiBsID8gbCA6IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSAlIDEwMCArIHBhcnNlSW50KGwsIDEwKSxcbiAgICAgICAgICAgICAgICBkID0gKHMgPyBzLmRheU5hbWVzU2hvcnQgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LFxuICAgICAgICAgICAgICAgIGMgPSAocyA/IHMuZGF5TmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxcbiAgICAgICAgICAgICAgICBwID0gKHMgPyBzLm1vbnRoTmFtZXNTaG9ydCA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxcbiAgICAgICAgICAgICAgICBmID0gKHMgPyBzLm1vbnRoTmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLCBtID0gLTEsIGcgPSAtMSwgdiA9IC0xLCB5ID0gLTEsIGIgPSAhMSxcbiAgICAgICAgICAgICAgICBfID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0Lmxlbmd0aCA+IG4gKyAxICYmIHQuY2hhckF0KG4gKyAxKSA9PT0gZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgbisrLCBpXG4gICAgICAgICAgICAgICAgfSwgeCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gXyhlKSwgcyA9IFwiQFwiID09PSBlID8gMTQgOiBcIiFcIiA9PT0gZSA/IDIwIDogXCJ5XCIgPT09IGUgJiYgdCA/IDQgOiBcIm9cIiA9PT0gZSA/IDMgOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFwieVwiID09PSBlID8gcyA6IDEsIGEgPSBSZWdFeHAoXCJeXFxcXGR7XCIgKyBuICsgXCIsXCIgKyBzICsgXCJ9XCIpLCBvID0gaS5zdWJzdHJpbmcoaCkubWF0Y2goYSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbykgdGhyb3dcIk1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uIFwiICsgaDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGggKz0gb1swXS5sZW5ndGgsIHBhcnNlSW50KG9bMF0sIDEwKVxuICAgICAgICAgICAgICAgIH0sIHcgPSBmdW5jdGlvbiAodCwgcywgbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IC0xLCBvID0gZS5tYXAoXyh0KSA/IG4gOiBzLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtbdCwgZV1dXG4gICAgICAgICAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtKGVbMV0ubGVuZ3RoIC0gdFsxXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5lYWNoKG8sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5zdWJzdHIoaCwgcy5sZW5ndGgpLnRvTG93ZXJDYXNlKCkgPT09IHMudG9Mb3dlckNhc2UoKSA/IChhID0gdFswXSwgaCArPSBzLmxlbmd0aCwgITEpIDogdm9pZCAwXG4gICAgICAgICAgICAgICAgICAgIH0pLCAtMSAhPT0gYSkgcmV0dXJuIGEgKyAxO1xuICAgICAgICAgICAgICAgICAgICB0aHJvd1wiVW5rbm93biBuYW1lIGF0IHBvc2l0aW9uIFwiICsgaFxuICAgICAgICAgICAgICAgIH0sIGsgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpLmNoYXJBdChoKSAhPT0gdC5jaGFyQXQobikpIHRocm93XCJVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gXCIgKyBoO1xuICAgICAgICAgICAgICAgICAgICBoKytcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yIChuID0gMDsgdC5sZW5ndGggPiBuOyBuKyspIGlmIChiKSBcIidcIiAhPT0gdC5jaGFyQXQobikgfHwgXyhcIidcIikgPyBrKCkgOiBiID0gITE7IGVsc2Ugc3dpdGNoICh0LmNoYXJBdChuKSkge1xuICAgICAgICAgICAgICAgIGNhc2VcImRcIjpcbiAgICAgICAgICAgICAgICAgICAgdiA9IHgoXCJkXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCJEXCI6XG4gICAgICAgICAgICAgICAgICAgIHcoXCJEXCIsIGQsIGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCJvXCI6XG4gICAgICAgICAgICAgICAgICAgIHkgPSB4KFwib1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZVwibVwiOlxuICAgICAgICAgICAgICAgICAgICBnID0geChcIm1cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2VcIk1cIjpcbiAgICAgICAgICAgICAgICAgICAgZyA9IHcoXCJNXCIsIHAsIGYpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCJ5XCI6XG4gICAgICAgICAgICAgICAgICAgIG0gPSB4KFwieVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZVwiQFwiOlxuICAgICAgICAgICAgICAgICAgICByID0gbmV3IERhdGUoeChcIkBcIikpLCBtID0gci5nZXRGdWxsWWVhcigpLCBnID0gci5nZXRNb250aCgpICsgMSwgdiA9IHIuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCIhXCI6XG4gICAgICAgICAgICAgICAgICAgIHIgPSBuZXcgRGF0ZSgoeChcIiFcIikgLSB0aGlzLl90aWNrc1RvMTk3MCkgLyAxZTQpLCBtID0gci5nZXRGdWxsWWVhcigpLCBnID0gci5nZXRNb250aCgpICsgMSwgdiA9IHIuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCInXCI6XG4gICAgICAgICAgICAgICAgICAgIF8oXCInXCIpID8gaygpIDogYiA9ICEwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBrKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IGggJiYgKG8gPSBpLnN1YnN0cihoKSwgIS9eXFxzKy8udGVzdChvKSkpIHRocm93XCJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6IFwiICsgbztcbiAgICAgICAgICAgIGlmICgtMSA9PT0gbSA/IG0gPSAobmV3IERhdGUpLmdldEZ1bGxZZWFyKCkgOiAxMDAgPiBtICYmIChtICs9IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSAtIChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSAlIDEwMCArICh1ID49IG0gPyAwIDogLTEwMCkpLCB5ID4gLTEpIGZvciAoZyA9IDEsIHYgPSB5OyA7KSB7XG4gICAgICAgICAgICAgICAgaWYgKGEgPSB0aGlzLl9nZXREYXlzSW5Nb250aChtLCBnIC0gMSksIGEgPj0gdikgYnJlYWs7XG4gICAgICAgICAgICAgICAgZysrLCB2IC09IGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobSwgZyAtIDEsIHYpKSwgci5nZXRGdWxsWWVhcigpICE9PSBtIHx8IHIuZ2V0TW9udGgoKSArIDEgIT09IGcgfHwgci5nZXREYXRlKCkgIT09IHYpIHRocm93XCJJbnZhbGlkIGRhdGVcIjtcbiAgICAgICAgICAgIHJldHVybiByXG4gICAgICAgIH0sXG4gICAgICAgIEFUT006IFwieXktbW0tZGRcIixcbiAgICAgICAgQ09PS0lFOiBcIkQsIGRkIE0geXlcIixcbiAgICAgICAgSVNPXzg2MDE6IFwieXktbW0tZGRcIixcbiAgICAgICAgUkZDXzgyMjogXCJELCBkIE0geVwiLFxuICAgICAgICBSRkNfODUwOiBcIkRELCBkZC1NLXlcIixcbiAgICAgICAgUkZDXzEwMzY6IFwiRCwgZCBNIHlcIixcbiAgICAgICAgUkZDXzExMjM6IFwiRCwgZCBNIHl5XCIsXG4gICAgICAgIFJGQ18yODIyOiBcIkQsIGQgTSB5eVwiLFxuICAgICAgICBSU1M6IFwiRCwgZCBNIHlcIixcbiAgICAgICAgVElDS1M6IFwiIVwiLFxuICAgICAgICBUSU1FU1RBTVA6IFwiQFwiLFxuICAgICAgICBXM0M6IFwieXktbW0tZGRcIixcbiAgICAgICAgX3RpY2tzVG8xOTcwOiAxZTcgKiA2MCAqIDYwICogMjQgKiAoNzE4Njg1ICsgTWF0aC5mbG9vcig0OTIuNSkgLSBNYXRoLmZsb29yKDE5LjcpICsgTWF0aC5mbG9vcig0LjkyNSkpLFxuICAgICAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiAoZSwgdCwgaSkge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIHZhciBzLCBuID0gKGkgPyBpLmRheU5hbWVzU2hvcnQgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LFxuICAgICAgICAgICAgICAgIGEgPSAoaSA/IGkuZGF5TmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxcbiAgICAgICAgICAgICAgICBvID0gKGkgPyBpLm1vbnRoTmFtZXNTaG9ydCA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxcbiAgICAgICAgICAgICAgICByID0gKGkgPyBpLm1vbnRoTmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLCBoID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmxlbmd0aCA+IHMgKyAxICYmIGUuY2hhckF0KHMgKyAxKSA9PT0gdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgcysrLCBpXG4gICAgICAgICAgICAgICAgfSwgbCA9IGZ1bmN0aW9uIChlLCB0LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gXCJcIiArIHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoKGUpKSBmb3IgKDsgaSA+IHMubGVuZ3RoOykgcyA9IFwiMFwiICsgcztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNcbiAgICAgICAgICAgICAgICB9LCB1ID0gZnVuY3Rpb24gKGUsIHQsIGksIHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoZSkgPyBzW3RdIDogaVt0XVxuICAgICAgICAgICAgICAgIH0sIGQgPSBcIlwiLCBjID0gITE7XG4gICAgICAgICAgICBpZiAodCkgZm9yIChzID0gMDsgZS5sZW5ndGggPiBzOyBzKyspIGlmIChjKSBcIidcIiAhPT0gZS5jaGFyQXQocykgfHwgaChcIidcIikgPyBkICs9IGUuY2hhckF0KHMpIDogYyA9ICExOyBlbHNlIHN3aXRjaCAoZS5jaGFyQXQocykpIHtcbiAgICAgICAgICAgICAgICBjYXNlXCJkXCI6XG4gICAgICAgICAgICAgICAgICAgIGQgKz0gbChcImRcIiwgdC5nZXREYXRlKCksIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCJEXCI6XG4gICAgICAgICAgICAgICAgICAgIGQgKz0gdShcIkRcIiwgdC5nZXREYXkoKSwgbiwgYSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2VcIm9cIjpcbiAgICAgICAgICAgICAgICAgICAgZCArPSBsKFwib1wiLCBNYXRoLnJvdW5kKChuZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksIHQuZ2V0TW9udGgoKSwgdC5nZXREYXRlKCkpLmdldFRpbWUoKSAtIG5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSwgMCwgMCkuZ2V0VGltZSgpKSAvIDg2NGU1KSwgMyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2VcIm1cIjpcbiAgICAgICAgICAgICAgICAgICAgZCArPSBsKFwibVwiLCB0LmdldE1vbnRoKCkgKyAxLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZVwiTVwiOlxuICAgICAgICAgICAgICAgICAgICBkICs9IHUoXCJNXCIsIHQuZ2V0TW9udGgoKSwgbywgcik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2VcInlcIjpcbiAgICAgICAgICAgICAgICAgICAgZCArPSBoKFwieVwiKSA/IHQuZ2V0RnVsbFllYXIoKSA6ICgxMCA+IHQuZ2V0WWVhcigpICUgMTAwID8gXCIwXCIgOiBcIlwiKSArIHQuZ2V0WWVhcigpICUgMTAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCJAXCI6XG4gICAgICAgICAgICAgICAgICAgIGQgKz0gdC5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2VcIiFcIjpcbiAgICAgICAgICAgICAgICAgICAgZCArPSAxZTQgKiB0LmdldFRpbWUoKSArIHRoaXMuX3RpY2tzVG8xOTcwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCInXCI6XG4gICAgICAgICAgICAgICAgICAgIGgoXCInXCIpID8gZCArPSBcIidcIiA6IGMgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZCArPSBlLmNoYXJBdChzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRcbiAgICAgICAgfSxcbiAgICAgICAgX3Bvc3NpYmxlQ2hhcnM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSA9IFwiXCIsIHMgPSAhMSwgbiA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBlLmxlbmd0aCA+IHQgKyAxICYmIGUuY2hhckF0KHQgKyAxKSA9PT0gaTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcyAmJiB0KyssIHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHQgPSAwOyBlLmxlbmd0aCA+IHQ7IHQrKykgaWYgKHMpIFwiJ1wiICE9PSBlLmNoYXJBdCh0KSB8fCBuKFwiJ1wiKSA/IGkgKz0gZS5jaGFyQXQodCkgOiBzID0gITE7IGVsc2Ugc3dpdGNoIChlLmNoYXJBdCh0KSkge1xuICAgICAgICAgICAgICAgIGNhc2VcImRcIjpcbiAgICAgICAgICAgICAgICBjYXNlXCJtXCI6XG4gICAgICAgICAgICAgICAgY2FzZVwieVwiOlxuICAgICAgICAgICAgICAgIGNhc2VcIkBcIjpcbiAgICAgICAgICAgICAgICAgICAgaSArPSBcIjAxMjM0NTY3ODlcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZVwiRFwiOlxuICAgICAgICAgICAgICAgIGNhc2VcIk1cIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgY2FzZVwiJ1wiOlxuICAgICAgICAgICAgICAgICAgICBuKFwiJ1wiKSA/IGkgKz0gXCInXCIgOiBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gZS5jaGFyQXQodClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXQ6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnNldHRpbmdzW3RdID8gZS5zZXR0aW5nc1t0XSA6IHRoaXMuX2RlZmF1bHRzW3RdXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXREYXRlRnJvbUZpZWxkOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUuaW5wdXQudmFsKCkgIT09IGUubGFzdFZhbCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5fZ2V0KGUsIFwiZGF0ZUZvcm1hdFwiKSwgcyA9IGUubGFzdFZhbCA9IGUuaW5wdXQgPyBlLmlucHV0LnZhbCgpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMuX2dldERlZmF1bHREYXRlKGUpLCBhID0gbiwgbyA9IHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5wYXJzZURhdGUoaSwgcywgbykgfHwgblxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHQgPyBcIlwiIDogc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLnNlbGVjdGVkRGF5ID0gYS5nZXREYXRlKCksIGUuZHJhd01vbnRoID0gZS5zZWxlY3RlZE1vbnRoID0gYS5nZXRNb250aCgpLCBlLmRyYXdZZWFyID0gZS5zZWxlY3RlZFllYXIgPSBhLmdldEZ1bGxZZWFyKCksIGUuY3VycmVudERheSA9IHMgPyBhLmdldERhdGUoKSA6IDAsIGUuY3VycmVudE1vbnRoID0gcyA/IGEuZ2V0TW9udGgoKSA6IDAsIGUuY3VycmVudFllYXIgPSBzID8gYS5nZXRGdWxsWWVhcigpIDogMCwgdGhpcy5fYWRqdXN0SW5zdERhdGUoZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2dldERlZmF1bHREYXRlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KGUsIHRoaXMuX2RldGVybWluZURhdGUoZSwgdGhpcy5fZ2V0KGUsIFwiZGVmYXVsdERhdGVcIiksIG5ldyBEYXRlKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2RldGVybWluZURhdGU6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IERhdGU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnNldERhdGUodC5nZXREYXRlKCkgKyBlKSwgdFxuICAgICAgICAgICAgICAgIH0sIGEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZGF0ZXBpY2tlci5wYXJzZURhdGUoZS5kYXRlcGlja2VyLl9nZXQodCwgXCJkYXRlRm9ybWF0XCIpLCBpLCBlLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyh0KSlcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocykge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAoaS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eYy8pID8gZS5kYXRlcGlja2VyLl9nZXREYXRlKHQpIDogbnVsbCkgfHwgbmV3IERhdGUsIGEgPSBuLmdldEZ1bGxZZWFyKCksIG8gPSBuLmdldE1vbnRoKCksIHIgPSBuLmdldERhdGUoKSwgaCA9IC8oWytcXC1dP1swLTldKylcXHMqKGR8RHx3fFd8bXxNfHl8WSk/L2csIGwgPSBoLmV4ZWMoaSk7IGw7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGxbMl0gfHwgXCJkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlXCJkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZVwiRFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByICs9IHBhcnNlSW50KGxbMV0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZVwid1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VcIldcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciArPSA3ICogcGFyc2VJbnQobFsxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlXCJtXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZVwiTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICs9IHBhcnNlSW50KGxbMV0sIDEwKSwgciA9IE1hdGgubWluKHIsIGUuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoYSwgbykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlXCJ5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZVwiWVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhICs9IHBhcnNlSW50KGxbMV0sIDEwKSwgciA9IE1hdGgubWluKHIsIGUuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoYSwgbykpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsID0gaC5leGVjKGkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEsIG8sIHIpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvID0gbnVsbCA9PSBpIHx8IFwiXCIgPT09IGkgPyBzIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgaSA/IGEoaSkgOiBcIm51bWJlclwiID09IHR5cGVvZiBpID8gaXNOYU4oaSkgPyBzIDogbihpKSA6IG5ldyBEYXRlKGkuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBvID0gbyAmJiBcIkludmFsaWQgRGF0ZVwiID09IFwiXCIgKyBvID8gcyA6IG8sIG8gJiYgKG8uc2V0SG91cnMoMCksIG8uc2V0TWludXRlcygwKSwgby5zZXRTZWNvbmRzKDApLCBvLnNldE1pbGxpc2Vjb25kcygwKSksIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG8pXG4gICAgICAgIH0sXG4gICAgICAgIF9kYXlsaWdodFNhdmluZ0FkanVzdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlID8gKGUuc2V0SG91cnMoZS5nZXRIb3VycygpID4gMTIgPyBlLmdldEhvdXJzKCkgKyAyIDogMCksIGUpIDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBfc2V0RGF0ZTogZnVuY3Rpb24gKGUsIHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzID0gIXQsIG4gPSBlLnNlbGVjdGVkTW9udGgsIGEgPSBlLnNlbGVjdGVkWWVhcixcbiAgICAgICAgICAgICAgICBvID0gdGhpcy5fcmVzdHJpY3RNaW5NYXgoZSwgdGhpcy5fZGV0ZXJtaW5lRGF0ZShlLCB0LCBuZXcgRGF0ZSkpO1xuICAgICAgICAgICAgZS5zZWxlY3RlZERheSA9IGUuY3VycmVudERheSA9IG8uZ2V0RGF0ZSgpLCBlLmRyYXdNb250aCA9IGUuc2VsZWN0ZWRNb250aCA9IGUuY3VycmVudE1vbnRoID0gby5nZXRNb250aCgpLCBlLmRyYXdZZWFyID0gZS5zZWxlY3RlZFllYXIgPSBlLmN1cnJlbnRZZWFyID0gby5nZXRGdWxsWWVhcigpLCBuID09PSBlLnNlbGVjdGVkTW9udGggJiYgYSA9PT0gZS5zZWxlY3RlZFllYXIgfHwgaSB8fCB0aGlzLl9ub3RpZnlDaGFuZ2UoZSksIHRoaXMuX2FkanVzdEluc3REYXRlKGUpLCBlLmlucHV0ICYmIGUuaW5wdXQudmFsKHMgPyBcIlwiIDogdGhpcy5fZm9ybWF0RGF0ZShlKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2dldERhdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9ICFlLmN1cnJlbnRZZWFyIHx8IGUuaW5wdXQgJiYgXCJcIiA9PT0gZS5pbnB1dC52YWwoKSA/IG51bGwgOiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShlLmN1cnJlbnRZZWFyLCBlLmN1cnJlbnRNb250aCwgZS5jdXJyZW50RGF5KSk7XG4gICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICB9LFxuICAgICAgICBfYXR0YWNoSGFuZGxlcnM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuX2dldCh0LCBcInN0ZXBNb250aHNcIiksIHMgPSBcIiNcIiArIHQuaWQucmVwbGFjZSgvXFxcXFxcXFwvZywgXCJcXFxcXCIpO1xuICAgICAgICAgICAgdC5kcERpdi5maW5kKFwiW2RhdGEtaGFuZGxlcl1cIikubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJldjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHMsIC1pLCBcIk1cIilcbiAgICAgICAgICAgICAgICAgICAgfSwgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHMsICtpLCBcIk1cIilcbiAgICAgICAgICAgICAgICAgICAgfSwgaGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpXG4gICAgICAgICAgICAgICAgICAgIH0sIHRvZGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShzKVxuICAgICAgICAgICAgICAgICAgICB9LCBzZWxlY3REYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmRhdGVwaWNrZXIuX3NlbGVjdERheShzLCArdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1vbnRoXCIpLCArdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXllYXJcIiksIHRoaXMpLCAhMVxuICAgICAgICAgICAgICAgICAgICB9LCBzZWxlY3RNb250aDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKHMsIHRoaXMsIFwiTVwiKSwgITFcbiAgICAgICAgICAgICAgICAgICAgfSwgc2VsZWN0WWVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKHMsIHRoaXMsIFwiWVwiKSwgITFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5iaW5kKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1ldmVudFwiKSwgdFt0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtaGFuZGxlclwiKV0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfZ2VuZXJhdGVIVE1MOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMsIG4sIGEsIG8sIHIsIGgsIGwsIHUsIGQsIGMsIHAsIGYsIG0sIGcsIHYsIHksIGIsIF8sIHgsIHcsIGssIFQsIEQsIFMsIE0sIEMsIE4sIEEsIFAsIEksIHosIEgsIEYsXG4gICAgICAgICAgICAgICAgRSwgTywgaiwgVywgTCA9IG5ldyBEYXRlLFxuICAgICAgICAgICAgICAgIFIgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShMLmdldEZ1bGxZZWFyKCksIEwuZ2V0TW9udGgoKSwgTC5nZXREYXRlKCkpKSxcbiAgICAgICAgICAgICAgICBZID0gdGhpcy5fZ2V0KGUsIFwiaXNSVExcIiksIEIgPSB0aGlzLl9nZXQoZSwgXCJzaG93QnV0dG9uUGFuZWxcIiksIEogPSB0aGlzLl9nZXQoZSwgXCJoaWRlSWZOb1ByZXZOZXh0XCIpLFxuICAgICAgICAgICAgICAgIHEgPSB0aGlzLl9nZXQoZSwgXCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0XCIpLCBLID0gdGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoZSksXG4gICAgICAgICAgICAgICAgViA9IHRoaXMuX2dldChlLCBcInNob3dDdXJyZW50QXRQb3NcIiksIFUgPSB0aGlzLl9nZXQoZSwgXCJzdGVwTW9udGhzXCIpLCBRID0gMSAhPT0gS1swXSB8fCAxICE9PSBLWzFdLFxuICAgICAgICAgICAgICAgIEcgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChlLmN1cnJlbnREYXkgPyBuZXcgRGF0ZShlLmN1cnJlbnRZZWFyLCBlLmN1cnJlbnRNb250aCwgZS5jdXJyZW50RGF5KSA6IG5ldyBEYXRlKDk5OTksIDksIDkpKSxcbiAgICAgICAgICAgICAgICBYID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShlLCBcIm1pblwiKSwgJCA9IHRoaXMuX2dldE1pbk1heERhdGUoZSwgXCJtYXhcIiksIFogPSBlLmRyYXdNb250aCAtIFYsXG4gICAgICAgICAgICAgICAgZXQgPSBlLmRyYXdZZWFyO1xuICAgICAgICAgICAgaWYgKDAgPiBaICYmIChaICs9IDEyLCBldC0tKSwgJCkgZm9yICh0ID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoJC5nZXRGdWxsWWVhcigpLCAkLmdldE1vbnRoKCkgLSBLWzBdICogS1sxXSArIDEsICQuZ2V0RGF0ZSgpKSksIHQgPSBYICYmIFggPiB0ID8gWCA6IHQ7IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGV0LCBaLCAxKSkgPiB0OykgWi0tLCAwID4gWiAmJiAoWiA9IDExLCBldC0tKTtcbiAgICAgICAgICAgIGZvciAoZS5kcmF3TW9udGggPSBaLCBlLmRyYXdZZWFyID0gZXQsIGkgPSB0aGlzLl9nZXQoZSwgXCJwcmV2VGV4dFwiKSwgaSA9IHEgPyB0aGlzLmZvcm1hdERhdGUoaSwgdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZXQsIFogLSBVLCAxKSksIHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSkgOiBpLCBzID0gdGhpcy5fY2FuQWRqdXN0TW9udGgoZSwgLTEsIGV0LCBaKSA/IFwiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3ByZXYnIGRhdGEtZXZlbnQ9J2NsaWNrJyB0aXRsZT0nXCIgKyBpICsgXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiICsgKFkgPyBcImVcIiA6IFwid1wiKSArIFwiJz5cIiArIGkgKyBcIjwvc3Bhbj48L2E+XCIgOiBKID8gXCJcIiA6IFwiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nXCIgKyBpICsgXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiICsgKFkgPyBcImVcIiA6IFwid1wiKSArIFwiJz5cIiArIGkgKyBcIjwvc3Bhbj48L2E+XCIsIG4gPSB0aGlzLl9nZXQoZSwgXCJuZXh0VGV4dFwiKSwgbiA9IHEgPyB0aGlzLmZvcm1hdERhdGUobiwgdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZXQsIFogKyBVLCAxKSksIHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSkgOiBuLCBhID0gdGhpcy5fY2FuQWRqdXN0TW9udGgoZSwgMSwgZXQsIFopID8gXCI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0nbmV4dCcgZGF0YS1ldmVudD0nY2xpY2snIHRpdGxlPSdcIiArIG4gKyBcIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtXCIgKyAoWSA/IFwid1wiIDogXCJlXCIpICsgXCInPlwiICsgbiArIFwiPC9zcGFuPjwvYT5cIiA6IEogPyBcIlwiIDogXCI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSdcIiArIG4gKyBcIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtXCIgKyAoWSA/IFwid1wiIDogXCJlXCIpICsgXCInPlwiICsgbiArIFwiPC9zcGFuPjwvYT5cIiwgbyA9IHRoaXMuX2dldChlLCBcImN1cnJlbnRUZXh0XCIpLCByID0gdGhpcy5fZ2V0KGUsIFwiZ290b0N1cnJlbnRcIikgJiYgZS5jdXJyZW50RGF5ID8gRyA6IFIsIG8gPSBxID8gdGhpcy5mb3JtYXREYXRlKG8sIHIsIHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSkgOiBvLCBoID0gZS5pbmxpbmUgPyBcIlwiIDogXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPlwiICsgdGhpcy5fZ2V0KGUsIFwiY2xvc2VUZXh0XCIpICsgXCI8L2J1dHRvbj5cIiwgbCA9IEIgPyBcIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudCc+XCIgKyAoWSA/IGggOiBcIlwiKSArICh0aGlzLl9pc0luUmFuZ2UoZSwgcikgPyBcIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ndG9kYXknIGRhdGEtZXZlbnQ9J2NsaWNrJz5cIiArIG8gKyBcIjwvYnV0dG9uPlwiIDogXCJcIikgKyAoWSA/IFwiXCIgOiBoKSArIFwiPC9kaXY+XCIgOiBcIlwiLCB1ID0gcGFyc2VJbnQodGhpcy5fZ2V0KGUsIFwiZmlyc3REYXlcIiksIDEwKSwgdSA9IGlzTmFOKHUpID8gMCA6IHUsIGQgPSB0aGlzLl9nZXQoZSwgXCJzaG93V2Vla1wiKSwgYyA9IHRoaXMuX2dldChlLCBcImRheU5hbWVzXCIpLCBwID0gdGhpcy5fZ2V0KGUsIFwiZGF5TmFtZXNNaW5cIiksIGYgPSB0aGlzLl9nZXQoZSwgXCJtb250aE5hbWVzXCIpLCBtID0gdGhpcy5fZ2V0KGUsIFwibW9udGhOYW1lc1Nob3J0XCIpLCBnID0gdGhpcy5fZ2V0KGUsIFwiYmVmb3JlU2hvd0RheVwiKSwgdiA9IHRoaXMuX2dldChlLCBcInNob3dPdGhlck1vbnRoc1wiKSwgeSA9IHRoaXMuX2dldChlLCBcInNlbGVjdE90aGVyTW9udGhzXCIpLCBiID0gdGhpcy5fZ2V0RGVmYXVsdERhdGUoZSksIF8gPSBcIlwiLCB3ID0gMDsgS1swXSA+IHc7IHcrKykge1xuICAgICAgICAgICAgICAgIGZvciAoayA9IFwiXCIsIHRoaXMubWF4Um93cyA9IDQsIFQgPSAwOyBLWzFdID4gVDsgVCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChEID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZXQsIFosIGUuc2VsZWN0ZWREYXkpKSwgUyA9IFwiIHVpLWNvcm5lci1hbGxcIiwgTSA9IFwiXCIsIFEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNICs9IFwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1ncm91cFwiLCBLWzFdID4gMSkgc3dpdGNoIChUKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNICs9IFwiIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3RcIiwgUyA9IFwiIHVpLWNvcm5lci1cIiArIChZID8gXCJyaWdodFwiIDogXCJsZWZ0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEtbMV0gLSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNICs9IFwiIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdFwiLCBTID0gXCIgdWktY29ybmVyLVwiICsgKFkgPyBcImxlZnRcIiA6IFwicmlnaHRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gKz0gXCIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGVcIiwgUyA9IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIE0gKz0gXCInPlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChNICs9IFwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXhcIiArIFMgKyBcIic+XCIgKyAoL2FsbHxsZWZ0Ly50ZXN0KFMpICYmIDAgPT09IHcgPyBZID8gYSA6IHMgOiBcIlwiKSArICgvYWxsfHJpZ2h0Ly50ZXN0KFMpICYmIDAgPT09IHcgPyBZID8gcyA6IGEgOiBcIlwiKSArIHRoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGUsIFosIGV0LCBYLCAkLCB3ID4gMCB8fCBUID4gMCwgZiwgbSkgKyBcIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPlwiICsgXCI8dHI+XCIsIEMgPSBkID8gXCI8dGggY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPlwiICsgdGhpcy5fZ2V0KGUsIFwid2Vla0hlYWRlclwiKSArIFwiPC90aD5cIiA6IFwiXCIsIHggPSAwOyA3ID4geDsgeCsrKSBOID0gKHggKyB1KSAlIDcsIEMgKz0gXCI8dGggc2NvcGU9J2NvbCdcIiArICgoeCArIHUgKyA2KSAlIDcgPj0gNSA/IFwiIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstZW5kJ1wiIDogXCJcIikgKyBcIj5cIiArIFwiPHNwYW4gdGl0bGU9J1wiICsgY1tOXSArIFwiJz5cIiArIHBbTl0gKyBcIjwvc3Bhbj48L3RoPlwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKE0gKz0gQyArIFwiPC90cj48L3RoZWFkPjx0Ym9keT5cIiwgQSA9IHRoaXMuX2dldERheXNJbk1vbnRoKGV0LCBaKSwgZXQgPT09IGUuc2VsZWN0ZWRZZWFyICYmIFogPT09IGUuc2VsZWN0ZWRNb250aCAmJiAoZS5zZWxlY3RlZERheSA9IE1hdGgubWluKGUuc2VsZWN0ZWREYXksIEEpKSwgUCA9ICh0aGlzLl9nZXRGaXJzdERheU9mTW9udGgoZXQsIFopIC0gdSArIDcpICUgNywgSSA9IE1hdGguY2VpbCgoUCArIEEpIC8gNyksIHogPSBRID8gdGhpcy5tYXhSb3dzID4gSSA/IHRoaXMubWF4Um93cyA6IEkgOiBJLCB0aGlzLm1heFJvd3MgPSB6LCBIID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZXQsIFosIDEgLSBQKSksIEYgPSAwOyB6ID4gRjsgRisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKE0gKz0gXCI8dHI+XCIsIEUgPSBkID8gXCI8dGQgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPlwiICsgdGhpcy5fZ2V0KGUsIFwiY2FsY3VsYXRlV2Vla1wiKShIKSArIFwiPC90ZD5cIiA6IFwiXCIsIHggPSAwOyA3ID4geDsgeCsrKSBPID0gZyA/IGcuYXBwbHkoZS5pbnB1dCA/IGUuaW5wdXRbMF0gOiBudWxsLCBbSF0pIDogWyEwLCBcIlwiXSwgaiA9IEguZ2V0TW9udGgoKSAhPT0gWiwgVyA9IGogJiYgIXkgfHwgIU9bMF0gfHwgWCAmJiBYID4gSCB8fCAkICYmIEggPiAkLCBFICs9IFwiPHRkIGNsYXNzPSdcIiArICgoeCArIHUgKyA2KSAlIDcgPj0gNSA/IFwiIHVpLWRhdGVwaWNrZXItd2Vlay1lbmRcIiA6IFwiXCIpICsgKGogPyBcIiB1aS1kYXRlcGlja2VyLW90aGVyLW1vbnRoXCIgOiBcIlwiKSArIChILmdldFRpbWUoKSA9PT0gRC5nZXRUaW1lKCkgJiYgWiA9PT0gZS5zZWxlY3RlZE1vbnRoICYmIGUuX2tleUV2ZW50IHx8IGIuZ2V0VGltZSgpID09PSBILmdldFRpbWUoKSAmJiBiLmdldFRpbWUoKSA9PT0gRC5nZXRUaW1lKCkgPyBcIiBcIiArIHRoaXMuX2RheU92ZXJDbGFzcyA6IFwiXCIpICsgKFcgPyBcIiBcIiArIHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzICsgXCIgdWktc3RhdGUtZGlzYWJsZWRcIiA6IFwiXCIpICsgKGogJiYgIXYgPyBcIlwiIDogXCIgXCIgKyBPWzFdICsgKEguZ2V0VGltZSgpID09PSBHLmdldFRpbWUoKSA/IFwiIFwiICsgdGhpcy5fY3VycmVudENsYXNzIDogXCJcIikgKyAoSC5nZXRUaW1lKCkgPT09IFIuZ2V0VGltZSgpID8gXCIgdWktZGF0ZXBpY2tlci10b2RheVwiIDogXCJcIikpICsgXCInXCIgKyAoaiAmJiAhdiB8fCAhT1syXSA/IFwiXCIgOiBcIiB0aXRsZT0nXCIgKyBPWzJdLnJlcGxhY2UoLycvZywgXCImIzM5O1wiKSArIFwiJ1wiKSArIChXID8gXCJcIiA6IFwiIGRhdGEtaGFuZGxlcj0nc2VsZWN0RGF5JyBkYXRhLWV2ZW50PSdjbGljaycgZGF0YS1tb250aD0nXCIgKyBILmdldE1vbnRoKCkgKyBcIicgZGF0YS15ZWFyPSdcIiArIEguZ2V0RnVsbFllYXIoKSArIFwiJ1wiKSArIFwiPlwiICsgKGogJiYgIXYgPyBcIiYjeGEwO1wiIDogVyA/IFwiPHNwYW4gY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHQnPlwiICsgSC5nZXREYXRlKCkgKyBcIjwvc3Bhbj5cIiA6IFwiPGEgY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHRcIiArIChILmdldFRpbWUoKSA9PT0gUi5nZXRUaW1lKCkgPyBcIiB1aS1zdGF0ZS1oaWdobGlnaHRcIiA6IFwiXCIpICsgKEguZ2V0VGltZSgpID09PSBHLmdldFRpbWUoKSA/IFwiIHVpLXN0YXRlLWFjdGl2ZVwiIDogXCJcIikgKyAoaiA/IFwiIHVpLXByaW9yaXR5LXNlY29uZGFyeVwiIDogXCJcIikgKyBcIicgaHJlZj0nIyc+XCIgKyBILmdldERhdGUoKSArIFwiPC9hPlwiKSArIFwiPC90ZD5cIiwgSC5zZXREYXRlKEguZ2V0RGF0ZSgpICsgMSksIEggPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChIKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE0gKz0gRSArIFwiPC90cj5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIForKywgWiA+IDExICYmIChaID0gMCwgZXQrKyksIE0gKz0gXCI8L3Rib2R5PjwvdGFibGU+XCIgKyAoUSA/IFwiPC9kaXY+XCIgKyAoS1swXSA+IDAgJiYgVCA9PT0gS1sxXSAtIDEgPyBcIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj5cIiA6IFwiXCIpIDogXCJcIiksIGsgKz0gTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfICs9IGtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfICs9IGwsIGUuX2tleUV2ZW50ID0gITEsIF9cbiAgICAgICAgfSxcbiAgICAgICAgX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOiBmdW5jdGlvbiAoZSwgdCwgaSwgcywgbiwgYSwgbywgcikge1xuICAgICAgICAgICAgdmFyIGgsIGwsIHUsIGQsIGMsIHAsIGYsIG0sIGcgPSB0aGlzLl9nZXQoZSwgXCJjaGFuZ2VNb250aFwiKSwgdiA9IHRoaXMuX2dldChlLCBcImNoYW5nZVllYXJcIiksXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMuX2dldChlLCBcInNob3dNb250aEFmdGVyWWVhclwiKSwgYiA9IFwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+XCIsIF8gPSBcIlwiO1xuICAgICAgICAgICAgaWYgKGEgfHwgIWcpIF8gKz0gXCI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCc+XCIgKyBvW3RdICsgXCI8L3NwYW4+XCI7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoaCA9IHMgJiYgcy5nZXRGdWxsWWVhcigpID09PSBpLCBsID0gbiAmJiBuLmdldEZ1bGxZZWFyKCkgPT09IGksIF8gKz0gXCI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJyBkYXRhLWhhbmRsZXI9J3NlbGVjdE1vbnRoJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPlwiLCB1ID0gMDsgMTIgPiB1OyB1KyspICghaCB8fCB1ID49IHMuZ2V0TW9udGgoKSkgJiYgKCFsIHx8IG4uZ2V0TW9udGgoKSA+PSB1KSAmJiAoXyArPSBcIjxvcHRpb24gdmFsdWU9J1wiICsgdSArIFwiJ1wiICsgKHUgPT09IHQgPyBcIiBzZWxlY3RlZD0nc2VsZWN0ZWQnXCIgOiBcIlwiKSArIFwiPlwiICsgclt1XSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgICAgIF8gKz0gXCI8L3NlbGVjdD5cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHkgfHwgKGIgKz0gXyArICghYSAmJiBnICYmIHYgPyBcIlwiIDogXCImI3hhMDtcIikpLCAhZS55ZWFyc2h0bWwpIGlmIChlLnllYXJzaHRtbCA9IFwiXCIsIGEgfHwgIXYpIGIgKz0gXCI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJz5cIiArIGkgKyBcIjwvc3Bhbj5cIjsgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChkID0gdGhpcy5fZ2V0KGUsIFwieWVhclJhbmdlXCIpLnNwbGl0KFwiOlwiKSwgYyA9IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSwgcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5tYXRjaCgvY1srXFwtXS4qLykgPyBpICsgcGFyc2VJbnQoZS5zdWJzdHJpbmcoMSksIDEwKSA6IGUubWF0Y2goL1srXFwtXS4qLykgPyBjICsgcGFyc2VJbnQoZSwgMTApIDogcGFyc2VJbnQoZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4odCkgPyBjIDogdFxuICAgICAgICAgICAgICAgIH0sIGYgPSBwKGRbMF0pLCBtID0gTWF0aC5tYXgoZiwgcChkWzFdIHx8IFwiXCIpKSwgZiA9IHMgPyBNYXRoLm1heChmLCBzLmdldEZ1bGxZZWFyKCkpIDogZiwgbSA9IG4gPyBNYXRoLm1pbihtLCBuLmdldEZ1bGxZZWFyKCkpIDogbSwgZS55ZWFyc2h0bWwgKz0gXCI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz5cIjsgbSA+PSBmOyBmKyspIGUueWVhcnNodG1sICs9IFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBmICsgXCInXCIgKyAoZiA9PT0gaSA/IFwiIHNlbGVjdGVkPSdzZWxlY3RlZCdcIiA6IFwiXCIpICsgXCI+XCIgKyBmICsgXCI8L29wdGlvbj5cIjtcbiAgICAgICAgICAgICAgICBlLnllYXJzaHRtbCArPSBcIjwvc2VsZWN0PlwiLCBiICs9IGUueWVhcnNodG1sLCBlLnllYXJzaHRtbCA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiICs9IHRoaXMuX2dldChlLCBcInllYXJTdWZmaXhcIiksIHkgJiYgKGIgKz0gKCFhICYmIGcgJiYgdiA/IFwiXCIgOiBcIiYjeGEwO1wiKSArIF8pLCBiICs9IFwiPC9kaXY+XCJcbiAgICAgICAgfSxcbiAgICAgICAgX2FkanVzdEluc3REYXRlOiBmdW5jdGlvbiAoZSwgdCwgaSkge1xuICAgICAgICAgICAgdmFyIHMgPSBlLmRyYXdZZWFyICsgKFwiWVwiID09PSBpID8gdCA6IDApLCBuID0gZS5kcmF3TW9udGggKyAoXCJNXCIgPT09IGkgPyB0IDogMCksXG4gICAgICAgICAgICAgICAgYSA9IE1hdGgubWluKGUuc2VsZWN0ZWREYXksIHRoaXMuX2dldERheXNJbk1vbnRoKHMsIG4pKSArIChcIkRcIiA9PT0gaSA/IHQgOiAwKSxcbiAgICAgICAgICAgICAgICBvID0gdGhpcy5fcmVzdHJpY3RNaW5NYXgoZSwgdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUocywgbiwgYSkpKTtcbiAgICAgICAgICAgIGUuc2VsZWN0ZWREYXkgPSBvLmdldERhdGUoKSwgZS5kcmF3TW9udGggPSBlLnNlbGVjdGVkTW9udGggPSBvLmdldE1vbnRoKCksIGUuZHJhd1llYXIgPSBlLnNlbGVjdGVkWWVhciA9IG8uZ2V0RnVsbFllYXIoKSwgKFwiTVwiID09PSBpIHx8IFwiWVwiID09PSBpKSAmJiB0aGlzLl9ub3RpZnlDaGFuZ2UoZSlcbiAgICAgICAgfSxcbiAgICAgICAgX3Jlc3RyaWN0TWluTWF4OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGUsIFwibWluXCIpLCBzID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShlLCBcIm1heFwiKSwgbiA9IGkgJiYgaSA+IHQgPyBpIDogdDtcbiAgICAgICAgICAgIHJldHVybiBzICYmIG4gPiBzID8gcyA6IG5cbiAgICAgICAgfSxcbiAgICAgICAgX25vdGlmeUNoYW5nZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5fZ2V0KGUsIFwib25DaGFuZ2VNb250aFllYXJcIik7XG4gICAgICAgICAgICB0ICYmIHQuYXBwbHkoZS5pbnB1dCA/IGUuaW5wdXRbMF0gOiBudWxsLCBbZS5zZWxlY3RlZFllYXIsIGUuc2VsZWN0ZWRNb250aCArIDEsIGVdKVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0TnVtYmVyT2ZNb250aHM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuX2dldChlLCBcIm51bWJlck9mTW9udGhzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IFsxLCAxXSA6IFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgPyBbMSwgdF0gOiB0XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRNaW5NYXhEYXRlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoZSwgdGhpcy5fZ2V0KGUsIHQgKyBcIkRhdGVcIiksIG51bGwpXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXREYXlzSW5Nb250aDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiAzMiAtIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGUsIHQsIDMyKSkuZ2V0RGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRGaXJzdERheU9mTW9udGg6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZSwgdCwgMSkuZ2V0RGF5KClcbiAgICAgICAgfSxcbiAgICAgICAgX2NhbkFkanVzdE1vbnRoOiBmdW5jdGlvbiAoZSwgdCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9nZXROdW1iZXJPZk1vbnRocyhlKSxcbiAgICAgICAgICAgICAgICBhID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaSwgcyArICgwID4gdCA/IHQgOiBuWzBdICogblsxXSksIDEpKTtcbiAgICAgICAgICAgIHJldHVybiAwID4gdCAmJiBhLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoYS5nZXRGdWxsWWVhcigpLCBhLmdldE1vbnRoKCkpKSwgdGhpcy5faXNJblJhbmdlKGUsIGEpXG4gICAgICAgIH0sXG4gICAgICAgIF9pc0luUmFuZ2U6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiA9IHRoaXMuX2dldE1pbk1heERhdGUoZSwgXCJtaW5cIiksIGEgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGUsIFwibWF4XCIpLCBvID0gbnVsbCwgciA9IG51bGwsXG4gICAgICAgICAgICAgICAgaCA9IHRoaXMuX2dldChlLCBcInllYXJSYW5nZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBoICYmIChpID0gaC5zcGxpdChcIjpcIiksIHMgPSAobmV3IERhdGUpLmdldEZ1bGxZZWFyKCksIG8gPSBwYXJzZUludChpWzBdLCAxMCksIHIgPSBwYXJzZUludChpWzFdLCAxMCksIGlbMF0ubWF0Y2goL1srXFwtXS4qLykgJiYgKG8gKz0gcyksIGlbMV0ubWF0Y2goL1srXFwtXS4qLykgJiYgKHIgKz0gcykpLCAoIW4gfHwgdC5nZXRUaW1lKCkgPj0gbi5nZXRUaW1lKCkpICYmICghYSB8fCB0LmdldFRpbWUoKSA8PSBhLmdldFRpbWUoKSkgJiYgKCFvIHx8IHQuZ2V0RnVsbFllYXIoKSA+PSBvKSAmJiAoIXIgfHwgciA+PSB0LmdldEZ1bGxZZWFyKCkpXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRGb3JtYXRDb25maWc6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuX2dldChlLCBcInNob3J0WWVhckN1dG9mZlwiKTtcbiAgICAgICAgICAgIHJldHVybiB0ID0gXCJzdHJpbmdcIiAhPSB0eXBlb2YgdCA/IHQgOiAobmV3IERhdGUpLmdldEZ1bGxZZWFyKCkgJSAxMDAgKyBwYXJzZUludCh0LCAxMCksIHtcbiAgICAgICAgICAgICAgICBzaG9ydFllYXJDdXRvZmY6IHQsXG4gICAgICAgICAgICAgICAgZGF5TmFtZXNTaG9ydDogdGhpcy5fZ2V0KGUsIFwiZGF5TmFtZXNTaG9ydFwiKSxcbiAgICAgICAgICAgICAgICBkYXlOYW1lczogdGhpcy5fZ2V0KGUsIFwiZGF5TmFtZXNcIiksXG4gICAgICAgICAgICAgICAgbW9udGhOYW1lc1Nob3J0OiB0aGlzLl9nZXQoZSwgXCJtb250aE5hbWVzU2hvcnRcIiksXG4gICAgICAgICAgICAgICAgbW9udGhOYW1lczogdGhpcy5fZ2V0KGUsIFwibW9udGhOYW1lc1wiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfZm9ybWF0RGF0ZTogZnVuY3Rpb24gKGUsIHQsIGksIHMpIHtcbiAgICAgICAgICAgIHQgfHwgKGUuY3VycmVudERheSA9IGUuc2VsZWN0ZWREYXksIGUuY3VycmVudE1vbnRoID0gZS5zZWxlY3RlZE1vbnRoLCBlLmN1cnJlbnRZZWFyID0gZS5zZWxlY3RlZFllYXIpO1xuICAgICAgICAgICAgdmFyIG4gPSB0ID8gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQgOiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShzLCBpLCB0KSkgOiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShlLmN1cnJlbnRZZWFyLCBlLmN1cnJlbnRNb250aCwgZS5jdXJyZW50RGF5KSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldChlLCBcImRhdGVGb3JtYXRcIiksIG4sIHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSlcbiAgICAgICAgfVxuICAgIH0pLCBlLmZuLmRhdGVwaWNrZXIgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm4gdGhpcztcbiAgICAgICAgZS5kYXRlcGlja2VyLmluaXRpYWxpemVkIHx8IChlKGRvY3VtZW50KS5tb3VzZWRvd24oZS5kYXRlcGlja2VyLl9jaGVja0V4dGVybmFsQ2xpY2spLCBlLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQgPSAhMCksIDAgPT09IGUoXCIjXCIgKyBlLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoICYmIGUoXCJib2R5XCIpLmFwcGVuZChlLmRhdGVwaWNrZXIuZHBEaXYpO1xuICAgICAgICB2YXIgaSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIHJldHVybiBcInN0cmluZ1wiICE9IHR5cGVvZiB0IHx8IFwiaXNEaXNhYmxlZFwiICE9PSB0ICYmIFwiZ2V0RGF0ZVwiICE9PSB0ICYmIFwid2lkZ2V0XCIgIT09IHQgPyBcIm9wdGlvblwiID09PSB0ICYmIDIgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgYXJndW1lbnRzWzFdID8gZS5kYXRlcGlja2VyW1wiX1wiICsgdCArIFwiRGF0ZXBpY2tlclwiXS5hcHBseShlLmRhdGVwaWNrZXIsIFt0aGlzWzBdXS5jb25jYXQoaSkpIDogdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBlLmRhdGVwaWNrZXJbXCJfXCIgKyB0ICsgXCJEYXRlcGlja2VyXCJdLmFwcGx5KGUuZGF0ZXBpY2tlciwgW3RoaXNdLmNvbmNhdChpKSkgOiBlLmRhdGVwaWNrZXIuX2F0dGFjaERhdGVwaWNrZXIodGhpcywgdClcbiAgICAgICAgfSkgOiBlLmRhdGVwaWNrZXJbXCJfXCIgKyB0ICsgXCJEYXRlcGlja2VyXCJdLmFwcGx5KGUuZGF0ZXBpY2tlciwgW3RoaXNbMF1dLmNvbmNhdChpKSlcbiAgICB9LCBlLmRhdGVwaWNrZXIgPSBuZXcgbiwgZS5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gITEsIGUuZGF0ZXBpY2tlci51dWlkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCksIGUuZGF0ZXBpY2tlci52ZXJzaW9uID0gXCIxLjExLjJcIiwgZS5kYXRlcGlja2VyLCBlLndpZGdldChcInVpLmRyYWdnYWJsZVwiLCBlLnVpLm1vdXNlLCB7XG4gICAgICAgIHZlcnNpb246IFwiMS4xMS4yXCIsXG4gICAgICAgIHdpZGdldEV2ZW50UHJlZml4OiBcImRyYWdcIixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYWRkQ2xhc3NlczogITAsXG4gICAgICAgICAgICBhcHBlbmRUbzogXCJwYXJlbnRcIixcbiAgICAgICAgICAgIGF4aXM6ICExLFxuICAgICAgICAgICAgY29ubmVjdFRvU29ydGFibGU6ICExLFxuICAgICAgICAgICAgY29udGFpbm1lbnQ6ICExLFxuICAgICAgICAgICAgY3Vyc29yOiBcImF1dG9cIixcbiAgICAgICAgICAgIGN1cnNvckF0OiAhMSxcbiAgICAgICAgICAgIGdyaWQ6ICExLFxuICAgICAgICAgICAgaGFuZGxlOiAhMSxcbiAgICAgICAgICAgIGhlbHBlcjogXCJvcmlnaW5hbFwiLFxuICAgICAgICAgICAgaWZyYW1lRml4OiAhMSxcbiAgICAgICAgICAgIG9wYWNpdHk6ICExLFxuICAgICAgICAgICAgcmVmcmVzaFBvc2l0aW9uczogITEsXG4gICAgICAgICAgICByZXZlcnQ6ICExLFxuICAgICAgICAgICAgcmV2ZXJ0RHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgIHNjb3BlOiBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHNjcm9sbDogITAsXG4gICAgICAgICAgICBzY3JvbGxTZW5zaXRpdml0eTogMjAsXG4gICAgICAgICAgICBzY3JvbGxTcGVlZDogMjAsXG4gICAgICAgICAgICBzbmFwOiAhMSxcbiAgICAgICAgICAgIHNuYXBNb2RlOiBcImJvdGhcIixcbiAgICAgICAgICAgIHNuYXBUb2xlcmFuY2U6IDIwLFxuICAgICAgICAgICAgc3RhY2s6ICExLFxuICAgICAgICAgICAgekluZGV4OiAhMSxcbiAgICAgICAgICAgIGRyYWc6IG51bGwsXG4gICAgICAgICAgICBzdGFydDogbnVsbCxcbiAgICAgICAgICAgIHN0b3A6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXCJvcmlnaW5hbFwiID09PSB0aGlzLm9wdGlvbnMuaGVscGVyICYmIHRoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKSwgdGhpcy5vcHRpb25zLmFkZENsYXNzZXMgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktZHJhZ2dhYmxlXCIpLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktZHJhZ2dhYmxlLWRpc2FibGVkXCIpLCB0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKSwgdGhpcy5fbW91c2VJbml0KClcbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKGUsIHQpLCBcImhhbmRsZVwiID09PSBlICYmICh0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKSwgdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCkpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuaGVscGVyIHx8IHRoaXMuZWxlbWVudCkuaXMoXCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpID8gKHRoaXMuZGVzdHJveU9uQ2xlYXIgPSAhMCwgdm9pZCAwKSA6ICh0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1kcmFnZ2FibGUgdWktZHJhZ2dhYmxlLWRyYWdnaW5nIHVpLWRyYWdnYWJsZS1kaXNhYmxlZFwiKSwgdGhpcy5fcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lKCksIHRoaXMuX21vdXNlRGVzdHJveSgpLCB2b2lkIDApXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZUNhcHR1cmU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ibHVyQWN0aXZlRWxlbWVudCh0KSwgdGhpcy5oZWxwZXIgfHwgaS5kaXNhYmxlZCB8fCBlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLXJlc2l6YWJsZS1oYW5kbGVcIikubGVuZ3RoID4gMCA/ICExIDogKHRoaXMuaGFuZGxlID0gdGhpcy5fZ2V0SGFuZGxlKHQpLCB0aGlzLmhhbmRsZSA/ICh0aGlzLl9ibG9ja0ZyYW1lcyhpLmlmcmFtZUZpeCA9PT0gITAgPyBcImlmcmFtZVwiIDogaS5pZnJhbWVGaXgpLCAhMCkgOiAhMSlcbiAgICAgICAgfSxcbiAgICAgICAgX2Jsb2NrRnJhbWVzOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdGhpcy5pZnJhbWVCbG9ja3MgPSB0aGlzLmRvY3VtZW50LmZpbmQodCkubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGUodGhpcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUoXCI8ZGl2PlwiKS5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpLmFwcGVuZFRvKHQucGFyZW50KCkpLm91dGVyV2lkdGgodC5vdXRlcldpZHRoKCkpLm91dGVySGVpZ2h0KHQub3V0ZXJIZWlnaHQoKSkub2Zmc2V0KHQub2Zmc2V0KCkpWzBdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfdW5ibG9ja0ZyYW1lczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pZnJhbWVCbG9ja3MgJiYgKHRoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpLCBkZWxldGUgdGhpcy5pZnJhbWVCbG9ja3MpXG4gICAgICAgIH0sXG4gICAgICAgIF9ibHVyQWN0aXZlRWxlbWVudDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5kb2N1bWVudFswXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZUVsZW1lbnQuaXModC50YXJnZXQpKSB0cnkge1xuICAgICAgICAgICAgICAgIGkuYWN0aXZlRWxlbWVudCAmJiBcImJvZHlcIiAhPT0gaS5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgZShpLmFjdGl2ZUVsZW1lbnQpLmJsdXIoKVxuICAgICAgICAgICAgfSBjYXRjaCAocykge1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VTdGFydDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVscGVyID0gdGhpcy5fY3JlYXRlSGVscGVyKHQpLCB0aGlzLmhlbHBlci5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKSwgdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpLCBlLnVpLmRkbWFuYWdlciAmJiAoZS51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXMpLCB0aGlzLl9jYWNoZU1hcmdpbnMoKSwgdGhpcy5jc3NQb3NpdGlvbiA9IHRoaXMuaGVscGVyLmNzcyhcInBvc2l0aW9uXCIpLCB0aGlzLnNjcm9sbFBhcmVudCA9IHRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCghMCksIHRoaXMub2Zmc2V0UGFyZW50ID0gdGhpcy5oZWxwZXIub2Zmc2V0UGFyZW50KCksIHRoaXMuaGFzRml4ZWRBbmNlc3RvciA9IHRoaXMuaGVscGVyLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImZpeGVkXCIgPT09IGUodGhpcykuY3NzKFwicG9zaXRpb25cIilcbiAgICAgICAgICAgIH0pLmxlbmd0aCA+IDAsIHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCksIHRoaXMuX3JlZnJlc2hPZmZzZXRzKHQpLCB0aGlzLm9yaWdpbmFsUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbih0LCAhMSksIHRoaXMub3JpZ2luYWxQYWdlWCA9IHQucGFnZVgsIHRoaXMub3JpZ2luYWxQYWdlWSA9IHQucGFnZVksIGkuY3Vyc29yQXQgJiYgdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihpLmN1cnNvckF0KSwgdGhpcy5fc2V0Q29udGFpbm1lbnQoKSwgdGhpcy5fdHJpZ2dlcihcInN0YXJ0XCIsIHQpID09PSAhMSA/ICh0aGlzLl9jbGVhcigpLCAhMSkgOiAodGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpLCBlLnVpLmRkbWFuYWdlciAmJiAhaS5kcm9wQmVoYXZpb3VyICYmIGUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsIHQpLCB0aGlzLl9ub3JtYWxpemVSaWdodEJvdHRvbSgpLCB0aGlzLl9tb3VzZURyYWcodCwgITApLCBlLnVpLmRkbWFuYWdlciAmJiBlLnVpLmRkbWFuYWdlci5kcmFnU3RhcnQodGhpcywgdCksICEwKVxuICAgICAgICB9LFxuICAgICAgICBfcmVmcmVzaE9mZnNldHM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IHRoaXMucG9zaXRpb25BYnMudG9wIC0gdGhpcy5tYXJnaW5zLnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnBvc2l0aW9uQWJzLmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdCxcbiAgICAgICAgICAgICAgICBzY3JvbGw6ICExLFxuICAgICAgICAgICAgICAgIHBhcmVudDogdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgcmVsYXRpdmU6IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KClcbiAgICAgICAgICAgIH0sIHRoaXMub2Zmc2V0LmNsaWNrID0ge2xlZnQ6IGUucGFnZVggLSB0aGlzLm9mZnNldC5sZWZ0LCB0b3A6IGUucGFnZVkgLSB0aGlzLm9mZnNldC50b3B9XG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZURyYWc6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNGaXhlZEFuY2VzdG9yICYmICh0aGlzLm9mZnNldC5wYXJlbnQgPSB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSksIHRoaXMucG9zaXRpb24gPSB0aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKHQsICEwKSwgdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKFwiYWJzb2x1dGVcIiksICFpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLl91aUhhc2goKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJpZ2dlcihcImRyYWdcIiwgdCwgcykgPT09ICExKSByZXR1cm4gdGhpcy5fbW91c2VVcCh7fSksICExO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBzLnBvc2l0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdCA9IHRoaXMucG9zaXRpb24ubGVmdCArIFwicHhcIiwgdGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wID0gdGhpcy5wb3NpdGlvbi50b3AgKyBcInB4XCIsIGUudWkuZGRtYW5hZ2VyICYmIGUudWkuZGRtYW5hZ2VyLmRyYWcodGhpcywgdCksICExXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZVN0b3A6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMsIHMgPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBlLnVpLmRkbWFuYWdlciAmJiAhdGhpcy5vcHRpb25zLmRyb3BCZWhhdmlvdXIgJiYgKHMgPSBlLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsIHQpKSwgdGhpcy5kcm9wcGVkICYmIChzID0gdGhpcy5kcm9wcGVkLCB0aGlzLmRyb3BwZWQgPSAhMSksIFwiaW52YWxpZFwiID09PSB0aGlzLm9wdGlvbnMucmV2ZXJ0ICYmICFzIHx8IFwidmFsaWRcIiA9PT0gdGhpcy5vcHRpb25zLnJldmVydCAmJiBzIHx8IHRoaXMub3B0aW9ucy5yZXZlcnQgPT09ICEwIHx8IGUuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMucmV2ZXJ0KSAmJiB0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LCBzKSA/IGUodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLCBwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0RHVyYXRpb24sIDEwKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGkuX3RyaWdnZXIoXCJzdG9wXCIsIHQpICE9PSAhMSAmJiBpLl9jbGVhcigpXG4gICAgICAgICAgICB9KSA6IHRoaXMuX3RyaWdnZXIoXCJzdG9wXCIsIHQpICE9PSAhMSAmJiB0aGlzLl9jbGVhcigpLCAhMVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VVcDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bmJsb2NrRnJhbWVzKCksIGUudWkuZGRtYW5hZ2VyICYmIGUudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKHRoaXMsIHQpLCB0aGlzLmhhbmRsZUVsZW1lbnQuaXModC50YXJnZXQpICYmIHRoaXMuZWxlbWVudC5mb2N1cygpLCBlLnVpLm1vdXNlLnByb3RvdHlwZS5fbW91c2VVcC5jYWxsKHRoaXMsIHQpXG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVscGVyLmlzKFwiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKSA/IHRoaXMuX21vdXNlVXAoe30pIDogdGhpcy5fY2xlYXIoKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0SGFuZGxlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5oYW5kbGUgPyAhIWUodC50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSkpLmxlbmd0aCA6ICEwXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRIYW5kbGVDbGFzc05hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRWxlbWVudCA9IHRoaXMub3B0aW9ucy5oYW5kbGUgPyB0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaGFuZGxlKSA6IHRoaXMuZWxlbWVudCwgdGhpcy5oYW5kbGVFbGVtZW50LmFkZENsYXNzKFwidWktZHJhZ2dhYmxlLWhhbmRsZVwiKVxuICAgICAgICB9LFxuICAgICAgICBfcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1kcmFnZ2FibGUtaGFuZGxlXCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9jcmVhdGVIZWxwZXI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMub3B0aW9ucywgcyA9IGUuaXNGdW5jdGlvbihpLmhlbHBlciksXG4gICAgICAgICAgICAgICAgbiA9IHMgPyBlKGkuaGVscGVyLmFwcGx5KHRoaXMuZWxlbWVudFswXSwgW3RdKSkgOiBcImNsb25lXCIgPT09IGkuaGVscGVyID8gdGhpcy5lbGVtZW50LmNsb25lKCkucmVtb3ZlQXR0cihcImlkXCIpIDogdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuIG4ucGFyZW50cyhcImJvZHlcIikubGVuZ3RoIHx8IG4uYXBwZW5kVG8oXCJwYXJlbnRcIiA9PT0gaS5hcHBlbmRUbyA/IHRoaXMuZWxlbWVudFswXS5wYXJlbnROb2RlIDogaS5hcHBlbmRUbyksIHMgJiYgblswXSA9PT0gdGhpcy5lbGVtZW50WzBdICYmIHRoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKSwgblswXSA9PT0gdGhpcy5lbGVtZW50WzBdIHx8IC8oZml4ZWR8YWJzb2x1dGUpLy50ZXN0KG4uY3NzKFwicG9zaXRpb25cIikpIHx8IG4uY3NzKFwicG9zaXRpb25cIiwgXCJhYnNvbHV0ZVwiKSwgblxuICAgICAgICB9LFxuICAgICAgICBfc2V0UG9zaXRpb25SZWxhdGl2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgL14oPzpyfGF8ZikvLnRlc3QodGhpcy5lbGVtZW50LmNzcyhcInBvc2l0aW9uXCIpKSB8fCAodGhpcy5lbGVtZW50WzBdLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiKVxuICAgICAgICB9LFxuICAgICAgICBfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgKHQgPSB0LnNwbGl0KFwiIFwiKSksIGUuaXNBcnJheSh0KSAmJiAodCA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiArdFswXSxcbiAgICAgICAgICAgICAgICB0b3A6ICt0WzFdIHx8IDBcbiAgICAgICAgICAgIH0pLCBcImxlZnRcIiBpbiB0ICYmICh0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gdC5sZWZ0ICsgdGhpcy5tYXJnaW5zLmxlZnQpLCBcInJpZ2h0XCIgaW4gdCAmJiAodGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0LnJpZ2h0ICsgdGhpcy5tYXJnaW5zLmxlZnQpLCBcInRvcFwiIGluIHQgJiYgKHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IHQudG9wICsgdGhpcy5tYXJnaW5zLnRvcCksIFwiYm90dG9tXCIgaW4gdCAmJiAodGhpcy5vZmZzZXQuY2xpY2sudG9wID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0LmJvdHRvbSArIHRoaXMubWFyZ2lucy50b3ApXG4gICAgICAgIH0sXG4gICAgICAgIF9pc1Jvb3ROb2RlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIC8oaHRtbHxib2R5KS9pLnRlc3QoZS50YWdOYW1lKSB8fCBlID09PSB0aGlzLmRvY3VtZW50WzBdXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRQYXJlbnRPZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCksIGkgPSB0aGlzLmRvY3VtZW50WzBdO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJzb2x1dGVcIiA9PT0gdGhpcy5jc3NQb3NpdGlvbiAmJiB0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gaSAmJiBlLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkgJiYgKHQubGVmdCArPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCksIHQudG9wICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpKSwgdGhpcy5faXNSb290Tm9kZSh0aGlzLm9mZnNldFBhcmVudFswXSkgJiYgKHQgPSB7XG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgdG9wOiB0LnRvcCArIChwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwgMTApIHx8IDApLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHQubGVmdCArIChwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksIDEwKSB8fCAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0UmVsYXRpdmVPZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChcInJlbGF0aXZlXCIgIT09IHRoaXMuY3NzUG9zaXRpb24pIHJldHVybiB7dG9wOiAwLCBsZWZ0OiAwfTtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5lbGVtZW50LnBvc2l0aW9uKCksIHQgPSB0aGlzLl9pc1Jvb3ROb2RlKHRoaXMuc2Nyb2xsUGFyZW50WzBdKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9wOiBlLnRvcCAtIChwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoXCJ0b3BcIiksIDEwKSB8fCAwKSArICh0ID8gMCA6IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpKSxcbiAgICAgICAgICAgICAgICBsZWZ0OiBlLmxlZnQgLSAocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKFwibGVmdFwiKSwgMTApIHx8IDApICsgKHQgPyAwIDogdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY2FjaGVNYXJnaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmdpbnMgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogcGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksIDEwKSB8fCAwLFxuICAgICAgICAgICAgICAgIHRvcDogcGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcyhcIm1hcmdpblRvcFwiKSwgMTApIHx8IDAsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoXCJtYXJnaW5SaWdodFwiKSwgMTApIHx8IDAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiBwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpLCAxMCkgfHwgMFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IHt3aWR0aDogdGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLCBoZWlnaHQ6IHRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRDb250YWlubWVudDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMsIG4gPSB0aGlzLm9wdGlvbnMsIGEgPSB0aGlzLmRvY3VtZW50WzBdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVsYXRpdmVDb250YWluZXIgPSBudWxsLCBuLmNvbnRhaW5tZW50ID8gXCJ3aW5kb3dcIiA9PT0gbi5jb250YWlubWVudCA/ICh0aGlzLmNvbnRhaW5tZW50ID0gW2Uod2luZG93KS5zY3JvbGxMZWZ0KCkgLSB0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0IC0gdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsIGUod2luZG93KS5zY3JvbGxUb3AoKSAtIHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAtIHRoaXMub2Zmc2V0LnBhcmVudC50b3AsIGUod2luZG93KS5zY3JvbGxMZWZ0KCkgKyBlKHdpbmRvdykud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwgZSh3aW5kb3cpLnNjcm9sbFRvcCgpICsgKGUod2luZG93KS5oZWlnaHQoKSB8fCBhLmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wXSwgdm9pZCAwKSA6IFwiZG9jdW1lbnRcIiA9PT0gbi5jb250YWlubWVudCA/ICh0aGlzLmNvbnRhaW5tZW50ID0gWzAsIDAsIGUoYSkud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwgKGUoYSkuaGVpZ2h0KCkgfHwgYS5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcF0sIHZvaWQgMCkgOiBuLmNvbnRhaW5tZW50LmNvbnN0cnVjdG9yID09PSBBcnJheSA/ICh0aGlzLmNvbnRhaW5tZW50ID0gbi5jb250YWlubWVudCwgdm9pZCAwKSA6IChcInBhcmVudFwiID09PSBuLmNvbnRhaW5tZW50ICYmIChuLmNvbnRhaW5tZW50ID0gdGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSksIGkgPSBlKG4uY29udGFpbm1lbnQpLCBzID0gaVswXSwgcyAmJiAodCA9IC8oc2Nyb2xsfGF1dG8pLy50ZXN0KGkuY3NzKFwib3ZlcmZsb3dcIikpLCB0aGlzLmNvbnRhaW5tZW50ID0gWyhwYXJzZUludChpLmNzcyhcImJvcmRlckxlZnRXaWR0aFwiKSwgMTApIHx8IDApICsgKHBhcnNlSW50KGkuY3NzKFwicGFkZGluZ0xlZnRcIiksIDEwKSB8fCAwKSwgKHBhcnNlSW50KGkuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksIDEwKSB8fCAwKSArIChwYXJzZUludChpLmNzcyhcInBhZGRpbmdUb3BcIiksIDEwKSB8fCAwKSwgKHQgPyBNYXRoLm1heChzLnNjcm9sbFdpZHRoLCBzLm9mZnNldFdpZHRoKSA6IHMub2Zmc2V0V2lkdGgpIC0gKHBhcnNlSW50KGkuY3NzKFwiYm9yZGVyUmlnaHRXaWR0aFwiKSwgMTApIHx8IDApIC0gKHBhcnNlSW50KGkuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLCAxMCkgfHwgMCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gdGhpcy5tYXJnaW5zLmxlZnQgLSB0aGlzLm1hcmdpbnMucmlnaHQsICh0ID8gTWF0aC5tYXgocy5zY3JvbGxIZWlnaHQsIHMub2Zmc2V0SGVpZ2h0KSA6IHMub2Zmc2V0SGVpZ2h0KSAtIChwYXJzZUludChpLmNzcyhcImJvcmRlckJvdHRvbVdpZHRoXCIpLCAxMCkgfHwgMCkgLSAocGFyc2VJbnQoaS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpLCAxMCkgfHwgMCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3AgLSB0aGlzLm1hcmdpbnMuYm90dG9tXSwgdGhpcy5yZWxhdGl2ZUNvbnRhaW5lciA9IGkpLCB2b2lkIDApIDogKHRoaXMuY29udGFpbm1lbnQgPSBudWxsLCB2b2lkIDApXG4gICAgICAgIH0sXG4gICAgICAgIF9jb252ZXJ0UG9zaXRpb25UbzogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHQgfHwgKHQgPSB0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIHZhciBpID0gXCJhYnNvbHV0ZVwiID09PSBlID8gMSA6IC0xLCBzID0gdGhpcy5faXNSb290Tm9kZSh0aGlzLnNjcm9sbFBhcmVudFswXSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvcDogdC50b3AgKyB0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AgKiBpICsgdGhpcy5vZmZzZXQucGFyZW50LnRvcCAqIGkgLSAoXCJmaXhlZFwiID09PSB0aGlzLmNzc1Bvc2l0aW9uID8gLXRoaXMub2Zmc2V0LnNjcm9sbC50b3AgOiBzID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC50b3ApICogaSxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0LmxlZnQgKyB0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0ICogaSArIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICogaSAtIChcImZpeGVkXCIgPT09IHRoaXMuY3NzUG9zaXRpb24gPyAtdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgOiBzID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0KSAqIGlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2dlbmVyYXRlUG9zaXRpb246IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiwgYSwgbyA9IHRoaXMub3B0aW9ucywgciA9IHRoaXMuX2lzUm9vdE5vZGUodGhpcy5zY3JvbGxQYXJlbnRbMF0pLCBoID0gZS5wYWdlWCwgbCA9IGUucGFnZVk7XG4gICAgICAgICAgICByZXR1cm4gciAmJiB0aGlzLm9mZnNldC5zY3JvbGwgfHwgKHRoaXMub2Zmc2V0LnNjcm9sbCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKVxuICAgICAgICAgICAgfSksIHQgJiYgKHRoaXMuY29udGFpbm1lbnQgJiYgKHRoaXMucmVsYXRpdmVDb250YWluZXIgPyAocyA9IHRoaXMucmVsYXRpdmVDb250YWluZXIub2Zmc2V0KCksIGkgPSBbdGhpcy5jb250YWlubWVudFswXSArIHMubGVmdCwgdGhpcy5jb250YWlubWVudFsxXSArIHMudG9wLCB0aGlzLmNvbnRhaW5tZW50WzJdICsgcy5sZWZ0LCB0aGlzLmNvbnRhaW5tZW50WzNdICsgcy50b3BdKSA6IGkgPSB0aGlzLmNvbnRhaW5tZW50LCBlLnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IGlbMF0gJiYgKGggPSBpWzBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdCksIGUucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPCBpWzFdICYmIChsID0gaVsxXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCksIGUucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gaVsyXSAmJiAoaCA9IGlbMl0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0KSwgZS5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGlbM10gJiYgKGwgPSBpWzNdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wKSksIG8uZ3JpZCAmJiAobiA9IG8uZ3JpZFsxXSA/IHRoaXMub3JpZ2luYWxQYWdlWSArIE1hdGgucm91bmQoKGwgLSB0aGlzLm9yaWdpbmFsUGFnZVkpIC8gby5ncmlkWzFdKSAqIG8uZ3JpZFsxXSA6IHRoaXMub3JpZ2luYWxQYWdlWSwgbCA9IGkgPyBuIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID49IGlbMV0gfHwgbiAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGlbM10gPyBuIDogbiAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSBpWzFdID8gbiAtIG8uZ3JpZFsxXSA6IG4gKyBvLmdyaWRbMV0gOiBuLCBhID0gby5ncmlkWzBdID8gdGhpcy5vcmlnaW5hbFBhZ2VYICsgTWF0aC5yb3VuZCgoaCAtIHRoaXMub3JpZ2luYWxQYWdlWCkgLyBvLmdyaWRbMF0pICogby5ncmlkWzBdIDogdGhpcy5vcmlnaW5hbFBhZ2VYLCBoID0gaSA/IGEgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IGlbMF0gfHwgYSAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPiBpWzJdID8gYSA6IGEgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IGlbMF0gPyBhIC0gby5ncmlkWzBdIDogYSArIG8uZ3JpZFswXSA6IGEpLCBcInlcIiA9PT0gby5heGlzICYmIChoID0gdGhpcy5vcmlnaW5hbFBhZ2VYKSwgXCJ4XCIgPT09IG8uYXhpcyAmJiAobCA9IHRoaXMub3JpZ2luYWxQYWdlWSkpLCB7XG4gICAgICAgICAgICAgICAgdG9wOiBsIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCArIChcImZpeGVkXCIgPT09IHRoaXMuY3NzUG9zaXRpb24gPyAtdGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCA6IHIgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCksXG4gICAgICAgICAgICAgICAgbGVmdDogaCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgLSB0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0IC0gdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKyAoXCJmaXhlZFwiID09PSB0aGlzLmNzc1Bvc2l0aW9uID8gLXRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0IDogciA/IDAgOiB0aGlzLm9mZnNldC5zY3JvbGwubGVmdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2NsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlbHBlci5yZW1vdmVDbGFzcyhcInVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKSwgdGhpcy5oZWxwZXJbMF0gPT09IHRoaXMuZWxlbWVudFswXSB8fCB0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwgfHwgdGhpcy5oZWxwZXIucmVtb3ZlKCksIHRoaXMuaGVscGVyID0gbnVsbCwgdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsID0gITEsIHRoaXMuZGVzdHJveU9uQ2xlYXIgJiYgdGhpcy5kZXN0cm95KClcbiAgICAgICAgfSxcbiAgICAgICAgX25vcm1hbGl6ZVJpZ2h0Qm90dG9tOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcInlcIiAhPT0gdGhpcy5vcHRpb25zLmF4aXMgJiYgXCJhdXRvXCIgIT09IHRoaXMuaGVscGVyLmNzcyhcInJpZ2h0XCIpICYmICh0aGlzLmhlbHBlci53aWR0aCh0aGlzLmhlbHBlci53aWR0aCgpKSwgdGhpcy5oZWxwZXIuY3NzKFwicmlnaHRcIiwgXCJhdXRvXCIpKSwgXCJ4XCIgIT09IHRoaXMub3B0aW9ucy5heGlzICYmIFwiYXV0b1wiICE9PSB0aGlzLmhlbHBlci5jc3MoXCJib3R0b21cIikgJiYgKHRoaXMuaGVscGVyLmhlaWdodCh0aGlzLmhlbHBlci5oZWlnaHQoKSksIHRoaXMuaGVscGVyLmNzcyhcImJvdHRvbVwiLCBcImF1dG9cIikpXG4gICAgICAgIH0sXG4gICAgICAgIF90cmlnZ2VyOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgcmV0dXJuIHMgPSBzIHx8IHRoaXMuX3VpSGFzaCgpLCBlLnVpLnBsdWdpbi5jYWxsKHRoaXMsIHQsIFtpLCBzLCB0aGlzXSwgITApLCAvXihkcmFnfHN0YXJ0fHN0b3ApLy50ZXN0KHQpICYmICh0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oXCJhYnNvbHV0ZVwiKSwgcy5vZmZzZXQgPSB0aGlzLnBvc2l0aW9uQWJzKSwgZS5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmNhbGwodGhpcywgdCwgaSwgcylcbiAgICAgICAgfSxcbiAgICAgICAgcGx1Z2luczoge30sXG4gICAgICAgIF91aUhhc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFBvc2l0aW9uOiB0aGlzLm9yaWdpbmFsUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiB0aGlzLnBvc2l0aW9uQWJzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsIFwiY29ubmVjdFRvU29ydGFibGVcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuID0gZS5leHRlbmQoe30sIGksIHtpdGVtOiBzLmVsZW1lbnR9KTtcbiAgICAgICAgICAgIHMuc29ydGFibGVzID0gW10sIGUocy5vcHRpb25zLmNvbm5lY3RUb1NvcnRhYmxlKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGUodGhpcykuc29ydGFibGUoXCJpbnN0YW5jZVwiKTtcbiAgICAgICAgICAgICAgICBpICYmICFpLm9wdGlvbnMuZGlzYWJsZWQgJiYgKHMuc29ydGFibGVzLnB1c2goaSksIGkucmVmcmVzaFBvc2l0aW9ucygpLCBpLl90cmlnZ2VyKFwiYWN0aXZhdGVcIiwgdCwgbikpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCBzdG9wOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4gPSBlLmV4dGVuZCh7fSwgaSwge2l0ZW06IHMuZWxlbWVudH0pO1xuICAgICAgICAgICAgcy5jYW5jZWxIZWxwZXJSZW1vdmFsID0gITEsIGUuZWFjaChzLnNvcnRhYmxlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgICAgICAgICBlLmlzT3ZlciA/IChlLmlzT3ZlciA9IDAsIHMuY2FuY2VsSGVscGVyUmVtb3ZhbCA9ICEwLCBlLmNhbmNlbEhlbHBlclJlbW92YWwgPSAhMSwgZS5fc3RvcmVkQ1NTID0ge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZS5wbGFjZWhvbGRlci5jc3MoXCJwb3NpdGlvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBlLnBsYWNlaG9sZGVyLmNzcyhcInRvcFwiKSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogZS5wbGFjZWhvbGRlci5jc3MoXCJsZWZ0XCIpXG4gICAgICAgICAgICAgICAgfSwgZS5fbW91c2VTdG9wKHQpLCBlLm9wdGlvbnMuaGVscGVyID0gZS5vcHRpb25zLl9oZWxwZXIpIDogKGUuY2FuY2VsSGVscGVyUmVtb3ZhbCA9ICEwLCBlLl90cmlnZ2VyKFwiZGVhY3RpdmF0ZVwiLCB0LCBuKSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIGRyYWc6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICBlLmVhY2gocy5zb3J0YWJsZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbiA9ICExLCBhID0gdGhpcztcbiAgICAgICAgICAgICAgICBhLnBvc2l0aW9uQWJzID0gcy5wb3NpdGlvbkFicywgYS5oZWxwZXJQcm9wb3J0aW9ucyA9IHMuaGVscGVyUHJvcG9ydGlvbnMsIGEub2Zmc2V0LmNsaWNrID0gcy5vZmZzZXQuY2xpY2ssIGEuX2ludGVyc2VjdHNXaXRoKGEuY29udGFpbmVyQ2FjaGUpICYmIChuID0gITAsIGUuZWFjaChzLnNvcnRhYmxlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbkFicyA9IHMucG9zaXRpb25BYnMsIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMgPSBzLmhlbHBlclByb3BvcnRpb25zLCB0aGlzLm9mZnNldC5jbGljayA9IHMub2Zmc2V0LmNsaWNrLCB0aGlzICE9PSBhICYmIHRoaXMuX2ludGVyc2VjdHNXaXRoKHRoaXMuY29udGFpbmVyQ2FjaGUpICYmIGUuY29udGFpbnMoYS5lbGVtZW50WzBdLCB0aGlzLmVsZW1lbnRbMF0pICYmIChuID0gITEpLCBuXG4gICAgICAgICAgICAgICAgfSkpLCBuID8gKGEuaXNPdmVyIHx8IChhLmlzT3ZlciA9IDEsIGEuY3VycmVudEl0ZW0gPSBpLmhlbHBlci5hcHBlbmRUbyhhLmVsZW1lbnQpLmRhdGEoXCJ1aS1zb3J0YWJsZS1pdGVtXCIsICEwKSwgYS5vcHRpb25zLl9oZWxwZXIgPSBhLm9wdGlvbnMuaGVscGVyLCBhLm9wdGlvbnMuaGVscGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5oZWxwZXJbMF1cbiAgICAgICAgICAgICAgICB9LCB0LnRhcmdldCA9IGEuY3VycmVudEl0ZW1bMF0sIGEuX21vdXNlQ2FwdHVyZSh0LCAhMCksIGEuX21vdXNlU3RhcnQodCwgITAsICEwKSwgYS5vZmZzZXQuY2xpY2sudG9wID0gcy5vZmZzZXQuY2xpY2sudG9wLCBhLm9mZnNldC5jbGljay5sZWZ0ID0gcy5vZmZzZXQuY2xpY2subGVmdCwgYS5vZmZzZXQucGFyZW50LmxlZnQgLT0gcy5vZmZzZXQucGFyZW50LmxlZnQgLSBhLm9mZnNldC5wYXJlbnQubGVmdCwgYS5vZmZzZXQucGFyZW50LnRvcCAtPSBzLm9mZnNldC5wYXJlbnQudG9wIC0gYS5vZmZzZXQucGFyZW50LnRvcCwgcy5fdHJpZ2dlcihcInRvU29ydGFibGVcIiwgdCksIHMuZHJvcHBlZCA9IGEuZWxlbWVudCwgZS5lYWNoKHMuc29ydGFibGVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9ucygpXG4gICAgICAgICAgICAgICAgfSksIHMuY3VycmVudEl0ZW0gPSBzLmVsZW1lbnQsIGEuZnJvbU91dHNpZGUgPSBzKSwgYS5jdXJyZW50SXRlbSAmJiAoYS5fbW91c2VEcmFnKHQpLCBpLnBvc2l0aW9uID0gYS5wb3NpdGlvbikpIDogYS5pc092ZXIgJiYgKGEuaXNPdmVyID0gMCwgYS5jYW5jZWxIZWxwZXJSZW1vdmFsID0gITAsIGEub3B0aW9ucy5fcmV2ZXJ0ID0gYS5vcHRpb25zLnJldmVydCwgYS5vcHRpb25zLnJldmVydCA9ICExLCBhLl90cmlnZ2VyKFwib3V0XCIsIHQsIGEuX3VpSGFzaChhKSksIGEuX21vdXNlU3RvcCh0LCAhMCksIGEub3B0aW9ucy5yZXZlcnQgPSBhLm9wdGlvbnMuX3JldmVydCwgYS5vcHRpb25zLmhlbHBlciA9IGEub3B0aW9ucy5faGVscGVyLCBhLnBsYWNlaG9sZGVyICYmIGEucGxhY2Vob2xkZXIucmVtb3ZlKCksIHMuX3JlZnJlc2hPZmZzZXRzKHQpLCBpLnBvc2l0aW9uID0gcy5fZ2VuZXJhdGVQb3NpdGlvbih0LCAhMCksIHMuX3RyaWdnZXIoXCJmcm9tU29ydGFibGVcIiwgdCksIHMuZHJvcHBlZCA9ICExLCBlLmVhY2gocy5zb3J0YWJsZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUG9zaXRpb25zKClcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsIFwiY3Vyc29yXCIsIHtcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiA9IGUoXCJib2R5XCIpLCBhID0gcy5vcHRpb25zO1xuICAgICAgICAgICAgbi5jc3MoXCJjdXJzb3JcIikgJiYgKGEuX2N1cnNvciA9IG4uY3NzKFwiY3Vyc29yXCIpKSwgbi5jc3MoXCJjdXJzb3JcIiwgYS5jdXJzb3IpXG4gICAgICAgIH0sIHN0b3A6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiA9IHMub3B0aW9ucztcbiAgICAgICAgICAgIG4uX2N1cnNvciAmJiBlKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIiwgbi5fY3Vyc29yKVxuICAgICAgICB9XG4gICAgfSksIGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcIm9wYWNpdHlcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuID0gZShpLmhlbHBlciksIGEgPSBzLm9wdGlvbnM7XG4gICAgICAgICAgICBuLmNzcyhcIm9wYWNpdHlcIikgJiYgKGEuX29wYWNpdHkgPSBuLmNzcyhcIm9wYWNpdHlcIikpLCBuLmNzcyhcIm9wYWNpdHlcIiwgYS5vcGFjaXR5KVxuICAgICAgICB9LCBzdG9wOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4gPSBzLm9wdGlvbnM7XG4gICAgICAgICAgICBuLl9vcGFjaXR5ICYmIGUoaS5oZWxwZXIpLmNzcyhcIm9wYWNpdHlcIiwgbi5fb3BhY2l0eSlcbiAgICAgICAgfVxuICAgIH0pLCBlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIiwgXCJzY3JvbGxcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKGUsIHQsIGkpIHtcbiAgICAgICAgICAgIGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuIHx8IChpLnNjcm9sbFBhcmVudE5vdEhpZGRlbiA9IGkuaGVscGVyLnNjcm9sbFBhcmVudCghMSkpLCBpLnNjcm9sbFBhcmVudE5vdEhpZGRlblswXSAhPT0gaS5kb2N1bWVudFswXSAmJiBcIkhUTUxcIiAhPT0gaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bMF0udGFnTmFtZSAmJiAoaS5vdmVyZmxvd09mZnNldCA9IGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuLm9mZnNldCgpKVxuICAgICAgICB9LCBkcmFnOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4gPSBzLm9wdGlvbnMsIGEgPSAhMSwgbyA9IHMuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWzBdLCByID0gcy5kb2N1bWVudFswXTtcbiAgICAgICAgICAgIG8gIT09IHIgJiYgXCJIVE1MXCIgIT09IG8udGFnTmFtZSA/IChuLmF4aXMgJiYgXCJ4XCIgPT09IG4uYXhpcyB8fCAocy5vdmVyZmxvd09mZnNldC50b3AgKyBvLm9mZnNldEhlaWdodCAtIHQucGFnZVkgPCBuLnNjcm9sbFNlbnNpdGl2aXR5ID8gby5zY3JvbGxUb3AgPSBhID0gby5zY3JvbGxUb3AgKyBuLnNjcm9sbFNwZWVkIDogdC5wYWdlWSAtIHMub3ZlcmZsb3dPZmZzZXQudG9wIDwgbi5zY3JvbGxTZW5zaXRpdml0eSAmJiAoby5zY3JvbGxUb3AgPSBhID0gby5zY3JvbGxUb3AgLSBuLnNjcm9sbFNwZWVkKSksIG4uYXhpcyAmJiBcInlcIiA9PT0gbi5heGlzIHx8IChzLm92ZXJmbG93T2Zmc2V0LmxlZnQgKyBvLm9mZnNldFdpZHRoIC0gdC5wYWdlWCA8IG4uc2Nyb2xsU2Vuc2l0aXZpdHkgPyBvLnNjcm9sbExlZnQgPSBhID0gby5zY3JvbGxMZWZ0ICsgbi5zY3JvbGxTcGVlZCA6IHQucGFnZVggLSBzLm92ZXJmbG93T2Zmc2V0LmxlZnQgPCBuLnNjcm9sbFNlbnNpdGl2aXR5ICYmIChvLnNjcm9sbExlZnQgPSBhID0gby5zY3JvbGxMZWZ0IC0gbi5zY3JvbGxTcGVlZCkpKSA6IChuLmF4aXMgJiYgXCJ4XCIgPT09IG4uYXhpcyB8fCAodC5wYWdlWSAtIGUocikuc2Nyb2xsVG9wKCkgPCBuLnNjcm9sbFNlbnNpdGl2aXR5ID8gYSA9IGUocikuc2Nyb2xsVG9wKGUocikuc2Nyb2xsVG9wKCkgLSBuLnNjcm9sbFNwZWVkKSA6IGUod2luZG93KS5oZWlnaHQoKSAtICh0LnBhZ2VZIC0gZShyKS5zY3JvbGxUb3AoKSkgPCBuLnNjcm9sbFNlbnNpdGl2aXR5ICYmIChhID0gZShyKS5zY3JvbGxUb3AoZShyKS5zY3JvbGxUb3AoKSArIG4uc2Nyb2xsU3BlZWQpKSksIG4uYXhpcyAmJiBcInlcIiA9PT0gbi5heGlzIHx8ICh0LnBhZ2VYIC0gZShyKS5zY3JvbGxMZWZ0KCkgPCBuLnNjcm9sbFNlbnNpdGl2aXR5ID8gYSA9IGUocikuc2Nyb2xsTGVmdChlKHIpLnNjcm9sbExlZnQoKSAtIG4uc2Nyb2xsU3BlZWQpIDogZSh3aW5kb3cpLndpZHRoKCkgLSAodC5wYWdlWCAtIGUocikuc2Nyb2xsTGVmdCgpKSA8IG4uc2Nyb2xsU2Vuc2l0aXZpdHkgJiYgKGEgPSBlKHIpLnNjcm9sbExlZnQoZShyKS5zY3JvbGxMZWZ0KCkgKyBuLnNjcm9sbFNwZWVkKSkpKSwgYSAhPT0gITEgJiYgZS51aS5kZG1hbmFnZXIgJiYgIW4uZHJvcEJlaGF2aW91ciAmJiBlLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhzLCB0KVxuICAgICAgICB9XG4gICAgfSksIGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcInNuYXBcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuID0gcy5vcHRpb25zO1xuICAgICAgICAgICAgcy5zbmFwRWxlbWVudHMgPSBbXSwgZShuLnNuYXAuY29uc3RydWN0b3IgIT09IFN0cmluZyA/IG4uc25hcC5pdGVtcyB8fCBcIjpkYXRhKHVpLWRyYWdnYWJsZSlcIiA6IG4uc25hcCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLCBpID0gdC5vZmZzZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzICE9PSBzLmVsZW1lbnRbMF0gJiYgcy5zbmFwRWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0Lm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0Lm91dGVySGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHRvcDogaS50b3AsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGkubGVmdFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCBkcmFnOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4sIGEsIG8sIHIsIGgsIGwsIHUsIGQsIGMsIHAsIGYgPSBzLm9wdGlvbnMsIG0gPSBmLnNuYXBUb2xlcmFuY2UsIGcgPSBpLm9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgICAgIHYgPSBnICsgcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCwgeSA9IGkub2Zmc2V0LnRvcCwgYiA9IHkgKyBzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodDtcbiAgICAgICAgICAgIGZvciAoYyA9IHMuc25hcEVsZW1lbnRzLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSBoID0gcy5zbmFwRWxlbWVudHNbY10ubGVmdCAtIHMubWFyZ2lucy5sZWZ0LCBsID0gaCArIHMuc25hcEVsZW1lbnRzW2NdLndpZHRoLCB1ID0gcy5zbmFwRWxlbWVudHNbY10udG9wIC0gcy5tYXJnaW5zLnRvcCwgZCA9IHUgKyBzLnNuYXBFbGVtZW50c1tjXS5oZWlnaHQsIGggLSBtID4gdiB8fCBnID4gbCArIG0gfHwgdSAtIG0gPiBiIHx8IHkgPiBkICsgbSB8fCAhZS5jb250YWlucyhzLnNuYXBFbGVtZW50c1tjXS5pdGVtLm93bmVyRG9jdW1lbnQsIHMuc25hcEVsZW1lbnRzW2NdLml0ZW0pID8gKHMuc25hcEVsZW1lbnRzW2NdLnNuYXBwaW5nICYmIHMub3B0aW9ucy5zbmFwLnJlbGVhc2UgJiYgcy5vcHRpb25zLnNuYXAucmVsZWFzZS5jYWxsKHMuZWxlbWVudCwgdCwgZS5leHRlbmQocy5fdWlIYXNoKCksIHtzbmFwSXRlbTogcy5zbmFwRWxlbWVudHNbY10uaXRlbX0pKSwgcy5zbmFwRWxlbWVudHNbY10uc25hcHBpbmcgPSAhMSkgOiAoXCJpbm5lclwiICE9PSBmLnNuYXBNb2RlICYmIChuID0gbSA+PSBNYXRoLmFicyh1IC0gYiksIGEgPSBtID49IE1hdGguYWJzKGQgLSB5KSwgbyA9IG0gPj0gTWF0aC5hYnMoaCAtIHYpLCByID0gbSA+PSBNYXRoLmFicyhsIC0gZyksIG4gJiYgKGkucG9zaXRpb24udG9wID0gcy5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7XG4gICAgICAgICAgICAgICAgdG9wOiB1IC0gcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgfSkudG9wKSwgYSAmJiAoaS5wb3NpdGlvbi50b3AgPSBzLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIsIHtcbiAgICAgICAgICAgICAgICB0b3A6IGQsXG4gICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgfSkudG9wKSwgbyAmJiAoaS5wb3NpdGlvbi5sZWZ0ID0gcy5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7XG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGggLSBzLmhlbHBlclByb3BvcnRpb25zLndpZHRoXG4gICAgICAgICAgICB9KS5sZWZ0KSwgciAmJiAoaS5wb3NpdGlvbi5sZWZ0ID0gcy5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7XG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGxcbiAgICAgICAgICAgIH0pLmxlZnQpKSwgcCA9IG4gfHwgYSB8fCBvIHx8IHIsIFwib3V0ZXJcIiAhPT0gZi5zbmFwTW9kZSAmJiAobiA9IG0gPj0gTWF0aC5hYnModSAtIHkpLCBhID0gbSA+PSBNYXRoLmFicyhkIC0gYiksIG8gPSBtID49IE1hdGguYWJzKGggLSBnKSwgciA9IG0gPj0gTWF0aC5hYnMobCAtIHYpLCBuICYmIChpLnBvc2l0aW9uLnRvcCA9IHMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIiwge1xuICAgICAgICAgICAgICAgIHRvcDogdSxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9KS50b3ApLCBhICYmIChpLnBvc2l0aW9uLnRvcCA9IHMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIiwge1xuICAgICAgICAgICAgICAgIHRvcDogZCAtIHMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgIH0pLnRvcCksIG8gJiYgKGkucG9zaXRpb24ubGVmdCA9IHMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIiwge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBoXG4gICAgICAgICAgICB9KS5sZWZ0KSwgciAmJiAoaS5wb3NpdGlvbi5sZWZ0ID0gcy5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7XG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGwgLSBzLmhlbHBlclByb3BvcnRpb25zLndpZHRoXG4gICAgICAgICAgICB9KS5sZWZ0KSksICFzLnNuYXBFbGVtZW50c1tjXS5zbmFwcGluZyAmJiAobiB8fCBhIHx8IG8gfHwgciB8fCBwKSAmJiBzLm9wdGlvbnMuc25hcC5zbmFwICYmIHMub3B0aW9ucy5zbmFwLnNuYXAuY2FsbChzLmVsZW1lbnQsIHQsIGUuZXh0ZW5kKHMuX3VpSGFzaCgpLCB7c25hcEl0ZW06IHMuc25hcEVsZW1lbnRzW2NdLml0ZW19KSksIHMuc25hcEVsZW1lbnRzW2NdLnNuYXBwaW5nID0gbiB8fCBhIHx8IG8gfHwgciB8fCBwKVxuICAgICAgICB9XG4gICAgfSksIGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcInN0YWNrXCIsIHtcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICB2YXIgbiwgYSA9IHMub3B0aW9ucywgbyA9IGUubWFrZUFycmF5KGUoYS5zdGFjaykpLnNvcnQoZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHBhcnNlSW50KGUodCkuY3NzKFwiekluZGV4XCIpLCAxMCkgfHwgMCkgLSAocGFyc2VJbnQoZShpKS5jc3MoXCJ6SW5kZXhcIiksIDEwKSB8fCAwKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLmxlbmd0aCAmJiAobiA9IHBhcnNlSW50KGUob1swXSkuY3NzKFwiekluZGV4XCIpLCAxMCkgfHwgMCwgZShvKS5lYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5jc3MoXCJ6SW5kZXhcIiwgbiArIHQpXG4gICAgICAgICAgICB9KSwgdGhpcy5jc3MoXCJ6SW5kZXhcIiwgbiArIG8ubGVuZ3RoKSlcbiAgICAgICAgfVxuICAgIH0pLCBlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIiwgXCJ6SW5kZXhcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuID0gZShpLmhlbHBlciksIGEgPSBzLm9wdGlvbnM7XG4gICAgICAgICAgICBuLmNzcyhcInpJbmRleFwiKSAmJiAoYS5fekluZGV4ID0gbi5jc3MoXCJ6SW5kZXhcIikpLCBuLmNzcyhcInpJbmRleFwiLCBhLnpJbmRleClcbiAgICAgICAgfSwgc3RvcDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuID0gcy5vcHRpb25zO1xuICAgICAgICAgICAgbi5fekluZGV4ICYmIGUoaS5oZWxwZXIpLmNzcyhcInpJbmRleFwiLCBuLl96SW5kZXgpXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5kcmFnZ2FibGUsIGUud2lkZ2V0KFwidWkucmVzaXphYmxlXCIsIGUudWkubW91c2UsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgd2lkZ2V0RXZlbnRQcmVmaXg6IFwicmVzaXplXCIsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGFsc29SZXNpemU6ICExLFxuICAgICAgICAgICAgYW5pbWF0ZTogITEsXG4gICAgICAgICAgICBhbmltYXRlRHVyYXRpb246IFwic2xvd1wiLFxuICAgICAgICAgICAgYW5pbWF0ZUVhc2luZzogXCJzd2luZ1wiLFxuICAgICAgICAgICAgYXNwZWN0UmF0aW86ICExLFxuICAgICAgICAgICAgYXV0b0hpZGU6ICExLFxuICAgICAgICAgICAgY29udGFpbm1lbnQ6ICExLFxuICAgICAgICAgICAgZ2hvc3Q6ICExLFxuICAgICAgICAgICAgZ3JpZDogITEsXG4gICAgICAgICAgICBoYW5kbGVzOiBcImUscyxzZVwiLFxuICAgICAgICAgICAgaGVscGVyOiAhMSxcbiAgICAgICAgICAgIG1heEhlaWdodDogbnVsbCxcbiAgICAgICAgICAgIG1heFdpZHRoOiBudWxsLFxuICAgICAgICAgICAgbWluSGVpZ2h0OiAxMCxcbiAgICAgICAgICAgIG1pbldpZHRoOiAxMCxcbiAgICAgICAgICAgIHpJbmRleDogOTAsXG4gICAgICAgICAgICByZXNpemU6IG51bGwsXG4gICAgICAgICAgICBzdGFydDogbnVsbCxcbiAgICAgICAgICAgIHN0b3A6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgX251bTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlLCAxMCkgfHwgMFxuICAgICAgICB9LFxuICAgICAgICBfaXNOdW1iZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGUsIDEwKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2hhc1Njcm9sbDogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIGlmIChcImhpZGRlblwiID09PSBlKHQpLmNzcyhcIm92ZXJmbG93XCIpKSByZXR1cm4gITE7XG4gICAgICAgICAgICB2YXIgcyA9IGkgJiYgXCJsZWZ0XCIgPT09IGkgPyBcInNjcm9sbExlZnRcIiA6IFwic2Nyb2xsVG9wXCIsIG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiB0W3NdID4gMCA/ICEwIDogKHRbc10gPSAxLCBuID0gdFtzXSA+IDAsIHRbc10gPSAwLCBuKVxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSwgcywgbiwgYSwgbyA9IHRoaXMsIHIgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktcmVzaXphYmxlXCIpLCBlLmV4dGVuZCh0aGlzLCB7XG4gICAgICAgICAgICAgICAgX2FzcGVjdFJhdGlvOiAhIXIuYXNwZWN0UmF0aW8sXG4gICAgICAgICAgICAgICAgYXNwZWN0UmF0aW86IHIuYXNwZWN0UmF0aW8sXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM6IFtdLFxuICAgICAgICAgICAgICAgIF9oZWxwZXI6IHIuaGVscGVyIHx8IHIuZ2hvc3QgfHwgci5hbmltYXRlID8gci5oZWxwZXIgfHwgXCJ1aS1yZXNpemFibGUtaGVscGVyXCIgOiBudWxsXG4gICAgICAgICAgICB9KSwgdGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9jYW52YXN8dGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbnxpbWcvaSkgJiYgKHRoaXMuZWxlbWVudC53cmFwKGUoXCI8ZGl2IGNsYXNzPSd1aS13cmFwcGVyJyBzdHlsZT0nb3ZlcmZsb3c6IGhpZGRlbjsnPjwvZGl2PlwiKS5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmVsZW1lbnQuY3NzKFwicG9zaXRpb25cIiksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSxcbiAgICAgICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC5jc3MoXCJ0b3BcIiksXG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5lbGVtZW50LmNzcyhcImxlZnRcIilcbiAgICAgICAgICAgIH0pKSwgdGhpcy5lbGVtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpLmRhdGEoXCJ1aS1yZXNpemFibGVcIiwgdGhpcy5lbGVtZW50LnJlc2l6YWJsZShcImluc3RhbmNlXCIpKSwgdGhpcy5lbGVtZW50SXNXcmFwcGVyID0gITAsIHRoaXMuZWxlbWVudC5jc3Moe1xuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wOiB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJtYXJnaW5Ub3BcIiksXG4gICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpblJpZ2h0XCIpLFxuICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpXG4gICAgICAgICAgICB9KSwgdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtcbiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAwLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogMCxcbiAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogMCxcbiAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IDBcbiAgICAgICAgICAgIH0pLCB0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUgPSB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJyZXNpemVcIiksIHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcInJlc2l6ZVwiLCBcIm5vbmVcIiksIHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCh0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgICAgIHpvb206IDEsXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiXG4gICAgICAgICAgICB9KSksIHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7bWFyZ2luOiB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJtYXJnaW5cIil9KSwgdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKSksIHRoaXMuaGFuZGxlcyA9IHIuaGFuZGxlcyB8fCAoZShcIi51aS1yZXNpemFibGUtaGFuZGxlXCIsIHRoaXMuZWxlbWVudCkubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgIG46IFwiLnVpLXJlc2l6YWJsZS1uXCIsXG4gICAgICAgICAgICAgICAgZTogXCIudWktcmVzaXphYmxlLWVcIixcbiAgICAgICAgICAgICAgICBzOiBcIi51aS1yZXNpemFibGUtc1wiLFxuICAgICAgICAgICAgICAgIHc6IFwiLnVpLXJlc2l6YWJsZS13XCIsXG4gICAgICAgICAgICAgICAgc2U6IFwiLnVpLXJlc2l6YWJsZS1zZVwiLFxuICAgICAgICAgICAgICAgIHN3OiBcIi51aS1yZXNpemFibGUtc3dcIixcbiAgICAgICAgICAgICAgICBuZTogXCIudWktcmVzaXphYmxlLW5lXCIsXG4gICAgICAgICAgICAgICAgbnc6IFwiLnVpLXJlc2l6YWJsZS1ud1wiXG4gICAgICAgICAgICB9IDogXCJlLHMsc2VcIiksIHRoaXMuaGFuZGxlcy5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSBmb3IgKFwiYWxsXCIgPT09IHRoaXMuaGFuZGxlcyAmJiAodGhpcy5oYW5kbGVzID0gXCJuLGUscyx3LHNlLHN3LG5lLG53XCIpLCB0ID0gdGhpcy5oYW5kbGVzLnNwbGl0KFwiLFwiKSwgdGhpcy5oYW5kbGVzID0ge30sIGkgPSAwOyB0Lmxlbmd0aCA+IGk7IGkrKykgcyA9IGUudHJpbSh0W2ldKSwgYSA9IFwidWktcmVzaXphYmxlLVwiICsgcywgbiA9IGUoXCI8ZGl2IGNsYXNzPSd1aS1yZXNpemFibGUtaGFuZGxlIFwiICsgYSArIFwiJz48L2Rpdj5cIiksIG4uY3NzKHt6SW5kZXg6IHIuekluZGV4fSksIFwic2VcIiA9PT0gcyAmJiBuLmFkZENsYXNzKFwidWktaWNvbiB1aS1pY29uLWdyaXBzbWFsbC1kaWFnb25hbC1zZVwiKSwgdGhpcy5oYW5kbGVzW3NdID0gXCIudWktcmVzaXphYmxlLVwiICsgcywgdGhpcy5lbGVtZW50LmFwcGVuZChuKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckF4aXMgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBzLCBuLCBhO1xuICAgICAgICAgICAgICAgIHQgPSB0IHx8IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgICAgICBmb3IgKGkgaW4gdGhpcy5oYW5kbGVzKSB0aGlzLmhhbmRsZXNbaV0uY29uc3RydWN0b3IgPT09IFN0cmluZyAmJiAodGhpcy5oYW5kbGVzW2ldID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKHRoaXMuaGFuZGxlc1tpXSkuZmlyc3QoKS5zaG93KCkpLCB0aGlzLmVsZW1lbnRJc1dyYXBwZXIgJiYgdGhpcy5vcmlnaW5hbEVsZW1lbnRbMF0ubm9kZU5hbWUubWF0Y2goL3RleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b24vaSkgJiYgKHMgPSBlKHRoaXMuaGFuZGxlc1tpXSwgdGhpcy5lbGVtZW50KSwgYSA9IC9zd3xuZXxud3xzZXxufHMvLnRlc3QoaSkgPyBzLm91dGVySGVpZ2h0KCkgOiBzLm91dGVyV2lkdGgoKSwgbiA9IFtcInBhZGRpbmdcIiwgL25lfG53fG4vLnRlc3QoaSkgPyBcIlRvcFwiIDogL3NlfHN3fHMvLnRlc3QoaSkgPyBcIkJvdHRvbVwiIDogL15lJC8udGVzdChpKSA/IFwiUmlnaHRcIiA6IFwiTGVmdFwiXS5qb2luKFwiXCIpLCB0LmNzcyhuLCBhKSwgdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKSksIGUodGhpcy5oYW5kbGVzW2ldKS5sZW5ndGhcbiAgICAgICAgICAgIH0sIHRoaXMuX3JlbmRlckF4aXModGhpcy5lbGVtZW50KSwgdGhpcy5faGFuZGxlcyA9IGUoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiLCB0aGlzLmVsZW1lbnQpLmRpc2FibGVTZWxlY3Rpb24oKSwgdGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG8ucmVzaXppbmcgfHwgKHRoaXMuY2xhc3NOYW1lICYmIChuID0gdGhpcy5jbGFzc05hbWUubWF0Y2goL3VpLXJlc2l6YWJsZS0oc2V8c3d8bmV8bnd8bnxlfHN8dykvaSkpLCBvLmF4aXMgPSBuICYmIG5bMV0gPyBuWzFdIDogXCJzZVwiKVxuICAgICAgICAgICAgfSksIHIuYXV0b0hpZGUgJiYgKHRoaXMuX2hhbmRsZXMuaGlkZSgpLCBlKHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtYXV0b2hpZGVcIikubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgci5kaXNhYmxlZCB8fCAoZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZS1hdXRvaGlkZVwiKSwgby5faGFuZGxlcy5zaG93KCkpXG4gICAgICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByLmRpc2FibGVkIHx8IG8ucmVzaXppbmcgfHwgKGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtYXV0b2hpZGVcIiksIG8uX2hhbmRsZXMuaGlkZSgpKVxuICAgICAgICAgICAgfSkpLCB0aGlzLl9tb3VzZUluaXQoKVxuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEZXN0cm95KCk7XG4gICAgICAgICAgICB2YXIgdCwgaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgZSh0KS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZSB1aS1yZXNpemFibGUtZGlzYWJsZWQgdWktcmVzaXphYmxlLXJlc2l6aW5nXCIpLnJlbW92ZURhdGEoXCJyZXNpemFibGVcIikucmVtb3ZlRGF0YShcInVpLXJlc2l6YWJsZVwiKS51bmJpbmQoXCIucmVzaXphYmxlXCIpLmZpbmQoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiKS5yZW1vdmUoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJc1dyYXBwZXIgJiYgKGkodGhpcy5lbGVtZW50KSwgdCA9IHRoaXMuZWxlbWVudCwgdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogdC5jc3MoXCJwb3NpdGlvblwiKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogdC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0Lm91dGVySGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgdG9wOiB0LmNzcyhcInRvcFwiKSxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0LmNzcyhcImxlZnRcIilcbiAgICAgICAgICAgIH0pLmluc2VydEFmdGVyKHQpLCB0LnJlbW92ZSgpKSwgdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwicmVzaXplXCIsIHRoaXMub3JpZ2luYWxSZXNpemVTdHlsZSksIGkodGhpcy5vcmlnaW5hbEVsZW1lbnQpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZUNhcHR1cmU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiA9ICExO1xuICAgICAgICAgICAgZm9yIChpIGluIHRoaXMuaGFuZGxlcykgcyA9IGUodGhpcy5oYW5kbGVzW2ldKVswXSwgKHMgPT09IHQudGFyZ2V0IHx8IGUuY29udGFpbnMocywgdC50YXJnZXQpKSAmJiAobiA9ICEwKTtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIG5cbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlU3RhcnQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiwgYSA9IHRoaXMub3B0aW9ucywgbyA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc2l6aW5nID0gITAsIHRoaXMuX3JlbmRlclByb3h5KCksIGkgPSB0aGlzLl9udW0odGhpcy5oZWxwZXIuY3NzKFwibGVmdFwiKSksIHMgPSB0aGlzLl9udW0odGhpcy5oZWxwZXIuY3NzKFwidG9wXCIpKSwgYS5jb250YWlubWVudCAmJiAoaSArPSBlKGEuY29udGFpbm1lbnQpLnNjcm9sbExlZnQoKSB8fCAwLCBzICs9IGUoYS5jb250YWlubWVudCkuc2Nyb2xsVG9wKCkgfHwgMCksIHRoaXMub2Zmc2V0ID0gdGhpcy5oZWxwZXIub2Zmc2V0KCksIHRoaXMucG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogaSxcbiAgICAgICAgICAgICAgICB0b3A6IHNcbiAgICAgICAgICAgIH0sIHRoaXMuc2l6ZSA9IHRoaXMuX2hlbHBlciA/IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5oZWxwZXIud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVscGVyLmhlaWdodCgpXG4gICAgICAgICAgICB9IDoge3dpZHRoOiBvLndpZHRoKCksIGhlaWdodDogby5oZWlnaHQoKX0sIHRoaXMub3JpZ2luYWxTaXplID0gdGhpcy5faGVscGVyID8ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBvLm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG8ub3V0ZXJIZWlnaHQoKVxuICAgICAgICAgICAgfSA6IHt3aWR0aDogby53aWR0aCgpLCBoZWlnaHQ6IG8uaGVpZ2h0KCl9LCB0aGlzLnNpemVEaWZmID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBvLm91dGVyV2lkdGgoKSAtIG8ud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG8ub3V0ZXJIZWlnaHQoKSAtIG8uaGVpZ2h0KClcbiAgICAgICAgICAgIH0sIHRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHtsZWZ0OiBpLCB0b3A6IHN9LCB0aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0LnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvcDogdC5wYWdlWVxuICAgICAgICAgICAgfSwgdGhpcy5hc3BlY3RSYXRpbyA9IFwibnVtYmVyXCIgPT0gdHlwZW9mIGEuYXNwZWN0UmF0aW8gPyBhLmFzcGVjdFJhdGlvIDogdGhpcy5vcmlnaW5hbFNpemUud2lkdGggLyB0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQgfHwgMSwgbiA9IGUoXCIudWktcmVzaXphYmxlLVwiICsgdGhpcy5heGlzKS5jc3MoXCJjdXJzb3JcIiksIGUoXCJib2R5XCIpLmNzcyhcImN1cnNvclwiLCBcImF1dG9cIiA9PT0gbiA/IHRoaXMuYXhpcyArIFwiLXJlc2l6ZVwiIDogbiksIG8uYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtcmVzaXppbmdcIiksIHRoaXMuX3Byb3BhZ2F0ZShcInN0YXJ0XCIsIHQpLCAhMFxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VEcmFnOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMsIG4gPSB0aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbiwgYSA9IHRoaXMuYXhpcywgbyA9IHQucGFnZVggLSBuLmxlZnQgfHwgMCxcbiAgICAgICAgICAgICAgICByID0gdC5wYWdlWSAtIG4udG9wIHx8IDAsIGggPSB0aGlzLl9jaGFuZ2VbYV07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlUHJldlByb3BlcnRpZXMoKSwgaCA/IChpID0gaC5hcHBseSh0aGlzLCBbdCwgbywgcl0pLCB0aGlzLl91cGRhdGVWaXJ0dWFsQm91bmRhcmllcyh0LnNoaWZ0S2V5KSwgKHRoaXMuX2FzcGVjdFJhdGlvIHx8IHQuc2hpZnRLZXkpICYmIChpID0gdGhpcy5fdXBkYXRlUmF0aW8oaSwgdCkpLCBpID0gdGhpcy5fcmVzcGVjdFNpemUoaSwgdCksIHRoaXMuX3VwZGF0ZUNhY2hlKGkpLCB0aGlzLl9wcm9wYWdhdGUoXCJyZXNpemVcIiwgdCksIHMgPSB0aGlzLl9hcHBseUNoYW5nZXMoKSwgIXRoaXMuX2hlbHBlciAmJiB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCAmJiB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpLCBlLmlzRW1wdHlPYmplY3QocykgfHwgKHRoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCksIHRoaXMuX3RyaWdnZXIoXCJyZXNpemVcIiwgdCwgdGhpcy51aSgpKSwgdGhpcy5fYXBwbHlDaGFuZ2VzKCkpLCAhMSkgOiAhMVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VTdG9wOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemluZyA9ICExO1xuICAgICAgICAgICAgdmFyIGksIHMsIG4sIGEsIG8sIHIsIGgsIGwgPSB0aGlzLm9wdGlvbnMsIHUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hlbHBlciAmJiAoaSA9IHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsIHMgPSBpLmxlbmd0aCAmJiAvdGV4dGFyZWEvaS50ZXN0KGlbMF0ubm9kZU5hbWUpLCBuID0gcyAmJiB0aGlzLl9oYXNTY3JvbGwoaVswXSwgXCJsZWZ0XCIpID8gMCA6IHUuc2l6ZURpZmYuaGVpZ2h0LCBhID0gcyA/IDAgOiB1LnNpemVEaWZmLndpZHRoLCBvID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB1LmhlbHBlci53aWR0aCgpIC0gYSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHUuaGVscGVyLmhlaWdodCgpIC0gblxuICAgICAgICAgICAgfSwgciA9IHBhcnNlSW50KHUuZWxlbWVudC5jc3MoXCJsZWZ0XCIpLCAxMCkgKyAodS5wb3NpdGlvbi5sZWZ0IC0gdS5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpIHx8IG51bGwsIGggPSBwYXJzZUludCh1LmVsZW1lbnQuY3NzKFwidG9wXCIpLCAxMCkgKyAodS5wb3NpdGlvbi50b3AgLSB1Lm9yaWdpbmFsUG9zaXRpb24udG9wKSB8fCBudWxsLCBsLmFuaW1hdGUgfHwgdGhpcy5lbGVtZW50LmNzcyhlLmV4dGVuZChvLCB7XG4gICAgICAgICAgICAgICAgdG9wOiBoLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHJcbiAgICAgICAgICAgIH0pKSwgdS5oZWxwZXIuaGVpZ2h0KHUuc2l6ZS5oZWlnaHQpLCB1LmhlbHBlci53aWR0aCh1LnNpemUud2lkdGgpLCB0aGlzLl9oZWxwZXIgJiYgIWwuYW5pbWF0ZSAmJiB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpKSwgZShcImJvZHlcIikuY3NzKFwiY3Vyc29yXCIsIFwiYXV0b1wiKSwgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktcmVzaXphYmxlLXJlc2l6aW5nXCIpLCB0aGlzLl9wcm9wYWdhdGUoXCJzdG9wXCIsIHQpLCB0aGlzLl9oZWxwZXIgJiYgdGhpcy5oZWxwZXIucmVtb3ZlKCksICExXG4gICAgICAgIH0sXG4gICAgICAgIF91cGRhdGVQcmV2UHJvcGVydGllczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2UG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgdG9wOiB0aGlzLnBvc2l0aW9uLnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnBvc2l0aW9uLmxlZnRcbiAgICAgICAgICAgIH0sIHRoaXMucHJldlNpemUgPSB7d2lkdGg6IHRoaXMuc2l6ZS53aWR0aCwgaGVpZ2h0OiB0aGlzLnNpemUuaGVpZ2h0fVxuICAgICAgICB9LFxuICAgICAgICBfYXBwbHlDaGFuZ2VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24udG9wICE9PSB0aGlzLnByZXZQb3NpdGlvbi50b3AgJiYgKGUudG9wID0gdGhpcy5wb3NpdGlvbi50b3AgKyBcInB4XCIpLCB0aGlzLnBvc2l0aW9uLmxlZnQgIT09IHRoaXMucHJldlBvc2l0aW9uLmxlZnQgJiYgKGUubGVmdCA9IHRoaXMucG9zaXRpb24ubGVmdCArIFwicHhcIiksIHRoaXMuc2l6ZS53aWR0aCAhPT0gdGhpcy5wcmV2U2l6ZS53aWR0aCAmJiAoZS53aWR0aCA9IHRoaXMuc2l6ZS53aWR0aCArIFwicHhcIiksIHRoaXMuc2l6ZS5oZWlnaHQgIT09IHRoaXMucHJldlNpemUuaGVpZ2h0ICYmIChlLmhlaWdodCA9IHRoaXMuc2l6ZS5oZWlnaHQgKyBcInB4XCIpLCB0aGlzLmhlbHBlci5jc3MoZSksIGVcbiAgICAgICAgfSxcbiAgICAgICAgX3VwZGF0ZVZpcnR1YWxCb3VuZGFyaWVzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMsIG4sIGEsIG8gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICBhID0ge1xuICAgICAgICAgICAgICAgIG1pbldpZHRoOiB0aGlzLl9pc051bWJlcihvLm1pbldpZHRoKSA/IG8ubWluV2lkdGggOiAwLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiB0aGlzLl9pc051bWJlcihvLm1heFdpZHRoKSA/IG8ubWF4V2lkdGggOiAxIC8gMCxcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IHRoaXMuX2lzTnVtYmVyKG8ubWluSGVpZ2h0KSA/IG8ubWluSGVpZ2h0IDogMCxcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IHRoaXMuX2lzTnVtYmVyKG8ubWF4SGVpZ2h0KSA/IG8ubWF4SGVpZ2h0IDogMSAvIDBcbiAgICAgICAgICAgIH0sICh0aGlzLl9hc3BlY3RSYXRpbyB8fCBlKSAmJiAodCA9IGEubWluSGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbywgcyA9IGEubWluV2lkdGggLyB0aGlzLmFzcGVjdFJhdGlvLCBpID0gYS5tYXhIZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvLCBuID0gYS5tYXhXaWR0aCAvIHRoaXMuYXNwZWN0UmF0aW8sIHQgPiBhLm1pbldpZHRoICYmIChhLm1pbldpZHRoID0gdCksIHMgPiBhLm1pbkhlaWdodCAmJiAoYS5taW5IZWlnaHQgPSBzKSwgYS5tYXhXaWR0aCA+IGkgJiYgKGEubWF4V2lkdGggPSBpKSwgYS5tYXhIZWlnaHQgPiBuICYmIChhLm1heEhlaWdodCA9IG4pKSwgdGhpcy5fdkJvdW5kYXJpZXMgPSBhXG4gICAgICAgIH0sXG4gICAgICAgIF91cGRhdGVDYWNoZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0ID0gdGhpcy5oZWxwZXIub2Zmc2V0KCksIHRoaXMuX2lzTnVtYmVyKGUubGVmdCkgJiYgKHRoaXMucG9zaXRpb24ubGVmdCA9IGUubGVmdCksIHRoaXMuX2lzTnVtYmVyKGUudG9wKSAmJiAodGhpcy5wb3NpdGlvbi50b3AgPSBlLnRvcCksIHRoaXMuX2lzTnVtYmVyKGUuaGVpZ2h0KSAmJiAodGhpcy5zaXplLmhlaWdodCA9IGUuaGVpZ2h0KSwgdGhpcy5faXNOdW1iZXIoZS53aWR0aCkgJiYgKHRoaXMuc2l6ZS53aWR0aCA9IGUud2lkdGgpXG4gICAgICAgIH0sXG4gICAgICAgIF91cGRhdGVSYXRpbzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5wb3NpdGlvbiwgaSA9IHRoaXMuc2l6ZSwgcyA9IHRoaXMuYXhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc051bWJlcihlLmhlaWdodCkgPyBlLndpZHRoID0gZS5oZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvIDogdGhpcy5faXNOdW1iZXIoZS53aWR0aCkgJiYgKGUuaGVpZ2h0ID0gZS53aWR0aCAvIHRoaXMuYXNwZWN0UmF0aW8pLCBcInN3XCIgPT09IHMgJiYgKGUubGVmdCA9IHQubGVmdCArIChpLndpZHRoIC0gZS53aWR0aCksIGUudG9wID0gbnVsbCksIFwibndcIiA9PT0gcyAmJiAoZS50b3AgPSB0LnRvcCArIChpLmhlaWdodCAtIGUuaGVpZ2h0KSwgZS5sZWZ0ID0gdC5sZWZ0ICsgKGkud2lkdGggLSBlLndpZHRoKSksIGVcbiAgICAgICAgfSxcbiAgICAgICAgX3Jlc3BlY3RTaXplOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl92Qm91bmRhcmllcywgaSA9IHRoaXMuYXhpcywgcyA9IHRoaXMuX2lzTnVtYmVyKGUud2lkdGgpICYmIHQubWF4V2lkdGggJiYgdC5tYXhXaWR0aCA8IGUud2lkdGgsXG4gICAgICAgICAgICAgICAgbiA9IHRoaXMuX2lzTnVtYmVyKGUuaGVpZ2h0KSAmJiB0Lm1heEhlaWdodCAmJiB0Lm1heEhlaWdodCA8IGUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGEgPSB0aGlzLl9pc051bWJlcihlLndpZHRoKSAmJiB0Lm1pbldpZHRoICYmIHQubWluV2lkdGggPiBlLndpZHRoLFxuICAgICAgICAgICAgICAgIG8gPSB0aGlzLl9pc051bWJlcihlLmhlaWdodCkgJiYgdC5taW5IZWlnaHQgJiYgdC5taW5IZWlnaHQgPiBlLmhlaWdodCxcbiAgICAgICAgICAgICAgICByID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQgKyB0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCwgaCA9IHRoaXMucG9zaXRpb24udG9wICsgdGhpcy5zaXplLmhlaWdodCxcbiAgICAgICAgICAgICAgICBsID0gL3N3fG53fHcvLnRlc3QoaSksIHUgPSAvbnd8bmV8bi8udGVzdChpKTtcbiAgICAgICAgICAgIHJldHVybiBhICYmIChlLndpZHRoID0gdC5taW5XaWR0aCksIG8gJiYgKGUuaGVpZ2h0ID0gdC5taW5IZWlnaHQpLCBzICYmIChlLndpZHRoID0gdC5tYXhXaWR0aCksIG4gJiYgKGUuaGVpZ2h0ID0gdC5tYXhIZWlnaHQpLCBhICYmIGwgJiYgKGUubGVmdCA9IHIgLSB0Lm1pbldpZHRoKSwgcyAmJiBsICYmIChlLmxlZnQgPSByIC0gdC5tYXhXaWR0aCksIG8gJiYgdSAmJiAoZS50b3AgPSBoIC0gdC5taW5IZWlnaHQpLCBuICYmIHUgJiYgKGUudG9wID0gaCAtIHQubWF4SGVpZ2h0KSwgZS53aWR0aCB8fCBlLmhlaWdodCB8fCBlLmxlZnQgfHwgIWUudG9wID8gZS53aWR0aCB8fCBlLmhlaWdodCB8fCBlLnRvcCB8fCAhZS5sZWZ0IHx8IChlLmxlZnQgPSBudWxsKSA6IGUudG9wID0gbnVsbCwgZVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIGkgPSBbXSwgcyA9IFtlLmNzcyhcImJvcmRlclRvcFdpZHRoXCIpLCBlLmNzcyhcImJvcmRlclJpZ2h0V2lkdGhcIiksIGUuY3NzKFwiYm9yZGVyQm90dG9tV2lkdGhcIiksIGUuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpXSwgbiA9IFtlLmNzcyhcInBhZGRpbmdUb3BcIiksIGUuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLCBlLmNzcyhcInBhZGRpbmdCb3R0b21cIiksIGUuY3NzKFwicGFkZGluZ0xlZnRcIildOyA0ID4gdDsgdCsrKSBpW3RdID0gcGFyc2VJbnQoc1t0XSwgMTApIHx8IDAsIGlbdF0gKz0gcGFyc2VJbnQoblt0XSwgMTApIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4ge2hlaWdodDogaVswXSArIGlbMl0sIHdpZHRoOiBpWzFdICsgaVszXX1cbiAgICAgICAgfSxcbiAgICAgICAgX3Byb3BvcnRpb25hbGx5UmVzaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpIGZvciAodmFyIGUsIHQgPSAwLCBpID0gdGhpcy5oZWxwZXIgfHwgdGhpcy5lbGVtZW50OyB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCA+IHQ7IHQrKykgZSA9IHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHNbdF0sIHRoaXMub3V0ZXJEaW1lbnNpb25zIHx8ICh0aGlzLm91dGVyRGltZW5zaW9ucyA9IHRoaXMuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyhlKSksIGUuY3NzKHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGkuaGVpZ2h0KCkgLSB0aGlzLm91dGVyRGltZW5zaW9ucy5oZWlnaHQgfHwgMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogaS53aWR0aCgpIC0gdGhpcy5vdXRlckRpbWVuc2lvbnMud2lkdGggfHwgMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgX3JlbmRlclByb3h5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuZWxlbWVudCwgaSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE9mZnNldCA9IHQub2Zmc2V0KCksIHRoaXMuX2hlbHBlciA/ICh0aGlzLmhlbHBlciA9IHRoaXMuaGVscGVyIHx8IGUoXCI8ZGl2IHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47Jz48L2Rpdj5cIiksIHRoaXMuaGVscGVyLmFkZENsYXNzKHRoaXMuX2hlbHBlcikuY3NzKHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSAtIDEsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIDEsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCArIFwicHhcIixcbiAgICAgICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudE9mZnNldC50b3AgKyBcInB4XCIsXG4gICAgICAgICAgICAgICAgekluZGV4OiArK2kuekluZGV4XG4gICAgICAgICAgICB9KSwgdGhpcy5oZWxwZXIuYXBwZW5kVG8oXCJib2R5XCIpLmRpc2FibGVTZWxlY3Rpb24oKSkgOiB0aGlzLmhlbHBlciA9IHRoaXMuZWxlbWVudFxuICAgICAgICB9LFxuICAgICAgICBfY2hhbmdlOiB7XG4gICAgICAgICAgICBlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7d2lkdGg6IHRoaXMub3JpZ2luYWxTaXplLndpZHRoICsgdH1cbiAgICAgICAgICAgIH0sIHc6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLm9yaWdpbmFsU2l6ZSwgcyA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge2xlZnQ6IHMubGVmdCArIHQsIHdpZHRoOiBpLndpZHRoIC0gdH1cbiAgICAgICAgICAgIH0sIG46IGZ1bmN0aW9uIChlLCB0LCBpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLm9yaWdpbmFsU2l6ZSwgbiA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge3RvcDogbi50b3AgKyBpLCBoZWlnaHQ6IHMuaGVpZ2h0IC0gaX1cbiAgICAgICAgICAgIH0sIHM6IGZ1bmN0aW9uIChlLCB0LCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtoZWlnaHQ6IHRoaXMub3JpZ2luYWxTaXplLmhlaWdodCArIGl9XG4gICAgICAgICAgICB9LCBzZTogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5fY2hhbmdlLmUuYXBwbHkodGhpcywgW3QsIGksIHNdKSlcbiAgICAgICAgICAgIH0sIHN3OiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmV4dGVuZCh0aGlzLl9jaGFuZ2Uucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLCBbdCwgaSwgc10pKVxuICAgICAgICAgICAgfSwgbmU6IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFt0LCBpLCBzXSkpXG4gICAgICAgICAgICB9LCBudzogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5fY2hhbmdlLncuYXBwbHkodGhpcywgW3QsIGksIHNdKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX3Byb3BhZ2F0ZTogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIGUudWkucGx1Z2luLmNhbGwodGhpcywgdCwgW2ksIHRoaXMudWkoKV0pLCBcInJlc2l6ZVwiICE9PSB0ICYmIHRoaXMuX3RyaWdnZXIodCwgaSwgdGhpcy51aSgpKVxuICAgICAgICB9LFxuICAgICAgICBwbHVnaW5zOiB7fSxcbiAgICAgICAgdWk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFbGVtZW50OiB0aGlzLm9yaWdpbmFsRWxlbWVudCxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBzaXplOiB0aGlzLnNpemUsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxTaXplOiB0aGlzLm9yaWdpbmFsU2l6ZSxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFBvc2l0aW9uOiB0aGlzLm9yaWdpbmFsUG9zaXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pLCBlLnVpLnBsdWdpbi5hZGQoXCJyZXNpemFibGVcIiwgXCJhbmltYXRlXCIsIHtcbiAgICAgICAgc3RvcDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gZSh0aGlzKS5yZXNpemFibGUoXCJpbnN0YW5jZVwiKSwgcyA9IGkub3B0aW9ucywgbiA9IGkuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgYSA9IG4ubGVuZ3RoICYmIC90ZXh0YXJlYS9pLnRlc3QoblswXS5ub2RlTmFtZSksXG4gICAgICAgICAgICAgICAgbyA9IGEgJiYgaS5faGFzU2Nyb2xsKG5bMF0sIFwibGVmdFwiKSA/IDAgOiBpLnNpemVEaWZmLmhlaWdodCwgciA9IGEgPyAwIDogaS5zaXplRGlmZi53aWR0aCxcbiAgICAgICAgICAgICAgICBoID0ge3dpZHRoOiBpLnNpemUud2lkdGggLSByLCBoZWlnaHQ6IGkuc2l6ZS5oZWlnaHQgLSBvfSxcbiAgICAgICAgICAgICAgICBsID0gcGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcImxlZnRcIiksIDEwKSArIChpLnBvc2l0aW9uLmxlZnQgLSBpLm9yaWdpbmFsUG9zaXRpb24ubGVmdCkgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICB1ID0gcGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcInRvcFwiKSwgMTApICsgKGkucG9zaXRpb24udG9wIC0gaS5vcmlnaW5hbFBvc2l0aW9uLnRvcCkgfHwgbnVsbDtcbiAgICAgICAgICAgIGkuZWxlbWVudC5hbmltYXRlKGUuZXh0ZW5kKGgsIHUgJiYgbCA/IHt0b3A6IHUsIGxlZnQ6IGx9IDoge30pLCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHMuYW5pbWF0ZUR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogcy5hbmltYXRlRWFzaW5nLFxuICAgICAgICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcIndpZHRoXCIpLCAxMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHBhcnNlSW50KGkuZWxlbWVudC5jc3MoXCJoZWlnaHRcIiksIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogcGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcInRvcFwiKSwgMTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogcGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcImxlZnRcIiksIDEwKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBuICYmIG4ubGVuZ3RoICYmIGUoblswXSkuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzLmhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9KSwgaS5fdXBkYXRlQ2FjaGUocyksIGkuX3Byb3BhZ2F0ZShcInJlc2l6ZVwiLCB0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsIFwiY29udGFpbm1lbnRcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMsIG4sIGEsIG8sIHIsIGggPSBlKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpLCBsID0gaC5vcHRpb25zLCB1ID0gaC5lbGVtZW50LCBkID0gbC5jb250YWlubWVudCxcbiAgICAgICAgICAgICAgICBjID0gZCBpbnN0YW5jZW9mIGUgPyBkLmdldCgwKSA6IC9wYXJlbnQvLnRlc3QoZCkgPyB1LnBhcmVudCgpLmdldCgwKSA6IGQ7XG4gICAgICAgICAgICBjICYmIChoLmNvbnRhaW5lckVsZW1lbnQgPSBlKGMpLCAvZG9jdW1lbnQvLnRlc3QoZCkgfHwgZCA9PT0gZG9jdW1lbnQgPyAoaC5jb250YWluZXJPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICB0b3A6IDBcbiAgICAgICAgICAgIH0sIGguY29udGFpbmVyUG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfSwgaC5wYXJlbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUoZG9jdW1lbnQpLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBlKGRvY3VtZW50KS53aWR0aCgpLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZShkb2N1bWVudCkuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodFxuICAgICAgICAgICAgfSkgOiAodCA9IGUoYyksIGkgPSBbXSwgZShbXCJUb3BcIiwgXCJSaWdodFwiLCBcIkxlZnRcIiwgXCJCb3R0b21cIl0pLmVhY2goZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgICAgICAgICAgICBpW2VdID0gaC5fbnVtKHQuY3NzKFwicGFkZGluZ1wiICsgcykpXG4gICAgICAgICAgICB9KSwgaC5jb250YWluZXJPZmZzZXQgPSB0Lm9mZnNldCgpLCBoLmNvbnRhaW5lclBvc2l0aW9uID0gdC5wb3NpdGlvbigpLCBoLmNvbnRhaW5lclNpemUgPSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0LmlubmVySGVpZ2h0KCkgLSBpWzNdLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB0LmlubmVyV2lkdGgoKSAtIGlbMV1cbiAgICAgICAgICAgIH0sIHMgPSBoLmNvbnRhaW5lck9mZnNldCwgbiA9IGguY29udGFpbmVyU2l6ZS5oZWlnaHQsIGEgPSBoLmNvbnRhaW5lclNpemUud2lkdGgsIG8gPSBoLl9oYXNTY3JvbGwoYywgXCJsZWZ0XCIpID8gYy5zY3JvbGxXaWR0aCA6IGEsIHIgPSBoLl9oYXNTY3JvbGwoYykgPyBjLnNjcm9sbEhlaWdodCA6IG4sIGgucGFyZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBjLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHMubGVmdCxcbiAgICAgICAgICAgICAgICB0b3A6IHMudG9wLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBvLFxuICAgICAgICAgICAgICAgIGhlaWdodDogclxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH0sIHJlc2l6ZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuLCBhLCBvID0gZSh0aGlzKS5yZXNpemFibGUoXCJpbnN0YW5jZVwiKSwgciA9IG8ub3B0aW9ucywgaCA9IG8uY29udGFpbmVyT2Zmc2V0LCBsID0gby5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICB1ID0gby5fYXNwZWN0UmF0aW8gfHwgdC5zaGlmdEtleSwgZCA9IHt0b3A6IDAsIGxlZnQ6IDB9LCBjID0gby5jb250YWluZXJFbGVtZW50LCBwID0gITA7XG4gICAgICAgICAgICBjWzBdICE9PSBkb2N1bWVudCAmJiAvc3RhdGljLy50ZXN0KGMuY3NzKFwicG9zaXRpb25cIikpICYmIChkID0gaCksIGwubGVmdCA8IChvLl9oZWxwZXIgPyBoLmxlZnQgOiAwKSAmJiAoby5zaXplLndpZHRoID0gby5zaXplLndpZHRoICsgKG8uX2hlbHBlciA/IG8ucG9zaXRpb24ubGVmdCAtIGgubGVmdCA6IG8ucG9zaXRpb24ubGVmdCAtIGQubGVmdCksIHUgJiYgKG8uc2l6ZS5oZWlnaHQgPSBvLnNpemUud2lkdGggLyBvLmFzcGVjdFJhdGlvLCBwID0gITEpLCBvLnBvc2l0aW9uLmxlZnQgPSByLmhlbHBlciA/IGgubGVmdCA6IDApLCBsLnRvcCA8IChvLl9oZWxwZXIgPyBoLnRvcCA6IDApICYmIChvLnNpemUuaGVpZ2h0ID0gby5zaXplLmhlaWdodCArIChvLl9oZWxwZXIgPyBvLnBvc2l0aW9uLnRvcCAtIGgudG9wIDogby5wb3NpdGlvbi50b3ApLCB1ICYmIChvLnNpemUud2lkdGggPSBvLnNpemUuaGVpZ2h0ICogby5hc3BlY3RSYXRpbywgcCA9ICExKSwgby5wb3NpdGlvbi50b3AgPSBvLl9oZWxwZXIgPyBoLnRvcCA6IDApLCBuID0gby5jb250YWluZXJFbGVtZW50LmdldCgwKSA9PT0gby5lbGVtZW50LnBhcmVudCgpLmdldCgwKSwgYSA9IC9yZWxhdGl2ZXxhYnNvbHV0ZS8udGVzdChvLmNvbnRhaW5lckVsZW1lbnQuY3NzKFwicG9zaXRpb25cIikpLCBuICYmIGEgPyAoby5vZmZzZXQubGVmdCA9IG8ucGFyZW50RGF0YS5sZWZ0ICsgby5wb3NpdGlvbi5sZWZ0LCBvLm9mZnNldC50b3AgPSBvLnBhcmVudERhdGEudG9wICsgby5wb3NpdGlvbi50b3ApIDogKG8ub2Zmc2V0LmxlZnQgPSBvLmVsZW1lbnQub2Zmc2V0KCkubGVmdCwgby5vZmZzZXQudG9wID0gby5lbGVtZW50Lm9mZnNldCgpLnRvcCksIGkgPSBNYXRoLmFicyhvLnNpemVEaWZmLndpZHRoICsgKG8uX2hlbHBlciA/IG8ub2Zmc2V0LmxlZnQgLSBkLmxlZnQgOiBvLm9mZnNldC5sZWZ0IC0gaC5sZWZ0KSksIHMgPSBNYXRoLmFicyhvLnNpemVEaWZmLmhlaWdodCArIChvLl9oZWxwZXIgPyBvLm9mZnNldC50b3AgLSBkLnRvcCA6IG8ub2Zmc2V0LnRvcCAtIGgudG9wKSksIGkgKyBvLnNpemUud2lkdGggPj0gby5wYXJlbnREYXRhLndpZHRoICYmIChvLnNpemUud2lkdGggPSBvLnBhcmVudERhdGEud2lkdGggLSBpLCB1ICYmIChvLnNpemUuaGVpZ2h0ID0gby5zaXplLndpZHRoIC8gby5hc3BlY3RSYXRpbywgcCA9ICExKSksIHMgKyBvLnNpemUuaGVpZ2h0ID49IG8ucGFyZW50RGF0YS5oZWlnaHQgJiYgKG8uc2l6ZS5oZWlnaHQgPSBvLnBhcmVudERhdGEuaGVpZ2h0IC0gcywgdSAmJiAoby5zaXplLndpZHRoID0gby5zaXplLmhlaWdodCAqIG8uYXNwZWN0UmF0aW8sIHAgPSAhMSkpLCBwIHx8IChvLnBvc2l0aW9uLmxlZnQgPSBvLnByZXZQb3NpdGlvbi5sZWZ0LCBvLnBvc2l0aW9uLnRvcCA9IG8ucHJldlBvc2l0aW9uLnRvcCwgby5zaXplLndpZHRoID0gby5wcmV2U2l6ZS53aWR0aCwgby5zaXplLmhlaWdodCA9IG8ucHJldlNpemUuaGVpZ2h0KVxuICAgICAgICB9LCBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IGUodGhpcykucmVzaXphYmxlKFwiaW5zdGFuY2VcIiksIGkgPSB0Lm9wdGlvbnMsIHMgPSB0LmNvbnRhaW5lck9mZnNldCwgbiA9IHQuY29udGFpbmVyUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgYSA9IHQuY29udGFpbmVyRWxlbWVudCwgbyA9IGUodC5oZWxwZXIpLCByID0gby5vZmZzZXQoKSwgaCA9IG8ub3V0ZXJXaWR0aCgpIC0gdC5zaXplRGlmZi53aWR0aCxcbiAgICAgICAgICAgICAgICBsID0gby5vdXRlckhlaWdodCgpIC0gdC5zaXplRGlmZi5oZWlnaHQ7XG4gICAgICAgICAgICB0Ll9oZWxwZXIgJiYgIWkuYW5pbWF0ZSAmJiAvcmVsYXRpdmUvLnRlc3QoYS5jc3MoXCJwb3NpdGlvblwiKSkgJiYgZSh0aGlzKS5jc3Moe1xuICAgICAgICAgICAgICAgIGxlZnQ6IHIubGVmdCAtIG4ubGVmdCAtIHMubGVmdCxcbiAgICAgICAgICAgICAgICB3aWR0aDogaCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGxcbiAgICAgICAgICAgIH0pLCB0Ll9oZWxwZXIgJiYgIWkuYW5pbWF0ZSAmJiAvc3RhdGljLy50ZXN0KGEuY3NzKFwicG9zaXRpb25cIikpICYmIGUodGhpcykuY3NzKHtcbiAgICAgICAgICAgICAgICBsZWZ0OiByLmxlZnQgLSBuLmxlZnQgLSBzLmxlZnQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSksIGUudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLCBcImFsc29SZXNpemVcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpLCBpID0gdC5vcHRpb25zLCBzID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBlKHQpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHQuZGF0YShcInVpLXJlc2l6YWJsZS1hbHNvcmVzaXplXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludCh0LndpZHRoKCksIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogcGFyc2VJbnQodC5oZWlnaHQoKSwgMTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogcGFyc2VJbnQodC5jc3MoXCJsZWZ0XCIpLCAxMCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHBhcnNlSW50KHQuY3NzKFwidG9wXCIpLCAxMClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIGkuYWxzb1Jlc2l6ZSB8fCBpLmFsc29SZXNpemUucGFyZW50Tm9kZSA/IHMoaS5hbHNvUmVzaXplKSA6IGkuYWxzb1Jlc2l6ZS5sZW5ndGggPyAoaS5hbHNvUmVzaXplID0gaS5hbHNvUmVzaXplWzBdLCBzKGkuYWxzb1Jlc2l6ZSkpIDogZS5lYWNoKGkuYWxzb1Jlc2l6ZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBzKGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCByZXNpemU6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGUodGhpcykucmVzaXphYmxlKFwiaW5zdGFuY2VcIiksIG4gPSBzLm9wdGlvbnMsIGEgPSBzLm9yaWdpbmFsU2l6ZSwgbyA9IHMub3JpZ2luYWxQb3NpdGlvbiwgciA9IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHMuc2l6ZS5oZWlnaHQgLSBhLmhlaWdodCB8fCAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBzLnNpemUud2lkdGggLSBhLndpZHRoIHx8IDAsXG4gICAgICAgICAgICAgICAgdG9wOiBzLnBvc2l0aW9uLnRvcCAtIG8udG9wIHx8IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogcy5wb3NpdGlvbi5sZWZ0IC0gby5sZWZ0IHx8IDBcbiAgICAgICAgICAgIH0sIGggPSBmdW5jdGlvbiAodCwgcykge1xuICAgICAgICAgICAgICAgIGUodCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKSwgbiA9IGUodGhpcykuZGF0YShcInVpLXJlc2l6YWJsZS1hbHNvcmVzaXplXCIpLCBhID0ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBvID0gcyAmJiBzLmxlbmd0aCA/IHMgOiB0LnBhcmVudHMoaS5vcmlnaW5hbEVsZW1lbnRbMF0pLmxlbmd0aCA/IFtcIndpZHRoXCIsIFwiaGVpZ2h0XCJdIDogW1wid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJ0b3BcIiwgXCJsZWZ0XCJdO1xuICAgICAgICAgICAgICAgICAgICBlLmVhY2gobywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gKG5bdF0gfHwgMCkgKyAoclt0XSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgaSA+PSAwICYmIChhW3RdID0gaSB8fCBudWxsKVxuICAgICAgICAgICAgICAgICAgICB9KSwgdC5jc3MoYSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIG4uYWxzb1Jlc2l6ZSB8fCBuLmFsc29SZXNpemUubm9kZVR5cGUgPyBoKG4uYWxzb1Jlc2l6ZSkgOiBlLmVhY2gobi5hbHNvUmVzaXplLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIGgoZSwgdClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGUodGhpcykucmVtb3ZlRGF0YShcInJlc2l6YWJsZS1hbHNvcmVzaXplXCIpXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsIFwiZ2hvc3RcIiwge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpLCBpID0gdC5vcHRpb25zLCBzID0gdC5zaXplO1xuICAgICAgICAgICAgdC5naG9zdCA9IHQub3JpZ2luYWxFbGVtZW50LmNsb25lKCksIHQuZ2hvc3QuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAuMjUsXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBzLmhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogcy53aWR0aCxcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICB0b3A6IDBcbiAgICAgICAgICAgIH0pLmFkZENsYXNzKFwidWktcmVzaXphYmxlLWdob3N0XCIpLmFkZENsYXNzKFwic3RyaW5nXCIgPT0gdHlwZW9mIGkuZ2hvc3QgPyBpLmdob3N0IDogXCJcIiksIHQuZ2hvc3QuYXBwZW5kVG8odC5oZWxwZXIpXG4gICAgICAgIH0sIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpO1xuICAgICAgICAgICAgdC5naG9zdCAmJiB0Lmdob3N0LmNzcyh7cG9zaXRpb246IFwicmVsYXRpdmVcIiwgaGVpZ2h0OiB0LnNpemUuaGVpZ2h0LCB3aWR0aDogdC5zaXplLndpZHRofSlcbiAgICAgICAgfSwgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpO1xuICAgICAgICAgICAgdC5naG9zdCAmJiB0LmhlbHBlciAmJiB0LmhlbHBlci5nZXQoMCkucmVtb3ZlQ2hpbGQodC5naG9zdC5nZXQoMCkpXG4gICAgICAgIH1cbiAgICB9KSwgZS51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsIFwiZ3JpZFwiLCB7XG4gICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQsIGkgPSBlKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpLCBzID0gaS5vcHRpb25zLCBuID0gaS5zaXplLCBhID0gaS5vcmlnaW5hbFNpemUsXG4gICAgICAgICAgICAgICAgbyA9IGkub3JpZ2luYWxQb3NpdGlvbiwgciA9IGkuYXhpcywgaCA9IFwibnVtYmVyXCIgPT0gdHlwZW9mIHMuZ3JpZCA/IFtzLmdyaWQsIHMuZ3JpZF0gOiBzLmdyaWQsXG4gICAgICAgICAgICAgICAgbCA9IGhbMF0gfHwgMSwgdSA9IGhbMV0gfHwgMSwgZCA9IE1hdGgucm91bmQoKG4ud2lkdGggLSBhLndpZHRoKSAvIGwpICogbCxcbiAgICAgICAgICAgICAgICBjID0gTWF0aC5yb3VuZCgobi5oZWlnaHQgLSBhLmhlaWdodCkgLyB1KSAqIHUsIHAgPSBhLndpZHRoICsgZCwgZiA9IGEuaGVpZ2h0ICsgYyxcbiAgICAgICAgICAgICAgICBtID0gcy5tYXhXaWR0aCAmJiBwID4gcy5tYXhXaWR0aCwgZyA9IHMubWF4SGVpZ2h0ICYmIGYgPiBzLm1heEhlaWdodCwgdiA9IHMubWluV2lkdGggJiYgcy5taW5XaWR0aCA+IHAsXG4gICAgICAgICAgICAgICAgeSA9IHMubWluSGVpZ2h0ICYmIHMubWluSGVpZ2h0ID4gZjtcbiAgICAgICAgICAgIHMuZ3JpZCA9IGgsIHYgJiYgKHAgKz0gbCksIHkgJiYgKGYgKz0gdSksIG0gJiYgKHAgLT0gbCksIGcgJiYgKGYgLT0gdSksIC9eKHNlfHN8ZSkkLy50ZXN0KHIpID8gKGkuc2l6ZS53aWR0aCA9IHAsIGkuc2l6ZS5oZWlnaHQgPSBmKSA6IC9eKG5lKSQvLnRlc3QocikgPyAoaS5zaXplLndpZHRoID0gcCwgaS5zaXplLmhlaWdodCA9IGYsIGkucG9zaXRpb24udG9wID0gby50b3AgLSBjKSA6IC9eKHN3KSQvLnRlc3QocikgPyAoaS5zaXplLndpZHRoID0gcCwgaS5zaXplLmhlaWdodCA9IGYsIGkucG9zaXRpb24ubGVmdCA9IG8ubGVmdCAtIGQpIDogKCgwID49IGYgLSB1IHx8IDAgPj0gcCAtIGwpICYmICh0ID0gaS5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKHRoaXMpKSwgZiAtIHUgPiAwID8gKGkuc2l6ZS5oZWlnaHQgPSBmLCBpLnBvc2l0aW9uLnRvcCA9IG8udG9wIC0gYykgOiAoZiA9IHUgLSB0LmhlaWdodCwgaS5zaXplLmhlaWdodCA9IGYsIGkucG9zaXRpb24udG9wID0gby50b3AgKyBhLmhlaWdodCAtIGYpLCBwIC0gbCA+IDAgPyAoaS5zaXplLndpZHRoID0gcCwgaS5wb3NpdGlvbi5sZWZ0ID0gby5sZWZ0IC0gZCkgOiAocCA9IHUgLSB0LmhlaWdodCwgaS5zaXplLndpZHRoID0gcCwgaS5wb3NpdGlvbi5sZWZ0ID0gby5sZWZ0ICsgYS53aWR0aCAtIHApKVxuICAgICAgICB9XG4gICAgfSksIGUudWkucmVzaXphYmxlLCBlLndpZGdldChcInVpLmRpYWxvZ1wiLCB7XG4gICAgICAgIHZlcnNpb246IFwiMS4xMS4yXCIsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGFwcGVuZFRvOiBcImJvZHlcIixcbiAgICAgICAgICAgIGF1dG9PcGVuOiAhMCxcbiAgICAgICAgICAgIGJ1dHRvbnM6IFtdLFxuICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogITAsXG4gICAgICAgICAgICBjbG9zZVRleHQ6IFwiQ2xvc2VcIixcbiAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiBcIlwiLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiAhMCxcbiAgICAgICAgICAgIGhpZGU6IG51bGwsXG4gICAgICAgICAgICBoZWlnaHQ6IFwiYXV0b1wiLFxuICAgICAgICAgICAgbWF4SGVpZ2h0OiBudWxsLFxuICAgICAgICAgICAgbWF4V2lkdGg6IG51bGwsXG4gICAgICAgICAgICBtaW5IZWlnaHQ6IDE1MCxcbiAgICAgICAgICAgIG1pbldpZHRoOiAxNTAsXG4gICAgICAgICAgICBtb2RhbDogITEsXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgIG15OiBcImNlbnRlclwiLCBhdDogXCJjZW50ZXJcIiwgb2Y6IHdpbmRvdywgY29sbGlzaW9uOiBcImZpdFwiLCB1c2luZzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlKHRoaXMpLmNzcyh0KS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgIDAgPiBpICYmIGUodGhpcykuY3NzKFwidG9wXCIsIHQudG9wIC0gaSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzaXphYmxlOiAhMCxcbiAgICAgICAgICAgIHNob3c6IG51bGwsXG4gICAgICAgICAgICB0aXRsZTogbnVsbCxcbiAgICAgICAgICAgIHdpZHRoOiAzMDAsXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogbnVsbCxcbiAgICAgICAgICAgIGNsb3NlOiBudWxsLFxuICAgICAgICAgICAgZHJhZzogbnVsbCxcbiAgICAgICAgICAgIGRyYWdTdGFydDogbnVsbCxcbiAgICAgICAgICAgIGRyYWdTdG9wOiBudWxsLFxuICAgICAgICAgICAgZm9jdXM6IG51bGwsXG4gICAgICAgICAgICBvcGVuOiBudWxsLFxuICAgICAgICAgICAgcmVzaXplOiBudWxsLFxuICAgICAgICAgICAgcmVzaXplU3RhcnQ6IG51bGwsXG4gICAgICAgICAgICByZXNpemVTdG9wOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHNpemVSZWxhdGVkT3B0aW9uczoge1xuICAgICAgICAgICAgYnV0dG9uczogITAsXG4gICAgICAgICAgICBoZWlnaHQ6ICEwLFxuICAgICAgICAgICAgbWF4SGVpZ2h0OiAhMCxcbiAgICAgICAgICAgIG1heFdpZHRoOiAhMCxcbiAgICAgICAgICAgIG1pbkhlaWdodDogITAsXG4gICAgICAgICAgICBtaW5XaWR0aDogITAsXG4gICAgICAgICAgICB3aWR0aDogITBcbiAgICAgICAgfSxcbiAgICAgICAgcmVzaXphYmxlUmVsYXRlZE9wdGlvbnM6IHttYXhIZWlnaHQ6ICEwLCBtYXhXaWR0aDogITAsIG1pbkhlaWdodDogITAsIG1pbldpZHRoOiAhMH0sXG4gICAgICAgIF9jcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxDc3MgPSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogdGhpcy5lbGVtZW50WzBdLnN0eWxlLmRpc3BsYXksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuZWxlbWVudFswXS5zdHlsZS53aWR0aCxcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IHRoaXMuZWxlbWVudFswXS5zdHlsZS5taW5IZWlnaHQsXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiB0aGlzLmVsZW1lbnRbMF0uc3R5bGUubWF4SGVpZ2h0LFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5lbGVtZW50WzBdLnN0eWxlLmhlaWdodFxuICAgICAgICAgICAgfSwgdGhpcy5vcmlnaW5hbFBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgIHBhcmVudDogdGhpcy5lbGVtZW50LnBhcmVudCgpLFxuICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmVsZW1lbnQucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleCh0aGlzLmVsZW1lbnQpXG4gICAgICAgICAgICB9LCB0aGlzLm9yaWdpbmFsVGl0bGUgPSB0aGlzLmVsZW1lbnQuYXR0cihcInRpdGxlXCIpLCB0aGlzLm9wdGlvbnMudGl0bGUgPSB0aGlzLm9wdGlvbnMudGl0bGUgfHwgdGhpcy5vcmlnaW5hbFRpdGxlLCB0aGlzLl9jcmVhdGVXcmFwcGVyKCksIHRoaXMuZWxlbWVudC5zaG93KCkucmVtb3ZlQXR0cihcInRpdGxlXCIpLmFkZENsYXNzKFwidWktZGlhbG9nLWNvbnRlbnQgdWktd2lkZ2V0LWNvbnRlbnRcIikuYXBwZW5kVG8odGhpcy51aURpYWxvZyksIHRoaXMuX2NyZWF0ZVRpdGxlYmFyKCksIHRoaXMuX2NyZWF0ZUJ1dHRvblBhbmUoKSwgdGhpcy5vcHRpb25zLmRyYWdnYWJsZSAmJiBlLmZuLmRyYWdnYWJsZSAmJiB0aGlzLl9tYWtlRHJhZ2dhYmxlKCksIHRoaXMub3B0aW9ucy5yZXNpemFibGUgJiYgZS5mbi5yZXNpemFibGUgJiYgdGhpcy5fbWFrZVJlc2l6YWJsZSgpLCB0aGlzLl9pc09wZW4gPSAhMSwgdGhpcy5fdHJhY2tGb2N1cygpXG4gICAgICAgIH0sXG4gICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYXV0b09wZW4gJiYgdGhpcy5vcGVuKClcbiAgICAgICAgfSxcbiAgICAgICAgX2FwcGVuZFRvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucy5hcHBlbmRUbztcbiAgICAgICAgICAgIHJldHVybiB0ICYmICh0LmpxdWVyeSB8fCB0Lm5vZGVUeXBlKSA/IGUodCkgOiB0aGlzLmRvY3VtZW50LmZpbmQodCB8fCBcImJvZHlcIikuZXEoMClcbiAgICAgICAgfSxcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlLCB0ID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uO1xuICAgICAgICAgICAgdGhpcy5fZGVzdHJveU92ZXJsYXkoKSwgdGhpcy5lbGVtZW50LnJlbW92ZVVuaXF1ZUlkKCkucmVtb3ZlQ2xhc3MoXCJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudFwiKS5jc3ModGhpcy5vcmlnaW5hbENzcykuZGV0YWNoKCksIHRoaXMudWlEaWFsb2cuc3RvcCghMCwgITApLnJlbW92ZSgpLCB0aGlzLm9yaWdpbmFsVGl0bGUgJiYgdGhpcy5lbGVtZW50LmF0dHIoXCJ0aXRsZVwiLCB0aGlzLm9yaWdpbmFsVGl0bGUpLCBlID0gdC5wYXJlbnQuY2hpbGRyZW4oKS5lcSh0LmluZGV4KSwgZS5sZW5ndGggJiYgZVswXSAhPT0gdGhpcy5lbGVtZW50WzBdID8gZS5iZWZvcmUodGhpcy5lbGVtZW50KSA6IHQucGFyZW50LmFwcGVuZCh0aGlzLmVsZW1lbnQpXG4gICAgICAgIH0sXG4gICAgICAgIHdpZGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudWlEaWFsb2dcbiAgICAgICAgfSxcbiAgICAgICAgZGlzYWJsZTogZS5ub29wLFxuICAgICAgICBlbmFibGU6IGUubm9vcCxcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNPcGVuICYmIHRoaXMuX3RyaWdnZXIoXCJiZWZvcmVDbG9zZVwiLCB0KSAhPT0gITEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNPcGVuID0gITEsIHRoaXMuX2ZvY3VzZWRFbGVtZW50ID0gbnVsbCwgdGhpcy5fZGVzdHJveU92ZXJsYXkoKSwgdGhpcy5fdW50cmFja0luc3RhbmNlKCksICF0aGlzLm9wZW5lci5maWx0ZXIoXCI6Zm9jdXNhYmxlXCIpLmZvY3VzKCkubGVuZ3RoKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50LCBpICYmIFwiYm9keVwiICE9PSBpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgZShpKS5ibHVyKClcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2hpZGUodGhpcy51aURpYWxvZywgdGhpcy5vcHRpb25zLmhpZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5fdHJpZ2dlcihcImNsb3NlXCIsIHQpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaXNPcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNPcGVuXG4gICAgICAgIH0sXG4gICAgICAgIG1vdmVUb1RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fbW92ZVRvVG9wKClcbiAgICAgICAgfSxcbiAgICAgICAgX21vdmVUb1RvcDogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzID0gITEsIG4gPSB0aGlzLnVpRGlhbG9nLnNpYmxpbmdzKFwiLnVpLWZyb250OnZpc2libGVcIikubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gK2UodGhpcykuY3NzKFwiei1pbmRleFwiKVxuICAgICAgICAgICAgfSkuZ2V0KCksIGEgPSBNYXRoLm1heC5hcHBseShudWxsLCBuKTtcbiAgICAgICAgICAgIHJldHVybiBhID49ICt0aGlzLnVpRGlhbG9nLmNzcyhcInotaW5kZXhcIikgJiYgKHRoaXMudWlEaWFsb2cuY3NzKFwiei1pbmRleFwiLCBhICsgMSksIHMgPSAhMCksIHMgJiYgIWkgJiYgdGhpcy5fdHJpZ2dlcihcImZvY3VzXCIsIHQpLCBzXG4gICAgICAgIH0sXG4gICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc09wZW4gPyAodGhpcy5fbW92ZVRvVG9wKCkgJiYgdGhpcy5fZm9jdXNUYWJiYWJsZSgpLCB2b2lkIDApIDogKHRoaXMuX2lzT3BlbiA9ICEwLCB0aGlzLm9wZW5lciA9IGUodGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50KSwgdGhpcy5fc2l6ZSgpLCB0aGlzLl9wb3NpdGlvbigpLCB0aGlzLl9jcmVhdGVPdmVybGF5KCksIHRoaXMuX21vdmVUb1RvcChudWxsLCAhMCksIHRoaXMub3ZlcmxheSAmJiB0aGlzLm92ZXJsYXkuY3NzKFwiei1pbmRleFwiLCB0aGlzLnVpRGlhbG9nLmNzcyhcInotaW5kZXhcIikgLSAxKSwgdGhpcy5fc2hvdyh0aGlzLnVpRGlhbG9nLCB0aGlzLm9wdGlvbnMuc2hvdywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQuX2ZvY3VzVGFiYmFibGUoKSwgdC5fdHJpZ2dlcihcImZvY3VzXCIpXG4gICAgICAgICAgICB9KSwgdGhpcy5fbWFrZUZvY3VzVGFyZ2V0KCksIHRoaXMuX3RyaWdnZXIoXCJvcGVuXCIpLCB2b2lkIDApXG4gICAgICAgIH0sXG4gICAgICAgIF9mb2N1c1RhYmJhYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMuX2ZvY3VzZWRFbGVtZW50O1xuICAgICAgICAgICAgZSB8fCAoZSA9IHRoaXMuZWxlbWVudC5maW5kKFwiW2F1dG9mb2N1c11cIikpLCBlLmxlbmd0aCB8fCAoZSA9IHRoaXMuZWxlbWVudC5maW5kKFwiOnRhYmJhYmxlXCIpKSwgZS5sZW5ndGggfHwgKGUgPSB0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5maW5kKFwiOnRhYmJhYmxlXCIpKSwgZS5sZW5ndGggfHwgKGUgPSB0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZS5maWx0ZXIoXCI6dGFiYmFibGVcIikpLCBlLmxlbmd0aCB8fCAoZSA9IHRoaXMudWlEaWFsb2cpLCBlLmVxKDApLmZvY3VzKClcbiAgICAgICAgfSxcbiAgICAgICAgX2tlZXBGb2N1czogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGkoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQsIGkgPSB0aGlzLnVpRGlhbG9nWzBdID09PSB0IHx8IGUuY29udGFpbnModGhpcy51aURpYWxvZ1swXSwgdCk7XG4gICAgICAgICAgICAgICAgaSB8fCB0aGlzLl9mb2N1c1RhYmJhYmxlKClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBpLmNhbGwodGhpcyksIHRoaXMuX2RlbGF5KGkpXG4gICAgICAgIH0sXG4gICAgICAgIF9jcmVhdGVXcmFwcGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVpRGlhbG9nID0gZShcIjxkaXY+XCIpLmFkZENsYXNzKFwidWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLWZyb250IFwiICsgdGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzKS5oaWRlKCkuYXR0cih7XG4gICAgICAgICAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgIHJvbGU6IFwiZGlhbG9nXCJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCB0aGlzLl9vbih0aGlzLnVpRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbG9zZU9uRXNjYXBlICYmICF0LmlzRGVmYXVsdFByZXZlbnRlZCgpICYmIHQua2V5Q29kZSAmJiB0LmtleUNvZGUgPT09IGUudWkua2V5Q29kZS5FU0NBUEUpIHJldHVybiB0LnByZXZlbnREZWZhdWx0KCksIHRoaXMuY2xvc2UodCksIHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQua2V5Q29kZSA9PT0gZS51aS5rZXlDb2RlLlRBQiAmJiAhdC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLnVpRGlhbG9nLmZpbmQoXCI6dGFiYmFibGVcIiksIHMgPSBpLmZpbHRlcihcIjpmaXJzdFwiKSwgbiA9IGkuZmlsdGVyKFwiOmxhc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LnRhcmdldCAhPT0gblswXSAmJiB0LnRhcmdldCAhPT0gdGhpcy51aURpYWxvZ1swXSB8fCB0LnNoaWZ0S2V5ID8gdC50YXJnZXQgIT09IHNbMF0gJiYgdC50YXJnZXQgIT09IHRoaXMudWlEaWFsb2dbMF0gfHwgIXQuc2hpZnRLZXkgfHwgKHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0LnByZXZlbnREZWZhdWx0KCkpIDogKHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0LnByZXZlbnREZWZhdWx0KCkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBtb3VzZWRvd246IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVUb1RvcChlKSAmJiB0aGlzLl9mb2N1c1RhYmJhYmxlKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgdGhpcy5lbGVtZW50LmZpbmQoXCJbYXJpYS1kZXNjcmliZWRieV1cIikubGVuZ3RoIHx8IHRoaXMudWlEaWFsb2cuYXR0cih7XCJhcmlhLWRlc2NyaWJlZGJ5XCI6IHRoaXMuZWxlbWVudC51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKX0pXG4gICAgICAgIH0sXG4gICAgICAgIF9jcmVhdGVUaXRsZWJhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQ7XG4gICAgICAgICAgICB0aGlzLnVpRGlhbG9nVGl0bGViYXIgPSBlKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctdGl0bGViYXIgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsIHVpLWhlbHBlci1jbGVhcmZpeFwiKS5wcmVwZW5kVG8odGhpcy51aURpYWxvZyksIHRoaXMuX29uKHRoaXMudWlEaWFsb2dUaXRsZWJhciwge1xuICAgICAgICAgICAgICAgIG1vdXNlZG93bjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZSh0LnRhcmdldCkuY2xvc2VzdChcIi51aS1kaWFsb2ctdGl0bGViYXItY2xvc2VcIikgfHwgdGhpcy51aURpYWxvZy5mb2N1cygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksIHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlID0gZShcIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj5cIikuYnV0dG9uKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5vcHRpb25zLmNsb3NlVGV4dCxcbiAgICAgICAgICAgICAgICBpY29uczoge3ByaW1hcnk6IFwidWktaWNvbi1jbG9zZXRoaWNrXCJ9LFxuICAgICAgICAgICAgICAgIHRleHQ6ICExXG4gICAgICAgICAgICB9KS5hZGRDbGFzcyhcInVpLWRpYWxvZy10aXRsZWJhci1jbG9zZVwiKS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nVGl0bGViYXIpLCB0aGlzLl9vbih0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZSwge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksIHRoaXMuY2xvc2UoZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgdCA9IGUoXCI8c3Bhbj5cIikudW5pcXVlSWQoKS5hZGRDbGFzcyhcInVpLWRpYWxvZy10aXRsZVwiKS5wcmVwZW5kVG8odGhpcy51aURpYWxvZ1RpdGxlYmFyKSwgdGhpcy5fdGl0bGUodCksIHRoaXMudWlEaWFsb2cuYXR0cih7XCJhcmlhLWxhYmVsbGVkYnlcIjogdC5hdHRyKFwiaWRcIil9KVxuICAgICAgICB9LFxuICAgICAgICBfdGl0bGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudGl0bGUgfHwgZS5odG1sKFwiJiMxNjA7XCIpLCBlLnRleHQodGhpcy5vcHRpb25zLnRpdGxlKVxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlQnV0dG9uUGFuZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51aURpYWxvZ0J1dHRvblBhbmUgPSBlKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXhcIiksIHRoaXMudWlCdXR0b25TZXQgPSBlKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctYnV0dG9uc2V0XCIpLmFwcGVuZFRvKHRoaXMudWlEaWFsb2dCdXR0b25QYW5lKSwgdGhpcy5fY3JlYXRlQnV0dG9ucygpXG4gICAgICAgIH0sXG4gICAgICAgIF9jcmVhdGVCdXR0b25zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMsIGkgPSB0aGlzLm9wdGlvbnMuYnV0dG9ucztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5yZW1vdmUoKSwgdGhpcy51aUJ1dHRvblNldC5lbXB0eSgpLCBlLmlzRW1wdHlPYmplY3QoaSkgfHwgZS5pc0FycmF5KGkpICYmICFpLmxlbmd0aCA/ICh0aGlzLnVpRGlhbG9nLnJlbW92ZUNsYXNzKFwidWktZGlhbG9nLWJ1dHRvbnNcIiksIHZvaWQgMCkgOiAoZS5lYWNoKGksIGZ1bmN0aW9uIChpLCBzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4sIGE7XG4gICAgICAgICAgICAgICAgcyA9IGUuaXNGdW5jdGlvbihzKSA/IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHMsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGlcbiAgICAgICAgICAgICAgICB9IDogcywgcyA9IGUuZXh0ZW5kKHt0eXBlOiBcImJ1dHRvblwifSwgcyksIG4gPSBzLmNsaWNrLCBzLmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBuLmFwcGx5KHQuZWxlbWVudFswXSwgYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIH0sIGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGljb25zOiBzLmljb25zLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzLnNob3dUZXh0XG4gICAgICAgICAgICAgICAgfSwgZGVsZXRlIHMuaWNvbnMsIGRlbGV0ZSBzLnNob3dUZXh0LCBlKFwiPGJ1dHRvbj48L2J1dHRvbj5cIiwgcykuYnV0dG9uKGEpLmFwcGVuZFRvKHQudWlCdXR0b25TZXQpXG4gICAgICAgICAgICB9KSwgdGhpcy51aURpYWxvZy5hZGRDbGFzcyhcInVpLWRpYWxvZy1idXR0b25zXCIpLCB0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nKSwgdm9pZCAwKVxuICAgICAgICB9LFxuICAgICAgICBfbWFrZURyYWdnYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gdChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtwb3NpdGlvbjogZS5wb3NpdGlvbiwgb2Zmc2V0OiBlLm9mZnNldH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLCBzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgdGhpcy51aURpYWxvZy5kcmFnZ2FibGUoe1xuICAgICAgICAgICAgICAgIGNhbmNlbDogXCIudWktZGlhbG9nLWNvbnRlbnQsIC51aS1kaWFsb2ctdGl0bGViYXItY2xvc2VcIixcbiAgICAgICAgICAgICAgICBoYW5kbGU6IFwiLnVpLWRpYWxvZy10aXRsZWJhclwiLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5tZW50OiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChzLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgIGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctZHJhZ2dpbmdcIiksIGkuX2Jsb2NrRnJhbWVzKCksIGkuX3RyaWdnZXIoXCJkcmFnU3RhcnRcIiwgcywgdChuKSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRyYWc6IGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAgICAgICAgICAgICAgIGkuX3RyaWdnZXIoXCJkcmFnXCIsIGUsIHQocykpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAobiwgYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGEub2Zmc2V0LmxlZnQgLSBpLmRvY3VtZW50LnNjcm9sbExlZnQoKSwgciA9IGEub2Zmc2V0LnRvcCAtIGkuZG9jdW1lbnQuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHMucG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBteTogXCJsZWZ0IHRvcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXQ6IFwibGVmdFwiICsgKG8gPj0gMCA/IFwiK1wiIDogXCJcIikgKyBvICsgXCIgXCIgKyBcInRvcFwiICsgKHIgPj0gMCA/IFwiK1wiIDogXCJcIikgKyByLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Y6IGkud2luZG93XG4gICAgICAgICAgICAgICAgICAgIH0sIGUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1kaWFsb2ctZHJhZ2dpbmdcIiksIGkuX3VuYmxvY2tGcmFtZXMoKSwgaS5fdHJpZ2dlcihcImRyYWdTdG9wXCIsIG4sIHQoYSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgX21ha2VSZXNpemFibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUG9zaXRpb246IGUub3JpZ2luYWxQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxTaXplOiBlLm9yaWdpbmFsU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGUucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IGUuc2l6ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLCBzID0gdGhpcy5vcHRpb25zLCBuID0gcy5yZXNpemFibGUsIGEgPSB0aGlzLnVpRGlhbG9nLmNzcyhcInBvc2l0aW9uXCIpLFxuICAgICAgICAgICAgICAgIG8gPSBcInN0cmluZ1wiID09IHR5cGVvZiBuID8gbiA6IFwibixlLHMsdyxzZSxzdyxuZSxud1wiO1xuICAgICAgICAgICAgdGhpcy51aURpYWxvZy5yZXNpemFibGUoe1xuICAgICAgICAgICAgICAgIGNhbmNlbDogXCIudWktZGlhbG9nLWNvbnRlbnRcIixcbiAgICAgICAgICAgICAgICBjb250YWlubWVudDogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgIGFsc29SZXNpemU6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogcy5tYXhXaWR0aCxcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IHMubWF4SGVpZ2h0LFxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiBzLm1pbldpZHRoLFxuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogdGhpcy5fbWluSGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgaGFuZGxlczogbyxcbiAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24gKHMsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgZSh0aGlzKS5hZGRDbGFzcyhcInVpLWRpYWxvZy1yZXNpemluZ1wiKSwgaS5fYmxvY2tGcmFtZXMoKSwgaS5fdHJpZ2dlcihcInJlc2l6ZVN0YXJ0XCIsIHMsIHQobikpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAgICAgICAgICAgICAgIGkuX3RyaWdnZXIoXCJyZXNpemVcIiwgZSwgdChzKSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uIChuLCBhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gaS51aURpYWxvZy5vZmZzZXQoKSwgciA9IG8ubGVmdCAtIGkuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG8udG9wIC0gaS5kb2N1bWVudC5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgcy5oZWlnaHQgPSBpLnVpRGlhbG9nLmhlaWdodCgpLCBzLndpZHRoID0gaS51aURpYWxvZy53aWR0aCgpLCBzLnBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXk6IFwibGVmdCB0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBcImxlZnRcIiArIChyID49IDAgPyBcIitcIiA6IFwiXCIpICsgciArIFwiIFwiICsgXCJ0b3BcIiArIChoID49IDAgPyBcIitcIiA6IFwiXCIpICsgaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mOiBpLndpbmRvd1xuICAgICAgICAgICAgICAgICAgICB9LCBlKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktZGlhbG9nLXJlc2l6aW5nXCIpLCBpLl91bmJsb2NrRnJhbWVzKCksIGkuX3RyaWdnZXIoXCJyZXNpemVTdG9wXCIsIG4sIHQoYSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY3NzKFwicG9zaXRpb25cIiwgYSlcbiAgICAgICAgfSxcbiAgICAgICAgX3RyYWNrRm9jdXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX29uKHRoaXMud2lkZ2V0KCksIHtcbiAgICAgICAgICAgICAgICBmb2N1c2luOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYWtlRm9jdXNUYXJnZXQoKSwgdGhpcy5fZm9jdXNlZEVsZW1lbnQgPSBlKHQudGFyZ2V0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9tYWtlRm9jdXNUYXJnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX3VudHJhY2tJbnN0YW5jZSgpLCB0aGlzLl90cmFja2luZ0luc3RhbmNlcygpLnVuc2hpZnQodGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgX3VudHJhY2tJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl90cmFja2luZ0luc3RhbmNlcygpLCBpID0gZS5pbkFycmF5KHRoaXMsIHQpO1xuICAgICAgICAgICAgLTEgIT09IGkgJiYgdC5zcGxpY2UoaSwgMSlcbiAgICAgICAgfSxcbiAgICAgICAgX3RyYWNraW5nSW5zdGFuY2VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMuZG9jdW1lbnQuZGF0YShcInVpLWRpYWxvZy1pbnN0YW5jZXNcIik7XG4gICAgICAgICAgICByZXR1cm4gZSB8fCAoZSA9IFtdLCB0aGlzLmRvY3VtZW50LmRhdGEoXCJ1aS1kaWFsb2ctaW5zdGFuY2VzXCIsIGUpKSwgZVxuICAgICAgICB9LFxuICAgICAgICBfbWluSGVpZ2h0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBcImF1dG9cIiA9PT0gZS5oZWlnaHQgPyBlLm1pbkhlaWdodCA6IE1hdGgubWluKGUubWluSGVpZ2h0LCBlLmhlaWdodClcbiAgICAgICAgfSxcbiAgICAgICAgX3Bvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMudWlEaWFsb2cuaXMoXCI6dmlzaWJsZVwiKTtcbiAgICAgICAgICAgIGUgfHwgdGhpcy51aURpYWxvZy5zaG93KCksIHRoaXMudWlEaWFsb2cucG9zaXRpb24odGhpcy5vcHRpb25zLnBvc2l0aW9uKSwgZSB8fCB0aGlzLnVpRGlhbG9nLmhpZGUoKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uczogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcywgcyA9ICExLCBuID0ge307XG4gICAgICAgICAgICBlLmVhY2godCwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBpLl9zZXRPcHRpb24oZSwgdCksIGUgaW4gaS5zaXplUmVsYXRlZE9wdGlvbnMgJiYgKHMgPSAhMCksIGUgaW4gaS5yZXNpemFibGVSZWxhdGVkT3B0aW9ucyAmJiAobltlXSA9IHQpXG4gICAgICAgICAgICB9KSwgcyAmJiAodGhpcy5fc2l6ZSgpLCB0aGlzLl9wb3NpdGlvbigpKSwgdGhpcy51aURpYWxvZy5pcyhcIjpkYXRhKHVpLXJlc2l6YWJsZSlcIikgJiYgdGhpcy51aURpYWxvZy5yZXNpemFibGUoXCJvcHRpb25cIiwgbilcbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuID0gdGhpcy51aURpYWxvZztcbiAgICAgICAgICAgIFwiZGlhbG9nQ2xhc3NcIiA9PT0gZSAmJiBuLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcykuYWRkQ2xhc3ModCksIFwiZGlzYWJsZWRcIiAhPT0gZSAmJiAodGhpcy5fc3VwZXIoZSwgdCksIFwiYXBwZW5kVG9cIiA9PT0gZSAmJiB0aGlzLnVpRGlhbG9nLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCBcImJ1dHRvbnNcIiA9PT0gZSAmJiB0aGlzLl9jcmVhdGVCdXR0b25zKCksIFwiY2xvc2VUZXh0XCIgPT09IGUgJiYgdGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2UuYnV0dG9uKHtsYWJlbDogXCJcIiArIHR9KSwgXCJkcmFnZ2FibGVcIiA9PT0gZSAmJiAoaSA9IG4uaXMoXCI6ZGF0YSh1aS1kcmFnZ2FibGUpXCIpLCBpICYmICF0ICYmIG4uZHJhZ2dhYmxlKFwiZGVzdHJveVwiKSwgIWkgJiYgdCAmJiB0aGlzLl9tYWtlRHJhZ2dhYmxlKCkpLCBcInBvc2l0aW9uXCIgPT09IGUgJiYgdGhpcy5fcG9zaXRpb24oKSwgXCJyZXNpemFibGVcIiA9PT0gZSAmJiAocyA9IG4uaXMoXCI6ZGF0YSh1aS1yZXNpemFibGUpXCIpLCBzICYmICF0ICYmIG4ucmVzaXphYmxlKFwiZGVzdHJveVwiKSwgcyAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIG4ucmVzaXphYmxlKFwib3B0aW9uXCIsIFwiaGFuZGxlc1wiLCB0KSwgcyB8fCB0ID09PSAhMSB8fCB0aGlzLl9tYWtlUmVzaXphYmxlKCkpLCBcInRpdGxlXCIgPT09IGUgJiYgdGhpcy5fdGl0bGUodGhpcy51aURpYWxvZ1RpdGxlYmFyLmZpbmQoXCIudWktZGlhbG9nLXRpdGxlXCIpKSlcbiAgICAgICAgfSxcbiAgICAgICAgX3NpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlLCB0LCBpLCBzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNob3coKS5jc3Moe1xuICAgICAgICAgICAgICAgIHdpZHRoOiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcbiAgICAgICAgICAgIH0pLCBzLm1pbldpZHRoID4gcy53aWR0aCAmJiAocy53aWR0aCA9IHMubWluV2lkdGgpLCBlID0gdGhpcy51aURpYWxvZy5jc3Moe1xuICAgICAgICAgICAgICAgIGhlaWdodDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHMud2lkdGhcbiAgICAgICAgICAgIH0pLm91dGVySGVpZ2h0KCksIHQgPSBNYXRoLm1heCgwLCBzLm1pbkhlaWdodCAtIGUpLCBpID0gXCJudW1iZXJcIiA9PSB0eXBlb2Ygcy5tYXhIZWlnaHQgPyBNYXRoLm1heCgwLCBzLm1heEhlaWdodCAtIGUpIDogXCJub25lXCIsIFwiYXV0b1wiID09PSBzLmhlaWdodCA/IHRoaXMuZWxlbWVudC5jc3Moe1xuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogdCxcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IGksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBcImF1dG9cIlxuICAgICAgICAgICAgfSkgOiB0aGlzLmVsZW1lbnQuaGVpZ2h0KE1hdGgubWF4KDAsIHMuaGVpZ2h0IC0gZSkpLCB0aGlzLnVpRGlhbG9nLmlzKFwiOmRhdGEodWktcmVzaXphYmxlKVwiKSAmJiB0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZShcIm9wdGlvblwiLCBcIm1pbkhlaWdodFwiLCB0aGlzLl9taW5IZWlnaHQoKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2Jsb2NrRnJhbWVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlmcmFtZUJsb2NrcyA9IHRoaXMuZG9jdW1lbnQuZmluZChcImlmcmFtZVwiKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZShcIjxkaXY+XCIpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0Lm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0Lm91dGVySGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9KS5hcHBlbmRUbyh0LnBhcmVudCgpKS5vZmZzZXQodC5vZmZzZXQoKSlbMF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF91bmJsb2NrRnJhbWVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlmcmFtZUJsb2NrcyAmJiAodGhpcy5pZnJhbWVCbG9ja3MucmVtb3ZlKCksIGRlbGV0ZSB0aGlzLmlmcmFtZUJsb2NrcylcbiAgICAgICAgfSxcbiAgICAgICAgX2FsbG93SW50ZXJhY3Rpb246IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gZSh0LnRhcmdldCkuY2xvc2VzdChcIi51aS1kaWFsb2dcIikubGVuZ3RoID8gITAgOiAhIWUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktZGF0ZXBpY2tlclwiKS5sZW5ndGhcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZU92ZXJsYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubW9kYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICEwO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdCA9ICExXG4gICAgICAgICAgICAgICAgfSksIHRoaXMuZG9jdW1lbnQuZGF0YShcInVpLWRpYWxvZy1vdmVybGF5c1wiKSB8fCB0aGlzLl9vbih0aGlzLmRvY3VtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzaW46IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0IHx8IHRoaXMuX2FsbG93SW50ZXJhY3Rpb24oZSkgfHwgKGUucHJldmVudERlZmF1bHQoKSwgdGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKVswXS5fZm9jdXNUYWJiYWJsZSgpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksIHRoaXMub3ZlcmxheSA9IGUoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInVpLXdpZGdldC1vdmVybGF5IHVpLWZyb250XCIpLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCB0aGlzLl9vbih0aGlzLm92ZXJsYXksIHttb3VzZWRvd246IFwiX2tlZXBGb2N1c1wifSksIHRoaXMuZG9jdW1lbnQuZGF0YShcInVpLWRpYWxvZy1vdmVybGF5c1wiLCAodGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLW92ZXJsYXlzXCIpIHx8IDApICsgMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2Rlc3Ryb3lPdmVybGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1vZGFsICYmIHRoaXMub3ZlcmxheSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLW92ZXJsYXlzXCIpIC0gMTtcbiAgICAgICAgICAgICAgICBlID8gdGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLW92ZXJsYXlzXCIsIGUpIDogdGhpcy5kb2N1bWVudC51bmJpbmQoXCJmb2N1c2luXCIpLnJlbW92ZURhdGEoXCJ1aS1kaWFsb2ctb3ZlcmxheXNcIiksIHRoaXMub3ZlcmxheS5yZW1vdmUoKSwgdGhpcy5vdmVybGF5ID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSksIGUud2lkZ2V0KFwidWkuZHJvcHBhYmxlXCIsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgd2lkZ2V0RXZlbnRQcmVmaXg6IFwiZHJvcFwiLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBhY2NlcHQ6IFwiKlwiLFxuICAgICAgICAgICAgYWN0aXZlQ2xhc3M6ICExLFxuICAgICAgICAgICAgYWRkQ2xhc3NlczogITAsXG4gICAgICAgICAgICBncmVlZHk6ICExLFxuICAgICAgICAgICAgaG92ZXJDbGFzczogITEsXG4gICAgICAgICAgICBzY29wZTogXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB0b2xlcmFuY2U6IFwiaW50ZXJzZWN0XCIsXG4gICAgICAgICAgICBhY3RpdmF0ZTogbnVsbCxcbiAgICAgICAgICAgIGRlYWN0aXZhdGU6IG51bGwsXG4gICAgICAgICAgICBkcm9wOiBudWxsLFxuICAgICAgICAgICAgb3V0OiBudWxsLFxuICAgICAgICAgICAgb3ZlcjogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSA9IHRoaXMub3B0aW9ucywgcyA9IGkuYWNjZXB0O1xuICAgICAgICAgICAgdGhpcy5pc292ZXIgPSAhMSwgdGhpcy5pc291dCA9ICEwLCB0aGlzLmFjY2VwdCA9IGUuaXNGdW5jdGlvbihzKSA/IHMgOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmlzKHMpXG4gICAgICAgICAgICB9LCB0aGlzLnByb3BvcnRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHQgPSBhcmd1bWVudHNbMF0sIHZvaWQgMCkgOiB0ID8gdCA6IHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5lbGVtZW50WzBdLm9mZnNldEhlaWdodFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRoaXMuX2FkZFRvTWFuYWdlcihpLnNjb3BlKSwgaS5hZGRDbGFzc2VzICYmIHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWRyb3BwYWJsZVwiKVxuICAgICAgICB9LFxuICAgICAgICBfYWRkVG9NYW5hZ2VyOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgZS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0XSA9IGUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdF0gfHwgW10sIGUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdF0ucHVzaCh0aGlzKVxuICAgICAgICB9LFxuICAgICAgICBfc3BsaWNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDA7IGUubGVuZ3RoID4gdDsgdCsrKSBlW3RdID09PSB0aGlzICYmIGUuc3BsaWNlKHQsIDEpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IGUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXTtcbiAgICAgICAgICAgIHRoaXMuX3NwbGljZSh0KSwgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktZHJvcHBhYmxlIHVpLWRyb3BwYWJsZS1kaXNhYmxlZFwiKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgaWYgKFwiYWNjZXB0XCIgPT09IHQpIHRoaXMuYWNjZXB0ID0gZS5pc0Z1bmN0aW9uKGkpID8gaSA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuaXMoaSlcbiAgICAgICAgICAgIH07IGVsc2UgaWYgKFwic2NvcGVcIiA9PT0gdCkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gZS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0aGlzLm9wdGlvbnMuc2NvcGVdO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NwbGljZShzKSwgdGhpcy5fYWRkVG9NYW5hZ2VyKGkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zdXBlcih0LCBpKVxuICAgICAgICB9LFxuICAgICAgICBfYWN0aXZhdGU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IGUudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyksIGkgJiYgdGhpcy5fdHJpZ2dlcihcImFjdGl2YXRlXCIsIHQsIHRoaXMudWkoaSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZWFjdGl2YXRlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSBlLnVpLmRkbWFuYWdlci5jdXJyZW50O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICYmIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpLCBpICYmIHRoaXMuX3RyaWdnZXIoXCJkZWFjdGl2YXRlXCIsIHQsIHRoaXMudWkoaSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9vdmVyOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSBlLnVpLmRkbWFuYWdlci5jdXJyZW50O1xuICAgICAgICAgICAgaSAmJiAoaS5jdXJyZW50SXRlbSB8fCBpLmVsZW1lbnQpWzBdICE9PSB0aGlzLmVsZW1lbnRbMF0gJiYgdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sIGkuY3VycmVudEl0ZW0gfHwgaS5lbGVtZW50KSAmJiAodGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKSwgdGhpcy5fdHJpZ2dlcihcIm92ZXJcIiwgdCwgdGhpcy51aShpKSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9vdXQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IGUudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7XG4gICAgICAgICAgICBpICYmIChpLmN1cnJlbnRJdGVtIHx8IGkuZWxlbWVudClbMF0gIT09IHRoaXMuZWxlbWVudFswXSAmJiB0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwgaS5jdXJyZW50SXRlbSB8fCBpLmVsZW1lbnQpICYmICh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyAmJiB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpLCB0aGlzLl90cmlnZ2VyKFwib3V0XCIsIHQsIHRoaXMudWkoaSkpKVxuICAgICAgICB9LFxuICAgICAgICBfZHJvcDogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzID0gaSB8fCBlLnVpLmRkbWFuYWdlci5jdXJyZW50LCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4gcyAmJiAocy5jdXJyZW50SXRlbSB8fCBzLmVsZW1lbnQpWzBdICE9PSB0aGlzLmVsZW1lbnRbMF0gPyAodGhpcy5lbGVtZW50LmZpbmQoXCI6ZGF0YSh1aS1kcm9wcGFibGUpXCIpLm5vdChcIi51aS1kcmFnZ2FibGUtZHJhZ2dpbmdcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBlKHRoaXMpLmRyb3BwYWJsZShcImluc3RhbmNlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpLm9wdGlvbnMuZ3JlZWR5ICYmICFpLm9wdGlvbnMuZGlzYWJsZWQgJiYgaS5vcHRpb25zLnNjb3BlID09PSBzLm9wdGlvbnMuc2NvcGUgJiYgaS5hY2NlcHQuY2FsbChpLmVsZW1lbnRbMF0sIHMuY3VycmVudEl0ZW0gfHwgcy5lbGVtZW50KSAmJiBlLnVpLmludGVyc2VjdChzLCBlLmV4dGVuZChpLCB7b2Zmc2V0OiBpLmVsZW1lbnQub2Zmc2V0KCl9KSwgaS5vcHRpb25zLnRvbGVyYW5jZSwgdCkgPyAobiA9ICEwLCAhMSkgOiB2b2lkIDBcbiAgICAgICAgICAgIH0pLCBuID8gITEgOiB0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwgcy5jdXJyZW50SXRlbSB8fCBzLmVsZW1lbnQpID8gKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyAmJiB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKSwgdGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MgJiYgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKSwgdGhpcy5fdHJpZ2dlcihcImRyb3BcIiwgdCwgdGhpcy51aShzKSksIHRoaXMuZWxlbWVudCkgOiAhMSkgOiAhMVxuICAgICAgICB9LFxuICAgICAgICB1aTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBlLmN1cnJlbnRJdGVtIHx8IGUuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IGUuaGVscGVyLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZS5wb3NpdGlvbkFic1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSksIGUudWkuaW50ZXJzZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBlKGUsIHQsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBlID49IHQgJiYgdCArIGkgPiBlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQsIGksIHMsIG4pIHtcbiAgICAgICAgICAgIGlmICghaS5vZmZzZXQpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHZhciBhID0gKHQucG9zaXRpb25BYnMgfHwgdC5wb3NpdGlvbi5hYnNvbHV0ZSkubGVmdCArIHQubWFyZ2lucy5sZWZ0LFxuICAgICAgICAgICAgICAgIG8gPSAodC5wb3NpdGlvbkFicyB8fCB0LnBvc2l0aW9uLmFic29sdXRlKS50b3AgKyB0Lm1hcmdpbnMudG9wLCByID0gYSArIHQuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsXG4gICAgICAgICAgICAgICAgaCA9IG8gKyB0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCwgbCA9IGkub2Zmc2V0LmxlZnQsIHUgPSBpLm9mZnNldC50b3AsIGQgPSBsICsgaS5wcm9wb3J0aW9ucygpLndpZHRoLFxuICAgICAgICAgICAgICAgIGMgPSB1ICsgaS5wcm9wb3J0aW9ucygpLmhlaWdodDtcbiAgICAgICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgICAgICAgIGNhc2VcImZpdFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA+PSBsICYmIGQgPj0gciAmJiBvID49IHUgJiYgYyA+PSBoO1xuICAgICAgICAgICAgICAgIGNhc2VcImludGVyc2VjdFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSArIHQuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyID4gbCAmJiBkID4gciAtIHQuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyICYmIG8gKyB0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIgPiB1ICYmIGMgPiBoIC0gdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgIGNhc2VcInBvaW50ZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUobi5wYWdlWSwgdSwgaS5wcm9wb3J0aW9ucygpLmhlaWdodCkgJiYgZShuLnBhZ2VYLCBsLCBpLnByb3BvcnRpb25zKCkud2lkdGgpO1xuICAgICAgICAgICAgICAgIGNhc2VcInRvdWNoXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobyA+PSB1ICYmIGMgPj0gbyB8fCBoID49IHUgJiYgYyA+PSBoIHx8IHUgPiBvICYmIGggPiBjKSAmJiAoYSA+PSBsICYmIGQgPj0gYSB8fCByID49IGwgJiYgZCA+PSByIHx8IGwgPiBhICYmIHIgPiBkKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0oKSwgZS51aS5kZG1hbmFnZXIgPSB7XG4gICAgICAgIGN1cnJlbnQ6IG51bGwsIGRyb3BwYWJsZXM6IHtcImRlZmF1bHRcIjogW119LCBwcmVwYXJlT2Zmc2V0czogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzLCBuLCBhID0gZS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0Lm9wdGlvbnMuc2NvcGVdIHx8IFtdLCBvID0gaSA/IGkudHlwZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgciA9ICh0LmN1cnJlbnRJdGVtIHx8IHQuZWxlbWVudCkuZmluZChcIjpkYXRhKHVpLWRyb3BwYWJsZSlcIikuYWRkQmFjaygpO1xuICAgICAgICAgICAgZTpmb3IgKHMgPSAwOyBhLmxlbmd0aCA+IHM7IHMrKykgaWYgKCEoYVtzXS5vcHRpb25zLmRpc2FibGVkIHx8IHQgJiYgIWFbc10uYWNjZXB0LmNhbGwoYVtzXS5lbGVtZW50WzBdLCB0LmN1cnJlbnRJdGVtIHx8IHQuZWxlbWVudCkpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChuID0gMDsgci5sZW5ndGggPiBuOyBuKyspIGlmIChyW25dID09PSBhW3NdLmVsZW1lbnRbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgYVtzXS5wcm9wb3J0aW9ucygpLmhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYVtzXS52aXNpYmxlID0gXCJub25lXCIgIT09IGFbc10uZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIpLCBhW3NdLnZpc2libGUgJiYgKFwibW91c2Vkb3duXCIgPT09IG8gJiYgYVtzXS5fYWN0aXZhdGUuY2FsbChhW3NdLCBpKSwgYVtzXS5vZmZzZXQgPSBhW3NdLmVsZW1lbnQub2Zmc2V0KCksIGFbc10ucHJvcG9ydGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogYVtzXS5lbGVtZW50WzBdLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGFbc10uZWxlbWVudFswXS5vZmZzZXRIZWlnaHRcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZHJvcDogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzID0gITE7XG4gICAgICAgICAgICByZXR1cm4gZS5lYWNoKChlLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3Qub3B0aW9ucy5zY29wZV0gfHwgW10pLnNsaWNlKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgJiYgKCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgdGhpcy52aXNpYmxlICYmIGUudWkuaW50ZXJzZWN0KHQsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsIGkpICYmIChzID0gdGhpcy5fZHJvcC5jYWxsKHRoaXMsIGkpIHx8IHMpLCAhdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMudmlzaWJsZSAmJiB0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwgdC5jdXJyZW50SXRlbSB8fCB0LmVsZW1lbnQpICYmICh0aGlzLmlzb3V0ID0gITAsIHRoaXMuaXNvdmVyID0gITEsIHRoaXMuX2RlYWN0aXZhdGUuY2FsbCh0aGlzLCBpKSkpXG4gICAgICAgICAgICB9KSwgc1xuICAgICAgICB9LCBkcmFnU3RhcnQ6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB0LmVsZW1lbnQucGFyZW50c1VudGlsKFwiYm9keVwiKS5iaW5kKFwic2Nyb2xsLmRyb3BwYWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdC5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMgfHwgZS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModCwgaSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIGRyYWc6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB0Lm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyAmJiBlLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0LCBpKSwgZS5lYWNoKGUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdC5vcHRpb25zLnNjb3BlXSB8fCBbXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVkICYmICF0aGlzLmdyZWVkeUNoaWxkICYmIHRoaXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcywgbiwgYSwgbyA9IGUudWkuaW50ZXJzZWN0KHQsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsIGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgciA9ICFvICYmIHRoaXMuaXNvdmVyID8gXCJpc291dFwiIDogbyAmJiAhdGhpcy5pc292ZXIgPyBcImlzb3ZlclwiIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgciAmJiAodGhpcy5vcHRpb25zLmdyZWVkeSAmJiAobiA9IHRoaXMub3B0aW9ucy5zY29wZSwgYSA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKFwiOmRhdGEodWktZHJvcHBhYmxlKVwiKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodGhpcykuZHJvcHBhYmxlKFwiaW5zdGFuY2VcIikub3B0aW9ucy5zY29wZSA9PT0gblxuICAgICAgICAgICAgICAgICAgICB9KSwgYS5sZW5ndGggJiYgKHMgPSBlKGFbMF0pLmRyb3BwYWJsZShcImluc3RhbmNlXCIpLCBzLmdyZWVkeUNoaWxkID0gXCJpc292ZXJcIiA9PT0gcikpLCBzICYmIFwiaXNvdmVyXCIgPT09IHIgJiYgKHMuaXNvdmVyID0gITEsIHMuaXNvdXQgPSAhMCwgcy5fb3V0LmNhbGwocywgaSkpLCB0aGlzW3JdID0gITAsIHRoaXNbXCJpc291dFwiID09PSByID8gXCJpc292ZXJcIiA6IFwiaXNvdXRcIl0gPSAhMSwgdGhpc1tcImlzb3ZlclwiID09PSByID8gXCJfb3ZlclwiIDogXCJfb3V0XCJdLmNhbGwodGhpcywgaSksIHMgJiYgXCJpc291dFwiID09PSByICYmIChzLmlzb3V0ID0gITEsIHMuaXNvdmVyID0gITAsIHMuX292ZXIuY2FsbChzLCBpKSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgZHJhZ1N0b3A6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB0LmVsZW1lbnQucGFyZW50c1VudGlsKFwiYm9keVwiKS51bmJpbmQoXCJzY3JvbGwuZHJvcHBhYmxlXCIpLCB0Lm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyB8fCBlLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0LCBpKVxuICAgICAgICB9XG4gICAgfSwgZS51aS5kcm9wcGFibGU7XG4gICAgdmFyIHkgPSBcInVpLWVmZmVjdHMtXCIsIGIgPSBlO1xuICAgIGUuZWZmZWN0cyA9IHtlZmZlY3Q6IHt9fSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgZnVuY3Rpb24gaShlLCB0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGRbdC50eXBlXSB8fCB7fTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyBpIHx8ICF0LmRlZiA/IG51bGwgOiB0LmRlZiA6IChlID0gcy5mbG9vciA/IH5+ZSA6IHBhcnNlRmxvYXQoZSksIGlzTmFOKGUpID8gdC5kZWYgOiBzLm1vZCA/IChlICsgcy5tb2QpICUgcy5tb2QgOiAwID4gZSA/IDAgOiBlID4gcy5tYXggPyBzLm1heCA6IGUpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzKGkpIHtcbiAgICAgICAgICAgIHZhciBzID0gbCgpLCBuID0gcy5fcmdiYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGkgPSBpLnRvTG93ZXJDYXNlKCksIGYoaCwgZnVuY3Rpb24gKGUsIGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbywgciA9IGEucmUuZXhlYyhpKSwgaCA9IHIgJiYgYS5wYXJzZShyKSwgbCA9IGEuc3BhY2UgfHwgXCJyZ2JhXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGggPyAobyA9IHNbbF0oaCksIHNbdVtsXS5jYWNoZV0gPSBvW3VbbF0uY2FjaGVdLCBuID0gcy5fcmdiYSA9IG8uX3JnYmEsICExKSA6IHRcbiAgICAgICAgICAgIH0pLCBuLmxlbmd0aCA/IChcIjAsMCwwLDBcIiA9PT0gbi5qb2luKCkgJiYgZS5leHRlbmQobiwgYS50cmFuc3BhcmVudCksIHMpIDogYVtpXVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbihlLCB0LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gaSA9IChpICsgMSkgJSAxLCAxID4gNiAqIGkgPyBlICsgNiAqICh0IC0gZSkgKiBpIDogMSA+IDIgKiBpID8gdCA6IDIgPiAzICogaSA/IGUgKyA2ICogKHQgLSBlKSAqICgyIC8gMyAtIGkpIDogZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGEsXG4gICAgICAgICAgICBvID0gXCJiYWNrZ3JvdW5kQ29sb3IgYm9yZGVyQm90dG9tQ29sb3IgYm9yZGVyTGVmdENvbG9yIGJvcmRlclJpZ2h0Q29sb3IgYm9yZGVyVG9wQ29sb3IgY29sb3IgY29sdW1uUnVsZUNvbG9yIG91dGxpbmVDb2xvciB0ZXh0RGVjb3JhdGlvbkNvbG9yIHRleHRFbXBoYXNpc0NvbG9yXCIsXG4gICAgICAgICAgICByID0gL14oW1xcLStdKT1cXHMqKFxcZCtcXC4/XFxkKikvLCBoID0gW3tcbiAgICAgICAgICAgICAgICByZTogL3JnYmE/XFwoXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyooPzosXFxzKihcXGQ/KD86XFwuXFxkKyk/KVxccyopP1xcKS8sXG4gICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbZVsxXSwgZVsyXSwgZVszXSwgZVs0XV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgcmU6IC9yZ2JhP1xcKFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqKD86LFxccyooXFxkPyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLFxuICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIuNTUgKiBlWzFdLCAyLjU1ICogZVsyXSwgMi41NSAqIGVbM10sIGVbNF1dXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHJlOiAvIyhbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KS8sIHBhcnNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3BhcnNlSW50KGVbMV0sIDE2KSwgcGFyc2VJbnQoZVsyXSwgMTYpLCBwYXJzZUludChlWzNdLCAxNildXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHJlOiAvIyhbYS1mMC05XSkoW2EtZjAtOV0pKFthLWYwLTldKS8sIHBhcnNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3BhcnNlSW50KGVbMV0gKyBlWzFdLCAxNiksIHBhcnNlSW50KGVbMl0gKyBlWzJdLCAxNiksIHBhcnNlSW50KGVbM10gKyBlWzNdLCAxNildXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHJlOiAvaHNsYT9cXChcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKig/OixcXHMqKFxcZD8oPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxcbiAgICAgICAgICAgICAgICBzcGFjZTogXCJoc2xhXCIsXG4gICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbZVsxXSwgZVsyXSAvIDEwMCwgZVszXSAvIDEwMCwgZVs0XV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XSwgbCA9IGUuQ29sb3IgPSBmdW5jdGlvbiAodCwgaSwgcywgbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZS5Db2xvci5mbi5wYXJzZSh0LCBpLCBzLCBuKVxuICAgICAgICAgICAgfSwgdSA9IHtcbiAgICAgICAgICAgICAgICByZ2JhOiB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWQ6IHtpZHg6IDAsIHR5cGU6IFwiYnl0ZVwifSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyZWVuOiB7aWR4OiAxLCB0eXBlOiBcImJ5dGVcIn0sXG4gICAgICAgICAgICAgICAgICAgICAgICBibHVlOiB7aWR4OiAyLCB0eXBlOiBcImJ5dGVcIn1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaHNsYToge1xuICAgICAgICAgICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHVlOiB7aWR4OiAwLCB0eXBlOiBcImRlZ3JlZXNcIn0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXR1cmF0aW9uOiB7aWR4OiAxLCB0eXBlOiBcInBlcmNlbnRcIn0sXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodG5lc3M6IHtpZHg6IDIsIHR5cGU6IFwicGVyY2VudFwifVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZCA9IHtcImJ5dGVcIjoge2Zsb29yOiAhMCwgbWF4OiAyNTV9LCBwZXJjZW50OiB7bWF4OiAxfSwgZGVncmVlczoge21vZDogMzYwLCBmbG9vcjogITB9fSwgYyA9IGwuc3VwcG9ydCA9IHt9LFxuICAgICAgICAgICAgcCA9IGUoXCI8cD5cIilbMF0sIGYgPSBlLmVhY2g7XG4gICAgICAgIHAuc3R5bGUuY3NzVGV4dCA9IFwiYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEsMSwxLC41KVwiLCBjLnJnYmEgPSBwLnN0eWxlLmJhY2tncm91bmRDb2xvci5pbmRleE9mKFwicmdiYVwiKSA+IC0xLCBmKHUsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB0LmNhY2hlID0gXCJfXCIgKyBlLCB0LnByb3BzLmFscGhhID0ge2lkeDogMywgdHlwZTogXCJwZXJjZW50XCIsIGRlZjogMX1cbiAgICAgICAgfSksIGwuZm4gPSBlLmV4dGVuZChsLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChuLCBvLCByLCBoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4gPT09IHQpIHJldHVybiB0aGlzLl9yZ2JhID0gW251bGwsIG51bGwsIG51bGwsIG51bGxdLCB0aGlzO1xuICAgICAgICAgICAgICAgIChuLmpxdWVyeSB8fCBuLm5vZGVUeXBlKSAmJiAobiA9IGUobikuY3NzKG8pLCBvID0gdCk7XG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLCBjID0gZS50eXBlKG4pLCBwID0gdGhpcy5fcmdiYSA9IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBvICE9PSB0ICYmIChuID0gW24sIG8sIHIsIGhdLCBjID0gXCJhcnJheVwiKSwgXCJzdHJpbmdcIiA9PT0gYyA/IHRoaXMucGFyc2UocyhuKSB8fCBhLl9kZWZhdWx0KSA6IFwiYXJyYXlcIiA9PT0gYyA/IChmKHUucmdiYS5wcm9wcywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcFt0LmlkeF0gPSBpKG5bdC5pZHhdLCB0KVxuICAgICAgICAgICAgICAgIH0pLCB0aGlzKSA6IFwib2JqZWN0XCIgPT09IGMgPyAobiBpbnN0YW5jZW9mIGwgPyBmKHUsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5bdC5jYWNoZV0gJiYgKGRbdC5jYWNoZV0gPSBuW3QuY2FjaGVdLnNsaWNlKCkpXG4gICAgICAgICAgICAgICAgfSkgOiBmKHUsIGZ1bmN0aW9uICh0LCBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gcy5jYWNoZTtcbiAgICAgICAgICAgICAgICAgICAgZihzLnByb3BzLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkW2FdICYmIHMudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJhbHBoYVwiID09PSBlIHx8IG51bGwgPT0gbltlXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbYV0gPSBzLnRvKGQuX3JnYmEpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkW2FdW3QuaWR4XSA9IGkobltlXSwgdCwgITApXG4gICAgICAgICAgICAgICAgICAgIH0pLCBkW2FdICYmIDAgPiBlLmluQXJyYXkobnVsbCwgZFthXS5zbGljZSgwLCAzKSkgJiYgKGRbYV1bM10gPSAxLCBzLmZyb20gJiYgKGQuX3JnYmEgPSBzLmZyb20oZFthXSkpKVxuICAgICAgICAgICAgICAgIH0pLCB0aGlzKSA6IHRcbiAgICAgICAgICAgIH0sIGlzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gbChlKSwgcyA9ICEwLCBuID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gZih1LCBmdW5jdGlvbiAoZSwgYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbywgciA9IGlbYS5jYWNoZV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByICYmIChvID0gblthLmNhY2hlXSB8fCBhLnRvICYmIGEudG8obi5fcmdiYSkgfHwgW10sIGYoYS5wcm9wcywgZnVuY3Rpb24gKGUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHJbaS5pZHhdID8gcyA9IHJbaS5pZHhdID09PSBvW2kuaWR4XSA6IHRcbiAgICAgICAgICAgICAgICAgICAgfSkpLCBzXG4gICAgICAgICAgICAgICAgfSksIHNcbiAgICAgICAgICAgIH0sIF9zcGFjZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gW10sIHQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiBmKHUsIGZ1bmN0aW9uIChpLCBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRbcy5jYWNoZV0gJiYgZS5wdXNoKGkpXG4gICAgICAgICAgICAgICAgfSksIGUucG9wKClcbiAgICAgICAgICAgIH0sIHRyYW5zaXRpb246IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBsKGUpLCBuID0gcy5fc3BhY2UoKSwgYSA9IHVbbl0sIG8gPSAwID09PSB0aGlzLmFscGhhKCkgPyBsKFwidHJhbnNwYXJlbnRcIikgOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICByID0gb1thLmNhY2hlXSB8fCBhLnRvKG8uX3JnYmEpLCBoID0gci5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzID0gc1thLmNhY2hlXSwgZihhLnByb3BzLCBmdW5jdGlvbiAoZSwgbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG4uaWR4LCBvID0gclthXSwgbCA9IHNbYV0sIHUgPSBkW24udHlwZV0gfHwge307XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IGwgJiYgKG51bGwgPT09IG8gPyBoW2FdID0gbCA6ICh1Lm1vZCAmJiAobCAtIG8gPiB1Lm1vZCAvIDIgPyBvICs9IHUubW9kIDogbyAtIGwgPiB1Lm1vZCAvIDIgJiYgKG8gLT0gdS5tb2QpKSwgaFthXSA9IGkoKGwgLSBvKSAqIHQgKyBvLCBuKSkpXG4gICAgICAgICAgICAgICAgfSksIHRoaXNbbl0oaClcbiAgICAgICAgICAgIH0sIGJsZW5kOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIGlmICgxID09PSB0aGlzLl9yZ2JhWzNdKSByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuX3JnYmEuc2xpY2UoKSwgcyA9IGkucG9wKCksIG4gPSBsKHQpLl9yZ2JhO1xuICAgICAgICAgICAgICAgIHJldHVybiBsKGUubWFwKGksIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoMSAtIHMpICogblt0XSArIHMgKiBlXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9LCB0b1JnYmFTdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IFwicmdiYShcIiwgaSA9IGUubWFwKHRoaXMuX3JnYmEsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyB0ID4gMiA/IDEgOiAwIDogZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSBpWzNdICYmIChpLnBvcCgpLCB0ID0gXCJyZ2IoXCIpLCB0ICsgaS5qb2luKCkgKyBcIilcIlxuICAgICAgICAgICAgfSwgdG9Ic2xhU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBcImhzbGEoXCIsIGkgPSBlLm1hcCh0aGlzLmhzbGEoKSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSAmJiAoZSA9IHQgPiAyID8gMSA6IDApLCB0ICYmIDMgPiB0ICYmIChlID0gTWF0aC5yb3VuZCgxMDAgKiBlKSArIFwiJVwiKSwgZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSBpWzNdICYmIChpLnBvcCgpLCB0ID0gXCJoc2woXCIpLCB0ICsgaS5qb2luKCkgKyBcIilcIlxuICAgICAgICAgICAgfSwgdG9IZXhTdHJpbmc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLl9yZ2JhLnNsaWNlKCksIHMgPSBpLnBvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIGkucHVzaCh+figyNTUgKiBzKSksIFwiI1wiICsgZS5tYXAoaSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSAoZSB8fCAwKS50b1N0cmluZygxNiksIDEgPT09IGUubGVuZ3RoID8gXCIwXCIgKyBlIDogZVxuICAgICAgICAgICAgICAgIH0pLmpvaW4oXCJcIilcbiAgICAgICAgICAgIH0sIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuX3JnYmFbM10gPyBcInRyYW5zcGFyZW50XCIgOiB0aGlzLnRvUmdiYVN0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBsLmZuLnBhcnNlLnByb3RvdHlwZSA9IGwuZm4sIHUuaHNsYS50byA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBlWzBdIHx8IG51bGwgPT0gZVsxXSB8fCBudWxsID09IGVbMl0pIHJldHVybiBbbnVsbCwgbnVsbCwgbnVsbCwgZVszXV07XG4gICAgICAgICAgICB2YXIgdCwgaSwgcyA9IGVbMF0gLyAyNTUsIG4gPSBlWzFdIC8gMjU1LCBhID0gZVsyXSAvIDI1NSwgbyA9IGVbM10sIHIgPSBNYXRoLm1heChzLCBuLCBhKSxcbiAgICAgICAgICAgICAgICBoID0gTWF0aC5taW4ocywgbiwgYSksIGwgPSByIC0gaCwgdSA9IHIgKyBoLCBkID0gLjUgKiB1O1xuICAgICAgICAgICAgcmV0dXJuIHQgPSBoID09PSByID8gMCA6IHMgPT09IHIgPyA2MCAqIChuIC0gYSkgLyBsICsgMzYwIDogbiA9PT0gciA/IDYwICogKGEgLSBzKSAvIGwgKyAxMjAgOiA2MCAqIChzIC0gbikgLyBsICsgMjQwLCBpID0gMCA9PT0gbCA/IDAgOiAuNSA+PSBkID8gbCAvIHUgOiBsIC8gKDIgLSB1KSwgW01hdGgucm91bmQodCkgJSAzNjAsIGksIGQsIG51bGwgPT0gbyA/IDEgOiBvXVxuICAgICAgICB9LCB1LmhzbGEuZnJvbSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBlWzBdIHx8IG51bGwgPT0gZVsxXSB8fCBudWxsID09IGVbMl0pIHJldHVybiBbbnVsbCwgbnVsbCwgbnVsbCwgZVszXV07XG4gICAgICAgICAgICB2YXIgdCA9IGVbMF0gLyAzNjAsIGkgPSBlWzFdLCBzID0gZVsyXSwgYSA9IGVbM10sIG8gPSAuNSA+PSBzID8gcyAqICgxICsgaSkgOiBzICsgaSAtIHMgKiBpLCByID0gMiAqIHMgLSBvO1xuICAgICAgICAgICAgcmV0dXJuIFtNYXRoLnJvdW5kKDI1NSAqIG4ociwgbywgdCArIDEgLyAzKSksIE1hdGgucm91bmQoMjU1ICogbihyLCBvLCB0KSksIE1hdGgucm91bmQoMjU1ICogbihyLCBvLCB0IC0gMSAvIDMpKSwgYV1cbiAgICAgICAgfSwgZih1LCBmdW5jdGlvbiAocywgbikge1xuICAgICAgICAgICAgdmFyIGEgPSBuLnByb3BzLCBvID0gbi5jYWNoZSwgaCA9IG4udG8sIHUgPSBuLmZyb207XG4gICAgICAgICAgICBsLmZuW3NdID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaCAmJiAhdGhpc1tvXSAmJiAodGhpc1tvXSA9IGgodGhpcy5fcmdiYSkpLCBzID09PSB0KSByZXR1cm4gdGhpc1tvXS5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHZhciBuLCByID0gZS50eXBlKHMpLCBkID0gXCJhcnJheVwiID09PSByIHx8IFwib2JqZWN0XCIgPT09IHIgPyBzIDogYXJndW1lbnRzLCBjID0gdGhpc1tvXS5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmKGEsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gZFtcIm9iamVjdFwiID09PSByID8gZSA6IHQuaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSBzICYmIChzID0gY1t0LmlkeF0pLCBjW3QuaWR4XSA9IGkocywgdClcbiAgICAgICAgICAgICAgICB9KSwgdSA/IChuID0gbCh1KGMpKSwgbltvXSA9IGMsIG4pIDogbChjKVxuICAgICAgICAgICAgfSwgZihhLCBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgICAgIGwuZm5bdF0gfHwgKGwuZm5bdF0gPSBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSwgbyA9IGUudHlwZShuKSwgaCA9IFwiYWxwaGFcIiA9PT0gdCA/IHRoaXMuX2hzbGEgPyBcImhzbGFcIiA6IFwicmdiYVwiIDogcywgbCA9IHRoaXNbaF0oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBsW2kuaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgPT09IG8gPyB1IDogKFwiZnVuY3Rpb25cIiA9PT0gbyAmJiAobiA9IG4uY2FsbCh0aGlzLCB1KSwgbyA9IGUudHlwZShuKSksIG51bGwgPT0gbiAmJiBpLmVtcHR5ID8gdGhpcyA6IChcInN0cmluZ1wiID09PSBvICYmIChhID0gci5leGVjKG4pLCBhICYmIChuID0gdSArIHBhcnNlRmxvYXQoYVsyXSkgKiAoXCIrXCIgPT09IGFbMV0gPyAxIDogLTEpKSksIGxbaS5pZHhdID0gbiwgdGhpc1toXShsKSkpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLCBsLmhvb2sgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0LnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIGYoaSwgZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgICAgICBlLmNzc0hvb2tzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwgbywgciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJ0cmFuc3BhcmVudFwiICE9PSBuICYmIChcInN0cmluZ1wiICE9PSBlLnR5cGUobikgfHwgKGEgPSBzKG4pKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IGwoYSB8fCBuKSwgIWMucmdiYSAmJiAxICE9PSBuLl9yZ2JhWzNdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IFwiYmFja2dyb3VuZENvbG9yXCIgPT09IGkgPyB0LnBhcmVudE5vZGUgOiB0OyAoXCJcIiA9PT0gciB8fCBcInRyYW5zcGFyZW50XCIgPT09IHIpICYmIG8gJiYgby5zdHlsZTspIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5jc3MobywgXCJiYWNrZ3JvdW5kQ29sb3JcIiksIG8gPSBvLnBhcmVudE5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuLmJsZW5kKHIgJiYgXCJ0cmFuc3BhcmVudFwiICE9PSByID8gciA6IFwiX2RlZmF1bHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG4udG9SZ2JhU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zdHlsZVtpXSA9IG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGUuZnguc3RlcFtpXSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQuY29sb3JJbml0IHx8ICh0LnN0YXJ0ID0gbCh0LmVsZW0sIGkpLCB0LmVuZCA9IGwodC5lbmQpLCB0LmNvbG9ySW5pdCA9ICEwKSwgZS5jc3NIb29rc1tpXS5zZXQodC5lbGVtLCB0LnN0YXJ0LnRyYW5zaXRpb24odC5lbmQsIHQucG9zKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCBsLmhvb2sobyksIGUuY3NzSG9va3MuYm9yZGVyQ29sb3IgPSB7XG4gICAgICAgICAgICBleHBhbmQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZihbXCJUb3BcIiwgXCJSaWdodFwiLCBcIkJvdHRvbVwiLCBcIkxlZnRcIl0sIGZ1bmN0aW9uIChpLCBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRbXCJib3JkZXJcIiArIHMgKyBcIkNvbG9yXCJdID0gZVxuICAgICAgICAgICAgICAgIH0pLCB0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGEgPSBlLkNvbG9yLm5hbWVzID0ge1xuICAgICAgICAgICAgYXF1YTogXCIjMDBmZmZmXCIsXG4gICAgICAgICAgICBibGFjazogXCIjMDAwMDAwXCIsXG4gICAgICAgICAgICBibHVlOiBcIiMwMDAwZmZcIixcbiAgICAgICAgICAgIGZ1Y2hzaWE6IFwiI2ZmMDBmZlwiLFxuICAgICAgICAgICAgZ3JheTogXCIjODA4MDgwXCIsXG4gICAgICAgICAgICBncmVlbjogXCIjMDA4MDAwXCIsXG4gICAgICAgICAgICBsaW1lOiBcIiMwMGZmMDBcIixcbiAgICAgICAgICAgIG1hcm9vbjogXCIjODAwMDAwXCIsXG4gICAgICAgICAgICBuYXZ5OiBcIiMwMDAwODBcIixcbiAgICAgICAgICAgIG9saXZlOiBcIiM4MDgwMDBcIixcbiAgICAgICAgICAgIHB1cnBsZTogXCIjODAwMDgwXCIsXG4gICAgICAgICAgICByZWQ6IFwiI2ZmMDAwMFwiLFxuICAgICAgICAgICAgc2lsdmVyOiBcIiNjMGMwYzBcIixcbiAgICAgICAgICAgIHRlYWw6IFwiIzAwODA4MFwiLFxuICAgICAgICAgICAgd2hpdGU6IFwiI2ZmZmZmZlwiLFxuICAgICAgICAgICAgeWVsbG93OiBcIiNmZmZmMDBcIixcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiBbbnVsbCwgbnVsbCwgbnVsbCwgMF0sXG4gICAgICAgICAgICBfZGVmYXVsdDogXCIjZmZmZmZmXCJcbiAgICAgICAgfVxuICAgIH0oYiksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gdCh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcyxcbiAgICAgICAgICAgICAgICBuID0gdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3ID8gdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodCwgbnVsbCkgOiB0LmN1cnJlbnRTdHlsZSxcbiAgICAgICAgICAgICAgICBhID0ge307XG4gICAgICAgICAgICBpZiAobiAmJiBuLmxlbmd0aCAmJiBuWzBdICYmIG5bblswXV0pIGZvciAocyA9IG4ubGVuZ3RoOyBzLS07KSBpID0gbltzXSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbltpXSAmJiAoYVtlLmNhbWVsQ2FzZShpKV0gPSBuW2ldKTsgZWxzZSBmb3IgKGkgaW4gbikgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbltpXSAmJiAoYVtpXSA9IG5baV0pO1xuICAgICAgICAgICAgcmV0dXJuIGFcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGkodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMsIGEsIG8gPSB7fTtcbiAgICAgICAgICAgIGZvciAocyBpbiBpKSBhID0gaVtzXSwgdFtzXSAhPT0gYSAmJiAobltzXSB8fCAoZS5meC5zdGVwW3NdIHx8ICFpc05hTihwYXJzZUZsb2F0KGEpKSkgJiYgKG9bc10gPSBhKSk7XG4gICAgICAgICAgICByZXR1cm4gb1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHMgPSBbXCJhZGRcIiwgXCJyZW1vdmVcIiwgXCJ0b2dnbGVcIl0sIG4gPSB7XG4gICAgICAgICAgICBib3JkZXI6IDEsXG4gICAgICAgICAgICBib3JkZXJCb3R0b206IDEsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogMSxcbiAgICAgICAgICAgIGJvcmRlckxlZnQ6IDEsXG4gICAgICAgICAgICBib3JkZXJSaWdodDogMSxcbiAgICAgICAgICAgIGJvcmRlclRvcDogMSxcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxLFxuICAgICAgICAgICAgbWFyZ2luOiAxLFxuICAgICAgICAgICAgcGFkZGluZzogMVxuICAgICAgICB9O1xuICAgICAgICBlLmVhY2goW1wiYm9yZGVyTGVmdFN0eWxlXCIsIFwiYm9yZGVyUmlnaHRTdHlsZVwiLCBcImJvcmRlckJvdHRvbVN0eWxlXCIsIFwiYm9yZGVyVG9wU3R5bGVcIl0sIGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICBlLmZ4LnN0ZXBbaV0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIChcIm5vbmVcIiAhPT0gZS5lbmQgJiYgIWUuc2V0QXR0ciB8fCAxID09PSBlLnBvcyAmJiAhZS5zZXRBdHRyKSAmJiAoYi5zdHlsZShlLmVsZW0sIGksIGUuZW5kKSwgZS5zZXRBdHRyID0gITApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBlLmZuLmFkZEJhY2sgfHwgKGUuZm4uYWRkQmFjayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQobnVsbCA9PSBlID8gdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSlcbiAgICAgICAgfSksIGUuZWZmZWN0cy5hbmltYXRlQ2xhc3MgPSBmdW5jdGlvbiAobiwgYSwgbywgcikge1xuICAgICAgICAgICAgdmFyIGggPSBlLnNwZWVkKGEsIG8sIHIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhLCBvID0gZSh0aGlzKSwgciA9IG8uYXR0cihcImNsYXNzXCIpIHx8IFwiXCIsIGwgPSBoLmNoaWxkcmVuID8gby5maW5kKFwiKlwiKS5hZGRCYWNrKCkgOiBvO1xuICAgICAgICAgICAgICAgIGwgPSBsLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gZSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtlbDogaSwgc3RhcnQ6IHQodGhpcyl9XG4gICAgICAgICAgICAgICAgfSksIGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuZWFjaChzLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgblt0XSAmJiBvW3QgKyBcIkNsYXNzXCJdKG5bdF0pXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSwgYSgpLCBsID0gbC5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmQgPSB0KHRoaXMuZWxbMF0pLCB0aGlzLmRpZmYgPSBpKHRoaXMuc3RhcnQsIHRoaXMuZW5kKSwgdGhpc1xuICAgICAgICAgICAgICAgIH0pLCBvLmF0dHIoXCJjbGFzc1wiLCByKSwgbCA9IGwubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLCBpID0gZS5EZWZlcnJlZCgpLCBzID0gZS5leHRlbmQoe30sIGgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiAhMSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnJlc29sdmUodClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsLmFuaW1hdGUodGhpcy5kaWZmLCBzKSwgaS5wcm9taXNlKClcbiAgICAgICAgICAgICAgICB9KSwgZS53aGVuLmFwcGx5KGUsIGwuZ2V0KCkpLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhKCksIGUuZWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5lbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZWFjaCh0aGlzLmRpZmYsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jc3MoZSwgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pLCBoLmNvbXBsZXRlLmNhbGwob1swXSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgZS5mbi5leHRlbmQoe1xuICAgICAgICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBzLCBuLCBhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzID8gZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMsIHthZGQ6IGl9LCBzLCBuLCBhKSA6IHQuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oZS5mbi5hZGRDbGFzcyksIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgcywgbiwgYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBlLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcywge3JlbW92ZTogaX0sIHMsIG4sIGEpIDogdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfShlLmZuLnJlbW92ZUNsYXNzKSwgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBzLCBuLCBhLCBvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIiA9PSB0eXBlb2YgcyB8fCB2b2lkIDAgPT09IHMgPyBuID8gZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMsIHMgPyB7YWRkOiBpfSA6IHtyZW1vdmU6IGl9LCBuLCBhLCBvKSA6IHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGUuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLCB7dG9nZ2xlOiBpfSwgcywgbiwgYSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KGUuZm4udG9nZ2xlQ2xhc3MpLCBzd2l0Y2hDbGFzczogZnVuY3Rpb24gKHQsIGksIHMsIG4sIGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMsIHthZGQ6IGksIHJlbW92ZTogdH0sIHMsIG4sIGEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIHQodCwgaSwgcywgbikge1xuICAgICAgICAgICAgcmV0dXJuIGUuaXNQbGFpbk9iamVjdCh0KSAmJiAoaSA9IHQsIHQgPSB0LmVmZmVjdCksIHQgPSB7ZWZmZWN0OiB0fSwgbnVsbCA9PSBpICYmIChpID0ge30pLCBlLmlzRnVuY3Rpb24oaSkgJiYgKG4gPSBpLCBzID0gbnVsbCwgaSA9IHt9KSwgKFwibnVtYmVyXCIgPT0gdHlwZW9mIGkgfHwgZS5meC5zcGVlZHNbaV0pICYmIChuID0gcywgcyA9IGksIGkgPSB7fSksIGUuaXNGdW5jdGlvbihzKSAmJiAobiA9IHMsIHMgPSBudWxsKSwgaSAmJiBlLmV4dGVuZCh0LCBpKSwgcyA9IHMgfHwgaS5kdXJhdGlvbiwgdC5kdXJhdGlvbiA9IGUuZngub2ZmID8gMCA6IFwibnVtYmVyXCIgPT0gdHlwZW9mIHMgPyBzIDogcyBpbiBlLmZ4LnNwZWVkcyA/IGUuZnguc3BlZWRzW3NdIDogZS5meC5zcGVlZHMuX2RlZmF1bHQsIHQuY29tcGxldGUgPSBuIHx8IGkuY29tcGxldGUsIHRcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGkodCkge1xuICAgICAgICAgICAgcmV0dXJuICF0IHx8IFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgZS5meC5zcGVlZHNbdF0gPyAhMCA6IFwic3RyaW5nXCIgIT0gdHlwZW9mIHQgfHwgZS5lZmZlY3RzLmVmZmVjdFt0XSA/IGUuaXNGdW5jdGlvbih0KSA/ICEwIDogXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCB0LmVmZmVjdCA/ICExIDogITAgOiAhMFxuICAgICAgICB9XG5cbiAgICAgICAgZS5leHRlbmQoZS5lZmZlY3RzLCB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLCBzYXZlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyB0Lmxlbmd0aCA+IGk7IGkrKykgbnVsbCAhPT0gdFtpXSAmJiBlLmRhdGEoeSArIHRbaV0sIGVbMF0uc3R5bGVbdFtpXV0pXG4gICAgICAgICAgICB9LCByZXN0b3JlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBzO1xuICAgICAgICAgICAgICAgIGZvciAocyA9IDA7IHQubGVuZ3RoID4gczsgcysrKSBudWxsICE9PSB0W3NdICYmIChpID0gZS5kYXRhKHkgKyB0W3NdKSwgdm9pZCAwID09PSBpICYmIChpID0gXCJcIiksIGUuY3NzKHRbc10sIGkpKVxuICAgICAgICAgICAgfSwgc2V0TW9kZTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0b2dnbGVcIiA9PT0gdCAmJiAodCA9IGUuaXMoXCI6aGlkZGVuXCIpID8gXCJzaG93XCIgOiBcImhpZGVcIiksIHRcbiAgICAgICAgICAgIH0sIGdldEJhc2VsaW5lOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBzO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZVswXSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlXCJ0b3BcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2VcIm1pZGRsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IC41O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2VcImJvdHRvbVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlWzBdIC8gdC5oZWlnaHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2VcImxlZnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2VcImNlbnRlclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IC41O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2VcInJpZ2h0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGVbMV0gLyB0LndpZHRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7eDogcywgeTogaX1cbiAgICAgICAgICAgIH0sIGNyZWF0ZVdyYXBwZXI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQucGFyZW50KCkuaXMoXCIudWktZWZmZWN0cy13cmFwcGVyXCIpKSByZXR1cm4gdC5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHt3aWR0aDogdC5vdXRlcldpZHRoKCEwKSwgaGVpZ2h0OiB0Lm91dGVySGVpZ2h0KCEwKSwgXCJmbG9hdFwiOiB0LmNzcyhcImZsb2F0XCIpfSxcbiAgICAgICAgICAgICAgICAgICAgcyA9IGUoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhcInVpLWVmZmVjdHMtd3JhcHBlclwiKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDBcbiAgICAgICAgICAgICAgICAgICAgfSksIG4gPSB7d2lkdGg6IHQud2lkdGgoKSwgaGVpZ2h0OiB0LmhlaWdodCgpfSwgYSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYS5pZFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGRvY3VtZW50LmJvZHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQud3JhcChzKSwgKHRbMF0gPT09IGEgfHwgZS5jb250YWlucyh0WzBdLCBhKSkgJiYgZShhKS5mb2N1cygpLCBzID0gdC5wYXJlbnQoKSwgXCJzdGF0aWNcIiA9PT0gdC5jc3MoXCJwb3NpdGlvblwiKSA/IChzLmNzcyh7cG9zaXRpb246IFwicmVsYXRpdmVcIn0pLCB0LmNzcyh7cG9zaXRpb246IFwicmVsYXRpdmVcIn0pKSA6IChlLmV4dGVuZChpLCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0LmNzcyhcInBvc2l0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICB6SW5kZXg6IHQuY3NzKFwiei1pbmRleFwiKVxuICAgICAgICAgICAgICAgIH0pLCBlLmVhY2goW1widG9wXCIsIFwibGVmdFwiLCBcImJvdHRvbVwiLCBcInJpZ2h0XCJdLCBmdW5jdGlvbiAoZSwgcykge1xuICAgICAgICAgICAgICAgICAgICBpW3NdID0gdC5jc3MocyksIGlzTmFOKHBhcnNlSW50KGlbc10sIDEwKSkgJiYgKGlbc10gPSBcImF1dG9cIilcbiAgICAgICAgICAgICAgICB9KSwgdC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBcImF1dG9cIlxuICAgICAgICAgICAgICAgIH0pKSwgdC5jc3MobiksIHMuY3NzKGkpLnNob3coKVxuICAgICAgICAgICAgfSwgcmVtb3ZlV3JhcHBlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQucGFyZW50KCkuaXMoXCIudWktZWZmZWN0cy13cmFwcGVyXCIpICYmICh0LnBhcmVudCgpLnJlcGxhY2VXaXRoKHQpLCAodFswXSA9PT0gaSB8fCBlLmNvbnRhaW5zKHRbMF0sIGkpKSAmJiBlKGkpLmZvY3VzKCkpLCB0XG4gICAgICAgICAgICB9LCBzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiAodCwgaSwgcywgbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuID0gbiB8fCB7fSwgZS5lYWNoKGksIGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gdC5jc3NVbml0KGkpO1xuICAgICAgICAgICAgICAgICAgICBhWzBdID4gMCAmJiAobltpXSA9IGFbMF0gKiBzICsgYVsxXSlcbiAgICAgICAgICAgICAgICB9KSwgblxuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgZS5mbi5leHRlbmQoe1xuICAgICAgICAgICAgZWZmZWN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaSh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmlzRnVuY3Rpb24oYSkgJiYgYS5jYWxsKG5bMF0pLCBlLmlzRnVuY3Rpb24odCkgJiYgdCgpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUodGhpcyksIGEgPSBzLmNvbXBsZXRlLCByID0gcy5tb2RlO1xuICAgICAgICAgICAgICAgICAgICAobi5pcyhcIjpoaWRkZW5cIikgPyBcImhpZGVcIiA9PT0gciA6IFwic2hvd1wiID09PSByKSA/IChuW3JdKCksIGkoKSkgOiBvLmNhbGwoblswXSwgcywgaSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcyA9IHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgbiA9IHMubW9kZSwgYSA9IHMucXVldWUsIG8gPSBlLmVmZmVjdHMuZWZmZWN0W3MuZWZmZWN0XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5meC5vZmYgfHwgIW8gPyBuID8gdGhpc1tuXShzLmR1cmF0aW9uLCBzLmNvbXBsZXRlKSA6IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHMuY29tcGxldGUgJiYgcy5jb21wbGV0ZS5jYWxsKHRoaXMpXG4gICAgICAgICAgICAgICAgfSkgOiBhID09PSAhMSA/IHRoaXMuZWFjaChpKSA6IHRoaXMucXVldWUoYSB8fCBcImZ4XCIsIGkpXG4gICAgICAgICAgICB9LCBzaG93OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaShzKSkgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm1vZGUgPSBcInNob3dcIiwgdGhpcy5lZmZlY3QuY2FsbCh0aGlzLCBuKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oZS5mbi5zaG93KSwgaGlkZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkocykpIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5tb2RlID0gXCJoaWRlXCIsIHRoaXMuZWZmZWN0LmNhbGwodGhpcywgbilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KGUuZm4uaGlkZSksIHRvZ2dsZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkocykgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHMpIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5tb2RlID0gXCJ0b2dnbGVcIiwgdGhpcy5lZmZlY3QuY2FsbCh0aGlzLCBuKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oZS5mbi50b2dnbGUpLCBjc3NVbml0OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5jc3ModCksIHMgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5lYWNoKFtcImVtXCIsIFwicHhcIiwgXCIlXCIsIFwicHRcIl0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGkuaW5kZXhPZih0KSA+IDAgJiYgKHMgPSBbcGFyc2VGbG9hdChpKSwgdF0pXG4gICAgICAgICAgICAgICAgfSksIHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgZS5lYWNoKFtcIlF1YWRcIiwgXCJDdWJpY1wiLCBcIlF1YXJ0XCIsIFwiUXVpbnRcIiwgXCJFeHBvXCJdLCBmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgICAgdFtpXSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KHQsIGUgKyAyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgZS5leHRlbmQodCwge1xuICAgICAgICAgICAgU2luZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAtIE1hdGguY29zKGUgKiBNYXRoLlBJIC8gMilcbiAgICAgICAgICAgIH0sIENpcmM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnNxcnQoMSAtIGUgKiBlKVxuICAgICAgICAgICAgfSwgRWxhc3RpYzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gZSB8fCAxID09PSBlID8gZSA6IC1NYXRoLnBvdygyLCA4ICogKGUgLSAxKSkgKiBNYXRoLnNpbigoODAgKiAoZSAtIDEpIC0gNy41KSAqIE1hdGguUEkgLyAxNSlcbiAgICAgICAgICAgIH0sIEJhY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUgKiBlICogKDMgKiBlIC0gMilcbiAgICAgICAgICAgIH0sIEJvdW5jZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBpID0gNDsgKCh0ID0gTWF0aC5wb3coMiwgLS1pKSkgLSAxKSAvIDExID4gZTspIDtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvIE1hdGgucG93KDQsIDMgLSBpKSAtIDcuNTYyNSAqIE1hdGgucG93KCgzICogdCAtIDIpIC8gMjIgLSBlLCAyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgZS5lYWNoKHQsIGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICBlLmVhc2luZ1tcImVhc2VJblwiICsgdF0gPSBpLCBlLmVhc2luZ1tcImVhc2VPdXRcIiArIHRdID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAtIGkoMSAtIGUpXG4gICAgICAgICAgICB9LCBlLmVhc2luZ1tcImVhc2VJbk91dFwiICsgdF0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAuNSA+IGUgPyBpKDIgKiBlKSAvIDIgOiAxIC0gaSgtMiAqIGUgKyAyKSAvIDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KCksIGUuZWZmZWN0cywgZS5lZmZlY3RzLmVmZmVjdC5ibGluZCA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzLCBuLCBhLCBvID0gZSh0aGlzKSwgciA9IC91cHxkb3dufHZlcnRpY2FsLywgaCA9IC91cHxsZWZ0fHZlcnRpY2FsfGhvcml6b250YWwvLFxuICAgICAgICAgICAgbCA9IFtcInBvc2l0aW9uXCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIl0sXG4gICAgICAgICAgICB1ID0gZS5lZmZlY3RzLnNldE1vZGUobywgdC5tb2RlIHx8IFwiaGlkZVwiKSwgZCA9IHQuZGlyZWN0aW9uIHx8IFwidXBcIiwgYyA9IHIudGVzdChkKSxcbiAgICAgICAgICAgIHAgPSBjID8gXCJoZWlnaHRcIiA6IFwid2lkdGhcIiwgZiA9IGMgPyBcInRvcFwiIDogXCJsZWZ0XCIsIG0gPSBoLnRlc3QoZCksIGcgPSB7fSwgdiA9IFwic2hvd1wiID09PSB1O1xuICAgICAgICBvLnBhcmVudCgpLmlzKFwiLnVpLWVmZmVjdHMtd3JhcHBlclwiKSA/IGUuZWZmZWN0cy5zYXZlKG8ucGFyZW50KCksIGwpIDogZS5lZmZlY3RzLnNhdmUobywgbCksIG8uc2hvdygpLCBzID0gZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobykuY3NzKHtvdmVyZmxvdzogXCJoaWRkZW5cIn0pLCBuID0gc1twXSgpLCBhID0gcGFyc2VGbG9hdChzLmNzcyhmKSkgfHwgMCwgZ1twXSA9IHYgPyBuIDogMCwgbSB8fCAoby5jc3MoYyA/IFwiYm90dG9tXCIgOiBcInJpZ2h0XCIsIDApLmNzcyhjID8gXCJ0b3BcIiA6IFwibGVmdFwiLCBcImF1dG9cIikuY3NzKHtwb3NpdGlvbjogXCJhYnNvbHV0ZVwifSksIGdbZl0gPSB2ID8gYSA6IG4gKyBhKSwgdiAmJiAocy5jc3MocCwgMCksIG0gfHwgcy5jc3MoZiwgYSArIG4pKSwgcy5hbmltYXRlKGcsIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0LmR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiB0LmVhc2luZyxcbiAgICAgICAgICAgIHF1ZXVlOiAhMSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgXCJoaWRlXCIgPT09IHUgJiYgby5oaWRlKCksIGUuZWZmZWN0cy5yZXN0b3JlKG8sIGwpLCBlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihvKSwgaSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5ib3VuY2UgPSBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICB2YXIgcywgbiwgYSwgbyA9IGUodGhpcyksIHIgPSBbXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcImhlaWdodFwiLCBcIndpZHRoXCJdLFxuICAgICAgICAgICAgaCA9IGUuZWZmZWN0cy5zZXRNb2RlKG8sIHQubW9kZSB8fCBcImVmZmVjdFwiKSwgbCA9IFwiaGlkZVwiID09PSBoLCB1ID0gXCJzaG93XCIgPT09IGgsIGQgPSB0LmRpcmVjdGlvbiB8fCBcInVwXCIsXG4gICAgICAgICAgICBjID0gdC5kaXN0YW5jZSwgcCA9IHQudGltZXMgfHwgNSwgZiA9IDIgKiBwICsgKHUgfHwgbCA/IDEgOiAwKSwgbSA9IHQuZHVyYXRpb24gLyBmLCBnID0gdC5lYXNpbmcsXG4gICAgICAgICAgICB2ID0gXCJ1cFwiID09PSBkIHx8IFwiZG93blwiID09PSBkID8gXCJ0b3BcIiA6IFwibGVmdFwiLCB5ID0gXCJ1cFwiID09PSBkIHx8IFwibGVmdFwiID09PSBkLCBiID0gby5xdWV1ZSgpLFxuICAgICAgICAgICAgXyA9IGIubGVuZ3RoO1xuICAgICAgICBmb3IgKCh1IHx8IGwpICYmIHIucHVzaChcIm9wYWNpdHlcIiksIGUuZWZmZWN0cy5zYXZlKG8sIHIpLCBvLnNob3coKSwgZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobyksIGMgfHwgKGMgPSBvW1widG9wXCIgPT09IHYgPyBcIm91dGVySGVpZ2h0XCIgOiBcIm91dGVyV2lkdGhcIl0oKSAvIDMpLCB1ICYmIChhID0ge29wYWNpdHk6IDF9LCBhW3ZdID0gMCwgby5jc3MoXCJvcGFjaXR5XCIsIDApLmNzcyh2LCB5ID8gMiAqIC1jIDogMiAqIGMpLmFuaW1hdGUoYSwgbSwgZykpLCBsICYmIChjIC89IE1hdGgucG93KDIsIHAgLSAxKSksIGEgPSB7fSwgYVt2XSA9IDAsIHMgPSAwOyBwID4gczsgcysrKSBuID0ge30sIG5bdl0gPSAoeSA/IFwiLT1cIiA6IFwiKz1cIikgKyBjLCBvLmFuaW1hdGUobiwgbSwgZykuYW5pbWF0ZShhLCBtLCBnKSwgYyA9IGwgPyAyICogYyA6IGMgLyAyO1xuICAgICAgICBsICYmIChuID0ge29wYWNpdHk6IDB9LCBuW3ZdID0gKHkgPyBcIi09XCIgOiBcIis9XCIpICsgYywgby5hbmltYXRlKG4sIG0sIGcpKSwgby5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsICYmIG8uaGlkZSgpLCBlLmVmZmVjdHMucmVzdG9yZShvLCByKSwgZS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIobyksIGkoKVxuICAgICAgICB9KSwgXyA+IDEgJiYgYi5zcGxpY2UuYXBwbHkoYiwgWzEsIDBdLmNvbmNhdChiLnNwbGljZShfLCBmICsgMSkpKSwgby5kZXF1ZXVlKClcbiAgICB9LCBlLmVmZmVjdHMuZWZmZWN0LmNsaXAgPSBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICB2YXIgcywgbiwgYSwgbyA9IGUodGhpcyksIHIgPSBbXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcImhlaWdodFwiLCBcIndpZHRoXCJdLFxuICAgICAgICAgICAgaCA9IGUuZWZmZWN0cy5zZXRNb2RlKG8sIHQubW9kZSB8fCBcImhpZGVcIiksIGwgPSBcInNob3dcIiA9PT0gaCwgdSA9IHQuZGlyZWN0aW9uIHx8IFwidmVydGljYWxcIixcbiAgICAgICAgICAgIGQgPSBcInZlcnRpY2FsXCIgPT09IHUsIGMgPSBkID8gXCJoZWlnaHRcIiA6IFwid2lkdGhcIiwgcCA9IGQgPyBcInRvcFwiIDogXCJsZWZ0XCIsIGYgPSB7fTtcbiAgICAgICAgZS5lZmZlY3RzLnNhdmUobywgciksIG8uc2hvdygpLCBzID0gZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobykuY3NzKHtvdmVyZmxvdzogXCJoaWRkZW5cIn0pLCBuID0gXCJJTUdcIiA9PT0gb1swXS50YWdOYW1lID8gcyA6IG8sIGEgPSBuW2NdKCksIGwgJiYgKG4uY3NzKGMsIDApLCBuLmNzcyhwLCBhIC8gMikpLCBmW2NdID0gbCA/IGEgOiAwLCBmW3BdID0gbCA/IDAgOiBhIC8gMiwgbi5hbmltYXRlKGYsIHtcbiAgICAgICAgICAgIHF1ZXVlOiAhMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0LmR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiB0LmVhc2luZyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbCB8fCBvLmhpZGUoKSwgZS5lZmZlY3RzLnJlc3RvcmUobywgciksIGUuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKG8pLCBpKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LCBlLmVmZmVjdHMuZWZmZWN0LmRyb3AgPSBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICB2YXIgcywgbiA9IGUodGhpcyksIGEgPSBbXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcIm9wYWNpdHlcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiXSxcbiAgICAgICAgICAgIG8gPSBlLmVmZmVjdHMuc2V0TW9kZShuLCB0Lm1vZGUgfHwgXCJoaWRlXCIpLCByID0gXCJzaG93XCIgPT09IG8sIGggPSB0LmRpcmVjdGlvbiB8fCBcImxlZnRcIixcbiAgICAgICAgICAgIGwgPSBcInVwXCIgPT09IGggfHwgXCJkb3duXCIgPT09IGggPyBcInRvcFwiIDogXCJsZWZ0XCIsIHUgPSBcInVwXCIgPT09IGggfHwgXCJsZWZ0XCIgPT09IGggPyBcInBvc1wiIDogXCJuZWdcIixcbiAgICAgICAgICAgIGQgPSB7b3BhY2l0eTogciA/IDEgOiAwfTtcbiAgICAgICAgZS5lZmZlY3RzLnNhdmUobiwgYSksIG4uc2hvdygpLCBlLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihuKSwgcyA9IHQuZGlzdGFuY2UgfHwgbltcInRvcFwiID09PSBsID8gXCJvdXRlckhlaWdodFwiIDogXCJvdXRlcldpZHRoXCJdKCEwKSAvIDIsIHIgJiYgbi5jc3MoXCJvcGFjaXR5XCIsIDApLmNzcyhsLCBcInBvc1wiID09PSB1ID8gLXMgOiBzKSwgZFtsXSA9IChyID8gXCJwb3NcIiA9PT0gdSA/IFwiKz1cIiA6IFwiLT1cIiA6IFwicG9zXCIgPT09IHUgPyBcIi09XCIgOiBcIis9XCIpICsgcywgbi5hbmltYXRlKGQsIHtcbiAgICAgICAgICAgIHF1ZXVlOiAhMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0LmR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiB0LmVhc2luZyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgXCJoaWRlXCIgPT09IG8gJiYgbi5oaWRlKCksIGUuZWZmZWN0cy5yZXN0b3JlKG4sIGEpLCBlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihuKSwgaSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5leHBsb2RlID0gZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgZnVuY3Rpb24gcygpIHtcbiAgICAgICAgICAgIGIucHVzaCh0aGlzKSwgYi5sZW5ndGggPT09IGQgKiBjICYmIG4oKVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbigpIHtcbiAgICAgICAgICAgIHAuY3NzKHt2aXNpYmlsaXR5OiBcInZpc2libGVcIn0pLCBlKGIpLnJlbW92ZSgpLCBtIHx8IHAuaGlkZSgpLCBpKClcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhLCBvLCByLCBoLCBsLCB1LCBkID0gdC5waWVjZXMgPyBNYXRoLnJvdW5kKE1hdGguc3FydCh0LnBpZWNlcykpIDogMywgYyA9IGQsIHAgPSBlKHRoaXMpLFxuICAgICAgICAgICAgZiA9IGUuZWZmZWN0cy5zZXRNb2RlKHAsIHQubW9kZSB8fCBcImhpZGVcIiksIG0gPSBcInNob3dcIiA9PT0gZixcbiAgICAgICAgICAgIGcgPSBwLnNob3coKS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpLm9mZnNldCgpLCB2ID0gTWF0aC5jZWlsKHAub3V0ZXJXaWR0aCgpIC8gYyksXG4gICAgICAgICAgICB5ID0gTWF0aC5jZWlsKHAub3V0ZXJIZWlnaHQoKSAvIGQpLCBiID0gW107XG4gICAgICAgIGZvciAoYSA9IDA7IGQgPiBhOyBhKyspIGZvciAoaCA9IGcudG9wICsgYSAqIHksIHUgPSBhIC0gKGQgLSAxKSAvIDIsIG8gPSAwOyBjID4gbzsgbysrKSByID0gZy5sZWZ0ICsgbyAqIHYsIGwgPSBvIC0gKGMgLSAxKSAvIDIsIHAuY2xvbmUoKS5hcHBlbmRUbyhcImJvZHlcIikud3JhcChcIjxkaXY+PC9kaXY+XCIpLmNzcyh7XG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIsXG4gICAgICAgICAgICBsZWZ0OiAtbyAqIHYsXG4gICAgICAgICAgICB0b3A6IC1hICogeVxuICAgICAgICB9KS5wYXJlbnQoKS5hZGRDbGFzcyhcInVpLWVmZmVjdHMtZXhwbG9kZVwiKS5jc3Moe1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICAgICAgd2lkdGg6IHYsXG4gICAgICAgICAgICBoZWlnaHQ6IHksXG4gICAgICAgICAgICBsZWZ0OiByICsgKG0gPyBsICogdiA6IDApLFxuICAgICAgICAgICAgdG9wOiBoICsgKG0gPyB1ICogeSA6IDApLFxuICAgICAgICAgICAgb3BhY2l0eTogbSA/IDAgOiAxXG4gICAgICAgIH0pLmFuaW1hdGUoe1xuICAgICAgICAgICAgbGVmdDogciArIChtID8gMCA6IGwgKiB2KSxcbiAgICAgICAgICAgIHRvcDogaCArIChtID8gMCA6IHUgKiB5KSxcbiAgICAgICAgICAgIG9wYWNpdHk6IG0gPyAxIDogMFxuICAgICAgICB9LCB0LmR1cmF0aW9uIHx8IDUwMCwgdC5lYXNpbmcsIHMpXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5mYWRlID0gZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgdmFyIHMgPSBlKHRoaXMpLCBuID0gZS5lZmZlY3RzLnNldE1vZGUocywgdC5tb2RlIHx8IFwidG9nZ2xlXCIpO1xuICAgICAgICBzLmFuaW1hdGUoe29wYWNpdHk6IG59LCB7cXVldWU6ICExLCBkdXJhdGlvbjogdC5kdXJhdGlvbiwgZWFzaW5nOiB0LmVhc2luZywgY29tcGxldGU6IGl9KVxuICAgIH0sIGUuZWZmZWN0cy5lZmZlY3QuZm9sZCA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzLCBuLCBhID0gZSh0aGlzKSwgbyA9IFtcInBvc2l0aW9uXCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIl0sXG4gICAgICAgICAgICByID0gZS5lZmZlY3RzLnNldE1vZGUoYSwgdC5tb2RlIHx8IFwiaGlkZVwiKSwgaCA9IFwic2hvd1wiID09PSByLCBsID0gXCJoaWRlXCIgPT09IHIsIHUgPSB0LnNpemUgfHwgMTUsXG4gICAgICAgICAgICBkID0gLyhbMC05XSspJS8uZXhlYyh1KSwgYyA9ICEhdC5ob3JpekZpcnN0LCBwID0gaCAhPT0gYywgZiA9IHAgPyBbXCJ3aWR0aFwiLCBcImhlaWdodFwiXSA6IFtcImhlaWdodFwiLCBcIndpZHRoXCJdLFxuICAgICAgICAgICAgbSA9IHQuZHVyYXRpb24gLyAyLCBnID0ge30sIHYgPSB7fTtcbiAgICAgICAgZS5lZmZlY3RzLnNhdmUoYSwgbyksIGEuc2hvdygpLCBzID0gZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoYSkuY3NzKHtvdmVyZmxvdzogXCJoaWRkZW5cIn0pLCBuID0gcCA/IFtzLndpZHRoKCksIHMuaGVpZ2h0KCldIDogW3MuaGVpZ2h0KCksIHMud2lkdGgoKV0sIGQgJiYgKHUgPSBwYXJzZUludChkWzFdLCAxMCkgLyAxMDAgKiBuW2wgPyAwIDogMV0pLCBoICYmIHMuY3NzKGMgPyB7XG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICB3aWR0aDogdVxuICAgICAgICB9IDoge1xuICAgICAgICAgICAgaGVpZ2h0OiB1LFxuICAgICAgICAgICAgd2lkdGg6IDBcbiAgICAgICAgfSksIGdbZlswXV0gPSBoID8gblswXSA6IHUsIHZbZlsxXV0gPSBoID8gblsxXSA6IDAsIHMuYW5pbWF0ZShnLCBtLCB0LmVhc2luZykuYW5pbWF0ZSh2LCBtLCB0LmVhc2luZywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbCAmJiBhLmhpZGUoKSwgZS5lZmZlY3RzLnJlc3RvcmUoYSwgbyksIGUuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKGEpLCBpKClcbiAgICAgICAgfSlcbiAgICB9LCBlLmVmZmVjdHMuZWZmZWN0LmhpZ2hsaWdodCA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzID0gZSh0aGlzKSwgbiA9IFtcImJhY2tncm91bmRJbWFnZVwiLCBcImJhY2tncm91bmRDb2xvclwiLCBcIm9wYWNpdHlcIl0sXG4gICAgICAgICAgICBhID0gZS5lZmZlY3RzLnNldE1vZGUocywgdC5tb2RlIHx8IFwic2hvd1wiKSwgbyA9IHtiYWNrZ3JvdW5kQ29sb3I6IHMuY3NzKFwiYmFja2dyb3VuZENvbG9yXCIpfTtcbiAgICAgICAgXCJoaWRlXCIgPT09IGEgJiYgKG8ub3BhY2l0eSA9IDApLCBlLmVmZmVjdHMuc2F2ZShzLCBuKSwgcy5zaG93KCkuY3NzKHtcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJub25lXCIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHQuY29sb3IgfHwgXCIjZmZmZjk5XCJcbiAgICAgICAgfSkuYW5pbWF0ZShvLCB7XG4gICAgICAgICAgICBxdWV1ZTogITEsIGR1cmF0aW9uOiB0LmR1cmF0aW9uLCBlYXNpbmc6IHQuZWFzaW5nLCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIFwiaGlkZVwiID09PSBhICYmIHMuaGlkZSgpLCBlLmVmZmVjdHMucmVzdG9yZShzLCBuKSwgaSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5zaXplID0gZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgdmFyIHMsIG4sIGEsIG8gPSBlKHRoaXMpLFxuICAgICAgICAgICAgciA9IFtcInBvc2l0aW9uXCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJvdmVyZmxvd1wiLCBcIm9wYWNpdHlcIl0sXG4gICAgICAgICAgICBoID0gW1wicG9zaXRpb25cIiwgXCJ0b3BcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJvdmVyZmxvd1wiLCBcIm9wYWNpdHlcIl0sXG4gICAgICAgICAgICBsID0gW1wid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJvdmVyZmxvd1wiXSwgdSA9IFtcImZvbnRTaXplXCJdLFxuICAgICAgICAgICAgZCA9IFtcImJvcmRlclRvcFdpZHRoXCIsIFwiYm9yZGVyQm90dG9tV2lkdGhcIiwgXCJwYWRkaW5nVG9wXCIsIFwicGFkZGluZ0JvdHRvbVwiXSxcbiAgICAgICAgICAgIGMgPSBbXCJib3JkZXJMZWZ0V2lkdGhcIiwgXCJib3JkZXJSaWdodFdpZHRoXCIsIFwicGFkZGluZ0xlZnRcIiwgXCJwYWRkaW5nUmlnaHRcIl0sXG4gICAgICAgICAgICBwID0gZS5lZmZlY3RzLnNldE1vZGUobywgdC5tb2RlIHx8IFwiZWZmZWN0XCIpLCBmID0gdC5yZXN0b3JlIHx8IFwiZWZmZWN0XCIgIT09IHAsIG0gPSB0LnNjYWxlIHx8IFwiYm90aFwiLFxuICAgICAgICAgICAgZyA9IHQub3JpZ2luIHx8IFtcIm1pZGRsZVwiLCBcImNlbnRlclwiXSwgdiA9IG8uY3NzKFwicG9zaXRpb25cIiksIHkgPSBmID8gciA6IGgsXG4gICAgICAgICAgICBiID0ge2hlaWdodDogMCwgd2lkdGg6IDAsIG91dGVySGVpZ2h0OiAwLCBvdXRlcldpZHRoOiAwfTtcbiAgICAgICAgXCJzaG93XCIgPT09IHAgJiYgby5zaG93KCksIHMgPSB7XG4gICAgICAgICAgICBoZWlnaHQ6IG8uaGVpZ2h0KCksXG4gICAgICAgICAgICB3aWR0aDogby53aWR0aCgpLFxuICAgICAgICAgICAgb3V0ZXJIZWlnaHQ6IG8ub3V0ZXJIZWlnaHQoKSxcbiAgICAgICAgICAgIG91dGVyV2lkdGg6IG8ub3V0ZXJXaWR0aCgpXG4gICAgICAgIH0sIFwidG9nZ2xlXCIgPT09IHQubW9kZSAmJiBcInNob3dcIiA9PT0gcCA/IChvLmZyb20gPSB0LnRvIHx8IGIsIG8udG8gPSB0LmZyb20gfHwgcykgOiAoby5mcm9tID0gdC5mcm9tIHx8IChcInNob3dcIiA9PT0gcCA/IGIgOiBzKSwgby50byA9IHQudG8gfHwgKFwiaGlkZVwiID09PSBwID8gYiA6IHMpKSwgYSA9IHtcbiAgICAgICAgICAgIGZyb206IHtcbiAgICAgICAgICAgICAgICB5OiBvLmZyb20uaGVpZ2h0IC8gcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgeDogby5mcm9tLndpZHRoIC8gcy53aWR0aFxuICAgICAgICAgICAgfSwgdG86IHt5OiBvLnRvLmhlaWdodCAvIHMuaGVpZ2h0LCB4OiBvLnRvLndpZHRoIC8gcy53aWR0aH1cbiAgICAgICAgfSwgKFwiYm94XCIgPT09IG0gfHwgXCJib3RoXCIgPT09IG0pICYmIChhLmZyb20ueSAhPT0gYS50by55ICYmICh5ID0geS5jb25jYXQoZCksIG8uZnJvbSA9IGUuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKG8sIGQsIGEuZnJvbS55LCBvLmZyb20pLCBvLnRvID0gZS5lZmZlY3RzLnNldFRyYW5zaXRpb24obywgZCwgYS50by55LCBvLnRvKSksIGEuZnJvbS54ICE9PSBhLnRvLnggJiYgKHkgPSB5LmNvbmNhdChjKSwgby5mcm9tID0gZS5lZmZlY3RzLnNldFRyYW5zaXRpb24obywgYywgYS5mcm9tLngsIG8uZnJvbSksIG8udG8gPSBlLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihvLCBjLCBhLnRvLngsIG8udG8pKSksIChcImNvbnRlbnRcIiA9PT0gbSB8fCBcImJvdGhcIiA9PT0gbSkgJiYgYS5mcm9tLnkgIT09IGEudG8ueSAmJiAoeSA9IHkuY29uY2F0KHUpLmNvbmNhdChsKSwgby5mcm9tID0gZS5lZmZlY3RzLnNldFRyYW5zaXRpb24obywgdSwgYS5mcm9tLnksIG8uZnJvbSksIG8udG8gPSBlLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihvLCB1LCBhLnRvLnksIG8udG8pKSwgZS5lZmZlY3RzLnNhdmUobywgeSksIG8uc2hvdygpLCBlLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihvKSwgby5jc3MoXCJvdmVyZmxvd1wiLCBcImhpZGRlblwiKS5jc3Moby5mcm9tKSwgZyAmJiAobiA9IGUuZWZmZWN0cy5nZXRCYXNlbGluZShnLCBzKSwgby5mcm9tLnRvcCA9IChzLm91dGVySGVpZ2h0IC0gby5vdXRlckhlaWdodCgpKSAqIG4ueSwgby5mcm9tLmxlZnQgPSAocy5vdXRlcldpZHRoIC0gby5vdXRlcldpZHRoKCkpICogbi54LCBvLnRvLnRvcCA9IChzLm91dGVySGVpZ2h0IC0gby50by5vdXRlckhlaWdodCkgKiBuLnksIG8udG8ubGVmdCA9IChzLm91dGVyV2lkdGggLSBvLnRvLm91dGVyV2lkdGgpICogbi54KSwgby5jc3Moby5mcm9tKSwgKFwiY29udGVudFwiID09PSBtIHx8IFwiYm90aFwiID09PSBtKSAmJiAoZCA9IGQuY29uY2F0KFtcIm1hcmdpblRvcFwiLCBcIm1hcmdpbkJvdHRvbVwiXSkuY29uY2F0KHUpLCBjID0gYy5jb25jYXQoW1wibWFyZ2luTGVmdFwiLCBcIm1hcmdpblJpZ2h0XCJdKSwgbCA9IHIuY29uY2F0KGQpLmNvbmNhdChjKSwgby5maW5kKFwiKlt3aWR0aF1cIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGUodGhpcyksXG4gICAgICAgICAgICAgICAgcyA9IHtoZWlnaHQ6IGkuaGVpZ2h0KCksIHdpZHRoOiBpLndpZHRoKCksIG91dGVySGVpZ2h0OiBpLm91dGVySGVpZ2h0KCksIG91dGVyV2lkdGg6IGkub3V0ZXJXaWR0aCgpfTtcbiAgICAgICAgICAgIGYgJiYgZS5lZmZlY3RzLnNhdmUoaSwgbCksIGkuZnJvbSA9IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHMuaGVpZ2h0ICogYS5mcm9tLnksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHMud2lkdGggKiBhLmZyb20ueCxcbiAgICAgICAgICAgICAgICBvdXRlckhlaWdodDogcy5vdXRlckhlaWdodCAqIGEuZnJvbS55LFxuICAgICAgICAgICAgICAgIG91dGVyV2lkdGg6IHMub3V0ZXJXaWR0aCAqIGEuZnJvbS54XG4gICAgICAgICAgICB9LCBpLnRvID0ge1xuICAgICAgICAgICAgICAgIGhlaWdodDogcy5oZWlnaHQgKiBhLnRvLnksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHMud2lkdGggKiBhLnRvLngsXG4gICAgICAgICAgICAgICAgb3V0ZXJIZWlnaHQ6IHMuaGVpZ2h0ICogYS50by55LFxuICAgICAgICAgICAgICAgIG91dGVyV2lkdGg6IHMud2lkdGggKiBhLnRvLnhcbiAgICAgICAgICAgIH0sIGEuZnJvbS55ICE9PSBhLnRvLnkgJiYgKGkuZnJvbSA9IGUuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGksIGQsIGEuZnJvbS55LCBpLmZyb20pLCBpLnRvID0gZS5lZmZlY3RzLnNldFRyYW5zaXRpb24oaSwgZCwgYS50by55LCBpLnRvKSksIGEuZnJvbS54ICE9PSBhLnRvLnggJiYgKGkuZnJvbSA9IGUuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGksIGMsIGEuZnJvbS54LCBpLmZyb20pLCBpLnRvID0gZS5lZmZlY3RzLnNldFRyYW5zaXRpb24oaSwgYywgYS50by54LCBpLnRvKSksIGkuY3NzKGkuZnJvbSksIGkuYW5pbWF0ZShpLnRvLCB0LmR1cmF0aW9uLCB0LmVhc2luZywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGYgJiYgZS5lZmZlY3RzLnJlc3RvcmUoaSwgbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pKSwgby5hbmltYXRlKG8udG8sIHtcbiAgICAgICAgICAgIHF1ZXVlOiAhMSwgZHVyYXRpb246IHQuZHVyYXRpb24sIGVhc2luZzogdC5lYXNpbmcsIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgMCA9PT0gby50by5vcGFjaXR5ICYmIG8uY3NzKFwib3BhY2l0eVwiLCBvLmZyb20ub3BhY2l0eSksIFwiaGlkZVwiID09PSBwICYmIG8uaGlkZSgpLCBlLmVmZmVjdHMucmVzdG9yZShvLCB5KSwgZiB8fCAoXCJzdGF0aWNcIiA9PT0gdiA/IG8uY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvLnRvLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogby50by5sZWZ0XG4gICAgICAgICAgICAgICAgfSkgOiBlLmVhY2goW1widG9wXCIsIFwibGVmdFwiXSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgby5jc3ModCwgZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gcGFyc2VJbnQoaSwgMTApLCBuID0gZSA/IG8udG8ubGVmdCA6IG8udG8udG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYXV0b1wiID09PSBpID8gbiArIFwicHhcIiA6IHMgKyBuICsgXCJweFwiXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSkpLCBlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihvKSwgaSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5zY2FsZSA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzID0gZSh0aGlzKSwgbiA9IGUuZXh0ZW5kKCEwLCB7fSwgdCksIGEgPSBlLmVmZmVjdHMuc2V0TW9kZShzLCB0Lm1vZGUgfHwgXCJlZmZlY3RcIiksXG4gICAgICAgICAgICBvID0gcGFyc2VJbnQodC5wZXJjZW50LCAxMCkgfHwgKDAgPT09IHBhcnNlSW50KHQucGVyY2VudCwgMTApID8gMCA6IFwiaGlkZVwiID09PSBhID8gMCA6IDEwMCksXG4gICAgICAgICAgICByID0gdC5kaXJlY3Rpb24gfHwgXCJib3RoXCIsIGggPSB0Lm9yaWdpbixcbiAgICAgICAgICAgIGwgPSB7aGVpZ2h0OiBzLmhlaWdodCgpLCB3aWR0aDogcy53aWR0aCgpLCBvdXRlckhlaWdodDogcy5vdXRlckhlaWdodCgpLCBvdXRlcldpZHRoOiBzLm91dGVyV2lkdGgoKX0sXG4gICAgICAgICAgICB1ID0ge3k6IFwiaG9yaXpvbnRhbFwiICE9PSByID8gbyAvIDEwMCA6IDEsIHg6IFwidmVydGljYWxcIiAhPT0gciA/IG8gLyAxMDAgOiAxfTtcbiAgICAgICAgbi5lZmZlY3QgPSBcInNpemVcIiwgbi5xdWV1ZSA9ICExLCBuLmNvbXBsZXRlID0gaSwgXCJlZmZlY3RcIiAhPT0gYSAmJiAobi5vcmlnaW4gPSBoIHx8IFtcIm1pZGRsZVwiLCBcImNlbnRlclwiXSwgbi5yZXN0b3JlID0gITApLCBuLmZyb20gPSB0LmZyb20gfHwgKFwic2hvd1wiID09PSBhID8ge1xuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBvdXRlckhlaWdodDogMCxcbiAgICAgICAgICAgIG91dGVyV2lkdGg6IDBcbiAgICAgICAgfSA6IGwpLCBuLnRvID0ge1xuICAgICAgICAgICAgaGVpZ2h0OiBsLmhlaWdodCAqIHUueSxcbiAgICAgICAgICAgIHdpZHRoOiBsLndpZHRoICogdS54LFxuICAgICAgICAgICAgb3V0ZXJIZWlnaHQ6IGwub3V0ZXJIZWlnaHQgKiB1LnksXG4gICAgICAgICAgICBvdXRlcldpZHRoOiBsLm91dGVyV2lkdGggKiB1LnhcbiAgICAgICAgfSwgbi5mYWRlICYmIChcInNob3dcIiA9PT0gYSAmJiAobi5mcm9tLm9wYWNpdHkgPSAwLCBuLnRvLm9wYWNpdHkgPSAxKSwgXCJoaWRlXCIgPT09IGEgJiYgKG4uZnJvbS5vcGFjaXR5ID0gMSwgbi50by5vcGFjaXR5ID0gMCkpLCBzLmVmZmVjdChuKVxuICAgIH0sIGUuZWZmZWN0cy5lZmZlY3QucHVmZiA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzID0gZSh0aGlzKSwgbiA9IGUuZWZmZWN0cy5zZXRNb2RlKHMsIHQubW9kZSB8fCBcImhpZGVcIiksIGEgPSBcImhpZGVcIiA9PT0gbixcbiAgICAgICAgICAgIG8gPSBwYXJzZUludCh0LnBlcmNlbnQsIDEwKSB8fCAxNTAsIHIgPSBvIC8gMTAwLFxuICAgICAgICAgICAgaCA9IHtoZWlnaHQ6IHMuaGVpZ2h0KCksIHdpZHRoOiBzLndpZHRoKCksIG91dGVySGVpZ2h0OiBzLm91dGVySGVpZ2h0KCksIG91dGVyV2lkdGg6IHMub3V0ZXJXaWR0aCgpfTtcbiAgICAgICAgZS5leHRlbmQodCwge1xuICAgICAgICAgICAgZWZmZWN0OiBcInNjYWxlXCIsXG4gICAgICAgICAgICBxdWV1ZTogITEsXG4gICAgICAgICAgICBmYWRlOiAhMCxcbiAgICAgICAgICAgIG1vZGU6IG4sXG4gICAgICAgICAgICBjb21wbGV0ZTogaSxcbiAgICAgICAgICAgIHBlcmNlbnQ6IGEgPyBvIDogMTAwLFxuICAgICAgICAgICAgZnJvbTogYSA/IGggOiB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoLmhlaWdodCAqIHIsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGgud2lkdGggKiByLFxuICAgICAgICAgICAgICAgIG91dGVySGVpZ2h0OiBoLm91dGVySGVpZ2h0ICogcixcbiAgICAgICAgICAgICAgICBvdXRlcldpZHRoOiBoLm91dGVyV2lkdGggKiByXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBzLmVmZmVjdCh0KVxuICAgIH0sIGUuZWZmZWN0cy5lZmZlY3QucHVsc2F0ZSA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzLCBuID0gZSh0aGlzKSwgYSA9IGUuZWZmZWN0cy5zZXRNb2RlKG4sIHQubW9kZSB8fCBcInNob3dcIiksIG8gPSBcInNob3dcIiA9PT0gYSwgciA9IFwiaGlkZVwiID09PSBhLFxuICAgICAgICAgICAgaCA9IG8gfHwgXCJoaWRlXCIgPT09IGEsIGwgPSAyICogKHQudGltZXMgfHwgNSkgKyAoaCA/IDEgOiAwKSwgdSA9IHQuZHVyYXRpb24gLyBsLCBkID0gMCwgYyA9IG4ucXVldWUoKSxcbiAgICAgICAgICAgIHAgPSBjLmxlbmd0aDtcbiAgICAgICAgZm9yICgobyB8fCAhbi5pcyhcIjp2aXNpYmxlXCIpKSAmJiAobi5jc3MoXCJvcGFjaXR5XCIsIDApLnNob3coKSwgZCA9IDEpLCBzID0gMTsgbCA+IHM7IHMrKykgbi5hbmltYXRlKHtvcGFjaXR5OiBkfSwgdSwgdC5lYXNpbmcpLCBkID0gMSAtIGQ7XG4gICAgICAgIG4uYW5pbWF0ZSh7b3BhY2l0eTogZH0sIHUsIHQuZWFzaW5nKSwgbi5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByICYmIG4uaGlkZSgpLCBpKClcbiAgICAgICAgfSksIHAgPiAxICYmIGMuc3BsaWNlLmFwcGx5KGMsIFsxLCAwXS5jb25jYXQoYy5zcGxpY2UocCwgbCArIDEpKSksIG4uZGVxdWV1ZSgpXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5zaGFrZSA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzLCBuID0gZSh0aGlzKSwgYSA9IFtcInBvc2l0aW9uXCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIl0sXG4gICAgICAgICAgICBvID0gZS5lZmZlY3RzLnNldE1vZGUobiwgdC5tb2RlIHx8IFwiZWZmZWN0XCIpLCByID0gdC5kaXJlY3Rpb24gfHwgXCJsZWZ0XCIsIGggPSB0LmRpc3RhbmNlIHx8IDIwLFxuICAgICAgICAgICAgbCA9IHQudGltZXMgfHwgMywgdSA9IDIgKiBsICsgMSwgZCA9IE1hdGgucm91bmQodC5kdXJhdGlvbiAvIHUpLFxuICAgICAgICAgICAgYyA9IFwidXBcIiA9PT0gciB8fCBcImRvd25cIiA9PT0gciA/IFwidG9wXCIgOiBcImxlZnRcIiwgcCA9IFwidXBcIiA9PT0gciB8fCBcImxlZnRcIiA9PT0gciwgZiA9IHt9LCBtID0ge30sIGcgPSB7fSxcbiAgICAgICAgICAgIHYgPSBuLnF1ZXVlKCksIHkgPSB2Lmxlbmd0aDtcbiAgICAgICAgZm9yIChlLmVmZmVjdHMuc2F2ZShuLCBhKSwgbi5zaG93KCksIGUuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKG4pLCBmW2NdID0gKHAgPyBcIi09XCIgOiBcIis9XCIpICsgaCwgbVtjXSA9IChwID8gXCIrPVwiIDogXCItPVwiKSArIDIgKiBoLCBnW2NdID0gKHAgPyBcIi09XCIgOiBcIis9XCIpICsgMiAqIGgsIG4uYW5pbWF0ZShmLCBkLCB0LmVhc2luZyksIHMgPSAxOyBsID4gczsgcysrKSBuLmFuaW1hdGUobSwgZCwgdC5lYXNpbmcpLmFuaW1hdGUoZywgZCwgdC5lYXNpbmcpO1xuICAgICAgICBuLmFuaW1hdGUobSwgZCwgdC5lYXNpbmcpLmFuaW1hdGUoZiwgZCAvIDIsIHQuZWFzaW5nKS5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcImhpZGVcIiA9PT0gbyAmJiBuLmhpZGUoKSwgZS5lZmZlY3RzLnJlc3RvcmUobiwgYSksIGUuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKG4pLCBpKClcbiAgICAgICAgfSksIHkgPiAxICYmIHYuc3BsaWNlLmFwcGx5KHYsIFsxLCAwXS5jb25jYXQodi5zcGxpY2UoeSwgdSArIDEpKSksIG4uZGVxdWV1ZSgpXG4gICAgfSwgZS5lZmZlY3RzLmVmZmVjdC5zbGlkZSA9IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgIHZhciBzLCBuID0gZSh0aGlzKSwgYSA9IFtcInBvc2l0aW9uXCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwid2lkdGhcIiwgXCJoZWlnaHRcIl0sXG4gICAgICAgICAgICBvID0gZS5lZmZlY3RzLnNldE1vZGUobiwgdC5tb2RlIHx8IFwic2hvd1wiKSwgciA9IFwic2hvd1wiID09PSBvLCBoID0gdC5kaXJlY3Rpb24gfHwgXCJsZWZ0XCIsXG4gICAgICAgICAgICBsID0gXCJ1cFwiID09PSBoIHx8IFwiZG93blwiID09PSBoID8gXCJ0b3BcIiA6IFwibGVmdFwiLCB1ID0gXCJ1cFwiID09PSBoIHx8IFwibGVmdFwiID09PSBoLCBkID0ge307XG4gICAgICAgIGUuZWZmZWN0cy5zYXZlKG4sIGEpLCBuLnNob3coKSwgcyA9IHQuZGlzdGFuY2UgfHwgbltcInRvcFwiID09PSBsID8gXCJvdXRlckhlaWdodFwiIDogXCJvdXRlcldpZHRoXCJdKCEwKSwgZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobikuY3NzKHtvdmVyZmxvdzogXCJoaWRkZW5cIn0pLCByICYmIG4uY3NzKGwsIHUgPyBpc05hTihzKSA/IFwiLVwiICsgcyA6IC1zIDogcyksIGRbbF0gPSAociA/IHUgPyBcIis9XCIgOiBcIi09XCIgOiB1ID8gXCItPVwiIDogXCIrPVwiKSArIHMsIG4uYW5pbWF0ZShkLCB7XG4gICAgICAgICAgICBxdWV1ZTogITEsXG4gICAgICAgICAgICBkdXJhdGlvbjogdC5kdXJhdGlvbixcbiAgICAgICAgICAgIGVhc2luZzogdC5lYXNpbmcsXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIFwiaGlkZVwiID09PSBvICYmIG4uaGlkZSgpLCBlLmVmZmVjdHMucmVzdG9yZShuLCBhKSwgZS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIobiksIGkoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0sIGUuZWZmZWN0cy5lZmZlY3QudHJhbnNmZXIgPSBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICB2YXIgcyA9IGUodGhpcyksIG4gPSBlKHQudG8pLCBhID0gXCJmaXhlZFwiID09PSBuLmNzcyhcInBvc2l0aW9uXCIpLCBvID0gZShcImJvZHlcIiksIHIgPSBhID8gby5zY3JvbGxUb3AoKSA6IDAsXG4gICAgICAgICAgICBoID0gYSA/IG8uc2Nyb2xsTGVmdCgpIDogMCwgbCA9IG4ub2Zmc2V0KCksXG4gICAgICAgICAgICB1ID0ge3RvcDogbC50b3AgLSByLCBsZWZ0OiBsLmxlZnQgLSBoLCBoZWlnaHQ6IG4uaW5uZXJIZWlnaHQoKSwgd2lkdGg6IG4uaW5uZXJXaWR0aCgpfSwgZCA9IHMub2Zmc2V0KCksXG4gICAgICAgICAgICBjID0gZShcIjxkaXYgY2xhc3M9J3VpLWVmZmVjdHMtdHJhbnNmZXInPjwvZGl2PlwiKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyh0LmNsYXNzTmFtZSkuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IGQudG9wIC0gcixcbiAgICAgICAgICAgICAgICBsZWZ0OiBkLmxlZnQgLSBoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogcy5pbm5lckhlaWdodCgpLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBzLmlubmVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYSA/IFwiZml4ZWRcIiA6IFwiYWJzb2x1dGVcIlxuICAgICAgICAgICAgfSkuYW5pbWF0ZSh1LCB0LmR1cmF0aW9uLCB0LmVhc2luZywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGMucmVtb3ZlKCksIGkoKVxuICAgICAgICAgICAgfSlcbiAgICB9LCBlLndpZGdldChcInVpLnByb2dyZXNzYmFyXCIsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgb3B0aW9uczoge21heDogMTAwLCB2YWx1ZTogMCwgY2hhbmdlOiBudWxsLCBjb21wbGV0ZTogbnVsbH0sXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX2NvbnN0cmFpbmVkVmFsdWUoKSwgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIikuYXR0cih7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJwcm9ncmVzc2JhclwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS12YWx1ZW1pblwiOiB0aGlzLm1pblxuICAgICAgICAgICAgfSksIHRoaXMudmFsdWVEaXYgPSBlKFwiPGRpdiBjbGFzcz0ndWktcHJvZ3Jlc3NiYXItdmFsdWUgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItbGVmdCc+PC9kaXY+XCIpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCksIHRoaXMuX3JlZnJlc2hWYWx1ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1wcm9ncmVzc2JhciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS12YWx1ZW1pblwiKS5yZW1vdmVBdHRyKFwiYXJpYS12YWx1ZW1heFwiKS5yZW1vdmVBdHRyKFwiYXJpYS12YWx1ZW5vd1wiKSwgdGhpcy52YWx1ZURpdi5yZW1vdmUoKVxuICAgICAgICB9LFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgPyB0aGlzLm9wdGlvbnMudmFsdWUgOiAodGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fY29uc3RyYWluZWRWYWx1ZShlKSwgdGhpcy5fcmVmcmVzaFZhbHVlKCksIHZvaWQgMClcbiAgICAgICAgfSxcbiAgICAgICAgX2NvbnN0cmFpbmVkVmFsdWU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0gdGhpcy5vcHRpb25zLnZhbHVlKSwgdGhpcy5pbmRldGVybWluYXRlID0gZSA9PT0gITEsIFwibnVtYmVyXCIgIT0gdHlwZW9mIGUgJiYgKGUgPSAwKSwgdGhpcy5pbmRldGVybWluYXRlID8gITEgOiBNYXRoLm1pbih0aGlzLm9wdGlvbnMubWF4LCBNYXRoLm1heCh0aGlzLm1pbiwgZSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRPcHRpb25zOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBlLnZhbHVlO1xuICAgICAgICAgICAgZGVsZXRlIGUudmFsdWUsIHRoaXMuX3N1cGVyKGUpLCB0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl9jb25zdHJhaW5lZFZhbHVlKHQpLCB0aGlzLl9yZWZyZXNoVmFsdWUoKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgXCJtYXhcIiA9PT0gZSAmJiAodCA9IE1hdGgubWF4KHRoaXMubWluLCB0KSksIFwiZGlzYWJsZWRcIiA9PT0gZSAmJiB0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIXQpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsIHQpLCB0aGlzLl9zdXBlcihlLCB0KVxuICAgICAgICB9LFxuICAgICAgICBfcGVyY2VudGFnZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZSA/IDEwMCA6IDEwMCAqICh0aGlzLm9wdGlvbnMudmFsdWUgLSB0aGlzLm1pbikgLyAodGhpcy5vcHRpb25zLm1heCAtIHRoaXMubWluKVxuICAgICAgICB9LFxuICAgICAgICBfcmVmcmVzaFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucy52YWx1ZSwgaSA9IHRoaXMuX3BlcmNlbnRhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVEaXYudG9nZ2xlKHRoaXMuaW5kZXRlcm1pbmF0ZSB8fCB0ID4gdGhpcy5taW4pLnRvZ2dsZUNsYXNzKFwidWktY29ybmVyLXJpZ2h0XCIsIHQgPT09IHRoaXMub3B0aW9ucy5tYXgpLndpZHRoKGkudG9GaXhlZCgwKSArIFwiJVwiKSwgdGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWktcHJvZ3Jlc3NiYXItaW5kZXRlcm1pbmF0ZVwiLCB0aGlzLmluZGV0ZXJtaW5hdGUpLCB0aGlzLmluZGV0ZXJtaW5hdGUgPyAodGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLXZhbHVlbm93XCIpLCB0aGlzLm92ZXJsYXlEaXYgfHwgKHRoaXMub3ZlcmxheURpdiA9IGUoXCI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci1vdmVybGF5Jz48L2Rpdj5cIikuYXBwZW5kVG8odGhpcy52YWx1ZURpdikpKSA6ICh0aGlzLmVsZW1lbnQuYXR0cih7XG4gICAgICAgICAgICAgICAgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMub3B0aW9ucy5tYXgsXG4gICAgICAgICAgICAgICAgXCJhcmlhLXZhbHVlbm93XCI6IHRcbiAgICAgICAgICAgIH0pLCB0aGlzLm92ZXJsYXlEaXYgJiYgKHRoaXMub3ZlcmxheURpdi5yZW1vdmUoKSwgdGhpcy5vdmVybGF5RGl2ID0gbnVsbCkpLCB0aGlzLm9sZFZhbHVlICE9PSB0ICYmICh0aGlzLm9sZFZhbHVlID0gdCwgdGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiKSksIHQgPT09IHRoaXMub3B0aW9ucy5tYXggJiYgdGhpcy5fdHJpZ2dlcihcImNvbXBsZXRlXCIpXG4gICAgICAgIH1cbiAgICB9KSwgZS53aWRnZXQoXCJ1aS5zZWxlY3RhYmxlXCIsIGUudWkubW91c2UsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYXBwZW5kVG86IFwiYm9keVwiLFxuICAgICAgICAgICAgYXV0b1JlZnJlc2g6ICEwLFxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICAgICAgICBmaWx0ZXI6IFwiKlwiLFxuICAgICAgICAgICAgdG9sZXJhbmNlOiBcInRvdWNoXCIsXG4gICAgICAgICAgICBzZWxlY3RlZDogbnVsbCxcbiAgICAgICAgICAgIHNlbGVjdGluZzogbnVsbCxcbiAgICAgICAgICAgIHN0YXJ0OiBudWxsLFxuICAgICAgICAgICAgc3RvcDogbnVsbCxcbiAgICAgICAgICAgIHVuc2VsZWN0ZWQ6IG51bGwsXG4gICAgICAgICAgICB1bnNlbGVjdGluZzogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zZWxlY3RhYmxlXCIpLCB0aGlzLmRyYWdnZWQgPSAhMSwgdGhpcy5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQgPSBlKGkub3B0aW9ucy5maWx0ZXIsIGkuZWxlbWVudFswXSksIHQuYWRkQ2xhc3MoXCJ1aS1zZWxlY3RlZVwiKSwgdC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLCBpID0gdC5vZmZzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgZS5kYXRhKHRoaXMsIFwic2VsZWN0YWJsZS1pdGVtXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudDogdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGkubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogaS50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogaS5sZWZ0ICsgdC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IGkudG9wICsgdC5vdXRlckhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRzZWxlY3RlZDogITEsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogdC5oYXNDbGFzcyhcInVpLXNlbGVjdGVkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW5nOiB0Lmhhc0NsYXNzKFwidWktc2VsZWN0aW5nXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3Rpbmc6IHQuaGFzQ2xhc3MoXCJ1aS11bnNlbGVjdGluZ1wiKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCB0aGlzLnJlZnJlc2goKSwgdGhpcy5zZWxlY3RlZXMgPSB0LmFkZENsYXNzKFwidWktc2VsZWN0ZWVcIiksIHRoaXMuX21vdXNlSW5pdCgpLCB0aGlzLmhlbHBlciA9IGUoXCI8ZGl2IGNsYXNzPSd1aS1zZWxlY3RhYmxlLWhlbHBlcic+PC9kaXY+XCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVlcy5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGVlXCIpLnJlbW92ZURhdGEoXCJzZWxlY3RhYmxlLWl0ZW1cIiksIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGFibGUgdWktc2VsZWN0YWJsZS1kaXNhYmxlZFwiKSwgdGhpcy5fbW91c2VEZXN0cm95KClcbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlU3RhcnQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMsIHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLm9wb3MgPSBbdC5wYWdlWCwgdC5wYWdlWV0sIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCAodGhpcy5zZWxlY3RlZXMgPSBlKHMuZmlsdGVyLCB0aGlzLmVsZW1lbnRbMF0pLCB0aGlzLl90cmlnZ2VyKFwic3RhcnRcIiwgdCksIGUocy5hcHBlbmRUbykuYXBwZW5kKHRoaXMuaGVscGVyKSwgdGhpcy5oZWxwZXIuY3NzKHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0LnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvcDogdC5wYWdlWSxcbiAgICAgICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcbiAgICAgICAgICAgIH0pLCBzLmF1dG9SZWZyZXNoICYmIHRoaXMucmVmcmVzaCgpLCB0aGlzLnNlbGVjdGVlcy5maWx0ZXIoXCIudWktc2VsZWN0ZWRcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBlLmRhdGEodGhpcywgXCJzZWxlY3RhYmxlLWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgcy5zdGFydHNlbGVjdGVkID0gITAsIHQubWV0YUtleSB8fCB0LmN0cmxLZXkgfHwgKHMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zZWxlY3RlZFwiKSwgcy5zZWxlY3RlZCA9ICExLCBzLiRlbGVtZW50LmFkZENsYXNzKFwidWktdW5zZWxlY3RpbmdcIiksIHMudW5zZWxlY3RpbmcgPSAhMCwgaS5fdHJpZ2dlcihcInVuc2VsZWN0aW5nXCIsIHQsIHt1bnNlbGVjdGluZzogcy5lbGVtZW50fSkpXG4gICAgICAgICAgICB9KSwgZSh0LnRhcmdldCkucGFyZW50cygpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcywgbiA9IGUuZGF0YSh0aGlzLCBcInNlbGVjdGFibGUtaXRlbVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA/IChzID0gIXQubWV0YUtleSAmJiAhdC5jdHJsS2V5IHx8ICFuLiRlbGVtZW50Lmhhc0NsYXNzKFwidWktc2VsZWN0ZWRcIiksIG4uJGVsZW1lbnQucmVtb3ZlQ2xhc3MocyA/IFwidWktdW5zZWxlY3RpbmdcIiA6IFwidWktc2VsZWN0ZWRcIikuYWRkQ2xhc3MocyA/IFwidWktc2VsZWN0aW5nXCIgOiBcInVpLXVuc2VsZWN0aW5nXCIpLCBuLnVuc2VsZWN0aW5nID0gIXMsIG4uc2VsZWN0aW5nID0gcywgbi5zZWxlY3RlZCA9IHMsIHMgPyBpLl90cmlnZ2VyKFwic2VsZWN0aW5nXCIsIHQsIHtzZWxlY3Rpbmc6IG4uZWxlbWVudH0pIDogaS5fdHJpZ2dlcihcInVuc2VsZWN0aW5nXCIsIHQsIHt1bnNlbGVjdGluZzogbi5lbGVtZW50fSksICExKSA6IHZvaWQgMFxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZURyYWc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZ2VkID0gITAsICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgcyA9IHRoaXMsIG4gPSB0aGlzLm9wdGlvbnMsIGEgPSB0aGlzLm9wb3NbMF0sIG8gPSB0aGlzLm9wb3NbMV0sIHIgPSB0LnBhZ2VYLCBoID0gdC5wYWdlWTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSA+IHIgJiYgKGkgPSByLCByID0gYSwgYSA9IGkpLCBvID4gaCAmJiAoaSA9IGgsIGggPSBvLCBvID0gaSksIHRoaXMuaGVscGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGEsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogbyxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHIgLSBhLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGggLSBvXG4gICAgICAgICAgICAgICAgfSksIHRoaXMuc2VsZWN0ZWVzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUuZGF0YSh0aGlzLCBcInNlbGVjdGFibGUtaXRlbVwiKSwgbCA9ICExO1xuICAgICAgICAgICAgICAgICAgICBpICYmIGkuZWxlbWVudCAhPT0gcy5lbGVtZW50WzBdICYmIChcInRvdWNoXCIgPT09IG4udG9sZXJhbmNlID8gbCA9ICEoaS5sZWZ0ID4gciB8fCBhID4gaS5yaWdodCB8fCBpLnRvcCA+IGggfHwgbyA+IGkuYm90dG9tKSA6IFwiZml0XCIgPT09IG4udG9sZXJhbmNlICYmIChsID0gaS5sZWZ0ID4gYSAmJiByID4gaS5yaWdodCAmJiBpLnRvcCA+IG8gJiYgaCA+IGkuYm90dG9tKSwgbCA/IChpLnNlbGVjdGVkICYmIChpLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0ZWRcIiksIGkuc2VsZWN0ZWQgPSAhMSksIGkudW5zZWxlY3RpbmcgJiYgKGkuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS11bnNlbGVjdGluZ1wiKSwgaS51bnNlbGVjdGluZyA9ICExKSwgaS5zZWxlY3RpbmcgfHwgKGkuJGVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zZWxlY3RpbmdcIiksIGkuc2VsZWN0aW5nID0gITAsIHMuX3RyaWdnZXIoXCJzZWxlY3RpbmdcIiwgdCwge3NlbGVjdGluZzogaS5lbGVtZW50fSkpKSA6IChpLnNlbGVjdGluZyAmJiAoKHQubWV0YUtleSB8fCB0LmN0cmxLZXkpICYmIGkuc3RhcnRzZWxlY3RlZCA/IChpLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0aW5nXCIpLCBpLnNlbGVjdGluZyA9ICExLCBpLiRlbGVtZW50LmFkZENsYXNzKFwidWktc2VsZWN0ZWRcIiksIGkuc2VsZWN0ZWQgPSAhMCkgOiAoaS4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGluZ1wiKSwgaS5zZWxlY3RpbmcgPSAhMSwgaS5zdGFydHNlbGVjdGVkICYmIChpLiRlbGVtZW50LmFkZENsYXNzKFwidWktdW5zZWxlY3RpbmdcIiksIGkudW5zZWxlY3RpbmcgPSAhMCksIHMuX3RyaWdnZXIoXCJ1bnNlbGVjdGluZ1wiLCB0LCB7dW5zZWxlY3Rpbmc6IGkuZWxlbWVudH0pKSksIGkuc2VsZWN0ZWQgJiYgKHQubWV0YUtleSB8fCB0LmN0cmxLZXkgfHwgaS5zdGFydHNlbGVjdGVkIHx8IChpLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0ZWRcIiksIGkuc2VsZWN0ZWQgPSAhMSwgaS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpLCBpLnVuc2VsZWN0aW5nID0gITAsIHMuX3RyaWdnZXIoXCJ1bnNlbGVjdGluZ1wiLCB0LCB7dW5zZWxlY3Rpbmc6IGkuZWxlbWVudH0pKSkpKVxuICAgICAgICAgICAgICAgIH0pLCAhMVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VTdG9wOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhZ2dlZCA9ICExLCBlKFwiLnVpLXVuc2VsZWN0aW5nXCIsIHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBlLmRhdGEodGhpcywgXCJzZWxlY3RhYmxlLWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpLCBzLnVuc2VsZWN0aW5nID0gITEsIHMuc3RhcnRzZWxlY3RlZCA9ICExLCBpLl90cmlnZ2VyKFwidW5zZWxlY3RlZFwiLCB0LCB7dW5zZWxlY3RlZDogcy5lbGVtZW50fSlcbiAgICAgICAgICAgIH0pLCBlKFwiLnVpLXNlbGVjdGluZ1wiLCB0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gZS5kYXRhKHRoaXMsIFwic2VsZWN0YWJsZS1pdGVtXCIpO1xuICAgICAgICAgICAgICAgIHMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zZWxlY3RpbmdcIikuYWRkQ2xhc3MoXCJ1aS1zZWxlY3RlZFwiKSwgcy5zZWxlY3RpbmcgPSAhMSwgcy5zZWxlY3RlZCA9ICEwLCBzLnN0YXJ0c2VsZWN0ZWQgPSAhMCwgaS5fdHJpZ2dlcihcInNlbGVjdGVkXCIsIHQsIHtzZWxlY3RlZDogcy5lbGVtZW50fSlcbiAgICAgICAgICAgIH0pLCB0aGlzLl90cmlnZ2VyKFwic3RvcFwiLCB0KSwgdGhpcy5oZWxwZXIucmVtb3ZlKCksICExXG4gICAgICAgIH1cbiAgICB9KSwgZS53aWRnZXQoXCJ1aS5zZWxlY3RtZW51XCIsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgZGVmYXVsdEVsZW1lbnQ6IFwiPHNlbGVjdD5cIixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYXBwZW5kVG86IG51bGwsXG4gICAgICAgICAgICBkaXNhYmxlZDogbnVsbCxcbiAgICAgICAgICAgIGljb25zOiB7YnV0dG9uOiBcInVpLWljb24tdHJpYW5nbGUtMS1zXCJ9LFxuICAgICAgICAgICAgcG9zaXRpb246IHtteTogXCJsZWZ0IHRvcFwiLCBhdDogXCJsZWZ0IGJvdHRvbVwiLCBjb2xsaXNpb246IFwibm9uZVwifSxcbiAgICAgICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICAgICAgY2hhbmdlOiBudWxsLFxuICAgICAgICAgICAgY2xvc2U6IG51bGwsXG4gICAgICAgICAgICBmb2N1czogbnVsbCxcbiAgICAgICAgICAgIG9wZW46IG51bGwsXG4gICAgICAgICAgICBzZWxlY3Q6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hdHRyKFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLmlkcyA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBlLFxuICAgICAgICAgICAgICAgIGJ1dHRvbjogZSArIFwiLWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgIG1lbnU6IGUgKyBcIi1tZW51XCJcbiAgICAgICAgICAgIH0sIHRoaXMuX2RyYXdCdXR0b24oKSwgdGhpcy5fZHJhd01lbnUoKSwgdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMuZGlzYWJsZSgpXG4gICAgICAgIH0sXG4gICAgICAgIF9kcmF3QnV0dG9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMsIGkgPSB0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIpO1xuICAgICAgICAgICAgdGhpcy5sYWJlbCA9IGUoXCJsYWJlbFtmb3I9J1wiICsgdGhpcy5pZHMuZWxlbWVudCArIFwiJ11cIikuYXR0cihcImZvclwiLCB0aGlzLmlkcy5idXR0b24pLCB0aGlzLl9vbih0aGlzLmxhYmVsLCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uLmZvY3VzKCksIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCB0aGlzLmVsZW1lbnQuaGlkZSgpLCB0aGlzLmJ1dHRvbiA9IGUoXCI8c3Bhbj5cIiwge1xuICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJ1aS1zZWxlY3RtZW51LWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIsXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg6IGkgfHwgdGhpcy5vcHRpb25zLmRpc2FibGVkID8gLTEgOiAwLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkcy5idXR0b24sXG4gICAgICAgICAgICAgICAgcm9sZTogXCJjb21ib2JveFwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgXCJhcmlhLWF1dG9jb21wbGV0ZVwiOiBcImxpc3RcIixcbiAgICAgICAgICAgICAgICBcImFyaWEtb3duc1wiOiB0aGlzLmlkcy5tZW51LFxuICAgICAgICAgICAgICAgIFwiYXJpYS1oYXNwb3B1cFwiOiBcInRydWVcIlxuICAgICAgICAgICAgfSkuaW5zZXJ0QWZ0ZXIodGhpcy5lbGVtZW50KSwgZShcIjxzcGFuPlwiLCB7XCJjbGFzc1wiOiBcInVpLWljb24gXCIgKyB0aGlzLm9wdGlvbnMuaWNvbnMuYnV0dG9ufSkucHJlcGVuZFRvKHRoaXMuYnV0dG9uKSwgdGhpcy5idXR0b25UZXh0ID0gZShcIjxzcGFuPlwiLCB7XCJjbGFzc1wiOiBcInVpLXNlbGVjdG1lbnUtdGV4dFwifSkuYXBwZW5kVG8odGhpcy5idXR0b24pLCB0aGlzLl9zZXRUZXh0KHRoaXMuYnV0dG9uVGV4dCwgdGhpcy5lbGVtZW50LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpKSwgdGhpcy5fcmVzaXplQnV0dG9uKCksIHRoaXMuX29uKHRoaXMuYnV0dG9uLCB0aGlzLl9idXR0b25FdmVudHMpLCB0aGlzLmJ1dHRvbi5vbmUoXCJmb2N1c2luXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0Lm1lbnVJdGVtcyB8fCB0Ll9yZWZyZXNoTWVudSgpXG4gICAgICAgICAgICB9KSwgdGhpcy5faG92ZXJhYmxlKHRoaXMuYnV0dG9uKSwgdGhpcy5fZm9jdXNhYmxlKHRoaXMuYnV0dG9uKVxuICAgICAgICB9LFxuICAgICAgICBfZHJhd01lbnU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMubWVudSA9IGUoXCI8dWw+XCIsIHtcbiAgICAgICAgICAgICAgICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IHRoaXMuaWRzLmJ1dHRvbixcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5pZHMubWVudVxuICAgICAgICAgICAgfSksIHRoaXMubWVudVdyYXAgPSBlKFwiPGRpdj5cIiwge1wiY2xhc3NcIjogXCJ1aS1zZWxlY3RtZW51LW1lbnUgdWktZnJvbnRcIn0pLmFwcGVuZCh0aGlzLm1lbnUpLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCB0aGlzLm1lbnVJbnN0YW5jZSA9IHRoaXMubWVudS5tZW51KHtcbiAgICAgICAgICAgICAgICByb2xlOiBcImxpc3Rib3hcIixcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSwgdC5fc2V0U2VsZWN0aW9uKCksIHQuX3NlbGVjdChpLml0ZW0uZGF0YShcInVpLXNlbGVjdG1lbnUtaXRlbVwiKSwgZSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGkuaXRlbS5kYXRhKFwidWktc2VsZWN0bWVudS1pdGVtXCIpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9IHQuZm9jdXNJbmRleCAmJiBzLmluZGV4ICE9PSB0LmZvY3VzSW5kZXggJiYgKHQuX3RyaWdnZXIoXCJmb2N1c1wiLCBlLCB7aXRlbTogc30pLCB0LmlzT3BlbiB8fCB0Ll9zZWxlY3QocywgZSkpLCB0LmZvY3VzSW5kZXggPSBzLmluZGV4LCB0LmJ1dHRvbi5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsIHQubWVudUl0ZW1zLmVxKHMuaW5kZXgpLmF0dHIoXCJpZFwiKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5tZW51KFwiaW5zdGFuY2VcIiksIHRoaXMubWVudS5hZGRDbGFzcyhcInVpLWNvcm5lci1ib3R0b21cIikucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsXCIpLCB0aGlzLm1lbnVJbnN0YW5jZS5fb2ZmKHRoaXMubWVudSwgXCJtb3VzZWxlYXZlXCIpLCB0aGlzLm1lbnVJbnN0YW5jZS5fY2xvc2VPbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICExXG4gICAgICAgICAgICB9LCB0aGlzLm1lbnVJbnN0YW5jZS5faXNEaXZpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhMVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWZyZXNoTWVudSgpLCB0aGlzLl9zZXRUZXh0KHRoaXMuYnV0dG9uVGV4dCwgdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkudGV4dCgpKSwgdGhpcy5vcHRpb25zLndpZHRoIHx8IHRoaXMuX3Jlc2l6ZUJ1dHRvbigpXG4gICAgICAgIH0sXG4gICAgICAgIF9yZWZyZXNoTWVudTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5tZW51LmVtcHR5KCk7XG4gICAgICAgICAgICB2YXIgZSwgdCA9IHRoaXMuZWxlbWVudC5maW5kKFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgdC5sZW5ndGggJiYgKHRoaXMuX3BhcnNlT3B0aW9ucyh0KSwgdGhpcy5fcmVuZGVyTWVudSh0aGlzLm1lbnUsIHRoaXMuaXRlbXMpLCB0aGlzLm1lbnVJbnN0YW5jZS5yZWZyZXNoKCksIHRoaXMubWVudUl0ZW1zID0gdGhpcy5tZW51LmZpbmQoXCJsaVwiKS5ub3QoXCIudWktc2VsZWN0bWVudS1vcHRncm91cFwiKSwgZSA9IHRoaXMuX2dldFNlbGVjdGVkSXRlbSgpLCB0aGlzLm1lbnVJbnN0YW5jZS5mb2N1cyhudWxsLCBlKSwgdGhpcy5fc2V0QXJpYShlLmRhdGEoXCJ1aS1zZWxlY3RtZW51LWl0ZW1cIikpLCB0aGlzLl9zZXRPcHRpb24oXCJkaXNhYmxlZFwiLCB0aGlzLmVsZW1lbnQucHJvcChcImRpc2FibGVkXCIpKSlcbiAgICAgICAgfSxcbiAgICAgICAgb3BlbjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCAodGhpcy5tZW51SXRlbXMgPyAodGhpcy5tZW51LmZpbmQoXCIudWktc3RhdGUtZm9jdXNcIikucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKSwgdGhpcy5tZW51SW5zdGFuY2UuZm9jdXMobnVsbCwgdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkpKSA6IHRoaXMuX3JlZnJlc2hNZW51KCksIHRoaXMuaXNPcGVuID0gITAsIHRoaXMuX3RvZ2dsZUF0dHIoKSwgdGhpcy5fcmVzaXplTWVudSgpLCB0aGlzLl9wb3NpdGlvbigpLCB0aGlzLl9vbih0aGlzLmRvY3VtZW50LCB0aGlzLl9kb2N1bWVudENsaWNrKSwgdGhpcy5fdHJpZ2dlcihcIm9wZW5cIiwgZSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9wb3NpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5tZW51V3JhcC5wb3NpdGlvbihlLmV4dGVuZCh7b2Y6IHRoaXMuYnV0dG9ufSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uKSlcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiAmJiAodGhpcy5pc09wZW4gPSAhMSwgdGhpcy5fdG9nZ2xlQXR0cigpLCB0aGlzLnJhbmdlID0gbnVsbCwgdGhpcy5fb2ZmKHRoaXMuZG9jdW1lbnQpLCB0aGlzLl90cmlnZ2VyKFwiY2xvc2VcIiwgZSkpXG4gICAgICAgIH0sXG4gICAgICAgIHdpZGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uXG4gICAgICAgIH0sXG4gICAgICAgIG1lbnVXaWRnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbnVcbiAgICAgICAgfSxcbiAgICAgICAgX3JlbmRlck1lbnU6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IHRoaXMsIG4gPSBcIlwiO1xuICAgICAgICAgICAgZS5lYWNoKGksIGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgICAgICAgICAgICAgYS5vcHRncm91cCAhPT0gbiAmJiAoZShcIjxsaT5cIiwge1xuICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwidWktc2VsZWN0bWVudS1vcHRncm91cCB1aS1tZW51LWRpdmlkZXJcIiArIChhLmVsZW1lbnQucGFyZW50KFwib3B0Z3JvdXBcIikucHJvcChcImRpc2FibGVkXCIpID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIiA6IFwiXCIpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBhLm9wdGdyb3VwXG4gICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8odCksIG4gPSBhLm9wdGdyb3VwKSwgcy5fcmVuZGVySXRlbURhdGEodCwgYSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9yZW5kZXJJdGVtRGF0YTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJJdGVtKGUsIHQpLmRhdGEoXCJ1aS1zZWxlY3RtZW51LWl0ZW1cIiwgdClcbiAgICAgICAgfSxcbiAgICAgICAgX3JlbmRlckl0ZW06IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGUoXCI8bGk+XCIpO1xuICAgICAgICAgICAgcmV0dXJuIGkuZGlzYWJsZWQgJiYgcy5hZGRDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIpLCB0aGlzLl9zZXRUZXh0KHMsIGkubGFiZWwpLCBzLmFwcGVuZFRvKHQpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRUZXh0OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgdCA/IGUudGV4dCh0KSA6IGUuaHRtbChcIiYjMTYwO1wiKVxuICAgICAgICB9LFxuICAgICAgICBfbW92ZTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuID0gXCIudWktbWVudS1pdGVtXCI7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA/IGkgPSB0aGlzLm1lbnVJdGVtcy5lcSh0aGlzLmZvY3VzSW5kZXgpIDogKGkgPSB0aGlzLm1lbnVJdGVtcy5lcSh0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCksIG4gKz0gXCI6bm90KC51aS1zdGF0ZS1kaXNhYmxlZClcIiksIHMgPSBcImZpcnN0XCIgPT09IGUgfHwgXCJsYXN0XCIgPT09IGUgPyBpW1wiZmlyc3RcIiA9PT0gZSA/IFwicHJldkFsbFwiIDogXCJuZXh0QWxsXCJdKG4pLmVxKC0xKSA6IGlbZSArIFwiQWxsXCJdKG4pLmVxKDApLCBzLmxlbmd0aCAmJiB0aGlzLm1lbnVJbnN0YW5jZS5mb2N1cyh0LCBzKVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0U2VsZWN0ZWRJdGVtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW51SXRlbXMuZXEodGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXgpXG4gICAgICAgIH0sXG4gICAgICAgIF90b2dnbGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzW3RoaXMuaXNPcGVuID8gXCJjbG9zZVwiIDogXCJvcGVuXCJdKGUpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgdGhpcy5yYW5nZSAmJiAod2luZG93LmdldFNlbGVjdGlvbiA/IChlID0gd2luZG93LmdldFNlbGVjdGlvbigpLCBlLnJlbW92ZUFsbFJhbmdlcygpLCBlLmFkZFJhbmdlKHRoaXMucmFuZ2UpKSA6IHRoaXMucmFuZ2Uuc2VsZWN0KCksIHRoaXMuYnV0dG9uLmZvY3VzKCkpXG4gICAgICAgIH0sXG4gICAgICAgIF9kb2N1bWVudENsaWNrOiB7XG4gICAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gJiYgKGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktc2VsZWN0bWVudS1tZW51LCAjXCIgKyB0aGlzLmlkcy5idXR0b24pLmxlbmd0aCB8fCB0aGlzLmNsb3NlKHQpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfYnV0dG9uRXZlbnRzOiB7XG4gICAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uID8gKGUgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksIGUucmFuZ2VDb3VudCAmJiAodGhpcy5yYW5nZSA9IGUuZ2V0UmFuZ2VBdCgwKSkpIDogdGhpcy5yYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpXG4gICAgICAgICAgICB9LCBjbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRTZWxlY3Rpb24oKSwgdGhpcy5fdG9nZ2xlKGUpXG4gICAgICAgICAgICB9LCBrZXlkb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gITA7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0LmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuVEFCOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5FU0NBUEU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKHQpLCBpID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuRU5URVI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiAmJiB0aGlzLl9zZWxlY3RGb2N1c2VkSXRlbSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5VUDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuYWx0S2V5ID8gdGhpcy5fdG9nZ2xlKHQpIDogdGhpcy5fbW92ZShcInByZXZcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuYWx0S2V5ID8gdGhpcy5fdG9nZ2xlKHQpIDogdGhpcy5fbW92ZShcIm5leHRcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuU1BBQ0U6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA/IHRoaXMuX3NlbGVjdEZvY3VzZWRJdGVtKHQpIDogdGhpcy5fdG9nZ2xlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLkxFRlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlKFwicHJldlwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmUoXCJuZXh0XCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLkhPTUU6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLlBBR0VfVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlKFwiZmlyc3RcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuRU5EOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5QQUdFX0RPV046XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlKFwibGFzdFwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51LnRyaWdnZXIodCksIGkgPSAhMVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpICYmIHQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfc2VsZWN0Rm9jdXNlZEl0ZW06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMubWVudUl0ZW1zLmVxKHRoaXMuZm9jdXNJbmRleCk7XG4gICAgICAgICAgICB0Lmhhc0NsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikgfHwgdGhpcy5fc2VsZWN0KHQuZGF0YShcInVpLXNlbGVjdG1lbnUtaXRlbVwiKSwgZSlcbiAgICAgICAgfSxcbiAgICAgICAgX3NlbGVjdDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCA9IGUuaW5kZXgsIHRoaXMuX3NldFRleHQodGhpcy5idXR0b25UZXh0LCBlLmxhYmVsKSwgdGhpcy5fc2V0QXJpYShlKSwgdGhpcy5fdHJpZ2dlcihcInNlbGVjdFwiLCB0LCB7aXRlbTogZX0pLCBlLmluZGV4ICE9PSBpICYmIHRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIiwgdCwge2l0ZW06IGV9KSwgdGhpcy5jbG9zZSh0KVxuICAgICAgICB9LFxuICAgICAgICBfc2V0QXJpYTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5tZW51SXRlbXMuZXEoZS5pbmRleCkuYXR0cihcImlkXCIpO1xuICAgICAgICAgICAgdGhpcy5idXR0b24uYXR0cih7XG4gICAgICAgICAgICAgICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogdCxcbiAgICAgICAgICAgICAgICBcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOiB0XG4gICAgICAgICAgICB9KSwgdGhpcy5tZW51LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiwgdClcbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIFwiaWNvbnNcIiA9PT0gZSAmJiB0aGlzLmJ1dHRvbi5maW5kKFwic3Bhbi51aS1pY29uXCIpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5pY29ucy5idXR0b24pLmFkZENsYXNzKHQuYnV0dG9uKSwgdGhpcy5fc3VwZXIoZSwgdCksIFwiYXBwZW5kVG9cIiA9PT0gZSAmJiB0aGlzLm1lbnVXcmFwLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCBcImRpc2FibGVkXCIgPT09IGUgJiYgKHRoaXMubWVudUluc3RhbmNlLm9wdGlvbihcImRpc2FibGVkXCIsIHQpLCB0aGlzLmJ1dHRvbi50b2dnbGVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIsIHQpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsIHQpLCB0aGlzLmVsZW1lbnQucHJvcChcImRpc2FibGVkXCIsIHQpLCB0ID8gKHRoaXMuYnV0dG9uLmF0dHIoXCJ0YWJpbmRleFwiLCAtMSksIHRoaXMuY2xvc2UoKSkgOiB0aGlzLmJ1dHRvbi5hdHRyKFwidGFiaW5kZXhcIiwgMCkpLCBcIndpZHRoXCIgPT09IGUgJiYgdGhpcy5fcmVzaXplQnV0dG9uKClcbiAgICAgICAgfSxcbiAgICAgICAgX2FwcGVuZFRvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucy5hcHBlbmRUbztcbiAgICAgICAgICAgIHJldHVybiB0ICYmICh0ID0gdC5qcXVlcnkgfHwgdC5ub2RlVHlwZSA/IGUodCkgOiB0aGlzLmRvY3VtZW50LmZpbmQodCkuZXEoMCkpLCB0ICYmIHRbMF0gfHwgKHQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdChcIi51aS1mcm9udFwiKSksIHQubGVuZ3RoIHx8ICh0ID0gdGhpcy5kb2N1bWVudFswXS5ib2R5KSwgdFxuICAgICAgICB9LFxuICAgICAgICBfdG9nZ2xlQXR0cjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5idXR0b24udG9nZ2xlQ2xhc3MoXCJ1aS1jb3JuZXItdG9wXCIsIHRoaXMuaXNPcGVuKS50b2dnbGVDbGFzcyhcInVpLWNvcm5lci1hbGxcIiwgIXRoaXMuaXNPcGVuKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCB0aGlzLmlzT3BlbiksIHRoaXMubWVudVdyYXAudG9nZ2xlQ2xhc3MoXCJ1aS1zZWxlY3RtZW51LW9wZW5cIiwgdGhpcy5pc09wZW4pLCB0aGlzLm1lbnUuYXR0cihcImFyaWEtaGlkZGVuXCIsICF0aGlzLmlzT3BlbilcbiAgICAgICAgfSxcbiAgICAgICAgX3Jlc2l6ZUJ1dHRvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLm9wdGlvbnMud2lkdGg7XG4gICAgICAgICAgICBlIHx8IChlID0gdGhpcy5lbGVtZW50LnNob3coKS5vdXRlcldpZHRoKCksIHRoaXMuZWxlbWVudC5oaWRlKCkpLCB0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKGUpXG4gICAgICAgIH0sXG4gICAgICAgIF9yZXNpemVNZW51OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1lbnUub3V0ZXJXaWR0aChNYXRoLm1heCh0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKCksIHRoaXMubWVudS53aWR0aChcIlwiKS5vdXRlcldpZHRoKCkgKyAxKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7ZGlzYWJsZWQ6IHRoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIil9XG4gICAgICAgIH0sXG4gICAgICAgIF9wYXJzZU9wdGlvbnM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IFtdO1xuICAgICAgICAgICAgdC5lYWNoKGZ1bmN0aW9uICh0LCBzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBlKHMpLCBhID0gbi5wYXJlbnQoXCJvcHRncm91cFwiKTtcbiAgICAgICAgICAgICAgICBpLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBuLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG4uYXR0cihcInZhbHVlXCIpLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogbi50ZXh0KCksXG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwOiBhLmF0dHIoXCJsYWJlbFwiKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogYS5wcm9wKFwiZGlzYWJsZWRcIikgfHwgbi5wcm9wKFwiZGlzYWJsZWRcIilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSksIHRoaXMuaXRlbXMgPSBpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1lbnVXcmFwLnJlbW92ZSgpLCB0aGlzLmJ1dHRvbi5yZW1vdmUoKSwgdGhpcy5lbGVtZW50LnNob3coKSwgdGhpcy5lbGVtZW50LnJlbW92ZVVuaXF1ZUlkKCksIHRoaXMubGFiZWwuYXR0cihcImZvclwiLCB0aGlzLmlkcy5lbGVtZW50KVxuICAgICAgICB9XG4gICAgfSksIGUud2lkZ2V0KFwidWkuc2xpZGVyXCIsIGUudWkubW91c2UsIHtcbiAgICAgICAgdmVyc2lvbjogXCIxLjExLjJcIixcbiAgICAgICAgd2lkZ2V0RXZlbnRQcmVmaXg6IFwic2xpZGVcIixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYW5pbWF0ZTogITEsXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgb3JpZW50YXRpb246IFwiaG9yaXpvbnRhbFwiLFxuICAgICAgICAgICAgcmFuZ2U6ICExLFxuICAgICAgICAgICAgc3RlcDogMSxcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgdmFsdWVzOiBudWxsLFxuICAgICAgICAgICAgY2hhbmdlOiBudWxsLFxuICAgICAgICAgICAgc2xpZGU6IG51bGwsXG4gICAgICAgICAgICBzdGFydDogbnVsbCxcbiAgICAgICAgICAgIHN0b3A6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgbnVtUGFnZXM6IDUsXG4gICAgICAgIF9jcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2tleVNsaWRpbmcgPSAhMSwgdGhpcy5fbW91c2VTbGlkaW5nID0gITEsIHRoaXMuX2FuaW1hdGVPZmYgPSAhMCwgdGhpcy5faGFuZGxlSW5kZXggPSBudWxsLCB0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpLCB0aGlzLl9tb3VzZUluaXQoKSwgdGhpcy5fY2FsY3VsYXRlTmV3TWF4KCksIHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLXNsaWRlciB1aS1zbGlkZXItXCIgKyB0aGlzLm9yaWVudGF0aW9uICsgXCIgdWktd2lkZ2V0XCIgKyBcIiB1aS13aWRnZXQtY29udGVudFwiICsgXCIgdWktY29ybmVyLWFsbFwiKSwgdGhpcy5fcmVmcmVzaCgpLCB0aGlzLl9zZXRPcHRpb24oXCJkaXNhYmxlZFwiLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQpLCB0aGlzLl9hbmltYXRlT2ZmID0gITFcbiAgICAgICAgfSxcbiAgICAgICAgX3JlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVJhbmdlKCksIHRoaXMuX2NyZWF0ZUhhbmRsZXMoKSwgdGhpcy5fc2V0dXBFdmVudHMoKSwgdGhpcy5fcmVmcmVzaFZhbHVlKClcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZUhhbmRsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0LCBpLCBzID0gdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICAgIG4gPSB0aGlzLmVsZW1lbnQuZmluZChcIi51aS1zbGlkZXItaGFuZGxlXCIpLmFkZENsYXNzKFwidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIpLFxuICAgICAgICAgICAgICAgIGEgPSBcIjxzcGFuIGNsYXNzPSd1aS1zbGlkZXItaGFuZGxlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCcgdGFiaW5kZXg9JzAnPjwvc3Bhbj5cIiwgbyA9IFtdO1xuICAgICAgICAgICAgZm9yIChpID0gcy52YWx1ZXMgJiYgcy52YWx1ZXMubGVuZ3RoIHx8IDEsIG4ubGVuZ3RoID4gaSAmJiAobi5zbGljZShpKS5yZW1vdmUoKSwgbiA9IG4uc2xpY2UoMCwgaSkpLCB0ID0gbi5sZW5ndGg7IGkgPiB0OyB0KyspIG8ucHVzaChhKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcyA9IG4uYWRkKGUoby5qb2luKFwiXCIpKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpKSwgdGhpcy5oYW5kbGUgPSB0aGlzLmhhbmRsZXMuZXEoMCksIHRoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgZSh0aGlzKS5kYXRhKFwidWktc2xpZGVyLWhhbmRsZS1pbmRleFwiLCB0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZVJhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucywgaSA9IFwiXCI7XG4gICAgICAgICAgICB0LnJhbmdlID8gKHQucmFuZ2UgPT09ICEwICYmICh0LnZhbHVlcyA/IHQudmFsdWVzLmxlbmd0aCAmJiAyICE9PSB0LnZhbHVlcy5sZW5ndGggPyB0LnZhbHVlcyA9IFt0LnZhbHVlc1swXSwgdC52YWx1ZXNbMF1dIDogZS5pc0FycmF5KHQudmFsdWVzKSAmJiAodC52YWx1ZXMgPSB0LnZhbHVlcy5zbGljZSgwKSkgOiB0LnZhbHVlcyA9IFt0aGlzLl92YWx1ZU1pbigpLCB0aGlzLl92YWx1ZU1pbigpXSksIHRoaXMucmFuZ2UgJiYgdGhpcy5yYW5nZS5sZW5ndGggPyB0aGlzLnJhbmdlLnJlbW92ZUNsYXNzKFwidWktc2xpZGVyLXJhbmdlLW1pbiB1aS1zbGlkZXItcmFuZ2UtbWF4XCIpLmNzcyh7XG4gICAgICAgICAgICAgICAgbGVmdDogXCJcIixcbiAgICAgICAgICAgICAgICBib3R0b206IFwiXCJcbiAgICAgICAgICAgIH0pIDogKHRoaXMucmFuZ2UgPSBlKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kVG8odGhpcy5lbGVtZW50KSwgaSA9IFwidWktc2xpZGVyLXJhbmdlIHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiKSwgdGhpcy5yYW5nZS5hZGRDbGFzcyhpICsgKFwibWluXCIgPT09IHQucmFuZ2UgfHwgXCJtYXhcIiA9PT0gdC5yYW5nZSA/IFwiIHVpLXNsaWRlci1yYW5nZS1cIiArIHQucmFuZ2UgOiBcIlwiKSkpIDogKHRoaXMucmFuZ2UgJiYgdGhpcy5yYW5nZS5yZW1vdmUoKSwgdGhpcy5yYW5nZSA9IG51bGwpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXR1cEV2ZW50czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fb2ZmKHRoaXMuaGFuZGxlcyksIHRoaXMuX29uKHRoaXMuaGFuZGxlcywgdGhpcy5faGFuZGxlRXZlbnRzKSwgdGhpcy5faG92ZXJhYmxlKHRoaXMuaGFuZGxlcyksIHRoaXMuX2ZvY3VzYWJsZSh0aGlzLmhhbmRsZXMpXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXMucmVtb3ZlKCksIHRoaXMucmFuZ2UgJiYgdGhpcy5yYW5nZS5yZW1vdmUoKSwgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2xpZGVyIHVpLXNsaWRlci1ob3Jpem9udGFsIHVpLXNsaWRlci12ZXJ0aWNhbCB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKSwgdGhpcy5fbW91c2VEZXN0cm95KClcbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzLCBuLCBhLCBvLCByLCBoLCBsLCB1ID0gdGhpcywgZCA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBkLmRpc2FibGVkID8gITEgOiAodGhpcy5lbGVtZW50U2l6ZSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpXG4gICAgICAgICAgICB9LCB0aGlzLmVsZW1lbnRPZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCksIGkgPSB7XG4gICAgICAgICAgICAgICAgeDogdC5wYWdlWCxcbiAgICAgICAgICAgICAgICB5OiB0LnBhZ2VZXG4gICAgICAgICAgICB9LCBzID0gdGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKGkpLCBuID0gdGhpcy5fdmFsdWVNYXgoKSAtIHRoaXMuX3ZhbHVlTWluKCkgKyAxLCB0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gTWF0aC5hYnMocyAtIHUudmFsdWVzKHQpKTtcbiAgICAgICAgICAgICAgICAobiA+IGkgfHwgbiA9PT0gaSAmJiAodCA9PT0gdS5fbGFzdENoYW5nZWRWYWx1ZSB8fCB1LnZhbHVlcyh0KSA9PT0gZC5taW4pKSAmJiAobiA9IGksIGEgPSBlKHRoaXMpLCBvID0gdClcbiAgICAgICAgICAgIH0pLCByID0gdGhpcy5fc3RhcnQodCwgbyksIHIgPT09ICExID8gITEgOiAodGhpcy5fbW91c2VTbGlkaW5nID0gITAsIHRoaXMuX2hhbmRsZUluZGV4ID0gbywgYS5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5mb2N1cygpLCBoID0gYS5vZmZzZXQoKSwgbCA9ICFlKHQudGFyZ2V0KS5wYXJlbnRzKCkuYWRkQmFjaygpLmlzKFwiLnVpLXNsaWRlci1oYW5kbGVcIiksIHRoaXMuX2NsaWNrT2Zmc2V0ID0gbCA/IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIHRvcDogMFxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0LnBhZ2VYIC0gaC5sZWZ0IC0gYS53aWR0aCgpIC8gMixcbiAgICAgICAgICAgICAgICB0b3A6IHQucGFnZVkgLSBoLnRvcCAtIGEuaGVpZ2h0KCkgLyAyIC0gKHBhcnNlSW50KGEuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksIDEwKSB8fCAwKSAtIChwYXJzZUludChhLmNzcyhcImJvcmRlckJvdHRvbVdpZHRoXCIpLCAxMCkgfHwgMCkgKyAocGFyc2VJbnQoYS5jc3MoXCJtYXJnaW5Ub3BcIiksIDEwKSB8fCAwKVxuICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVzLmhhc0NsYXNzKFwidWktc3RhdGUtaG92ZXJcIikgfHwgdGhpcy5fc2xpZGUodCwgbywgcyksIHRoaXMuX2FuaW1hdGVPZmYgPSAhMCwgITApKVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VTdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEwXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZURyYWc6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSwgaSA9IHRoaXMuX25vcm1WYWx1ZUZyb21Nb3VzZSh0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zbGlkZShlLCB0aGlzLl9oYW5kbGVJbmRleCwgaSksICExXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZVN0b3A6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVzLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLCB0aGlzLl9tb3VzZVNsaWRpbmcgPSAhMSwgdGhpcy5fc3RvcChlLCB0aGlzLl9oYW5kbGVJbmRleCksIHRoaXMuX2NoYW5nZShlLCB0aGlzLl9oYW5kbGVJbmRleCksIHRoaXMuX2hhbmRsZUluZGV4ID0gbnVsbCwgdGhpcy5fY2xpY2tPZmZzZXQgPSBudWxsLCB0aGlzLl9hbmltYXRlT2ZmID0gITEsICExXG4gICAgICAgIH0sXG4gICAgICAgIF9kZXRlY3RPcmllbnRhdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IFwidmVydGljYWxcIiA9PT0gdGhpcy5vcHRpb25zLm9yaWVudGF0aW9uID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCJcbiAgICAgICAgfSxcbiAgICAgICAgX25vcm1WYWx1ZUZyb21Nb3VzZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0LCBpLCBzLCBuLCBhO1xuICAgICAgICAgICAgcmV0dXJuIFwiaG9yaXpvbnRhbFwiID09PSB0aGlzLm9yaWVudGF0aW9uID8gKHQgPSB0aGlzLmVsZW1lbnRTaXplLndpZHRoLCBpID0gZS54IC0gdGhpcy5lbGVtZW50T2Zmc2V0LmxlZnQgLSAodGhpcy5fY2xpY2tPZmZzZXQgPyB0aGlzLl9jbGlja09mZnNldC5sZWZ0IDogMCkpIDogKHQgPSB0aGlzLmVsZW1lbnRTaXplLmhlaWdodCwgaSA9IGUueSAtIHRoaXMuZWxlbWVudE9mZnNldC50b3AgLSAodGhpcy5fY2xpY2tPZmZzZXQgPyB0aGlzLl9jbGlja09mZnNldC50b3AgOiAwKSksIHMgPSBpIC8gdCwgcyA+IDEgJiYgKHMgPSAxKSwgMCA+IHMgJiYgKHMgPSAwKSwgXCJ2ZXJ0aWNhbFwiID09PSB0aGlzLm9yaWVudGF0aW9uICYmIChzID0gMSAtIHMpLCBuID0gdGhpcy5fdmFsdWVNYXgoKSAtIHRoaXMuX3ZhbHVlTWluKCksIGEgPSB0aGlzLl92YWx1ZU1pbigpICsgcyAqIG4sIHRoaXMuX3RyaW1BbGlnblZhbHVlKGEpXG4gICAgICAgIH0sXG4gICAgICAgIF9zdGFydDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpID0ge2hhbmRsZTogdGhpcy5oYW5kbGVzW3RdLCB2YWx1ZTogdGhpcy52YWx1ZSgpfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICYmIChpLnZhbHVlID0gdGhpcy52YWx1ZXModCksIGkudmFsdWVzID0gdGhpcy52YWx1ZXMoKSksIHRoaXMuX3RyaWdnZXIoXCJzdGFydFwiLCBlLCBpKVxuICAgICAgICB9LFxuICAgICAgICBfc2xpZGU6IGZ1bmN0aW9uIChlLCB0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcywgbiwgYTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggPyAocyA9IHRoaXMudmFsdWVzKHQgPyAwIDogMSksIDIgPT09IHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5yYW5nZSA9PT0gITAgJiYgKDAgPT09IHQgJiYgaSA+IHMgfHwgMSA9PT0gdCAmJiBzID4gaSkgJiYgKGkgPSBzKSwgaSAhPT0gdGhpcy52YWx1ZXModCkgJiYgKG4gPSB0aGlzLnZhbHVlcygpLCBuW3RdID0gaSwgYSA9IHRoaXMuX3RyaWdnZXIoXCJzbGlkZVwiLCBlLCB7XG4gICAgICAgICAgICAgICAgaGFuZGxlOiB0aGlzLmhhbmRsZXNbdF0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGksXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICB9KSwgcyA9IHRoaXMudmFsdWVzKHQgPyAwIDogMSksIGEgIT09ICExICYmIHRoaXMudmFsdWVzKHQsIGkpKSkgOiBpICE9PSB0aGlzLnZhbHVlKCkgJiYgKGEgPSB0aGlzLl90cmlnZ2VyKFwic2xpZGVcIiwgZSwge1xuICAgICAgICAgICAgICAgIGhhbmRsZTogdGhpcy5oYW5kbGVzW3RdLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpXG4gICAgICAgICAgICB9KSwgYSAhPT0gITEgJiYgdGhpcy52YWx1ZShpKSlcbiAgICAgICAgfSxcbiAgICAgICAgX3N0b3A6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHtoYW5kbGU6IHRoaXMuaGFuZGxlc1t0XSwgdmFsdWU6IHRoaXMudmFsdWUoKX07XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICYmIChpLnZhbHVlID0gdGhpcy52YWx1ZXModCksIGkudmFsdWVzID0gdGhpcy52YWx1ZXMoKSksIHRoaXMuX3RyaWdnZXIoXCJzdG9wXCIsIGUsIGkpXG4gICAgICAgIH0sXG4gICAgICAgIF9jaGFuZ2U6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2tleVNsaWRpbmcgJiYgIXRoaXMuX21vdXNlU2xpZGluZykge1xuICAgICAgICAgICAgICAgIHZhciBpID0ge2hhbmRsZTogdGhpcy5oYW5kbGVzW3RdLCB2YWx1ZTogdGhpcy52YWx1ZSgpfTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICYmIChpLnZhbHVlID0gdGhpcy52YWx1ZXModCksIGkudmFsdWVzID0gdGhpcy52YWx1ZXMoKSksIHRoaXMuX2xhc3RDaGFuZ2VkVmFsdWUgPSB0LCB0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsIGUsIGkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoZSksIHRoaXMuX3JlZnJlc2hWYWx1ZSgpLCB0aGlzLl9jaGFuZ2UobnVsbCwgMCksIHZvaWQgMCkgOiB0aGlzLl92YWx1ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHZhbHVlczogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzLCBuLCBhO1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gdGhpcy5vcHRpb25zLnZhbHVlc1t0XSA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKGkpLCB0aGlzLl9yZWZyZXNoVmFsdWUoKSwgdGhpcy5fY2hhbmdlKG51bGwsIHQpLCB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLl92YWx1ZXMoKTtcbiAgICAgICAgICAgIGlmICghZS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHJldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoID8gdGhpcy5fdmFsdWVzKHQpIDogdGhpcy52YWx1ZSgpO1xuICAgICAgICAgICAgZm9yIChzID0gdGhpcy5vcHRpb25zLnZhbHVlcywgbiA9IGFyZ3VtZW50c1swXSwgYSA9IDA7IHMubGVuZ3RoID4gYTsgYSArPSAxKSBzW2FdID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoblthXSksIHRoaXMuX2NoYW5nZShudWxsLCBhKTtcbiAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hWYWx1ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRPcHRpb246IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcywgbiA9IDA7XG4gICAgICAgICAgICBzd2l0Y2ggKFwicmFuZ2VcIiA9PT0gdCAmJiB0aGlzLm9wdGlvbnMucmFuZ2UgPT09ICEwICYmIChcIm1pblwiID09PSBpID8gKHRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX3ZhbHVlcygwKSwgdGhpcy5vcHRpb25zLnZhbHVlcyA9IG51bGwpIDogXCJtYXhcIiA9PT0gaSAmJiAodGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fdmFsdWVzKHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoIC0gMSksIHRoaXMub3B0aW9ucy52YWx1ZXMgPSBudWxsKSksIGUuaXNBcnJheSh0aGlzLm9wdGlvbnMudmFsdWVzKSAmJiAobiA9IHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKSwgXCJkaXNhYmxlZFwiID09PSB0ICYmIHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhaSksIHRoaXMuX3N1cGVyKHQsIGkpLCB0KSB7XG4gICAgICAgICAgICAgICAgY2FzZVwib3JpZW50YXRpb25cIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGV0ZWN0T3JpZW50YXRpb24oKSwgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2xpZGVyLWhvcml6b250YWwgdWktc2xpZGVyLXZlcnRpY2FsXCIpLmFkZENsYXNzKFwidWktc2xpZGVyLVwiICsgdGhpcy5vcmllbnRhdGlvbiksIHRoaXMuX3JlZnJlc2hWYWx1ZSgpLCB0aGlzLmhhbmRsZXMuY3NzKFwiaG9yaXpvbnRhbFwiID09PSBpID8gXCJib3R0b21cIiA6IFwibGVmdFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZVwidmFsdWVcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZU9mZiA9ICEwLCB0aGlzLl9yZWZyZXNoVmFsdWUoKSwgdGhpcy5fY2hhbmdlKG51bGwsIDApLCB0aGlzLl9hbmltYXRlT2ZmID0gITE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2VcInZhbHVlc1wiOlxuICAgICAgICAgICAgICAgICAgICBmb3IgKHRoaXMuX2FuaW1hdGVPZmYgPSAhMCwgdGhpcy5fcmVmcmVzaFZhbHVlKCksIHMgPSAwOyBuID4gczsgcyArPSAxKSB0aGlzLl9jaGFuZ2UobnVsbCwgcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FuaW1hdGVPZmYgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZVwic3RlcFwiOlxuICAgICAgICAgICAgICAgIGNhc2VcIm1pblwiOlxuICAgICAgICAgICAgICAgIGNhc2VcIm1heFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbmltYXRlT2ZmID0gITAsIHRoaXMuX2NhbGN1bGF0ZU5ld01heCgpLCB0aGlzLl9yZWZyZXNoVmFsdWUoKSwgdGhpcy5fYW5pbWF0ZU9mZiA9ICExO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlXCJyYW5nZVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbmltYXRlT2ZmID0gITAsIHRoaXMuX3JlZnJlc2goKSwgdGhpcy5fYW5pbWF0ZU9mZiA9ICExXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF92YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLm9wdGlvbnMudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gZSA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKGUpXG4gICAgICAgIH0sXG4gICAgICAgIF92YWx1ZXM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSwgcztcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdCA9IHRoaXMub3B0aW9ucy52YWx1ZXNbZV0sIHQgPSB0aGlzLl90cmltQWxpZ25WYWx1ZSh0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gdGhpcy5vcHRpb25zLnZhbHVlcy5zbGljZSgpLCBzID0gMDsgaS5sZW5ndGggPiBzOyBzICs9IDEpIGlbc10gPSB0aGlzLl90cmltQWxpZ25WYWx1ZShpW3NdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIH0sXG4gICAgICAgIF90cmltQWxpZ25WYWx1ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl92YWx1ZU1pbigpID49IGUpIHJldHVybiB0aGlzLl92YWx1ZU1pbigpO1xuICAgICAgICAgICAgaWYgKGUgPj0gdGhpcy5fdmFsdWVNYXgoKSkgcmV0dXJuIHRoaXMuX3ZhbHVlTWF4KCk7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucy5zdGVwID4gMCA/IHRoaXMub3B0aW9ucy5zdGVwIDogMSwgaSA9IChlIC0gdGhpcy5fdmFsdWVNaW4oKSkgJSB0LCBzID0gZSAtIGk7XG4gICAgICAgICAgICByZXR1cm4gMiAqIE1hdGguYWJzKGkpID49IHQgJiYgKHMgKz0gaSA+IDAgPyB0IDogLXQpLCBwYXJzZUZsb2F0KHMudG9GaXhlZCg1KSlcbiAgICAgICAgfSxcbiAgICAgICAgX2NhbGN1bGF0ZU5ld01heDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSAodGhpcy5vcHRpb25zLm1heCAtIHRoaXMuX3ZhbHVlTWluKCkpICUgdGhpcy5vcHRpb25zLnN0ZXA7XG4gICAgICAgICAgICB0aGlzLm1heCA9IHRoaXMub3B0aW9ucy5tYXggLSBlXG4gICAgICAgIH0sXG4gICAgICAgIF92YWx1ZU1pbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5taW5cbiAgICAgICAgfSxcbiAgICAgICAgX3ZhbHVlTWF4OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXhcbiAgICAgICAgfSxcbiAgICAgICAgX3JlZnJlc2hWYWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQsIGksIHMsIG4sIGEsIG8gPSB0aGlzLm9wdGlvbnMucmFuZ2UsIHIgPSB0aGlzLm9wdGlvbnMsIGggPSB0aGlzLFxuICAgICAgICAgICAgICAgIGwgPSB0aGlzLl9hbmltYXRlT2ZmID8gITEgOiByLmFuaW1hdGUsIHUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggPyB0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgIGkgPSAxMDAgKiAoKGgudmFsdWVzKHMpIC0gaC5fdmFsdWVNaW4oKSkgLyAoaC5fdmFsdWVNYXgoKSAtIGguX3ZhbHVlTWluKCkpKSwgdVtcImhvcml6b250YWxcIiA9PT0gaC5vcmllbnRhdGlvbiA/IFwibGVmdFwiIDogXCJib3R0b21cIl0gPSBpICsgXCIlXCIsIGUodGhpcykuc3RvcCgxLCAxKVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh1LCByLmFuaW1hdGUpLCBoLm9wdGlvbnMucmFuZ2UgPT09ICEwICYmIChcImhvcml6b250YWxcIiA9PT0gaC5vcmllbnRhdGlvbiA/ICgwID09PSBzICYmIGgucmFuZ2Uuc3RvcCgxLCAxKVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh7bGVmdDogaSArIFwiJVwifSwgci5hbmltYXRlKSwgMSA9PT0gcyAmJiBoLnJhbmdlW2wgPyBcImFuaW1hdGVcIiA6IFwiY3NzXCJdKHt3aWR0aDogaSAtIHQgKyBcIiVcIn0sIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6ICExLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogci5hbmltYXRlXG4gICAgICAgICAgICAgICAgfSkpIDogKDAgPT09IHMgJiYgaC5yYW5nZS5zdG9wKDEsIDEpW2wgPyBcImFuaW1hdGVcIiA6IFwiY3NzXCJdKHtib3R0b206IGkgKyBcIiVcIn0sIHIuYW5pbWF0ZSksIDEgPT09IHMgJiYgaC5yYW5nZVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh7aGVpZ2h0OiBpIC0gdCArIFwiJVwifSwge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogITEsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiByLmFuaW1hdGVcbiAgICAgICAgICAgICAgICB9KSkpLCB0ID0gaVxuICAgICAgICAgICAgfSkgOiAocyA9IHRoaXMudmFsdWUoKSwgbiA9IHRoaXMuX3ZhbHVlTWluKCksIGEgPSB0aGlzLl92YWx1ZU1heCgpLCBpID0gYSAhPT0gbiA/IDEwMCAqICgocyAtIG4pIC8gKGEgLSBuKSkgOiAwLCB1W1wiaG9yaXpvbnRhbFwiID09PSB0aGlzLm9yaWVudGF0aW9uID8gXCJsZWZ0XCIgOiBcImJvdHRvbVwiXSA9IGkgKyBcIiVcIiwgdGhpcy5oYW5kbGUuc3RvcCgxLCAxKVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh1LCByLmFuaW1hdGUpLCBcIm1pblwiID09PSBvICYmIFwiaG9yaXpvbnRhbFwiID09PSB0aGlzLm9yaWVudGF0aW9uICYmIHRoaXMucmFuZ2Uuc3RvcCgxLCAxKVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh7d2lkdGg6IGkgKyBcIiVcIn0sIHIuYW5pbWF0ZSksIFwibWF4XCIgPT09IG8gJiYgXCJob3Jpem9udGFsXCIgPT09IHRoaXMub3JpZW50YXRpb24gJiYgdGhpcy5yYW5nZVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh7d2lkdGg6IDEwMCAtIGkgKyBcIiVcIn0sIHtcbiAgICAgICAgICAgICAgICBxdWV1ZTogITEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHIuYW5pbWF0ZVxuICAgICAgICAgICAgfSksIFwibWluXCIgPT09IG8gJiYgXCJ2ZXJ0aWNhbFwiID09PSB0aGlzLm9yaWVudGF0aW9uICYmIHRoaXMucmFuZ2Uuc3RvcCgxLCAxKVtsID8gXCJhbmltYXRlXCIgOiBcImNzc1wiXSh7aGVpZ2h0OiBpICsgXCIlXCJ9LCByLmFuaW1hdGUpLCBcIm1heFwiID09PSBvICYmIFwidmVydGljYWxcIiA9PT0gdGhpcy5vcmllbnRhdGlvbiAmJiB0aGlzLnJhbmdlW2wgPyBcImFuaW1hdGVcIiA6IFwiY3NzXCJdKHtoZWlnaHQ6IDEwMCAtIGkgKyBcIiVcIn0sIHtcbiAgICAgICAgICAgICAgICBxdWV1ZTogITEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHIuYW5pbWF0ZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9oYW5kbGVFdmVudHM6IHtcbiAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIHMsIG4sIGEsIG8gPSBlKHQudGFyZ2V0KS5kYXRhKFwidWktc2xpZGVyLWhhbmRsZS1pbmRleFwiKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5IT01FOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5FTkQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLlBBR0VfVVA6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLlBBR0VfRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuVVA6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLlJJR0hUOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5ET1dOOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5MRUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQucHJldmVudERlZmF1bHQoKSwgIXRoaXMuX2tleVNsaWRpbmcgJiYgKHRoaXMuX2tleVNsaWRpbmcgPSAhMCwgZSh0LnRhcmdldCkuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksIGkgPSB0aGlzLl9zdGFydCh0LCBvKSwgaSA9PT0gITEpKSByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhID0gdGhpcy5vcHRpb25zLnN0ZXAsIHMgPSBuID0gdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCA/IHRoaXMudmFsdWVzKG8pIDogdGhpcy52YWx1ZSgpLCB0LmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuSE9NRTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLl92YWx1ZU1pbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLkVORDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLl92YWx1ZU1heCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLlBBR0VfVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5fdHJpbUFsaWduVmFsdWUocyArICh0aGlzLl92YWx1ZU1heCgpIC0gdGhpcy5fdmFsdWVNaW4oKSkgLyB0aGlzLm51bVBhZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5QQUdFX0RPV046XG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5fdHJpbUFsaWduVmFsdWUocyAtICh0aGlzLl92YWx1ZU1heCgpIC0gdGhpcy5fdmFsdWVNaW4oKSkgLyB0aGlzLm51bVBhZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5VUDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9PT0gdGhpcy5fdmFsdWVNYXgoKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKHMgKyBhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5ET1dOOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5MRUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT09IHRoaXMuX3ZhbHVlTWluKCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLl90cmltQWxpZ25WYWx1ZShzIC0gYSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fc2xpZGUodCwgbywgbilcbiAgICAgICAgICAgIH0sIGtleXVwOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZSh0LnRhcmdldCkuZGF0YShcInVpLXNsaWRlci1oYW5kbGUtaW5kZXhcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5U2xpZGluZyAmJiAodGhpcy5fa2V5U2xpZGluZyA9ICExLCB0aGlzLl9zdG9wKHQsIGkpLCB0aGlzLl9jaGFuZ2UodCwgaSksIGUodC50YXJnZXQpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSksIGUud2lkZ2V0KFwidWkuc29ydGFibGVcIiwgZS51aS5tb3VzZSwge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLFxuICAgICAgICB3aWRnZXRFdmVudFByZWZpeDogXCJzb3J0XCIsXG4gICAgICAgIHJlYWR5OiAhMSxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYXBwZW5kVG86IFwicGFyZW50XCIsXG4gICAgICAgICAgICBheGlzOiAhMSxcbiAgICAgICAgICAgIGNvbm5lY3RXaXRoOiAhMSxcbiAgICAgICAgICAgIGNvbnRhaW5tZW50OiAhMSxcbiAgICAgICAgICAgIGN1cnNvcjogXCJhdXRvXCIsXG4gICAgICAgICAgICBjdXJzb3JBdDogITEsXG4gICAgICAgICAgICBkcm9wT25FbXB0eTogITAsXG4gICAgICAgICAgICBmb3JjZVBsYWNlaG9sZGVyU2l6ZTogITEsXG4gICAgICAgICAgICBmb3JjZUhlbHBlclNpemU6ICExLFxuICAgICAgICAgICAgZ3JpZDogITEsXG4gICAgICAgICAgICBoYW5kbGU6ICExLFxuICAgICAgICAgICAgaGVscGVyOiBcIm9yaWdpbmFsXCIsXG4gICAgICAgICAgICBpdGVtczogXCI+ICpcIixcbiAgICAgICAgICAgIG9wYWNpdHk6ICExLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICExLFxuICAgICAgICAgICAgcmV2ZXJ0OiAhMSxcbiAgICAgICAgICAgIHNjcm9sbDogITAsXG4gICAgICAgICAgICBzY3JvbGxTZW5zaXRpdml0eTogMjAsXG4gICAgICAgICAgICBzY3JvbGxTcGVlZDogMjAsXG4gICAgICAgICAgICBzY29wZTogXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB0b2xlcmFuY2U6IFwiaW50ZXJzZWN0XCIsXG4gICAgICAgICAgICB6SW5kZXg6IDFlMyxcbiAgICAgICAgICAgIGFjdGl2YXRlOiBudWxsLFxuICAgICAgICAgICAgYmVmb3JlU3RvcDogbnVsbCxcbiAgICAgICAgICAgIGNoYW5nZTogbnVsbCxcbiAgICAgICAgICAgIGRlYWN0aXZhdGU6IG51bGwsXG4gICAgICAgICAgICBvdXQ6IG51bGwsXG4gICAgICAgICAgICBvdmVyOiBudWxsLFxuICAgICAgICAgICAgcmVjZWl2ZTogbnVsbCxcbiAgICAgICAgICAgIHJlbW92ZTogbnVsbCxcbiAgICAgICAgICAgIHNvcnQ6IG51bGwsXG4gICAgICAgICAgICBzdGFydDogbnVsbCxcbiAgICAgICAgICAgIHN0b3A6IG51bGwsXG4gICAgICAgICAgICB1cGRhdGU6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgX2lzT3ZlckF4aXM6IGZ1bmN0aW9uIChlLCB0LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gZSA+PSB0ICYmIHQgKyBpID4gZVxuICAgICAgICB9LFxuICAgICAgICBfaXNGbG9hdGluZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAvbGVmdHxyaWdodC8udGVzdChlLmNzcyhcImZsb2F0XCIpKSB8fCAvaW5saW5lfHRhYmxlLWNlbGwvLnRlc3QoZS5jc3MoXCJkaXNwbGF5XCIpKVxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyQ2FjaGUgPSB7fSwgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktc29ydGFibGVcIiksIHRoaXMucmVmcmVzaCgpLCB0aGlzLmZsb2F0aW5nID0gdGhpcy5pdGVtcy5sZW5ndGggPyBcInhcIiA9PT0gZS5heGlzIHx8IHRoaXMuX2lzRmxvYXRpbmcodGhpcy5pdGVtc1swXS5pdGVtKSA6ICExLCB0aGlzLm9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKSwgdGhpcy5fbW91c2VJbml0KCksIHRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpLCB0aGlzLnJlYWR5ID0gITBcbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKGUsIHQpLCBcImhhbmRsZVwiID09PSBlICYmIHRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRIYW5kbGVDbGFzc05hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLnVpLXNvcnRhYmxlLWhhbmRsZVwiKS5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlLWhhbmRsZVwiKSwgZS5lYWNoKHRoaXMuaXRlbXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAodGhpcy5pbnN0YW5jZS5vcHRpb25zLmhhbmRsZSA/IHRoaXMuaXRlbS5maW5kKHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGUpIDogdGhpcy5pdGVtKS5hZGRDbGFzcyhcInVpLXNvcnRhYmxlLWhhbmRsZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlIHVpLXNvcnRhYmxlLWRpc2FibGVkXCIpLmZpbmQoXCIudWktc29ydGFibGUtaGFuZGxlXCIpLnJlbW92ZUNsYXNzKFwidWktc29ydGFibGUtaGFuZGxlXCIpLCB0aGlzLl9tb3VzZURlc3Ryb3koKTtcbiAgICAgICAgICAgIGZvciAodmFyIGUgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGUgPj0gMDsgZS0tKSB0aGlzLml0ZW1zW2VdLml0ZW0ucmVtb3ZlRGF0YSh0aGlzLndpZGdldE5hbWUgKyBcIi1pdGVtXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgICAgICAgIHZhciBzID0gbnVsbCwgbiA9ICExLCBhID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVydGluZyA/ICExIDogdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IFwic3RhdGljXCIgPT09IHRoaXMub3B0aW9ucy50eXBlID8gITEgOiAodGhpcy5fcmVmcmVzaEl0ZW1zKHQpLCBlKHQudGFyZ2V0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZGF0YSh0aGlzLCBhLndpZGdldE5hbWUgKyBcIi1pdGVtXCIpID09PSBhID8gKHMgPSBlKHRoaXMpLCAhMSkgOiB2b2lkIDBcbiAgICAgICAgICAgIH0pLCBlLmRhdGEodC50YXJnZXQsIGEud2lkZ2V0TmFtZSArIFwiLWl0ZW1cIikgPT09IGEgJiYgKHMgPSBlKHQudGFyZ2V0KSksIHMgPyAhdGhpcy5vcHRpb25zLmhhbmRsZSB8fCBpIHx8IChlKHRoaXMub3B0aW9ucy5oYW5kbGUsIHMpLmZpbmQoXCIqXCIpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzID09PSB0LnRhcmdldCAmJiAobiA9ICEwKVxuICAgICAgICAgICAgfSksIG4pID8gKHRoaXMuY3VycmVudEl0ZW0gPSBzLCB0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpLCAhMCkgOiAhMSA6ICExKVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VTdGFydDogZnVuY3Rpb24gKHQsIGksIHMpIHtcbiAgICAgICAgICAgIHZhciBuLCBhLCBvID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXMsIHRoaXMucmVmcmVzaFBvc2l0aW9ucygpLCB0aGlzLmhlbHBlciA9IHRoaXMuX2NyZWF0ZUhlbHBlcih0KSwgdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpLCB0aGlzLl9jYWNoZU1hcmdpbnMoKSwgdGhpcy5zY3JvbGxQYXJlbnQgPSB0aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKSwgdGhpcy5vZmZzZXQgPSB0aGlzLmN1cnJlbnRJdGVtLm9mZnNldCgpLCB0aGlzLm9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IHRoaXMub2Zmc2V0LnRvcCAtIHRoaXMubWFyZ2lucy50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5vZmZzZXQubGVmdCAtIHRoaXMubWFyZ2lucy5sZWZ0XG4gICAgICAgICAgICB9LCBlLmV4dGVuZCh0aGlzLm9mZnNldCwge1xuICAgICAgICAgICAgICAgIGNsaWNrOiB7bGVmdDogdC5wYWdlWCAtIHRoaXMub2Zmc2V0LmxlZnQsIHRvcDogdC5wYWdlWSAtIHRoaXMub2Zmc2V0LnRvcH0sXG4gICAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZTogdGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKVxuICAgICAgICAgICAgfSksIHRoaXMuaGVscGVyLmNzcyhcInBvc2l0aW9uXCIsIFwiYWJzb2x1dGVcIiksIHRoaXMuY3NzUG9zaXRpb24gPSB0aGlzLmhlbHBlci5jc3MoXCJwb3NpdGlvblwiKSwgdGhpcy5vcmlnaW5hbFBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbih0KSwgdGhpcy5vcmlnaW5hbFBhZ2VYID0gdC5wYWdlWCwgdGhpcy5vcmlnaW5hbFBhZ2VZID0gdC5wYWdlWSwgby5jdXJzb3JBdCAmJiB0aGlzLl9hZGp1c3RPZmZzZXRGcm9tSGVscGVyKG8uY3Vyc29yQXQpLCB0aGlzLmRvbVBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgIHByZXY6IHRoaXMuY3VycmVudEl0ZW0ucHJldigpWzBdLFxuICAgICAgICAgICAgICAgIHBhcmVudDogdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXVxuICAgICAgICAgICAgfSwgdGhpcy5oZWxwZXJbMF0gIT09IHRoaXMuY3VycmVudEl0ZW1bMF0gJiYgdGhpcy5jdXJyZW50SXRlbS5oaWRlKCksIHRoaXMuX2NyZWF0ZVBsYWNlaG9sZGVyKCksIG8uY29udGFpbm1lbnQgJiYgdGhpcy5fc2V0Q29udGFpbm1lbnQoKSwgby5jdXJzb3IgJiYgXCJhdXRvXCIgIT09IG8uY3Vyc29yICYmIChhID0gdGhpcy5kb2N1bWVudC5maW5kKFwiYm9keVwiKSwgdGhpcy5zdG9yZWRDdXJzb3IgPSBhLmNzcyhcImN1cnNvclwiKSwgYS5jc3MoXCJjdXJzb3JcIiwgby5jdXJzb3IpLCB0aGlzLnN0b3JlZFN0eWxlc2hlZXQgPSBlKFwiPHN0eWxlPip7IGN1cnNvcjogXCIgKyBvLmN1cnNvciArIFwiICFpbXBvcnRhbnQ7IH08L3N0eWxlPlwiKS5hcHBlbmRUbyhhKSksIG8ub3BhY2l0eSAmJiAodGhpcy5oZWxwZXIuY3NzKFwib3BhY2l0eVwiKSAmJiAodGhpcy5fc3RvcmVkT3BhY2l0eSA9IHRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIikpLCB0aGlzLmhlbHBlci5jc3MoXCJvcGFjaXR5XCIsIG8ub3BhY2l0eSkpLCBvLnpJbmRleCAmJiAodGhpcy5oZWxwZXIuY3NzKFwiekluZGV4XCIpICYmICh0aGlzLl9zdG9yZWRaSW5kZXggPSB0aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIikpLCB0aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIiwgby56SW5kZXgpKSwgdGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIFwiSFRNTFwiICE9PSB0aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lICYmICh0aGlzLm92ZXJmbG93T2Zmc2V0ID0gdGhpcy5zY3JvbGxQYXJlbnQub2Zmc2V0KCkpLCB0aGlzLl90cmlnZ2VyKFwic3RhcnRcIiwgdCwgdGhpcy5fdWlIYXNoKCkpLCB0aGlzLl9wcmVzZXJ2ZUhlbHBlclByb3BvcnRpb25zIHx8IHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKSwgIXMpIGZvciAobiA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBuID49IDA7IG4tLSkgdGhpcy5jb250YWluZXJzW25dLl90cmlnZ2VyKFwiYWN0aXZhdGVcIiwgdCwgdGhpcy5fdWlIYXNoKHRoaXMpKTtcbiAgICAgICAgICAgIHJldHVybiBlLnVpLmRkbWFuYWdlciAmJiAoZS51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXMpLCBlLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyICYmIGUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsIHQpLCB0aGlzLmRyYWdnaW5nID0gITAsIHRoaXMuaGVscGVyLmFkZENsYXNzKFwidWktc29ydGFibGUtaGVscGVyXCIpLCB0aGlzLl9tb3VzZURyYWcodCksICEwXG4gICAgICAgIH0sXG4gICAgICAgIF9tb3VzZURyYWc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiwgYSwgbyA9IHRoaXMub3B0aW9ucywgciA9ICExO1xuICAgICAgICAgICAgZm9yICh0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbih0KSwgdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKFwiYWJzb2x1dGVcIiksIHRoaXMubGFzdFBvc2l0aW9uQWJzIHx8ICh0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnMpLCB0aGlzLm9wdGlvbnMuc2Nyb2xsICYmICh0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gZG9jdW1lbnQgJiYgXCJIVE1MXCIgIT09IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUgPyAodGhpcy5vdmVyZmxvd09mZnNldC50b3AgKyB0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQgLSB0LnBhZ2VZIDwgby5zY3JvbGxTZW5zaXRpdml0eSA/IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCA9IHIgPSB0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgKyBvLnNjcm9sbFNwZWVkIDogdC5wYWdlWSAtIHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wIDwgby5zY3JvbGxTZW5zaXRpdml0eSAmJiAodGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wID0gciA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCAtIG8uc2Nyb2xsU3BlZWQpLCB0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQgKyB0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aCAtIHQucGFnZVggPCBvLnNjcm9sbFNlbnNpdGl2aXR5ID8gdGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCA9IHIgPSB0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0ICsgby5zY3JvbGxTcGVlZCA6IHQucGFnZVggLSB0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICYmICh0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0ID0gciA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgLSBvLnNjcm9sbFNwZWVkKSkgOiAodC5wYWdlWSAtIGUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDwgby5zY3JvbGxTZW5zaXRpdml0eSA/IHIgPSBlKGRvY3VtZW50KS5zY3JvbGxUb3AoZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkgLSBvLnNjcm9sbFNwZWVkKSA6IGUod2luZG93KS5oZWlnaHQoKSAtICh0LnBhZ2VZIC0gZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkpIDwgby5zY3JvbGxTZW5zaXRpdml0eSAmJiAociA9IGUoZG9jdW1lbnQpLnNjcm9sbFRvcChlKGRvY3VtZW50KS5zY3JvbGxUb3AoKSArIG8uc2Nyb2xsU3BlZWQpKSwgdC5wYWdlWCAtIGUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgPyByID0gZShkb2N1bWVudCkuc2Nyb2xsTGVmdChlKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgLSBvLnNjcm9sbFNwZWVkKSA6IGUod2luZG93KS53aWR0aCgpIC0gKHQucGFnZVggLSBlKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpIDwgby5zY3JvbGxTZW5zaXRpdml0eSAmJiAociA9IGUoZG9jdW1lbnQpLnNjcm9sbExlZnQoZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZCkpKSwgciAhPT0gITEgJiYgZS51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91ciAmJiBlLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLCB0KSksIHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpLCB0aGlzLm9wdGlvbnMuYXhpcyAmJiBcInlcIiA9PT0gdGhpcy5vcHRpb25zLmF4aXMgfHwgKHRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgKyBcInB4XCIpLCB0aGlzLm9wdGlvbnMuYXhpcyAmJiBcInhcIiA9PT0gdGhpcy5vcHRpb25zLmF4aXMgfHwgKHRoaXMuaGVscGVyWzBdLnN0eWxlLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgXCJweFwiKSwgaSA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChzID0gdGhpcy5pdGVtc1tpXSwgbiA9IHMuaXRlbVswXSwgYSA9IHRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihzKSwgYSAmJiBzLmluc3RhbmNlID09PSB0aGlzLmN1cnJlbnRDb250YWluZXIgJiYgbiAhPT0gdGhpcy5jdXJyZW50SXRlbVswXSAmJiB0aGlzLnBsYWNlaG9sZGVyWzEgPT09IGEgPyBcIm5leHRcIiA6IFwicHJldlwiXSgpWzBdICE9PSBuICYmICFlLmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0sIG4pICYmIChcInNlbWktZHluYW1pY1wiID09PSB0aGlzLm9wdGlvbnMudHlwZSA/ICFlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSwgbikgOiAhMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPSAxID09PSBhID8gXCJkb3duXCIgOiBcInVwXCIsIFwicG9pbnRlclwiICE9PSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlICYmICF0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKHMpKSBicmVhaztcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWFycmFuZ2UodCwgcyksIHRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIiwgdCwgdGhpcy5fdWlIYXNoKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udGFjdENvbnRhaW5lcnModCksIGUudWkuZGRtYW5hZ2VyICYmIGUudWkuZGRtYW5hZ2VyLmRyYWcodGhpcywgdCksIHRoaXMuX3RyaWdnZXIoXCJzb3J0XCIsIHQsIHRoaXMuX3VpSGFzaCgpKSwgdGhpcy5sYXN0UG9zaXRpb25BYnMgPSB0aGlzLnBvc2l0aW9uQWJzLCAhMVxuICAgICAgICB9LFxuICAgICAgICBfbW91c2VTdG9wOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS51aS5kZG1hbmFnZXIgJiYgIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyICYmIGUudWkuZGRtYW5hZ2VyLmRyb3AodGhpcywgdCksIHRoaXMub3B0aW9ucy5yZXZlcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLCBuID0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKSwgYSA9IHRoaXMub3B0aW9ucy5heGlzLCBvID0ge307XG4gICAgICAgICAgICAgICAgICAgIGEgJiYgXCJ4XCIgIT09IGEgfHwgKG8ubGVmdCA9IG4ubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0IC0gdGhpcy5tYXJnaW5zLmxlZnQgKyAodGhpcy5vZmZzZXRQYXJlbnRbMF0gPT09IGRvY3VtZW50LmJvZHkgPyAwIDogdGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsTGVmdCkpLCBhICYmIFwieVwiICE9PSBhIHx8IChvLnRvcCA9IG4udG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCAtIHRoaXMubWFyZ2lucy50b3AgKyAodGhpcy5vZmZzZXRQYXJlbnRbMF0gPT09IGRvY3VtZW50LmJvZHkgPyAwIDogdGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsVG9wKSksIHRoaXMucmV2ZXJ0aW5nID0gITAsIGUodGhpcy5oZWxwZXIpLmFuaW1hdGUobywgcGFyc2VJbnQodGhpcy5vcHRpb25zLnJldmVydCwgMTApIHx8IDUwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5fY2xlYXIodClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5fY2xlYXIodCwgaSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICExXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3VzZVVwKHt0YXJnZXQ6IG51bGx9KSwgXCJvcmlnaW5hbFwiID09PSB0aGlzLm9wdGlvbnMuaGVscGVyID8gdGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKS5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlLWhlbHBlclwiKSA6IHRoaXMuY3VycmVudEl0ZW0uc2hvdygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHRoaXMuY29udGFpbmVyc1t0XS5fdHJpZ2dlcihcImRlYWN0aXZhdGVcIiwgbnVsbCwgdGhpcy5fdWlIYXNoKHRoaXMpKSwgdGhpcy5jb250YWluZXJzW3RdLmNvbnRhaW5lckNhY2hlLm92ZXIgJiYgKHRoaXMuY29udGFpbmVyc1t0XS5fdHJpZ2dlcihcIm91dFwiLCBudWxsLCB0aGlzLl91aUhhc2godGhpcykpLCB0aGlzLmNvbnRhaW5lcnNbdF0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGFjZWhvbGRlciAmJiAodGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlICYmIHRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKSwgXCJvcmlnaW5hbFwiICE9PSB0aGlzLm9wdGlvbnMuaGVscGVyICYmIHRoaXMuaGVscGVyICYmIHRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUgJiYgdGhpcy5oZWxwZXIucmVtb3ZlKCksIGUuZXh0ZW5kKHRoaXMsIHtcbiAgICAgICAgICAgICAgICBoZWxwZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgZHJhZ2dpbmc6ICExLFxuICAgICAgICAgICAgICAgIHJldmVydGluZzogITEsXG4gICAgICAgICAgICAgICAgX25vRmluYWxTb3J0OiBudWxsXG4gICAgICAgICAgICB9KSwgdGhpcy5kb21Qb3NpdGlvbi5wcmV2ID8gZSh0aGlzLmRvbVBvc2l0aW9uLnByZXYpLmFmdGVyKHRoaXMuY3VycmVudEl0ZW0pIDogZSh0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCkucHJlcGVuZCh0aGlzLmN1cnJlbnRJdGVtKSksIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KHQgJiYgdC5jb25uZWN0ZWQpLCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4gdCA9IHQgfHwge30sIGUoaSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAoZSh0Lml0ZW0gfHwgdGhpcykuYXR0cih0LmF0dHJpYnV0ZSB8fCBcImlkXCIpIHx8IFwiXCIpLm1hdGNoKHQuZXhwcmVzc2lvbiB8fCAvKC4rKVtcXC09X10oLispLyk7XG4gICAgICAgICAgICAgICAgaSAmJiBzLnB1c2goKHQua2V5IHx8IGlbMV0gKyBcIltdXCIpICsgXCI9XCIgKyAodC5rZXkgJiYgdC5leHByZXNzaW9uID8gaVsxXSA6IGlbMl0pKVxuICAgICAgICAgICAgfSksICFzLmxlbmd0aCAmJiB0LmtleSAmJiBzLnB1c2godC5rZXkgKyBcIj1cIiksIHMuam9pbihcIiZcIilcbiAgICAgICAgfSxcbiAgICAgICAgdG9BcnJheTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5fZ2V0SXRlbXNBc2pRdWVyeSh0ICYmIHQuY29ubmVjdGVkKSwgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHQgPSB0IHx8IHt9LCBpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHMucHVzaChlKHQuaXRlbSB8fCB0aGlzKS5hdHRyKHQuYXR0cmlidXRlIHx8IFwiaWRcIikgfHwgXCJcIilcbiAgICAgICAgICAgIH0pLCBzXG4gICAgICAgIH0sXG4gICAgICAgIF9pbnRlcnNlY3RzV2l0aDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5wb3NpdGlvbkFicy5sZWZ0LCBpID0gdCArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsIHMgPSB0aGlzLnBvc2l0aW9uQWJzLnRvcCxcbiAgICAgICAgICAgICAgICBuID0gcyArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LCBhID0gZS5sZWZ0LCBvID0gYSArIGUud2lkdGgsIHIgPSBlLnRvcCwgaCA9IHIgKyBlLmhlaWdodCxcbiAgICAgICAgICAgICAgICBsID0gdGhpcy5vZmZzZXQuY2xpY2sudG9wLCB1ID0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCxcbiAgICAgICAgICAgICAgICBkID0gXCJ4XCIgPT09IHRoaXMub3B0aW9ucy5heGlzIHx8IHMgKyBsID4gciAmJiBoID4gcyArIGwsXG4gICAgICAgICAgICAgICAgYyA9IFwieVwiID09PSB0aGlzLm9wdGlvbnMuYXhpcyB8fCB0ICsgdSA+IGEgJiYgbyA+IHQgKyB1LCBwID0gZCAmJiBjO1xuICAgICAgICAgICAgcmV0dXJuIFwicG9pbnRlclwiID09PSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlIHx8IHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzIHx8IFwicG9pbnRlclwiICE9PSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlICYmIHRoaXMuaGVscGVyUHJvcG9ydGlvbnNbdGhpcy5mbG9hdGluZyA/IFwid2lkdGhcIiA6IFwiaGVpZ2h0XCJdID4gZVt0aGlzLmZsb2F0aW5nID8gXCJ3aWR0aFwiIDogXCJoZWlnaHRcIl0gPyBwIDogdCArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyID4gYSAmJiBvID4gaSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyICYmIHMgKyB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIgPiByICYmIGggPiBuIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyXG4gICAgICAgIH0sXG4gICAgICAgIF9pbnRlcnNlY3RzV2l0aFBvaW50ZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IFwieFwiID09PSB0aGlzLm9wdGlvbnMuYXhpcyB8fCB0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wLCBlLnRvcCwgZS5oZWlnaHQpLFxuICAgICAgICAgICAgICAgIGkgPSBcInlcIiA9PT0gdGhpcy5vcHRpb25zLmF4aXMgfHwgdGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQgKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0LCBlLmxlZnQsIGUud2lkdGgpLFxuICAgICAgICAgICAgICAgIHMgPSB0ICYmIGksIG4gPSB0aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSwgYSA9IHRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gcyA/IHRoaXMuZmxvYXRpbmcgPyBhICYmIFwicmlnaHRcIiA9PT0gYSB8fCBcImRvd25cIiA9PT0gbiA/IDIgOiAxIDogbiAmJiAoXCJkb3duXCIgPT09IG4gPyAyIDogMSkgOiAhMVxuICAgICAgICB9LFxuICAgICAgICBfaW50ZXJzZWN0c1dpdGhTaWRlczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCwgZS50b3AgKyBlLmhlaWdodCAvIDIsIGUuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICBpID0gdGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQgKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0LCBlLmxlZnQgKyBlLndpZHRoIC8gMiwgZS53aWR0aCksXG4gICAgICAgICAgICAgICAgcyA9IHRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLCBuID0gdGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZsb2F0aW5nICYmIG4gPyBcInJpZ2h0XCIgPT09IG4gJiYgaSB8fCBcImxlZnRcIiA9PT0gbiAmJiAhaSA6IHMgJiYgKFwiZG93blwiID09PSBzICYmIHQgfHwgXCJ1cFwiID09PSBzICYmICF0KVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMucG9zaXRpb25BYnMudG9wIC0gdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO1xuICAgICAgICAgICAgcmV0dXJuIDAgIT09IGUgJiYgKGUgPiAwID8gXCJkb3duXCIgOiBcInVwXCIpXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnBvc2l0aW9uQWJzLmxlZnQgLSB0aGlzLmxhc3RQb3NpdGlvbkFicy5sZWZ0O1xuICAgICAgICAgICAgcmV0dXJuIDAgIT09IGUgJiYgKGUgPiAwID8gXCJyaWdodFwiIDogXCJsZWZ0XCIpXG4gICAgICAgIH0sXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVmcmVzaEl0ZW1zKGUpLCB0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKSwgdGhpcy5yZWZyZXNoUG9zaXRpb25zKCksIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgX2Nvbm5lY3RXaXRoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBlLmNvbm5lY3RXaXRoLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgPyBbZS5jb25uZWN0V2l0aF0gOiBlLmNvbm5lY3RXaXRoXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRJdGVtc0FzalF1ZXJ5OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gaSgpIHtcbiAgICAgICAgICAgICAgICByLnB1c2godGhpcylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHMsIG4sIGEsIG8sIHIgPSBbXSwgaCA9IFtdLCBsID0gdGhpcy5fY29ubmVjdFdpdGgoKTtcbiAgICAgICAgICAgIGlmIChsICYmIHQpIGZvciAocyA9IGwubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIGZvciAoYSA9IGUobFtzXSksIG4gPSBhLmxlbmd0aCAtIDE7IG4gPj0gMDsgbi0tKSBvID0gZS5kYXRhKGFbbl0sIHRoaXMud2lkZ2V0RnVsbE5hbWUpLCBvICYmIG8gIT09IHRoaXMgJiYgIW8ub3B0aW9ucy5kaXNhYmxlZCAmJiBoLnB1c2goW2UuaXNGdW5jdGlvbihvLm9wdGlvbnMuaXRlbXMpID8gby5vcHRpb25zLml0ZW1zLmNhbGwoby5lbGVtZW50KSA6IGUoby5vcHRpb25zLml0ZW1zLCBvLmVsZW1lbnQpLm5vdChcIi51aS1zb3J0YWJsZS1oZWxwZXJcIikubm90KFwiLnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIpLCBvXSk7XG4gICAgICAgICAgICBmb3IgKGgucHVzaChbZS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcykgPyB0aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnQsIG51bGwsIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaXRlbTogdGhpcy5jdXJyZW50SXRlbVxuICAgICAgICAgICAgfSkgOiBlKHRoaXMub3B0aW9ucy5pdGVtcywgdGhpcy5lbGVtZW50KS5ub3QoXCIudWktc29ydGFibGUtaGVscGVyXCIpLm5vdChcIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlclwiKSwgdGhpc10pLCBzID0gaC5sZW5ndGggLSAxOyBzID49IDA7IHMtLSkgaFtzXVswXS5lYWNoKGkpO1xuICAgICAgICAgICAgcmV0dXJuIGUocilcbiAgICAgICAgfSxcbiAgICAgICAgX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuY3VycmVudEl0ZW0uZmluZChcIjpkYXRhKFwiICsgdGhpcy53aWRnZXROYW1lICsgXCItaXRlbSlcIik7XG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gZS5ncmVwKHRoaXMuaXRlbXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IHQubGVuZ3RoID4gaTsgaSsrKSBpZiAodFtpXSA9PT0gZS5pdGVtWzBdKSByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfcmVmcmVzaEl0ZW1zOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdGhpcy5pdGVtcyA9IFtdLCB0aGlzLmNvbnRhaW5lcnMgPSBbdGhpc107XG4gICAgICAgICAgICB2YXIgaSwgcywgbiwgYSwgbywgciwgaCwgbCwgdSA9IHRoaXMuaXRlbXMsXG4gICAgICAgICAgICAgICAgZCA9IFtbZS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcykgPyB0aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnRbMF0sIHQsIHtpdGVtOiB0aGlzLmN1cnJlbnRJdGVtfSkgOiBlKHRoaXMub3B0aW9ucy5pdGVtcywgdGhpcy5lbGVtZW50KSwgdGhpc11dLFxuICAgICAgICAgICAgICAgIGMgPSB0aGlzLl9jb25uZWN0V2l0aCgpO1xuICAgICAgICAgICAgaWYgKGMgJiYgdGhpcy5yZWFkeSkgZm9yIChpID0gYy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgZm9yIChuID0gZShjW2ldKSwgcyA9IG4ubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIGEgPSBlLmRhdGEobltzXSwgdGhpcy53aWRnZXRGdWxsTmFtZSksIGEgJiYgYSAhPT0gdGhpcyAmJiAhYS5vcHRpb25zLmRpc2FibGVkICYmIChkLnB1c2goW2UuaXNGdW5jdGlvbihhLm9wdGlvbnMuaXRlbXMpID8gYS5vcHRpb25zLml0ZW1zLmNhbGwoYS5lbGVtZW50WzBdLCB0LCB7aXRlbTogdGhpcy5jdXJyZW50SXRlbX0pIDogZShhLm9wdGlvbnMuaXRlbXMsIGEuZWxlbWVudCksIGFdKSwgdGhpcy5jb250YWluZXJzLnB1c2goYSkpO1xuICAgICAgICAgICAgZm9yIChpID0gZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgZm9yIChvID0gZFtpXVsxXSwgciA9IGRbaV1bMF0sIHMgPSAwLCBsID0gci5sZW5ndGg7IGwgPiBzOyBzKyspIGggPSBlKHJbc10pLCBoLmRhdGEodGhpcy53aWRnZXROYW1lICsgXCItaXRlbVwiLCBvKSwgdS5wdXNoKHtcbiAgICAgICAgICAgICAgICBpdGVtOiBoLFxuICAgICAgICAgICAgICAgIGluc3RhbmNlOiBvLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIHRvcDogMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgcmVmcmVzaFBvc2l0aW9uczogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0UGFyZW50ICYmIHRoaXMuaGVscGVyICYmICh0aGlzLm9mZnNldC5wYXJlbnQgPSB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSk7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiwgYTtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHMgPSB0aGlzLml0ZW1zW2ldLCBzLmluc3RhbmNlICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIgJiYgdGhpcy5jdXJyZW50Q29udGFpbmVyICYmIHMuaXRlbVswXSAhPT0gdGhpcy5jdXJyZW50SXRlbVswXSB8fCAobiA9IHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50ID8gZSh0aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudCwgcy5pdGVtKSA6IHMuaXRlbSwgdCB8fCAocy53aWR0aCA9IG4ub3V0ZXJXaWR0aCgpLCBzLmhlaWdodCA9IG4ub3V0ZXJIZWlnaHQoKSksIGEgPSBuLm9mZnNldCgpLCBzLmxlZnQgPSBhLmxlZnQsIHMudG9wID0gYS50b3ApO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jdXN0b20gJiYgdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycykgdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycy5jYWxsKHRoaXMpOyBlbHNlIGZvciAoaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgYSA9IHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm9mZnNldCgpLCB0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUubGVmdCA9IGEubGVmdCwgdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLnRvcCA9IGEudG9wLCB0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUud2lkdGggPSB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlcldpZHRoKCksIHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5oZWlnaHQgPSB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgX2NyZWF0ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdCA9IHQgfHwgdGhpcztcbiAgICAgICAgICAgIHZhciBpLCBzID0gdC5vcHRpb25zO1xuICAgICAgICAgICAgcy5wbGFjZWhvbGRlciAmJiBzLnBsYWNlaG9sZGVyLmNvbnN0cnVjdG9yICE9PSBTdHJpbmcgfHwgKGkgPSBzLnBsYWNlaG9sZGVyLCBzLnBsYWNlaG9sZGVyID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0LmN1cnJlbnRJdGVtWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gZShcIjxcIiArIHMgKyBcIj5cIiwgdC5kb2N1bWVudFswXSkuYWRkQ2xhc3MoaSB8fCB0LmN1cnJlbnRJdGVtWzBdLmNsYXNzTmFtZSArIFwiIHVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIpLnJlbW92ZUNsYXNzKFwidWktc29ydGFibGUtaGVscGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0clwiID09PSBzID8gdC5jdXJyZW50SXRlbS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZShcIjx0ZD4mIzE2MDs8L3RkPlwiLCB0LmRvY3VtZW50WzBdKS5hdHRyKFwiY29sc3BhblwiLCBlKHRoaXMpLmF0dHIoXCJjb2xzcGFuXCIpIHx8IDEpLmFwcGVuZFRvKG4pXG4gICAgICAgICAgICAgICAgICAgIH0pIDogXCJpbWdcIiA9PT0gcyAmJiBuLmF0dHIoXCJzcmNcIiwgdC5jdXJyZW50SXRlbS5hdHRyKFwic3JjXCIpKSwgaSB8fCBuLmNzcyhcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIiksIG5cbiAgICAgICAgICAgICAgICB9LCB1cGRhdGU6IGZ1bmN0aW9uIChlLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICghaSB8fCBzLmZvcmNlUGxhY2Vob2xkZXJTaXplKSAmJiAobi5oZWlnaHQoKSB8fCBuLmhlaWdodCh0LmN1cnJlbnRJdGVtLmlubmVySGVpZ2h0KCkgLSBwYXJzZUludCh0LmN1cnJlbnRJdGVtLmNzcyhcInBhZGRpbmdUb3BcIikgfHwgMCwgMTApIC0gcGFyc2VJbnQodC5jdXJyZW50SXRlbS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpIHx8IDAsIDEwKSksIG4ud2lkdGgoKSB8fCBuLndpZHRoKHQuY3VycmVudEl0ZW0uaW5uZXJXaWR0aCgpIC0gcGFyc2VJbnQodC5jdXJyZW50SXRlbS5jc3MoXCJwYWRkaW5nTGVmdFwiKSB8fCAwLCAxMCkgLSBwYXJzZUludCh0LmN1cnJlbnRJdGVtLmNzcyhcInBhZGRpbmdSaWdodFwiKSB8fCAwLCAxMCkpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCB0LnBsYWNlaG9sZGVyID0gZShzLnBsYWNlaG9sZGVyLmVsZW1lbnQuY2FsbCh0LmVsZW1lbnQsIHQuY3VycmVudEl0ZW0pKSwgdC5jdXJyZW50SXRlbS5hZnRlcih0LnBsYWNlaG9sZGVyKSwgcy5wbGFjZWhvbGRlci51cGRhdGUodCwgdC5wbGFjZWhvbGRlcilcbiAgICAgICAgfSxcbiAgICAgICAgX2NvbnRhY3RDb250YWluZXJzOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMsIG4sIGEsIG8sIHIsIGgsIGwsIHUsIGQsIGMgPSBudWxsLCBwID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKCFlLmNvbnRhaW5zKHRoaXMuY3VycmVudEl0ZW1bMF0sIHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdKSkgaWYgKHRoaXMuX2ludGVyc2VjdHNXaXRoKHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYyAmJiBlLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdLCBjLmVsZW1lbnRbMF0pKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjID0gdGhpcy5jb250YWluZXJzW2ldLCBwID0gaVxuICAgICAgICAgICAgfSBlbHNlIHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyICYmICh0aGlzLmNvbnRhaW5lcnNbaV0uX3RyaWdnZXIoXCJvdXRcIiwgdCwgdGhpcy5fdWlIYXNoKHRoaXMpKSwgdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAwKTtcbiAgICAgICAgICAgIGlmIChjKSBpZiAoMSA9PT0gdGhpcy5jb250YWluZXJzLmxlbmd0aCkgdGhpcy5jb250YWluZXJzW3BdLmNvbnRhaW5lckNhY2hlLm92ZXIgfHwgKHRoaXMuY29udGFpbmVyc1twXS5fdHJpZ2dlcihcIm92ZXJcIiwgdCwgdGhpcy5fdWlIYXNoKHRoaXMpKSwgdGhpcy5jb250YWluZXJzW3BdLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAxKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChuID0gMWU0LCBhID0gbnVsbCwgdSA9IGMuZmxvYXRpbmcgfHwgdGhpcy5faXNGbG9hdGluZyh0aGlzLmN1cnJlbnRJdGVtKSwgbyA9IHUgPyBcImxlZnRcIiA6IFwidG9wXCIsIHIgPSB1ID8gXCJ3aWR0aFwiIDogXCJoZWlnaHRcIiwgZCA9IHUgPyBcImNsaWVudFhcIiA6IFwiY2xpZW50WVwiLCBzID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBzID49IDA7IHMtLSkgZS5jb250YWlucyh0aGlzLmNvbnRhaW5lcnNbcF0uZWxlbWVudFswXSwgdGhpcy5pdGVtc1tzXS5pdGVtWzBdKSAmJiB0aGlzLml0ZW1zW3NdLml0ZW1bMF0gIT09IHRoaXMuY3VycmVudEl0ZW1bMF0gJiYgKGggPSB0aGlzLml0ZW1zW3NdLml0ZW0ub2Zmc2V0KClbb10sIGwgPSAhMSwgdFtkXSAtIGggPiB0aGlzLml0ZW1zW3NdW3JdIC8gMiAmJiAobCA9ICEwKSwgbiA+IE1hdGguYWJzKHRbZF0gLSBoKSAmJiAobiA9IE1hdGguYWJzKHRbZF0gLSBoKSwgYSA9IHRoaXMuaXRlbXNbc10sIHRoaXMuZGlyZWN0aW9uID0gbCA/IFwidXBcIiA6IFwiZG93blwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFhICYmICF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q29udGFpbmVyID09PSB0aGlzLmNvbnRhaW5lcnNbcF0pIHJldHVybiB0aGlzLmN1cnJlbnRDb250YWluZXIuY29udGFpbmVyQ2FjaGUub3ZlciB8fCAodGhpcy5jb250YWluZXJzW3BdLl90cmlnZ2VyKFwib3ZlclwiLCB0LCB0aGlzLl91aUhhc2goKSksIHRoaXMuY3VycmVudENvbnRhaW5lci5jb250YWluZXJDYWNoZS5vdmVyID0gMSksIHZvaWQgMDtcbiAgICAgICAgICAgICAgICBhID8gdGhpcy5fcmVhcnJhbmdlKHQsIGEsIG51bGwsICEwKSA6IHRoaXMuX3JlYXJyYW5nZSh0LCBudWxsLCB0aGlzLmNvbnRhaW5lcnNbcF0uZWxlbWVudCwgITApLCB0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsIHQsIHRoaXMuX3VpSGFzaCgpKSwgdGhpcy5jb250YWluZXJzW3BdLl90cmlnZ2VyKFwiY2hhbmdlXCIsIHQsIHRoaXMuX3VpSGFzaCh0aGlzKSksIHRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1twXSwgdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGlzLmN1cnJlbnRDb250YWluZXIsIHRoaXMucGxhY2Vob2xkZXIpLCB0aGlzLmNvbnRhaW5lcnNbcF0uX3RyaWdnZXIoXCJvdmVyXCIsIHQsIHRoaXMuX3VpSGFzaCh0aGlzKSksIHRoaXMuY29udGFpbmVyc1twXS5jb250YWluZXJDYWNoZS5vdmVyID0gMVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlSGVscGVyOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgcyA9IGUuaXNGdW5jdGlvbihpLmhlbHBlcikgPyBlKGkuaGVscGVyLmFwcGx5KHRoaXMuZWxlbWVudFswXSwgW3QsIHRoaXMuY3VycmVudEl0ZW1dKSkgOiBcImNsb25lXCIgPT09IGkuaGVscGVyID8gdGhpcy5jdXJyZW50SXRlbS5jbG9uZSgpIDogdGhpcy5jdXJyZW50SXRlbTtcbiAgICAgICAgICAgIHJldHVybiBzLnBhcmVudHMoXCJib2R5XCIpLmxlbmd0aCB8fCBlKFwicGFyZW50XCIgIT09IGkuYXBwZW5kVG8gPyBpLmFwcGVuZFRvIDogdGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlKVswXS5hcHBlbmRDaGlsZChzWzBdKSwgc1swXSA9PT0gdGhpcy5jdXJyZW50SXRlbVswXSAmJiAodGhpcy5fc3RvcmVkQ1NTID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5jdXJyZW50SXRlbVswXS5zdHlsZS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMuY3VycmVudEl0ZW0uY3NzKFwicG9zaXRpb25cIiksXG4gICAgICAgICAgICAgICAgdG9wOiB0aGlzLmN1cnJlbnRJdGVtLmNzcyhcInRvcFwiKSxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLmN1cnJlbnRJdGVtLmNzcyhcImxlZnRcIilcbiAgICAgICAgICAgIH0pLCAoIXNbMF0uc3R5bGUud2lkdGggfHwgaS5mb3JjZUhlbHBlclNpemUpICYmIHMud2lkdGgodGhpcy5jdXJyZW50SXRlbS53aWR0aCgpKSwgKCFzWzBdLnN0eWxlLmhlaWdodCB8fCBpLmZvcmNlSGVscGVyU2l6ZSkgJiYgcy5oZWlnaHQodGhpcy5jdXJyZW50SXRlbS5oZWlnaHQoKSksIHNcbiAgICAgICAgfSxcbiAgICAgICAgX2FkanVzdE9mZnNldEZyb21IZWxwZXI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmICh0ID0gdC5zcGxpdChcIiBcIikpLCBlLmlzQXJyYXkodCkgJiYgKHQgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogK3RbMF0sXG4gICAgICAgICAgICAgICAgdG9wOiArdFsxXSB8fCAwXG4gICAgICAgICAgICB9KSwgXCJsZWZ0XCIgaW4gdCAmJiAodGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IHQubGVmdCArIHRoaXMubWFyZ2lucy5sZWZ0KSwgXCJyaWdodFwiIGluIHQgJiYgKHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gdC5yaWdodCArIHRoaXMubWFyZ2lucy5sZWZ0KSwgXCJ0b3BcIiBpbiB0ICYmICh0aGlzLm9mZnNldC5jbGljay50b3AgPSB0LnRvcCArIHRoaXMubWFyZ2lucy50b3ApLCBcImJvdHRvbVwiIGluIHQgJiYgKHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdC5ib3R0b20gKyB0aGlzLm1hcmdpbnMudG9wKVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0UGFyZW50T2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldFBhcmVudCA9IHRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpO1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtcbiAgICAgICAgICAgIHJldHVybiBcImFic29sdXRlXCIgPT09IHRoaXMuY3NzUG9zaXRpb24gJiYgdGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIGUuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSAmJiAodC5sZWZ0ICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSwgdC50b3AgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCkpLCAodGhpcy5vZmZzZXRQYXJlbnRbMF0gPT09IGRvY3VtZW50LmJvZHkgfHwgdGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZSAmJiBcImh0bWxcIiA9PT0gdGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpICYmIGUudWkuaWUpICYmICh0ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgIHRvcDogdC50b3AgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksIDEwKSB8fCAwKSxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0LmxlZnQgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLCAxMCkgfHwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoXCJyZWxhdGl2ZVwiID09PSB0aGlzLmNzc1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmN1cnJlbnRJdGVtLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBlLnRvcCAtIChwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoXCJ0b3BcIiksIDEwKSB8fCAwKSArIHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBlLmxlZnQgLSAocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKFwibGVmdFwiKSwgMTApIHx8IDApICsgdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHt0b3A6IDAsIGxlZnQ6IDB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jYWNoZU1hcmdpbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubWFyZ2lucyA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcyhcIm1hcmdpbkxlZnRcIiksIDEwKSB8fCAwLFxuICAgICAgICAgICAgICAgIHRvcDogcGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoXCJtYXJnaW5Ub3BcIiksIDEwKSB8fCAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jYWNoZUhlbHBlclByb3BvcnRpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlbHBlclByb3BvcnRpb25zID0ge3dpZHRoOiB0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksIGhlaWdodDogdGhpcy5oZWxwZXIub3V0ZXJIZWlnaHQoKX1cbiAgICAgICAgfSxcbiAgICAgICAgX3NldENvbnRhaW5tZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSwgcywgbiA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIFwicGFyZW50XCIgPT09IG4uY29udGFpbm1lbnQgJiYgKG4uY29udGFpbm1lbnQgPSB0aGlzLmhlbHBlclswXS5wYXJlbnROb2RlKSwgKFwiZG9jdW1lbnRcIiA9PT0gbi5jb250YWlubWVudCB8fCBcIndpbmRvd1wiID09PSBuLmNvbnRhaW5tZW50KSAmJiAodGhpcy5jb250YWlubWVudCA9IFswIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LCAwIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCwgZShcImRvY3VtZW50XCIgPT09IG4uY29udGFpbm1lbnQgPyBkb2N1bWVudCA6IHdpbmRvdykud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwgKGUoXCJkb2N1bWVudFwiID09PSBuLmNvbnRhaW5tZW50ID8gZG9jdW1lbnQgOiB3aW5kb3cpLmhlaWdodCgpIHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wXSksIC9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8udGVzdChuLmNvbnRhaW5tZW50KSB8fCAodCA9IGUobi5jb250YWlubWVudClbMF0sIGkgPSBlKG4uY29udGFpbm1lbnQpLm9mZnNldCgpLCBzID0gXCJoaWRkZW5cIiAhPT0gZSh0KS5jc3MoXCJvdmVyZmxvd1wiKSwgdGhpcy5jb250YWlubWVudCA9IFtpLmxlZnQgKyAocGFyc2VJbnQoZSh0KS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksIDEwKSB8fCAwKSArIChwYXJzZUludChlKHQpLmNzcyhcInBhZGRpbmdMZWZ0XCIpLCAxMCkgfHwgMCkgLSB0aGlzLm1hcmdpbnMubGVmdCwgaS50b3AgKyAocGFyc2VJbnQoZSh0KS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwgMTApIHx8IDApICsgKHBhcnNlSW50KGUodCkuY3NzKFwicGFkZGluZ1RvcFwiKSwgMTApIHx8IDApIC0gdGhpcy5tYXJnaW5zLnRvcCwgaS5sZWZ0ICsgKHMgPyBNYXRoLm1heCh0LnNjcm9sbFdpZHRoLCB0Lm9mZnNldFdpZHRoKSA6IHQub2Zmc2V0V2lkdGgpIC0gKHBhcnNlSW50KGUodCkuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLCAxMCkgfHwgMCkgLSAocGFyc2VJbnQoZSh0KS5jc3MoXCJwYWRkaW5nUmlnaHRcIiksIDEwKSB8fCAwKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwgaS50b3AgKyAocyA/IE1hdGgubWF4KHQuc2Nyb2xsSGVpZ2h0LCB0Lm9mZnNldEhlaWdodCkgOiB0Lm9mZnNldEhlaWdodCkgLSAocGFyc2VJbnQoZSh0KS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwgMTApIHx8IDApIC0gKHBhcnNlSW50KGUodCkuY3NzKFwicGFkZGluZ0JvdHRvbVwiKSwgMTApIHx8IDApIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wXSlcbiAgICAgICAgfSxcbiAgICAgICAgX2NvbnZlcnRQb3NpdGlvblRvOiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgaSB8fCAoaSA9IHRoaXMucG9zaXRpb24pO1xuICAgICAgICAgICAgdmFyIHMgPSBcImFic29sdXRlXCIgPT09IHQgPyAxIDogLTEsXG4gICAgICAgICAgICAgICAgbiA9IFwiYWJzb2x1dGVcIiAhPT0gdGhpcy5jc3NQb3NpdGlvbiB8fCB0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gZG9jdW1lbnQgJiYgZS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSwgdGhpcy5vZmZzZXRQYXJlbnRbMF0pID8gdGhpcy5zY3JvbGxQYXJlbnQgOiB0aGlzLm9mZnNldFBhcmVudCxcbiAgICAgICAgICAgICAgICBhID0gLyhodG1sfGJvZHkpL2kudGVzdChuWzBdLnRhZ05hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6IGkudG9wICsgdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wICogcyArIHRoaXMub2Zmc2V0LnBhcmVudC50b3AgKiBzIC0gKFwiZml4ZWRcIiA9PT0gdGhpcy5jc3NQb3NpdGlvbiA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6IGEgPyAwIDogbi5zY3JvbGxUb3AoKSkgKiBzLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGkubGVmdCArIHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgKiBzICsgdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKiBzIC0gKFwiZml4ZWRcIiA9PT0gdGhpcy5jc3NQb3NpdGlvbiA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkgOiBhID8gMCA6IG4uc2Nyb2xsTGVmdCgpKSAqIHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2dlbmVyYXRlUG9zaXRpb246IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcywgbiA9IHRoaXMub3B0aW9ucywgYSA9IHQucGFnZVgsIG8gPSB0LnBhZ2VZLFxuICAgICAgICAgICAgICAgIHIgPSBcImFic29sdXRlXCIgIT09IHRoaXMuY3NzUG9zaXRpb24gfHwgdGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIGUuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSA/IHRoaXMuc2Nyb2xsUGFyZW50IDogdGhpcy5vZmZzZXRQYXJlbnQsXG4gICAgICAgICAgICAgICAgaCA9IC8oaHRtbHxib2R5KS9pLnRlc3QoclswXS50YWdOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBcInJlbGF0aXZlXCIgIT09IHRoaXMuY3NzUG9zaXRpb24gfHwgdGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9PSB0aGlzLm9mZnNldFBhcmVudFswXSB8fCAodGhpcy5vZmZzZXQucmVsYXRpdmUgPSB0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpKSwgdGhpcy5vcmlnaW5hbFBvc2l0aW9uICYmICh0aGlzLmNvbnRhaW5tZW50ICYmICh0LnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IHRoaXMuY29udGFpbm1lbnRbMF0gJiYgKGEgPSB0aGlzLmNvbnRhaW5tZW50WzBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdCksIHQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPCB0aGlzLmNvbnRhaW5tZW50WzFdICYmIChvID0gdGhpcy5jb250YWlubWVudFsxXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCksIHQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gdGhpcy5jb250YWlubWVudFsyXSAmJiAoYSA9IHRoaXMuY29udGFpbm1lbnRbMl0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0KSwgdC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IHRoaXMuY29udGFpbm1lbnRbM10gJiYgKG8gPSB0aGlzLmNvbnRhaW5tZW50WzNdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wKSksIG4uZ3JpZCAmJiAoaSA9IHRoaXMub3JpZ2luYWxQYWdlWSArIE1hdGgucm91bmQoKG8gLSB0aGlzLm9yaWdpbmFsUGFnZVkpIC8gbi5ncmlkWzFdKSAqIG4uZ3JpZFsxXSwgbyA9IHRoaXMuY29udGFpbm1lbnQgPyBpIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID49IHRoaXMuY29udGFpbm1lbnRbMV0gJiYgaSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA8PSB0aGlzLmNvbnRhaW5tZW50WzNdID8gaSA6IGkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPj0gdGhpcy5jb250YWlubWVudFsxXSA/IGkgLSBuLmdyaWRbMV0gOiBpICsgbi5ncmlkWzFdIDogaSwgcyA9IHRoaXMub3JpZ2luYWxQYWdlWCArIE1hdGgucm91bmQoKGEgLSB0aGlzLm9yaWdpbmFsUGFnZVgpIC8gbi5ncmlkWzBdKSAqIG4uZ3JpZFswXSwgYSA9IHRoaXMuY29udGFpbm1lbnQgPyBzIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA+PSB0aGlzLmNvbnRhaW5tZW50WzBdICYmIHMgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0IDw9IHRoaXMuY29udGFpbm1lbnRbMl0gPyBzIDogcyAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPj0gdGhpcy5jb250YWlubWVudFswXSA/IHMgLSBuLmdyaWRbMF0gOiBzICsgbi5ncmlkWzBdIDogcykpLCB7XG4gICAgICAgICAgICAgICAgdG9wOiBvIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCArIChcImZpeGVkXCIgPT09IHRoaXMuY3NzUG9zaXRpb24gPyAtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCkgOiBoID8gMCA6IHIuc2Nyb2xsVG9wKCkpLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGEgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0IC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICsgKFwiZml4ZWRcIiA9PT0gdGhpcy5jc3NQb3NpdGlvbiA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkgOiBoID8gMCA6IHIuc2Nyb2xsTGVmdCgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfcmVhcnJhbmdlOiBmdW5jdGlvbiAoZSwgdCwgaSwgcykge1xuICAgICAgICAgICAgaSA/IGlbMF0uYXBwZW5kQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSkgOiB0Lml0ZW1bMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5wbGFjZWhvbGRlclswXSwgXCJkb3duXCIgPT09IHRoaXMuZGlyZWN0aW9uID8gdC5pdGVtWzBdIDogdC5pdGVtWzBdLm5leHRTaWJsaW5nKSwgdGhpcy5jb3VudGVyID0gdGhpcy5jb3VudGVyID8gKyt0aGlzLmNvdW50ZXIgOiAxO1xuICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmNvdW50ZXI7XG4gICAgICAgICAgICB0aGlzLl9kZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbiA9PT0gdGhpcy5jb3VudGVyICYmIHRoaXMucmVmcmVzaFBvc2l0aW9ucyghcylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIF9jbGVhcjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGkoZSwgdCwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgICAgICBpLl90cmlnZ2VyKGUsIHMsIHQuX3VpSGFzaCh0KSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmV2ZXJ0aW5nID0gITE7XG4gICAgICAgICAgICB2YXIgcywgbiA9IFtdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9ub0ZpbmFsU29ydCAmJiB0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpLmxlbmd0aCAmJiB0aGlzLnBsYWNlaG9sZGVyLmJlZm9yZSh0aGlzLmN1cnJlbnRJdGVtKSwgdGhpcy5fbm9GaW5hbFNvcnQgPSBudWxsLCB0aGlzLmhlbHBlclswXSA9PT0gdGhpcy5jdXJyZW50SXRlbVswXSkge1xuICAgICAgICAgICAgICAgIGZvciAocyBpbiB0aGlzLl9zdG9yZWRDU1MpIChcImF1dG9cIiA9PT0gdGhpcy5fc3RvcmVkQ1NTW3NdIHx8IFwic3RhdGljXCIgPT09IHRoaXMuX3N0b3JlZENTU1tzXSkgJiYgKHRoaXMuX3N0b3JlZENTU1tzXSA9IFwiXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUykucmVtb3ZlQ2xhc3MoXCJ1aS1zb3J0YWJsZS1oZWxwZXJcIilcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtcbiAgICAgICAgICAgIGZvciAodGhpcy5mcm9tT3V0c2lkZSAmJiAhdCAmJiBuLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmlnZ2VyKFwicmVjZWl2ZVwiLCBlLCB0aGlzLl91aUhhc2godGhpcy5mcm9tT3V0c2lkZSkpXG4gICAgICAgICAgICB9KSwgIXRoaXMuZnJvbU91dHNpZGUgJiYgdGhpcy5kb21Qb3NpdGlvbi5wcmV2ID09PSB0aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoXCIudWktc29ydGFibGUtaGVscGVyXCIpWzBdICYmIHRoaXMuZG9tUG9zaXRpb24ucGFyZW50ID09PSB0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdIHx8IHQgfHwgbi5wdXNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlcihcInVwZGF0ZVwiLCBlLCB0aGlzLl91aUhhc2goKSlcbiAgICAgICAgICAgIH0pLCB0aGlzICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIgJiYgKHQgfHwgKG4ucHVzaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyaWdnZXIoXCJyZW1vdmVcIiwgZSwgdGhpcy5fdWlIYXNoKCkpXG4gICAgICAgICAgICB9KSwgbi5wdXNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGUuX3RyaWdnZXIoXCJyZWNlaXZlXCIsIHQsIHRoaXMuX3VpSGFzaCh0aGlzKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmNhbGwodGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyKSksIG4ucHVzaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICBlLl90cmlnZ2VyKFwidXBkYXRlXCIsIHQsIHRoaXMuX3VpSGFzaCh0aGlzKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmNhbGwodGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyKSkpKSwgcyA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBzID49IDA7IHMtLSkgdCB8fCBuLnB1c2goaShcImRlYWN0aXZhdGVcIiwgdGhpcywgdGhpcy5jb250YWluZXJzW3NdKSksIHRoaXMuY29udGFpbmVyc1tzXS5jb250YWluZXJDYWNoZS5vdmVyICYmIChuLnB1c2goaShcIm91dFwiLCB0aGlzLCB0aGlzLmNvbnRhaW5lcnNbc10pKSwgdGhpcy5jb250YWluZXJzW3NdLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAwKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3JlZEN1cnNvciAmJiAodGhpcy5kb2N1bWVudC5maW5kKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIiwgdGhpcy5zdG9yZWRDdXJzb3IpLCB0aGlzLnN0b3JlZFN0eWxlc2hlZXQucmVtb3ZlKCkpLCB0aGlzLl9zdG9yZWRPcGFjaXR5ICYmIHRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIiwgdGhpcy5fc3RvcmVkT3BhY2l0eSksIHRoaXMuX3N0b3JlZFpJbmRleCAmJiB0aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIiwgXCJhdXRvXCIgPT09IHRoaXMuX3N0b3JlZFpJbmRleCA/IFwiXCIgOiB0aGlzLl9zdG9yZWRaSW5kZXgpLCB0aGlzLmRyYWdnaW5nID0gITEsIHQgfHwgdGhpcy5fdHJpZ2dlcihcImJlZm9yZVN0b3BcIiwgZSwgdGhpcy5fdWlIYXNoKCkpLCB0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSksIHRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCB8fCAodGhpcy5oZWxwZXJbMF0gIT09IHRoaXMuY3VycmVudEl0ZW1bMF0gJiYgdGhpcy5oZWxwZXIucmVtb3ZlKCksIHRoaXMuaGVscGVyID0gbnVsbCksICF0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChzID0gMDsgbi5sZW5ndGggPiBzOyBzKyspIG5bc10uY2FsbCh0aGlzLCBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmlnZ2VyKFwic3RvcFwiLCBlLCB0aGlzLl91aUhhc2goKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21PdXRzaWRlID0gITEsICF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWxcbiAgICAgICAgfSxcbiAgICAgICAgX3RyaWdnZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGUuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpID09PSAhMSAmJiB0aGlzLmNhbmNlbCgpXG4gICAgICAgIH0sXG4gICAgICAgIF91aUhhc2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHQgfHwgdGhpcztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaGVscGVyOiBpLmhlbHBlcixcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaS5wbGFjZWhvbGRlciB8fCBlKFtdKSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogaS5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFBvc2l0aW9uOiBpLm9yaWdpbmFsUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBpLnBvc2l0aW9uQWJzLFxuICAgICAgICAgICAgICAgIGl0ZW06IGkuY3VycmVudEl0ZW0sXG4gICAgICAgICAgICAgICAgc2VuZGVyOiB0ID8gdC5lbGVtZW50IDogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSksIGUud2lkZ2V0KFwidWkuc3Bpbm5lclwiLCB7XG4gICAgICAgIHZlcnNpb246IFwiMS4xMS4yXCIsXG4gICAgICAgIGRlZmF1bHRFbGVtZW50OiBcIjxpbnB1dD5cIixcbiAgICAgICAgd2lkZ2V0RXZlbnRQcmVmaXg6IFwic3BpblwiLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBjdWx0dXJlOiBudWxsLFxuICAgICAgICAgICAgaWNvbnM6IHtkb3duOiBcInVpLWljb24tdHJpYW5nbGUtMS1zXCIsIHVwOiBcInVpLWljb24tdHJpYW5nbGUtMS1uXCJ9LFxuICAgICAgICAgICAgaW5jcmVtZW50YWw6ICEwLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgbWluOiBudWxsLFxuICAgICAgICAgICAgbnVtYmVyRm9ybWF0OiBudWxsLFxuICAgICAgICAgICAgcGFnZTogMTAsXG4gICAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICAgICAgY2hhbmdlOiBudWxsLFxuICAgICAgICAgICAgc3BpbjogbnVsbCxcbiAgICAgICAgICAgIHN0YXJ0OiBudWxsLFxuICAgICAgICAgICAgc3RvcDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRPcHRpb24oXCJtYXhcIiwgdGhpcy5vcHRpb25zLm1heCksIHRoaXMuX3NldE9wdGlvbihcIm1pblwiLCB0aGlzLm9wdGlvbnMubWluKSwgdGhpcy5fc2V0T3B0aW9uKFwic3RlcFwiLCB0aGlzLm9wdGlvbnMuc3RlcCksIFwiXCIgIT09IHRoaXMudmFsdWUoKSAmJiB0aGlzLl92YWx1ZSh0aGlzLmVsZW1lbnQudmFsKCksICEwKSwgdGhpcy5fZHJhdygpLCB0aGlzLl9vbih0aGlzLl9ldmVudHMpLCB0aGlzLl9yZWZyZXNoKCksIHRoaXMuX29uKHRoaXMud2luZG93LCB7XG4gICAgICAgICAgICAgICAgYmVmb3JldW5sb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwiYXV0b2NvbXBsZXRlXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgX2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0ge30sIGkgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gZS5lYWNoKFtcIm1pblwiLCBcIm1heFwiLCBcInN0ZXBcIl0sIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBpLmF0dHIocyk7XG4gICAgICAgICAgICAgICAgdm9pZCAwICE9PSBuICYmIG4ubGVuZ3RoICYmICh0W3NdID0gbilcbiAgICAgICAgICAgIH0pLCB0XG4gICAgICAgIH0sXG4gICAgICAgIF9ldmVudHM6IHtcbiAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhcnQoZSkgJiYgdGhpcy5fa2V5ZG93bihlKSAmJiBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIH0sIGtleXVwOiBcIl9zdG9wXCIsIGZvY3VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91cyA9IHRoaXMuZWxlbWVudC52YWwoKVxuICAgICAgICAgICAgfSwgYmx1cjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWxCbHVyID8gKGRlbGV0ZSB0aGlzLmNhbmNlbEJsdXIsIHZvaWQgMCkgOiAodGhpcy5fc3RvcCgpLCB0aGlzLl9yZWZyZXNoKCksIHRoaXMucHJldmlvdXMgIT09IHRoaXMuZWxlbWVudC52YWwoKSAmJiB0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsIGUpLCB2b2lkIDApXG4gICAgICAgICAgICB9LCBtb3VzZXdoZWVsOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zcGlubmluZyAmJiAhdGhpcy5fc3RhcnQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3BpbigodCA+IDAgPyAxIDogLTEpICogdGhpcy5vcHRpb25zLnN0ZXAsIGUpLCBjbGVhclRpbWVvdXQodGhpcy5tb3VzZXdoZWVsVGltZXIpLCB0aGlzLm1vdXNld2hlZWxUaW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bpbm5pbmcgJiYgdGhpcy5fc3RvcChlKVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApLCBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBcIm1vdXNlZG93biAudWktc3Bpbm5lci1idXR0b25cIjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuZWxlbWVudFswXSA9PT0gdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBlIHx8ICh0aGlzLmVsZW1lbnQuZm9jdXMoKSwgdGhpcy5wcmV2aW91cyA9IHMsIHRoaXMuX2RlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXMgPSBzXG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzO1xuICAgICAgICAgICAgICAgIHMgPSB0aGlzLmVsZW1lbnRbMF0gPT09IHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCA/IHRoaXMucHJldmlvdXMgOiB0aGlzLmVsZW1lbnQudmFsKCksIHQucHJldmVudERlZmF1bHQoKSwgaS5jYWxsKHRoaXMpLCB0aGlzLmNhbmNlbEJsdXIgPSAhMCwgdGhpcy5fZGVsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYW5jZWxCbHVyLCBpLmNhbGwodGhpcylcbiAgICAgICAgICAgICAgICB9KSwgdGhpcy5fc3RhcnQodCkgIT09ICExICYmIHRoaXMuX3JlcGVhdChudWxsLCBlKHQuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoXCJ1aS1zcGlubmVyLXVwXCIpID8gMSA6IC0xLCB0KVxuICAgICAgICAgICAgfSwgXCJtb3VzZXVwIC51aS1zcGlubmVyLWJ1dHRvblwiOiBcIl9zdG9wXCIsIFwibW91c2VlbnRlciAudWktc3Bpbm5lci1idXR0b25cIjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZSh0LmN1cnJlbnRUYXJnZXQpLmhhc0NsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpID8gdGhpcy5fc3RhcnQodCkgPT09ICExID8gITEgOiAodGhpcy5fcmVwZWF0KG51bGwsIGUodC5jdXJyZW50VGFyZ2V0KS5oYXNDbGFzcyhcInVpLXNwaW5uZXItdXBcIikgPyAxIDogLTEsIHQpLCB2b2lkIDApIDogdm9pZCAwXG4gICAgICAgICAgICB9LCBcIm1vdXNlbGVhdmUgLnVpLXNwaW5uZXItYnV0dG9uXCI6IFwiX3N0b3BcIlxuICAgICAgICB9LFxuICAgICAgICBfZHJhdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnVpU3Bpbm5lciA9IHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLXNwaW5uZXItaW5wdXRcIikuYXR0cihcImF1dG9jb21wbGV0ZVwiLCBcIm9mZlwiKS53cmFwKHRoaXMuX3VpU3Bpbm5lckh0bWwoKSkucGFyZW50KCkuYXBwZW5kKHRoaXMuX2J1dHRvbkh0bWwoKSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXR0cihcInJvbGVcIiwgXCJzcGluYnV0dG9uXCIpLCB0aGlzLmJ1dHRvbnMgPSBlLmZpbmQoXCIudWktc3Bpbm5lci1idXR0b25cIikuYXR0cihcInRhYkluZGV4XCIsIC0xKS5idXR0b24oKS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1hbGxcIiksIHRoaXMuYnV0dG9ucy5oZWlnaHQoKSA+IE1hdGguY2VpbCguNSAqIGUuaGVpZ2h0KCkpICYmIGUuaGVpZ2h0KCkgPiAwICYmIGUuaGVpZ2h0KGUuaGVpZ2h0KCkpLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgdGhpcy5kaXNhYmxlKClcbiAgICAgICAgfSxcbiAgICAgICAgX2tleWRvd246IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMub3B0aW9ucywgcyA9IGUudWkua2V5Q29kZTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBzLlVQOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVwZWF0KG51bGwsIDEsIHQpLCAhMDtcbiAgICAgICAgICAgICAgICBjYXNlIHMuRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcGVhdChudWxsLCAtMSwgdCksICEwO1xuICAgICAgICAgICAgICAgIGNhc2Ugcy5QQUdFX1VQOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVwZWF0KG51bGwsIGkucGFnZSwgdCksICEwO1xuICAgICAgICAgICAgICAgIGNhc2Ugcy5QQUdFX0RPV046XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXBlYXQobnVsbCwgLWkucGFnZSwgdCksICEwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITFcbiAgICAgICAgfSxcbiAgICAgICAgX3VpU3Bpbm5lckh0bWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjxzcGFuIGNsYXNzPSd1aS1zcGlubmVyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsJz48L3NwYW4+XCJcbiAgICAgICAgfSxcbiAgICAgICAgX2J1dHRvbkh0bWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjxhIGNsYXNzPSd1aS1zcGlubmVyLWJ1dHRvbiB1aS1zcGlubmVyLXVwIHVpLWNvcm5lci10cic+PHNwYW4gY2xhc3M9J3VpLWljb24gXCIgKyB0aGlzLm9wdGlvbnMuaWNvbnMudXAgKyBcIic+JiM5NjUwOzwvc3Bhbj5cIiArIFwiPC9hPlwiICsgXCI8YSBjbGFzcz0ndWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci1kb3duIHVpLWNvcm5lci1icic+XCIgKyBcIjxzcGFuIGNsYXNzPSd1aS1pY29uIFwiICsgdGhpcy5vcHRpb25zLmljb25zLmRvd24gKyBcIic+JiM5NjYwOzwvc3Bhbj5cIiArIFwiPC9hPlwiXG4gICAgICAgIH0sXG4gICAgICAgIF9zdGFydDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNwaW5uaW5nIHx8IHRoaXMuX3RyaWdnZXIoXCJzdGFydFwiLCBlKSAhPT0gITEgPyAodGhpcy5jb3VudGVyIHx8ICh0aGlzLmNvdW50ZXIgPSAxKSwgdGhpcy5zcGlubmluZyA9ICEwLCAhMCkgOiAhMVxuICAgICAgICB9LFxuICAgICAgICBfcmVwZWF0OiBmdW5jdGlvbiAoZSwgdCwgaSkge1xuICAgICAgICAgICAgZSA9IGUgfHwgNTAwLCBjbGVhclRpbWVvdXQodGhpcy50aW1lciksIHRoaXMudGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVwZWF0KDQwLCB0LCBpKVxuICAgICAgICAgICAgfSwgZSksIHRoaXMuX3NwaW4odCAqIHRoaXMub3B0aW9ucy5zdGVwLCBpKVxuICAgICAgICB9LFxuICAgICAgICBfc3BpbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy52YWx1ZSgpIHx8IDA7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIgfHwgKHRoaXMuY291bnRlciA9IDEpLCBpID0gdGhpcy5fYWRqdXN0VmFsdWUoaSArIGUgKiB0aGlzLl9pbmNyZW1lbnQodGhpcy5jb3VudGVyKSksIHRoaXMuc3Bpbm5pbmcgJiYgdGhpcy5fdHJpZ2dlcihcInNwaW5cIiwgdCwge3ZhbHVlOiBpfSkgPT09ICExIHx8ICh0aGlzLl92YWx1ZShpKSwgdGhpcy5jb3VudGVyKyspXG4gICAgICAgIH0sXG4gICAgICAgIF9pbmNyZW1lbnQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMub3B0aW9ucy5pbmNyZW1lbnRhbDtcbiAgICAgICAgICAgIHJldHVybiBpID8gZS5pc0Z1bmN0aW9uKGkpID8gaSh0KSA6IE1hdGguZmxvb3IodCAqIHQgKiB0IC8gNWU0IC0gdCAqIHQgLyA1MDAgKyAxNyAqIHQgLyAyMDAgKyAxKSA6IDFcbiAgICAgICAgfSxcbiAgICAgICAgX3ByZWNpc2lvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLl9wcmVjaXNpb25PZih0aGlzLm9wdGlvbnMuc3RlcCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5vcHRpb25zLm1pbiAmJiAoZSA9IE1hdGgubWF4KGUsIHRoaXMuX3ByZWNpc2lvbk9mKHRoaXMub3B0aW9ucy5taW4pKSksIGVcbiAgICAgICAgfSxcbiAgICAgICAgX3ByZWNpc2lvbk9mOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBcIlwiICsgZSwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgICAgICAgICByZXR1cm4gLTEgPT09IGkgPyAwIDogdC5sZW5ndGggLSBpIC0gMVxuICAgICAgICB9LFxuICAgICAgICBfYWRqdXN0VmFsdWU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCwgaSwgcyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiB0ID0gbnVsbCAhPT0gcy5taW4gPyBzLm1pbiA6IDAsIGkgPSBlIC0gdCwgaSA9IE1hdGgucm91bmQoaSAvIHMuc3RlcCkgKiBzLnN0ZXAsIGUgPSB0ICsgaSwgZSA9IHBhcnNlRmxvYXQoZS50b0ZpeGVkKHRoaXMuX3ByZWNpc2lvbigpKSksIG51bGwgIT09IHMubWF4ICYmIGUgPiBzLm1heCA/IHMubWF4IDogbnVsbCAhPT0gcy5taW4gJiYgcy5taW4gPiBlID8gcy5taW4gOiBlXG4gICAgICAgIH0sXG4gICAgICAgIF9zdG9wOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5zcGlubmluZyAmJiAoY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLCBjbGVhclRpbWVvdXQodGhpcy5tb3VzZXdoZWVsVGltZXIpLCB0aGlzLmNvdW50ZXIgPSAwLCB0aGlzLnNwaW5uaW5nID0gITEsIHRoaXMuX3RyaWdnZXIoXCJzdG9wXCIsIGUpKVxuICAgICAgICB9LFxuICAgICAgICBfc2V0T3B0aW9uOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgaWYgKFwiY3VsdHVyZVwiID09PSBlIHx8IFwibnVtYmVyRm9ybWF0XCIgPT09IGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuX3BhcnNlKHRoaXMuZWxlbWVudC52YWwoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1tlXSA9IHQsIHRoaXMuZWxlbWVudC52YWwodGhpcy5fZm9ybWF0KGkpKSwgdm9pZCAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoXCJtYXhcIiA9PT0gZSB8fCBcIm1pblwiID09PSBlIHx8IFwic3RlcFwiID09PSBlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmICh0ID0gdGhpcy5fcGFyc2UodCkpLCBcImljb25zXCIgPT09IGUgJiYgKHRoaXMuYnV0dG9ucy5maXJzdCgpLmZpbmQoXCIudWktaWNvblwiKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaWNvbnMudXApLmFkZENsYXNzKHQudXApLCB0aGlzLmJ1dHRvbnMubGFzdCgpLmZpbmQoXCIudWktaWNvblwiKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaWNvbnMuZG93bikuYWRkQ2xhc3ModC5kb3duKSksIHRoaXMuX3N1cGVyKGUsIHQpLCBcImRpc2FibGVkXCIgPT09IGUgJiYgKHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIXQpLCB0aGlzLmVsZW1lbnQucHJvcChcImRpc2FibGVkXCIsICEhdCksIHRoaXMuYnV0dG9ucy5idXR0b24odCA/IFwiZGlzYWJsZVwiIDogXCJlbmFibGVcIikpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRPcHRpb25zOiBoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihlKVxuICAgICAgICB9KSxcbiAgICAgICAgX3BhcnNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgXCJcIiAhPT0gZSAmJiAoZSA9IHdpbmRvdy5HbG9iYWxpemUgJiYgdGhpcy5vcHRpb25zLm51bWJlckZvcm1hdCA/IEdsb2JhbGl6ZS5wYXJzZUZsb2F0KGUsIDEwLCB0aGlzLm9wdGlvbnMuY3VsdHVyZSkgOiArZSksIFwiXCIgPT09IGUgfHwgaXNOYU4oZSkgPyBudWxsIDogZVxuICAgICAgICB9LFxuICAgICAgICBfZm9ybWF0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCIgPT09IGUgPyBcIlwiIDogd2luZG93Lkdsb2JhbGl6ZSAmJiB0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0ID8gR2xvYmFsaXplLmZvcm1hdChlLCB0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0LCB0aGlzLm9wdGlvbnMuY3VsdHVyZSkgOiBlXG4gICAgICAgIH0sXG4gICAgICAgIF9yZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXR0cih7XG4gICAgICAgICAgICAgICAgXCJhcmlhLXZhbHVlbWluXCI6IHRoaXMub3B0aW9ucy5taW4sXG4gICAgICAgICAgICAgICAgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMub3B0aW9ucy5tYXgsXG4gICAgICAgICAgICAgICAgXCJhcmlhLXZhbHVlbm93XCI6IHRoaXMuX3BhcnNlKHRoaXMuZWxlbWVudC52YWwoKSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIGlzVmFsaWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IGUgPyAhMSA6IGUgPT09IHRoaXMuX2FkanVzdFZhbHVlKGUpXG4gICAgICAgIH0sXG4gICAgICAgIF92YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgXCJcIiAhPT0gZSAmJiAoaSA9IHRoaXMuX3BhcnNlKGUpLCBudWxsICE9PSBpICYmICh0IHx8IChpID0gdGhpcy5fYWRqdXN0VmFsdWUoaSkpLCBlID0gdGhpcy5fZm9ybWF0KGkpKSksIHRoaXMuZWxlbWVudC52YWwoZSksIHRoaXMuX3JlZnJlc2goKVxuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3Bpbm5lci1pbnB1dFwiKS5wcm9wKFwiZGlzYWJsZWRcIiwgITEpLnJlbW92ZUF0dHIoXCJhdXRvY29tcGxldGVcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcImFyaWEtdmFsdWVtaW5cIikucmVtb3ZlQXR0cihcImFyaWEtdmFsdWVtYXhcIikucmVtb3ZlQXR0cihcImFyaWEtdmFsdWVub3dcIiksIHRoaXMudWlTcGlubmVyLnJlcGxhY2VXaXRoKHRoaXMuZWxlbWVudClcbiAgICAgICAgfSxcbiAgICAgICAgc3RlcFVwOiBoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGVwVXAoZSlcbiAgICAgICAgfSksXG4gICAgICAgIF9zdGVwVXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydCgpICYmICh0aGlzLl9zcGluKChlIHx8IDEpICogdGhpcy5vcHRpb25zLnN0ZXApLCB0aGlzLl9zdG9wKCkpXG4gICAgICAgIH0sXG4gICAgICAgIHN0ZXBEb3duOiBoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGVwRG93bihlKVxuICAgICAgICB9KSxcbiAgICAgICAgX3N0ZXBEb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQoKSAmJiAodGhpcy5fc3BpbigoZSB8fCAxKSAqIC10aGlzLm9wdGlvbnMuc3RlcCksIHRoaXMuX3N0b3AoKSlcbiAgICAgICAgfSxcbiAgICAgICAgcGFnZVVwOiBoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGVwVXAoKGUgfHwgMSkgKiB0aGlzLm9wdGlvbnMucGFnZSlcbiAgICAgICAgfSksXG4gICAgICAgIHBhZ2VEb3duOiBoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGVwRG93bigoZSB8fCAxKSAqIHRoaXMub3B0aW9ucy5wYWdlKVxuICAgICAgICB9KSxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChoKHRoaXMuX3ZhbHVlKS5jYWxsKHRoaXMsIGUpLCB2b2lkIDApIDogdGhpcy5fcGFyc2UodGhpcy5lbGVtZW50LnZhbCgpKVxuICAgICAgICB9LFxuICAgICAgICB3aWRnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVpU3Bpbm5lclxuICAgICAgICB9XG4gICAgfSksIGUud2lkZ2V0KFwidWkudGFic1wiLCB7XG4gICAgICAgIHZlcnNpb246IFwiMS4xMS4yXCIsXG4gICAgICAgIGRlbGF5OiAzMDAsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGFjdGl2ZTogbnVsbCxcbiAgICAgICAgICAgIGNvbGxhcHNpYmxlOiAhMSxcbiAgICAgICAgICAgIGV2ZW50OiBcImNsaWNrXCIsXG4gICAgICAgICAgICBoZWlnaHRTdHlsZTogXCJjb250ZW50XCIsXG4gICAgICAgICAgICBoaWRlOiBudWxsLFxuICAgICAgICAgICAgc2hvdzogbnVsbCxcbiAgICAgICAgICAgIGFjdGl2YXRlOiBudWxsLFxuICAgICAgICAgICAgYmVmb3JlQWN0aXZhdGU6IG51bGwsXG4gICAgICAgICAgICBiZWZvcmVMb2FkOiBudWxsLFxuICAgICAgICAgICAgbG9hZDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBfaXNMb2NhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSAvIy4qJC87XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgcztcbiAgICAgICAgICAgICAgICB0ID0gdC5jbG9uZU5vZGUoITEpLCBpID0gdC5ocmVmLnJlcGxhY2UoZSwgXCJcIiksIHMgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoZSwgXCJcIik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGRlY29kZVVSSUNvbXBvbmVudChpKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IGRlY29kZVVSSUNvbXBvbmVudChzKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuaGFzaC5sZW5ndGggPiAxICYmIGkgPT09IHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSgpLFxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMsIGkgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSAhMSwgdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKS50b2dnbGVDbGFzcyhcInVpLXRhYnMtY29sbGFwc2libGVcIiwgaS5jb2xsYXBzaWJsZSksIHRoaXMuX3Byb2Nlc3NUYWJzKCksIGkuYWN0aXZlID0gdGhpcy5faW5pdGlhbEFjdGl2ZSgpLCBlLmlzQXJyYXkoaS5kaXNhYmxlZCkgJiYgKGkuZGlzYWJsZWQgPSBlLnVuaXF1ZShpLmRpc2FibGVkLmNvbmNhdChlLm1hcCh0aGlzLnRhYnMuZmlsdGVyKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0LnRhYnMuaW5kZXgoZSlcbiAgICAgICAgICAgIH0pKSkuc29ydCgpKSwgdGhpcy5hY3RpdmUgPSB0aGlzLm9wdGlvbnMuYWN0aXZlICE9PSAhMSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoID8gdGhpcy5fZmluZEFjdGl2ZShpLmFjdGl2ZSkgOiBlKCksIHRoaXMuX3JlZnJlc2goKSwgdGhpcy5hY3RpdmUubGVuZ3RoICYmIHRoaXMubG9hZChpLmFjdGl2ZSlcbiAgICAgICAgfSxcbiAgICAgICAgX2luaXRpYWxBY3RpdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vcHRpb25zLmFjdGl2ZSwgaSA9IHRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSwgcyA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHQgJiYgKHMgJiYgdGhpcy50YWJzLmVhY2goZnVuY3Rpb24gKGksIG4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZShuKS5hdHRyKFwiYXJpYS1jb250cm9sc1wiKSA9PT0gcyA/ICh0ID0gaSwgITEpIDogdm9pZCAwXG4gICAgICAgICAgICB9KSwgbnVsbCA9PT0gdCAmJiAodCA9IHRoaXMudGFicy5pbmRleCh0aGlzLnRhYnMuZmlsdGVyKFwiLnVpLXRhYnMtYWN0aXZlXCIpKSksIChudWxsID09PSB0IHx8IC0xID09PSB0KSAmJiAodCA9IHRoaXMudGFicy5sZW5ndGggPyAwIDogITEpKSwgdCAhPT0gITEgJiYgKHQgPSB0aGlzLnRhYnMuaW5kZXgodGhpcy50YWJzLmVxKHQpKSwgLTEgPT09IHQgJiYgKHQgPSBpID8gITEgOiAwKSksICFpICYmIHQgPT09ICExICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggJiYgKHQgPSAwKSwgdFxuICAgICAgICB9LFxuICAgICAgICBfZ2V0Q3JlYXRlRXZlbnREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge3RhYjogdGhpcy5hY3RpdmUsIHBhbmVsOiB0aGlzLmFjdGl2ZS5sZW5ndGggPyB0aGlzLl9nZXRQYW5lbEZvclRhYih0aGlzLmFjdGl2ZSkgOiBlKCl9XG4gICAgICAgIH0sXG4gICAgICAgIF90YWJLZXlkb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSBlKHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkuY2xvc2VzdChcImxpXCIpLCBzID0gdGhpcy50YWJzLmluZGV4KGkpLCBuID0gITA7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2hhbmRsZVBhZ2VOYXYodCkpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5VUDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAhMSwgcy0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZS51aS5rZXlDb2RlLkVORDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLmFuY2hvcnMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGUudWkua2V5Q29kZS5IT01FOlxuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuU1BBQ0U6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLCBjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKSwgdGhpcy5fYWN0aXZhdGUocyksIHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlLnVpLmtleUNvZGUuRU5URVI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLCBjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKSwgdGhpcy5fYWN0aXZhdGUocyA9PT0gdGhpcy5vcHRpb25zLmFjdGl2ZSA/ICExIDogcyksIHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0LnByZXZlbnREZWZhdWx0KCksIGNsZWFyVGltZW91dCh0aGlzLmFjdGl2YXRpbmcpLCBzID0gdGhpcy5fZm9jdXNOZXh0VGFiKHMsIG4pLCB0LmN0cmxLZXkgfHwgKGkuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiKSwgdGhpcy50YWJzLmVxKHMpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsIFwidHJ1ZVwiKSwgdGhpcy5hY3RpdmF0aW5nID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbihcImFjdGl2ZVwiLCBzKVxuICAgICAgICAgICAgICAgIH0sIHRoaXMuZGVsYXkpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfcGFuZWxLZXlkb3duOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlUGFnZU5hdih0KSB8fCB0LmN0cmxLZXkgJiYgdC5rZXlDb2RlID09PSBlLnVpLmtleUNvZGUuVVAgJiYgKHQucHJldmVudERlZmF1bHQoKSwgdGhpcy5hY3RpdmUuZm9jdXMoKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2hhbmRsZVBhZ2VOYXY6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdC5hbHRLZXkgJiYgdC5rZXlDb2RlID09PSBlLnVpLmtleUNvZGUuUEFHRV9VUCA/ICh0aGlzLl9hY3RpdmF0ZSh0aGlzLl9mb2N1c05leHRUYWIodGhpcy5vcHRpb25zLmFjdGl2ZSAtIDEsICExKSksICEwKSA6IHQuYWx0S2V5ICYmIHQua2V5Q29kZSA9PT0gZS51aS5rZXlDb2RlLlBBR0VfRE9XTiA/ICh0aGlzLl9hY3RpdmF0ZSh0aGlzLl9mb2N1c05leHRUYWIodGhpcy5vcHRpb25zLmFjdGl2ZSArIDEsICEwKSksICEwKSA6IHZvaWQgMFxuICAgICAgICB9LFxuICAgICAgICBfZmluZE5leHRUYWI6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ID4gbiAmJiAodCA9IDApLCAwID4gdCAmJiAodCA9IG4pLCB0XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIG4gPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTsgLTEgIT09IGUuaW5BcnJheShzKCksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCk7KSB0ID0gaSA/IHQgKyAxIDogdCAtIDE7XG4gICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICB9LFxuICAgICAgICBfZm9jdXNOZXh0VGFiOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIGUgPSB0aGlzLl9maW5kTmV4dFRhYihlLCB0KSwgdGhpcy50YWJzLmVxKGUpLmZvY3VzKCksIGVcbiAgICAgICAgfSxcbiAgICAgICAgX3NldE9wdGlvbjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiID09PSBlID8gKHRoaXMuX2FjdGl2YXRlKHQpLCB2b2lkIDApIDogXCJkaXNhYmxlZFwiID09PSBlID8gKHRoaXMuX3NldHVwRGlzYWJsZWQodCksIHZvaWQgMCkgOiAodGhpcy5fc3VwZXIoZSwgdCksIFwiY29sbGFwc2libGVcIiA9PT0gZSAmJiAodGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCB0KSwgdCB8fCB0aGlzLm9wdGlvbnMuYWN0aXZlICE9PSAhMSB8fCB0aGlzLl9hY3RpdmF0ZSgwKSksIFwiZXZlbnRcIiA9PT0gZSAmJiB0aGlzLl9zZXR1cEV2ZW50cyh0KSwgXCJoZWlnaHRTdHlsZVwiID09PSBlICYmIHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUodCksIHZvaWQgMClcbiAgICAgICAgfSxcbiAgICAgICAgX3Nhbml0aXplU2VsZWN0b3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZSA/IGUucmVwbGFjZSgvWyFcIiQlJicoKSorLC5cXC86Ozw9Pj9AXFxbXFxdXFxeYHt8fX5dL2csIFwiXFxcXCQmXCIpIDogXCJcIlxuICAgICAgICB9LFxuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMub3B0aW9ucywgaSA9IHRoaXMudGFibGlzdC5jaGlsZHJlbihcIjpoYXMoYVtocmVmXSlcIik7XG4gICAgICAgICAgICB0LmRpc2FibGVkID0gZS5tYXAoaS5maWx0ZXIoXCIudWktc3RhdGUtZGlzYWJsZWRcIiksIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkuaW5kZXgoZSlcbiAgICAgICAgICAgIH0pLCB0aGlzLl9wcm9jZXNzVGFicygpLCB0LmFjdGl2ZSAhPT0gITEgJiYgdGhpcy5hbmNob3JzLmxlbmd0aCA/IHRoaXMuYWN0aXZlLmxlbmd0aCAmJiAhZS5jb250YWlucyh0aGlzLnRhYmxpc3RbMF0sIHRoaXMuYWN0aXZlWzBdKSA/IHRoaXMudGFicy5sZW5ndGggPT09IHQuZGlzYWJsZWQubGVuZ3RoID8gKHQuYWN0aXZlID0gITEsIHRoaXMuYWN0aXZlID0gZSgpKSA6IHRoaXMuX2FjdGl2YXRlKHRoaXMuX2ZpbmROZXh0VGFiKE1hdGgubWF4KDAsIHQuYWN0aXZlIC0gMSksICExKSkgOiB0LmFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCh0aGlzLmFjdGl2ZSkgOiAodC5hY3RpdmUgPSAhMSwgdGhpcy5hY3RpdmUgPSBlKCkpLCB0aGlzLl9yZWZyZXNoKClcbiAgICAgICAgfSxcbiAgICAgICAgX3JlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHVwRGlzYWJsZWQodGhpcy5vcHRpb25zLmRpc2FibGVkKSwgdGhpcy5fc2V0dXBFdmVudHModGhpcy5vcHRpb25zLmV2ZW50KSwgdGhpcy5fc2V0dXBIZWlnaHRTdHlsZSh0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUpLCB0aGlzLnRhYnMubm90KHRoaXMuYWN0aXZlKS5hdHRyKHtcbiAgICAgICAgICAgICAgICBcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg6IC0xXG4gICAgICAgICAgICB9KSwgdGhpcy5wYW5lbHMubm90KHRoaXMuX2dldFBhbmVsRm9yVGFiKHRoaXMuYWN0aXZlKSkuaGlkZSgpLmF0dHIoe1wiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJ9KSwgdGhpcy5hY3RpdmUubGVuZ3RoID8gKHRoaXMuYWN0aXZlLmFkZENsYXNzKFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIpLmF0dHIoe1xuICAgICAgICAgICAgICAgIFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcbiAgICAgICAgICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg6IDBcbiAgICAgICAgICAgIH0pLCB0aGlzLl9nZXRQYW5lbEZvclRhYih0aGlzLmFjdGl2ZSkuc2hvdygpLmF0dHIoe1wiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwifSkpIDogdGhpcy50YWJzLmVxKDApLmF0dHIoXCJ0YWJJbmRleFwiLCAwKVxuICAgICAgICB9LFxuICAgICAgICBfcHJvY2Vzc1RhYnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcywgaSA9IHRoaXMudGFicywgcyA9IHRoaXMuYW5jaG9ycywgbiA9IHRoaXMucGFuZWxzO1xuICAgICAgICAgICAgdGhpcy50YWJsaXN0ID0gdGhpcy5fZ2V0TGlzdCgpLmFkZENsYXNzKFwidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIikuYXR0cihcInJvbGVcIiwgXCJ0YWJsaXN0XCIpLmRlbGVnYXRlKFwiPiBsaVwiLCBcIm1vdXNlZG93blwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBlKHRoaXMpLmlzKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpICYmIHQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgfSkuZGVsZWdhdGUoXCIudWktdGFicy1hbmNob3JcIiwgXCJmb2N1c1wiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGUodGhpcykuY2xvc2VzdChcImxpXCIpLmlzKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpICYmIHRoaXMuYmx1cigpXG4gICAgICAgICAgICB9KSwgdGhpcy50YWJzID0gdGhpcy50YWJsaXN0LmZpbmQoXCI+IGxpOmhhcyhhW2hyZWZdKVwiKS5hZGRDbGFzcyhcInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcFwiKS5hdHRyKHtcbiAgICAgICAgICAgICAgICByb2xlOiBcInRhYlwiLFxuICAgICAgICAgICAgICAgIHRhYkluZGV4OiAtMVxuICAgICAgICAgICAgfSksIHRoaXMuYW5jaG9ycyA9IHRoaXMudGFicy5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlKFwiYVwiLCB0aGlzKVswXVxuICAgICAgICAgICAgfSkuYWRkQ2xhc3MoXCJ1aS10YWJzLWFuY2hvclwiKS5hdHRyKHtcbiAgICAgICAgICAgICAgICByb2xlOiBcInByZXNlbnRhdGlvblwiLFxuICAgICAgICAgICAgICAgIHRhYkluZGV4OiAtMVxuICAgICAgICAgICAgfSksIHRoaXMucGFuZWxzID0gZSgpLCB0aGlzLmFuY2hvcnMuZWFjaChmdW5jdGlvbiAoaSwgcykge1xuICAgICAgICAgICAgICAgIHZhciBuLCBhLCBvLCByID0gZShzKS51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKSwgaCA9IGUocykuY2xvc2VzdChcImxpXCIpLCBsID0gaC5hdHRyKFwiYXJpYS1jb250cm9sc1wiKTtcbiAgICAgICAgICAgICAgICB0Ll9pc0xvY2FsKHMpID8gKG4gPSBzLmhhc2gsIG8gPSBuLnN1YnN0cmluZygxKSwgYSA9IHQuZWxlbWVudC5maW5kKHQuX3Nhbml0aXplU2VsZWN0b3IobikpKSA6IChvID0gaC5hdHRyKFwiYXJpYS1jb250cm9sc1wiKSB8fCBlKHt9KS51bmlxdWVJZCgpWzBdLmlkLCBuID0gXCIjXCIgKyBvLCBhID0gdC5lbGVtZW50LmZpbmQobiksIGEubGVuZ3RoIHx8IChhID0gdC5fY3JlYXRlUGFuZWwobyksIGEuaW5zZXJ0QWZ0ZXIodC5wYW5lbHNbaSAtIDFdIHx8IHQudGFibGlzdCkpLCBhLmF0dHIoXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIikpLCBhLmxlbmd0aCAmJiAodC5wYW5lbHMgPSB0LnBhbmVscy5hZGQoYSkpLCBsICYmIGguZGF0YShcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiLCBsKSwgaC5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgXCJhcmlhLWNvbnRyb2xzXCI6IG8sXG4gICAgICAgICAgICAgICAgICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IHJcbiAgICAgICAgICAgICAgICB9KSwgYS5hdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIsIHIpXG4gICAgICAgICAgICB9KSwgdGhpcy5wYW5lbHMuYWRkQ2xhc3MoXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIikuYXR0cihcInJvbGVcIiwgXCJ0YWJwYW5lbFwiKSwgaSAmJiAodGhpcy5fb2ZmKGkubm90KHRoaXMudGFicykpLCB0aGlzLl9vZmYocy5ub3QodGhpcy5hbmNob3JzKSksIHRoaXMuX29mZihuLm5vdCh0aGlzLnBhbmVscykpKVxuICAgICAgICB9LFxuICAgICAgICBfZ2V0TGlzdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFibGlzdCB8fCB0aGlzLmVsZW1lbnQuZmluZChcIm9sLHVsXCIpLmVxKDApXG4gICAgICAgIH0sXG4gICAgICAgIF9jcmVhdGVQYW5lbDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlKFwiPGRpdj5cIikuYXR0cihcImlkXCIsIHQpLmFkZENsYXNzKFwidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tXCIpLmRhdGEoXCJ1aS10YWJzLWRlc3Ryb3lcIiwgITApXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXR1cERpc2FibGVkOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgZS5pc0FycmF5KHQpICYmICh0Lmxlbmd0aCA/IHQubGVuZ3RoID09PSB0aGlzLmFuY2hvcnMubGVuZ3RoICYmICh0ID0gITApIDogdCA9ICExKTtcbiAgICAgICAgICAgIGZvciAodmFyIGksIHMgPSAwOyBpID0gdGhpcy50YWJzW3NdOyBzKyspIHQgPT09ICEwIHx8IC0xICE9PSBlLmluQXJyYXkocywgdCkgPyBlKGkpLmFkZENsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpIDogZShpKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWRpc2FibGVkXCIpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRpc2FibGVkID0gdFxuICAgICAgICB9LFxuICAgICAgICBfc2V0dXBFdmVudHM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IHt9O1xuICAgICAgICAgICAgdCAmJiBlLmVhY2godC5zcGxpdChcIiBcIiksIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgaVt0XSA9IFwiX2V2ZW50SGFuZGxlclwiXG4gICAgICAgICAgICB9KSwgdGhpcy5fb2ZmKHRoaXMuYW5jaG9ycy5hZGQodGhpcy50YWJzKS5hZGQodGhpcy5wYW5lbHMpKSwgdGhpcy5fb24oITAsIHRoaXMuYW5jaG9ycywge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgdGhpcy5fb24odGhpcy5hbmNob3JzLCBpKSwgdGhpcy5fb24odGhpcy50YWJzLCB7a2V5ZG93bjogXCJfdGFiS2V5ZG93blwifSksIHRoaXMuX29uKHRoaXMucGFuZWxzLCB7a2V5ZG93bjogXCJfcGFuZWxLZXlkb3duXCJ9KSwgdGhpcy5fZm9jdXNhYmxlKHRoaXMudGFicyksIHRoaXMuX2hvdmVyYWJsZSh0aGlzLnRhYnMpXG4gICAgICAgIH0sXG4gICAgICAgIF9zZXR1cEhlaWdodFN0eWxlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMgPSB0aGlzLmVsZW1lbnQucGFyZW50KCk7XG4gICAgICAgICAgICBcImZpbGxcIiA9PT0gdCA/IChpID0gcy5oZWlnaHQoKSwgaSAtPSB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHRoaXMuZWxlbWVudC5oZWlnaHQoKSwgdGhpcy5lbGVtZW50LnNpYmxpbmdzKFwiOnZpc2libGVcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLCBzID0gdC5jc3MoXCJwb3NpdGlvblwiKTtcbiAgICAgICAgICAgICAgICBcImFic29sdXRlXCIgIT09IHMgJiYgXCJmaXhlZFwiICE9PSBzICYmIChpIC09IHQub3V0ZXJIZWlnaHQoITApKVxuICAgICAgICAgICAgfSksIHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCh0aGlzLnBhbmVscykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaSAtPSBlKHRoaXMpLm91dGVySGVpZ2h0KCEwKVxuICAgICAgICAgICAgfSksIHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGUodGhpcykuaGVpZ2h0KE1hdGgubWF4KDAsIGkgLSBlKHRoaXMpLmlubmVySGVpZ2h0KCkgKyBlKHRoaXMpLmhlaWdodCgpKSlcbiAgICAgICAgICAgIH0pLmNzcyhcIm92ZXJmbG93XCIsIFwiYXV0b1wiKSkgOiBcImF1dG9cIiA9PT0gdCAmJiAoaSA9IDAsIHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGkgPSBNYXRoLm1heChpLCBlKHRoaXMpLmhlaWdodChcIlwiKS5oZWlnaHQoKSlcbiAgICAgICAgICAgIH0pLmhlaWdodChpKSlcbiAgICAgICAgfSxcbiAgICAgICAgX2V2ZW50SGFuZGxlcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5vcHRpb25zLCBzID0gdGhpcy5hY3RpdmUsIG4gPSBlKHQuY3VycmVudFRhcmdldCksIGEgPSBuLmNsb3Nlc3QoXCJsaVwiKSwgbyA9IGFbMF0gPT09IHNbMF0sXG4gICAgICAgICAgICAgICAgciA9IG8gJiYgaS5jb2xsYXBzaWJsZSwgaCA9IHIgPyBlKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYihhKSxcbiAgICAgICAgICAgICAgICBsID0gcy5sZW5ndGggPyB0aGlzLl9nZXRQYW5lbEZvclRhYihzKSA6IGUoKSxcbiAgICAgICAgICAgICAgICB1ID0ge29sZFRhYjogcywgb2xkUGFuZWw6IGwsIG5ld1RhYjogciA/IGUoKSA6IGEsIG5ld1BhbmVsOiBofTtcbiAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgYS5oYXNDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIpIHx8IGEuaGFzQ2xhc3MoXCJ1aS10YWJzLWxvYWRpbmdcIikgfHwgdGhpcy5ydW5uaW5nIHx8IG8gJiYgIWkuY29sbGFwc2libGUgfHwgdGhpcy5fdHJpZ2dlcihcImJlZm9yZUFjdGl2YXRlXCIsIHQsIHUpID09PSAhMSB8fCAoaS5hY3RpdmUgPSByID8gITEgOiB0aGlzLnRhYnMuaW5kZXgoYSksIHRoaXMuYWN0aXZlID0gbyA/IGUoKSA6IGEsIHRoaXMueGhyICYmIHRoaXMueGhyLmFib3J0KCksIGwubGVuZ3RoIHx8IGgubGVuZ3RoIHx8IGUuZXJyb3IoXCJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci5cIiksIGgubGVuZ3RoICYmIHRoaXMubG9hZCh0aGlzLnRhYnMuaW5kZXgoYSksIHQpLCB0aGlzLl90b2dnbGUodCwgdSkpXG4gICAgICAgIH0sXG4gICAgICAgIF90b2dnbGU6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBzKCkge1xuICAgICAgICAgICAgICAgIGEucnVubmluZyA9ICExLCBhLl90cmlnZ2VyKFwiYWN0aXZhdGVcIiwgdCwgaSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbigpIHtcbiAgICAgICAgICAgICAgICBpLm5ld1RhYi5jbG9zZXN0KFwibGlcIikuYWRkQ2xhc3MoXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiksIG8ubGVuZ3RoICYmIGEub3B0aW9ucy5zaG93ID8gYS5fc2hvdyhvLCBhLm9wdGlvbnMuc2hvdywgcykgOiAoby5zaG93KCksIHMoKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLCBvID0gaS5uZXdQYW5lbCwgciA9IGkub2xkUGFuZWw7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSAhMCwgci5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmhpZGUgPyB0aGlzLl9oaWRlKHIsIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaS5vbGRUYWIuY2xvc2VzdChcImxpXCIpLnJlbW92ZUNsYXNzKFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIpLCBuKClcbiAgICAgICAgICAgIH0pIDogKGkub2xkVGFiLmNsb3Nlc3QoXCJsaVwiKS5yZW1vdmVDbGFzcyhcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiKSwgci5oaWRlKCksIG4oKSksIHIuYXR0cihcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKSwgaS5vbGRUYWIuYXR0cih7XG4gICAgICAgICAgICAgICAgXCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcbiAgICAgICAgICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogXCJmYWxzZVwiXG4gICAgICAgICAgICB9KSwgby5sZW5ndGggJiYgci5sZW5ndGggPyBpLm9sZFRhYi5hdHRyKFwidGFiSW5kZXhcIiwgLTEpIDogby5sZW5ndGggJiYgdGhpcy50YWJzLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgPT09IGUodGhpcykuYXR0cihcInRhYkluZGV4XCIpXG4gICAgICAgICAgICB9KS5hdHRyKFwidGFiSW5kZXhcIiwgLTEpLCBvLmF0dHIoXCJhcmlhLWhpZGRlblwiLCBcImZhbHNlXCIpLCBpLm5ld1RhYi5hdHRyKHtcbiAgICAgICAgICAgICAgICBcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXG4gICAgICAgICAgICAgICAgXCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgIHRhYkluZGV4OiAwXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBfYWN0aXZhdGU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSwgcyA9IHRoaXMuX2ZpbmRBY3RpdmUodCk7XG4gICAgICAgICAgICBzWzBdICE9PSB0aGlzLmFjdGl2ZVswXSAmJiAocy5sZW5ndGggfHwgKHMgPSB0aGlzLmFjdGl2ZSksIGkgPSBzLmZpbmQoXCIudWktdGFicy1hbmNob3JcIilbMF0sIHRoaXMuX2V2ZW50SGFuZGxlcih7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IGksXG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGUubm9vcFxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH0sXG4gICAgICAgIF9maW5kQWN0aXZlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQgPT09ICExID8gZSgpIDogdGhpcy50YWJzLmVxKHQpXG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRJbmRleDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIChlID0gdGhpcy5hbmNob3JzLmluZGV4KHRoaXMuYW5jaG9ycy5maWx0ZXIoXCJbaHJlZiQ9J1wiICsgZSArIFwiJ11cIikpKSwgZVxuICAgICAgICB9LFxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy54aHIgJiYgdGhpcy54aHIuYWJvcnQoKSwgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS10YWJzLWNvbGxhcHNpYmxlXCIpLCB0aGlzLnRhYmxpc3QucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKSwgdGhpcy5hbmNob3JzLnJlbW92ZUNsYXNzKFwidWktdGFicy1hbmNob3JcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLnJlbW92ZVVuaXF1ZUlkKCksIHRoaXMudGFibGlzdC51bmJpbmQodGhpcy5ldmVudE5hbWVzcGFjZSksIHRoaXMudGFicy5hZGQodGhpcy5wYW5lbHMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGUuZGF0YSh0aGlzLCBcInVpLXRhYnMtZGVzdHJveVwiKSA/IGUodGhpcykucmVtb3ZlKCkgOiBlKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZGVmYXVsdCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgdWktY29ybmVyLXRvcCB1aS1jb3JuZXItYm90dG9tIHVpLXdpZGdldC1jb250ZW50IHVpLXRhYnMtYWN0aXZlIHVpLXRhYnMtcGFuZWxcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLnJlbW92ZUF0dHIoXCJhcmlhLWxpdmVcIikucmVtb3ZlQXR0cihcImFyaWEtYnVzeVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1zZWxlY3RlZFwiKS5yZW1vdmVBdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiYXJpYS1leHBhbmRlZFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKVxuICAgICAgICAgICAgfSksIHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGUodGhpcyksIGkgPSB0LmRhdGEoXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgaSA/IHQuYXR0cihcImFyaWEtY29udHJvbHNcIiwgaSkucmVtb3ZlRGF0YShcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiKSA6IHQucmVtb3ZlQXR0cihcImFyaWEtY29udHJvbHNcIilcbiAgICAgICAgICAgIH0pLCB0aGlzLnBhbmVscy5zaG93KCksIFwiY29udGVudFwiICE9PSB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgJiYgdGhpcy5wYW5lbHMuY3NzKFwiaGVpZ2h0XCIsIFwiXCIpXG4gICAgICAgIH0sXG4gICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xuICAgICAgICAgICAgaSAhPT0gITEgJiYgKHZvaWQgMCA9PT0gdCA/IGkgPSAhMSA6ICh0ID0gdGhpcy5fZ2V0SW5kZXgodCksIGkgPSBlLmlzQXJyYXkoaSkgPyBlLm1hcChpLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlICE9PSB0ID8gZSA6IG51bGxcbiAgICAgICAgICAgIH0pIDogZS5tYXAodGhpcy50YWJzLCBmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpICE9PSB0ID8gaSA6IG51bGxcbiAgICAgICAgICAgIH0pKSwgdGhpcy5fc2V0dXBEaXNhYmxlZChpKSlcbiAgICAgICAgfSxcbiAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xuICAgICAgICAgICAgaWYgKGkgIT09ICEwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgaSA9ICEwOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPSB0aGlzLl9nZXRJbmRleCh0KSwgLTEgIT09IGUuaW5BcnJheSh0LCBpKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBpID0gZS5pc0FycmF5KGkpID8gZS5tZXJnZShbdF0sIGkpLnNvcnQoKSA6IFt0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9zZXR1cERpc2FibGVkKGkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB0ID0gdGhpcy5fZ2V0SW5kZXgodCk7XG4gICAgICAgICAgICB2YXIgcyA9IHRoaXMsIG4gPSB0aGlzLnRhYnMuZXEodCksIGEgPSBuLmZpbmQoXCIudWktdGFicy1hbmNob3JcIiksIG8gPSB0aGlzLl9nZXRQYW5lbEZvclRhYihuKSxcbiAgICAgICAgICAgICAgICByID0ge3RhYjogbiwgcGFuZWw6IG99O1xuICAgICAgICAgICAgdGhpcy5faXNMb2NhbChhWzBdKSB8fCAodGhpcy54aHIgPSBlLmFqYXgodGhpcy5fYWpheFNldHRpbmdzKGEsIGksIHIpKSwgdGhpcy54aHIgJiYgXCJjYW5jZWxlZFwiICE9PSB0aGlzLnhoci5zdGF0dXNUZXh0ICYmIChuLmFkZENsYXNzKFwidWktdGFicy1sb2FkaW5nXCIpLCBvLmF0dHIoXCJhcmlhLWJ1c3lcIiwgXCJ0cnVlXCIpLCB0aGlzLnhoci5zdWNjZXNzKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG8uaHRtbChlKSwgcy5fdHJpZ2dlcihcImxvYWRcIiwgaSwgcilcbiAgICAgICAgICAgICAgICB9LCAxKVxuICAgICAgICAgICAgfSkuY29tcGxldGUoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgXCJhYm9ydFwiID09PSB0ICYmIHMucGFuZWxzLnN0b3AoITEsICEwKSwgbi5yZW1vdmVDbGFzcyhcInVpLXRhYnMtbG9hZGluZ1wiKSwgby5yZW1vdmVBdHRyKFwiYXJpYS1idXN5XCIpLCBlID09PSBzLnhociAmJiBkZWxldGUgcy54aHJcbiAgICAgICAgICAgICAgICB9LCAxKVxuICAgICAgICAgICAgfSkpKVxuICAgICAgICB9LFxuICAgICAgICBfYWpheFNldHRpbmdzOiBmdW5jdGlvbiAodCwgaSwgcykge1xuICAgICAgICAgICAgdmFyIG4gPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IHQuYXR0cihcImhyZWZcIiksIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh0LCBhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLl90cmlnZ2VyKFwiYmVmb3JlTG9hZFwiLCBpLCBlLmV4dGVuZCh7anFYSFI6IHQsIGFqYXhTZXR0aW5nczogYX0sIHMpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2dldFBhbmVsRm9yVGFiOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSBlKHQpLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKHRoaXMuX3Nhbml0aXplU2VsZWN0b3IoXCIjXCIgKyBpKSlcbiAgICAgICAgfVxuICAgIH0pLCBlLndpZGdldChcInVpLnRvb2x0aXBcIiwge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMTEuMlwiLCBvcHRpb25zOiB7XG4gICAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBlKHRoaXMpLmF0dHIoXCJ0aXRsZVwiKSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBlKFwiPGE+XCIpLnRleHQodCkuaHRtbCgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlkZTogITAsXG4gICAgICAgICAgICBpdGVtczogXCJbdGl0bGVdOm5vdChbZGlzYWJsZWRdKVwiLFxuICAgICAgICAgICAgcG9zaXRpb246IHtteTogXCJsZWZ0IHRvcCsxNVwiLCBhdDogXCJsZWZ0IGJvdHRvbVwiLCBjb2xsaXNpb246IFwiZmxpcGZpdCBmbGlwXCJ9LFxuICAgICAgICAgICAgc2hvdzogITAsXG4gICAgICAgICAgICB0b29sdGlwQ2xhc3M6IG51bGwsXG4gICAgICAgICAgICB0cmFjazogITEsXG4gICAgICAgICAgICBjbG9zZTogbnVsbCxcbiAgICAgICAgICAgIG9wZW46IG51bGxcbiAgICAgICAgfSwgX2FkZERlc2NyaWJlZEJ5OiBmdW5jdGlvbiAodCwgaSkge1xuICAgICAgICAgICAgdmFyIHMgPSAodC5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiKSB8fCBcIlwiKS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICAgICAgcy5wdXNoKGkpLCB0LmRhdGEoXCJ1aS10b29sdGlwLWlkXCIsIGkpLmF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIsIGUudHJpbShzLmpvaW4oXCIgXCIpKSlcbiAgICAgICAgfSwgX3JlbW92ZURlc2NyaWJlZEJ5OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0LmRhdGEoXCJ1aS10b29sdGlwLWlkXCIpLCBzID0gKHQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIikgfHwgXCJcIikuc3BsaXQoL1xccysvKSwgbiA9IGUuaW5BcnJheShpLCBzKTtcbiAgICAgICAgICAgIC0xICE9PSBuICYmIHMuc3BsaWNlKG4sIDEpLCB0LnJlbW92ZURhdGEoXCJ1aS10b29sdGlwLWlkXCIpLCBzID0gZS50cmltKHMuam9pbihcIiBcIikpLCBzID8gdC5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLCBzKSA6IHQucmVtb3ZlQXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIilcbiAgICAgICAgfSwgX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fb24oe1xuICAgICAgICAgICAgICAgIG1vdXNlb3ZlcjogXCJvcGVuXCIsXG4gICAgICAgICAgICAgICAgZm9jdXNpbjogXCJvcGVuXCJcbiAgICAgICAgICAgIH0pLCB0aGlzLnRvb2x0aXBzID0ge30sIHRoaXMucGFyZW50cyA9IHt9LCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgdGhpcy5fZGlzYWJsZSgpLCB0aGlzLmxpdmVSZWdpb24gPSBlKFwiPGRpdj5cIikuYXR0cih7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJsb2dcIixcbiAgICAgICAgICAgICAgICBcImFyaWEtbGl2ZVwiOiBcImFzc2VydGl2ZVwiLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1yZWxldmFudFwiOiBcImFkZGl0aW9uc1wiXG4gICAgICAgICAgICB9KS5hZGRDbGFzcyhcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiKS5hcHBlbmRUbyh0aGlzLmRvY3VtZW50WzBdLmJvZHkpXG4gICAgICAgIH0sIF9zZXRPcHRpb246IGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gXCJkaXNhYmxlZFwiID09PSB0ID8gKHRoaXNbaSA/IFwiX2Rpc2FibGVcIiA6IFwiX2VuYWJsZVwiXSgpLCB0aGlzLm9wdGlvbnNbdF0gPSBpLCB2b2lkIDApIDogKHRoaXMuX3N1cGVyKHQsIGkpLCBcImNvbnRlbnRcIiA9PT0gdCAmJiBlLmVhY2godGhpcy50b29sdGlwcywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBzLl91cGRhdGVDb250ZW50KHQuZWxlbWVudClcbiAgICAgICAgICAgIH0pLCB2b2lkIDApXG4gICAgICAgIH0sIF9kaXNhYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgICAgICBlLmVhY2godGhpcy50b29sdGlwcywgZnVuY3Rpb24gKGksIHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbiA9IGUuRXZlbnQoXCJibHVyXCIpO1xuICAgICAgICAgICAgICAgIG4udGFyZ2V0ID0gbi5jdXJyZW50VGFyZ2V0ID0gcy5lbGVtZW50WzBdLCB0LmNsb3NlKG4sICEwKVxuICAgICAgICAgICAgfSksIHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB0LmlzKFwiW3RpdGxlXVwiKSAmJiB0LmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIsIHQuYXR0cihcInRpdGxlXCIpKS5yZW1vdmVBdHRyKFwidGl0bGVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIF9lbmFibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB0LmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIpICYmIHQuYXR0cihcInRpdGxlXCIsIHQuZGF0YShcInVpLXRvb2x0aXAtdGl0bGVcIikpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCBvcGVuOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLCBzID0gZSh0ID8gdC50YXJnZXQgOiB0aGlzLmVsZW1lbnQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLml0ZW1zKTtcbiAgICAgICAgICAgIHMubGVuZ3RoICYmICFzLmRhdGEoXCJ1aS10b29sdGlwLWlkXCIpICYmIChzLmF0dHIoXCJ0aXRsZVwiKSAmJiBzLmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIsIHMuYXR0cihcInRpdGxlXCIpKSwgcy5kYXRhKFwidWktdG9vbHRpcC1vcGVuXCIsICEwKSwgdCAmJiBcIm1vdXNlb3ZlclwiID09PSB0LnR5cGUgJiYgcy5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQsIHMgPSBlKHRoaXMpO1xuICAgICAgICAgICAgICAgIHMuZGF0YShcInVpLXRvb2x0aXAtb3BlblwiKSAmJiAodCA9IGUuRXZlbnQoXCJibHVyXCIpLCB0LnRhcmdldCA9IHQuY3VycmVudFRhcmdldCA9IHRoaXMsIGkuY2xvc2UodCwgITApKSwgcy5hdHRyKFwidGl0bGVcIikgJiYgKHMudW5pcXVlSWQoKSwgaS5wYXJlbnRzW3RoaXMuaWRdID0ge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcy5hdHRyKFwidGl0bGVcIilcbiAgICAgICAgICAgICAgICB9LCBzLmF0dHIoXCJ0aXRsZVwiLCBcIlwiKSlcbiAgICAgICAgICAgIH0pLCB0aGlzLl91cGRhdGVDb250ZW50KHMsIHQpKVxuICAgICAgICB9LCBfdXBkYXRlQ29udGVudDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpLCBzID0gdGhpcy5vcHRpb25zLmNvbnRlbnQsIG4gPSB0aGlzLCBhID0gdCA/IHQudHlwZSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgcyA/IHRoaXMuX29wZW4odCwgZSwgcykgOiAoaSA9IHMuY2FsbChlWzBdLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIGUuZGF0YShcInVpLXRvb2x0aXAtb3BlblwiKSAmJiBuLl9kZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHQgJiYgKHQudHlwZSA9IGEpLCB0aGlzLl9vcGVuKHQsIGUsIGkpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCBpICYmIHRoaXMuX29wZW4odCwgZSwgaSksIHZvaWQgMClcbiAgICAgICAgfSwgX29wZW46IGZ1bmN0aW9uICh0LCBpLCBzKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBuKGUpIHtcbiAgICAgICAgICAgICAgICB1Lm9mID0gZSwgby5pcyhcIjpoaWRkZW5cIikgfHwgby5wb3NpdGlvbih1KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYSwgbywgciwgaCwgbCwgdSA9IGUuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMucG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYSA9IHRoaXMuX2ZpbmQoaSkpIHJldHVybiBhLnRvb2x0aXAuZmluZChcIi51aS10b29sdGlwLWNvbnRlbnRcIikuaHRtbChzKSwgdm9pZCAwO1xuICAgICAgICAgICAgICAgIGkuaXMoXCJbdGl0bGVdXCIpICYmICh0ICYmIFwibW91c2VvdmVyXCIgPT09IHQudHlwZSA/IGkuYXR0cihcInRpdGxlXCIsIFwiXCIpIDogaS5yZW1vdmVBdHRyKFwidGl0bGVcIikpLCBhID0gdGhpcy5fdG9vbHRpcChpKSwgbyA9IGEudG9vbHRpcCwgdGhpcy5fYWRkRGVzY3JpYmVkQnkoaSwgby5hdHRyKFwiaWRcIikpLCBvLmZpbmQoXCIudWktdG9vbHRpcC1jb250ZW50XCIpLmh0bWwocyksIHRoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKSwgcy5jbG9uZSA/IChsID0gcy5jbG9uZSgpLCBsLnJlbW92ZUF0dHIoXCJpZFwiKS5maW5kKFwiW2lkXVwiKS5yZW1vdmVBdHRyKFwiaWRcIikpIDogbCA9IHMsIGUoXCI8ZGl2PlwiKS5odG1sKGwpLmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbiksIHRoaXMub3B0aW9ucy50cmFjayAmJiB0ICYmIC9ebW91c2UvLnRlc3QodC50eXBlKSA/ICh0aGlzLl9vbih0aGlzLmRvY3VtZW50LCB7bW91c2Vtb3ZlOiBufSksIG4odCkpIDogby5wb3NpdGlvbihlLmV4dGVuZCh7b2Y6IGl9LCB0aGlzLm9wdGlvbnMucG9zaXRpb24pKSwgby5oaWRlKCksIHRoaXMuX3Nob3cobywgdGhpcy5vcHRpb25zLnNob3cpLCB0aGlzLm9wdGlvbnMuc2hvdyAmJiB0aGlzLm9wdGlvbnMuc2hvdy5kZWxheSAmJiAoaCA9IHRoaXMuZGVsYXllZFNob3cgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG8uaXMoXCI6dmlzaWJsZVwiKSAmJiAobih1Lm9mKSwgY2xlYXJJbnRlcnZhbChoKSlcbiAgICAgICAgICAgICAgICB9LCBlLmZ4LmludGVydmFsKSksIHRoaXMuX3RyaWdnZXIoXCJvcGVuXCIsIHQsIHt0b29sdGlwOiBvfSksIHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQua2V5Q29kZSA9PT0gZS51aS5rZXlDb2RlLkVTQ0FQRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gZS5FdmVudCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmN1cnJlbnRUYXJnZXQgPSBpWzBdLCB0aGlzLmNsb3NlKHMsICEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaVswXSAhPT0gdGhpcy5lbGVtZW50WzBdICYmIChyLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlVG9vbHRpcChvKVxuICAgICAgICAgICAgICAgIH0pLCB0ICYmIFwibW91c2VvdmVyXCIgIT09IHQudHlwZSB8fCAoci5tb3VzZWxlYXZlID0gXCJjbG9zZVwiKSwgdCAmJiBcImZvY3VzaW5cIiAhPT0gdC50eXBlIHx8IChyLmZvY3Vzb3V0ID0gXCJjbG9zZVwiKSwgdGhpcy5fb24oITAsIGksIHIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGNsb3NlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGksIHMgPSB0aGlzLCBuID0gZSh0ID8gdC5jdXJyZW50VGFyZ2V0IDogdGhpcy5lbGVtZW50KSwgYSA9IHRoaXMuX2ZpbmQobik7XG4gICAgICAgICAgICBhICYmIChpID0gYS50b29sdGlwLCBhLmNsb3NpbmcgfHwgKGNsZWFySW50ZXJ2YWwodGhpcy5kZWxheWVkU2hvdyksIG4uZGF0YShcInVpLXRvb2x0aXAtdGl0bGVcIikgJiYgIW4uYXR0cihcInRpdGxlXCIpICYmIG4uYXR0cihcInRpdGxlXCIsIG4uZGF0YShcInVpLXRvb2x0aXAtdGl0bGVcIikpLCB0aGlzLl9yZW1vdmVEZXNjcmliZWRCeShuKSwgYS5oaWRpbmcgPSAhMCwgaS5zdG9wKCEwKSwgdGhpcy5faGlkZShpLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHMuX3JlbW92ZVRvb2x0aXAoZSh0aGlzKSlcbiAgICAgICAgICAgIH0pLCBuLnJlbW92ZURhdGEoXCJ1aS10b29sdGlwLW9wZW5cIiksIHRoaXMuX29mZihuLCBcIm1vdXNlbGVhdmUgZm9jdXNvdXQga2V5dXBcIiksIG5bMF0gIT09IHRoaXMuZWxlbWVudFswXSAmJiB0aGlzLl9vZmYobiwgXCJyZW1vdmVcIiksIHRoaXMuX29mZih0aGlzLmRvY3VtZW50LCBcIm1vdXNlbW92ZVwiKSwgdCAmJiBcIm1vdXNlbGVhdmVcIiA9PT0gdC50eXBlICYmIGUuZWFjaCh0aGlzLnBhcmVudHMsIGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICAgICAgZShpLmVsZW1lbnQpLmF0dHIoXCJ0aXRsZVwiLCBpLnRpdGxlKSwgZGVsZXRlIHMucGFyZW50c1t0XVxuICAgICAgICAgICAgfSksIGEuY2xvc2luZyA9ICEwLCB0aGlzLl90cmlnZ2VyKFwiY2xvc2VcIiwgdCwge3Rvb2x0aXA6IGl9KSwgYS5oaWRpbmcgfHwgKGEuY2xvc2luZyA9ICExKSkpXG4gICAgICAgIH0sIF90b29sdGlwOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSBlKFwiPGRpdj5cIikuYXR0cihcInJvbGVcIiwgXCJ0b29sdGlwXCIpLmFkZENsYXNzKFwidWktdG9vbHRpcCB1aS13aWRnZXQgdWktY29ybmVyLWFsbCB1aS13aWRnZXQtY29udGVudCBcIiArICh0aGlzLm9wdGlvbnMudG9vbHRpcENsYXNzIHx8IFwiXCIpKSxcbiAgICAgICAgICAgICAgICBzID0gaS51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBlKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS10b29sdGlwLWNvbnRlbnRcIikuYXBwZW5kVG8oaSksIGkuYXBwZW5kVG8odGhpcy5kb2N1bWVudFswXS5ib2R5KSwgdGhpcy50b29sdGlwc1tzXSA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiB0LFxuICAgICAgICAgICAgICAgIHRvb2x0aXA6IGlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgX2ZpbmQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IGUuZGF0YShcInVpLXRvb2x0aXAtaWRcIik7XG4gICAgICAgICAgICByZXR1cm4gdCA/IHRoaXMudG9vbHRpcHNbdF0gOiBudWxsXG4gICAgICAgIH0sIF9yZW1vdmVUb29sdGlwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5yZW1vdmUoKSwgZGVsZXRlIHRoaXMudG9vbHRpcHNbZS5hdHRyKFwiaWRcIildXG4gICAgICAgIH0sIF9kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgICAgICBlLmVhY2godGhpcy50b29sdGlwcywgZnVuY3Rpb24gKGksIHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbiA9IGUuRXZlbnQoXCJibHVyXCIpLCBhID0gcy5lbGVtZW50O1xuICAgICAgICAgICAgICAgIG4udGFyZ2V0ID0gbi5jdXJyZW50VGFyZ2V0ID0gYVswXSwgdC5jbG9zZShuLCAhMCksIGUoXCIjXCIgKyBpKS5yZW1vdmUoKSwgYS5kYXRhKFwidWktdG9vbHRpcC10aXRsZVwiKSAmJiAoYS5hdHRyKFwidGl0bGVcIikgfHwgYS5hdHRyKFwidGl0bGVcIiwgYS5kYXRhKFwidWktdG9vbHRpcC10aXRsZVwiKSksIGEucmVtb3ZlRGF0YShcInVpLXRvb2x0aXAtdGl0bGVcIikpXG4gICAgICAgICAgICB9KSwgdGhpcy5saXZlUmVnaW9uLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICB9KVxufSk7XG4vKiFcbiAqIGpRdWVyeSBVSSBUb3VjaCBQdW5jaCAwLjIuM1xuICpcbiAqIENvcHlyaWdodCAyMDEx4oCTMjAxNCwgRGF2ZSBGdXJmZXJvXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cbiAqXG4gKiBEZXBlbmRzOlxuICogIGpxdWVyeS51aS53aWRnZXQuanNcbiAqICBqcXVlcnkudWkubW91c2UuanNcbiAqL1xuIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGYoYSxiKXtpZighKGEub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aD4xKSl7YS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPWEub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7ZC5pbml0TW91c2VFdmVudChiLCEwLCEwLHdpbmRvdywxLGMuc2NyZWVuWCxjLnNjcmVlblksYy5jbGllbnRYLGMuY2xpZW50WSwhMSwhMSwhMSwhMSwwLG51bGwpLGEudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZCl9fWlmKGEuc3VwcG9ydC50b3VjaD1cIm9udG91Y2hlbmRcImluIGRvY3VtZW50LGEuc3VwcG9ydC50b3VjaCl7dmFyIGUsYj1hLnVpLm1vdXNlLnByb3RvdHlwZSxjPWIuX21vdXNlSW5pdCxkPWIuX21vdXNlRGVzdHJveTtiLl90b3VjaFN0YXJ0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7IWUmJmIuX21vdXNlQ2FwdHVyZShhLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0pJiYoZT0hMCxiLl90b3VjaE1vdmVkPSExLGYoYSxcIm1vdXNlb3ZlclwiKSxmKGEsXCJtb3VzZW1vdmVcIiksZihhLFwibW91c2Vkb3duXCIpKX0sYi5fdG91Y2hNb3ZlPWZ1bmN0aW9uKGEpe2UmJih0aGlzLl90b3VjaE1vdmVkPSEwLGYoYSxcIm1vdXNlbW92ZVwiKSl9LGIuX3RvdWNoRW5kPWZ1bmN0aW9uKGEpe2UmJihmKGEsXCJtb3VzZXVwXCIpLGYoYSxcIm1vdXNlb3V0XCIpLHRoaXMuX3RvdWNoTW92ZWR8fGYoYSxcImNsaWNrXCIpLGU9ITEpfSxiLl9tb3VzZUluaXQ9ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2IuZWxlbWVudC5iaW5kKHt0b3VjaHN0YXJ0OmEucHJveHkoYixcIl90b3VjaFN0YXJ0XCIpLHRvdWNobW92ZTphLnByb3h5KGIsXCJfdG91Y2hNb3ZlXCIpLHRvdWNoZW5kOmEucHJveHkoYixcIl90b3VjaEVuZFwiKX0pLGMuY2FsbChiKX0sYi5fbW91c2VEZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcztiLmVsZW1lbnQudW5iaW5kKHt0b3VjaHN0YXJ0OmEucHJveHkoYixcIl90b3VjaFN0YXJ0XCIpLHRvdWNobW92ZTphLnByb3h5KGIsXCJfdG91Y2hNb3ZlXCIpLHRvdWNoZW5kOmEucHJveHkoYixcIl90b3VjaEVuZFwiKX0pLGQuY2FsbChiKX19fShqUXVlcnkpO1xuLyogQHByZXNlcnZlXG4gKiBMZWFmbGV0IDEuMy4zLCBhIEpTIGxpYnJhcnkgZm9yIGludGVyYWN0aXZlIG1hcHMuIGh0dHA6Ly9sZWFmbGV0anMuY29tXG4gKiAoYykgMjAxMC0yMDE4IFZsYWRpbWlyIEFnYWZvbmtpbiwgKGMpIDIwMTAtMjAxMSBDbG91ZE1hZGVcbiAqL1xuIWZ1bmN0aW9uKHQsaSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/aShleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0saSk6aSh0Lkw9e30pfSh0aGlzLGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7dmFyIGksZSxuLG87Zm9yKGU9MSxuPWFyZ3VtZW50cy5sZW5ndGg7ZTxuO2UrKyl7bz1hcmd1bWVudHNbZV07Zm9yKGkgaW4gbyl0W2ldPW9baV19cmV0dXJuIHR9ZnVuY3Rpb24gZSh0LGkpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZTtpZih0LmJpbmQpcmV0dXJuIHQuYmluZC5hcHBseSh0LGUuY2FsbChhcmd1bWVudHMsMSkpO3ZhciBuPWUuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoaSxuLmxlbmd0aD9uLmNvbmNhdChlLmNhbGwoYXJndW1lbnRzKSk6YXJndW1lbnRzKX19ZnVuY3Rpb24gbih0KXtyZXR1cm4gdC5fbGVhZmxldF9pZD10Ll9sZWFmbGV0X2lkfHwrK2VpLHQuX2xlYWZsZXRfaWR9ZnVuY3Rpb24gbyh0LGksZSl7dmFyIG4sbyxzLHI7cmV0dXJuIHI9ZnVuY3Rpb24oKXtuPSExLG8mJihzLmFwcGx5KGUsbyksbz0hMSl9LHM9ZnVuY3Rpb24oKXtuP289YXJndW1lbnRzOih0LmFwcGx5KGUsYXJndW1lbnRzKSxzZXRUaW1lb3V0KHIsaSksbj0hMCl9fWZ1bmN0aW9uIHModCxpLGUpe3ZhciBuPWlbMV0sbz1pWzBdLHM9bi1vO3JldHVybiB0PT09biYmZT90OigodC1vKSVzK3MpJXMrb31mdW5jdGlvbiByKCl7cmV0dXJuITF9ZnVuY3Rpb24gYSh0LGkpe3ZhciBlPU1hdGgucG93KDEwLHZvaWQgMD09PWk/NjppKTtyZXR1cm4gTWF0aC5yb3VuZCh0KmUpL2V9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gdC50cmltP3QudHJpbSgpOnQucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1mdW5jdGlvbiB1KHQpe3JldHVybiBoKHQpLnNwbGl0KC9cXHMrLyl9ZnVuY3Rpb24gbCh0LGkpe3QuaGFzT3duUHJvcGVydHkoXCJvcHRpb25zXCIpfHwodC5vcHRpb25zPXQub3B0aW9ucz9paSh0Lm9wdGlvbnMpOnt9KTtmb3IodmFyIGUgaW4gaSl0Lm9wdGlvbnNbZV09aVtlXTtyZXR1cm4gdC5vcHRpb25zfWZ1bmN0aW9uIGModCxpLGUpe3ZhciBuPVtdO2Zvcih2YXIgbyBpbiB0KW4ucHVzaChlbmNvZGVVUklDb21wb25lbnQoZT9vLnRvVXBwZXJDYXNlKCk6bykrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbb10pKTtyZXR1cm4oaSYmLTEhPT1pLmluZGV4T2YoXCI/XCIpP1wiJlwiOlwiP1wiKStuLmpvaW4oXCImXCIpfWZ1bmN0aW9uIF8odCxpKXtyZXR1cm4gdC5yZXBsYWNlKG5pLGZ1bmN0aW9uKHQsZSl7dmFyIG49aVtlXTtpZih2b2lkIDA9PT1uKXRocm93IG5ldyBFcnJvcihcIk5vIHZhbHVlIHByb3ZpZGVkIGZvciB2YXJpYWJsZSBcIit0KTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYobj1uKGkpKSxufSl9ZnVuY3Rpb24gZCh0LGkpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV09PT1pKXJldHVybiBlO3JldHVybi0xfWZ1bmN0aW9uIHAodCl7cmV0dXJuIHdpbmRvd1tcIndlYmtpdFwiK3RdfHx3aW5kb3dbXCJtb3pcIit0XXx8d2luZG93W1wibXNcIit0XX1mdW5jdGlvbiBtKHQpe3ZhciBpPStuZXcgRGF0ZSxlPU1hdGgubWF4KDAsMTYtKGktcmkpKTtyZXR1cm4gcmk9aStlLHdpbmRvdy5zZXRUaW1lb3V0KHQsZSl9ZnVuY3Rpb24gZih0LGksbil7aWYoIW58fGFpIT09bSlyZXR1cm4gYWkuY2FsbCh3aW5kb3csZSh0LGkpKTt0LmNhbGwoaSl9ZnVuY3Rpb24gZyh0KXt0JiZoaS5jYWxsKHdpbmRvdyx0KX1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIHkodCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEwmJkwmJkwuTWl4aW4pe3Q9b2kodCk/dDpbdF07Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXT09PUwuTWl4aW4uRXZlbnRzJiZjb25zb2xlLndhcm4oXCJEZXByZWNhdGVkIGluY2x1ZGUgb2YgTC5NaXhpbi5FdmVudHM6IHRoaXMgcHJvcGVydHkgd2lsbCBiZSByZW1vdmVkIGluIGZ1dHVyZSByZWxlYXNlcywgcGxlYXNlIGluaGVyaXQgZnJvbSBMLkV2ZW50ZWQgaW5zdGVhZC5cIiwobmV3IEVycm9yKS5zdGFjayl9fWZ1bmN0aW9uIHgodCxpLGUpe3RoaXMueD1lP01hdGgucm91bmQodCk6dCx0aGlzLnk9ZT9NYXRoLnJvdW5kKGkpOml9ZnVuY3Rpb24gdyh0LGksZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiB4P3Q6b2kodCk/bmV3IHgodFswXSx0WzFdKTp2b2lkIDA9PT10fHxudWxsPT09dD90Olwib2JqZWN0XCI9PXR5cGVvZiB0JiZcInhcImluIHQmJlwieVwiaW4gdD9uZXcgeCh0LngsdC55KTpuZXcgeCh0LGksZSl9ZnVuY3Rpb24gUCh0LGkpe2lmKHQpZm9yKHZhciBlPWk/W3QsaV06dCxuPTAsbz1lLmxlbmd0aDtuPG87bisrKXRoaXMuZXh0ZW5kKGVbbl0pfWZ1bmN0aW9uIGIodCxpKXtyZXR1cm4hdHx8dCBpbnN0YW5jZW9mIFA/dDpuZXcgUCh0LGkpfWZ1bmN0aW9uIFQodCxpKXtpZih0KWZvcih2YXIgZT1pP1t0LGldOnQsbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl0aGlzLmV4dGVuZChlW25dKX1mdW5jdGlvbiB6KHQsaSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBUP3Q6bmV3IFQodCxpKX1mdW5jdGlvbiBNKHQsaSxlKXtpZihpc05hTih0KXx8aXNOYU4oaSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBMYXRMbmcgb2JqZWN0OiAoXCIrdCtcIiwgXCIraStcIilcIik7dGhpcy5sYXQ9K3QsdGhpcy5sbmc9K2ksdm9pZCAwIT09ZSYmKHRoaXMuYWx0PStlKX1mdW5jdGlvbiBDKHQsaSxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIE0/dDpvaSh0KSYmXCJvYmplY3RcIiE9dHlwZW9mIHRbMF0/Mz09PXQubGVuZ3RoP25ldyBNKHRbMF0sdFsxXSx0WzJdKToyPT09dC5sZW5ndGg/bmV3IE0odFswXSx0WzFdKTpudWxsOnZvaWQgMD09PXR8fG51bGw9PT10P3Q6XCJvYmplY3RcIj09dHlwZW9mIHQmJlwibGF0XCJpbiB0P25ldyBNKHQubGF0LFwibG5nXCJpbiB0P3QubG5nOnQubG9uLHQuYWx0KTp2b2lkIDA9PT1pP251bGw6bmV3IE0odCxpLGUpfWZ1bmN0aW9uIFModCxpLGUsbil7aWYob2kodCkpcmV0dXJuIHRoaXMuX2E9dFswXSx0aGlzLl9iPXRbMV0sdGhpcy5fYz10WzJdLHZvaWQodGhpcy5fZD10WzNdKTt0aGlzLl9hPXQsdGhpcy5fYj1pLHRoaXMuX2M9ZSx0aGlzLl9kPW59ZnVuY3Rpb24gWih0LGksZSxuKXtyZXR1cm4gbmV3IFModCxpLGUsbil9ZnVuY3Rpb24gRSh0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIix0KX1mdW5jdGlvbiBrKHQsaSl7dmFyIGUsbixvLHMscixhLGg9XCJcIjtmb3IoZT0wLG89dC5sZW5ndGg7ZTxvO2UrKyl7Zm9yKG49MCxzPShyPXRbZV0pLmxlbmd0aDtuPHM7bisrKWE9cltuXSxoKz0obj9cIkxcIjpcIk1cIikrYS54K1wiIFwiK2EueTtoKz1pP0ppP1wielwiOlwieFwiOlwiXCJ9cmV0dXJuIGh8fFwiTTAgMFwifWZ1bmN0aW9uIEEodCl7cmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHQpPj0wfWZ1bmN0aW9uIEIodCxpLGUsbil7cmV0dXJuXCJ0b3VjaHN0YXJ0XCI9PT1pP08odCxlLG4pOlwidG91Y2htb3ZlXCI9PT1pP1codCxlLG4pOlwidG91Y2hlbmRcIj09PWkmJkgodCxlLG4pLHRoaXN9ZnVuY3Rpb24gSSh0LGksZSl7dmFyIG49dFtcIl9sZWFmbGV0X1wiK2krZV07cmV0dXJuXCJ0b3VjaHN0YXJ0XCI9PT1pP3QucmVtb3ZlRXZlbnRMaXN0ZW5lcih0ZSxuLCExKTpcInRvdWNobW92ZVwiPT09aT90LnJlbW92ZUV2ZW50TGlzdGVuZXIoaWUsbiwhMSk6XCJ0b3VjaGVuZFwiPT09aSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlZSxuLCExKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIobmUsbiwhMSkpLHRoaXN9ZnVuY3Rpb24gTyh0LGksbil7dmFyIG89ZShmdW5jdGlvbih0KXtpZihcIm1vdXNlXCIhPT10LnBvaW50ZXJUeXBlJiZ0Lk1TUE9JTlRFUl9UWVBFX01PVVNFJiZ0LnBvaW50ZXJUeXBlIT09dC5NU1BPSU5URVJfVFlQRV9NT1VTRSl7aWYoIShvZS5pbmRleE9mKHQudGFyZ2V0LnRhZ05hbWUpPDApKXJldHVybjtQdCh0KX1qKHQsaSl9KTt0W1wiX2xlYWZsZXRfdG91Y2hzdGFydFwiK25dPW8sdC5hZGRFdmVudExpc3RlbmVyKHRlLG8sITEpLHJlfHwoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGUsUiwhMCksZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoaWUsTiwhMCksZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZWUsRCwhMCksZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIobmUsRCwhMCkscmU9ITApfWZ1bmN0aW9uIFIodCl7c2VbdC5wb2ludGVySWRdPXQsYWUrK31mdW5jdGlvbiBOKHQpe3NlW3QucG9pbnRlcklkXSYmKHNlW3QucG9pbnRlcklkXT10KX1mdW5jdGlvbiBEKHQpe2RlbGV0ZSBzZVt0LnBvaW50ZXJJZF0sYWUtLX1mdW5jdGlvbiBqKHQsaSl7dC50b3VjaGVzPVtdO2Zvcih2YXIgZSBpbiBzZSl0LnRvdWNoZXMucHVzaChzZVtlXSk7dC5jaGFuZ2VkVG91Y2hlcz1bdF0saSh0KX1mdW5jdGlvbiBXKHQsaSxlKXt2YXIgbj1mdW5jdGlvbih0KXsodC5wb2ludGVyVHlwZSE9PXQuTVNQT0lOVEVSX1RZUEVfTU9VU0UmJlwibW91c2VcIiE9PXQucG9pbnRlclR5cGV8fDAhPT10LmJ1dHRvbnMpJiZqKHQsaSl9O3RbXCJfbGVhZmxldF90b3VjaG1vdmVcIitlXT1uLHQuYWRkRXZlbnRMaXN0ZW5lcihpZSxuLCExKX1mdW5jdGlvbiBIKHQsaSxlKXt2YXIgbj1mdW5jdGlvbih0KXtqKHQsaSl9O3RbXCJfbGVhZmxldF90b3VjaGVuZFwiK2VdPW4sdC5hZGRFdmVudExpc3RlbmVyKGVlLG4sITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihuZSxuLCExKX1mdW5jdGlvbiBGKHQsaSxlKXtmdW5jdGlvbiBuKHQpe3ZhciBpO2lmKFZpKXtpZighYml8fFwibW91c2VcIj09PXQucG9pbnRlclR5cGUpcmV0dXJuO2k9YWV9ZWxzZSBpPXQudG91Y2hlcy5sZW5ndGg7aWYoIShpPjEpKXt2YXIgZT1EYXRlLm5vdygpLG49ZS0oc3x8ZSk7cj10LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQsYT1uPjAmJm48PWgscz1lfX1mdW5jdGlvbiBvKHQpe2lmKGEmJiFyLmNhbmNlbEJ1YmJsZSl7aWYoVmkpe2lmKCFiaXx8XCJtb3VzZVwiPT09dC5wb2ludGVyVHlwZSlyZXR1cm47dmFyIGUsbixvPXt9O2ZvcihuIGluIHIpZT1yW25dLG9bbl09ZSYmZS5iaW5kP2UuYmluZChyKTplO3I9b31yLnR5cGU9XCJkYmxjbGlja1wiLGkocikscz1udWxsfX12YXIgcyxyLGE9ITEsaD0yNTA7cmV0dXJuIHRbbGUraGUrZV09bix0W2xlK3VlK2VdPW8sdFtsZStcImRibGNsaWNrXCIrZV09aSx0LmFkZEV2ZW50TGlzdGVuZXIoaGUsbiwhMSksdC5hZGRFdmVudExpc3RlbmVyKHVlLG8sITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsaSwhMSksdGhpc31mdW5jdGlvbiBVKHQsaSl7dmFyIGU9dFtsZStoZStpXSxuPXRbbGUrdWUraV0sbz10W2xlK1wiZGJsY2xpY2tcIitpXTtyZXR1cm4gdC5yZW1vdmVFdmVudExpc3RlbmVyKGhlLGUsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcih1ZSxuLCExKSxiaXx8dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixvLCExKSx0aGlzfWZ1bmN0aW9uIFYodCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCk6dH1mdW5jdGlvbiBxKHQsaSl7dmFyIGU9dC5zdHlsZVtpXXx8dC5jdXJyZW50U3R5bGUmJnQuY3VycmVudFN0eWxlW2ldO2lmKCghZXx8XCJhdXRvXCI9PT1lKSYmZG9jdW1lbnQuZGVmYXVsdFZpZXcpe3ZhciBuPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodCxudWxsKTtlPW4/bltpXTpudWxsfXJldHVyblwiYXV0b1wiPT09ZT9udWxsOmV9ZnVuY3Rpb24gRyh0LGksZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtyZXR1cm4gbi5jbGFzc05hbWU9aXx8XCJcIixlJiZlLmFwcGVuZENoaWxkKG4pLG59ZnVuY3Rpb24gSyh0KXt2YXIgaT10LnBhcmVudE5vZGU7aSYmaS5yZW1vdmVDaGlsZCh0KX1mdW5jdGlvbiBZKHQpe2Zvcig7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gWCh0KXt2YXIgaT10LnBhcmVudE5vZGU7aS5sYXN0Q2hpbGQhPT10JiZpLmFwcGVuZENoaWxkKHQpfWZ1bmN0aW9uIEoodCl7dmFyIGk9dC5wYXJlbnROb2RlO2kuZmlyc3RDaGlsZCE9PXQmJmkuaW5zZXJ0QmVmb3JlKHQsaS5maXJzdENoaWxkKX1mdW5jdGlvbiAkKHQsaSl7aWYodm9pZCAwIT09dC5jbGFzc0xpc3QpcmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKGkpO3ZhciBlPWV0KHQpO3JldHVybiBlLmxlbmd0aD4wJiZuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIraStcIihcXFxcc3wkKVwiKS50ZXN0KGUpfWZ1bmN0aW9uIFEodCxpKXtpZih2b2lkIDAhPT10LmNsYXNzTGlzdClmb3IodmFyIGU9dShpKSxuPTAsbz1lLmxlbmd0aDtuPG87bisrKXQuY2xhc3NMaXN0LmFkZChlW25dKTtlbHNlIGlmKCEkKHQsaSkpe3ZhciBzPWV0KHQpO2l0KHQsKHM/cytcIiBcIjpcIlwiKStpKX19ZnVuY3Rpb24gdHQodCxpKXt2b2lkIDAhPT10LmNsYXNzTGlzdD90LmNsYXNzTGlzdC5yZW1vdmUoaSk6aXQodCxoKChcIiBcIitldCh0KStcIiBcIikucmVwbGFjZShcIiBcIitpK1wiIFwiLFwiIFwiKSkpfWZ1bmN0aW9uIGl0KHQsaSl7dm9pZCAwPT09dC5jbGFzc05hbWUuYmFzZVZhbD90LmNsYXNzTmFtZT1pOnQuY2xhc3NOYW1lLmJhc2VWYWw9aX1mdW5jdGlvbiBldCh0KXtyZXR1cm4gdm9pZCAwPT09dC5jbGFzc05hbWUuYmFzZVZhbD90LmNsYXNzTmFtZTp0LmNsYXNzTmFtZS5iYXNlVmFsfWZ1bmN0aW9uIG50KHQsaSl7XCJvcGFjaXR5XCJpbiB0LnN0eWxlP3Quc3R5bGUub3BhY2l0eT1pOlwiZmlsdGVyXCJpbiB0LnN0eWxlJiZvdCh0LGkpfWZ1bmN0aW9uIG90KHQsaSl7dmFyIGU9ITEsbj1cIkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhXCI7dHJ5e2U9dC5maWx0ZXJzLml0ZW0obil9Y2F0Y2godCl7aWYoMT09PWkpcmV0dXJufWk9TWF0aC5yb3VuZCgxMDAqaSksZT8oZS5FbmFibGVkPTEwMCE9PWksZS5PcGFjaXR5PWkpOnQuc3R5bGUuZmlsdGVyKz1cIiBwcm9naWQ6XCIrbitcIihvcGFjaXR5PVwiK2krXCIpXCJ9ZnVuY3Rpb24gc3QodCl7Zm9yKHZhciBpPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXWluIGkpcmV0dXJuIHRbZV07cmV0dXJuITF9ZnVuY3Rpb24gcnQodCxpLGUpe3ZhciBuPWl8fG5ldyB4KDAsMCk7dC5zdHlsZVtjZV09KFJpP1widHJhbnNsYXRlKFwiK24ueCtcInB4LFwiK24ueStcInB4KVwiOlwidHJhbnNsYXRlM2QoXCIrbi54K1wicHgsXCIrbi55K1wicHgsMClcIikrKGU/XCIgc2NhbGUoXCIrZStcIilcIjpcIlwiKX1mdW5jdGlvbiBhdCh0LGkpe3QuX2xlYWZsZXRfcG9zPWksamk/cnQodCxpKToodC5zdHlsZS5sZWZ0PWkueCtcInB4XCIsdC5zdHlsZS50b3A9aS55K1wicHhcIil9ZnVuY3Rpb24gaHQodCl7cmV0dXJuIHQuX2xlYWZsZXRfcG9zfHxuZXcgeCgwLDApfWZ1bmN0aW9uIHV0KCl7bXQod2luZG93LFwiZHJhZ3N0YXJ0XCIsUHQpfWZ1bmN0aW9uIGx0KCl7ZnQod2luZG93LFwiZHJhZ3N0YXJ0XCIsUHQpfWZ1bmN0aW9uIGN0KHQpe2Zvcig7LTE9PT10LnRhYkluZGV4Oyl0PXQucGFyZW50Tm9kZTt0LnN0eWxlJiYoX3QoKSxtZT10LGZlPXQuc3R5bGUub3V0bGluZSx0LnN0eWxlLm91dGxpbmU9XCJub25lXCIsbXQod2luZG93LFwia2V5ZG93blwiLF90KSl9ZnVuY3Rpb24gX3QoKXttZSYmKG1lLnN0eWxlLm91dGxpbmU9ZmUsbWU9dm9pZCAwLGZlPXZvaWQgMCxmdCh3aW5kb3csXCJrZXlkb3duXCIsX3QpKX1mdW5jdGlvbiBkdCh0KXtkb3t0PXQucGFyZW50Tm9kZX13aGlsZSghKHQub2Zmc2V0V2lkdGgmJnQub2Zmc2V0SGVpZ2h0fHx0PT09ZG9jdW1lbnQuYm9keSkpO3JldHVybiB0fWZ1bmN0aW9uIHB0KHQpe3ZhciBpPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3g6aS53aWR0aC90Lm9mZnNldFdpZHRofHwxLHk6aS5oZWlnaHQvdC5vZmZzZXRIZWlnaHR8fDEsYm91bmRpbmdDbGllbnRSZWN0Oml9fWZ1bmN0aW9uIG10KHQsaSxlLG4pe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBpKWZvcih2YXIgbyBpbiBpKWd0KHQsbyxpW29dLGUpO2Vsc2UgZm9yKHZhciBzPTAscj0oaT11KGkpKS5sZW5ndGg7czxyO3MrKylndCh0LGlbc10sZSxuKTtyZXR1cm4gdGhpc31mdW5jdGlvbiBmdCh0LGksZSxuKXtpZihcIm9iamVjdFwiPT10eXBlb2YgaSlmb3IodmFyIG8gaW4gaSl2dCh0LG8saVtvXSxlKTtlbHNlIGlmKGkpZm9yKHZhciBzPTAscj0oaT11KGkpKS5sZW5ndGg7czxyO3MrKyl2dCh0LGlbc10sZSxuKTtlbHNle2Zvcih2YXIgYSBpbiB0W3llXSl2dCh0LGEsdFt5ZV1bYV0pO2RlbGV0ZSB0W3llXX1yZXR1cm4gdGhpc31mdW5jdGlvbiBndCh0LGksZSxvKXt2YXIgcz1pK24oZSkrKG8/XCJfXCIrbihvKTpcIlwiKTtpZih0W3llXSYmdFt5ZV1bc10pcmV0dXJuIHRoaXM7dmFyIHI9ZnVuY3Rpb24oaSl7cmV0dXJuIGUuY2FsbChvfHx0LGl8fHdpbmRvdy5ldmVudCl9LGE9cjtWaSYmMD09PWkuaW5kZXhPZihcInRvdWNoXCIpP0IodCxpLHIscyk6IXFpfHxcImRibGNsaWNrXCIhPT1pfHwhRnx8VmkmJkVpP1wiYWRkRXZlbnRMaXN0ZW5lclwiaW4gdD9cIm1vdXNld2hlZWxcIj09PWk/dC5hZGRFdmVudExpc3RlbmVyKFwib253aGVlbFwiaW4gdD9cIndoZWVsXCI6XCJtb3VzZXdoZWVsXCIsciwhMSk6XCJtb3VzZWVudGVyXCI9PT1pfHxcIm1vdXNlbGVhdmVcIj09PWk/KHI9ZnVuY3Rpb24oaSl7aT1pfHx3aW5kb3cuZXZlbnQsQ3QodCxpKSYmYShpKX0sdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiPT09aT9cIm1vdXNlb3ZlclwiOlwibW91c2VvdXRcIixyLCExKSk6KFwiY2xpY2tcIj09PWkmJnppJiYocj1mdW5jdGlvbih0KXtTdCh0LGEpfSksdC5hZGRFdmVudExpc3RlbmVyKGksciwhMSkpOlwiYXR0YWNoRXZlbnRcImluIHQmJnQuYXR0YWNoRXZlbnQoXCJvblwiK2kscik6Rih0LHIscyksdFt5ZV09dFt5ZV18fHt9LHRbeWVdW3NdPXJ9ZnVuY3Rpb24gdnQodCxpLGUsbyl7dmFyIHM9aStuKGUpKyhvP1wiX1wiK24obyk6XCJcIikscj10W3llXSYmdFt5ZV1bc107aWYoIXIpcmV0dXJuIHRoaXM7VmkmJjA9PT1pLmluZGV4T2YoXCJ0b3VjaFwiKT9JKHQsaSxzKTohcWl8fFwiZGJsY2xpY2tcIiE9PWl8fCFVfHxWaSYmRWk/XCJyZW1vdmVFdmVudExpc3RlbmVyXCJpbiB0P1wibW91c2V3aGVlbFwiPT09aT90LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbndoZWVsXCJpbiB0P1wid2hlZWxcIjpcIm1vdXNld2hlZWxcIixyLCExKTp0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCI9PT1pP1wibW91c2VvdmVyXCI6XCJtb3VzZWxlYXZlXCI9PT1pP1wibW91c2VvdXRcIjppLHIsITEpOlwiZGV0YWNoRXZlbnRcImluIHQmJnQuZGV0YWNoRXZlbnQoXCJvblwiK2kscik6VSh0LHMpLHRbeWVdW3NdPW51bGx9ZnVuY3Rpb24geXQodCl7cmV0dXJuIHQuc3RvcFByb3BhZ2F0aW9uP3Quc3RvcFByb3BhZ2F0aW9uKCk6dC5vcmlnaW5hbEV2ZW50P3Qub3JpZ2luYWxFdmVudC5fc3RvcHBlZD0hMDp0LmNhbmNlbEJ1YmJsZT0hMCxNdCh0KSx0aGlzfWZ1bmN0aW9uIHh0KHQpe3JldHVybiBndCh0LFwibW91c2V3aGVlbFwiLHl0KSx0aGlzfWZ1bmN0aW9uIHd0KHQpe3JldHVybiBtdCh0LFwibW91c2Vkb3duIHRvdWNoc3RhcnQgZGJsY2xpY2tcIix5dCksZ3QodCxcImNsaWNrXCIsenQpLHRoaXN9ZnVuY3Rpb24gUHQodCl7cmV0dXJuIHQucHJldmVudERlZmF1bHQ/dC5wcmV2ZW50RGVmYXVsdCgpOnQucmV0dXJuVmFsdWU9ITEsdGhpc31mdW5jdGlvbiBMdCh0KXtyZXR1cm4gUHQodCkseXQodCksdGhpc31mdW5jdGlvbiBidCh0LGkpe2lmKCFpKXJldHVybiBuZXcgeCh0LmNsaWVudFgsdC5jbGllbnRZKTt2YXIgZT1wdChpKSxuPWUuYm91bmRpbmdDbGllbnRSZWN0O3JldHVybiBuZXcgeCgodC5jbGllbnRYLW4ubGVmdCkvZS54LWkuY2xpZW50TGVmdCwodC5jbGllbnRZLW4udG9wKS9lLnktaS5jbGllbnRUb3ApfWZ1bmN0aW9uIFR0KHQpe3JldHVybiBiaT90LndoZWVsRGVsdGFZLzI6dC5kZWx0YVkmJjA9PT10LmRlbHRhTW9kZT8tdC5kZWx0YVkveGU6dC5kZWx0YVkmJjE9PT10LmRlbHRhTW9kZT8yMCotdC5kZWx0YVk6dC5kZWx0YVkmJjI9PT10LmRlbHRhTW9kZT82MCotdC5kZWx0YVk6dC5kZWx0YVh8fHQuZGVsdGFaPzA6dC53aGVlbERlbHRhPyh0LndoZWVsRGVsdGFZfHx0LndoZWVsRGVsdGEpLzI6dC5kZXRhaWwmJk1hdGguYWJzKHQuZGV0YWlsKTwzMjc2NT8yMCotdC5kZXRhaWw6dC5kZXRhaWw/dC5kZXRhaWwvLTMyNzY1KjYwOjB9ZnVuY3Rpb24genQodCl7d2VbdC50eXBlXT0hMH1mdW5jdGlvbiBNdCh0KXt2YXIgaT13ZVt0LnR5cGVdO3JldHVybiB3ZVt0LnR5cGVdPSExLGl9ZnVuY3Rpb24gQ3QodCxpKXt2YXIgZT1pLnJlbGF0ZWRUYXJnZXQ7aWYoIWUpcmV0dXJuITA7dHJ5e2Zvcig7ZSYmZSE9PXQ7KWU9ZS5wYXJlbnROb2RlfWNhdGNoKHQpe3JldHVybiExfXJldHVybiBlIT09dH1mdW5jdGlvbiBTdCh0LGkpe3ZhciBlPXQudGltZVN0YW1wfHx0Lm9yaWdpbmFsRXZlbnQmJnQub3JpZ2luYWxFdmVudC50aW1lU3RhbXAsbj1nZSYmZS1nZTtuJiZuPjEwMCYmbjw1MDB8fHQudGFyZ2V0Ll9zaW11bGF0ZWRDbGljayYmIXQuX3NpbXVsYXRlZD9MdCh0KTooZ2U9ZSxpKHQpKX1mdW5jdGlvbiBadCh0LGkpe2lmKCFpfHwhdC5sZW5ndGgpcmV0dXJuIHQuc2xpY2UoKTt2YXIgZT1pKmk7cmV0dXJuIHQ9QnQodCxlKSx0PWt0KHQsZSl9ZnVuY3Rpb24gRXQodCxpLGUpe3JldHVybiBNYXRoLnNxcnQoRHQodCxpLGUsITApKX1mdW5jdGlvbiBrdCh0LGkpe3ZhciBlPXQubGVuZ3RoLG49bmV3KHR5cGVvZiBVaW50OEFycmF5IT12b2lkIDArXCJcIj9VaW50OEFycmF5OkFycmF5KShlKTtuWzBdPW5bZS0xXT0xLEF0KHQsbixpLDAsZS0xKTt2YXIgbyxzPVtdO2ZvcihvPTA7bzxlO28rKyluW29dJiZzLnB1c2godFtvXSk7cmV0dXJuIHN9ZnVuY3Rpb24gQXQodCxpLGUsbixvKXt2YXIgcyxyLGEsaD0wO2ZvcihyPW4rMTtyPD1vLTE7cisrKShhPUR0KHRbcl0sdFtuXSx0W29dLCEwKSk+aCYmKHM9cixoPWEpO2g+ZSYmKGlbc109MSxBdCh0LGksZSxuLHMpLEF0KHQsaSxlLHMsbykpfWZ1bmN0aW9uIEJ0KHQsaSl7Zm9yKHZhciBlPVt0WzBdXSxuPTEsbz0wLHM9dC5sZW5ndGg7bjxzO24rKylOdCh0W25dLHRbb10pPmkmJihlLnB1c2godFtuXSksbz1uKTtyZXR1cm4gbzxzLTEmJmUucHVzaCh0W3MtMV0pLGV9ZnVuY3Rpb24gSXQodCxpLGUsbixvKXt2YXIgcyxyLGEsaD1uP2tlOlJ0KHQsZSksdT1SdChpLGUpO2ZvcihrZT11Ozspe2lmKCEoaHx1KSlyZXR1cm5bdCxpXTtpZihoJnUpcmV0dXJuITE7YT1SdChyPU90KHQsaSxzPWh8fHUsZSxvKSxlKSxzPT09aD8odD1yLGg9YSk6KGk9cix1PWEpfX1mdW5jdGlvbiBPdCh0LGksZSxuLG8pe3ZhciBzLHIsYT1pLngtdC54LGg9aS55LXQueSx1PW4ubWluLGw9bi5tYXg7cmV0dXJuIDgmZT8ocz10LngrYSoobC55LXQueSkvaCxyPWwueSk6NCZlPyhzPXQueCthKih1LnktdC55KS9oLHI9dS55KToyJmU/KHM9bC54LHI9dC55K2gqKGwueC10LngpL2EpOjEmZSYmKHM9dS54LHI9dC55K2gqKHUueC10LngpL2EpLG5ldyB4KHMscixvKX1mdW5jdGlvbiBSdCh0LGkpe3ZhciBlPTA7cmV0dXJuIHQueDxpLm1pbi54P2V8PTE6dC54PmkubWF4LngmJihlfD0yKSx0Lnk8aS5taW4ueT9lfD00OnQueT5pLm1heC55JiYoZXw9OCksZX1mdW5jdGlvbiBOdCh0LGkpe3ZhciBlPWkueC10Lngsbj1pLnktdC55O3JldHVybiBlKmUrbipufWZ1bmN0aW9uIER0KHQsaSxlLG4pe3ZhciBvLHM9aS54LHI9aS55LGE9ZS54LXMsaD1lLnktcix1PWEqYStoKmg7cmV0dXJuIHU+MCYmKChvPSgodC54LXMpKmErKHQueS1yKSpoKS91KT4xPyhzPWUueCxyPWUueSk6bz4wJiYocys9YSpvLHIrPWgqbykpLGE9dC54LXMsaD10LnktcixuP2EqYStoKmg6bmV3IHgocyxyKX1mdW5jdGlvbiBqdCh0KXtyZXR1cm4hb2kodFswXSl8fFwib2JqZWN0XCIhPXR5cGVvZiB0WzBdWzBdJiZ2b2lkIDAhPT10WzBdWzBdfWZ1bmN0aW9uIFd0KHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJEZXByZWNhdGVkIHVzZSBvZiBfZmxhdCwgcGxlYXNlIHVzZSBMLkxpbmVVdGlsLmlzRmxhdCBpbnN0ZWFkLlwiKSxqdCh0KX1mdW5jdGlvbiBIdCh0LGksZSl7dmFyIG4sbyxzLHIsYSxoLHUsbCxjLF89WzEsNCwyLDhdO2ZvcihvPTAsdT10Lmxlbmd0aDtvPHU7bysrKXRbb10uX2NvZGU9UnQodFtvXSxpKTtmb3Iocj0wO3I8NDtyKyspe2ZvcihsPV9bcl0sbj1bXSxvPTAscz0odT10Lmxlbmd0aCktMTtvPHU7cz1vKyspYT10W29dLGg9dFtzXSxhLl9jb2RlJmw/aC5fY29kZSZsfHwoKGM9T3QoaCxhLGwsaSxlKSkuX2NvZGU9UnQoYyxpKSxuLnB1c2goYykpOihoLl9jb2RlJmwmJigoYz1PdChoLGEsbCxpLGUpKS5fY29kZT1SdChjLGkpLG4ucHVzaChjKSksbi5wdXNoKGEpKTt0PW59cmV0dXJuIHR9ZnVuY3Rpb24gRnQodCxpKXt2YXIgZSxuLG8scyxyPVwiRmVhdHVyZVwiPT09dC50eXBlP3QuZ2VvbWV0cnk6dCxhPXI/ci5jb29yZGluYXRlczpudWxsLGg9W10sdT1pJiZpLnBvaW50VG9MYXllcixsPWkmJmkuY29vcmRzVG9MYXRMbmd8fFV0O2lmKCFhJiYhcilyZXR1cm4gbnVsbDtzd2l0Y2goci50eXBlKXtjYXNlXCJQb2ludFwiOnJldHVybiBlPWwoYSksdT91KHQsZSk6bmV3ICRlKGUpO2Nhc2VcIk11bHRpUG9pbnRcIjpmb3Iobz0wLHM9YS5sZW5ndGg7bzxzO28rKyllPWwoYVtvXSksaC5wdXNoKHU/dSh0LGUpOm5ldyAkZShlKSk7cmV0dXJuIG5ldyBLZShoKTtjYXNlXCJMaW5lU3RyaW5nXCI6Y2FzZVwiTXVsdGlMaW5lU3RyaW5nXCI6cmV0dXJuIG49VnQoYSxcIkxpbmVTdHJpbmdcIj09PXIudHlwZT8wOjEsbCksbmV3IG5uKG4saSk7Y2FzZVwiUG9seWdvblwiOmNhc2VcIk11bHRpUG9seWdvblwiOnJldHVybiBuPVZ0KGEsXCJQb2x5Z29uXCI9PT1yLnR5cGU/MToyLGwpLG5ldyBvbihuLGkpO2Nhc2VcIkdlb21ldHJ5Q29sbGVjdGlvblwiOmZvcihvPTAscz1yLmdlb21ldHJpZXMubGVuZ3RoO288cztvKyspe3ZhciBjPUZ0KHtnZW9tZXRyeTpyLmdlb21ldHJpZXNbb10sdHlwZTpcIkZlYXR1cmVcIixwcm9wZXJ0aWVzOnQucHJvcGVydGllc30saSk7YyYmaC5wdXNoKGMpfXJldHVybiBuZXcgS2UoaCk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEdlb0pTT04gb2JqZWN0LlwiKX19ZnVuY3Rpb24gVXQodCl7cmV0dXJuIG5ldyBNKHRbMV0sdFswXSx0WzJdKX1mdW5jdGlvbiBWdCh0LGksZSl7Zm9yKHZhciBuLG89W10scz0wLHI9dC5sZW5ndGg7czxyO3MrKyluPWk/VnQodFtzXSxpLTEsZSk6KGV8fFV0KSh0W3NdKSxvLnB1c2gobik7cmV0dXJuIG99ZnVuY3Rpb24gcXQodCxpKXtyZXR1cm4gaT1cIm51bWJlclwiPT10eXBlb2YgaT9pOjYsdm9pZCAwIT09dC5hbHQ/W2EodC5sbmcsaSksYSh0LmxhdCxpKSxhKHQuYWx0LGkpXTpbYSh0LmxuZyxpKSxhKHQubGF0LGkpXX1mdW5jdGlvbiBHdCh0LGksZSxuKXtmb3IodmFyIG89W10scz0wLHI9dC5sZW5ndGg7czxyO3MrKylvLnB1c2goaT9HdCh0W3NdLGktMSxlLG4pOnF0KHRbc10sbikpO3JldHVybiFpJiZlJiZvLnB1c2gob1swXSksb31mdW5jdGlvbiBLdCh0LGUpe3JldHVybiB0LmZlYXR1cmU/aSh7fSx0LmZlYXR1cmUse2dlb21ldHJ5OmV9KTpZdChlKX1mdW5jdGlvbiBZdCh0KXtyZXR1cm5cIkZlYXR1cmVcIj09PXQudHlwZXx8XCJGZWF0dXJlQ29sbGVjdGlvblwiPT09dC50eXBlP3Q6e3R5cGU6XCJGZWF0dXJlXCIscHJvcGVydGllczp7fSxnZW9tZXRyeTp0fX1mdW5jdGlvbiBYdCh0LGkpe3JldHVybiBuZXcgc24odCxpKX1mdW5jdGlvbiBKdCh0LGkpe3JldHVybiBuZXcgbW4odCxpKX1mdW5jdGlvbiAkdCh0KXtyZXR1cm4gWGk/bmV3IHZuKHQpOm51bGx9ZnVuY3Rpb24gUXQodCl7cmV0dXJuIEppfHwkaT9uZXcgUG4odCk6bnVsbH12YXIgdGk9T2JqZWN0LmZyZWV6ZTtPYmplY3QuZnJlZXplPWZ1bmN0aW9uKHQpe3JldHVybiB0fTt2YXIgaWk9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gdC5wcm90b3R5cGU9aSxuZXcgdH19KCksZWk9MCxuaT0vXFx7ICooW1xcd18tXSspICpcXH0vZyxvaT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9LHNpPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBRC9BQ3dBQUFBQUFRQUJBQUFDQURzPVwiLHJpPTAsYWk9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8cChcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiKXx8bSxoaT13aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fHAoXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiKXx8cChcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiKXx8ZnVuY3Rpb24odCl7d2luZG93LmNsZWFyVGltZW91dCh0KX0sdWk9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe2ZyZWV6ZTp0aSxleHRlbmQ6aSxjcmVhdGU6aWksYmluZDplLGxhc3RJZDplaSxzdGFtcDpuLHRocm90dGxlOm8sd3JhcE51bTpzLGZhbHNlRm46cixmb3JtYXROdW06YSx0cmltOmgsc3BsaXRXb3Jkczp1LHNldE9wdGlvbnM6bCxnZXRQYXJhbVN0cmluZzpjLHRlbXBsYXRlOl8saXNBcnJheTpvaSxpbmRleE9mOmQsZW1wdHlJbWFnZVVybDpzaSxyZXF1ZXN0Rm46YWksY2FuY2VsRm46aGkscmVxdWVzdEFuaW1GcmFtZTpmLGNhbmNlbEFuaW1GcmFtZTpnfSk7di5leHRlbmQ9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxpemUmJnRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5jYWxsSW5pdEhvb2tzKCl9LG49ZS5fX3N1cGVyX189dGhpcy5wcm90b3R5cGUsbz1paShuKTtvLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGU9bztmb3IodmFyIHMgaW4gdGhpcyl0aGlzLmhhc093blByb3BlcnR5KHMpJiZcInByb3RvdHlwZVwiIT09cyYmXCJfX3N1cGVyX19cIiE9PXMmJihlW3NdPXRoaXNbc10pO3JldHVybiB0LnN0YXRpY3MmJihpKGUsdC5zdGF0aWNzKSxkZWxldGUgdC5zdGF0aWNzKSx0LmluY2x1ZGVzJiYoeSh0LmluY2x1ZGVzKSxpLmFwcGx5KG51bGwsW29dLmNvbmNhdCh0LmluY2x1ZGVzKSksZGVsZXRlIHQuaW5jbHVkZXMpLG8ub3B0aW9ucyYmKHQub3B0aW9ucz1pKGlpKG8ub3B0aW9ucyksdC5vcHRpb25zKSksaShvLHQpLG8uX2luaXRIb29rcz1bXSxvLmNhbGxJbml0SG9va3M9ZnVuY3Rpb24oKXtpZighdGhpcy5faW5pdEhvb2tzQ2FsbGVkKXtuLmNhbGxJbml0SG9va3MmJm4uY2FsbEluaXRIb29rcy5jYWxsKHRoaXMpLHRoaXMuX2luaXRIb29rc0NhbGxlZD0hMDtmb3IodmFyIHQ9MCxpPW8uX2luaXRIb29rcy5sZW5ndGg7dDxpO3QrKylvLl9pbml0SG9va3NbdF0uY2FsbCh0aGlzKX19LGV9LHYuaW5jbHVkZT1mdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLnByb3RvdHlwZSx0KSx0aGlzfSx2Lm1lcmdlT3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLnByb3RvdHlwZS5vcHRpb25zLHQpLHRoaXN9LHYuYWRkSW5pdEhvb2s9ZnVuY3Rpb24odCl7dmFyIGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdD90OmZ1bmN0aW9uKCl7dGhpc1t0XS5hcHBseSh0aGlzLGkpfTtyZXR1cm4gdGhpcy5wcm90b3R5cGUuX2luaXRIb29rcz10aGlzLnByb3RvdHlwZS5faW5pdEhvb2tzfHxbXSx0aGlzLnByb3RvdHlwZS5faW5pdEhvb2tzLnB1c2goZSksdGhpc307dmFyIGxpPXtvbjpmdW5jdGlvbih0LGksZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpdGhpcy5fb24obix0W25dLGkpO2Vsc2UgZm9yKHZhciBvPTAscz0odD11KHQpKS5sZW5ndGg7bzxzO28rKyl0aGlzLl9vbih0W29dLGksZSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGksZSl7aWYodClpZihcIm9iamVjdFwiPT10eXBlb2YgdClmb3IodmFyIG4gaW4gdCl0aGlzLl9vZmYobix0W25dLGkpO2Vsc2UgZm9yKHZhciBvPTAscz0odD11KHQpKS5sZW5ndGg7bzxzO28rKyl0aGlzLl9vZmYodFtvXSxpLGUpO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sX29uOmZ1bmN0aW9uKHQsaSxlKXt0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fTt2YXIgbj10aGlzLl9ldmVudHNbdF07bnx8KG49W10sdGhpcy5fZXZlbnRzW3RdPW4pLGU9PT10aGlzJiYoZT12b2lkIDApO2Zvcih2YXIgbz17Zm46aSxjdHg6ZX0scz1uLHI9MCxhPXMubGVuZ3RoO3I8YTtyKyspaWYoc1tyXS5mbj09PWkmJnNbcl0uY3R4PT09ZSlyZXR1cm47cy5wdXNoKG8pfSxfb2ZmOmZ1bmN0aW9uKHQsaSxlKXt2YXIgbixvLHM7aWYodGhpcy5fZXZlbnRzJiYobj10aGlzLl9ldmVudHNbdF0pKWlmKGkpe2lmKGU9PT10aGlzJiYoZT12b2lkIDApLG4pZm9yKG89MCxzPW4ubGVuZ3RoO288cztvKyspe3ZhciBhPW5bb107aWYoYS5jdHg9PT1lJiZhLmZuPT09aSlyZXR1cm4gYS5mbj1yLHRoaXMuX2ZpcmluZ0NvdW50JiYodGhpcy5fZXZlbnRzW3RdPW49bi5zbGljZSgpKSx2b2lkIG4uc3BsaWNlKG8sMSl9fWVsc2V7Zm9yKG89MCxzPW4ubGVuZ3RoO288cztvKyspbltvXS5mbj1yO2RlbGV0ZSB0aGlzLl9ldmVudHNbdF19fSxmaXJlOmZ1bmN0aW9uKHQsZSxuKXtpZighdGhpcy5saXN0ZW5zKHQsbikpcmV0dXJuIHRoaXM7dmFyIG89aSh7fSxlLHt0eXBlOnQsdGFyZ2V0OnRoaXMsc291cmNlVGFyZ2V0OmUmJmUuc291cmNlVGFyZ2V0fHx0aGlzfSk7aWYodGhpcy5fZXZlbnRzKXt2YXIgcz10aGlzLl9ldmVudHNbdF07aWYocyl7dGhpcy5fZmlyaW5nQ291bnQ9dGhpcy5fZmlyaW5nQ291bnQrMXx8MTtmb3IodmFyIHI9MCxhPXMubGVuZ3RoO3I8YTtyKyspe3ZhciBoPXNbcl07aC5mbi5jYWxsKGguY3R4fHx0aGlzLG8pfXRoaXMuX2ZpcmluZ0NvdW50LS19fXJldHVybiBuJiZ0aGlzLl9wcm9wYWdhdGVFdmVudChvKSx0aGlzfSxsaXN0ZW5zOmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoZSYmZS5sZW5ndGgpcmV0dXJuITA7aWYoaSlmb3IodmFyIG4gaW4gdGhpcy5fZXZlbnRQYXJlbnRzKWlmKHRoaXMuX2V2ZW50UGFyZW50c1tuXS5saXN0ZW5zKHQsaSkpcmV0dXJuITA7cmV0dXJuITF9LG9uY2U6ZnVuY3Rpb24odCxpLG4pe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtmb3IodmFyIG8gaW4gdCl0aGlzLm9uY2Uobyx0W29dLGkpO3JldHVybiB0aGlzfXZhciBzPWUoZnVuY3Rpb24oKXt0aGlzLm9mZih0LGksbikub2ZmKHQscyxuKX0sdGhpcyk7cmV0dXJuIHRoaXMub24odCxpLG4pLm9uKHQscyxuKX0sYWRkRXZlbnRQYXJlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50UGFyZW50cz10aGlzLl9ldmVudFBhcmVudHN8fHt9LHRoaXMuX2V2ZW50UGFyZW50c1tuKHQpXT10LHRoaXN9LHJlbW92ZUV2ZW50UGFyZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudFBhcmVudHMmJmRlbGV0ZSB0aGlzLl9ldmVudFBhcmVudHNbbih0KV0sdGhpc30sX3Byb3BhZ2F0ZUV2ZW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLl9ldmVudFBhcmVudHMpdGhpcy5fZXZlbnRQYXJlbnRzW2VdLmZpcmUodC50eXBlLGkoe2xheWVyOnQudGFyZ2V0LHByb3BhZ2F0ZWRGcm9tOnQudGFyZ2V0fSx0KSwhMCl9fTtsaS5hZGRFdmVudExpc3RlbmVyPWxpLm9uLGxpLnJlbW92ZUV2ZW50TGlzdGVuZXI9bGkuY2xlYXJBbGxFdmVudExpc3RlbmVycz1saS5vZmYsbGkuYWRkT25lVGltZUV2ZW50TGlzdGVuZXI9bGkub25jZSxsaS5maXJlRXZlbnQ9bGkuZmlyZSxsaS5oYXNFdmVudExpc3RlbmVycz1saS5saXN0ZW5zO3ZhciBjaT12LmV4dGVuZChsaSksX2k9TWF0aC50cnVuY3x8ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9NYXRoLmZsb29yKHQpOk1hdGguY2VpbCh0KX07eC5wcm90b3R5cGU9e2Nsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4KHRoaXMueCx0aGlzLnkpfSxhZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fYWRkKHcodCkpfSxfYWRkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngrPXQueCx0aGlzLnkrPXQueSx0aGlzfSxzdWJ0cmFjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9zdWJ0cmFjdCh3KHQpKX0sX3N1YnRyYWN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngtPXQueCx0aGlzLnktPXQueSx0aGlzfSxkaXZpZGVCeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9kaXZpZGVCeSh0KX0sX2RpdmlkZUJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngvPXQsdGhpcy55Lz10LHRoaXN9LG11bHRpcGx5Qnk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fbXVsdGlwbHlCeSh0KX0sX211bHRpcGx5Qnk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCo9dCx0aGlzLnkqPXQsdGhpc30sc2NhbGVCeTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHgodGhpcy54KnQueCx0aGlzLnkqdC55KX0sdW5zY2FsZUJ5OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgeCh0aGlzLngvdC54LHRoaXMueS90LnkpfSxyb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkuX3JvdW5kKCl9LF9yb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpLHRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSksdGhpc30sZmxvb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9mbG9vcigpfSxfZmxvb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PU1hdGguZmxvb3IodGhpcy54KSx0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpLHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9jZWlsKCl9LF9jZWlsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD1NYXRoLmNlaWwodGhpcy54KSx0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSksdGhpc30sdHJ1bmM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLl90cnVuYygpfSxfdHJ1bmM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PV9pKHRoaXMueCksdGhpcy55PV9pKHRoaXMueSksdGhpc30sZGlzdGFuY2VUbzpmdW5jdGlvbih0KXt2YXIgaT0odD13KHQpKS54LXRoaXMueCxlPXQueS10aGlzLnk7cmV0dXJuIE1hdGguc3FydChpKmkrZSplKX0sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybih0PXcodCkpLng9PT10aGlzLngmJnQueT09PXRoaXMueX0sY29udGFpbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dyh0KSxNYXRoLmFicyh0LngpPD1NYXRoLmFicyh0aGlzLngpJiZNYXRoLmFicyh0LnkpPD1NYXRoLmFicyh0aGlzLnkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiUG9pbnQoXCIrYSh0aGlzLngpK1wiLCBcIithKHRoaXMueSkrXCIpXCJ9fSxQLnByb3RvdHlwZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0PXcodCksdGhpcy5taW58fHRoaXMubWF4Pyh0aGlzLm1pbi54PU1hdGgubWluKHQueCx0aGlzLm1pbi54KSx0aGlzLm1heC54PU1hdGgubWF4KHQueCx0aGlzLm1heC54KSx0aGlzLm1pbi55PU1hdGgubWluKHQueSx0aGlzLm1pbi55KSx0aGlzLm1heC55PU1hdGgubWF4KHQueSx0aGlzLm1heC55KSk6KHRoaXMubWluPXQuY2xvbmUoKSx0aGlzLm1heD10LmNsb25lKCkpLHRoaXN9LGdldENlbnRlcjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHgoKHRoaXMubWluLngrdGhpcy5tYXgueCkvMiwodGhpcy5taW4ueSt0aGlzLm1heC55KS8yLHQpfSxnZXRCb3R0b21MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4KHRoaXMubWluLngsdGhpcy5tYXgueSl9LGdldFRvcFJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4KHRoaXMubWF4LngsdGhpcy5taW4ueSl9LGdldFRvcExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW59LGdldEJvdHRvbVJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4fSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4LnN1YnRyYWN0KHRoaXMubWluKX0sY29udGFpbnM6ZnVuY3Rpb24odCl7dmFyIGksZTtyZXR1cm4odD1cIm51bWJlclwiPT10eXBlb2YgdFswXXx8dCBpbnN0YW5jZW9mIHg/dyh0KTpiKHQpKWluc3RhbmNlb2YgUD8oaT10Lm1pbixlPXQubWF4KTppPWU9dCxpLng+PXRoaXMubWluLngmJmUueDw9dGhpcy5tYXgueCYmaS55Pj10aGlzLm1pbi55JiZlLnk8PXRoaXMubWF4Lnl9LGludGVyc2VjdHM6ZnVuY3Rpb24odCl7dD1iKHQpO3ZhciBpPXRoaXMubWluLGU9dGhpcy5tYXgsbj10Lm1pbixvPXQubWF4LHM9by54Pj1pLngmJm4ueDw9ZS54LHI9by55Pj1pLnkmJm4ueTw9ZS55O3JldHVybiBzJiZyfSxvdmVybGFwczpmdW5jdGlvbih0KXt0PWIodCk7dmFyIGk9dGhpcy5taW4sZT10aGlzLm1heCxuPXQubWluLG89dC5tYXgscz1vLng+aS54JiZuLng8ZS54LHI9by55PmkueSYmbi55PGUueTtyZXR1cm4gcyYmcn0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMubWlufHwhdGhpcy5tYXgpfX0sVC5wcm90b3R5cGU9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgaSxlLG49dGhpcy5fc291dGhXZXN0LG89dGhpcy5fbm9ydGhFYXN0O2lmKHQgaW5zdGFuY2VvZiBNKWk9dCxlPXQ7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBUKSlyZXR1cm4gdD90aGlzLmV4dGVuZChDKHQpfHx6KHQpKTp0aGlzO2lmKGk9dC5fc291dGhXZXN0LGU9dC5fbm9ydGhFYXN0LCFpfHwhZSlyZXR1cm4gdGhpc31yZXR1cm4gbnx8bz8obi5sYXQ9TWF0aC5taW4oaS5sYXQsbi5sYXQpLG4ubG5nPU1hdGgubWluKGkubG5nLG4ubG5nKSxvLmxhdD1NYXRoLm1heChlLmxhdCxvLmxhdCksby5sbmc9TWF0aC5tYXgoZS5sbmcsby5sbmcpKToodGhpcy5fc291dGhXZXN0PW5ldyBNKGkubGF0LGkubG5nKSx0aGlzLl9ub3J0aEVhc3Q9bmV3IE0oZS5sYXQsZS5sbmcpKSx0aGlzfSxwYWQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fc291dGhXZXN0LGU9dGhpcy5fbm9ydGhFYXN0LG49TWF0aC5hYnMoaS5sYXQtZS5sYXQpKnQsbz1NYXRoLmFicyhpLmxuZy1lLmxuZykqdDtyZXR1cm4gbmV3IFQobmV3IE0oaS5sYXQtbixpLmxuZy1vKSxuZXcgTShlLmxhdCtuLGUubG5nK28pKX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBNKCh0aGlzLl9zb3V0aFdlc3QubGF0K3RoaXMuX25vcnRoRWFzdC5sYXQpLzIsKHRoaXMuX3NvdXRoV2VzdC5sbmcrdGhpcy5fbm9ydGhFYXN0LmxuZykvMil9LGdldFNvdXRoV2VzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3V0aFdlc3R9LGdldE5vcnRoRWFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3J0aEVhc3R9LGdldE5vcnRoV2VzdDpmdW5jdGlvbigpe3JldHVybiBuZXcgTSh0aGlzLmdldE5vcnRoKCksdGhpcy5nZXRXZXN0KCkpfSxnZXRTb3V0aEVhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE0odGhpcy5nZXRTb3V0aCgpLHRoaXMuZ2V0RWFzdCgpKX0sZ2V0V2VzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3V0aFdlc3QubG5nfSxnZXRTb3V0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3V0aFdlc3QubGF0fSxnZXRFYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcnRoRWFzdC5sbmd9LGdldE5vcnRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcnRoRWFzdC5sYXR9LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3Q9XCJudW1iZXJcIj09dHlwZW9mIHRbMF18fHQgaW5zdGFuY2VvZiBNfHxcImxhdFwiaW4gdD9DKHQpOnoodCk7dmFyIGksZSxuPXRoaXMuX3NvdXRoV2VzdCxvPXRoaXMuX25vcnRoRWFzdDtyZXR1cm4gdCBpbnN0YW5jZW9mIFQ/KGk9dC5nZXRTb3V0aFdlc3QoKSxlPXQuZ2V0Tm9ydGhFYXN0KCkpOmk9ZT10LGkubGF0Pj1uLmxhdCYmZS5sYXQ8PW8ubGF0JiZpLmxuZz49bi5sbmcmJmUubG5nPD1vLmxuZ30saW50ZXJzZWN0czpmdW5jdGlvbih0KXt0PXoodCk7dmFyIGk9dGhpcy5fc291dGhXZXN0LGU9dGhpcy5fbm9ydGhFYXN0LG49dC5nZXRTb3V0aFdlc3QoKSxvPXQuZ2V0Tm9ydGhFYXN0KCkscz1vLmxhdD49aS5sYXQmJm4ubGF0PD1lLmxhdCxyPW8ubG5nPj1pLmxuZyYmbi5sbmc8PWUubG5nO3JldHVybiBzJiZyfSxvdmVybGFwczpmdW5jdGlvbih0KXt0PXoodCk7dmFyIGk9dGhpcy5fc291dGhXZXN0LGU9dGhpcy5fbm9ydGhFYXN0LG49dC5nZXRTb3V0aFdlc3QoKSxvPXQuZ2V0Tm9ydGhFYXN0KCkscz1vLmxhdD5pLmxhdCYmbi5sYXQ8ZS5sYXQscj1vLmxuZz5pLmxuZyYmbi5sbmc8ZS5sbmc7cmV0dXJuIHMmJnJ9LHRvQkJveFN0cmluZzpmdW5jdGlvbigpe3JldHVyblt0aGlzLmdldFdlc3QoKSx0aGlzLmdldFNvdXRoKCksdGhpcy5nZXRFYXN0KCksdGhpcy5nZXROb3J0aCgpXS5qb2luKFwiLFwiKX0sZXF1YWxzOmZ1bmN0aW9uKHQsaSl7cmV0dXJuISF0JiYodD16KHQpLHRoaXMuX3NvdXRoV2VzdC5lcXVhbHModC5nZXRTb3V0aFdlc3QoKSxpKSYmdGhpcy5fbm9ydGhFYXN0LmVxdWFscyh0LmdldE5vcnRoRWFzdCgpLGkpKX0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMuX3NvdXRoV2VzdHx8IXRoaXMuX25vcnRoRWFzdCl9fSxNLnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKHQsaSl7cmV0dXJuISF0JiYodD1DKHQpLE1hdGgubWF4KE1hdGguYWJzKHRoaXMubGF0LXQubGF0KSxNYXRoLmFicyh0aGlzLmxuZy10LmxuZykpPD0odm9pZCAwPT09aT8xZS05OmkpKX0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuXCJMYXRMbmcoXCIrYSh0aGlzLmxhdCx0KStcIiwgXCIrYSh0aGlzLmxuZyx0KStcIilcIn0sZGlzdGFuY2VUbzpmdW5jdGlvbih0KXtyZXR1cm4gcGkuZGlzdGFuY2UodGhpcyxDKHQpKX0sd3JhcDpmdW5jdGlvbigpe3JldHVybiBwaS53cmFwTGF0TG5nKHRoaXMpfSx0b0JvdW5kczpmdW5jdGlvbih0KXt2YXIgaT0xODAqdC80MDA3NTAxNyxlPWkvTWF0aC5jb3MoTWF0aC5QSS8xODAqdGhpcy5sYXQpO3JldHVybiB6KFt0aGlzLmxhdC1pLHRoaXMubG5nLWVdLFt0aGlzLmxhdCtpLHRoaXMubG5nK2VdKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE0odGhpcy5sYXQsdGhpcy5sbmcsdGhpcy5hbHQpfX07dmFyIGRpPXtsYXRMbmdUb1BvaW50OmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5wcm9qZWN0aW9uLnByb2plY3QodCksbj10aGlzLnNjYWxlKGkpO3JldHVybiB0aGlzLnRyYW5zZm9ybWF0aW9uLl90cmFuc2Zvcm0oZSxuKX0scG9pbnRUb0xhdExuZzpmdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMuc2NhbGUoaSksbj10aGlzLnRyYW5zZm9ybWF0aW9uLnVudHJhbnNmb3JtKHQsZSk7cmV0dXJuIHRoaXMucHJvamVjdGlvbi51bnByb2plY3Qobil9LHByb2plY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJvamVjdGlvbi5wcm9qZWN0KHQpfSx1bnByb2plY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJvamVjdGlvbi51bnByb2plY3QodCl9LHNjYWxlOmZ1bmN0aW9uKHQpe3JldHVybiAyNTYqTWF0aC5wb3coMix0KX0sem9vbTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2codC8yNTYpL01hdGguTE4yfSxnZXRQcm9qZWN0ZWRCb3VuZHM6ZnVuY3Rpb24odCl7aWYodGhpcy5pbmZpbml0ZSlyZXR1cm4gbnVsbDt2YXIgaT10aGlzLnByb2plY3Rpb24uYm91bmRzLGU9dGhpcy5zY2FsZSh0KTtyZXR1cm4gbmV3IFAodGhpcy50cmFuc2Zvcm1hdGlvbi50cmFuc2Zvcm0oaS5taW4sZSksdGhpcy50cmFuc2Zvcm1hdGlvbi50cmFuc2Zvcm0oaS5tYXgsZSkpfSxpbmZpbml0ZTohMSx3cmFwTGF0TG5nOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMud3JhcExuZz9zKHQubG5nLHRoaXMud3JhcExuZywhMCk6dC5sbmc7cmV0dXJuIG5ldyBNKHRoaXMud3JhcExhdD9zKHQubGF0LHRoaXMud3JhcExhdCwhMCk6dC5sYXQsaSx0LmFsdCl9LHdyYXBMYXRMbmdCb3VuZHM6ZnVuY3Rpb24odCl7dmFyIGk9dC5nZXRDZW50ZXIoKSxlPXRoaXMud3JhcExhdExuZyhpKSxuPWkubGF0LWUubGF0LG89aS5sbmctZS5sbmc7aWYoMD09PW4mJjA9PT1vKXJldHVybiB0O3ZhciBzPXQuZ2V0U291dGhXZXN0KCkscj10LmdldE5vcnRoRWFzdCgpO3JldHVybiBuZXcgVChuZXcgTShzLmxhdC1uLHMubG5nLW8pLG5ldyBNKHIubGF0LW4sci5sbmctbykpfX0scGk9aSh7fSxkaSx7d3JhcExuZzpbLTE4MCwxODBdLFI6NjM3MWUzLGRpc3RhbmNlOmZ1bmN0aW9uKHQsaSl7dmFyIGU9TWF0aC5QSS8xODAsbj10LmxhdCplLG89aS5sYXQqZSxzPU1hdGguc2luKChpLmxhdC10LmxhdCkqZS8yKSxyPU1hdGguc2luKChpLmxuZy10LmxuZykqZS8yKSxhPXMqcytNYXRoLmNvcyhuKSpNYXRoLmNvcyhvKSpyKnIsaD0yKk1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLE1hdGguc3FydCgxLWEpKTtyZXR1cm4gdGhpcy5SKmh9fSksbWk9e1I6NjM3ODEzNyxNQVhfTEFUSVRVREU6ODUuMDUxMTI4Nzc5OCxwcm9qZWN0OmZ1bmN0aW9uKHQpe3ZhciBpPU1hdGguUEkvMTgwLGU9dGhpcy5NQVhfTEFUSVRVREUsbj1NYXRoLm1heChNYXRoLm1pbihlLHQubGF0KSwtZSksbz1NYXRoLnNpbihuKmkpO3JldHVybiBuZXcgeCh0aGlzLlIqdC5sbmcqaSx0aGlzLlIqTWF0aC5sb2coKDErbykvKDEtbykpLzIpfSx1bnByb2plY3Q6ZnVuY3Rpb24odCl7dmFyIGk9MTgwL01hdGguUEk7cmV0dXJuIG5ldyBNKCgyKk1hdGguYXRhbihNYXRoLmV4cCh0LnkvdGhpcy5SKSktTWF0aC5QSS8yKSppLHQueCppL3RoaXMuUil9LGJvdW5kczpmdW5jdGlvbigpe3ZhciB0PTYzNzgxMzcqTWF0aC5QSTtyZXR1cm4gbmV3IFAoWy10LC10XSxbdCx0XSl9KCl9O1MucHJvdG90eXBlPXt0cmFuc2Zvcm06ZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtKHQuY2xvbmUoKSxpKX0sX3RyYW5zZm9ybTpmdW5jdGlvbih0LGkpe3JldHVybiBpPWl8fDEsdC54PWkqKHRoaXMuX2EqdC54K3RoaXMuX2IpLHQueT1pKih0aGlzLl9jKnQueSt0aGlzLl9kKSx0fSx1bnRyYW5zZm9ybTpmdW5jdGlvbih0LGkpe3JldHVybiBpPWl8fDEsbmV3IHgoKHQueC9pLXRoaXMuX2IpL3RoaXMuX2EsKHQueS9pLXRoaXMuX2QpL3RoaXMuX2MpfX07dmFyIGZpLGdpLHZpLHlpPWkoe30scGkse2NvZGU6XCJFUFNHOjM4NTdcIixwcm9qZWN0aW9uOm1pLHRyYW5zZm9ybWF0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9LjUvKE1hdGguUEkqbWkuUik7cmV0dXJuIFoodCwuNSwtdCwuNSl9KCl9KSx4aT1pKHt9LHlpLHtjb2RlOlwiRVBTRzo5MDA5MTNcIn0pLHdpPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxQaT1cIkFjdGl2ZVhPYmplY3RcImluIHdpbmRvdyxMaT1QaSYmIWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIsYmk9XCJtc0xhdW5jaFVyaVwiaW4gbmF2aWdhdG9yJiYhKFwiZG9jdW1lbnRNb2RlXCJpbiBkb2N1bWVudCksVGk9QShcIndlYmtpdFwiKSx6aT1BKFwiYW5kcm9pZFwiKSxNaT1BKFwiYW5kcm9pZCAyXCIpfHxBKFwiYW5kcm9pZCAzXCIpLENpPXBhcnNlSW50KC9XZWJLaXRcXC8oWzAtOV0rKXwkLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpWzFdLDEwKSxTaT16aSYmQShcIkdvb2dsZVwiKSYmQ2k8NTM3JiYhKFwiQXVkaW9Ob2RlXCJpbiB3aW5kb3cpLFppPSEhd2luZG93Lm9wZXJhLEVpPUEoXCJjaHJvbWVcIiksa2k9QShcImdlY2tvXCIpJiYhVGkmJiFaaSYmIVBpLEFpPSFFaSYmQShcInNhZmFyaVwiKSxCaT1BKFwicGhhbnRvbVwiKSxJaT1cIk9UcmFuc2l0aW9uXCJpbiB3aSxPaT0wPT09bmF2aWdhdG9yLnBsYXRmb3JtLmluZGV4T2YoXCJXaW5cIiksUmk9UGkmJlwidHJhbnNpdGlvblwiaW4gd2ksTmk9XCJXZWJLaXRDU1NNYXRyaXhcImluIHdpbmRvdyYmXCJtMTFcImluIG5ldyB3aW5kb3cuV2ViS2l0Q1NTTWF0cml4JiYhTWksRGk9XCJNb3pQZXJzcGVjdGl2ZVwiaW4gd2ksamk9IXdpbmRvdy5MX0RJU0FCTEVfM0QmJihSaXx8Tml8fERpKSYmIUlpJiYhQmksV2k9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG9yaWVudGF0aW9ufHxBKFwibW9iaWxlXCIpLEhpPVdpJiZUaSxGaT1XaSYmTmksVWk9IXdpbmRvdy5Qb2ludGVyRXZlbnQmJndpbmRvdy5NU1BvaW50ZXJFdmVudCxWaT0hKCF3aW5kb3cuUG9pbnRlckV2ZW50JiYhVWkpLHFpPSF3aW5kb3cuTF9OT19UT1VDSCYmKFZpfHxcIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCksR2k9V2kmJlppLEtpPVdpJiZraSxZaT0od2luZG93LmRldmljZVBpeGVsUmF0aW98fHdpbmRvdy5zY3JlZW4uZGV2aWNlWERQSS93aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJKT4xLFhpPSEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0LEppPSEoIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROU3x8IUUoXCJzdmdcIikuY3JlYXRlU1ZHUmVjdCksJGk9IUppJiZmdW5jdGlvbigpe3RyeXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuaW5uZXJIVE1MPSc8djpzaGFwZSBhZGo9XCIxXCIvPic7dmFyIGk9dC5maXJzdENoaWxkO3JldHVybiBpLnN0eWxlLmJlaGF2aW9yPVwidXJsKCNkZWZhdWx0I1ZNTClcIixpJiZcIm9iamVjdFwiPT10eXBlb2YgaS5hZGp9Y2F0Y2godCl7cmV0dXJuITF9fSgpLFFpPShPYmplY3QuZnJlZXplfHxPYmplY3QpKHtpZTpQaSxpZWx0OTpMaSxlZGdlOmJpLHdlYmtpdDpUaSxhbmRyb2lkOnppLGFuZHJvaWQyMzpNaSxhbmRyb2lkU3RvY2s6U2ksb3BlcmE6WmksY2hyb21lOkVpLGdlY2tvOmtpLHNhZmFyaTpBaSxwaGFudG9tOkJpLG9wZXJhMTI6SWksd2luOk9pLGllM2Q6Umksd2Via2l0M2Q6TmksZ2Vja28zZDpEaSxhbnkzZDpqaSxtb2JpbGU6V2ksbW9iaWxlV2Via2l0OkhpLG1vYmlsZVdlYmtpdDNkOkZpLG1zUG9pbnRlcjpVaSxwb2ludGVyOlZpLHRvdWNoOnFpLG1vYmlsZU9wZXJhOkdpLG1vYmlsZUdlY2tvOktpLHJldGluYTpZaSxjYW52YXM6WGksc3ZnOkppLHZtbDokaX0pLHRlPVVpP1wiTVNQb2ludGVyRG93blwiOlwicG9pbnRlcmRvd25cIixpZT1VaT9cIk1TUG9pbnRlck1vdmVcIjpcInBvaW50ZXJtb3ZlXCIsZWU9VWk/XCJNU1BvaW50ZXJVcFwiOlwicG9pbnRlcnVwXCIsbmU9VWk/XCJNU1BvaW50ZXJDYW5jZWxcIjpcInBvaW50ZXJjYW5jZWxcIixvZT1bXCJJTlBVVFwiLFwiU0VMRUNUXCIsXCJPUFRJT05cIl0sc2U9e30scmU9ITEsYWU9MCxoZT1VaT9cIk1TUG9pbnRlckRvd25cIjpWaT9cInBvaW50ZXJkb3duXCI6XCJ0b3VjaHN0YXJ0XCIsdWU9VWk/XCJNU1BvaW50ZXJVcFwiOlZpP1wicG9pbnRlcnVwXCI6XCJ0b3VjaGVuZFwiLGxlPVwiX2xlYWZsZXRfXCIsY2U9c3QoW1widHJhbnNmb3JtXCIsXCJXZWJraXRUcmFuc2Zvcm1cIixcIk9UcmFuc2Zvcm1cIixcIk1velRyYW5zZm9ybVwiLFwibXNUcmFuc2Zvcm1cIl0pLF9lPXN0KFtcIndlYmtpdFRyYW5zaXRpb25cIixcInRyYW5zaXRpb25cIixcIk9UcmFuc2l0aW9uXCIsXCJNb3pUcmFuc2l0aW9uXCIsXCJtc1RyYW5zaXRpb25cIl0pLGRlPVwid2Via2l0VHJhbnNpdGlvblwiPT09X2V8fFwiT1RyYW5zaXRpb25cIj09PV9lP19lK1wiRW5kXCI6XCJ0cmFuc2l0aW9uZW5kXCI7aWYoXCJvbnNlbGVjdHN0YXJ0XCJpbiBkb2N1bWVudClmaT1mdW5jdGlvbigpe210KHdpbmRvdyxcInNlbGVjdHN0YXJ0XCIsUHQpfSxnaT1mdW5jdGlvbigpe2Z0KHdpbmRvdyxcInNlbGVjdHN0YXJ0XCIsUHQpfTtlbHNle3ZhciBwZT1zdChbXCJ1c2VyU2VsZWN0XCIsXCJXZWJraXRVc2VyU2VsZWN0XCIsXCJPVXNlclNlbGVjdFwiLFwiTW96VXNlclNlbGVjdFwiLFwibXNVc2VyU2VsZWN0XCJdKTtmaT1mdW5jdGlvbigpe2lmKHBlKXt2YXIgdD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7dmk9dFtwZV0sdFtwZV09XCJub25lXCJ9fSxnaT1mdW5jdGlvbigpe3BlJiYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlW3BlXT12aSx2aT12b2lkIDApfX12YXIgbWUsZmUsZ2UsdmU9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe1RSQU5TRk9STTpjZSxUUkFOU0lUSU9OOl9lLFRSQU5TSVRJT05fRU5EOmRlLGdldDpWLGdldFN0eWxlOnEsY3JlYXRlOkcscmVtb3ZlOkssZW1wdHk6WSx0b0Zyb250OlgsdG9CYWNrOkosaGFzQ2xhc3M6JCxhZGRDbGFzczpRLHJlbW92ZUNsYXNzOnR0LHNldENsYXNzOml0LGdldENsYXNzOmV0LHNldE9wYWNpdHk6bnQsdGVzdFByb3A6c3Qsc2V0VHJhbnNmb3JtOnJ0LHNldFBvc2l0aW9uOmF0LGdldFBvc2l0aW9uOmh0LGRpc2FibGVUZXh0U2VsZWN0aW9uOmZpLGVuYWJsZVRleHRTZWxlY3Rpb246Z2ksZGlzYWJsZUltYWdlRHJhZzp1dCxlbmFibGVJbWFnZURyYWc6bHQscHJldmVudE91dGxpbmU6Y3QscmVzdG9yZU91dGxpbmU6X3QsZ2V0U2l6ZWRQYXJlbnROb2RlOmR0LGdldFNjYWxlOnB0fSkseWU9XCJfbGVhZmxldF9ldmVudHNcIix4ZT1PaSYmRWk/Mip3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzpraT93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzoxLHdlPXt9LFBlPShPYmplY3QuZnJlZXplfHxPYmplY3QpKHtvbjptdCxvZmY6ZnQsc3RvcFByb3BhZ2F0aW9uOnl0LGRpc2FibGVTY3JvbGxQcm9wYWdhdGlvbjp4dCxkaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbjp3dCxwcmV2ZW50RGVmYXVsdDpQdCxzdG9wOkx0LGdldE1vdXNlUG9zaXRpb246YnQsZ2V0V2hlZWxEZWx0YTpUdCxmYWtlU3RvcDp6dCxza2lwcGVkOk10LGlzRXh0ZXJuYWxUYXJnZXQ6Q3QsYWRkTGlzdGVuZXI6bXQscmVtb3ZlTGlzdGVuZXI6ZnR9KSxMZT1jaS5leHRlbmQoe3J1bjpmdW5jdGlvbih0LGksZSxuKXt0aGlzLnN0b3AoKSx0aGlzLl9lbD10LHRoaXMuX2luUHJvZ3Jlc3M9ITAsdGhpcy5fZHVyYXRpb249ZXx8LjI1LHRoaXMuX2Vhc2VPdXRQb3dlcj0xL01hdGgubWF4KG58fC41LC4yKSx0aGlzLl9zdGFydFBvcz1odCh0KSx0aGlzLl9vZmZzZXQ9aS5zdWJ0cmFjdCh0aGlzLl9zdGFydFBvcyksdGhpcy5fc3RhcnRUaW1lPStuZXcgRGF0ZSx0aGlzLmZpcmUoXCJzdGFydFwiKSx0aGlzLl9hbmltYXRlKCl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLl9pblByb2dyZXNzJiYodGhpcy5fc3RlcCghMCksdGhpcy5fY29tcGxldGUoKSl9LF9hbmltYXRlOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbUlkPWYodGhpcy5fYW5pbWF0ZSx0aGlzKSx0aGlzLl9zdGVwKCl9LF9zdGVwOmZ1bmN0aW9uKHQpe3ZhciBpPStuZXcgRGF0ZS10aGlzLl9zdGFydFRpbWUsZT0xZTMqdGhpcy5fZHVyYXRpb247aTxlP3RoaXMuX3J1bkZyYW1lKHRoaXMuX2Vhc2VPdXQoaS9lKSx0KToodGhpcy5fcnVuRnJhbWUoMSksdGhpcy5fY29tcGxldGUoKSl9LF9ydW5GcmFtZTpmdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMuX3N0YXJ0UG9zLmFkZCh0aGlzLl9vZmZzZXQubXVsdGlwbHlCeSh0KSk7aSYmZS5fcm91bmQoKSxhdCh0aGlzLl9lbCxlKSx0aGlzLmZpcmUoXCJzdGVwXCIpfSxfY29tcGxldGU6ZnVuY3Rpb24oKXtnKHRoaXMuX2FuaW1JZCksdGhpcy5faW5Qcm9ncmVzcz0hMSx0aGlzLmZpcmUoXCJlbmRcIil9LF9lYXNlT3V0OmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGgucG93KDEtdCx0aGlzLl9lYXNlT3V0UG93ZXIpfX0pLGJlPWNpLmV4dGVuZCh7b3B0aW9uczp7Y3JzOnlpLGNlbnRlcjp2b2lkIDAsem9vbTp2b2lkIDAsbWluWm9vbTp2b2lkIDAsbWF4Wm9vbTp2b2lkIDAsbGF5ZXJzOltdLG1heEJvdW5kczp2b2lkIDAscmVuZGVyZXI6dm9pZCAwLHpvb21BbmltYXRpb246ITAsem9vbUFuaW1hdGlvblRocmVzaG9sZDo0LGZhZGVBbmltYXRpb246ITAsbWFya2VyWm9vbUFuaW1hdGlvbjohMCx0cmFuc2Zvcm0zRExpbWl0OjgzODg2MDgsem9vbVNuYXA6MSx6b29tRGVsdGE6MSx0cmFja1Jlc2l6ZTohMH0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe2k9bCh0aGlzLGkpLHRoaXMuX2luaXRDb250YWluZXIodCksdGhpcy5faW5pdExheW91dCgpLHRoaXMuX29uUmVzaXplPWUodGhpcy5fb25SZXNpemUsdGhpcyksdGhpcy5faW5pdEV2ZW50cygpLGkubWF4Qm91bmRzJiZ0aGlzLnNldE1heEJvdW5kcyhpLm1heEJvdW5kcyksdm9pZCAwIT09aS56b29tJiYodGhpcy5fem9vbT10aGlzLl9saW1pdFpvb20oaS56b29tKSksaS5jZW50ZXImJnZvaWQgMCE9PWkuem9vbSYmdGhpcy5zZXRWaWV3KEMoaS5jZW50ZXIpLGkuem9vbSx7cmVzZXQ6ITB9KSx0aGlzLl9oYW5kbGVycz1bXSx0aGlzLl9sYXllcnM9e30sdGhpcy5fem9vbUJvdW5kTGF5ZXJzPXt9LHRoaXMuX3NpemVDaGFuZ2VkPSEwLHRoaXMuY2FsbEluaXRIb29rcygpLHRoaXMuX3pvb21BbmltYXRlZD1fZSYmamkmJiFHaSYmdGhpcy5vcHRpb25zLnpvb21BbmltYXRpb24sdGhpcy5fem9vbUFuaW1hdGVkJiYodGhpcy5fY3JlYXRlQW5pbVByb3h5KCksbXQodGhpcy5fcHJveHksZGUsdGhpcy5fY2F0Y2hUcmFuc2l0aW9uRW5kLHRoaXMpKSx0aGlzLl9hZGRMYXllcnModGhpcy5vcHRpb25zLmxheWVycyl9LHNldFZpZXc6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlPXZvaWQgMD09PWU/dGhpcy5fem9vbTp0aGlzLl9saW1pdFpvb20oZSksdD10aGlzLl9saW1pdENlbnRlcihDKHQpLGUsdGhpcy5vcHRpb25zLm1heEJvdW5kcyksbj1ufHx7fSx0aGlzLl9zdG9wKCksdGhpcy5fbG9hZGVkJiYhbi5yZXNldCYmITAhPT1uJiYodm9pZCAwIT09bi5hbmltYXRlJiYobi56b29tPWkoe2FuaW1hdGU6bi5hbmltYXRlfSxuLnpvb20pLG4ucGFuPWkoe2FuaW1hdGU6bi5hbmltYXRlLGR1cmF0aW9uOm4uZHVyYXRpb259LG4ucGFuKSksdGhpcy5fem9vbSE9PWU/dGhpcy5fdHJ5QW5pbWF0ZWRab29tJiZ0aGlzLl90cnlBbmltYXRlZFpvb20odCxlLG4uem9vbSk6dGhpcy5fdHJ5QW5pbWF0ZWRQYW4odCxuLnBhbikpPyhjbGVhclRpbWVvdXQodGhpcy5fc2l6ZVRpbWVyKSx0aGlzKToodGhpcy5fcmVzZXRWaWV3KHQsZSksdGhpcyl9LHNldFpvb206ZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5fbG9hZGVkP3RoaXMuc2V0Vmlldyh0aGlzLmdldENlbnRlcigpLHQse3pvb206aX0pOih0aGlzLl96b29tPXQsdGhpcyl9LHpvb21JbjpmdW5jdGlvbih0LGkpe3JldHVybiB0PXR8fChqaT90aGlzLm9wdGlvbnMuem9vbURlbHRhOjEpLHRoaXMuc2V0Wm9vbSh0aGlzLl96b29tK3QsaSl9LHpvb21PdXQ6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdD10fHwoamk/dGhpcy5vcHRpb25zLnpvb21EZWx0YToxKSx0aGlzLnNldFpvb20odGhpcy5fem9vbS10LGkpfSxzZXRab29tQXJvdW5kOmZ1bmN0aW9uKHQsaSxlKXt2YXIgbj10aGlzLmdldFpvb21TY2FsZShpKSxvPXRoaXMuZ2V0U2l6ZSgpLmRpdmlkZUJ5KDIpLHM9KHQgaW5zdGFuY2VvZiB4P3Q6dGhpcy5sYXRMbmdUb0NvbnRhaW5lclBvaW50KHQpKS5zdWJ0cmFjdChvKS5tdWx0aXBseUJ5KDEtMS9uKSxyPXRoaXMuY29udGFpbmVyUG9pbnRUb0xhdExuZyhvLmFkZChzKSk7cmV0dXJuIHRoaXMuc2V0VmlldyhyLGkse3pvb206ZX0pfSxfZ2V0Qm91bmRzQ2VudGVyWm9vbTpmdW5jdGlvbih0LGkpe2k9aXx8e30sdD10LmdldEJvdW5kcz90LmdldEJvdW5kcygpOnoodCk7dmFyIGU9dyhpLnBhZGRpbmdUb3BMZWZ0fHxpLnBhZGRpbmd8fFswLDBdKSxuPXcoaS5wYWRkaW5nQm90dG9tUmlnaHR8fGkucGFkZGluZ3x8WzAsMF0pLG89dGhpcy5nZXRCb3VuZHNab29tKHQsITEsZS5hZGQobikpO2lmKChvPVwibnVtYmVyXCI9PXR5cGVvZiBpLm1heFpvb20/TWF0aC5taW4oaS5tYXhab29tLG8pOm8pPT09MS8wKXJldHVybntjZW50ZXI6dC5nZXRDZW50ZXIoKSx6b29tOm99O3ZhciBzPW4uc3VidHJhY3QoZSkuZGl2aWRlQnkoMikscj10aGlzLnByb2plY3QodC5nZXRTb3V0aFdlc3QoKSxvKSxhPXRoaXMucHJvamVjdCh0LmdldE5vcnRoRWFzdCgpLG8pO3JldHVybntjZW50ZXI6dGhpcy51bnByb2plY3Qoci5hZGQoYSkuZGl2aWRlQnkoMikuYWRkKHMpLG8pLHpvb206b319LGZpdEJvdW5kczpmdW5jdGlvbih0LGkpe2lmKCEodD16KHQpKS5pc1ZhbGlkKCkpdGhyb3cgbmV3IEVycm9yKFwiQm91bmRzIGFyZSBub3QgdmFsaWQuXCIpO3ZhciBlPXRoaXMuX2dldEJvdW5kc0NlbnRlclpvb20odCxpKTtyZXR1cm4gdGhpcy5zZXRWaWV3KGUuY2VudGVyLGUuem9vbSxpKX0sZml0V29ybGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZml0Qm91bmRzKFtbLTkwLC0xODBdLFs5MCwxODBdXSx0KX0scGFuVG86ZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5zZXRWaWV3KHQsdGhpcy5fem9vbSx7cGFuOml9KX0scGFuQnk6ZnVuY3Rpb24odCxpKXtpZih0PXcodCkucm91bmQoKSxpPWl8fHt9LCF0LngmJiF0LnkpcmV0dXJuIHRoaXMuZmlyZShcIm1vdmVlbmRcIik7aWYoITAhPT1pLmFuaW1hdGUmJiF0aGlzLmdldFNpemUoKS5jb250YWlucyh0KSlyZXR1cm4gdGhpcy5fcmVzZXRWaWV3KHRoaXMudW5wcm9qZWN0KHRoaXMucHJvamVjdCh0aGlzLmdldENlbnRlcigpKS5hZGQodCkpLHRoaXMuZ2V0Wm9vbSgpKSx0aGlzO2lmKHRoaXMuX3BhbkFuaW18fCh0aGlzLl9wYW5BbmltPW5ldyBMZSx0aGlzLl9wYW5BbmltLm9uKHtzdGVwOnRoaXMuX29uUGFuVHJhbnNpdGlvblN0ZXAsZW5kOnRoaXMuX29uUGFuVHJhbnNpdGlvbkVuZH0sdGhpcykpLGkubm9Nb3ZlU3RhcnR8fHRoaXMuZmlyZShcIm1vdmVzdGFydFwiKSwhMSE9PWkuYW5pbWF0ZSl7USh0aGlzLl9tYXBQYW5lLFwibGVhZmxldC1wYW4tYW5pbVwiKTt2YXIgZT10aGlzLl9nZXRNYXBQYW5lUG9zKCkuc3VidHJhY3QodCkucm91bmQoKTt0aGlzLl9wYW5BbmltLnJ1bih0aGlzLl9tYXBQYW5lLGUsaS5kdXJhdGlvbnx8LjI1LGkuZWFzZUxpbmVhcml0eSl9ZWxzZSB0aGlzLl9yYXdQYW5CeSh0KSx0aGlzLmZpcmUoXCJtb3ZlXCIpLmZpcmUoXCJtb3ZlZW5kXCIpO3JldHVybiB0aGlzfSxmbHlUbzpmdW5jdGlvbih0LGksZSl7ZnVuY3Rpb24gbih0KXt2YXIgaT0oZypnLW0qbSsodD8tMToxKSp4Kngqdip2KS8oMioodD9nOm0pKngqdiksZT1NYXRoLnNxcnQoaSppKzEpLWk7cmV0dXJuIGU8MWUtOT8tMTg6TWF0aC5sb2coZSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4oTWF0aC5leHAodCktTWF0aC5leHAoLXQpKS8yfWZ1bmN0aW9uIHModCl7cmV0dXJuKE1hdGguZXhwKHQpK01hdGguZXhwKC10KSkvMn1mdW5jdGlvbiByKHQpe3JldHVybiBvKHQpL3ModCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbSoocyh3KS9zKHcreSp0KSl9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gbSoocyh3KSpyKHcreSp0KS1vKHcpKS94fWZ1bmN0aW9uIHUodCl7cmV0dXJuIDEtTWF0aC5wb3coMS10LDEuNSl9ZnVuY3Rpb24gbCgpe3ZhciBlPShEYXRlLm5vdygpLVApL2Isbj11KGUpKkw7ZTw9MT8odGhpcy5fZmx5VG9GcmFtZT1mKGwsdGhpcyksdGhpcy5fbW92ZSh0aGlzLnVucHJvamVjdChjLmFkZChfLnN1YnRyYWN0KGMpLm11bHRpcGx5QnkoaChuKS92KSkscCksdGhpcy5nZXRTY2FsZVpvb20obS9hKG4pLHApLHtmbHlUbzohMH0pKTp0aGlzLl9tb3ZlKHQsaSkuX21vdmVFbmQoITApfWlmKCExPT09KGU9ZXx8e30pLmFuaW1hdGV8fCFqaSlyZXR1cm4gdGhpcy5zZXRWaWV3KHQsaSxlKTt0aGlzLl9zdG9wKCk7dmFyIGM9dGhpcy5wcm9qZWN0KHRoaXMuZ2V0Q2VudGVyKCkpLF89dGhpcy5wcm9qZWN0KHQpLGQ9dGhpcy5nZXRTaXplKCkscD10aGlzLl96b29tO3Q9Qyh0KSxpPXZvaWQgMD09PWk/cDppO3ZhciBtPU1hdGgubWF4KGQueCxkLnkpLGc9bSp0aGlzLmdldFpvb21TY2FsZShwLGkpLHY9Xy5kaXN0YW5jZVRvKGMpfHwxLHk9MS40Mix4PXkqeSx3PW4oMCksUD1EYXRlLm5vdygpLEw9KG4oMSktdykveSxiPWUuZHVyYXRpb24/MWUzKmUuZHVyYXRpb246MWUzKkwqLjg7cmV0dXJuIHRoaXMuX21vdmVTdGFydCghMCxlLm5vTW92ZVN0YXJ0KSxsLmNhbGwodGhpcyksdGhpc30sZmx5VG9Cb3VuZHM6ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLl9nZXRCb3VuZHNDZW50ZXJab29tKHQsaSk7cmV0dXJuIHRoaXMuZmx5VG8oZS5jZW50ZXIsZS56b29tLGkpfSxzZXRNYXhCb3VuZHM6ZnVuY3Rpb24odCl7cmV0dXJuKHQ9eih0KSkuaXNWYWxpZCgpPyh0aGlzLm9wdGlvbnMubWF4Qm91bmRzJiZ0aGlzLm9mZihcIm1vdmVlbmRcIix0aGlzLl9wYW5JbnNpZGVNYXhCb3VuZHMpLHRoaXMub3B0aW9ucy5tYXhCb3VuZHM9dCx0aGlzLl9sb2FkZWQmJnRoaXMuX3Bhbkluc2lkZU1heEJvdW5kcygpLHRoaXMub24oXCJtb3ZlZW5kXCIsdGhpcy5fcGFuSW5zaWRlTWF4Qm91bmRzKSk6KHRoaXMub3B0aW9ucy5tYXhCb3VuZHM9bnVsbCx0aGlzLm9mZihcIm1vdmVlbmRcIix0aGlzLl9wYW5JbnNpZGVNYXhCb3VuZHMpKX0sc2V0TWluWm9vbTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMubWluWm9vbTtyZXR1cm4gdGhpcy5vcHRpb25zLm1pblpvb209dCx0aGlzLl9sb2FkZWQmJmkhPT10JiYodGhpcy5maXJlKFwiem9vbWxldmVsc2NoYW5nZVwiKSx0aGlzLmdldFpvb20oKTx0aGlzLm9wdGlvbnMubWluWm9vbSk/dGhpcy5zZXRab29tKHQpOnRoaXN9LHNldE1heFpvb206ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5vcHRpb25zLm1heFpvb207cmV0dXJuIHRoaXMub3B0aW9ucy5tYXhab29tPXQsdGhpcy5fbG9hZGVkJiZpIT09dCYmKHRoaXMuZmlyZShcInpvb21sZXZlbHNjaGFuZ2VcIiksdGhpcy5nZXRab29tKCk+dGhpcy5vcHRpb25zLm1heFpvb20pP3RoaXMuc2V0Wm9vbSh0KTp0aGlzfSxwYW5JbnNpZGVCb3VuZHM6ZnVuY3Rpb24odCxpKXt0aGlzLl9lbmZvcmNpbmdCb3VuZHM9ITA7dmFyIGU9dGhpcy5nZXRDZW50ZXIoKSxuPXRoaXMuX2xpbWl0Q2VudGVyKGUsdGhpcy5fem9vbSx6KHQpKTtyZXR1cm4gZS5lcXVhbHMobil8fHRoaXMucGFuVG8obixpKSx0aGlzLl9lbmZvcmNpbmdCb3VuZHM9ITEsdGhpc30saW52YWxpZGF0ZVNpemU6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2xvYWRlZClyZXR1cm4gdGhpczt0PWkoe2FuaW1hdGU6ITEscGFuOiEwfSwhMD09PXQ/e2FuaW1hdGU6ITB9OnQpO3ZhciBuPXRoaXMuZ2V0U2l6ZSgpO3RoaXMuX3NpemVDaGFuZ2VkPSEwLHRoaXMuX2xhc3RDZW50ZXI9bnVsbDt2YXIgbz10aGlzLmdldFNpemUoKSxzPW4uZGl2aWRlQnkoMikucm91bmQoKSxyPW8uZGl2aWRlQnkoMikucm91bmQoKSxhPXMuc3VidHJhY3Qocik7cmV0dXJuIGEueHx8YS55Pyh0LmFuaW1hdGUmJnQucGFuP3RoaXMucGFuQnkoYSk6KHQucGFuJiZ0aGlzLl9yYXdQYW5CeShhKSx0aGlzLmZpcmUoXCJtb3ZlXCIpLHQuZGVib3VuY2VNb3ZlZW5kPyhjbGVhclRpbWVvdXQodGhpcy5fc2l6ZVRpbWVyKSx0aGlzLl9zaXplVGltZXI9c2V0VGltZW91dChlKHRoaXMuZmlyZSx0aGlzLFwibW92ZWVuZFwiKSwyMDApKTp0aGlzLmZpcmUoXCJtb3ZlZW5kXCIpKSx0aGlzLmZpcmUoXCJyZXNpemVcIix7b2xkU2l6ZTpuLG5ld1NpemU6b30pKTp0aGlzfSxzdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0Wm9vbSh0aGlzLl9saW1pdFpvb20odGhpcy5fem9vbSkpLHRoaXMub3B0aW9ucy56b29tU25hcHx8dGhpcy5maXJlKFwidmlld3Jlc2V0XCIpLHRoaXMuX3N0b3AoKX0sbG9jYXRlOmZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5fbG9jYXRlT3B0aW9ucz1pKHt0aW1lb3V0OjFlNCx3YXRjaDohMX0sdCksIShcImdlb2xvY2F0aW9uXCJpbiBuYXZpZ2F0b3IpKXJldHVybiB0aGlzLl9oYW5kbGVHZW9sb2NhdGlvbkVycm9yKHtjb2RlOjAsbWVzc2FnZTpcIkdlb2xvY2F0aW9uIG5vdCBzdXBwb3J0ZWQuXCJ9KSx0aGlzO3ZhciBuPWUodGhpcy5faGFuZGxlR2VvbG9jYXRpb25SZXNwb25zZSx0aGlzKSxvPWUodGhpcy5faGFuZGxlR2VvbG9jYXRpb25FcnJvcix0aGlzKTtyZXR1cm4gdC53YXRjaD90aGlzLl9sb2NhdGlvbldhdGNoSWQ9bmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24obixvLHQpOm5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24obixvLHQpLHRoaXN9LHN0b3BMb2NhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLmdlb2xvY2F0aW9uJiZuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCYmbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy5fbG9jYXRpb25XYXRjaElkKSx0aGlzLl9sb2NhdGVPcHRpb25zJiYodGhpcy5fbG9jYXRlT3B0aW9ucy5zZXRWaWV3PSExKSx0aGlzfSxfaGFuZGxlR2VvbG9jYXRpb25FcnJvcjpmdW5jdGlvbih0KXt2YXIgaT10LmNvZGUsZT10Lm1lc3NhZ2V8fCgxPT09aT9cInBlcm1pc3Npb24gZGVuaWVkXCI6Mj09PWk/XCJwb3NpdGlvbiB1bmF2YWlsYWJsZVwiOlwidGltZW91dFwiKTt0aGlzLl9sb2NhdGVPcHRpb25zLnNldFZpZXcmJiF0aGlzLl9sb2FkZWQmJnRoaXMuZml0V29ybGQoKSx0aGlzLmZpcmUoXCJsb2NhdGlvbmVycm9yXCIse2NvZGU6aSxtZXNzYWdlOlwiR2VvbG9jYXRpb24gZXJyb3I6IFwiK2UrXCIuXCJ9KX0sX2hhbmRsZUdlb2xvY2F0aW9uUmVzcG9uc2U6ZnVuY3Rpb24odCl7dmFyIGk9bmV3IE0odC5jb29yZHMubGF0aXR1ZGUsdC5jb29yZHMubG9uZ2l0dWRlKSxlPWkudG9Cb3VuZHMoMip0LmNvb3Jkcy5hY2N1cmFjeSksbj10aGlzLl9sb2NhdGVPcHRpb25zO2lmKG4uc2V0Vmlldyl7dmFyIG89dGhpcy5nZXRCb3VuZHNab29tKGUpO3RoaXMuc2V0VmlldyhpLG4ubWF4Wm9vbT9NYXRoLm1pbihvLG4ubWF4Wm9vbSk6byl9dmFyIHM9e2xhdGxuZzppLGJvdW5kczplLHRpbWVzdGFtcDp0LnRpbWVzdGFtcH07Zm9yKHZhciByIGluIHQuY29vcmRzKVwibnVtYmVyXCI9PXR5cGVvZiB0LmNvb3Jkc1tyXSYmKHNbcl09dC5jb29yZHNbcl0pO3RoaXMuZmlyZShcImxvY2F0aW9uZm91bmRcIixzKX0sYWRkSGFuZGxlcjpmdW5jdGlvbih0LGkpe2lmKCFpKXJldHVybiB0aGlzO3ZhciBlPXRoaXNbdF09bmV3IGkodGhpcyk7cmV0dXJuIHRoaXMuX2hhbmRsZXJzLnB1c2goZSksdGhpcy5vcHRpb25zW3RdJiZlLmVuYWJsZSgpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2luaXRFdmVudHMoITApLHRoaXMuX2NvbnRhaW5lcklkIT09dGhpcy5fY29udGFpbmVyLl9sZWFmbGV0X2lkKXRocm93IG5ldyBFcnJvcihcIk1hcCBjb250YWluZXIgaXMgYmVpbmcgcmV1c2VkIGJ5IGFub3RoZXIgaW5zdGFuY2VcIik7dHJ5e2RlbGV0ZSB0aGlzLl9jb250YWluZXIuX2xlYWZsZXRfaWQsZGVsZXRlIHRoaXMuX2NvbnRhaW5lcklkfWNhdGNoKHQpe3RoaXMuX2NvbnRhaW5lci5fbGVhZmxldF9pZD12b2lkIDAsdGhpcy5fY29udGFpbmVySWQ9dm9pZCAwfXZvaWQgMCE9PXRoaXMuX2xvY2F0aW9uV2F0Y2hJZCYmdGhpcy5zdG9wTG9jYXRlKCksdGhpcy5fc3RvcCgpLEsodGhpcy5fbWFwUGFuZSksdGhpcy5fY2xlYXJDb250cm9sUG9zJiZ0aGlzLl9jbGVhckNvbnRyb2xQb3MoKSx0aGlzLl9yZXNpemVSZXF1ZXN0JiYoZyh0aGlzLl9yZXNpemVSZXF1ZXN0KSx0aGlzLl9yZXNpemVSZXF1ZXN0PW51bGwpLHRoaXMuX2NsZWFySGFuZGxlcnMoKSx0aGlzLl9sb2FkZWQmJnRoaXMuZmlyZShcInVubG9hZFwiKTt2YXIgdDtmb3IodCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLnJlbW92ZSgpO2Zvcih0IGluIHRoaXMuX3BhbmVzKUsodGhpcy5fcGFuZXNbdF0pO3JldHVybiB0aGlzLl9sYXllcnM9W10sdGhpcy5fcGFuZXM9W10sZGVsZXRlIHRoaXMuX21hcFBhbmUsZGVsZXRlIHRoaXMuX3JlbmRlcmVyLHRoaXN9LGNyZWF0ZVBhbmU6ZnVuY3Rpb24odCxpKXt2YXIgZT1HKFwiZGl2XCIsXCJsZWFmbGV0LXBhbmVcIisodD9cIiBsZWFmbGV0LVwiK3QucmVwbGFjZShcIlBhbmVcIixcIlwiKStcIi1wYW5lXCI6XCJcIiksaXx8dGhpcy5fbWFwUGFuZSk7cmV0dXJuIHQmJih0aGlzLl9wYW5lc1t0XT1lKSxlfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tJZkxvYWRlZCgpLHRoaXMuX2xhc3RDZW50ZXImJiF0aGlzLl9tb3ZlZCgpP3RoaXMuX2xhc3RDZW50ZXI6dGhpcy5sYXllclBvaW50VG9MYXRMbmcodGhpcy5fZ2V0Q2VudGVyTGF5ZXJQb2ludCgpKX0sZ2V0Wm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96b29tfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFBpeGVsQm91bmRzKCk7cmV0dXJuIG5ldyBUKHRoaXMudW5wcm9qZWN0KHQuZ2V0Qm90dG9tTGVmdCgpKSx0aGlzLnVucHJvamVjdCh0LmdldFRvcFJpZ2h0KCkpKX0sZ2V0TWluWm9vbTpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLm9wdGlvbnMubWluWm9vbT90aGlzLl9sYXllcnNNaW5ab29tfHwwOnRoaXMub3B0aW9ucy5taW5ab29tfSxnZXRNYXhab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMub3B0aW9ucy5tYXhab29tP3ZvaWQgMD09PXRoaXMuX2xheWVyc01heFpvb20/MS8wOnRoaXMuX2xheWVyc01heFpvb206dGhpcy5vcHRpb25zLm1heFpvb219LGdldEJvdW5kc1pvb206ZnVuY3Rpb24odCxpLGUpe3Q9eih0KSxlPXcoZXx8WzAsMF0pO3ZhciBuPXRoaXMuZ2V0Wm9vbSgpfHwwLG89dGhpcy5nZXRNaW5ab29tKCkscz10aGlzLmdldE1heFpvb20oKSxyPXQuZ2V0Tm9ydGhXZXN0KCksYT10LmdldFNvdXRoRWFzdCgpLGg9dGhpcy5nZXRTaXplKCkuc3VidHJhY3QoZSksdT1iKHRoaXMucHJvamVjdChhLG4pLHRoaXMucHJvamVjdChyLG4pKS5nZXRTaXplKCksbD1qaT90aGlzLm9wdGlvbnMuem9vbVNuYXA6MSxjPWgueC91LngsXz1oLnkvdS55LGQ9aT9NYXRoLm1heChjLF8pOk1hdGgubWluKGMsXyk7cmV0dXJuIG49dGhpcy5nZXRTY2FsZVpvb20oZCxuKSxsJiYobj1NYXRoLnJvdW5kKG4vKGwvMTAwKSkqKGwvMTAwKSxuPWk/TWF0aC5jZWlsKG4vbCkqbDpNYXRoLmZsb29yKG4vbCkqbCksTWF0aC5tYXgobyxNYXRoLm1pbihzLG4pKX0sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplJiYhdGhpcy5fc2l6ZUNoYW5nZWR8fCh0aGlzLl9zaXplPW5ldyB4KHRoaXMuX2NvbnRhaW5lci5jbGllbnRXaWR0aHx8MCx0aGlzLl9jb250YWluZXIuY2xpZW50SGVpZ2h0fHwwKSx0aGlzLl9zaXplQ2hhbmdlZD0hMSksdGhpcy5fc2l6ZS5jbG9uZSgpfSxnZXRQaXhlbEJvdW5kczpmdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMuX2dldFRvcExlZnRQb2ludCh0LGkpO3JldHVybiBuZXcgUChlLGUuYWRkKHRoaXMuZ2V0U2l6ZSgpKSl9LGdldFBpeGVsT3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrSWZMb2FkZWQoKSx0aGlzLl9waXhlbE9yaWdpbn0sZ2V0UGl4ZWxXb3JsZEJvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmNycy5nZXRQcm9qZWN0ZWRCb3VuZHModm9pZCAwPT09dD90aGlzLmdldFpvb20oKTp0KX0sZ2V0UGFuZTpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLl9wYW5lc1t0XTp0fSxnZXRQYW5lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYW5lc30sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn0sZ2V0Wm9vbVNjYWxlOmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5vcHRpb25zLmNycztyZXR1cm4gaT12b2lkIDA9PT1pP3RoaXMuX3pvb206aSxlLnNjYWxlKHQpL2Uuc2NhbGUoaSl9LGdldFNjYWxlWm9vbTpmdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMub3B0aW9ucy5jcnM7aT12b2lkIDA9PT1pP3RoaXMuX3pvb206aTt2YXIgbj1lLnpvb20odCplLnNjYWxlKGkpKTtyZXR1cm4gaXNOYU4obik/MS8wOm59LHByb2plY3Q6ZnVuY3Rpb24odCxpKXtyZXR1cm4gaT12b2lkIDA9PT1pP3RoaXMuX3pvb206aSx0aGlzLm9wdGlvbnMuY3JzLmxhdExuZ1RvUG9pbnQoQyh0KSxpKX0sdW5wcm9qZWN0OmZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9dm9pZCAwPT09aT90aGlzLl96b29tOmksdGhpcy5vcHRpb25zLmNycy5wb2ludFRvTGF0TG5nKHcodCksaSl9LGxheWVyUG9pbnRUb0xhdExuZzpmdW5jdGlvbih0KXt2YXIgaT13KHQpLmFkZCh0aGlzLmdldFBpeGVsT3JpZ2luKCkpO3JldHVybiB0aGlzLnVucHJvamVjdChpKX0sbGF0TG5nVG9MYXllclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb2plY3QoQyh0KSkuX3JvdW5kKCkuX3N1YnRyYWN0KHRoaXMuZ2V0UGl4ZWxPcmlnaW4oKSl9LHdyYXBMYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5jcnMud3JhcExhdExuZyhDKHQpKX0sd3JhcExhdExuZ0JvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmNycy53cmFwTGF0TG5nQm91bmRzKHoodCkpfSxkaXN0YW5jZTpmdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLm9wdGlvbnMuY3JzLmRpc3RhbmNlKEModCksQyhpKSl9LGNvbnRhaW5lclBvaW50VG9MYXllclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB3KHQpLnN1YnRyYWN0KHRoaXMuX2dldE1hcFBhbmVQb3MoKSl9LGxheWVyUG9pbnRUb0NvbnRhaW5lclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB3KHQpLmFkZCh0aGlzLl9nZXRNYXBQYW5lUG9zKCkpfSxjb250YWluZXJQb2ludFRvTGF0TG5nOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuY29udGFpbmVyUG9pbnRUb0xheWVyUG9pbnQodyh0KSk7cmV0dXJuIHRoaXMubGF5ZXJQb2ludFRvTGF0TG5nKGkpfSxsYXRMbmdUb0NvbnRhaW5lclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxheWVyUG9pbnRUb0NvbnRhaW5lclBvaW50KHRoaXMubGF0TG5nVG9MYXllclBvaW50KEModCkpKX0sbW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGJ0KHQsdGhpcy5fY29udGFpbmVyKX0sbW91c2VFdmVudFRvTGF5ZXJQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludCh0aGlzLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQpKX0sbW91c2VFdmVudFRvTGF0TG5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxheWVyUG9pbnRUb0xhdExuZyh0aGlzLm1vdXNlRXZlbnRUb0xheWVyUG9pbnQodCkpfSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9jb250YWluZXI9Vih0KTtpZighaSl0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY29udGFpbmVyIG5vdCBmb3VuZC5cIik7aWYoaS5fbGVhZmxldF9pZCl0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY29udGFpbmVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXCIpO210KGksXCJzY3JvbGxcIix0aGlzLl9vblNjcm9sbCx0aGlzKSx0aGlzLl9jb250YWluZXJJZD1uKGkpfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcjt0aGlzLl9mYWRlQW5pbWF0ZWQ9dGhpcy5vcHRpb25zLmZhZGVBbmltYXRpb24mJmppLFEodCxcImxlYWZsZXQtY29udGFpbmVyXCIrKHFpP1wiIGxlYWZsZXQtdG91Y2hcIjpcIlwiKSsoWWk/XCIgbGVhZmxldC1yZXRpbmFcIjpcIlwiKSsoTGk/XCIgbGVhZmxldC1vbGRpZVwiOlwiXCIpKyhBaT9cIiBsZWFmbGV0LXNhZmFyaVwiOlwiXCIpKyh0aGlzLl9mYWRlQW5pbWF0ZWQ/XCIgbGVhZmxldC1mYWRlLWFuaW1cIjpcIlwiKSk7dmFyIGk9cSh0LFwicG9zaXRpb25cIik7XCJhYnNvbHV0ZVwiIT09aSYmXCJyZWxhdGl2ZVwiIT09aSYmXCJmaXhlZFwiIT09aSYmKHQuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSx0aGlzLl9pbml0UGFuZXMoKSx0aGlzLl9pbml0Q29udHJvbFBvcyYmdGhpcy5faW5pdENvbnRyb2xQb3MoKX0sX2luaXRQYW5lczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3BhbmVzPXt9O3RoaXMuX3BhbmVSZW5kZXJlcnM9e30sdGhpcy5fbWFwUGFuZT10aGlzLmNyZWF0ZVBhbmUoXCJtYXBQYW5lXCIsdGhpcy5fY29udGFpbmVyKSxhdCh0aGlzLl9tYXBQYW5lLG5ldyB4KDAsMCkpLHRoaXMuY3JlYXRlUGFuZShcInRpbGVQYW5lXCIpLHRoaXMuY3JlYXRlUGFuZShcInNoYWRvd1BhbmVcIiksdGhpcy5jcmVhdGVQYW5lKFwib3ZlcmxheVBhbmVcIiksdGhpcy5jcmVhdGVQYW5lKFwibWFya2VyUGFuZVwiKSx0aGlzLmNyZWF0ZVBhbmUoXCJ0b29sdGlwUGFuZVwiKSx0aGlzLmNyZWF0ZVBhbmUoXCJwb3B1cFBhbmVcIiksdGhpcy5vcHRpb25zLm1hcmtlclpvb21BbmltYXRpb258fChRKHQubWFya2VyUGFuZSxcImxlYWZsZXQtem9vbS1oaWRlXCIpLFEodC5zaGFkb3dQYW5lLFwibGVhZmxldC16b29tLWhpZGVcIikpfSxfcmVzZXRWaWV3OmZ1bmN0aW9uKHQsaSl7YXQodGhpcy5fbWFwUGFuZSxuZXcgeCgwLDApKTt2YXIgZT0hdGhpcy5fbG9hZGVkO3RoaXMuX2xvYWRlZD0hMCxpPXRoaXMuX2xpbWl0Wm9vbShpKSx0aGlzLmZpcmUoXCJ2aWV3cHJlcmVzZXRcIik7dmFyIG49dGhpcy5fem9vbSE9PWk7dGhpcy5fbW92ZVN0YXJ0KG4sITEpLl9tb3ZlKHQsaSkuX21vdmVFbmQobiksdGhpcy5maXJlKFwidmlld3Jlc2V0XCIpLGUmJnRoaXMuZmlyZShcImxvYWRcIil9LF9tb3ZlU3RhcnQ6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdCYmdGhpcy5maXJlKFwiem9vbXN0YXJ0XCIpLGl8fHRoaXMuZmlyZShcIm1vdmVzdGFydFwiKSx0aGlzfSxfbW92ZTpmdW5jdGlvbih0LGksZSl7dm9pZCAwPT09aSYmKGk9dGhpcy5fem9vbSk7dmFyIG49dGhpcy5fem9vbSE9PWk7cmV0dXJuIHRoaXMuX3pvb209aSx0aGlzLl9sYXN0Q2VudGVyPXQsdGhpcy5fcGl4ZWxPcmlnaW49dGhpcy5fZ2V0TmV3UGl4ZWxPcmlnaW4odCksKG58fGUmJmUucGluY2gpJiZ0aGlzLmZpcmUoXCJ6b29tXCIsZSksdGhpcy5maXJlKFwibW92ZVwiLGUpfSxfbW92ZUVuZDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5maXJlKFwiem9vbWVuZFwiKSx0aGlzLmZpcmUoXCJtb3ZlZW5kXCIpfSxfc3RvcDpmdW5jdGlvbigpe3JldHVybiBnKHRoaXMuX2ZseVRvRnJhbWUpLHRoaXMuX3BhbkFuaW0mJnRoaXMuX3BhbkFuaW0uc3RvcCgpLHRoaXN9LF9yYXdQYW5CeTpmdW5jdGlvbih0KXthdCh0aGlzLl9tYXBQYW5lLHRoaXMuX2dldE1hcFBhbmVQb3MoKS5zdWJ0cmFjdCh0KSl9LF9nZXRab29tU3BhbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1heFpvb20oKS10aGlzLmdldE1pblpvb20oKX0sX3Bhbkluc2lkZU1heEJvdW5kczpmdW5jdGlvbigpe3RoaXMuX2VuZm9yY2luZ0JvdW5kc3x8dGhpcy5wYW5JbnNpZGVCb3VuZHModGhpcy5vcHRpb25zLm1heEJvdW5kcyl9LF9jaGVja0lmTG9hZGVkOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2xvYWRlZCl0aHJvdyBuZXcgRXJyb3IoXCJTZXQgbWFwIGNlbnRlciBhbmQgem9vbSBmaXJzdC5cIil9LF9pbml0RXZlbnRzOmZ1bmN0aW9uKHQpe3RoaXMuX3RhcmdldHM9e30sdGhpcy5fdGFyZ2V0c1tuKHRoaXMuX2NvbnRhaW5lcildPXRoaXM7dmFyIGk9dD9mdDptdDtpKHRoaXMuX2NvbnRhaW5lcixcImNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgY29udGV4dG1lbnUga2V5cHJlc3NcIix0aGlzLl9oYW5kbGVET01FdmVudCx0aGlzKSx0aGlzLm9wdGlvbnMudHJhY2tSZXNpemUmJmkod2luZG93LFwicmVzaXplXCIsdGhpcy5fb25SZXNpemUsdGhpcyksamkmJnRoaXMub3B0aW9ucy50cmFuc2Zvcm0zRExpbWl0JiYodD90aGlzLm9mZjp0aGlzLm9uKS5jYWxsKHRoaXMsXCJtb3ZlZW5kXCIsdGhpcy5fb25Nb3ZlRW5kKX0sX29uUmVzaXplOmZ1bmN0aW9uKCl7Zyh0aGlzLl9yZXNpemVSZXF1ZXN0KSx0aGlzLl9yZXNpemVSZXF1ZXN0PWYoZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaXplKHtkZWJvdW5jZU1vdmVlbmQ6ITB9KX0sdGhpcyl9LF9vblNjcm9sbDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5zY3JvbGxUb3A9MCx0aGlzLl9jb250YWluZXIuc2Nyb2xsTGVmdD0wfSxfb25Nb3ZlRW5kOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0TWFwUGFuZVBvcygpO01hdGgubWF4KE1hdGguYWJzKHQueCksTWF0aC5hYnModC55KSk+PXRoaXMub3B0aW9ucy50cmFuc2Zvcm0zRExpbWl0JiZ0aGlzLl9yZXNldFZpZXcodGhpcy5nZXRDZW50ZXIoKSx0aGlzLmdldFpvb20oKSl9LF9maW5kRXZlbnRUYXJnZXRzOmZ1bmN0aW9uKHQsaSl7Zm9yKHZhciBlLG89W10scz1cIm1vdXNlb3V0XCI9PT1pfHxcIm1vdXNlb3ZlclwiPT09aSxyPXQudGFyZ2V0fHx0LnNyY0VsZW1lbnQsYT0hMTtyOyl7aWYoKGU9dGhpcy5fdGFyZ2V0c1tuKHIpXSkmJihcImNsaWNrXCI9PT1pfHxcInByZWNsaWNrXCI9PT1pKSYmIXQuX3NpbXVsYXRlZCYmdGhpcy5fZHJhZ2dhYmxlTW92ZWQoZSkpe2E9ITA7YnJlYWt9aWYoZSYmZS5saXN0ZW5zKGksITApKXtpZihzJiYhQ3Qocix0KSlicmVhaztpZihvLnB1c2goZSkscylicmVha31pZihyPT09dGhpcy5fY29udGFpbmVyKWJyZWFrO3I9ci5wYXJlbnROb2RlfXJldHVybiBvLmxlbmd0aHx8YXx8c3x8IUN0KHIsdCl8fChvPVt0aGlzXSksb30sX2hhbmRsZURPTUV2ZW50OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2xvYWRlZCYmIU10KHQpKXt2YXIgaT10LnR5cGU7XCJtb3VzZWRvd25cIiE9PWkmJlwia2V5cHJlc3NcIiE9PWl8fGN0KHQudGFyZ2V0fHx0LnNyY0VsZW1lbnQpLHRoaXMuX2ZpcmVET01FdmVudCh0LGkpfX0sX21vdXNlRXZlbnRzOltcImNsaWNrXCIsXCJkYmxjbGlja1wiLFwibW91c2VvdmVyXCIsXCJtb3VzZW91dFwiLFwiY29udGV4dG1lbnVcIl0sX2ZpcmVET01FdmVudDpmdW5jdGlvbih0LGUsbil7aWYoXCJjbGlja1wiPT09dC50eXBlKXt2YXIgbz1pKHt9LHQpO28udHlwZT1cInByZWNsaWNrXCIsdGhpcy5fZmlyZURPTUV2ZW50KG8sby50eXBlLG4pfWlmKCF0Ll9zdG9wcGVkJiYobj0obnx8W10pLmNvbmNhdCh0aGlzLl9maW5kRXZlbnRUYXJnZXRzKHQsZSkpKS5sZW5ndGgpe3ZhciBzPW5bMF07XCJjb250ZXh0bWVudVwiPT09ZSYmcy5saXN0ZW5zKGUsITApJiZQdCh0KTt2YXIgcj17b3JpZ2luYWxFdmVudDp0fTtpZihcImtleXByZXNzXCIhPT10LnR5cGUpe3ZhciBhPXMuZ2V0TGF0TG5nJiYoIXMuX3JhZGl1c3x8cy5fcmFkaXVzPD0xMCk7ci5jb250YWluZXJQb2ludD1hP3RoaXMubGF0TG5nVG9Db250YWluZXJQb2ludChzLmdldExhdExuZygpKTp0aGlzLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQpLHIubGF5ZXJQb2ludD10aGlzLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KHIuY29udGFpbmVyUG9pbnQpLHIubGF0bG5nPWE/cy5nZXRMYXRMbmcoKTp0aGlzLmxheWVyUG9pbnRUb0xhdExuZyhyLmxheWVyUG9pbnQpfWZvcih2YXIgaD0wO2g8bi5sZW5ndGg7aCsrKWlmKG5baF0uZmlyZShlLHIsITApLHIub3JpZ2luYWxFdmVudC5fc3RvcHBlZHx8ITE9PT1uW2hdLm9wdGlvbnMuYnViYmxpbmdNb3VzZUV2ZW50cyYmLTEhPT1kKHRoaXMuX21vdXNlRXZlbnRzLGUpKXJldHVybn19LF9kcmFnZ2FibGVNb3ZlZDpmdW5jdGlvbih0KXtyZXR1cm4odD10LmRyYWdnaW5nJiZ0LmRyYWdnaW5nLmVuYWJsZWQoKT90OnRoaXMpLmRyYWdnaW5nJiZ0LmRyYWdnaW5nLm1vdmVkKCl8fHRoaXMuYm94Wm9vbSYmdGhpcy5ib3hab29tLm1vdmVkKCl9LF9jbGVhckhhbmRsZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsaT10aGlzLl9oYW5kbGVycy5sZW5ndGg7dDxpO3QrKyl0aGlzLl9oYW5kbGVyc1t0XS5kaXNhYmxlKCl9LHdoZW5SZWFkeTpmdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9sb2FkZWQ/dC5jYWxsKGl8fHRoaXMse3RhcmdldDp0aGlzfSk6dGhpcy5vbihcImxvYWRcIix0LGkpLHRoaXN9LF9nZXRNYXBQYW5lUG9zOmZ1bmN0aW9uKCl7cmV0dXJuIGh0KHRoaXMuX21hcFBhbmUpfHxuZXcgeCgwLDApfSxfbW92ZWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRNYXBQYW5lUG9zKCk7cmV0dXJuIHQmJiF0LmVxdWFscyhbMCwwXSl9LF9nZXRUb3BMZWZ0UG9pbnQ6ZnVuY3Rpb24odCxpKXtyZXR1cm4odCYmdm9pZCAwIT09aT90aGlzLl9nZXROZXdQaXhlbE9yaWdpbih0LGkpOnRoaXMuZ2V0UGl4ZWxPcmlnaW4oKSkuc3VidHJhY3QodGhpcy5fZ2V0TWFwUGFuZVBvcygpKX0sX2dldE5ld1BpeGVsT3JpZ2luOmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5nZXRTaXplKCkuX2RpdmlkZUJ5KDIpO3JldHVybiB0aGlzLnByb2plY3QodCxpKS5fc3VidHJhY3QoZSkuX2FkZCh0aGlzLl9nZXRNYXBQYW5lUG9zKCkpLl9yb3VuZCgpfSxfbGF0TG5nVG9OZXdMYXllclBvaW50OmZ1bmN0aW9uKHQsaSxlKXt2YXIgbj10aGlzLl9nZXROZXdQaXhlbE9yaWdpbihlLGkpO3JldHVybiB0aGlzLnByb2plY3QodCxpKS5fc3VidHJhY3Qobil9LF9sYXRMbmdCb3VuZHNUb05ld0xheWVyQm91bmRzOmZ1bmN0aW9uKHQsaSxlKXt2YXIgbj10aGlzLl9nZXROZXdQaXhlbE9yaWdpbihlLGkpO3JldHVybiBiKFt0aGlzLnByb2plY3QodC5nZXRTb3V0aFdlc3QoKSxpKS5fc3VidHJhY3QobiksdGhpcy5wcm9qZWN0KHQuZ2V0Tm9ydGhXZXN0KCksaSkuX3N1YnRyYWN0KG4pLHRoaXMucHJvamVjdCh0LmdldFNvdXRoRWFzdCgpLGkpLl9zdWJ0cmFjdChuKSx0aGlzLnByb2plY3QodC5nZXROb3J0aEVhc3QoKSxpKS5fc3VidHJhY3QobildKX0sX2dldENlbnRlckxheWVyUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludCh0aGlzLmdldFNpemUoKS5fZGl2aWRlQnkoMikpfSxfZ2V0Q2VudGVyT2Zmc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxhdExuZ1RvTGF5ZXJQb2ludCh0KS5zdWJ0cmFjdCh0aGlzLl9nZXRDZW50ZXJMYXllclBvaW50KCkpfSxfbGltaXRDZW50ZXI6ZnVuY3Rpb24odCxpLGUpe2lmKCFlKXJldHVybiB0O3ZhciBuPXRoaXMucHJvamVjdCh0LGkpLG89dGhpcy5nZXRTaXplKCkuZGl2aWRlQnkoMikscz1uZXcgUChuLnN1YnRyYWN0KG8pLG4uYWRkKG8pKSxyPXRoaXMuX2dldEJvdW5kc09mZnNldChzLGUsaSk7cmV0dXJuIHIucm91bmQoKS5lcXVhbHMoWzAsMF0pP3Q6dGhpcy51bnByb2plY3Qobi5hZGQociksaSl9LF9saW1pdE9mZnNldDpmdW5jdGlvbih0LGkpe2lmKCFpKXJldHVybiB0O3ZhciBlPXRoaXMuZ2V0UGl4ZWxCb3VuZHMoKSxuPW5ldyBQKGUubWluLmFkZCh0KSxlLm1heC5hZGQodCkpO3JldHVybiB0LmFkZCh0aGlzLl9nZXRCb3VuZHNPZmZzZXQobixpKSl9LF9nZXRCb3VuZHNPZmZzZXQ6ZnVuY3Rpb24odCxpLGUpe3ZhciBuPWIodGhpcy5wcm9qZWN0KGkuZ2V0Tm9ydGhFYXN0KCksZSksdGhpcy5wcm9qZWN0KGkuZ2V0U291dGhXZXN0KCksZSkpLG89bi5taW4uc3VidHJhY3QodC5taW4pLHM9bi5tYXguc3VidHJhY3QodC5tYXgpO3JldHVybiBuZXcgeCh0aGlzLl9yZWJvdW5kKG8ueCwtcy54KSx0aGlzLl9yZWJvdW5kKG8ueSwtcy55KSl9LF9yZWJvdW5kOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQraT4wP01hdGgucm91bmQodC1pKS8yOk1hdGgubWF4KDAsTWF0aC5jZWlsKHQpKS1NYXRoLm1heCgwLE1hdGguZmxvb3IoaSkpfSxfbGltaXRab29tOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0TWluWm9vbSgpLGU9dGhpcy5nZXRNYXhab29tKCksbj1qaT90aGlzLm9wdGlvbnMuem9vbVNuYXA6MTtyZXR1cm4gbiYmKHQ9TWF0aC5yb3VuZCh0L24pKm4pLE1hdGgubWF4KGksTWF0aC5taW4oZSx0KSl9LF9vblBhblRyYW5zaXRpb25TdGVwOmZ1bmN0aW9uKCl7dGhpcy5maXJlKFwibW92ZVwiKX0sX29uUGFuVHJhbnNpdGlvbkVuZDpmdW5jdGlvbigpe3R0KHRoaXMuX21hcFBhbmUsXCJsZWFmbGV0LXBhbi1hbmltXCIpLHRoaXMuZmlyZShcIm1vdmVlbmRcIil9LF90cnlBbmltYXRlZFBhbjpmdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMuX2dldENlbnRlck9mZnNldCh0KS5fdHJ1bmMoKTtyZXR1cm4hKCEwIT09KGkmJmkuYW5pbWF0ZSkmJiF0aGlzLmdldFNpemUoKS5jb250YWlucyhlKSkmJih0aGlzLnBhbkJ5KGUsaSksITApfSxfY3JlYXRlQW5pbVByb3h5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcHJveHk9RyhcImRpdlwiLFwibGVhZmxldC1wcm94eSBsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIik7dGhpcy5fcGFuZXMubWFwUGFuZS5hcHBlbmRDaGlsZCh0KSx0aGlzLm9uKFwiem9vbWFuaW1cIixmdW5jdGlvbih0KXt2YXIgaT1jZSxlPXRoaXMuX3Byb3h5LnN0eWxlW2ldO3J0KHRoaXMuX3Byb3h5LHRoaXMucHJvamVjdCh0LmNlbnRlcix0Lnpvb20pLHRoaXMuZ2V0Wm9vbVNjYWxlKHQuem9vbSwxKSksZT09PXRoaXMuX3Byb3h5LnN0eWxlW2ldJiZ0aGlzLl9hbmltYXRpbmdab29tJiZ0aGlzLl9vblpvb21UcmFuc2l0aW9uRW5kKCl9LHRoaXMpLHRoaXMub24oXCJsb2FkIG1vdmVlbmRcIixmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Q2VudGVyKCksaT10aGlzLmdldFpvb20oKTtydCh0aGlzLl9wcm94eSx0aGlzLnByb2plY3QodCxpKSx0aGlzLmdldFpvb21TY2FsZShpLDEpKX0sdGhpcyksdGhpcy5fb24oXCJ1bmxvYWRcIix0aGlzLl9kZXN0cm95QW5pbVByb3h5LHRoaXMpfSxfZGVzdHJveUFuaW1Qcm94eTpmdW5jdGlvbigpe0sodGhpcy5fcHJveHkpLGRlbGV0ZSB0aGlzLl9wcm94eX0sX2NhdGNoVHJhbnNpdGlvbkVuZDpmdW5jdGlvbih0KXt0aGlzLl9hbmltYXRpbmdab29tJiZ0LnByb3BlcnR5TmFtZS5pbmRleE9mKFwidHJhbnNmb3JtXCIpPj0wJiZ0aGlzLl9vblpvb21UcmFuc2l0aW9uRW5kKCl9LF9ub3RoaW5nVG9BbmltYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2NvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC16b29tLWFuaW1hdGVkXCIpLmxlbmd0aH0sX3RyeUFuaW1hdGVkWm9vbTpmdW5jdGlvbih0LGksZSl7aWYodGhpcy5fYW5pbWF0aW5nWm9vbSlyZXR1cm4hMDtpZihlPWV8fHt9LCF0aGlzLl96b29tQW5pbWF0ZWR8fCExPT09ZS5hbmltYXRlfHx0aGlzLl9ub3RoaW5nVG9BbmltYXRlKCl8fE1hdGguYWJzKGktdGhpcy5fem9vbSk+dGhpcy5vcHRpb25zLnpvb21BbmltYXRpb25UaHJlc2hvbGQpcmV0dXJuITE7dmFyIG49dGhpcy5nZXRab29tU2NhbGUoaSksbz10aGlzLl9nZXRDZW50ZXJPZmZzZXQodCkuX2RpdmlkZUJ5KDEtMS9uKTtyZXR1cm4hKCEwIT09ZS5hbmltYXRlJiYhdGhpcy5nZXRTaXplKCkuY29udGFpbnMobykpJiYoZihmdW5jdGlvbigpe3RoaXMuX21vdmVTdGFydCghMCwhMSkuX2FuaW1hdGVab29tKHQsaSwhMCl9LHRoaXMpLCEwKX0sX2FuaW1hdGVab29tOmZ1bmN0aW9uKHQsaSxuLG8pe3RoaXMuX21hcFBhbmUmJihuJiYodGhpcy5fYW5pbWF0aW5nWm9vbT0hMCx0aGlzLl9hbmltYXRlVG9DZW50ZXI9dCx0aGlzLl9hbmltYXRlVG9ab29tPWksUSh0aGlzLl9tYXBQYW5lLFwibGVhZmxldC16b29tLWFuaW1cIikpLHRoaXMuZmlyZShcInpvb21hbmltXCIse2NlbnRlcjp0LHpvb206aSxub1VwZGF0ZTpvfSksc2V0VGltZW91dChlKHRoaXMuX29uWm9vbVRyYW5zaXRpb25FbmQsdGhpcyksMjUwKSl9LF9vblpvb21UcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0aW5nWm9vbSYmKHRoaXMuX21hcFBhbmUmJnR0KHRoaXMuX21hcFBhbmUsXCJsZWFmbGV0LXpvb20tYW5pbVwiKSx0aGlzLl9hbmltYXRpbmdab29tPSExLHRoaXMuX21vdmUodGhpcy5fYW5pbWF0ZVRvQ2VudGVyLHRoaXMuX2FuaW1hdGVUb1pvb20pLGYoZnVuY3Rpb24oKXt0aGlzLl9tb3ZlRW5kKCEwKX0sdGhpcykpfX0pLFRlPXYuZXh0ZW5kKHtvcHRpb25zOntwb3NpdGlvbjpcInRvcHJpZ2h0XCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7bCh0aGlzLHQpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMucG9zaXRpb259LHNldFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcDtyZXR1cm4gaSYmaS5yZW1vdmVDb250cm9sKHRoaXMpLHRoaXMub3B0aW9ucy5wb3NpdGlvbj10LGkmJmkuYWRkQ29udHJvbCh0aGlzKSx0aGlzfSxnZXRDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfSxhZGRUbzpmdW5jdGlvbih0KXt0aGlzLnJlbW92ZSgpLHRoaXMuX21hcD10O3ZhciBpPXRoaXMuX2NvbnRhaW5lcj10aGlzLm9uQWRkKHQpLGU9dGhpcy5nZXRQb3NpdGlvbigpLG49dC5fY29udHJvbENvcm5lcnNbZV07cmV0dXJuIFEoaSxcImxlYWZsZXQtY29udHJvbFwiKSwtMSE9PWUuaW5kZXhPZihcImJvdHRvbVwiKT9uLmluc2VydEJlZm9yZShpLG4uZmlyc3RDaGlsZCk6bi5hcHBlbmRDaGlsZChpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwPyhLKHRoaXMuX2NvbnRhaW5lciksdGhpcy5vblJlbW92ZSYmdGhpcy5vblJlbW92ZSh0aGlzLl9tYXApLHRoaXMuX21hcD1udWxsLHRoaXMpOnRoaXN9LF9yZWZvY3VzT25NYXA6ZnVuY3Rpb24odCl7dGhpcy5fbWFwJiZ0JiZ0LnNjcmVlblg+MCYmdC5zY3JlZW5ZPjAmJnRoaXMuX21hcC5nZXRDb250YWluZXIoKS5mb2N1cygpfX0pLHplPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVGUodCl9O2JlLmluY2x1ZGUoe2FkZENvbnRyb2w6ZnVuY3Rpb24odCl7cmV0dXJuIHQuYWRkVG8odGhpcyksdGhpc30scmVtb3ZlQ29udHJvbDpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZW1vdmUoKSx0aGlzfSxfaW5pdENvbnRyb2xQb3M6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsbyl7dmFyIHM9ZSt0K1wiIFwiK2UrbztpW3Qrb109RyhcImRpdlwiLHMsbil9dmFyIGk9dGhpcy5fY29udHJvbENvcm5lcnM9e30sZT1cImxlYWZsZXQtXCIsbj10aGlzLl9jb250cm9sQ29udGFpbmVyPUcoXCJkaXZcIixlK1wiY29udHJvbC1jb250YWluZXJcIix0aGlzLl9jb250YWluZXIpO3QoXCJ0b3BcIixcImxlZnRcIiksdChcInRvcFwiLFwicmlnaHRcIiksdChcImJvdHRvbVwiLFwibGVmdFwiKSx0KFwiYm90dG9tXCIsXCJyaWdodFwiKX0sX2NsZWFyQ29udHJvbFBvczpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9jb250cm9sQ29ybmVycylLKHRoaXMuX2NvbnRyb2xDb3JuZXJzW3RdKTtLKHRoaXMuX2NvbnRyb2xDb250YWluZXIpLGRlbGV0ZSB0aGlzLl9jb250cm9sQ29ybmVycyxkZWxldGUgdGhpcy5fY29udHJvbENvbnRhaW5lcn19KTt2YXIgTWU9VGUuZXh0ZW5kKHtvcHRpb25zOntjb2xsYXBzZWQ6ITAscG9zaXRpb246XCJ0b3ByaWdodFwiLGF1dG9aSW5kZXg6ITAsaGlkZVNpbmdsZUJhc2U6ITEsc29ydExheWVyczohMSxzb3J0RnVuY3Rpb246ZnVuY3Rpb24odCxpLGUsbil7cmV0dXJuIGU8bj8tMTpuPGU/MTowfX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGksZSl7bCh0aGlzLGUpLHRoaXMuX2xheWVyQ29udHJvbElucHV0cz1bXSx0aGlzLl9sYXllcnM9W10sdGhpcy5fbGFzdFpJbmRleD0wLHRoaXMuX2hhbmRsaW5nQ2xpY2s9ITE7Zm9yKHZhciBuIGluIHQpdGhpcy5fYWRkTGF5ZXIodFtuXSxuKTtmb3IobiBpbiBpKXRoaXMuX2FkZExheWVyKGlbbl0sbiwhMCl9LG9uQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX2luaXRMYXlvdXQoKSx0aGlzLl91cGRhdGUoKSx0aGlzLl9tYXA9dCx0Lm9uKFwiem9vbWVuZFwiLHRoaXMuX2NoZWNrRGlzYWJsZWRMYXllcnMsdGhpcyk7Zm9yKHZhciBpPTA7aTx0aGlzLl9sYXllcnMubGVuZ3RoO2krKyl0aGlzLl9sYXllcnNbaV0ubGF5ZXIub24oXCJhZGQgcmVtb3ZlXCIsdGhpcy5fb25MYXllckNoYW5nZSx0aGlzKTtyZXR1cm4gdGhpcy5fY29udGFpbmVyfSxhZGRUbzpmdW5jdGlvbih0KXtyZXR1cm4gVGUucHJvdG90eXBlLmFkZFRvLmNhbGwodGhpcyx0KSx0aGlzLl9leHBhbmRJZk5vdENvbGxhcHNlZCgpfSxvblJlbW92ZTpmdW5jdGlvbigpe3RoaXMuX21hcC5vZmYoXCJ6b29tZW5kXCIsdGhpcy5fY2hlY2tEaXNhYmxlZExheWVycyx0aGlzKTtmb3IodmFyIHQ9MDt0PHRoaXMuX2xheWVycy5sZW5ndGg7dCsrKXRoaXMuX2xheWVyc1t0XS5sYXllci5vZmYoXCJhZGQgcmVtb3ZlXCIsdGhpcy5fb25MYXllckNoYW5nZSx0aGlzKX0sYWRkQmFzZUxheWVyOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX2FkZExheWVyKHQsaSksdGhpcy5fbWFwP3RoaXMuX3VwZGF0ZSgpOnRoaXN9LGFkZE92ZXJsYXk6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5fYWRkTGF5ZXIodCxpLCEwKSx0aGlzLl9tYXA/dGhpcy5fdXBkYXRlKCk6dGhpc30scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24odCl7dC5vZmYoXCJhZGQgcmVtb3ZlXCIsdGhpcy5fb25MYXllckNoYW5nZSx0aGlzKTt2YXIgaT10aGlzLl9nZXRMYXllcihuKHQpKTtyZXR1cm4gaSYmdGhpcy5fbGF5ZXJzLnNwbGljZSh0aGlzLl9sYXllcnMuaW5kZXhPZihpKSwxKSx0aGlzLl9tYXA/dGhpcy5fdXBkYXRlKCk6dGhpc30sZXhwYW5kOmZ1bmN0aW9uKCl7USh0aGlzLl9jb250YWluZXIsXCJsZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLWV4cGFuZGVkXCIpLHRoaXMuX2Zvcm0uc3R5bGUuaGVpZ2h0PW51bGw7dmFyIHQ9dGhpcy5fbWFwLmdldFNpemUoKS55LSh0aGlzLl9jb250YWluZXIub2Zmc2V0VG9wKzUwKTtyZXR1cm4gdDx0aGlzLl9mb3JtLmNsaWVudEhlaWdodD8oUSh0aGlzLl9mb3JtLFwibGVhZmxldC1jb250cm9sLWxheWVycy1zY3JvbGxiYXJcIiksdGhpcy5fZm9ybS5zdHlsZS5oZWlnaHQ9dCtcInB4XCIpOnR0KHRoaXMuX2Zvcm0sXCJsZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLXNjcm9sbGJhclwiKSx0aGlzLl9jaGVja0Rpc2FibGVkTGF5ZXJzKCksdGhpc30sY29sbGFwc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdHQodGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jb250cm9sLWxheWVycy1leHBhbmRlZFwiKSx0aGlzfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3ZhciB0PVwibGVhZmxldC1jb250cm9sLWxheWVyc1wiLGk9dGhpcy5fY29udGFpbmVyPUcoXCJkaXZcIix0KSxlPXRoaXMub3B0aW9ucy5jb2xsYXBzZWQ7aS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhhc3BvcHVwXCIsITApLHd0KGkpLHh0KGkpO3ZhciBuPXRoaXMuX2Zvcm09RyhcImZvcm1cIix0K1wiLWxpc3RcIik7ZSYmKHRoaXMuX21hcC5vbihcImNsaWNrXCIsdGhpcy5jb2xsYXBzZSx0aGlzKSx6aXx8bXQoaSx7bW91c2VlbnRlcjp0aGlzLmV4cGFuZCxtb3VzZWxlYXZlOnRoaXMuY29sbGFwc2V9LHRoaXMpKTt2YXIgbz10aGlzLl9sYXllcnNMaW5rPUcoXCJhXCIsdCtcIi10b2dnbGVcIixpKTtvLmhyZWY9XCIjXCIsby50aXRsZT1cIkxheWVyc1wiLHFpPyhtdChvLFwiY2xpY2tcIixMdCksbXQobyxcImNsaWNrXCIsdGhpcy5leHBhbmQsdGhpcykpOm10KG8sXCJmb2N1c1wiLHRoaXMuZXhwYW5kLHRoaXMpLGV8fHRoaXMuZXhwYW5kKCksdGhpcy5fYmFzZUxheWVyc0xpc3Q9RyhcImRpdlwiLHQrXCItYmFzZVwiLG4pLHRoaXMuX3NlcGFyYXRvcj1HKFwiZGl2XCIsdCtcIi1zZXBhcmF0b3JcIixuKSx0aGlzLl9vdmVybGF5c0xpc3Q9RyhcImRpdlwiLHQrXCItb3ZlcmxheXNcIixuKSxpLmFwcGVuZENoaWxkKG4pfSxfZ2V0TGF5ZXI6ZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9sYXllcnMubGVuZ3RoO2krKylpZih0aGlzLl9sYXllcnNbaV0mJm4odGhpcy5fbGF5ZXJzW2ldLmxheWVyKT09PXQpcmV0dXJuIHRoaXMuX2xheWVyc1tpXX0sX2FkZExheWVyOmZ1bmN0aW9uKHQsaSxuKXt0aGlzLl9tYXAmJnQub24oXCJhZGQgcmVtb3ZlXCIsdGhpcy5fb25MYXllckNoYW5nZSx0aGlzKSx0aGlzLl9sYXllcnMucHVzaCh7bGF5ZXI6dCxuYW1lOmksb3ZlcmxheTpufSksdGhpcy5vcHRpb25zLnNvcnRMYXllcnMmJnRoaXMuX2xheWVycy5zb3J0KGUoZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNvcnRGdW5jdGlvbih0LmxheWVyLGkubGF5ZXIsdC5uYW1lLGkubmFtZSl9LHRoaXMpKSx0aGlzLm9wdGlvbnMuYXV0b1pJbmRleCYmdC5zZXRaSW5kZXgmJih0aGlzLl9sYXN0WkluZGV4KyssdC5zZXRaSW5kZXgodGhpcy5fbGFzdFpJbmRleCkpLHRoaXMuX2V4cGFuZElmTm90Q29sbGFwc2VkKCl9LF91cGRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fY29udGFpbmVyKXJldHVybiB0aGlzO1kodGhpcy5fYmFzZUxheWVyc0xpc3QpLFkodGhpcy5fb3ZlcmxheXNMaXN0KSx0aGlzLl9sYXllckNvbnRyb2xJbnB1dHM9W107dmFyIHQsaSxlLG4sbz0wO2ZvcihlPTA7ZTx0aGlzLl9sYXllcnMubGVuZ3RoO2UrKyluPXRoaXMuX2xheWVyc1tlXSx0aGlzLl9hZGRJdGVtKG4pLGk9aXx8bi5vdmVybGF5LHQ9dHx8IW4ub3ZlcmxheSxvKz1uLm92ZXJsYXk/MDoxO3JldHVybiB0aGlzLm9wdGlvbnMuaGlkZVNpbmdsZUJhc2UmJih0PXQmJm8+MSx0aGlzLl9iYXNlTGF5ZXJzTGlzdC5zdHlsZS5kaXNwbGF5PXQ/XCJcIjpcIm5vbmVcIiksdGhpcy5fc2VwYXJhdG9yLnN0eWxlLmRpc3BsYXk9aSYmdD9cIlwiOlwibm9uZVwiLHRoaXN9LF9vbkxheWVyQ2hhbmdlOmZ1bmN0aW9uKHQpe3RoaXMuX2hhbmRsaW5nQ2xpY2t8fHRoaXMuX3VwZGF0ZSgpO3ZhciBpPXRoaXMuX2dldExheWVyKG4odC50YXJnZXQpKSxlPWkub3ZlcmxheT9cImFkZFwiPT09dC50eXBlP1wib3ZlcmxheWFkZFwiOlwib3ZlcmxheXJlbW92ZVwiOlwiYWRkXCI9PT10LnR5cGU/XCJiYXNlbGF5ZXJjaGFuZ2VcIjpudWxsO2UmJnRoaXMuX21hcC5maXJlKGUsaSl9LF9jcmVhdGVSYWRpb0VsZW1lbnQ6ZnVuY3Rpb24odCxpKXt2YXIgZT0nPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNsYXNzPVwibGVhZmxldC1jb250cm9sLWxheWVycy1zZWxlY3RvclwiIG5hbWU9XCInK3QrJ1wiJysoaT8nIGNoZWNrZWQ9XCJjaGVja2VkXCInOlwiXCIpK1wiLz5cIixuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIG4uaW5uZXJIVE1MPWUsbi5maXJzdENoaWxkfSxfYWRkSXRlbTpmdW5jdGlvbih0KXt2YXIgaSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKSxvPXRoaXMuX21hcC5oYXNMYXllcih0LmxheWVyKTt0Lm92ZXJsYXk/KChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSkudHlwZT1cImNoZWNrYm94XCIsaS5jbGFzc05hbWU9XCJsZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLXNlbGVjdG9yXCIsaS5kZWZhdWx0Q2hlY2tlZD1vKTppPXRoaXMuX2NyZWF0ZVJhZGlvRWxlbWVudChcImxlYWZsZXQtYmFzZS1sYXllcnNcIixvKSx0aGlzLl9sYXllckNvbnRyb2xJbnB1dHMucHVzaChpKSxpLmxheWVySWQ9bih0LmxheWVyKSxtdChpLFwiY2xpY2tcIix0aGlzLl9vbklucHV0Q2xpY2ssdGhpcyk7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7cy5pbm5lckhUTUw9XCIgXCIrdC5uYW1lO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGUuYXBwZW5kQ2hpbGQociksci5hcHBlbmRDaGlsZChpKSxyLmFwcGVuZENoaWxkKHMpLCh0Lm92ZXJsYXk/dGhpcy5fb3ZlcmxheXNMaXN0OnRoaXMuX2Jhc2VMYXllcnNMaXN0KS5hcHBlbmRDaGlsZChlKSx0aGlzLl9jaGVja0Rpc2FibGVkTGF5ZXJzKCksZX0sX29uSW5wdXRDbGljazpmdW5jdGlvbigpe3ZhciB0LGksZT10aGlzLl9sYXllckNvbnRyb2xJbnB1dHMsbj1bXSxvPVtdO3RoaXMuX2hhbmRsaW5nQ2xpY2s9ITA7Zm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pdD1lW3NdLGk9dGhpcy5fZ2V0TGF5ZXIodC5sYXllcklkKS5sYXllcix0LmNoZWNrZWQ/bi5wdXNoKGkpOnQuY2hlY2tlZHx8by5wdXNoKGkpO2ZvcihzPTA7czxvLmxlbmd0aDtzKyspdGhpcy5fbWFwLmhhc0xheWVyKG9bc10pJiZ0aGlzLl9tYXAucmVtb3ZlTGF5ZXIob1tzXSk7Zm9yKHM9MDtzPG4ubGVuZ3RoO3MrKyl0aGlzLl9tYXAuaGFzTGF5ZXIobltzXSl8fHRoaXMuX21hcC5hZGRMYXllcihuW3NdKTt0aGlzLl9oYW5kbGluZ0NsaWNrPSExLHRoaXMuX3JlZm9jdXNPbk1hcCgpfSxfY2hlY2tEaXNhYmxlZExheWVyczpmdW5jdGlvbigpe2Zvcih2YXIgdCxpLGU9dGhpcy5fbGF5ZXJDb250cm9sSW5wdXRzLG49dGhpcy5fbWFwLmdldFpvb20oKSxvPWUubGVuZ3RoLTE7bz49MDtvLS0pdD1lW29dLGk9dGhpcy5fZ2V0TGF5ZXIodC5sYXllcklkKS5sYXllcix0LmRpc2FibGVkPXZvaWQgMCE9PWkub3B0aW9ucy5taW5ab29tJiZuPGkub3B0aW9ucy5taW5ab29tfHx2b2lkIDAhPT1pLm9wdGlvbnMubWF4Wm9vbSYmbj5pLm9wdGlvbnMubWF4Wm9vbX0sX2V4cGFuZElmTm90Q29sbGFwc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmIXRoaXMub3B0aW9ucy5jb2xsYXBzZWQmJnRoaXMuZXhwYW5kKCksdGhpc30sX2V4cGFuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4cGFuZCgpfSxfY29sbGFwc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xsYXBzZSgpfX0pLENlPVRlLmV4dGVuZCh7b3B0aW9uczp7cG9zaXRpb246XCJ0b3BsZWZ0XCIsem9vbUluVGV4dDpcIitcIix6b29tSW5UaXRsZTpcIlpvb20gaW5cIix6b29tT3V0VGV4dDpcIiYjeDIyMTI7XCIsem9vbU91dFRpdGxlOlwiWm9vbSBvdXRcIn0sb25BZGQ6ZnVuY3Rpb24odCl7dmFyIGk9XCJsZWFmbGV0LWNvbnRyb2wtem9vbVwiLGU9RyhcImRpdlwiLGkrXCIgbGVhZmxldC1iYXJcIiksbj10aGlzLm9wdGlvbnM7cmV0dXJuIHRoaXMuX3pvb21JbkJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24obi56b29tSW5UZXh0LG4uem9vbUluVGl0bGUsaStcIi1pblwiLGUsdGhpcy5fem9vbUluKSx0aGlzLl96b29tT3V0QnV0dG9uPXRoaXMuX2NyZWF0ZUJ1dHRvbihuLnpvb21PdXRUZXh0LG4uem9vbU91dFRpdGxlLGkrXCItb3V0XCIsZSx0aGlzLl96b29tT3V0KSx0aGlzLl91cGRhdGVEaXNhYmxlZCgpLHQub24oXCJ6b29tZW5kIHpvb21sZXZlbHNjaGFuZ2VcIix0aGlzLl91cGRhdGVEaXNhYmxlZCx0aGlzKSxlfSxvblJlbW92ZTpmdW5jdGlvbih0KXt0Lm9mZihcInpvb21lbmQgem9vbWxldmVsc2NoYW5nZVwiLHRoaXMuX3VwZGF0ZURpc2FibGVkLHRoaXMpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkPSEwLHRoaXMuX3VwZGF0ZURpc2FibGVkKCksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkPSExLHRoaXMuX3VwZGF0ZURpc2FibGVkKCksdGhpc30sX3pvb21JbjpmdW5jdGlvbih0KXshdGhpcy5fZGlzYWJsZWQmJnRoaXMuX21hcC5fem9vbTx0aGlzLl9tYXAuZ2V0TWF4Wm9vbSgpJiZ0aGlzLl9tYXAuem9vbUluKHRoaXMuX21hcC5vcHRpb25zLnpvb21EZWx0YSoodC5zaGlmdEtleT8zOjEpKX0sX3pvb21PdXQ6ZnVuY3Rpb24odCl7IXRoaXMuX2Rpc2FibGVkJiZ0aGlzLl9tYXAuX3pvb20+dGhpcy5fbWFwLmdldE1pblpvb20oKSYmdGhpcy5fbWFwLnpvb21PdXQodGhpcy5fbWFwLm9wdGlvbnMuem9vbURlbHRhKih0LnNoaWZ0S2V5PzM6MSkpfSxfY3JlYXRlQnV0dG9uOmZ1bmN0aW9uKHQsaSxlLG4sbyl7dmFyIHM9RyhcImFcIixlLG4pO3JldHVybiBzLmlubmVySFRNTD10LHMuaHJlZj1cIiNcIixzLnRpdGxlPWkscy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJidXR0b25cIikscy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsaSksd3QocyksbXQocyxcImNsaWNrXCIsTHQpLG10KHMsXCJjbGlja1wiLG8sdGhpcyksbXQocyxcImNsaWNrXCIsdGhpcy5fcmVmb2N1c09uTWFwLHRoaXMpLHN9LF91cGRhdGVEaXNhYmxlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcCxpPVwibGVhZmxldC1kaXNhYmxlZFwiO3R0KHRoaXMuX3pvb21JbkJ1dHRvbixpKSx0dCh0aGlzLl96b29tT3V0QnV0dG9uLGkpLCh0aGlzLl9kaXNhYmxlZHx8dC5fem9vbT09PXQuZ2V0TWluWm9vbSgpKSYmUSh0aGlzLl96b29tT3V0QnV0dG9uLGkpLCh0aGlzLl9kaXNhYmxlZHx8dC5fem9vbT09PXQuZ2V0TWF4Wm9vbSgpKSYmUSh0aGlzLl96b29tSW5CdXR0b24saSl9fSk7YmUubWVyZ2VPcHRpb25zKHt6b29tQ29udHJvbDohMH0pLGJlLmFkZEluaXRIb29rKGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnpvb21Db250cm9sJiYodGhpcy56b29tQ29udHJvbD1uZXcgQ2UsdGhpcy5hZGRDb250cm9sKHRoaXMuem9vbUNvbnRyb2wpKX0pO3ZhciBTZT1UZS5leHRlbmQoe29wdGlvbnM6e3Bvc2l0aW9uOlwiYm90dG9tbGVmdFwiLG1heFdpZHRoOjEwMCxtZXRyaWM6ITAsaW1wZXJpYWw6ITB9LG9uQWRkOmZ1bmN0aW9uKHQpe3ZhciBpPUcoXCJkaXZcIixcImxlYWZsZXQtY29udHJvbC1zY2FsZVwiKSxlPXRoaXMub3B0aW9ucztyZXR1cm4gdGhpcy5fYWRkU2NhbGVzKGUsXCJsZWFmbGV0LWNvbnRyb2wtc2NhbGUtbGluZVwiLGkpLHQub24oZS51cGRhdGVXaGVuSWRsZT9cIm1vdmVlbmRcIjpcIm1vdmVcIix0aGlzLl91cGRhdGUsdGhpcyksdC53aGVuUmVhZHkodGhpcy5fdXBkYXRlLHRoaXMpLGl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3Qub2ZmKHRoaXMub3B0aW9ucy51cGRhdGVXaGVuSWRsZT9cIm1vdmVlbmRcIjpcIm1vdmVcIix0aGlzLl91cGRhdGUsdGhpcyl9LF9hZGRTY2FsZXM6ZnVuY3Rpb24odCxpLGUpe3QubWV0cmljJiYodGhpcy5fbVNjYWxlPUcoXCJkaXZcIixpLGUpKSx0LmltcGVyaWFsJiYodGhpcy5faVNjYWxlPUcoXCJkaXZcIixpLGUpKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcCxpPXQuZ2V0U2l6ZSgpLnkvMixlPXQuZGlzdGFuY2UodC5jb250YWluZXJQb2ludFRvTGF0TG5nKFswLGldKSx0LmNvbnRhaW5lclBvaW50VG9MYXRMbmcoW3RoaXMub3B0aW9ucy5tYXhXaWR0aCxpXSkpO3RoaXMuX3VwZGF0ZVNjYWxlcyhlKX0sX3VwZGF0ZVNjYWxlczpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMubWV0cmljJiZ0JiZ0aGlzLl91cGRhdGVNZXRyaWModCksdGhpcy5vcHRpb25zLmltcGVyaWFsJiZ0JiZ0aGlzLl91cGRhdGVJbXBlcmlhbCh0KX0sX3VwZGF0ZU1ldHJpYzpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9nZXRSb3VuZE51bSh0KSxlPWk8MWUzP2krXCIgbVwiOmkvMWUzK1wiIGttXCI7dGhpcy5fdXBkYXRlU2NhbGUodGhpcy5fbVNjYWxlLGUsaS90KX0sX3VwZGF0ZUltcGVyaWFsOmZ1bmN0aW9uKHQpe3ZhciBpLGUsbixvPTMuMjgwODM5OSp0O28+NTI4MD8oaT1vLzUyODAsZT10aGlzLl9nZXRSb3VuZE51bShpKSx0aGlzLl91cGRhdGVTY2FsZSh0aGlzLl9pU2NhbGUsZStcIiBtaVwiLGUvaSkpOihuPXRoaXMuX2dldFJvdW5kTnVtKG8pLHRoaXMuX3VwZGF0ZVNjYWxlKHRoaXMuX2lTY2FsZSxuK1wiIGZ0XCIsbi9vKSl9LF91cGRhdGVTY2FsZTpmdW5jdGlvbih0LGksZSl7dC5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5tYXhXaWR0aCplKStcInB4XCIsdC5pbm5lckhUTUw9aX0sX2dldFJvdW5kTnVtOmZ1bmN0aW9uKHQpe3ZhciBpPU1hdGgucG93KDEwLChNYXRoLmZsb29yKHQpK1wiXCIpLmxlbmd0aC0xKSxlPXQvaTtyZXR1cm4gZT1lPj0xMD8xMDplPj01PzU6ZT49Mz8zOmU+PTI/MjoxLGkqZX19KSxaZT1UZS5leHRlbmQoe29wdGlvbnM6e3Bvc2l0aW9uOlwiYm90dG9tcmlnaHRcIixwcmVmaXg6JzxhIGhyZWY9XCJodHRwOi8vbGVhZmxldGpzLmNvbVwiIHRpdGxlPVwiQSBKUyBsaWJyYXJ5IGZvciBpbnRlcmFjdGl2ZSBtYXBzXCI+TGVhZmxldDwvYT4nfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe2wodGhpcyx0KSx0aGlzLl9hdHRyaWJ1dGlvbnM9e319LG9uQWRkOmZ1bmN0aW9uKHQpe3QuYXR0cmlidXRpb25Db250cm9sPXRoaXMsdGhpcy5fY29udGFpbmVyPUcoXCJkaXZcIixcImxlYWZsZXQtY29udHJvbC1hdHRyaWJ1dGlvblwiKSx3dCh0aGlzLl9jb250YWluZXIpO2Zvcih2YXIgaSBpbiB0Ll9sYXllcnMpdC5fbGF5ZXJzW2ldLmdldEF0dHJpYnV0aW9uJiZ0aGlzLmFkZEF0dHJpYnV0aW9uKHQuX2xheWVyc1tpXS5nZXRBdHRyaWJ1dGlvbigpKTtyZXR1cm4gdGhpcy5fdXBkYXRlKCksdGhpcy5fY29udGFpbmVyfSxzZXRQcmVmaXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5wcmVmaXg9dCx0aGlzLl91cGRhdGUoKSx0aGlzfSxhZGRBdHRyaWJ1dGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdD8odGhpcy5fYXR0cmlidXRpb25zW3RdfHwodGhpcy5fYXR0cmlidXRpb25zW3RdPTApLHRoaXMuX2F0dHJpYnV0aW9uc1t0XSsrLHRoaXMuX3VwZGF0ZSgpLHRoaXMpOnRoaXN9LHJlbW92ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0Pyh0aGlzLl9hdHRyaWJ1dGlvbnNbdF0mJih0aGlzLl9hdHRyaWJ1dGlvbnNbdF0tLSx0aGlzLl91cGRhdGUoKSksdGhpcyk6dGhpc30sX3VwZGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX21hcCl7dmFyIHQ9W107Zm9yKHZhciBpIGluIHRoaXMuX2F0dHJpYnV0aW9ucyl0aGlzLl9hdHRyaWJ1dGlvbnNbaV0mJnQucHVzaChpKTt2YXIgZT1bXTt0aGlzLm9wdGlvbnMucHJlZml4JiZlLnB1c2godGhpcy5vcHRpb25zLnByZWZpeCksdC5sZW5ndGgmJmUucHVzaCh0LmpvaW4oXCIsIFwiKSksdGhpcy5fY29udGFpbmVyLmlubmVySFRNTD1lLmpvaW4oXCIgfCBcIil9fX0pO2JlLm1lcmdlT3B0aW9ucyh7YXR0cmlidXRpb25Db250cm9sOiEwfSksYmUuYWRkSW5pdEhvb2soZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXR0cmlidXRpb25Db250cm9sJiYobmV3IFplKS5hZGRUbyh0aGlzKX0pO1RlLkxheWVycz1NZSxUZS5ab29tPUNlLFRlLlNjYWxlPVNlLFRlLkF0dHJpYnV0aW9uPVplLHplLmxheWVycz1mdW5jdGlvbih0LGksZSl7cmV0dXJuIG5ldyBNZSh0LGksZSl9LHplLnpvb209ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDZSh0KX0semUuc2NhbGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBTZSh0KX0semUuYXR0cmlidXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBaZSh0KX07dmFyIEVlPXYuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuX21hcD10fSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlZD90aGlzOih0aGlzLl9lbmFibGVkPSEwLHRoaXMuYWRkSG9va3MoKSx0aGlzKX0sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVkPyh0aGlzLl9lbmFibGVkPSExLHRoaXMucmVtb3ZlSG9va3MoKSx0aGlzKTp0aGlzfSxlbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9lbmFibGVkfX0pO0VlLmFkZFRvPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQuYWRkSGFuZGxlcihpLHRoaXMpLHRoaXN9O3ZhciBrZSxBZT17RXZlbnRzOmxpfSxCZT1xaT9cInRvdWNoc3RhcnQgbW91c2Vkb3duXCI6XCJtb3VzZWRvd25cIixJZT17bW91c2Vkb3duOlwibW91c2V1cFwiLHRvdWNoc3RhcnQ6XCJ0b3VjaGVuZFwiLHBvaW50ZXJkb3duOlwidG91Y2hlbmRcIixNU1BvaW50ZXJEb3duOlwidG91Y2hlbmRcIn0sT2U9e21vdXNlZG93bjpcIm1vdXNlbW92ZVwiLHRvdWNoc3RhcnQ6XCJ0b3VjaG1vdmVcIixwb2ludGVyZG93bjpcInRvdWNobW92ZVwiLE1TUG9pbnRlckRvd246XCJ0b3VjaG1vdmVcIn0sUmU9Y2kuZXh0ZW5kKHtvcHRpb25zOntjbGlja1RvbGVyYW5jZTozfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsaSxlLG4pe2wodGhpcyxuKSx0aGlzLl9lbGVtZW50PXQsdGhpcy5fZHJhZ1N0YXJ0VGFyZ2V0PWl8fHQsdGhpcy5fcHJldmVudE91dGxpbmU9ZX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5fZW5hYmxlZHx8KG10KHRoaXMuX2RyYWdTdGFydFRhcmdldCxCZSx0aGlzLl9vbkRvd24sdGhpcyksdGhpcy5fZW5hYmxlZD0hMCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLl9lbmFibGVkJiYoUmUuX2RyYWdnaW5nPT09dGhpcyYmdGhpcy5maW5pc2hEcmFnKCksZnQodGhpcy5fZHJhZ1N0YXJ0VGFyZ2V0LEJlLHRoaXMuX29uRG93bix0aGlzKSx0aGlzLl9lbmFibGVkPSExLHRoaXMuX21vdmVkPSExKX0sX29uRG93bjpmdW5jdGlvbih0KXtpZighdC5fc2ltdWxhdGVkJiZ0aGlzLl9lbmFibGVkJiYodGhpcy5fbW92ZWQ9ITEsISQodGhpcy5fZWxlbWVudCxcImxlYWZsZXQtem9vbS1hbmltXCIpJiYhKFJlLl9kcmFnZ2luZ3x8dC5zaGlmdEtleXx8MSE9PXQud2hpY2gmJjEhPT10LmJ1dHRvbiYmIXQudG91Y2hlc3x8KFJlLl9kcmFnZ2luZz10aGlzLHRoaXMuX3ByZXZlbnRPdXRsaW5lJiZjdCh0aGlzLl9lbGVtZW50KSx1dCgpLGZpKCksdGhpcy5fbW92aW5nKSkpKXt0aGlzLmZpcmUoXCJkb3duXCIpO3ZhciBpPXQudG91Y2hlcz90LnRvdWNoZXNbMF06dCxlPWR0KHRoaXMuX2VsZW1lbnQpO3RoaXMuX3N0YXJ0UG9pbnQ9bmV3IHgoaS5jbGllbnRYLGkuY2xpZW50WSksdGhpcy5fcGFyZW50U2NhbGU9cHQoZSksbXQoZG9jdW1lbnQsT2VbdC50eXBlXSx0aGlzLl9vbk1vdmUsdGhpcyksbXQoZG9jdW1lbnQsSWVbdC50eXBlXSx0aGlzLl9vblVwLHRoaXMpfX0sX29uTW92ZTpmdW5jdGlvbih0KXtpZighdC5fc2ltdWxhdGVkJiZ0aGlzLl9lbmFibGVkKWlmKHQudG91Y2hlcyYmdC50b3VjaGVzLmxlbmd0aD4xKXRoaXMuX21vdmVkPSEwO2Vsc2V7dmFyIGk9dC50b3VjaGVzJiYxPT09dC50b3VjaGVzLmxlbmd0aD90LnRvdWNoZXNbMF06dCxlPW5ldyB4KGkuY2xpZW50WCxpLmNsaWVudFkpLl9zdWJ0cmFjdCh0aGlzLl9zdGFydFBvaW50KTsoZS54fHxlLnkpJiYoTWF0aC5hYnMoZS54KStNYXRoLmFicyhlLnkpPHRoaXMub3B0aW9ucy5jbGlja1RvbGVyYW5jZXx8KGUueC89dGhpcy5fcGFyZW50U2NhbGUueCxlLnkvPXRoaXMuX3BhcmVudFNjYWxlLnksUHQodCksdGhpcy5fbW92ZWR8fCh0aGlzLmZpcmUoXCJkcmFnc3RhcnRcIiksdGhpcy5fbW92ZWQ9ITAsdGhpcy5fc3RhcnRQb3M9aHQodGhpcy5fZWxlbWVudCkuc3VidHJhY3QoZSksUShkb2N1bWVudC5ib2R5LFwibGVhZmxldC1kcmFnZ2luZ1wiKSx0aGlzLl9sYXN0VGFyZ2V0PXQudGFyZ2V0fHx0LnNyY0VsZW1lbnQsd2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZSYmdGhpcy5fbGFzdFRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnRJbnN0YW5jZSYmKHRoaXMuX2xhc3RUYXJnZXQ9dGhpcy5fbGFzdFRhcmdldC5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCksUSh0aGlzLl9sYXN0VGFyZ2V0LFwibGVhZmxldC1kcmFnLXRhcmdldFwiKSksdGhpcy5fbmV3UG9zPXRoaXMuX3N0YXJ0UG9zLmFkZChlKSx0aGlzLl9tb3Zpbmc9ITAsZyh0aGlzLl9hbmltUmVxdWVzdCksdGhpcy5fbGFzdEV2ZW50PXQsdGhpcy5fYW5pbVJlcXVlc3Q9Zih0aGlzLl91cGRhdGVQb3NpdGlvbix0aGlzLCEwKSkpfX0sX3VwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9e29yaWdpbmFsRXZlbnQ6dGhpcy5fbGFzdEV2ZW50fTt0aGlzLmZpcmUoXCJwcmVkcmFnXCIsdCksYXQodGhpcy5fZWxlbWVudCx0aGlzLl9uZXdQb3MpLHRoaXMuZmlyZShcImRyYWdcIix0KX0sX29uVXA6ZnVuY3Rpb24odCl7IXQuX3NpbXVsYXRlZCYmdGhpcy5fZW5hYmxlZCYmdGhpcy5maW5pc2hEcmFnKCl9LGZpbmlzaERyYWc6ZnVuY3Rpb24oKXt0dChkb2N1bWVudC5ib2R5LFwibGVhZmxldC1kcmFnZ2luZ1wiKSx0aGlzLl9sYXN0VGFyZ2V0JiYodHQodGhpcy5fbGFzdFRhcmdldCxcImxlYWZsZXQtZHJhZy10YXJnZXRcIiksdGhpcy5fbGFzdFRhcmdldD1udWxsKTtmb3IodmFyIHQgaW4gT2UpZnQoZG9jdW1lbnQsT2VbdF0sdGhpcy5fb25Nb3ZlLHRoaXMpLGZ0KGRvY3VtZW50LEllW3RdLHRoaXMuX29uVXAsdGhpcyk7bHQoKSxnaSgpLHRoaXMuX21vdmVkJiZ0aGlzLl9tb3ZpbmcmJihnKHRoaXMuX2FuaW1SZXF1ZXN0KSx0aGlzLmZpcmUoXCJkcmFnZW5kXCIse2Rpc3RhbmNlOnRoaXMuX25ld1Bvcy5kaXN0YW5jZVRvKHRoaXMuX3N0YXJ0UG9zKX0pKSx0aGlzLl9tb3Zpbmc9ITEsUmUuX2RyYWdnaW5nPSExfX0pLE5lPShPYmplY3QuZnJlZXplfHxPYmplY3QpKHtzaW1wbGlmeTpadCxwb2ludFRvU2VnbWVudERpc3RhbmNlOkV0LGNsb3Nlc3RQb2ludE9uU2VnbWVudDpmdW5jdGlvbih0LGksZSl7cmV0dXJuIER0KHQsaSxlKX0sY2xpcFNlZ21lbnQ6SXQsX2dldEVkZ2VJbnRlcnNlY3Rpb246T3QsX2dldEJpdENvZGU6UnQsX3NxQ2xvc2VzdFBvaW50T25TZWdtZW50OkR0LGlzRmxhdDpqdCxfZmxhdDpXdH0pLERlPShPYmplY3QuZnJlZXplfHxPYmplY3QpKHtjbGlwUG9seWdvbjpIdH0pLGplPXtwcm9qZWN0OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgeCh0LmxuZyx0LmxhdCl9LHVucHJvamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IE0odC55LHQueCl9LGJvdW5kczpuZXcgUChbLTE4MCwtOTBdLFsxODAsOTBdKX0sV2U9e1I6NjM3ODEzNyxSX01JTk9SOjYzNTY3NTIuMzE0MjQ1MTc5LGJvdW5kczpuZXcgUChbLTIwMDM3NTA4LjM0Mjc5LC0xNTQ5NjU3MC43Mzk3Ml0sWzIwMDM3NTA4LjM0Mjc5LDE4NzY0NjU2LjIzMTM4XSkscHJvamVjdDpmdW5jdGlvbih0KXt2YXIgaT1NYXRoLlBJLzE4MCxlPXRoaXMuUixuPXQubGF0Kmksbz10aGlzLlJfTUlOT1IvZSxzPU1hdGguc3FydCgxLW8qbykscj1zKk1hdGguc2luKG4pLGE9TWF0aC50YW4oTWF0aC5QSS80LW4vMikvTWF0aC5wb3coKDEtcikvKDErcikscy8yKTtyZXR1cm4gbj0tZSpNYXRoLmxvZyhNYXRoLm1heChhLDFlLTEwKSksbmV3IHgodC5sbmcqaSplLG4pfSx1bnByb2plY3Q6ZnVuY3Rpb24odCl7Zm9yKHZhciBpLGU9MTgwL01hdGguUEksbj10aGlzLlIsbz10aGlzLlJfTUlOT1IvbixzPU1hdGguc3FydCgxLW8qbykscj1NYXRoLmV4cCgtdC55L24pLGE9TWF0aC5QSS8yLTIqTWF0aC5hdGFuKHIpLGg9MCx1PS4xO2g8MTUmJk1hdGguYWJzKHUpPjFlLTc7aCsrKWk9cypNYXRoLnNpbihhKSxpPU1hdGgucG93KCgxLWkpLygxK2kpLHMvMiksYSs9dT1NYXRoLlBJLzItMipNYXRoLmF0YW4ocippKS1hO3JldHVybiBuZXcgTShhKmUsdC54KmUvbil9fSxIZT0oT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KSh7TG9uTGF0OmplLE1lcmNhdG9yOldlLFNwaGVyaWNhbE1lcmNhdG9yOm1pfSksRmU9aSh7fSxwaSx7Y29kZTpcIkVQU0c6MzM5NVwiLHByb2plY3Rpb246V2UsdHJhbnNmb3JtYXRpb246ZnVuY3Rpb24oKXt2YXIgdD0uNS8oTWF0aC5QSSpXZS5SKTtyZXR1cm4gWih0LC41LC10LC41KX0oKX0pLFVlPWkoe30scGkse2NvZGU6XCJFUFNHOjQzMjZcIixwcm9qZWN0aW9uOmplLHRyYW5zZm9ybWF0aW9uOlooMS8xODAsMSwtMS8xODAsLjUpfSksVmU9aSh7fSxkaSx7cHJvamVjdGlvbjpqZSx0cmFuc2Zvcm1hdGlvbjpaKDEsMCwtMSwwKSxzY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMix0KX0sem9vbTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2codCkvTWF0aC5MTjJ9LGRpc3RhbmNlOmZ1bmN0aW9uKHQsaSl7dmFyIGU9aS5sbmctdC5sbmcsbj1pLmxhdC10LmxhdDtyZXR1cm4gTWF0aC5zcXJ0KGUqZStuKm4pfSxpbmZpbml0ZTohMH0pO2RpLkVhcnRoPXBpLGRpLkVQU0czMzk1PUZlLGRpLkVQU0czODU3PXlpLGRpLkVQU0c5MDA5MTM9eGksZGkuRVBTRzQzMjY9VWUsZGkuU2ltcGxlPVZlO3ZhciBxZT1jaS5leHRlbmQoe29wdGlvbnM6e3BhbmU6XCJvdmVybGF5UGFuZVwiLGF0dHJpYnV0aW9uOm51bGwsYnViYmxpbmdNb3VzZUV2ZW50czohMH0sYWRkVG86ZnVuY3Rpb24odCl7cmV0dXJuIHQuYWRkTGF5ZXIodGhpcyksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlRnJvbSh0aGlzLl9tYXB8fHRoaXMuX21hcFRvQWRkKX0scmVtb3ZlRnJvbTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5yZW1vdmVMYXllcih0aGlzKSx0aGlzfSxnZXRQYW5lOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tYXAuZ2V0UGFuZSh0P3RoaXMub3B0aW9uc1t0XXx8dDp0aGlzLm9wdGlvbnMucGFuZSl9LGFkZEludGVyYWN0aXZlVGFyZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tYXAuX3RhcmdldHNbbih0KV09dGhpcyx0aGlzfSxyZW1vdmVJbnRlcmFjdGl2ZVRhcmdldDpmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlIHRoaXMuX21hcC5fdGFyZ2V0c1tuKHQpXSx0aGlzfSxnZXRBdHRyaWJ1dGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuYXR0cmlidXRpb259LF9sYXllckFkZDpmdW5jdGlvbih0KXt2YXIgaT10LnRhcmdldDtpZihpLmhhc0xheWVyKHRoaXMpKXtpZih0aGlzLl9tYXA9aSx0aGlzLl96b29tQW5pbWF0ZWQ9aS5fem9vbUFuaW1hdGVkLHRoaXMuZ2V0RXZlbnRzKXt2YXIgZT10aGlzLmdldEV2ZW50cygpO2kub24oZSx0aGlzKSx0aGlzLm9uY2UoXCJyZW1vdmVcIixmdW5jdGlvbigpe2kub2ZmKGUsdGhpcyl9LHRoaXMpfXRoaXMub25BZGQoaSksdGhpcy5nZXRBdHRyaWJ1dGlvbiYmaS5hdHRyaWJ1dGlvbkNvbnRyb2wmJmkuYXR0cmlidXRpb25Db250cm9sLmFkZEF0dHJpYnV0aW9uKHRoaXMuZ2V0QXR0cmlidXRpb24oKSksdGhpcy5maXJlKFwiYWRkXCIpLGkuZmlyZShcImxheWVyYWRkXCIse2xheWVyOnRoaXN9KX19fSk7YmUuaW5jbHVkZSh7YWRkTGF5ZXI6ZnVuY3Rpb24odCl7aWYoIXQuX2xheWVyQWRkKXRocm93IG5ldyBFcnJvcihcIlRoZSBwcm92aWRlZCBvYmplY3QgaXMgbm90IGEgTGF5ZXIuXCIpO3ZhciBpPW4odCk7cmV0dXJuIHRoaXMuX2xheWVyc1tpXT90aGlzOih0aGlzLl9sYXllcnNbaV09dCx0Ll9tYXBUb0FkZD10aGlzLHQuYmVmb3JlQWRkJiZ0LmJlZm9yZUFkZCh0aGlzKSx0aGlzLndoZW5SZWFkeSh0Ll9sYXllckFkZCx0KSx0aGlzKX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24odCl7dmFyIGk9bih0KTtyZXR1cm4gdGhpcy5fbGF5ZXJzW2ldPyh0aGlzLl9sb2FkZWQmJnQub25SZW1vdmUodGhpcyksdC5nZXRBdHRyaWJ1dGlvbiYmdGhpcy5hdHRyaWJ1dGlvbkNvbnRyb2wmJnRoaXMuYXR0cmlidXRpb25Db250cm9sLnJlbW92ZUF0dHJpYnV0aW9uKHQuZ2V0QXR0cmlidXRpb24oKSksZGVsZXRlIHRoaXMuX2xheWVyc1tpXSx0aGlzLl9sb2FkZWQmJih0aGlzLmZpcmUoXCJsYXllcnJlbW92ZVwiLHtsYXllcjp0fSksdC5maXJlKFwicmVtb3ZlXCIpKSx0Ll9tYXA9dC5fbWFwVG9BZGQ9bnVsbCx0aGlzKTp0aGlzfSxoYXNMYXllcjpmdW5jdGlvbih0KXtyZXR1cm4hIXQmJm4odClpbiB0aGlzLl9sYXllcnN9LGVhY2hMYXllcjpmdW5jdGlvbih0LGkpe2Zvcih2YXIgZSBpbiB0aGlzLl9sYXllcnMpdC5jYWxsKGksdGhpcy5fbGF5ZXJzW2VdKTtyZXR1cm4gdGhpc30sX2FkZExheWVyczpmdW5jdGlvbih0KXtmb3IodmFyIGk9MCxlPSh0PXQ/b2kodCk/dDpbdF06W10pLmxlbmd0aDtpPGU7aSsrKXRoaXMuYWRkTGF5ZXIodFtpXSl9LF9hZGRab29tTGltaXQ6ZnVuY3Rpb24odCl7IWlzTmFOKHQub3B0aW9ucy5tYXhab29tKSYmaXNOYU4odC5vcHRpb25zLm1pblpvb20pfHwodGhpcy5fem9vbUJvdW5kTGF5ZXJzW24odCldPXQsdGhpcy5fdXBkYXRlWm9vbUxldmVscygpKX0sX3JlbW92ZVpvb21MaW1pdDpmdW5jdGlvbih0KXt2YXIgaT1uKHQpO3RoaXMuX3pvb21Cb3VuZExheWVyc1tpXSYmKGRlbGV0ZSB0aGlzLl96b29tQm91bmRMYXllcnNbaV0sdGhpcy5fdXBkYXRlWm9vbUxldmVscygpKX0sX3VwZGF0ZVpvb21MZXZlbHM6ZnVuY3Rpb24oKXt2YXIgdD0xLzAsaT0tMS8wLGU9dGhpcy5fZ2V0Wm9vbVNwYW4oKTtmb3IodmFyIG4gaW4gdGhpcy5fem9vbUJvdW5kTGF5ZXJzKXt2YXIgbz10aGlzLl96b29tQm91bmRMYXllcnNbbl0ub3B0aW9uczt0PXZvaWQgMD09PW8ubWluWm9vbT90Ok1hdGgubWluKHQsby5taW5ab29tKSxpPXZvaWQgMD09PW8ubWF4Wm9vbT9pOk1hdGgubWF4KGksby5tYXhab29tKX10aGlzLl9sYXllcnNNYXhab29tPWk9PT0tMS8wP3ZvaWQgMDppLHRoaXMuX2xheWVyc01pblpvb209dD09PTEvMD92b2lkIDA6dCxlIT09dGhpcy5fZ2V0Wm9vbVNwYW4oKSYmdGhpcy5maXJlKFwiem9vbWxldmVsc2NoYW5nZVwiKSx2b2lkIDA9PT10aGlzLm9wdGlvbnMubWF4Wm9vbSYmdGhpcy5fbGF5ZXJzTWF4Wm9vbSYmdGhpcy5nZXRab29tKCk+dGhpcy5fbGF5ZXJzTWF4Wm9vbSYmdGhpcy5zZXRab29tKHRoaXMuX2xheWVyc01heFpvb20pLHZvaWQgMD09PXRoaXMub3B0aW9ucy5taW5ab29tJiZ0aGlzLl9sYXllcnNNaW5ab29tJiZ0aGlzLmdldFpvb20oKTx0aGlzLl9sYXllcnNNaW5ab29tJiZ0aGlzLnNldFpvb20odGhpcy5fbGF5ZXJzTWluWm9vbSl9fSk7dmFyIEdlPXFlLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe2wodGhpcyxpKSx0aGlzLl9sYXllcnM9e307dmFyIGUsbjtpZih0KWZvcihlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMuYWRkTGF5ZXIodFtlXSl9LGFkZExheWVyOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0TGF5ZXJJZCh0KTtyZXR1cm4gdGhpcy5fbGF5ZXJzW2ldPXQsdGhpcy5fbWFwJiZ0aGlzLl9tYXAuYWRkTGF5ZXIodCksdGhpc30scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24odCl7dmFyIGk9dCBpbiB0aGlzLl9sYXllcnM/dDp0aGlzLmdldExheWVySWQodCk7cmV0dXJuIHRoaXMuX21hcCYmdGhpcy5fbGF5ZXJzW2ldJiZ0aGlzLl9tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJzW2ldKSxkZWxldGUgdGhpcy5fbGF5ZXJzW2ldLHRoaXN9LGhhc0xheWVyOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmKHQgaW4gdGhpcy5fbGF5ZXJzfHx0aGlzLmdldExheWVySWQodClpbiB0aGlzLl9sYXllcnMpfSxjbGVhckxheWVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2hMYXllcih0aGlzLnJlbW92ZUxheWVyLHRoaXMpfSxpbnZva2U6ZnVuY3Rpb24odCl7dmFyIGksZSxuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtmb3IoaSBpbiB0aGlzLl9sYXllcnMpKGU9dGhpcy5fbGF5ZXJzW2ldKVt0XSYmZVt0XS5hcHBseShlLG4pO3JldHVybiB0aGlzfSxvbkFkZDpmdW5jdGlvbih0KXt0aGlzLmVhY2hMYXllcih0LmFkZExheWVyLHQpfSxvblJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLmVhY2hMYXllcih0LnJlbW92ZUxheWVyLHQpfSxlYWNoTGF5ZXI6ZnVuY3Rpb24odCxpKXtmb3IodmFyIGUgaW4gdGhpcy5fbGF5ZXJzKXQuY2FsbChpLHRoaXMuX2xheWVyc1tlXSk7cmV0dXJuIHRoaXN9LGdldExheWVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sYXllcnNbdF19LGdldExheWVyczpmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0aGlzLmVhY2hMYXllcih0LnB1c2gsdCksdH0sc2V0WkluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludm9rZShcInNldFpJbmRleFwiLHQpfSxnZXRMYXllcklkOmZ1bmN0aW9uKHQpe3JldHVybiBuKHQpfX0pLEtlPUdlLmV4dGVuZCh7YWRkTGF5ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTGF5ZXIodCk/dGhpczoodC5hZGRFdmVudFBhcmVudCh0aGlzKSxHZS5wcm90b3R5cGUuYWRkTGF5ZXIuY2FsbCh0aGlzLHQpLHRoaXMuZmlyZShcImxheWVyYWRkXCIse2xheWVyOnR9KSl9LHJlbW92ZUxheWVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc0xheWVyKHQpPyh0IGluIHRoaXMuX2xheWVycyYmKHQ9dGhpcy5fbGF5ZXJzW3RdKSx0LnJlbW92ZUV2ZW50UGFyZW50KHRoaXMpLEdlLnByb3RvdHlwZS5yZW1vdmVMYXllci5jYWxsKHRoaXMsdCksdGhpcy5maXJlKFwibGF5ZXJyZW1vdmVcIix7bGF5ZXI6dH0pKTp0aGlzfSxzZXRTdHlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pbnZva2UoXCJzZXRTdHlsZVwiLHQpfSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZva2UoXCJicmluZ1RvRnJvbnRcIil9LGJyaW5nVG9CYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52b2tlKFwiYnJpbmdUb0JhY2tcIil9LGdldEJvdW5kczpmdW5jdGlvbigpe3ZhciB0PW5ldyBUO2Zvcih2YXIgaSBpbiB0aGlzLl9sYXllcnMpe3ZhciBlPXRoaXMuX2xheWVyc1tpXTt0LmV4dGVuZChlLmdldEJvdW5kcz9lLmdldEJvdW5kcygpOmUuZ2V0TGF0TG5nKCkpfXJldHVybiB0fX0pLFllPXYuZXh0ZW5kKHtvcHRpb25zOntwb3B1cEFuY2hvcjpbMCwwXSx0b29sdGlwQW5jaG9yOlswLDBdfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe2wodGhpcyx0KX0sY3JlYXRlSWNvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY3JlYXRlSWNvbihcImljb25cIix0KX0sY3JlYXRlU2hhZG93OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jcmVhdGVJY29uKFwic2hhZG93XCIsdCl9LF9jcmVhdGVJY29uOmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5fZ2V0SWNvblVybCh0KTtpZighZSl7aWYoXCJpY29uXCI9PT10KXRocm93IG5ldyBFcnJvcihcImljb25Vcmwgbm90IHNldCBpbiBJY29uIG9wdGlvbnMgKHNlZSB0aGUgZG9jcykuXCIpO3JldHVybiBudWxsfXZhciBuPXRoaXMuX2NyZWF0ZUltZyhlLGkmJlwiSU1HXCI9PT1pLnRhZ05hbWU/aTpudWxsKTtyZXR1cm4gdGhpcy5fc2V0SWNvblN0eWxlcyhuLHQpLG59LF9zZXRJY29uU3R5bGVzOmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5vcHRpb25zLG49ZVtpK1wiU2l6ZVwiXTtcIm51bWJlclwiPT10eXBlb2YgbiYmKG49W24sbl0pO3ZhciBvPXcobikscz13KFwic2hhZG93XCI9PT1pJiZlLnNoYWRvd0FuY2hvcnx8ZS5pY29uQW5jaG9yfHxvJiZvLmRpdmlkZUJ5KDIsITApKTt0LmNsYXNzTmFtZT1cImxlYWZsZXQtbWFya2VyLVwiK2krXCIgXCIrKGUuY2xhc3NOYW1lfHxcIlwiKSxzJiYodC5zdHlsZS5tYXJnaW5MZWZ0PS1zLngrXCJweFwiLHQuc3R5bGUubWFyZ2luVG9wPS1zLnkrXCJweFwiKSxvJiYodC5zdHlsZS53aWR0aD1vLngrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PW8ueStcInB4XCIpfSxfY3JlYXRlSW1nOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxpLnNyYz10LGl9LF9nZXRJY29uVXJsOmZ1bmN0aW9uKHQpe3JldHVybiBZaSYmdGhpcy5vcHRpb25zW3QrXCJSZXRpbmFVcmxcIl18fHRoaXMub3B0aW9uc1t0K1wiVXJsXCJdfX0pLFhlPVllLmV4dGVuZCh7b3B0aW9uczp7aWNvblVybDpcIm1hcmtlci1pY29uLnBuZ1wiLGljb25SZXRpbmFVcmw6XCJtYXJrZXItaWNvbi0yeC5wbmdcIixzaGFkb3dVcmw6XCJtYXJrZXItc2hhZG93LnBuZ1wiLGljb25TaXplOlsyNSw0MV0saWNvbkFuY2hvcjpbMTIsNDFdLHBvcHVwQW5jaG9yOlsxLC0zNF0sdG9vbHRpcEFuY2hvcjpbMTYsLTI4XSxzaGFkb3dTaXplOls0MSw0MV19LF9nZXRJY29uVXJsOmZ1bmN0aW9uKHQpe3JldHVybiBYZS5pbWFnZVBhdGh8fChYZS5pbWFnZVBhdGg9dGhpcy5fZGV0ZWN0SWNvblBhdGgoKSksKHRoaXMub3B0aW9ucy5pbWFnZVBhdGh8fFhlLmltYWdlUGF0aCkrWWUucHJvdG90eXBlLl9nZXRJY29uVXJsLmNhbGwodGhpcyx0KX0sX2RldGVjdEljb25QYXRoOmZ1bmN0aW9uKCl7dmFyIHQ9RyhcImRpdlwiLFwibGVhZmxldC1kZWZhdWx0LWljb24tcGF0aFwiLGRvY3VtZW50LmJvZHkpLGk9cSh0LFwiYmFja2dyb3VuZC1pbWFnZVwiKXx8cSh0LFwiYmFja2dyb3VuZEltYWdlXCIpO3JldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLGk9bnVsbD09PWl8fDAhPT1pLmluZGV4T2YoXCJ1cmxcIik/XCJcIjppLnJlcGxhY2UoL151cmxcXChbXCInXT8vLFwiXCIpLnJlcGxhY2UoL21hcmtlci1pY29uXFwucG5nW1wiJ10/XFwpJC8sXCJcIil9fSksSmU9RWUuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuX21hcmtlcj10fSxhZGRIb29rczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcmtlci5faWNvbjt0aGlzLl9kcmFnZ2FibGV8fCh0aGlzLl9kcmFnZ2FibGU9bmV3IFJlKHQsdCwhMCkpLHRoaXMuX2RyYWdnYWJsZS5vbih7ZHJhZ3N0YXJ0OnRoaXMuX29uRHJhZ1N0YXJ0LHByZWRyYWc6dGhpcy5fb25QcmVEcmFnLGRyYWc6dGhpcy5fb25EcmFnLGRyYWdlbmQ6dGhpcy5fb25EcmFnRW5kfSx0aGlzKS5lbmFibGUoKSxRKHQsXCJsZWFmbGV0LW1hcmtlci1kcmFnZ2FibGVcIil9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dhYmxlLm9mZih7ZHJhZ3N0YXJ0OnRoaXMuX29uRHJhZ1N0YXJ0LHByZWRyYWc6dGhpcy5fb25QcmVEcmFnLGRyYWc6dGhpcy5fb25EcmFnLGRyYWdlbmQ6dGhpcy5fb25EcmFnRW5kfSx0aGlzKS5kaXNhYmxlKCksdGhpcy5fbWFya2VyLl9pY29uJiZ0dCh0aGlzLl9tYXJrZXIuX2ljb24sXCJsZWFmbGV0LW1hcmtlci1kcmFnZ2FibGVcIil9LG1vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyYWdnYWJsZSYmdGhpcy5fZHJhZ2dhYmxlLl9tb3ZlZH0sX2FkanVzdFBhbjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9tYXJrZXIsZT1pLl9tYXAsbj10aGlzLl9tYXJrZXIub3B0aW9ucy5hdXRvUGFuU3BlZWQsbz10aGlzLl9tYXJrZXIub3B0aW9ucy5hdXRvUGFuUGFkZGluZyxzPWh0KGkuX2ljb24pLHI9ZS5nZXRQaXhlbEJvdW5kcygpLGE9ZS5nZXRQaXhlbE9yaWdpbigpLGg9YihyLm1pbi5fc3VidHJhY3QoYSkuYWRkKG8pLHIubWF4Ll9zdWJ0cmFjdChhKS5zdWJ0cmFjdChvKSk7aWYoIWguY29udGFpbnMocykpe3ZhciB1PXcoKE1hdGgubWF4KGgubWF4Lngscy54KS1oLm1heC54KS8oci5tYXgueC1oLm1heC54KS0oTWF0aC5taW4oaC5taW4ueCxzLngpLWgubWluLngpLyhyLm1pbi54LWgubWluLngpLChNYXRoLm1heChoLm1heC55LHMueSktaC5tYXgueSkvKHIubWF4LnktaC5tYXgueSktKE1hdGgubWluKGgubWluLnkscy55KS1oLm1pbi55KS8oci5taW4ueS1oLm1pbi55KSkubXVsdGlwbHlCeShuKTtlLnBhbkJ5KHUse2FuaW1hdGU6ITF9KSx0aGlzLl9kcmFnZ2FibGUuX25ld1Bvcy5fYWRkKHUpLHRoaXMuX2RyYWdnYWJsZS5fc3RhcnRQb3MuX2FkZCh1KSxhdChpLl9pY29uLHRoaXMuX2RyYWdnYWJsZS5fbmV3UG9zKSx0aGlzLl9vbkRyYWcodCksdGhpcy5fcGFuUmVxdWVzdD1mKHRoaXMuX2FkanVzdFBhbi5iaW5kKHRoaXMsdCkpfX0sX29uRHJhZ1N0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fb2xkTGF0TG5nPXRoaXMuX21hcmtlci5nZXRMYXRMbmcoKSx0aGlzLl9tYXJrZXIuY2xvc2VQb3B1cCgpLmZpcmUoXCJtb3Zlc3RhcnRcIikuZmlyZShcImRyYWdzdGFydFwiKX0sX29uUHJlRHJhZzpmdW5jdGlvbih0KXt0aGlzLl9tYXJrZXIub3B0aW9ucy5hdXRvUGFuJiYoZyh0aGlzLl9wYW5SZXF1ZXN0KSx0aGlzLl9wYW5SZXF1ZXN0PWYodGhpcy5fYWRqdXN0UGFuLmJpbmQodGhpcyx0KSkpfSxfb25EcmFnOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcmtlcixlPWkuX3NoYWRvdyxuPWh0KGkuX2ljb24pLG89aS5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhuKTtlJiZhdChlLG4pLGkuX2xhdGxuZz1vLHQubGF0bG5nPW8sdC5vbGRMYXRMbmc9dGhpcy5fb2xkTGF0TG5nLGkuZmlyZShcIm1vdmVcIix0KS5maXJlKFwiZHJhZ1wiLHQpfSxfb25EcmFnRW5kOmZ1bmN0aW9uKHQpe2codGhpcy5fcGFuUmVxdWVzdCksZGVsZXRlIHRoaXMuX29sZExhdExuZyx0aGlzLl9tYXJrZXIuZmlyZShcIm1vdmVlbmRcIikuZmlyZShcImRyYWdlbmRcIix0KX19KSwkZT1xZS5leHRlbmQoe29wdGlvbnM6e2ljb246bmV3IFhlLGludGVyYWN0aXZlOiEwLGRyYWdnYWJsZTohMSxhdXRvUGFuOiExLGF1dG9QYW5QYWRkaW5nOls1MCw1MF0sYXV0b1BhblNwZWVkOjEwLGtleWJvYXJkOiEwLHRpdGxlOlwiXCIsYWx0OlwiXCIsekluZGV4T2Zmc2V0OjAsb3BhY2l0eToxLHJpc2VPbkhvdmVyOiExLHJpc2VPZmZzZXQ6MjUwLHBhbmU6XCJtYXJrZXJQYW5lXCIsYnViYmxpbmdNb3VzZUV2ZW50czohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe2wodGhpcyxpKSx0aGlzLl9sYXRsbmc9Qyh0KX0sb25BZGQ6ZnVuY3Rpb24odCl7dGhpcy5fem9vbUFuaW1hdGVkPXRoaXMuX3pvb21BbmltYXRlZCYmdC5vcHRpb25zLm1hcmtlclpvb21BbmltYXRpb24sdGhpcy5fem9vbUFuaW1hdGVkJiZ0Lm9uKFwiem9vbWFuaW1cIix0aGlzLl9hbmltYXRlWm9vbSx0aGlzKSx0aGlzLl9pbml0SWNvbigpLHRoaXMudXBkYXRlKCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuZHJhZ2dpbmcmJnRoaXMuZHJhZ2dpbmcuZW5hYmxlZCgpJiYodGhpcy5vcHRpb25zLmRyYWdnYWJsZT0hMCx0aGlzLmRyYWdnaW5nLnJlbW92ZUhvb2tzKCkpLGRlbGV0ZSB0aGlzLmRyYWdnaW5nLHRoaXMuX3pvb21BbmltYXRlZCYmdC5vZmYoXCJ6b29tYW5pbVwiLHRoaXMuX2FuaW1hdGVab29tLHRoaXMpLHRoaXMuX3JlbW92ZUljb24oKSx0aGlzLl9yZW1vdmVTaGFkb3coKX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJue3pvb206dGhpcy51cGRhdGUsdmlld3Jlc2V0OnRoaXMudXBkYXRlfX0sZ2V0TGF0TG5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ30sc2V0TGF0TG5nOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2xhdGxuZztyZXR1cm4gdGhpcy5fbGF0bG5nPUModCksdGhpcy51cGRhdGUoKSx0aGlzLmZpcmUoXCJtb3ZlXCIse29sZExhdExuZzppLGxhdGxuZzp0aGlzLl9sYXRsbmd9KX0sc2V0WkluZGV4T2Zmc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuekluZGV4T2Zmc2V0PXQsdGhpcy51cGRhdGUoKX0sc2V0SWNvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmljb249dCx0aGlzLl9tYXAmJih0aGlzLl9pbml0SWNvbigpLHRoaXMudXBkYXRlKCkpLHRoaXMuX3BvcHVwJiZ0aGlzLmJpbmRQb3B1cCh0aGlzLl9wb3B1cCx0aGlzLl9wb3B1cC5vcHRpb25zKSx0aGlzfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ljb259LHVwZGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2ljb24mJnRoaXMuX21hcCl7dmFyIHQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpLnJvdW5kKCk7dGhpcy5fc2V0UG9zKHQpfXJldHVybiB0aGlzfSxfaW5pdEljb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMsaT1cImxlYWZsZXQtem9vbS1cIisodGhpcy5fem9vbUFuaW1hdGVkP1wiYW5pbWF0ZWRcIjpcImhpZGVcIiksZT10Lmljb24uY3JlYXRlSWNvbih0aGlzLl9pY29uKSxuPSExO2UhPT10aGlzLl9pY29uJiYodGhpcy5faWNvbiYmdGhpcy5fcmVtb3ZlSWNvbigpLG49ITAsdC50aXRsZSYmKGUudGl0bGU9dC50aXRsZSksXCJJTUdcIj09PWUudGFnTmFtZSYmKGUuYWx0PXQuYWx0fHxcIlwiKSksUShlLGkpLHQua2V5Ym9hcmQmJihlLnRhYkluZGV4PVwiMFwiKSx0aGlzLl9pY29uPWUsdC5yaXNlT25Ib3ZlciYmdGhpcy5vbih7bW91c2VvdmVyOnRoaXMuX2JyaW5nVG9Gcm9udCxtb3VzZW91dDp0aGlzLl9yZXNldFpJbmRleH0pO3ZhciBvPXQuaWNvbi5jcmVhdGVTaGFkb3codGhpcy5fc2hhZG93KSxzPSExO28hPT10aGlzLl9zaGFkb3cmJih0aGlzLl9yZW1vdmVTaGFkb3coKSxzPSEwKSxvJiYoUShvLGkpLG8uYWx0PVwiXCIpLHRoaXMuX3NoYWRvdz1vLHQub3BhY2l0eTwxJiZ0aGlzLl91cGRhdGVPcGFjaXR5KCksbiYmdGhpcy5nZXRQYW5lKCkuYXBwZW5kQ2hpbGQodGhpcy5faWNvbiksdGhpcy5faW5pdEludGVyYWN0aW9uKCksbyYmcyYmdGhpcy5nZXRQYW5lKFwic2hhZG93UGFuZVwiKS5hcHBlbmRDaGlsZCh0aGlzLl9zaGFkb3cpfSxfcmVtb3ZlSWNvbjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5yaXNlT25Ib3ZlciYmdGhpcy5vZmYoe21vdXNlb3Zlcjp0aGlzLl9icmluZ1RvRnJvbnQsbW91c2VvdXQ6dGhpcy5fcmVzZXRaSW5kZXh9KSxLKHRoaXMuX2ljb24pLHRoaXMucmVtb3ZlSW50ZXJhY3RpdmVUYXJnZXQodGhpcy5faWNvbiksdGhpcy5faWNvbj1udWxsfSxfcmVtb3ZlU2hhZG93OmZ1bmN0aW9uKCl7dGhpcy5fc2hhZG93JiZLKHRoaXMuX3NoYWRvdyksdGhpcy5fc2hhZG93PW51bGx9LF9zZXRQb3M6ZnVuY3Rpb24odCl7YXQodGhpcy5faWNvbix0KSx0aGlzLl9zaGFkb3cmJmF0KHRoaXMuX3NoYWRvdyx0KSx0aGlzLl96SW5kZXg9dC55K3RoaXMub3B0aW9ucy56SW5kZXhPZmZzZXQsdGhpcy5fcmVzZXRaSW5kZXgoKX0sX3VwZGF0ZVpJbmRleDpmdW5jdGlvbih0KXt0aGlzLl9pY29uLnN0eWxlLnpJbmRleD10aGlzLl96SW5kZXgrdH0sX2FuaW1hdGVab29tOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcC5fbGF0TG5nVG9OZXdMYXllclBvaW50KHRoaXMuX2xhdGxuZyx0Lnpvb20sdC5jZW50ZXIpLnJvdW5kKCk7dGhpcy5fc2V0UG9zKGkpfSxfaW5pdEludGVyYWN0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmludGVyYWN0aXZlJiYoUSh0aGlzLl9pY29uLFwibGVhZmxldC1pbnRlcmFjdGl2ZVwiKSx0aGlzLmFkZEludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX2ljb24pLEplKSl7dmFyIHQ9dGhpcy5vcHRpb25zLmRyYWdnYWJsZTt0aGlzLmRyYWdnaW5nJiYodD10aGlzLmRyYWdnaW5nLmVuYWJsZWQoKSx0aGlzLmRyYWdnaW5nLmRpc2FibGUoKSksdGhpcy5kcmFnZ2luZz1uZXcgSmUodGhpcyksdCYmdGhpcy5kcmFnZ2luZy5lbmFibGUoKX19LHNldE9wYWNpdHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5vcGFjaXR5PXQsdGhpcy5fbWFwJiZ0aGlzLl91cGRhdGVPcGFjaXR5KCksdGhpc30sX3VwZGF0ZU9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMub3BhY2l0eTtudCh0aGlzLl9pY29uLHQpLHRoaXMuX3NoYWRvdyYmbnQodGhpcy5fc2hhZG93LHQpfSxfYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlWkluZGV4KHRoaXMub3B0aW9ucy5yaXNlT2Zmc2V0KX0sX3Jlc2V0WkluZGV4OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlWkluZGV4KDApfSxfZ2V0UG9wdXBBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmljb24ub3B0aW9ucy5wb3B1cEFuY2hvcn0sX2dldFRvb2x0aXBBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmljb24ub3B0aW9ucy50b29sdGlwQW5jaG9yfX0pLFFlPXFlLmV4dGVuZCh7b3B0aW9uczp7c3Ryb2tlOiEwLGNvbG9yOlwiIzMzODhmZlwiLHdlaWdodDozLG9wYWNpdHk6MSxsaW5lQ2FwOlwicm91bmRcIixsaW5lSm9pbjpcInJvdW5kXCIsZGFzaEFycmF5Om51bGwsZGFzaE9mZnNldDpudWxsLGZpbGw6ITEsZmlsbENvbG9yOm51bGwsZmlsbE9wYWNpdHk6LjIsZmlsbFJ1bGU6XCJldmVub2RkXCIsaW50ZXJhY3RpdmU6ITAsYnViYmxpbmdNb3VzZUV2ZW50czohMH0sYmVmb3JlQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX3JlbmRlcmVyPXQuZ2V0UmVuZGVyZXIodGhpcyl9LG9uQWRkOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX2luaXRQYXRoKHRoaXMpLHRoaXMuX3Jlc2V0KCksdGhpcy5fcmVuZGVyZXIuX2FkZFBhdGgodGhpcyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX3JlbW92ZVBhdGgodGhpcyl9LHJlZHJhdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJnRoaXMuX3JlbmRlcmVyLl91cGRhdGVQYXRoKHRoaXMpLHRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3JldHVybiBsKHRoaXMsdCksdGhpcy5fcmVuZGVyZXImJnRoaXMuX3JlbmRlcmVyLl91cGRhdGVTdHlsZSh0aGlzKSx0aGlzfSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyZXImJnRoaXMuX3JlbmRlcmVyLl9icmluZ1RvRnJvbnQodGhpcyksdGhpc30sYnJpbmdUb0JhY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyZXImJnRoaXMuX3JlbmRlcmVyLl9icmluZ1RvQmFjayh0aGlzKSx0aGlzfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdGh9LF9yZXNldDpmdW5jdGlvbigpe3RoaXMuX3Byb2plY3QoKSx0aGlzLl91cGRhdGUoKX0sX2NsaWNrVG9sZXJhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMub3B0aW9ucy5zdHJva2U/dGhpcy5vcHRpb25zLndlaWdodC8yOjApK3RoaXMuX3JlbmRlcmVyLm9wdGlvbnMudG9sZXJhbmNlfX0pLHRuPVFlLmV4dGVuZCh7b3B0aW9uczp7ZmlsbDohMCxyYWRpdXM6MTB9LGluaXRpYWxpemU6ZnVuY3Rpb24odCxpKXtsKHRoaXMsaSksdGhpcy5fbGF0bG5nPUModCksdGhpcy5fcmFkaXVzPXRoaXMub3B0aW9ucy5yYWRpdXN9LHNldExhdExuZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGF0bG5nPUModCksdGhpcy5yZWRyYXcoKSx0aGlzLmZpcmUoXCJtb3ZlXCIse2xhdGxuZzp0aGlzLl9sYXRsbmd9KX0sZ2V0TGF0TG5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ30sc2V0UmFkaXVzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMucmFkaXVzPXRoaXMuX3JhZGl1cz10LHRoaXMucmVkcmF3KCl9LGdldFJhZGl1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYWRpdXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBpPXQmJnQucmFkaXVzfHx0aGlzLl9yYWRpdXM7cmV0dXJuIFFlLnByb3RvdHlwZS5zZXRTdHlsZS5jYWxsKHRoaXMsdCksdGhpcy5zZXRSYWRpdXMoaSksdGhpc30sX3Byb2plY3Q6ZnVuY3Rpb24oKXt0aGlzLl9wb2ludD10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZyksdGhpcy5fdXBkYXRlQm91bmRzKCl9LF91cGRhdGVCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yYWRpdXMsaT10aGlzLl9yYWRpdXNZfHx0LGU9dGhpcy5fY2xpY2tUb2xlcmFuY2UoKSxuPVt0K2UsaStlXTt0aGlzLl9weEJvdW5kcz1uZXcgUCh0aGlzLl9wb2ludC5zdWJ0cmFjdChuKSx0aGlzLl9wb2ludC5hZGQobikpfSxfdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwJiZ0aGlzLl91cGRhdGVQYXRoKCl9LF91cGRhdGVQYXRoOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX3VwZGF0ZUNpcmNsZSh0aGlzKX0sX2VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JhZGl1cyYmIXRoaXMuX3JlbmRlcmVyLl9ib3VuZHMuaW50ZXJzZWN0cyh0aGlzLl9weEJvdW5kcyl9LF9jb250YWluc1BvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRpc3RhbmNlVG8odGhpcy5fcG9pbnQpPD10aGlzLl9yYWRpdXMrdGhpcy5fY2xpY2tUb2xlcmFuY2UoKX19KSxlbj10bi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCxlLG4pe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYoZT1pKHt9LG4se3JhZGl1czplfSkpLGwodGhpcyxlKSx0aGlzLl9sYXRsbmc9Qyh0KSxpc05hTih0aGlzLm9wdGlvbnMucmFkaXVzKSl0aHJvdyBuZXcgRXJyb3IoXCJDaXJjbGUgcmFkaXVzIGNhbm5vdCBiZSBOYU5cIik7dGhpcy5fbVJhZGl1cz10aGlzLm9wdGlvbnMucmFkaXVzfSxzZXRSYWRpdXM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21SYWRpdXM9dCx0aGlzLnJlZHJhdygpfSxnZXRSYWRpdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJhZGl1c30sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7dmFyIHQ9W3RoaXMuX3JhZGl1cyx0aGlzLl9yYWRpdXNZfHx0aGlzLl9yYWRpdXNdO3JldHVybiBuZXcgVCh0aGlzLl9tYXAubGF5ZXJQb2ludFRvTGF0TG5nKHRoaXMuX3BvaW50LnN1YnRyYWN0KHQpKSx0aGlzLl9tYXAubGF5ZXJQb2ludFRvTGF0TG5nKHRoaXMuX3BvaW50LmFkZCh0KSkpfSxzZXRTdHlsZTpRZS5wcm90b3R5cGUuc2V0U3R5bGUsX3Byb2plY3Q6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9sYXRsbmcubG5nLGk9dGhpcy5fbGF0bG5nLmxhdCxlPXRoaXMuX21hcCxuPWUub3B0aW9ucy5jcnM7aWYobi5kaXN0YW5jZT09PXBpLmRpc3RhbmNlKXt2YXIgbz1NYXRoLlBJLzE4MCxzPXRoaXMuX21SYWRpdXMvcGkuUi9vLHI9ZS5wcm9qZWN0KFtpK3MsdF0pLGE9ZS5wcm9qZWN0KFtpLXMsdF0pLGg9ci5hZGQoYSkuZGl2aWRlQnkoMiksdT1lLnVucHJvamVjdChoKS5sYXQsbD1NYXRoLmFjb3MoKE1hdGguY29zKHMqbyktTWF0aC5zaW4oaSpvKSpNYXRoLnNpbih1Km8pKS8oTWF0aC5jb3MoaSpvKSpNYXRoLmNvcyh1Km8pKSkvbzsoaXNOYU4obCl8fDA9PT1sKSYmKGw9cy9NYXRoLmNvcyhNYXRoLlBJLzE4MCppKSksdGhpcy5fcG9pbnQ9aC5zdWJ0cmFjdChlLmdldFBpeGVsT3JpZ2luKCkpLHRoaXMuX3JhZGl1cz1pc05hTihsKT8wOmgueC1lLnByb2plY3QoW3UsdC1sXSkueCx0aGlzLl9yYWRpdXNZPWgueS1yLnl9ZWxzZXt2YXIgYz1uLnVucHJvamVjdChuLnByb2plY3QodGhpcy5fbGF0bG5nKS5zdWJ0cmFjdChbdGhpcy5fbVJhZGl1cywwXSkpO3RoaXMuX3BvaW50PWUubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZyksdGhpcy5fcmFkaXVzPXRoaXMuX3BvaW50LngtZS5sYXRMbmdUb0xheWVyUG9pbnQoYykueH10aGlzLl91cGRhdGVCb3VuZHMoKX19KSxubj1RZS5leHRlbmQoe29wdGlvbnM6e3Ntb290aEZhY3RvcjoxLG5vQ2xpcDohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe2wodGhpcyxpKSx0aGlzLl9zZXRMYXRMbmdzKHQpfSxnZXRMYXRMbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ3N9LHNldExhdExuZ3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NldExhdExuZ3ModCksdGhpcy5yZWRyYXcoKX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiF0aGlzLl9sYXRsbmdzLmxlbmd0aH0sY2xvc2VzdExheWVyUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBpLGUsbj0xLzAsbz1udWxsLHM9RHQscj0wLGE9dGhpcy5fcGFydHMubGVuZ3RoO3I8YTtyKyspZm9yKHZhciBoPXRoaXMuX3BhcnRzW3JdLHU9MSxsPWgubGVuZ3RoO3U8bDt1Kyspe3ZhciBjPXModCxpPWhbdS0xXSxlPWhbdV0sITApO2M8biYmKG49YyxvPXModCxpLGUpKX1yZXR1cm4gbyYmKG8uZGlzdGFuY2U9TWF0aC5zcXJ0KG4pKSxvfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5fbWFwKXRocm93IG5ldyBFcnJvcihcIk11c3QgYWRkIGxheWVyIHRvIG1hcCBiZWZvcmUgdXNpbmcgZ2V0Q2VudGVyKClcIik7dmFyIHQsaSxlLG4sbyxzLHIsYT10aGlzLl9yaW5nc1swXSxoPWEubGVuZ3RoO2lmKCFoKXJldHVybiBudWxsO2Zvcih0PTAsaT0wO3Q8aC0xO3QrKylpKz1hW3RdLmRpc3RhbmNlVG8oYVt0KzFdKS8yO2lmKDA9PT1pKXJldHVybiB0aGlzLl9tYXAubGF5ZXJQb2ludFRvTGF0TG5nKGFbMF0pO2Zvcih0PTAsbj0wO3Q8aC0xO3QrKylpZihvPWFbdF0scz1hW3QrMV0sZT1vLmRpc3RhbmNlVG8ocyksKG4rPWUpPmkpcmV0dXJuIHI9KG4taSkvZSx0aGlzLl9tYXAubGF5ZXJQb2ludFRvTGF0TG5nKFtzLngtcioocy54LW8ueCkscy55LXIqKHMueS1vLnkpXSl9LGdldEJvdW5kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib3VuZHN9LGFkZExhdExuZzpmdW5jdGlvbih0LGkpe3JldHVybiBpPWl8fHRoaXMuX2RlZmF1bHRTaGFwZSgpLHQ9Qyh0KSxpLnB1c2godCksdGhpcy5fYm91bmRzLmV4dGVuZCh0KSx0aGlzLnJlZHJhdygpfSxfc2V0TGF0TG5nczpmdW5jdGlvbih0KXt0aGlzLl9ib3VuZHM9bmV3IFQsdGhpcy5fbGF0bG5ncz10aGlzLl9jb252ZXJ0TGF0TG5ncyh0KX0sX2RlZmF1bHRTaGFwZTpmdW5jdGlvbigpe3JldHVybiBqdCh0aGlzLl9sYXRsbmdzKT90aGlzLl9sYXRsbmdzOnRoaXMuX2xhdGxuZ3NbMF19LF9jb252ZXJ0TGF0TG5nczpmdW5jdGlvbih0KXtmb3IodmFyIGk9W10sZT1qdCh0KSxuPTAsbz10Lmxlbmd0aDtuPG87bisrKWU/KGlbbl09Qyh0W25dKSx0aGlzLl9ib3VuZHMuZXh0ZW5kKGlbbl0pKTppW25dPXRoaXMuX2NvbnZlcnRMYXRMbmdzKHRbbl0pO3JldHVybiBpfSxfcHJvamVjdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBQO3RoaXMuX3JpbmdzPVtdLHRoaXMuX3Byb2plY3RMYXRsbmdzKHRoaXMuX2xhdGxuZ3MsdGhpcy5fcmluZ3MsdCk7dmFyIGk9dGhpcy5fY2xpY2tUb2xlcmFuY2UoKSxlPW5ldyB4KGksaSk7dGhpcy5fYm91bmRzLmlzVmFsaWQoKSYmdC5pc1ZhbGlkKCkmJih0Lm1pbi5fc3VidHJhY3QoZSksdC5tYXguX2FkZChlKSx0aGlzLl9weEJvdW5kcz10KX0sX3Byb2plY3RMYXRsbmdzOmZ1bmN0aW9uKHQsaSxlKXt2YXIgbixvLHM9dFswXWluc3RhbmNlb2YgTSxyPXQubGVuZ3RoO2lmKHMpe2ZvcihvPVtdLG49MDtuPHI7bisrKW9bbl09dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0W25dKSxlLmV4dGVuZChvW25dKTtpLnB1c2gobyl9ZWxzZSBmb3Iobj0wO248cjtuKyspdGhpcy5fcHJvamVjdExhdGxuZ3ModFtuXSxpLGUpfSxfY2xpcFBvaW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3JlbmRlcmVyLl9ib3VuZHM7aWYodGhpcy5fcGFydHM9W10sdGhpcy5fcHhCb3VuZHMmJnRoaXMuX3B4Qm91bmRzLmludGVyc2VjdHModCkpaWYodGhpcy5vcHRpb25zLm5vQ2xpcCl0aGlzLl9wYXJ0cz10aGlzLl9yaW5ncztlbHNle3ZhciBpLGUsbixvLHMscixhLGg9dGhpcy5fcGFydHM7Zm9yKGk9MCxuPTAsbz10aGlzLl9yaW5ncy5sZW5ndGg7aTxvO2krKylmb3IoZT0wLHM9KGE9dGhpcy5fcmluZ3NbaV0pLmxlbmd0aDtlPHMtMTtlKyspKHI9SXQoYVtlXSxhW2UrMV0sdCxlLCEwKSkmJihoW25dPWhbbl18fFtdLGhbbl0ucHVzaChyWzBdKSxyWzFdPT09YVtlKzFdJiZlIT09cy0yfHwoaFtuXS5wdXNoKHJbMV0pLG4rKykpfX0sX3NpbXBsaWZ5UG9pbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX3BhcnRzLGk9dGhpcy5vcHRpb25zLnNtb290aEZhY3RvcixlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRbZV09WnQodFtlXSxpKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX21hcCYmKHRoaXMuX2NsaXBQb2ludHMoKSx0aGlzLl9zaW1wbGlmeVBvaW50cygpLHRoaXMuX3VwZGF0ZVBhdGgoKSl9LF91cGRhdGVQYXRoOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX3VwZGF0ZVBvbHkodGhpcyl9LF9jb250YWluc1BvaW50OmZ1bmN0aW9uKHQsaSl7dmFyIGUsbixvLHMscixhLGg9dGhpcy5fY2xpY2tUb2xlcmFuY2UoKTtpZighdGhpcy5fcHhCb3VuZHN8fCF0aGlzLl9weEJvdW5kcy5jb250YWlucyh0KSlyZXR1cm4hMTtmb3IoZT0wLHM9dGhpcy5fcGFydHMubGVuZ3RoO2U8cztlKyspZm9yKG49MCxvPShyPShhPXRoaXMuX3BhcnRzW2VdKS5sZW5ndGgpLTE7bjxyO289bisrKWlmKChpfHwwIT09bikmJkV0KHQsYVtvXSxhW25dKTw9aClyZXR1cm4hMDtyZXR1cm4hMX19KTtubi5fZmxhdD1XdDt2YXIgb249bm4uZXh0ZW5kKHtvcHRpb25zOntmaWxsOiEwfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2xhdGxuZ3MubGVuZ3RofHwhdGhpcy5fbGF0bG5nc1swXS5sZW5ndGh9LGdldENlbnRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLl9tYXApdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBhZGQgbGF5ZXIgdG8gbWFwIGJlZm9yZSB1c2luZyBnZXRDZW50ZXIoKVwiKTt2YXIgdCxpLGUsbixvLHMscixhLGgsdT10aGlzLl9yaW5nc1swXSxsPXUubGVuZ3RoO2lmKCFsKXJldHVybiBudWxsO2ZvcihzPXI9YT0wLHQ9MCxpPWwtMTt0PGw7aT10KyspZT11W3RdLG49dVtpXSxvPWUueSpuLngtbi55KmUueCxyKz0oZS54K24ueCkqbyxhKz0oZS55K24ueSkqbyxzKz0zKm87cmV0dXJuIGg9MD09PXM/dVswXTpbci9zLGEvc10sdGhpcy5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhoKX0sX2NvbnZlcnRMYXRMbmdzOmZ1bmN0aW9uKHQpe3ZhciBpPW5uLnByb3RvdHlwZS5fY29udmVydExhdExuZ3MuY2FsbCh0aGlzLHQpLGU9aS5sZW5ndGg7cmV0dXJuIGU+PTImJmlbMF1pbnN0YW5jZW9mIE0mJmlbMF0uZXF1YWxzKGlbZS0xXSkmJmkucG9wKCksaX0sX3NldExhdExuZ3M6ZnVuY3Rpb24odCl7bm4ucHJvdG90eXBlLl9zZXRMYXRMbmdzLmNhbGwodGhpcyx0KSxqdCh0aGlzLl9sYXRsbmdzKSYmKHRoaXMuX2xhdGxuZ3M9W3RoaXMuX2xhdGxuZ3NdKX0sX2RlZmF1bHRTaGFwZTpmdW5jdGlvbigpe3JldHVybiBqdCh0aGlzLl9sYXRsbmdzWzBdKT90aGlzLl9sYXRsbmdzWzBdOnRoaXMuX2xhdGxuZ3NbMF1bMF19LF9jbGlwUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVuZGVyZXIuX2JvdW5kcyxpPXRoaXMub3B0aW9ucy53ZWlnaHQsZT1uZXcgeChpLGkpO2lmKHQ9bmV3IFAodC5taW4uc3VidHJhY3QoZSksdC5tYXguYWRkKGUpKSx0aGlzLl9wYXJ0cz1bXSx0aGlzLl9weEJvdW5kcyYmdGhpcy5fcHhCb3VuZHMuaW50ZXJzZWN0cyh0KSlpZih0aGlzLm9wdGlvbnMubm9DbGlwKXRoaXMuX3BhcnRzPXRoaXMuX3JpbmdzO2Vsc2UgZm9yKHZhciBuLG89MCxzPXRoaXMuX3JpbmdzLmxlbmd0aDtvPHM7bysrKShuPUh0KHRoaXMuX3JpbmdzW29dLHQsITApKS5sZW5ndGgmJnRoaXMuX3BhcnRzLnB1c2gobil9LF91cGRhdGVQYXRoOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX3VwZGF0ZVBvbHkodGhpcywhMCl9LF9jb250YWluc1BvaW50OmZ1bmN0aW9uKHQpe3ZhciBpLGUsbixvLHMscixhLGgsdT0hMTtpZighdGhpcy5fcHhCb3VuZHN8fCF0aGlzLl9weEJvdW5kcy5jb250YWlucyh0KSlyZXR1cm4hMTtmb3Iobz0wLGE9dGhpcy5fcGFydHMubGVuZ3RoO288YTtvKyspZm9yKHM9MCxyPShoPShpPXRoaXMuX3BhcnRzW29dKS5sZW5ndGgpLTE7czxoO3I9cysrKWU9aVtzXSxuPWlbcl0sZS55PnQueSE9bi55PnQueSYmdC54PChuLngtZS54KSoodC55LWUueSkvKG4ueS1lLnkpK2UueCYmKHU9IXUpO3JldHVybiB1fHxubi5wcm90b3R5cGUuX2NvbnRhaW5zUG9pbnQuY2FsbCh0aGlzLHQsITApfX0pLHNuPUtlLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe2wodGhpcyxpKSx0aGlzLl9sYXllcnM9e30sdCYmdGhpcy5hZGREYXRhKHQpfSxhZGREYXRhOmZ1bmN0aW9uKHQpe3ZhciBpLGUsbixvPW9pKHQpP3Q6dC5mZWF0dXJlcztpZihvKXtmb3IoaT0wLGU9by5sZW5ndGg7aTxlO2krKykoKG49b1tpXSkuZ2VvbWV0cmllc3x8bi5nZW9tZXRyeXx8bi5mZWF0dXJlc3x8bi5jb29yZGluYXRlcykmJnRoaXMuYWRkRGF0YShuKTtyZXR1cm4gdGhpc312YXIgcz10aGlzLm9wdGlvbnM7aWYocy5maWx0ZXImJiFzLmZpbHRlcih0KSlyZXR1cm4gdGhpczt2YXIgcj1GdCh0LHMpO3JldHVybiByPyhyLmZlYXR1cmU9WXQodCksci5kZWZhdWx0T3B0aW9ucz1yLm9wdGlvbnMsdGhpcy5yZXNldFN0eWxlKHIpLHMub25FYWNoRmVhdHVyZSYmcy5vbkVhY2hGZWF0dXJlKHQsciksdGhpcy5hZGRMYXllcihyKSk6dGhpc30scmVzZXRTdHlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5vcHRpb25zPWkoe30sdC5kZWZhdWx0T3B0aW9ucyksdGhpcy5fc2V0TGF5ZXJTdHlsZSh0LHRoaXMub3B0aW9ucy5zdHlsZSksdGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaExheWVyKGZ1bmN0aW9uKGkpe3RoaXMuX3NldExheWVyU3R5bGUoaSx0KX0sdGhpcyl9LF9zZXRMYXllclN0eWxlOmZ1bmN0aW9uKHQsaSl7XCJmdW5jdGlvblwiPT10eXBlb2YgaSYmKGk9aSh0LmZlYXR1cmUpKSx0LnNldFN0eWxlJiZ0LnNldFN0eWxlKGkpfX0pLHJuPXt0b0dlb0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIEt0KHRoaXMse3R5cGU6XCJQb2ludFwiLGNvb3JkaW5hdGVzOnF0KHRoaXMuZ2V0TGF0TG5nKCksdCl9KX19OyRlLmluY2x1ZGUocm4pLGVuLmluY2x1ZGUocm4pLHRuLmluY2x1ZGUocm4pLG5uLmluY2x1ZGUoe3RvR2VvSlNPTjpmdW5jdGlvbih0KXt2YXIgaT0hanQodGhpcy5fbGF0bG5ncyksZT1HdCh0aGlzLl9sYXRsbmdzLGk/MTowLCExLHQpO3JldHVybiBLdCh0aGlzLHt0eXBlOihpP1wiTXVsdGlcIjpcIlwiKStcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczplfSl9fSksb24uaW5jbHVkZSh7dG9HZW9KU09OOmZ1bmN0aW9uKHQpe3ZhciBpPSFqdCh0aGlzLl9sYXRsbmdzKSxlPWkmJiFqdCh0aGlzLl9sYXRsbmdzWzBdKSxuPUd0KHRoaXMuX2xhdGxuZ3MsZT8yOmk/MTowLCEwLHQpO3JldHVybiBpfHwobj1bbl0pLEt0KHRoaXMse3R5cGU6KGU/XCJNdWx0aVwiOlwiXCIpK1wiUG9seWdvblwiLGNvb3JkaW5hdGVzOm59KX19KSxHZS5pbmNsdWRlKHt0b011bHRpUG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGk9W107cmV0dXJuIHRoaXMuZWFjaExheWVyKGZ1bmN0aW9uKGUpe2kucHVzaChlLnRvR2VvSlNPTih0KS5nZW9tZXRyeS5jb29yZGluYXRlcyl9KSxLdCh0aGlzLHt0eXBlOlwiTXVsdGlQb2ludFwiLGNvb3JkaW5hdGVzOml9KX0sdG9HZW9KU09OOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZmVhdHVyZSYmdGhpcy5mZWF0dXJlLmdlb21ldHJ5JiZ0aGlzLmZlYXR1cmUuZ2VvbWV0cnkudHlwZTtpZihcIk11bHRpUG9pbnRcIj09PWkpcmV0dXJuIHRoaXMudG9NdWx0aVBvaW50KHQpO3ZhciBlPVwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PT1pLG49W107cmV0dXJuIHRoaXMuZWFjaExheWVyKGZ1bmN0aW9uKGkpe2lmKGkudG9HZW9KU09OKXt2YXIgbz1pLnRvR2VvSlNPTih0KTtpZihlKW4ucHVzaChvLmdlb21ldHJ5KTtlbHNle3ZhciBzPVl0KG8pO1wiRmVhdHVyZUNvbGxlY3Rpb25cIj09PXMudHlwZT9uLnB1c2guYXBwbHkobixzLmZlYXR1cmVzKTpuLnB1c2gocyl9fX0pLGU/S3QodGhpcyx7Z2VvbWV0cmllczpuLHR5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIn0pOnt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczpufX19KTt2YXIgYW49WHQsaG49cWUuZXh0ZW5kKHtvcHRpb25zOntvcGFjaXR5OjEsYWx0OlwiXCIsaW50ZXJhY3RpdmU6ITEsY3Jvc3NPcmlnaW46ITEsZXJyb3JPdmVybGF5VXJsOlwiXCIsekluZGV4OjEsY2xhc3NOYW1lOlwiXCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24odCxpLGUpe3RoaXMuX3VybD10LHRoaXMuX2JvdW5kcz16KGkpLGwodGhpcyxlKX0sb25BZGQ6ZnVuY3Rpb24oKXt0aGlzLl9pbWFnZXx8KHRoaXMuX2luaXRJbWFnZSgpLHRoaXMub3B0aW9ucy5vcGFjaXR5PDEmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSksdGhpcy5vcHRpb25zLmludGVyYWN0aXZlJiYoUSh0aGlzLl9pbWFnZSxcImxlYWZsZXQtaW50ZXJhY3RpdmVcIiksdGhpcy5hZGRJbnRlcmFjdGl2ZVRhcmdldCh0aGlzLl9pbWFnZSkpLHRoaXMuZ2V0UGFuZSgpLmFwcGVuZENoaWxkKHRoaXMuX2ltYWdlKSx0aGlzLl9yZXNldCgpfSxvblJlbW92ZTpmdW5jdGlvbigpe0sodGhpcy5faW1hZ2UpLHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZSYmdGhpcy5yZW1vdmVJbnRlcmFjdGl2ZVRhcmdldCh0aGlzLl9pbWFnZSl9LHNldE9wYWNpdHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5vcGFjaXR5PXQsdGhpcy5faW1hZ2UmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSx0aGlzfSxzZXRTdHlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5vcGFjaXR5JiZ0aGlzLnNldE9wYWNpdHkodC5vcGFjaXR5KSx0aGlzfSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwJiZYKHRoaXMuX2ltYWdlKSx0aGlzfSxicmluZ1RvQmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJkoodGhpcy5faW1hZ2UpLHRoaXN9LHNldFVybDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdXJsPXQsdGhpcy5faW1hZ2UmJih0aGlzLl9pbWFnZS5zcmM9dCksdGhpc30sc2V0Qm91bmRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ib3VuZHM9eih0KSx0aGlzLl9tYXAmJnRoaXMuX3Jlc2V0KCksdGhpc30sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9e3pvb206dGhpcy5fcmVzZXQsdmlld3Jlc2V0OnRoaXMuX3Jlc2V0fTtyZXR1cm4gdGhpcy5fem9vbUFuaW1hdGVkJiYodC56b29tYW5pbT10aGlzLl9hbmltYXRlWm9vbSksdH0sc2V0WkluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuekluZGV4PXQsdGhpcy5fdXBkYXRlWkluZGV4KCksdGhpc30sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvdW5kc30sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbWFnZX0sX2luaXRJbWFnZTpmdW5jdGlvbigpe3ZhciB0PVwiSU1HXCI9PT10aGlzLl91cmwudGFnTmFtZSxpPXRoaXMuX2ltYWdlPXQ/dGhpcy5fdXJsOkcoXCJpbWdcIik7UShpLFwibGVhZmxldC1pbWFnZS1sYXllclwiKSx0aGlzLl96b29tQW5pbWF0ZWQmJlEoaSxcImxlYWZsZXQtem9vbS1hbmltYXRlZFwiKSx0aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiZRKGksdGhpcy5vcHRpb25zLmNsYXNzTmFtZSksaS5vbnNlbGVjdHN0YXJ0PXIsaS5vbm1vdXNlbW92ZT1yLGkub25sb2FkPWUodGhpcy5maXJlLHRoaXMsXCJsb2FkXCIpLGkub25lcnJvcj1lKHRoaXMuX292ZXJsYXlPbkVycm9yLHRoaXMsXCJlcnJvclwiKSwodGhpcy5vcHRpb25zLmNyb3NzT3JpZ2lufHxcIlwiPT09dGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luKSYmKGkuY3Jvc3NPcmlnaW49ITA9PT10aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4/XCJcIjp0aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4pLHRoaXMub3B0aW9ucy56SW5kZXgmJnRoaXMuX3VwZGF0ZVpJbmRleCgpLHQ/dGhpcy5fdXJsPWkuc3JjOihpLnNyYz10aGlzLl91cmwsaS5hbHQ9dGhpcy5vcHRpb25zLmFsdCl9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9tYXAuZ2V0Wm9vbVNjYWxlKHQuem9vbSksZT10aGlzLl9tYXAuX2xhdExuZ0JvdW5kc1RvTmV3TGF5ZXJCb3VuZHModGhpcy5fYm91bmRzLHQuem9vbSx0LmNlbnRlcikubWluO3J0KHRoaXMuX2ltYWdlLGUsaSl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2ltYWdlLGk9bmV3IFAodGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9ib3VuZHMuZ2V0Tm9ydGhXZXN0KCkpLHRoaXMuX21hcC5sYXRMbmdUb0xheWVyUG9pbnQodGhpcy5fYm91bmRzLmdldFNvdXRoRWFzdCgpKSksZT1pLmdldFNpemUoKTthdCh0LGkubWluKSx0LnN0eWxlLndpZHRoPWUueCtcInB4XCIsdC5zdHlsZS5oZWlnaHQ9ZS55K1wicHhcIn0sX3VwZGF0ZU9wYWNpdHk6ZnVuY3Rpb24oKXtudCh0aGlzLl9pbWFnZSx0aGlzLm9wdGlvbnMub3BhY2l0eSl9LF91cGRhdGVaSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLl9pbWFnZSYmdm9pZCAwIT09dGhpcy5vcHRpb25zLnpJbmRleCYmbnVsbCE9PXRoaXMub3B0aW9ucy56SW5kZXgmJih0aGlzLl9pbWFnZS5zdHlsZS56SW5kZXg9dGhpcy5vcHRpb25zLnpJbmRleCl9LF9vdmVybGF5T25FcnJvcjpmdW5jdGlvbigpe3RoaXMuZmlyZShcImVycm9yXCIpO3ZhciB0PXRoaXMub3B0aW9ucy5lcnJvck92ZXJsYXlVcmw7dCYmdGhpcy5fdXJsIT09dCYmKHRoaXMuX3VybD10LHRoaXMuX2ltYWdlLnNyYz10KX19KSx1bj1obi5leHRlbmQoe29wdGlvbnM6e2F1dG9wbGF5OiEwLGxvb3A6ITB9LF9pbml0SW1hZ2U6ZnVuY3Rpb24oKXt2YXIgdD1cIlZJREVPXCI9PT10aGlzLl91cmwudGFnTmFtZSxpPXRoaXMuX2ltYWdlPXQ/dGhpcy5fdXJsOkcoXCJ2aWRlb1wiKTtpZihRKGksXCJsZWFmbGV0LWltYWdlLWxheWVyXCIpLHRoaXMuX3pvb21BbmltYXRlZCYmUShpLFwibGVhZmxldC16b29tLWFuaW1hdGVkXCIpLGkub25zZWxlY3RzdGFydD1yLGkub25tb3VzZW1vdmU9cixpLm9ubG9hZGVkZGF0YT1lKHRoaXMuZmlyZSx0aGlzLFwibG9hZFwiKSx0KXtmb3IodmFyIG49aS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNvdXJjZVwiKSxvPVtdLHM9MDtzPG4ubGVuZ3RoO3MrKylvLnB1c2gobltzXS5zcmMpO3RoaXMuX3VybD1uLmxlbmd0aD4wP286W2kuc3JjXX1lbHNle29pKHRoaXMuX3VybCl8fCh0aGlzLl91cmw9W3RoaXMuX3VybF0pLGkuYXV0b3BsYXk9ISF0aGlzLm9wdGlvbnMuYXV0b3BsYXksaS5sb29wPSEhdGhpcy5vcHRpb25zLmxvb3A7Zm9yKHZhciBhPTA7YTx0aGlzLl91cmwubGVuZ3RoO2ErKyl7dmFyIGg9RyhcInNvdXJjZVwiKTtoLnNyYz10aGlzLl91cmxbYV0saS5hcHBlbmRDaGlsZChoKX19fX0pLGxuPXFlLmV4dGVuZCh7b3B0aW9uczp7b2Zmc2V0OlswLDddLGNsYXNzTmFtZTpcIlwiLHBhbmU6XCJwb3B1cFBhbmVcIn0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe2wodGhpcyx0KSx0aGlzLl9zb3VyY2U9aX0sb25BZGQ6ZnVuY3Rpb24odCl7dGhpcy5fem9vbUFuaW1hdGVkPXQuX3pvb21BbmltYXRlZCx0aGlzLl9jb250YWluZXJ8fHRoaXMuX2luaXRMYXlvdXQoKSx0Ll9mYWRlQW5pbWF0ZWQmJm50KHRoaXMuX2NvbnRhaW5lciwwKSxjbGVhclRpbWVvdXQodGhpcy5fcmVtb3ZlVGltZW91dCksdGhpcy5nZXRQYW5lKCkuYXBwZW5kQ2hpbGQodGhpcy5fY29udGFpbmVyKSx0aGlzLnVwZGF0ZSgpLHQuX2ZhZGVBbmltYXRlZCYmbnQodGhpcy5fY29udGFpbmVyLDEpLHRoaXMuYnJpbmdUb0Zyb250KCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3QuX2ZhZGVBbmltYXRlZD8obnQodGhpcy5fY29udGFpbmVyLDApLHRoaXMuX3JlbW92ZVRpbWVvdXQ9c2V0VGltZW91dChlKEssdm9pZCAwLHRoaXMuX2NvbnRhaW5lciksMjAwKSk6Syh0aGlzLl9jb250YWluZXIpfSxnZXRMYXRMbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF0bG5nfSxzZXRMYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xhdGxuZz1DKHQpLHRoaXMuX21hcCYmKHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCksdGhpcy5fYWRqdXN0UGFuKCkpLHRoaXN9LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudH0sc2V0Q29udGVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY29udGVudD10LHRoaXMudXBkYXRlKCksdGhpc30sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJ9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX21hcCYmKHRoaXMuX2NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsdGhpcy5fdXBkYXRlQ29udGVudCgpLHRoaXMuX3VwZGF0ZUxheW91dCgpLHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCksdGhpcy5fY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHk9XCJcIix0aGlzLl9hZGp1c3RQYW4oKSl9LGdldEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXt6b29tOnRoaXMuX3VwZGF0ZVBvc2l0aW9uLHZpZXdyZXNldDp0aGlzLl91cGRhdGVQb3NpdGlvbn07cmV0dXJuIHRoaXMuX3pvb21BbmltYXRlZCYmKHQuem9vbWFuaW09dGhpcy5fYW5pbWF0ZVpvb20pLHR9LGlzT3BlbjpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fbWFwJiZ0aGlzLl9tYXAuaGFzTGF5ZXIodGhpcyl9LGJyaW5nVG9Gcm9udDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJlgodGhpcy5fY29udGFpbmVyKSx0aGlzfSxicmluZ1RvQmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJkoodGhpcy5fY29udGFpbmVyKSx0aGlzfSxfdXBkYXRlQ29udGVudDpmdW5jdGlvbigpe2lmKHRoaXMuX2NvbnRlbnQpe3ZhciB0PXRoaXMuX2NvbnRlbnROb2RlLGk9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fY29udGVudD90aGlzLl9jb250ZW50KHRoaXMuX3NvdXJjZXx8dGhpcyk6dGhpcy5fY29udGVudDtpZihcInN0cmluZ1wiPT10eXBlb2YgaSl0LmlubmVySFRNTD1pO2Vsc2V7Zm9yKDt0Lmhhc0NoaWxkTm9kZXMoKTspdC5yZW1vdmVDaGlsZCh0LmZpcnN0Q2hpbGQpO3QuYXBwZW5kQ2hpbGQoaSl9dGhpcy5maXJlKFwiY29udGVudHVwZGF0ZVwiKX19LF91cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuX21hcCl7dmFyIHQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpLGk9dyh0aGlzLm9wdGlvbnMub2Zmc2V0KSxlPXRoaXMuX2dldEFuY2hvcigpO3RoaXMuX3pvb21BbmltYXRlZD9hdCh0aGlzLl9jb250YWluZXIsdC5hZGQoZSkpOmk9aS5hZGQodCkuYWRkKGUpO3ZhciBuPXRoaXMuX2NvbnRhaW5lckJvdHRvbT0taS55LG89dGhpcy5fY29udGFpbmVyTGVmdD0tTWF0aC5yb3VuZCh0aGlzLl9jb250YWluZXJXaWR0aC8yKStpLng7dGhpcy5fY29udGFpbmVyLnN0eWxlLmJvdHRvbT1uK1wicHhcIix0aGlzLl9jb250YWluZXIuc3R5bGUubGVmdD1vK1wicHhcIn19LF9nZXRBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm5bMCwwXX19KSxjbj1sbi5leHRlbmQoe29wdGlvbnM6e21heFdpZHRoOjMwMCxtaW5XaWR0aDo1MCxtYXhIZWlnaHQ6bnVsbCxhdXRvUGFuOiEwLGF1dG9QYW5QYWRkaW5nVG9wTGVmdDpudWxsLGF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQ6bnVsbCxhdXRvUGFuUGFkZGluZzpbNSw1XSxrZWVwSW5WaWV3OiExLGNsb3NlQnV0dG9uOiEwLGF1dG9DbG9zZTohMCxjbG9zZU9uRXNjYXBlS2V5OiEwLGNsYXNzTmFtZTpcIlwifSxvcGVuT246ZnVuY3Rpb24odCl7cmV0dXJuIHQub3BlblBvcHVwKHRoaXMpLHRoaXN9LG9uQWRkOmZ1bmN0aW9uKHQpe2xuLnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMsdCksdC5maXJlKFwicG9wdXBvcGVuXCIse3BvcHVwOnRoaXN9KSx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZmlyZShcInBvcHVwb3BlblwiLHtwb3B1cDp0aGlzfSwhMCksdGhpcy5fc291cmNlIGluc3RhbmNlb2YgUWV8fHRoaXMuX3NvdXJjZS5vbihcInByZWNsaWNrXCIseXQpKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7bG4ucHJvdG90eXBlLm9uUmVtb3ZlLmNhbGwodGhpcyx0KSx0LmZpcmUoXCJwb3B1cGNsb3NlXCIse3BvcHVwOnRoaXN9KSx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZmlyZShcInBvcHVwY2xvc2VcIix7cG9wdXA6dGhpc30sITApLHRoaXMuX3NvdXJjZSBpbnN0YW5jZW9mIFFlfHx0aGlzLl9zb3VyY2Uub2ZmKFwicHJlY2xpY2tcIix5dCkpfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD1sbi5wcm90b3R5cGUuZ2V0RXZlbnRzLmNhbGwodGhpcyk7cmV0dXJuKHZvaWQgMCE9PXRoaXMub3B0aW9ucy5jbG9zZU9uQ2xpY2s/dGhpcy5vcHRpb25zLmNsb3NlT25DbGljazp0aGlzLl9tYXAub3B0aW9ucy5jbG9zZVBvcHVwT25DbGljaykmJih0LnByZWNsaWNrPXRoaXMuX2Nsb3NlKSx0aGlzLm9wdGlvbnMua2VlcEluVmlldyYmKHQubW92ZWVuZD10aGlzLl9hZGp1c3RQYW4pLHR9LF9jbG9zZTpmdW5jdGlvbigpe3RoaXMuX21hcCYmdGhpcy5fbWFwLmNsb3NlUG9wdXAodGhpcyl9LF9pbml0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJsZWFmbGV0LXBvcHVwXCIsaT10aGlzLl9jb250YWluZXI9RyhcImRpdlwiLHQrXCIgXCIrKHRoaXMub3B0aW9ucy5jbGFzc05hbWV8fFwiXCIpK1wiIGxlYWZsZXQtem9vbS1hbmltYXRlZFwiKSxlPXRoaXMuX3dyYXBwZXI9RyhcImRpdlwiLHQrXCItY29udGVudC13cmFwcGVyXCIsaSk7aWYodGhpcy5fY29udGVudE5vZGU9RyhcImRpdlwiLHQrXCItY29udGVudFwiLGUpLHd0KGUpLHh0KHRoaXMuX2NvbnRlbnROb2RlKSxtdChlLFwiY29udGV4dG1lbnVcIix5dCksdGhpcy5fdGlwQ29udGFpbmVyPUcoXCJkaXZcIix0K1wiLXRpcC1jb250YWluZXJcIixpKSx0aGlzLl90aXA9RyhcImRpdlwiLHQrXCItdGlwXCIsdGhpcy5fdGlwQ29udGFpbmVyKSx0aGlzLm9wdGlvbnMuY2xvc2VCdXR0b24pe3ZhciBuPXRoaXMuX2Nsb3NlQnV0dG9uPUcoXCJhXCIsdCtcIi1jbG9zZS1idXR0b25cIixpKTtuLmhyZWY9XCIjY2xvc2VcIixuLmlubmVySFRNTD1cIiYjMjE1O1wiLG10KG4sXCJjbGlja1wiLHRoaXMuX29uQ2xvc2VCdXR0b25DbGljayx0aGlzKX19LF91cGRhdGVMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250ZW50Tm9kZSxpPXQuc3R5bGU7aS53aWR0aD1cIlwiLGkud2hpdGVTcGFjZT1cIm5vd3JhcFwiO3ZhciBlPXQub2Zmc2V0V2lkdGg7ZT1NYXRoLm1pbihlLHRoaXMub3B0aW9ucy5tYXhXaWR0aCksZT1NYXRoLm1heChlLHRoaXMub3B0aW9ucy5taW5XaWR0aCksaS53aWR0aD1lKzErXCJweFwiLGkud2hpdGVTcGFjZT1cIlwiLGkuaGVpZ2h0PVwiXCI7dmFyIG49dC5vZmZzZXRIZWlnaHQsbz10aGlzLm9wdGlvbnMubWF4SGVpZ2h0O28mJm4+bz8oaS5oZWlnaHQ9bytcInB4XCIsUSh0LFwibGVhZmxldC1wb3B1cC1zY3JvbGxlZFwiKSk6dHQodCxcImxlYWZsZXQtcG9wdXAtc2Nyb2xsZWRcIiksdGhpcy5fY29udGFpbmVyV2lkdGg9dGhpcy5fY29udGFpbmVyLm9mZnNldFdpZHRofSxfYW5pbWF0ZVpvb206ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fbWFwLl9sYXRMbmdUb05ld0xheWVyUG9pbnQodGhpcy5fbGF0bG5nLHQuem9vbSx0LmNlbnRlciksZT10aGlzLl9nZXRBbmNob3IoKTthdCh0aGlzLl9jb250YWluZXIsaS5hZGQoZSkpfSxfYWRqdXN0UGFuOmZ1bmN0aW9uKCl7aWYoISghdGhpcy5vcHRpb25zLmF1dG9QYW58fHRoaXMuX21hcC5fcGFuQW5pbSYmdGhpcy5fbWFwLl9wYW5BbmltLl9pblByb2dyZXNzKSl7dmFyIHQ9dGhpcy5fbWFwLGk9cGFyc2VJbnQocSh0aGlzLl9jb250YWluZXIsXCJtYXJnaW5Cb3R0b21cIiksMTApfHwwLGU9dGhpcy5fY29udGFpbmVyLm9mZnNldEhlaWdodCtpLG49dGhpcy5fY29udGFpbmVyV2lkdGgsbz1uZXcgeCh0aGlzLl9jb250YWluZXJMZWZ0LC1lLXRoaXMuX2NvbnRhaW5lckJvdHRvbSk7by5fYWRkKGh0KHRoaXMuX2NvbnRhaW5lcikpO3ZhciBzPXQubGF5ZXJQb2ludFRvQ29udGFpbmVyUG9pbnQobykscj13KHRoaXMub3B0aW9ucy5hdXRvUGFuUGFkZGluZyksYT13KHRoaXMub3B0aW9ucy5hdXRvUGFuUGFkZGluZ1RvcExlZnR8fHIpLGg9dyh0aGlzLm9wdGlvbnMuYXV0b1BhblBhZGRpbmdCb3R0b21SaWdodHx8ciksdT10LmdldFNpemUoKSxsPTAsYz0wO3MueCtuK2gueD51LngmJihsPXMueCtuLXUueCtoLngpLHMueC1sLWEueDwwJiYobD1zLngtYS54KSxzLnkrZStoLnk+dS55JiYoYz1zLnkrZS11LnkraC55KSxzLnktYy1hLnk8MCYmKGM9cy55LWEueSksKGx8fGMpJiZ0LmZpcmUoXCJhdXRvcGFuc3RhcnRcIikucGFuQnkoW2wsY10pfX0sX29uQ2xvc2VCdXR0b25DbGljazpmdW5jdGlvbih0KXt0aGlzLl9jbG9zZSgpLEx0KHQpfSxfZ2V0QW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcy5fc291cmNlJiZ0aGlzLl9zb3VyY2UuX2dldFBvcHVwQW5jaG9yP3RoaXMuX3NvdXJjZS5fZ2V0UG9wdXBBbmNob3IoKTpbMCwwXSl9fSk7YmUubWVyZ2VPcHRpb25zKHtjbG9zZVBvcHVwT25DbGljazohMH0pLGJlLmluY2x1ZGUoe29wZW5Qb3B1cDpmdW5jdGlvbih0LGksZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBjbnx8KHQ9bmV3IGNuKGUpLnNldENvbnRlbnQodCkpLGkmJnQuc2V0TGF0TG5nKGkpLHRoaXMuaGFzTGF5ZXIodCk/dGhpczoodGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLm9wdGlvbnMuYXV0b0Nsb3NlJiZ0aGlzLmNsb3NlUG9wdXAoKSx0aGlzLl9wb3B1cD10LHRoaXMuYWRkTGF5ZXIodCkpfSxjbG9zZVBvcHVwOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0IT09dGhpcy5fcG9wdXB8fCh0PXRoaXMuX3BvcHVwLHRoaXMuX3BvcHVwPW51bGwpLHQmJnRoaXMucmVtb3ZlTGF5ZXIodCksdGhpc319KSxxZS5pbmNsdWRlKHtiaW5kUG9wdXA6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdCBpbnN0YW5jZW9mIGNuPyhsKHQsaSksdGhpcy5fcG9wdXA9dCx0Ll9zb3VyY2U9dGhpcyk6KHRoaXMuX3BvcHVwJiYhaXx8KHRoaXMuX3BvcHVwPW5ldyBjbihpLHRoaXMpKSx0aGlzLl9wb3B1cC5zZXRDb250ZW50KHQpKSx0aGlzLl9wb3B1cEhhbmRsZXJzQWRkZWR8fCh0aGlzLm9uKHtjbGljazp0aGlzLl9vcGVuUG9wdXAsa2V5cHJlc3M6dGhpcy5fb25LZXlQcmVzcyxyZW1vdmU6dGhpcy5jbG9zZVBvcHVwLG1vdmU6dGhpcy5fbW92ZVBvcHVwfSksdGhpcy5fcG9wdXBIYW5kbGVyc0FkZGVkPSEwKSx0aGlzfSx1bmJpbmRQb3B1cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3B1cCYmKHRoaXMub2ZmKHtjbGljazp0aGlzLl9vcGVuUG9wdXAsa2V5cHJlc3M6dGhpcy5fb25LZXlQcmVzcyxyZW1vdmU6dGhpcy5jbG9zZVBvcHVwLG1vdmU6dGhpcy5fbW92ZVBvcHVwfSksdGhpcy5fcG9wdXBIYW5kbGVyc0FkZGVkPSExLHRoaXMuX3BvcHVwPW51bGwpLHRoaXN9LG9wZW5Qb3B1cDpmdW5jdGlvbih0LGkpe2lmKHQgaW5zdGFuY2VvZiBxZXx8KGk9dCx0PXRoaXMpLHQgaW5zdGFuY2VvZiBLZSlmb3IodmFyIGUgaW4gdGhpcy5fbGF5ZXJzKXt0PXRoaXMuX2xheWVyc1tlXTticmVha31yZXR1cm4gaXx8KGk9dC5nZXRDZW50ZXI/dC5nZXRDZW50ZXIoKTp0LmdldExhdExuZygpKSx0aGlzLl9wb3B1cCYmdGhpcy5fbWFwJiYodGhpcy5fcG9wdXAuX3NvdXJjZT10LHRoaXMuX3BvcHVwLnVwZGF0ZSgpLHRoaXMuX21hcC5vcGVuUG9wdXAodGhpcy5fcG9wdXAsaSkpLHRoaXN9LGNsb3NlUG9wdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLl9jbG9zZSgpLHRoaXN9LHRvZ2dsZVBvcHVwOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wb3B1cCYmKHRoaXMuX3BvcHVwLl9tYXA/dGhpcy5jbG9zZVBvcHVwKCk6dGhpcy5vcGVuUG9wdXAodCkpLHRoaXN9LGlzUG9wdXBPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9wb3B1cCYmdGhpcy5fcG9wdXAuaXNPcGVuKCl9LHNldFBvcHVwQ29udGVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLnNldENvbnRlbnQodCksdGhpc30sZ2V0UG9wdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9wdXB9LF9vcGVuUG9wdXA6ZnVuY3Rpb24odCl7dmFyIGk9dC5sYXllcnx8dC50YXJnZXQ7dGhpcy5fcG9wdXAmJnRoaXMuX21hcCYmKEx0KHQpLGkgaW5zdGFuY2VvZiBRZT90aGlzLm9wZW5Qb3B1cCh0LmxheWVyfHx0LnRhcmdldCx0LmxhdGxuZyk6dGhpcy5fbWFwLmhhc0xheWVyKHRoaXMuX3BvcHVwKSYmdGhpcy5fcG9wdXAuX3NvdXJjZT09PWk/dGhpcy5jbG9zZVBvcHVwKCk6dGhpcy5vcGVuUG9wdXAoaSx0LmxhdGxuZykpfSxfbW92ZVBvcHVwOmZ1bmN0aW9uKHQpe3RoaXMuX3BvcHVwLnNldExhdExuZyh0LmxhdGxuZyl9LF9vbktleVByZXNzOmZ1bmN0aW9uKHQpezEzPT09dC5vcmlnaW5hbEV2ZW50LmtleUNvZGUmJnRoaXMuX29wZW5Qb3B1cCh0KX19KTt2YXIgX249bG4uZXh0ZW5kKHtvcHRpb25zOntwYW5lOlwidG9vbHRpcFBhbmVcIixvZmZzZXQ6WzAsMF0sZGlyZWN0aW9uOlwiYXV0b1wiLHBlcm1hbmVudDohMSxzdGlja3k6ITEsaW50ZXJhY3RpdmU6ITEsb3BhY2l0eTouOX0sb25BZGQ6ZnVuY3Rpb24odCl7bG4ucHJvdG90eXBlLm9uQWRkLmNhbGwodGhpcyx0KSx0aGlzLnNldE9wYWNpdHkodGhpcy5vcHRpb25zLm9wYWNpdHkpLHQuZmlyZShcInRvb2x0aXBvcGVuXCIse3Rvb2x0aXA6dGhpc30pLHRoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLmZpcmUoXCJ0b29sdGlwb3BlblwiLHt0b29sdGlwOnRoaXN9LCEwKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7bG4ucHJvdG90eXBlLm9uUmVtb3ZlLmNhbGwodGhpcyx0KSx0LmZpcmUoXCJ0b29sdGlwY2xvc2VcIix7dG9vbHRpcDp0aGlzfSksdGhpcy5fc291cmNlJiZ0aGlzLl9zb3VyY2UuZmlyZShcInRvb2x0aXBjbG9zZVwiLHt0b29sdGlwOnRoaXN9LCEwKX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9bG4ucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybiBxaSYmIXRoaXMub3B0aW9ucy5wZXJtYW5lbnQmJih0LnByZWNsaWNrPXRoaXMuX2Nsb3NlKSx0fSxfY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLl9tYXAmJnRoaXMuX21hcC5jbG9zZVRvb2x0aXAodGhpcyl9LF9pbml0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJsZWFmbGV0LXRvb2x0aXAgXCIrKHRoaXMub3B0aW9ucy5jbGFzc05hbWV8fFwiXCIpK1wiIGxlYWZsZXQtem9vbS1cIisodGhpcy5fem9vbUFuaW1hdGVkP1wiYW5pbWF0ZWRcIjpcImhpZGVcIik7dGhpcy5fY29udGVudE5vZGU9dGhpcy5fY29udGFpbmVyPUcoXCJkaXZcIix0KX0sX3VwZGF0ZUxheW91dDpmdW5jdGlvbigpe30sX2FkanVzdFBhbjpmdW5jdGlvbigpe30sX3NldFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcCxlPXRoaXMuX2NvbnRhaW5lcixuPWkubGF0TG5nVG9Db250YWluZXJQb2ludChpLmdldENlbnRlcigpKSxvPWkubGF5ZXJQb2ludFRvQ29udGFpbmVyUG9pbnQodCkscz10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLHI9ZS5vZmZzZXRXaWR0aCxhPWUub2Zmc2V0SGVpZ2h0LGg9dyh0aGlzLm9wdGlvbnMub2Zmc2V0KSx1PXRoaXMuX2dldEFuY2hvcigpO1widG9wXCI9PT1zP3Q9dC5hZGQodygtci8yK2gueCwtYStoLnkrdS55LCEwKSk6XCJib3R0b21cIj09PXM/dD10LnN1YnRyYWN0KHcoci8yLWgueCwtaC55LCEwKSk6XCJjZW50ZXJcIj09PXM/dD10LnN1YnRyYWN0KHcoci8yK2gueCxhLzItdS55K2gueSwhMCkpOlwicmlnaHRcIj09PXN8fFwiYXV0b1wiPT09cyYmby54PG4ueD8ocz1cInJpZ2h0XCIsdD10LmFkZCh3KGgueCt1LngsdS55LWEvMitoLnksITApKSk6KHM9XCJsZWZ0XCIsdD10LnN1YnRyYWN0KHcocit1LngtaC54LGEvMi11LnktaC55LCEwKSkpLHR0KGUsXCJsZWFmbGV0LXRvb2x0aXAtcmlnaHRcIiksdHQoZSxcImxlYWZsZXQtdG9vbHRpcC1sZWZ0XCIpLHR0KGUsXCJsZWFmbGV0LXRvb2x0aXAtdG9wXCIpLHR0KGUsXCJsZWFmbGV0LXRvb2x0aXAtYm90dG9tXCIpLFEoZSxcImxlYWZsZXQtdG9vbHRpcC1cIitzKSxhdChlLHQpfSxfdXBkYXRlUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZyk7dGhpcy5fc2V0UG9zaXRpb24odCl9LHNldE9wYWNpdHk6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zLm9wYWNpdHk9dCx0aGlzLl9jb250YWluZXImJm50KHRoaXMuX2NvbnRhaW5lcix0KX0sX2FuaW1hdGVab29tOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcC5fbGF0TG5nVG9OZXdMYXllclBvaW50KHRoaXMuX2xhdGxuZyx0Lnpvb20sdC5jZW50ZXIpO3RoaXMuX3NldFBvc2l0aW9uKGkpfSxfZ2V0QW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcy5fc291cmNlJiZ0aGlzLl9zb3VyY2UuX2dldFRvb2x0aXBBbmNob3ImJiF0aGlzLm9wdGlvbnMuc3RpY2t5P3RoaXMuX3NvdXJjZS5fZ2V0VG9vbHRpcEFuY2hvcigpOlswLDBdKX19KTtiZS5pbmNsdWRlKHtvcGVuVG9vbHRpcDpmdW5jdGlvbih0LGksZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBfbnx8KHQ9bmV3IF9uKGUpLnNldENvbnRlbnQodCkpLGkmJnQuc2V0TGF0TG5nKGkpLHRoaXMuaGFzTGF5ZXIodCk/dGhpczp0aGlzLmFkZExheWVyKHQpfSxjbG9zZVRvb2x0aXA6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMucmVtb3ZlTGF5ZXIodCksdGhpc319KSxxZS5pbmNsdWRlKHtiaW5kVG9vbHRpcDpmdW5jdGlvbih0LGkpe3JldHVybiB0IGluc3RhbmNlb2YgX24/KGwodCxpKSx0aGlzLl90b29sdGlwPXQsdC5fc291cmNlPXRoaXMpOih0aGlzLl90b29sdGlwJiYhaXx8KHRoaXMuX3Rvb2x0aXA9bmV3IF9uKGksdGhpcykpLHRoaXMuX3Rvb2x0aXAuc2V0Q29udGVudCh0KSksdGhpcy5faW5pdFRvb2x0aXBJbnRlcmFjdGlvbnMoKSx0aGlzLl90b29sdGlwLm9wdGlvbnMucGVybWFuZW50JiZ0aGlzLl9tYXAmJnRoaXMuX21hcC5oYXNMYXllcih0aGlzKSYmdGhpcy5vcGVuVG9vbHRpcCgpLHRoaXN9LHVuYmluZFRvb2x0aXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9vbHRpcCYmKHRoaXMuX2luaXRUb29sdGlwSW50ZXJhY3Rpb25zKCEwKSx0aGlzLmNsb3NlVG9vbHRpcCgpLHRoaXMuX3Rvb2x0aXA9bnVsbCksdGhpc30sX2luaXRUb29sdGlwSW50ZXJhY3Rpb25zOmZ1bmN0aW9uKHQpe2lmKHR8fCF0aGlzLl90b29sdGlwSGFuZGxlcnNBZGRlZCl7dmFyIGk9dD9cIm9mZlwiOlwib25cIixlPXtyZW1vdmU6dGhpcy5jbG9zZVRvb2x0aXAsbW92ZTp0aGlzLl9tb3ZlVG9vbHRpcH07dGhpcy5fdG9vbHRpcC5vcHRpb25zLnBlcm1hbmVudD9lLmFkZD10aGlzLl9vcGVuVG9vbHRpcDooZS5tb3VzZW92ZXI9dGhpcy5fb3BlblRvb2x0aXAsZS5tb3VzZW91dD10aGlzLmNsb3NlVG9vbHRpcCx0aGlzLl90b29sdGlwLm9wdGlvbnMuc3RpY2t5JiYoZS5tb3VzZW1vdmU9dGhpcy5fbW92ZVRvb2x0aXApLHFpJiYoZS5jbGljaz10aGlzLl9vcGVuVG9vbHRpcCkpLHRoaXNbaV0oZSksdGhpcy5fdG9vbHRpcEhhbmRsZXJzQWRkZWQ9IXR9fSxvcGVuVG9vbHRpcDpmdW5jdGlvbih0LGkpe2lmKHQgaW5zdGFuY2VvZiBxZXx8KGk9dCx0PXRoaXMpLHQgaW5zdGFuY2VvZiBLZSlmb3IodmFyIGUgaW4gdGhpcy5fbGF5ZXJzKXt0PXRoaXMuX2xheWVyc1tlXTticmVha31yZXR1cm4gaXx8KGk9dC5nZXRDZW50ZXI/dC5nZXRDZW50ZXIoKTp0LmdldExhdExuZygpKSx0aGlzLl90b29sdGlwJiZ0aGlzLl9tYXAmJih0aGlzLl90b29sdGlwLl9zb3VyY2U9dCx0aGlzLl90b29sdGlwLnVwZGF0ZSgpLHRoaXMuX21hcC5vcGVuVG9vbHRpcCh0aGlzLl90b29sdGlwLGkpLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5pbnRlcmFjdGl2ZSYmdGhpcy5fdG9vbHRpcC5fY29udGFpbmVyJiYoUSh0aGlzLl90b29sdGlwLl9jb250YWluZXIsXCJsZWFmbGV0LWNsaWNrYWJsZVwiKSx0aGlzLmFkZEludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX3Rvb2x0aXAuX2NvbnRhaW5lcikpKSx0aGlzfSxjbG9zZVRvb2x0aXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9vbHRpcCYmKHRoaXMuX3Rvb2x0aXAuX2Nsb3NlKCksdGhpcy5fdG9vbHRpcC5vcHRpb25zLmludGVyYWN0aXZlJiZ0aGlzLl90b29sdGlwLl9jb250YWluZXImJih0dCh0aGlzLl90b29sdGlwLl9jb250YWluZXIsXCJsZWFmbGV0LWNsaWNrYWJsZVwiKSx0aGlzLnJlbW92ZUludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX3Rvb2x0aXAuX2NvbnRhaW5lcikpKSx0aGlzfSx0b2dnbGVUb29sdGlwOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90b29sdGlwJiYodGhpcy5fdG9vbHRpcC5fbWFwP3RoaXMuY2xvc2VUb29sdGlwKCk6dGhpcy5vcGVuVG9vbHRpcCh0KSksdGhpc30saXNUb29sdGlwT3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sdGlwLmlzT3BlbigpfSxzZXRUb29sdGlwQ29udGVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdG9vbHRpcCYmdGhpcy5fdG9vbHRpcC5zZXRDb250ZW50KHQpLHRoaXN9LGdldFRvb2x0aXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9vbHRpcH0sX29wZW5Ub29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBpPXQubGF5ZXJ8fHQudGFyZ2V0O3RoaXMuX3Rvb2x0aXAmJnRoaXMuX21hcCYmdGhpcy5vcGVuVG9vbHRpcChpLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5zdGlja3k/dC5sYXRsbmc6dm9pZCAwKX0sX21vdmVUb29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBpLGUsbj10LmxhdGxuZzt0aGlzLl90b29sdGlwLm9wdGlvbnMuc3RpY2t5JiZ0Lm9yaWdpbmFsRXZlbnQmJihpPXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0Lm9yaWdpbmFsRXZlbnQpLGU9dGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KGkpLG49dGhpcy5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhlKSksdGhpcy5fdG9vbHRpcC5zZXRMYXRMbmcobil9fSk7dmFyIGRuPVllLmV4dGVuZCh7b3B0aW9uczp7aWNvblNpemU6WzEyLDEyXSxodG1sOiExLGJnUG9zOm51bGwsY2xhc3NOYW1lOlwibGVhZmxldC1kaXYtaWNvblwifSxjcmVhdGVJY29uOmZ1bmN0aW9uKHQpe3ZhciBpPXQmJlwiRElWXCI9PT10LnRhZ05hbWU/dDpkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGU9dGhpcy5vcHRpb25zO2lmKGkuaW5uZXJIVE1MPSExIT09ZS5odG1sP2UuaHRtbDpcIlwiLGUuYmdQb3Mpe3ZhciBuPXcoZS5iZ1Bvcyk7aS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb249LW4ueCtcInB4IFwiKy1uLnkrXCJweFwifXJldHVybiB0aGlzLl9zZXRJY29uU3R5bGVzKGksXCJpY29uXCIpLGl9LGNyZWF0ZVNoYWRvdzpmdW5jdGlvbigpe3JldHVybiBudWxsfX0pO1llLkRlZmF1bHQ9WGU7dmFyIHBuPXFlLmV4dGVuZCh7b3B0aW9uczp7dGlsZVNpemU6MjU2LG9wYWNpdHk6MSx1cGRhdGVXaGVuSWRsZTpXaSx1cGRhdGVXaGVuWm9vbWluZzohMCx1cGRhdGVJbnRlcnZhbDoyMDAsekluZGV4OjEsYm91bmRzOm51bGwsbWluWm9vbTowLG1heFpvb206dm9pZCAwLG1heE5hdGl2ZVpvb206dm9pZCAwLG1pbk5hdGl2ZVpvb206dm9pZCAwLG5vV3JhcDohMSxwYW5lOlwidGlsZVBhbmVcIixjbGFzc05hbWU6XCJcIixrZWVwQnVmZmVyOjJ9LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7bCh0aGlzLHQpfSxvbkFkZDpmdW5jdGlvbigpe3RoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl9sZXZlbHM9e30sdGhpcy5fdGlsZXM9e30sdGhpcy5fcmVzZXRWaWV3KCksdGhpcy5fdXBkYXRlKCl9LGJlZm9yZUFkZDpmdW5jdGlvbih0KXt0Ll9hZGRab29tTGltaXQodGhpcyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuX3JlbW92ZUFsbFRpbGVzKCksSyh0aGlzLl9jb250YWluZXIpLHQuX3JlbW92ZVpvb21MaW1pdCh0aGlzKSx0aGlzLl9jb250YWluZXI9bnVsbCx0aGlzLl90aWxlWm9vbT12b2lkIDB9LGJyaW5nVG9Gcm9udDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJihYKHRoaXMuX2NvbnRhaW5lciksdGhpcy5fc2V0QXV0b1pJbmRleChNYXRoLm1heCkpLHRoaXN9LGJyaW5nVG9CYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmKEoodGhpcy5fY29udGFpbmVyKSx0aGlzLl9zZXRBdXRvWkluZGV4KE1hdGgubWluKSksdGhpc30sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn0sc2V0T3BhY2l0eTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLm9wYWNpdHk9dCx0aGlzLl91cGRhdGVPcGFjaXR5KCksdGhpc30sc2V0WkluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuekluZGV4PXQsdGhpcy5fdXBkYXRlWkluZGV4KCksdGhpc30saXNMb2FkaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRpbmd9LHJlZHJhdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJih0aGlzLl9yZW1vdmVBbGxUaWxlcygpLHRoaXMuX3VwZGF0ZSgpKSx0aGlzfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD17dmlld3ByZXJlc2V0OnRoaXMuX2ludmFsaWRhdGVBbGwsdmlld3Jlc2V0OnRoaXMuX3Jlc2V0Vmlldyx6b29tOnRoaXMuX3Jlc2V0Vmlldyxtb3ZlZW5kOnRoaXMuX29uTW92ZUVuZH07cmV0dXJuIHRoaXMub3B0aW9ucy51cGRhdGVXaGVuSWRsZXx8KHRoaXMuX29uTW92ZXx8KHRoaXMuX29uTW92ZT1vKHRoaXMuX29uTW92ZUVuZCx0aGlzLm9wdGlvbnMudXBkYXRlSW50ZXJ2YWwsdGhpcykpLHQubW92ZT10aGlzLl9vbk1vdmUpLHRoaXMuX3pvb21BbmltYXRlZCYmKHQuem9vbWFuaW09dGhpcy5fYW5pbWF0ZVpvb20pLHR9LGNyZWF0ZVRpbGU6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKX0sZ2V0VGlsZVNpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMudGlsZVNpemU7cmV0dXJuIHQgaW5zdGFuY2VvZiB4P3Q6bmV3IHgodCx0KX0sX3VwZGF0ZVpJbmRleDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lciYmdm9pZCAwIT09dGhpcy5vcHRpb25zLnpJbmRleCYmbnVsbCE9PXRoaXMub3B0aW9ucy56SW5kZXgmJih0aGlzLl9jb250YWluZXIuc3R5bGUuekluZGV4PXRoaXMub3B0aW9ucy56SW5kZXgpfSxfc2V0QXV0b1pJbmRleDpmdW5jdGlvbih0KXtmb3IodmFyIGksZT10aGlzLmdldFBhbmUoKS5jaGlsZHJlbixuPS10KC0xLzAsMS8wKSxvPTAscz1lLmxlbmd0aDtvPHM7bysrKWk9ZVtvXS5zdHlsZS56SW5kZXgsZVtvXSE9PXRoaXMuX2NvbnRhaW5lciYmaSYmKG49dChuLCtpKSk7aXNGaW5pdGUobikmJih0aGlzLm9wdGlvbnMuekluZGV4PW4rdCgtMSwxKSx0aGlzLl91cGRhdGVaSW5kZXgoKSl9LF91cGRhdGVPcGFjaXR5OmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwJiYhTGkpe250KHRoaXMuX2NvbnRhaW5lcix0aGlzLm9wdGlvbnMub3BhY2l0eSk7dmFyIHQ9K25ldyBEYXRlLGk9ITEsZT0hMTtmb3IodmFyIG4gaW4gdGhpcy5fdGlsZXMpe3ZhciBvPXRoaXMuX3RpbGVzW25dO2lmKG8uY3VycmVudCYmby5sb2FkZWQpe3ZhciBzPU1hdGgubWluKDEsKHQtby5sb2FkZWQpLzIwMCk7bnQoby5lbCxzKSxzPDE/aT0hMDooby5hY3RpdmU/ZT0hMDp0aGlzLl9vbk9wYXF1ZVRpbGUobyksby5hY3RpdmU9ITApfX1lJiYhdGhpcy5fbm9QcnVuZSYmdGhpcy5fcHJ1bmVUaWxlcygpLGkmJihnKHRoaXMuX2ZhZGVGcmFtZSksdGhpcy5fZmFkZUZyYW1lPWYodGhpcy5fdXBkYXRlT3BhY2l0eSx0aGlzKSl9fSxfb25PcGFxdWVUaWxlOnIsX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXJ8fCh0aGlzLl9jb250YWluZXI9RyhcImRpdlwiLFwibGVhZmxldC1sYXllciBcIisodGhpcy5vcHRpb25zLmNsYXNzTmFtZXx8XCJcIikpLHRoaXMuX3VwZGF0ZVpJbmRleCgpLHRoaXMub3B0aW9ucy5vcGFjaXR5PDEmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSx0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpKX0sX3VwZGF0ZUxldmVsczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3RpbGVab29tLGk9dGhpcy5vcHRpb25zLm1heFpvb207aWYodm9pZCAwIT09dCl7Zm9yKHZhciBlIGluIHRoaXMuX2xldmVscyl0aGlzLl9sZXZlbHNbZV0uZWwuY2hpbGRyZW4ubGVuZ3RofHxlPT09dD8odGhpcy5fbGV2ZWxzW2VdLmVsLnN0eWxlLnpJbmRleD1pLU1hdGguYWJzKHQtZSksdGhpcy5fb25VcGRhdGVMZXZlbChlKSk6KEsodGhpcy5fbGV2ZWxzW2VdLmVsKSx0aGlzLl9yZW1vdmVUaWxlc0F0Wm9vbShlKSx0aGlzLl9vblJlbW92ZUxldmVsKGUpLGRlbGV0ZSB0aGlzLl9sZXZlbHNbZV0pO3ZhciBuPXRoaXMuX2xldmVsc1t0XSxvPXRoaXMuX21hcDtyZXR1cm4gbnx8KChuPXRoaXMuX2xldmVsc1t0XT17fSkuZWw9RyhcImRpdlwiLFwibGVhZmxldC10aWxlLWNvbnRhaW5lciBsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIix0aGlzLl9jb250YWluZXIpLG4uZWwuc3R5bGUuekluZGV4PWksbi5vcmlnaW49by5wcm9qZWN0KG8udW5wcm9qZWN0KG8uZ2V0UGl4ZWxPcmlnaW4oKSksdCkucm91bmQoKSxuLnpvb209dCx0aGlzLl9zZXRab29tVHJhbnNmb3JtKG4sby5nZXRDZW50ZXIoKSxvLmdldFpvb20oKSksbi5lbC5vZmZzZXRXaWR0aCx0aGlzLl9vbkNyZWF0ZUxldmVsKG4pKSx0aGlzLl9sZXZlbD1uLG59fSxfb25VcGRhdGVMZXZlbDpyLF9vblJlbW92ZUxldmVsOnIsX29uQ3JlYXRlTGV2ZWw6cixfcHJ1bmVUaWxlczpmdW5jdGlvbigpe2lmKHRoaXMuX21hcCl7dmFyIHQsaSxlPXRoaXMuX21hcC5nZXRab29tKCk7aWYoZT50aGlzLm9wdGlvbnMubWF4Wm9vbXx8ZTx0aGlzLm9wdGlvbnMubWluWm9vbSl0aGlzLl9yZW1vdmVBbGxUaWxlcygpO2Vsc2V7Zm9yKHQgaW4gdGhpcy5fdGlsZXMpKGk9dGhpcy5fdGlsZXNbdF0pLnJldGFpbj1pLmN1cnJlbnQ7Zm9yKHQgaW4gdGhpcy5fdGlsZXMpaWYoKGk9dGhpcy5fdGlsZXNbdF0pLmN1cnJlbnQmJiFpLmFjdGl2ZSl7dmFyIG49aS5jb29yZHM7dGhpcy5fcmV0YWluUGFyZW50KG4ueCxuLnksbi56LG4uei01KXx8dGhpcy5fcmV0YWluQ2hpbGRyZW4obi54LG4ueSxuLnosbi56KzIpfWZvcih0IGluIHRoaXMuX3RpbGVzKXRoaXMuX3RpbGVzW3RdLnJldGFpbnx8dGhpcy5fcmVtb3ZlVGlsZSh0KX19fSxfcmVtb3ZlVGlsZXNBdFpvb206ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHRoaXMuX3RpbGVzKXRoaXMuX3RpbGVzW2ldLmNvb3Jkcy56PT09dCYmdGhpcy5fcmVtb3ZlVGlsZShpKX0sX3JlbW92ZUFsbFRpbGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX3RpbGVzKXRoaXMuX3JlbW92ZVRpbGUodCl9LF9pbnZhbGlkYXRlQWxsOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2xldmVscylLKHRoaXMuX2xldmVsc1t0XS5lbCksdGhpcy5fb25SZW1vdmVMZXZlbCh0KSxkZWxldGUgdGhpcy5fbGV2ZWxzW3RdO3RoaXMuX3JlbW92ZUFsbFRpbGVzKCksdGhpcy5fdGlsZVpvb209dm9pZCAwfSxfcmV0YWluUGFyZW50OmZ1bmN0aW9uKHQsaSxlLG4pe3ZhciBvPU1hdGguZmxvb3IodC8yKSxzPU1hdGguZmxvb3IoaS8yKSxyPWUtMSxhPW5ldyB4KCtvLCtzKTthLno9K3I7dmFyIGg9dGhpcy5fdGlsZUNvb3Jkc1RvS2V5KGEpLHU9dGhpcy5fdGlsZXNbaF07cmV0dXJuIHUmJnUuYWN0aXZlPyh1LnJldGFpbj0hMCwhMCk6KHUmJnUubG9hZGVkJiYodS5yZXRhaW49ITApLHI+biYmdGhpcy5fcmV0YWluUGFyZW50KG8scyxyLG4pKX0sX3JldGFpbkNoaWxkcmVuOmZ1bmN0aW9uKHQsaSxlLG4pe2Zvcih2YXIgbz0yKnQ7bzwyKnQrMjtvKyspZm9yKHZhciBzPTIqaTtzPDIqaSsyO3MrKyl7dmFyIHI9bmV3IHgobyxzKTtyLno9ZSsxO3ZhciBhPXRoaXMuX3RpbGVDb29yZHNUb0tleShyKSxoPXRoaXMuX3RpbGVzW2FdO2gmJmguYWN0aXZlP2gucmV0YWluPSEwOihoJiZoLmxvYWRlZCYmKGgucmV0YWluPSEwKSxlKzE8biYmdGhpcy5fcmV0YWluQ2hpbGRyZW4obyxzLGUrMSxuKSl9fSxfcmVzZXRWaWV3OmZ1bmN0aW9uKHQpe3ZhciBpPXQmJih0LnBpbmNofHx0LmZseVRvKTt0aGlzLl9zZXRWaWV3KHRoaXMuX21hcC5nZXRDZW50ZXIoKSx0aGlzLl9tYXAuZ2V0Wm9vbSgpLGksaSl9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt0aGlzLl9zZXRWaWV3KHQuY2VudGVyLHQuem9vbSwhMCx0Lm5vVXBkYXRlKX0sX2NsYW1wWm9vbTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnM7cmV0dXJuIHZvaWQgMCE9PWkubWluTmF0aXZlWm9vbSYmdDxpLm1pbk5hdGl2ZVpvb20/aS5taW5OYXRpdmVab29tOnZvaWQgMCE9PWkubWF4TmF0aXZlWm9vbSYmaS5tYXhOYXRpdmVab29tPHQ/aS5tYXhOYXRpdmVab29tOnR9LF9zZXRWaWV3OmZ1bmN0aW9uKHQsaSxlLG4pe3ZhciBvPXRoaXMuX2NsYW1wWm9vbShNYXRoLnJvdW5kKGkpKTsodm9pZCAwIT09dGhpcy5vcHRpb25zLm1heFpvb20mJm8+dGhpcy5vcHRpb25zLm1heFpvb218fHZvaWQgMCE9PXRoaXMub3B0aW9ucy5taW5ab29tJiZvPHRoaXMub3B0aW9ucy5taW5ab29tKSYmKG89dm9pZCAwKTt2YXIgcz10aGlzLm9wdGlvbnMudXBkYXRlV2hlblpvb21pbmcmJm8hPT10aGlzLl90aWxlWm9vbTtuJiYhc3x8KHRoaXMuX3RpbGVab29tPW8sdGhpcy5fYWJvcnRMb2FkaW5nJiZ0aGlzLl9hYm9ydExvYWRpbmcoKSx0aGlzLl91cGRhdGVMZXZlbHMoKSx0aGlzLl9yZXNldEdyaWQoKSx2b2lkIDAhPT1vJiZ0aGlzLl91cGRhdGUodCksZXx8dGhpcy5fcHJ1bmVUaWxlcygpLHRoaXMuX25vUHJ1bmU9ISFlKSx0aGlzLl9zZXRab29tVHJhbnNmb3Jtcyh0LGkpfSxfc2V0Wm9vbVRyYW5zZm9ybXM6ZnVuY3Rpb24odCxpKXtmb3IodmFyIGUgaW4gdGhpcy5fbGV2ZWxzKXRoaXMuX3NldFpvb21UcmFuc2Zvcm0odGhpcy5fbGV2ZWxzW2VdLHQsaSl9LF9zZXRab29tVHJhbnNmb3JtOmZ1bmN0aW9uKHQsaSxlKXt2YXIgbj10aGlzLl9tYXAuZ2V0Wm9vbVNjYWxlKGUsdC56b29tKSxvPXQub3JpZ2luLm11bHRpcGx5Qnkobikuc3VidHJhY3QodGhpcy5fbWFwLl9nZXROZXdQaXhlbE9yaWdpbihpLGUpKS5yb3VuZCgpO2ppP3J0KHQuZWwsbyxuKTphdCh0LmVsLG8pfSxfcmVzZXRHcmlkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGk9dC5vcHRpb25zLmNycyxlPXRoaXMuX3RpbGVTaXplPXRoaXMuZ2V0VGlsZVNpemUoKSxuPXRoaXMuX3RpbGVab29tLG89dGhpcy5fbWFwLmdldFBpeGVsV29ybGRCb3VuZHModGhpcy5fdGlsZVpvb20pO28mJih0aGlzLl9nbG9iYWxUaWxlUmFuZ2U9dGhpcy5fcHhCb3VuZHNUb1RpbGVSYW5nZShvKSksdGhpcy5fd3JhcFg9aS53cmFwTG5nJiYhdGhpcy5vcHRpb25zLm5vV3JhcCYmW01hdGguZmxvb3IodC5wcm9qZWN0KFswLGkud3JhcExuZ1swXV0sbikueC9lLngpLE1hdGguY2VpbCh0LnByb2plY3QoWzAsaS53cmFwTG5nWzFdXSxuKS54L2UueSldLHRoaXMuX3dyYXBZPWkud3JhcExhdCYmIXRoaXMub3B0aW9ucy5ub1dyYXAmJltNYXRoLmZsb29yKHQucHJvamVjdChbaS53cmFwTGF0WzBdLDBdLG4pLnkvZS54KSxNYXRoLmNlaWwodC5wcm9qZWN0KFtpLndyYXBMYXRbMV0sMF0sbikueS9lLnkpXX0sX29uTW92ZUVuZDpmdW5jdGlvbigpe3RoaXMuX21hcCYmIXRoaXMuX21hcC5fYW5pbWF0aW5nWm9vbSYmdGhpcy5fdXBkYXRlKCl9LF9nZXRUaWxlZFBpeGVsQm91bmRzOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcCxlPWkuX2FuaW1hdGluZ1pvb20/TWF0aC5tYXgoaS5fYW5pbWF0ZVRvWm9vbSxpLmdldFpvb20oKSk6aS5nZXRab29tKCksbj1pLmdldFpvb21TY2FsZShlLHRoaXMuX3RpbGVab29tKSxvPWkucHJvamVjdCh0LHRoaXMuX3RpbGVab29tKS5mbG9vcigpLHM9aS5nZXRTaXplKCkuZGl2aWRlQnkoMipuKTtyZXR1cm4gbmV3IFAoby5zdWJ0cmFjdChzKSxvLmFkZChzKSl9LF91cGRhdGU6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fbWFwO2lmKGkpe3ZhciBlPXRoaXMuX2NsYW1wWm9vbShpLmdldFpvb20oKSk7aWYodm9pZCAwPT09dCYmKHQ9aS5nZXRDZW50ZXIoKSksdm9pZCAwIT09dGhpcy5fdGlsZVpvb20pe3ZhciBuPXRoaXMuX2dldFRpbGVkUGl4ZWxCb3VuZHModCksbz10aGlzLl9weEJvdW5kc1RvVGlsZVJhbmdlKG4pLHM9by5nZXRDZW50ZXIoKSxyPVtdLGE9dGhpcy5vcHRpb25zLmtlZXBCdWZmZXIsaD1uZXcgUChvLmdldEJvdHRvbUxlZnQoKS5zdWJ0cmFjdChbYSwtYV0pLG8uZ2V0VG9wUmlnaHQoKS5hZGQoW2EsLWFdKSk7aWYoIShpc0Zpbml0ZShvLm1pbi54KSYmaXNGaW5pdGUoby5taW4ueSkmJmlzRmluaXRlKG8ubWF4LngpJiZpc0Zpbml0ZShvLm1heC55KSkpdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGxvYWQgYW4gaW5maW5pdGUgbnVtYmVyIG9mIHRpbGVzXCIpO2Zvcih2YXIgdSBpbiB0aGlzLl90aWxlcyl7dmFyIGw9dGhpcy5fdGlsZXNbdV0uY29vcmRzO2wuej09PXRoaXMuX3RpbGVab29tJiZoLmNvbnRhaW5zKG5ldyB4KGwueCxsLnkpKXx8KHRoaXMuX3RpbGVzW3VdLmN1cnJlbnQ9ITEpfWlmKE1hdGguYWJzKGUtdGhpcy5fdGlsZVpvb20pPjEpdGhpcy5fc2V0Vmlldyh0LGUpO2Vsc2V7Zm9yKHZhciBjPW8ubWluLnk7Yzw9by5tYXgueTtjKyspZm9yKHZhciBfPW8ubWluLng7Xzw9by5tYXgueDtfKyspe3ZhciBkPW5ldyB4KF8sYyk7aWYoZC56PXRoaXMuX3RpbGVab29tLHRoaXMuX2lzVmFsaWRUaWxlKGQpKXt2YXIgcD10aGlzLl90aWxlc1t0aGlzLl90aWxlQ29vcmRzVG9LZXkoZCldO3A/cC5jdXJyZW50PSEwOnIucHVzaChkKX19aWYoci5zb3J0KGZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQuZGlzdGFuY2VUbyhzKS1pLmRpc3RhbmNlVG8ocyl9KSwwIT09ci5sZW5ndGgpe3RoaXMuX2xvYWRpbmd8fCh0aGlzLl9sb2FkaW5nPSEwLHRoaXMuZmlyZShcImxvYWRpbmdcIikpO3ZhciBtPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IoXz0wO188ci5sZW5ndGg7XysrKXRoaXMuX2FkZFRpbGUocltfXSxtKTt0aGlzLl9sZXZlbC5lbC5hcHBlbmRDaGlsZChtKX19fX19LF9pc1ZhbGlkVGlsZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9tYXAub3B0aW9ucy5jcnM7aWYoIWkuaW5maW5pdGUpe3ZhciBlPXRoaXMuX2dsb2JhbFRpbGVSYW5nZTtpZighaS53cmFwTG5nJiYodC54PGUubWluLnh8fHQueD5lLm1heC54KXx8IWkud3JhcExhdCYmKHQueTxlLm1pbi55fHx0Lnk+ZS5tYXgueSkpcmV0dXJuITF9aWYoIXRoaXMub3B0aW9ucy5ib3VuZHMpcmV0dXJuITA7dmFyIG49dGhpcy5fdGlsZUNvb3Jkc1RvQm91bmRzKHQpO3JldHVybiB6KHRoaXMub3B0aW9ucy5ib3VuZHMpLm92ZXJsYXBzKG4pfSxfa2V5VG9Cb3VuZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RpbGVDb29yZHNUb0JvdW5kcyh0aGlzLl9rZXlUb1RpbGVDb29yZHModCkpfSxfdGlsZUNvb3Jkc1RvTndTZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9tYXAsZT10aGlzLmdldFRpbGVTaXplKCksbj10LnNjYWxlQnkoZSksbz1uLmFkZChlKTtyZXR1cm5baS51bnByb2plY3Qobix0LnopLGkudW5wcm9qZWN0KG8sdC56KV19LF90aWxlQ29vcmRzVG9Cb3VuZHM6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fdGlsZUNvb3Jkc1RvTndTZSh0KSxlPW5ldyBUKGlbMF0saVsxXSk7cmV0dXJuIHRoaXMub3B0aW9ucy5ub1dyYXB8fChlPXRoaXMuX21hcC53cmFwTGF0TG5nQm91bmRzKGUpKSxlfSxfdGlsZUNvb3Jkc1RvS2V5OmZ1bmN0aW9uKHQpe3JldHVybiB0LngrXCI6XCIrdC55K1wiOlwiK3Quen0sX2tleVRvVGlsZUNvb3JkczpmdW5jdGlvbih0KXt2YXIgaT10LnNwbGl0KFwiOlwiKSxlPW5ldyB4KCtpWzBdLCtpWzFdKTtyZXR1cm4gZS56PStpWzJdLGV9LF9yZW1vdmVUaWxlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX3RpbGVzW3RdO2kmJihTaXx8aS5lbC5zZXRBdHRyaWJ1dGUoXCJzcmNcIixzaSksSyhpLmVsKSxkZWxldGUgdGhpcy5fdGlsZXNbdF0sdGhpcy5maXJlKFwidGlsZXVubG9hZFwiLHt0aWxlOmkuZWwsY29vcmRzOnRoaXMuX2tleVRvVGlsZUNvb3Jkcyh0KX0pKX0sX2luaXRUaWxlOmZ1bmN0aW9uKHQpe1EodCxcImxlYWZsZXQtdGlsZVwiKTt2YXIgaT10aGlzLmdldFRpbGVTaXplKCk7dC5zdHlsZS53aWR0aD1pLngrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PWkueStcInB4XCIsdC5vbnNlbGVjdHN0YXJ0PXIsdC5vbm1vdXNlbW92ZT1yLExpJiZ0aGlzLm9wdGlvbnMub3BhY2l0eTwxJiZudCh0LHRoaXMub3B0aW9ucy5vcGFjaXR5KSx6aSYmIU1pJiYodC5zdHlsZS5XZWJraXRCYWNrZmFjZVZpc2liaWxpdHk9XCJoaWRkZW5cIil9LF9hZGRUaWxlOmZ1bmN0aW9uKHQsaSl7dmFyIG49dGhpcy5fZ2V0VGlsZVBvcyh0KSxvPXRoaXMuX3RpbGVDb29yZHNUb0tleSh0KSxzPXRoaXMuY3JlYXRlVGlsZSh0aGlzLl93cmFwQ29vcmRzKHQpLGUodGhpcy5fdGlsZVJlYWR5LHRoaXMsdCkpO3RoaXMuX2luaXRUaWxlKHMpLHRoaXMuY3JlYXRlVGlsZS5sZW5ndGg8MiYmZihlKHRoaXMuX3RpbGVSZWFkeSx0aGlzLHQsbnVsbCxzKSksYXQocyxuKSx0aGlzLl90aWxlc1tvXT17ZWw6cyxjb29yZHM6dCxjdXJyZW50OiEwfSxpLmFwcGVuZENoaWxkKHMpLHRoaXMuZmlyZShcInRpbGVsb2Fkc3RhcnRcIix7dGlsZTpzLGNvb3Jkczp0fSl9LF90aWxlUmVhZHk6ZnVuY3Rpb24odCxpLG4pe2lmKHRoaXMuX21hcCYmbi5nZXRBdHRyaWJ1dGUoXCJzcmNcIikhPT1zaSl7aSYmdGhpcy5maXJlKFwidGlsZWVycm9yXCIse2Vycm9yOmksdGlsZTpuLGNvb3Jkczp0fSk7dmFyIG89dGhpcy5fdGlsZUNvb3Jkc1RvS2V5KHQpOyhuPXRoaXMuX3RpbGVzW29dKSYmKG4ubG9hZGVkPStuZXcgRGF0ZSx0aGlzLl9tYXAuX2ZhZGVBbmltYXRlZD8obnQobi5lbCwwKSxnKHRoaXMuX2ZhZGVGcmFtZSksdGhpcy5fZmFkZUZyYW1lPWYodGhpcy5fdXBkYXRlT3BhY2l0eSx0aGlzKSk6KG4uYWN0aXZlPSEwLHRoaXMuX3BydW5lVGlsZXMoKSksaXx8KFEobi5lbCxcImxlYWZsZXQtdGlsZS1sb2FkZWRcIiksdGhpcy5maXJlKFwidGlsZWxvYWRcIix7dGlsZTpuLmVsLGNvb3Jkczp0fSkpLHRoaXMuX25vVGlsZXNUb0xvYWQoKSYmKHRoaXMuX2xvYWRpbmc9ITEsdGhpcy5maXJlKFwibG9hZFwiKSxMaXx8IXRoaXMuX21hcC5fZmFkZUFuaW1hdGVkP2YodGhpcy5fcHJ1bmVUaWxlcyx0aGlzKTpzZXRUaW1lb3V0KGUodGhpcy5fcHJ1bmVUaWxlcyx0aGlzKSwyNTApKSl9fSxfZ2V0VGlsZVBvczpmdW5jdGlvbih0KXtyZXR1cm4gdC5zY2FsZUJ5KHRoaXMuZ2V0VGlsZVNpemUoKSkuc3VidHJhY3QodGhpcy5fbGV2ZWwub3JpZ2luKX0sX3dyYXBDb29yZHM6ZnVuY3Rpb24odCl7dmFyIGk9bmV3IHgodGhpcy5fd3JhcFg/cyh0LngsdGhpcy5fd3JhcFgpOnQueCx0aGlzLl93cmFwWT9zKHQueSx0aGlzLl93cmFwWSk6dC55KTtyZXR1cm4gaS56PXQueixpfSxfcHhCb3VuZHNUb1RpbGVSYW5nZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLmdldFRpbGVTaXplKCk7cmV0dXJuIG5ldyBQKHQubWluLnVuc2NhbGVCeShpKS5mbG9vcigpLHQubWF4LnVuc2NhbGVCeShpKS5jZWlsKCkuc3VidHJhY3QoWzEsMV0pKX0sX25vVGlsZXNUb0xvYWQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fdGlsZXMpaWYoIXRoaXMuX3RpbGVzW3RdLmxvYWRlZClyZXR1cm4hMTtyZXR1cm4hMH19KSxtbj1wbi5leHRlbmQoe29wdGlvbnM6e21pblpvb206MCxtYXhab29tOjE4LHN1YmRvbWFpbnM6XCJhYmNcIixlcnJvclRpbGVVcmw6XCJcIix6b29tT2Zmc2V0OjAsdG1zOiExLHpvb21SZXZlcnNlOiExLGRldGVjdFJldGluYTohMSxjcm9zc09yaWdpbjohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe3RoaXMuX3VybD10LChpPWwodGhpcyxpKSkuZGV0ZWN0UmV0aW5hJiZZaSYmaS5tYXhab29tPjAmJihpLnRpbGVTaXplPU1hdGguZmxvb3IoaS50aWxlU2l6ZS8yKSxpLnpvb21SZXZlcnNlPyhpLnpvb21PZmZzZXQtLSxpLm1pblpvb20rKyk6KGkuem9vbU9mZnNldCsrLGkubWF4Wm9vbS0tKSxpLm1pblpvb209TWF0aC5tYXgoMCxpLm1pblpvb20pKSxcInN0cmluZ1wiPT10eXBlb2YgaS5zdWJkb21haW5zJiYoaS5zdWJkb21haW5zPWkuc3ViZG9tYWlucy5zcGxpdChcIlwiKSkseml8fHRoaXMub24oXCJ0aWxldW5sb2FkXCIsdGhpcy5fb25UaWxlUmVtb3ZlKX0sc2V0VXJsOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX3VybD10LGl8fHRoaXMucmVkcmF3KCksdGhpc30sY3JlYXRlVGlsZTpmdW5jdGlvbih0LGkpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7cmV0dXJuIG10KG4sXCJsb2FkXCIsZSh0aGlzLl90aWxlT25Mb2FkLHRoaXMsaSxuKSksbXQobixcImVycm9yXCIsZSh0aGlzLl90aWxlT25FcnJvcix0aGlzLGksbikpLCh0aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW58fFwiXCI9PT10aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4pJiYobi5jcm9zc09yaWdpbj0hMD09PXRoaXMub3B0aW9ucy5jcm9zc09yaWdpbj9cIlwiOnRoaXMub3B0aW9ucy5jcm9zc09yaWdpbiksbi5hbHQ9XCJcIixuLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxuLnNyYz10aGlzLmdldFRpbGVVcmwodCksbn0sZ2V0VGlsZVVybDpmdW5jdGlvbih0KXt2YXIgZT17cjpZaT9cIkAyeFwiOlwiXCIsczp0aGlzLl9nZXRTdWJkb21haW4odCkseDp0LngseTp0Lnksejp0aGlzLl9nZXRab29tRm9yVXJsKCl9O2lmKHRoaXMuX21hcCYmIXRoaXMuX21hcC5vcHRpb25zLmNycy5pbmZpbml0ZSl7dmFyIG49dGhpcy5fZ2xvYmFsVGlsZVJhbmdlLm1heC55LXQueTt0aGlzLm9wdGlvbnMudG1zJiYoZS55PW4pLGVbXCIteVwiXT1ufXJldHVybiBfKHRoaXMuX3VybCxpKGUsdGhpcy5vcHRpb25zKSl9LF90aWxlT25Mb2FkOmZ1bmN0aW9uKHQsaSl7TGk/c2V0VGltZW91dChlKHQsdGhpcyxudWxsLGkpLDApOnQobnVsbCxpKX0sX3RpbGVPbkVycm9yOmZ1bmN0aW9uKHQsaSxlKXt2YXIgbj10aGlzLm9wdGlvbnMuZXJyb3JUaWxlVXJsO24mJmkuZ2V0QXR0cmlidXRlKFwic3JjXCIpIT09biYmKGkuc3JjPW4pLHQoZSxpKX0sX29uVGlsZVJlbW92ZTpmdW5jdGlvbih0KXt0LnRpbGUub25sb2FkPW51bGx9LF9nZXRab29tRm9yVXJsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdGlsZVpvb20saT10aGlzLm9wdGlvbnMubWF4Wm9vbSxlPXRoaXMub3B0aW9ucy56b29tUmV2ZXJzZSxuPXRoaXMub3B0aW9ucy56b29tT2Zmc2V0O3JldHVybiBlJiYodD1pLXQpLHQrbn0sX2dldFN1YmRvbWFpbjpmdW5jdGlvbih0KXt2YXIgaT1NYXRoLmFicyh0LngrdC55KSV0aGlzLm9wdGlvbnMuc3ViZG9tYWlucy5sZW5ndGg7cmV0dXJuIHRoaXMub3B0aW9ucy5zdWJkb21haW5zW2ldfSxfYWJvcnRMb2FkaW5nOmZ1bmN0aW9uKCl7dmFyIHQsaTtmb3IodCBpbiB0aGlzLl90aWxlcyl0aGlzLl90aWxlc1t0XS5jb29yZHMueiE9PXRoaXMuX3RpbGVab29tJiYoKGk9dGhpcy5fdGlsZXNbdF0uZWwpLm9ubG9hZD1yLGkub25lcnJvcj1yLGkuY29tcGxldGV8fChpLnNyYz1zaSxLKGkpLGRlbGV0ZSB0aGlzLl90aWxlc1t0XSkpfX0pLGZuPW1uLmV4dGVuZCh7ZGVmYXVsdFdtc1BhcmFtczp7c2VydmljZTpcIldNU1wiLHJlcXVlc3Q6XCJHZXRNYXBcIixsYXllcnM6XCJcIixzdHlsZXM6XCJcIixmb3JtYXQ6XCJpbWFnZS9qcGVnXCIsdHJhbnNwYXJlbnQ6ITEsdmVyc2lvbjpcIjEuMS4xXCJ9LG9wdGlvbnM6e2NyczpudWxsLHVwcGVyY2FzZTohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3VybD10O3ZhciBuPWkoe30sdGhpcy5kZWZhdWx0V21zUGFyYW1zKTtmb3IodmFyIG8gaW4gZSlvIGluIHRoaXMub3B0aW9uc3x8KG5bb109ZVtvXSk7dmFyIHM9KGU9bCh0aGlzLGUpKS5kZXRlY3RSZXRpbmEmJllpPzI6MSxyPXRoaXMuZ2V0VGlsZVNpemUoKTtuLndpZHRoPXIueCpzLG4uaGVpZ2h0PXIueSpzLHRoaXMud21zUGFyYW1zPW59LG9uQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX2Nycz10aGlzLm9wdGlvbnMuY3JzfHx0Lm9wdGlvbnMuY3JzLHRoaXMuX3dtc1ZlcnNpb249cGFyc2VGbG9hdCh0aGlzLndtc1BhcmFtcy52ZXJzaW9uKTt2YXIgaT10aGlzLl93bXNWZXJzaW9uPj0xLjM/XCJjcnNcIjpcInNyc1wiO3RoaXMud21zUGFyYW1zW2ldPXRoaXMuX2Nycy5jb2RlLG1uLnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMsdCl9LGdldFRpbGVVcmw6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fdGlsZUNvb3Jkc1RvTndTZSh0KSxlPXRoaXMuX2NycyxuPWIoZS5wcm9qZWN0KGlbMF0pLGUucHJvamVjdChpWzFdKSksbz1uLm1pbixzPW4ubWF4LHI9KHRoaXMuX3dtc1ZlcnNpb24+PTEuMyYmdGhpcy5fY3JzPT09VWU/W28ueSxvLngscy55LHMueF06W28ueCxvLnkscy54LHMueV0pLmpvaW4oXCIsXCIpLGE9bW4ucHJvdG90eXBlLmdldFRpbGVVcmwuY2FsbCh0aGlzLHQpO3JldHVybiBhK2ModGhpcy53bXNQYXJhbXMsYSx0aGlzLm9wdGlvbnMudXBwZXJjYXNlKSsodGhpcy5vcHRpb25zLnVwcGVyY2FzZT9cIiZCQk9YPVwiOlwiJmJib3g9XCIpK3J9LHNldFBhcmFtczpmdW5jdGlvbih0LGUpe3JldHVybiBpKHRoaXMud21zUGFyYW1zLHQpLGV8fHRoaXMucmVkcmF3KCksdGhpc319KTttbi5XTVM9Zm4sSnQud21zPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyBmbih0LGkpfTt2YXIgZ249cWUuZXh0ZW5kKHtvcHRpb25zOntwYWRkaW5nOi4xLHRvbGVyYW5jZTowfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe2wodGhpcyx0KSxuKHRoaXMpLHRoaXMuX2xheWVycz10aGlzLl9sYXllcnN8fHt9fSxvbkFkZDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcnx8KHRoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl96b29tQW5pbWF0ZWQmJlEodGhpcy5fY29udGFpbmVyLFwibGVhZmxldC16b29tLWFuaW1hdGVkXCIpKSx0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpLHRoaXMuX3VwZGF0ZSgpLHRoaXMub24oXCJ1cGRhdGVcIix0aGlzLl91cGRhdGVQYXRocyx0aGlzKX0sb25SZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLm9mZihcInVwZGF0ZVwiLHRoaXMuX3VwZGF0ZVBhdGhzLHRoaXMpLHRoaXMuX2Rlc3Ryb3lDb250YWluZXIoKX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9e3ZpZXdyZXNldDp0aGlzLl9yZXNldCx6b29tOnRoaXMuX29uWm9vbSxtb3ZlZW5kOnRoaXMuX3VwZGF0ZSx6b29tZW5kOnRoaXMuX29uWm9vbUVuZH07cmV0dXJuIHRoaXMuX3pvb21BbmltYXRlZCYmKHQuem9vbWFuaW09dGhpcy5fb25BbmltWm9vbSksdH0sX29uQW5pbVpvb206ZnVuY3Rpb24odCl7dGhpcy5fdXBkYXRlVHJhbnNmb3JtKHQuY2VudGVyLHQuem9vbSl9LF9vblpvb206ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVUcmFuc2Zvcm0odGhpcy5fbWFwLmdldENlbnRlcigpLHRoaXMuX21hcC5nZXRab29tKCkpfSxfdXBkYXRlVHJhbnNmb3JtOmZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5fbWFwLmdldFpvb21TY2FsZShpLHRoaXMuX3pvb20pLG49aHQodGhpcy5fY29udGFpbmVyKSxvPXRoaXMuX21hcC5nZXRTaXplKCkubXVsdGlwbHlCeSguNSt0aGlzLm9wdGlvbnMucGFkZGluZykscz10aGlzLl9tYXAucHJvamVjdCh0aGlzLl9jZW50ZXIsaSkscj10aGlzLl9tYXAucHJvamVjdCh0LGkpLnN1YnRyYWN0KHMpLGE9by5tdWx0aXBseUJ5KC1lKS5hZGQobikuYWRkKG8pLnN1YnRyYWN0KHIpO2ppP3J0KHRoaXMuX2NvbnRhaW5lcixhLGUpOmF0KHRoaXMuX2NvbnRhaW5lcixhKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlKCksdGhpcy5fdXBkYXRlVHJhbnNmb3JtKHRoaXMuX2NlbnRlcix0aGlzLl96b29tKTtmb3IodmFyIHQgaW4gdGhpcy5fbGF5ZXJzKXRoaXMuX2xheWVyc1t0XS5fcmVzZXQoKX0sX29uWm9vbUVuZDpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLl9wcm9qZWN0KCl9LF91cGRhdGVQYXRoczpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLl91cGRhdGUoKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5wYWRkaW5nLGk9dGhpcy5fbWFwLmdldFNpemUoKSxlPXRoaXMuX21hcC5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludChpLm11bHRpcGx5QnkoLXQpKS5yb3VuZCgpO3RoaXMuX2JvdW5kcz1uZXcgUChlLGUuYWRkKGkubXVsdGlwbHlCeSgxKzIqdCkpLnJvdW5kKCkpLHRoaXMuX2NlbnRlcj10aGlzLl9tYXAuZ2V0Q2VudGVyKCksdGhpcy5fem9vbT10aGlzLl9tYXAuZ2V0Wm9vbSgpfX0pLHZuPWduLmV4dGVuZCh7Z2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9Z24ucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybiB0LnZpZXdwcmVyZXNldD10aGlzLl9vblZpZXdQcmVSZXNldCx0fSxfb25WaWV3UHJlUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9wb3N0cG9uZVVwZGF0ZVBhdGhzPSEwfSxvbkFkZDpmdW5jdGlvbigpe2duLnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMpLHRoaXMuX2RyYXcoKX0sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTttdCh0LFwibW91c2Vtb3ZlXCIsbyh0aGlzLl9vbk1vdXNlTW92ZSwzMix0aGlzKSx0aGlzKSxtdCh0LFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgY29udGV4dG1lbnVcIix0aGlzLl9vbkNsaWNrLHRoaXMpLG10KHQsXCJtb3VzZW91dFwiLHRoaXMuX2hhbmRsZU1vdXNlT3V0LHRoaXMpLHRoaXMuX2N0eD10LmdldENvbnRleHQoXCIyZFwiKX0sX2Rlc3Ryb3lDb250YWluZXI6ZnVuY3Rpb24oKXtnKHRoaXMuX3JlZHJhd1JlcXVlc3QpLGRlbGV0ZSB0aGlzLl9jdHgsSyh0aGlzLl9jb250YWluZXIpLGZ0KHRoaXMuX2NvbnRhaW5lciksZGVsZXRlIHRoaXMuX2NvbnRhaW5lcn0sX3VwZGF0ZVBhdGhzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3Bvc3Rwb25lVXBkYXRlUGF0aHMpe3RoaXMuX3JlZHJhd0JvdW5kcz1udWxsO2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLl91cGRhdGUoKTt0aGlzLl9yZWRyYXcoKX19LF91cGRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fbWFwLl9hbmltYXRpbmdab29tfHwhdGhpcy5fYm91bmRzKXt0aGlzLl9kcmF3bkxheWVycz17fSxnbi5wcm90b3R5cGUuX3VwZGF0ZS5jYWxsKHRoaXMpO3ZhciB0PXRoaXMuX2JvdW5kcyxpPXRoaXMuX2NvbnRhaW5lcixlPXQuZ2V0U2l6ZSgpLG49WWk/MjoxO2F0KGksdC5taW4pLGkud2lkdGg9biplLngsaS5oZWlnaHQ9biplLnksaS5zdHlsZS53aWR0aD1lLngrXCJweFwiLGkuc3R5bGUuaGVpZ2h0PWUueStcInB4XCIsWWkmJnRoaXMuX2N0eC5zY2FsZSgyLDIpLHRoaXMuX2N0eC50cmFuc2xhdGUoLXQubWluLngsLXQubWluLnkpLHRoaXMuZmlyZShcInVwZGF0ZVwiKX19LF9yZXNldDpmdW5jdGlvbigpe2duLnByb3RvdHlwZS5fcmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9wb3N0cG9uZVVwZGF0ZVBhdGhzJiYodGhpcy5fcG9zdHBvbmVVcGRhdGVQYXRocz0hMSx0aGlzLl91cGRhdGVQYXRocygpKX0sX2luaXRQYXRoOmZ1bmN0aW9uKHQpe3RoaXMuX3VwZGF0ZURhc2hBcnJheSh0KSx0aGlzLl9sYXllcnNbbih0KV09dDt2YXIgaT10Ll9vcmRlcj17bGF5ZXI6dCxwcmV2OnRoaXMuX2RyYXdMYXN0LG5leHQ6bnVsbH07dGhpcy5fZHJhd0xhc3QmJih0aGlzLl9kcmF3TGFzdC5uZXh0PWkpLHRoaXMuX2RyYXdMYXN0PWksdGhpcy5fZHJhd0ZpcnN0PXRoaXMuX2RyYXdGaXJzdHx8dGhpcy5fZHJhd0xhc3R9LF9hZGRQYXRoOmZ1bmN0aW9uKHQpe3RoaXMuX3JlcXVlc3RSZWRyYXcodCl9LF9yZW1vdmVQYXRoOmZ1bmN0aW9uKHQpe3ZhciBpPXQuX29yZGVyLGU9aS5uZXh0LG89aS5wcmV2O2U/ZS5wcmV2PW86dGhpcy5fZHJhd0xhc3Q9byxvP28ubmV4dD1lOnRoaXMuX2RyYXdGaXJzdD1lLGRlbGV0ZSB0aGlzLl9kcmF3bkxheWVyc1t0Ll9sZWFmbGV0X2lkXSxkZWxldGUgdC5fb3JkZXIsZGVsZXRlIHRoaXMuX2xheWVyc1tuKHQpXSx0aGlzLl9yZXF1ZXN0UmVkcmF3KHQpfSxfdXBkYXRlUGF0aDpmdW5jdGlvbih0KXt0aGlzLl9leHRlbmRSZWRyYXdCb3VuZHModCksdC5fcHJvamVjdCgpLHQuX3VwZGF0ZSgpLHRoaXMuX3JlcXVlc3RSZWRyYXcodCl9LF91cGRhdGVTdHlsZTpmdW5jdGlvbih0KXt0aGlzLl91cGRhdGVEYXNoQXJyYXkodCksdGhpcy5fcmVxdWVzdFJlZHJhdyh0KX0sX3VwZGF0ZURhc2hBcnJheTpmdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdC5vcHRpb25zLmRhc2hBcnJheSl7dmFyIGksZT10Lm9wdGlvbnMuZGFzaEFycmF5LnNwbGl0KFwiLFwiKSxuPVtdO2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspbi5wdXNoKE51bWJlcihlW2ldKSk7dC5vcHRpb25zLl9kYXNoQXJyYXk9bn1lbHNlIHQub3B0aW9ucy5fZGFzaEFycmF5PXQub3B0aW9ucy5kYXNoQXJyYXl9LF9yZXF1ZXN0UmVkcmF3OmZ1bmN0aW9uKHQpe3RoaXMuX21hcCYmKHRoaXMuX2V4dGVuZFJlZHJhd0JvdW5kcyh0KSx0aGlzLl9yZWRyYXdSZXF1ZXN0PXRoaXMuX3JlZHJhd1JlcXVlc3R8fGYodGhpcy5fcmVkcmF3LHRoaXMpKX0sX2V4dGVuZFJlZHJhd0JvdW5kczpmdW5jdGlvbih0KXtpZih0Ll9weEJvdW5kcyl7dmFyIGk9KHQub3B0aW9ucy53ZWlnaHR8fDApKzE7dGhpcy5fcmVkcmF3Qm91bmRzPXRoaXMuX3JlZHJhd0JvdW5kc3x8bmV3IFAsdGhpcy5fcmVkcmF3Qm91bmRzLmV4dGVuZCh0Ll9weEJvdW5kcy5taW4uc3VidHJhY3QoW2ksaV0pKSx0aGlzLl9yZWRyYXdCb3VuZHMuZXh0ZW5kKHQuX3B4Qm91bmRzLm1heC5hZGQoW2ksaV0pKX19LF9yZWRyYXc6ZnVuY3Rpb24oKXt0aGlzLl9yZWRyYXdSZXF1ZXN0PW51bGwsdGhpcy5fcmVkcmF3Qm91bmRzJiYodGhpcy5fcmVkcmF3Qm91bmRzLm1pbi5fZmxvb3IoKSx0aGlzLl9yZWRyYXdCb3VuZHMubWF4Ll9jZWlsKCkpLHRoaXMuX2NsZWFyKCksdGhpcy5fZHJhdygpLHRoaXMuX3JlZHJhd0JvdW5kcz1udWxsfSxfY2xlYXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yZWRyYXdCb3VuZHM7aWYodCl7dmFyIGk9dC5nZXRTaXplKCk7dGhpcy5fY3R4LmNsZWFyUmVjdCh0Lm1pbi54LHQubWluLnksaS54LGkueSl9ZWxzZSB0aGlzLl9jdHguY2xlYXJSZWN0KDAsMCx0aGlzLl9jb250YWluZXIud2lkdGgsdGhpcy5fY29udGFpbmVyLmhlaWdodCl9LF9kcmF3OmZ1bmN0aW9uKCl7dmFyIHQsaT10aGlzLl9yZWRyYXdCb3VuZHM7aWYodGhpcy5fY3R4LnNhdmUoKSxpKXt2YXIgZT1pLmdldFNpemUoKTt0aGlzLl9jdHguYmVnaW5QYXRoKCksdGhpcy5fY3R4LnJlY3QoaS5taW4ueCxpLm1pbi55LGUueCxlLnkpLHRoaXMuX2N0eC5jbGlwKCl9dGhpcy5fZHJhd2luZz0hMDtmb3IodmFyIG49dGhpcy5fZHJhd0ZpcnN0O247bj1uLm5leHQpdD1uLmxheWVyLCghaXx8dC5fcHhCb3VuZHMmJnQuX3B4Qm91bmRzLmludGVyc2VjdHMoaSkpJiZ0Ll91cGRhdGVQYXRoKCk7dGhpcy5fZHJhd2luZz0hMSx0aGlzLl9jdHgucmVzdG9yZSgpfSxfdXBkYXRlUG9seTpmdW5jdGlvbih0LGkpe2lmKHRoaXMuX2RyYXdpbmcpe3ZhciBlLG4sbyxzLHI9dC5fcGFydHMsYT1yLmxlbmd0aCxoPXRoaXMuX2N0eDtpZihhKXtmb3IodGhpcy5fZHJhd25MYXllcnNbdC5fbGVhZmxldF9pZF09dCxoLmJlZ2luUGF0aCgpLGU9MDtlPGE7ZSsrKXtmb3Iobj0wLG89cltlXS5sZW5ndGg7bjxvO24rKylzPXJbZV1bbl0saFtuP1wibGluZVRvXCI6XCJtb3ZlVG9cIl0ocy54LHMueSk7aSYmaC5jbG9zZVBhdGgoKX10aGlzLl9maWxsU3Ryb2tlKGgsdCl9fX0sX3VwZGF0ZUNpcmNsZTpmdW5jdGlvbih0KXtpZih0aGlzLl9kcmF3aW5nJiYhdC5fZW1wdHkoKSl7dmFyIGk9dC5fcG9pbnQsZT10aGlzLl9jdHgsbj1NYXRoLm1heChNYXRoLnJvdW5kKHQuX3JhZGl1cyksMSksbz0oTWF0aC5tYXgoTWF0aC5yb3VuZCh0Ll9yYWRpdXNZKSwxKXx8bikvbjt0aGlzLl9kcmF3bkxheWVyc1t0Ll9sZWFmbGV0X2lkXT10LDEhPT1vJiYoZS5zYXZlKCksZS5zY2FsZSgxLG8pKSxlLmJlZ2luUGF0aCgpLGUuYXJjKGkueCxpLnkvbyxuLDAsMipNYXRoLlBJLCExKSwxIT09byYmZS5yZXN0b3JlKCksdGhpcy5fZmlsbFN0cm9rZShlLHQpfX0sX2ZpbGxTdHJva2U6ZnVuY3Rpb24odCxpKXt2YXIgZT1pLm9wdGlvbnM7ZS5maWxsJiYodC5nbG9iYWxBbHBoYT1lLmZpbGxPcGFjaXR5LHQuZmlsbFN0eWxlPWUuZmlsbENvbG9yfHxlLmNvbG9yLHQuZmlsbChlLmZpbGxSdWxlfHxcImV2ZW5vZGRcIikpLGUuc3Ryb2tlJiYwIT09ZS53ZWlnaHQmJih0LnNldExpbmVEYXNoJiZ0LnNldExpbmVEYXNoKGkub3B0aW9ucyYmaS5vcHRpb25zLl9kYXNoQXJyYXl8fFtdKSx0Lmdsb2JhbEFscGhhPWUub3BhY2l0eSx0LmxpbmVXaWR0aD1lLndlaWdodCx0LnN0cm9rZVN0eWxlPWUuY29sb3IsdC5saW5lQ2FwPWUubGluZUNhcCx0LmxpbmVKb2luPWUubGluZUpvaW4sdC5zdHJva2UoKSl9LF9vbkNsaWNrOmZ1bmN0aW9uKHQpe2Zvcih2YXIgaSxlLG49dGhpcy5fbWFwLm1vdXNlRXZlbnRUb0xheWVyUG9pbnQodCksbz10aGlzLl9kcmF3Rmlyc3Q7bztvPW8ubmV4dCkoaT1vLmxheWVyKS5vcHRpb25zLmludGVyYWN0aXZlJiZpLl9jb250YWluc1BvaW50KG4pJiYhdGhpcy5fbWFwLl9kcmFnZ2FibGVNb3ZlZChpKSYmKGU9aSk7ZSYmKHp0KHQpLHRoaXMuX2ZpcmVFdmVudChbZV0sdCkpfSxfb25Nb3VzZU1vdmU6ZnVuY3Rpb24odCl7aWYodGhpcy5fbWFwJiYhdGhpcy5fbWFwLmRyYWdnaW5nLm1vdmluZygpJiYhdGhpcy5fbWFwLl9hbmltYXRpbmdab29tKXt2YXIgaT10aGlzLl9tYXAubW91c2VFdmVudFRvTGF5ZXJQb2ludCh0KTt0aGlzLl9oYW5kbGVNb3VzZUhvdmVyKHQsaSl9fSxfaGFuZGxlTW91c2VPdXQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5faG92ZXJlZExheWVyO2kmJih0dCh0aGlzLl9jb250YWluZXIsXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuX2ZpcmVFdmVudChbaV0sdCxcIm1vdXNlb3V0XCIpLHRoaXMuX2hvdmVyZWRMYXllcj1udWxsKX0sX2hhbmRsZU1vdXNlSG92ZXI6ZnVuY3Rpb24odCxpKXtmb3IodmFyIGUsbixvPXRoaXMuX2RyYXdGaXJzdDtvO289by5uZXh0KShlPW8ubGF5ZXIpLm9wdGlvbnMuaW50ZXJhY3RpdmUmJmUuX2NvbnRhaW5zUG9pbnQoaSkmJihuPWUpO24hPT10aGlzLl9ob3ZlcmVkTGF5ZXImJih0aGlzLl9oYW5kbGVNb3VzZU91dCh0KSxuJiYoUSh0aGlzLl9jb250YWluZXIsXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuX2ZpcmVFdmVudChbbl0sdCxcIm1vdXNlb3ZlclwiKSx0aGlzLl9ob3ZlcmVkTGF5ZXI9bikpLHRoaXMuX2hvdmVyZWRMYXllciYmdGhpcy5fZmlyZUV2ZW50KFt0aGlzLl9ob3ZlcmVkTGF5ZXJdLHQpfSxfZmlyZUV2ZW50OmZ1bmN0aW9uKHQsaSxlKXt0aGlzLl9tYXAuX2ZpcmVET01FdmVudChpLGV8fGkudHlwZSx0KX0sX2JyaW5nVG9Gcm9udDpmdW5jdGlvbih0KXt2YXIgaT10Ll9vcmRlcixlPWkubmV4dCxuPWkucHJldjtlJiYoZS5wcmV2PW4sbj9uLm5leHQ9ZTplJiYodGhpcy5fZHJhd0ZpcnN0PWUpLGkucHJldj10aGlzLl9kcmF3TGFzdCx0aGlzLl9kcmF3TGFzdC5uZXh0PWksaS5uZXh0PW51bGwsdGhpcy5fZHJhd0xhc3Q9aSx0aGlzLl9yZXF1ZXN0UmVkcmF3KHQpKX0sX2JyaW5nVG9CYWNrOmZ1bmN0aW9uKHQpe3ZhciBpPXQuX29yZGVyLGU9aS5uZXh0LG49aS5wcmV2O24mJihuLm5leHQ9ZSxlP2UucHJldj1uOm4mJih0aGlzLl9kcmF3TGFzdD1uKSxpLnByZXY9bnVsbCxpLm5leHQ9dGhpcy5fZHJhd0ZpcnN0LHRoaXMuX2RyYXdGaXJzdC5wcmV2PWksdGhpcy5fZHJhd0ZpcnN0PWksdGhpcy5fcmVxdWVzdFJlZHJhdyh0KSl9fSkseW49ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGRvY3VtZW50Lm5hbWVzcGFjZXMuYWRkKFwibHZtbFwiLFwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWxcIiksZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCI8bHZtbDpcIit0KycgY2xhc3M9XCJsdm1sXCI+Jyl9fWNhdGNoKHQpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIjxcIit0KycgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbFwiIGNsYXNzPVwibHZtbFwiPicpfX19KCkseG49e19pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyPUcoXCJkaXZcIixcImxlYWZsZXQtdm1sLWNvbnRhaW5lclwiKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX21hcC5fYW5pbWF0aW5nWm9vbXx8KGduLnByb3RvdHlwZS5fdXBkYXRlLmNhbGwodGhpcyksdGhpcy5maXJlKFwidXBkYXRlXCIpKX0sX2luaXRQYXRoOmZ1bmN0aW9uKHQpe3ZhciBpPXQuX2NvbnRhaW5lcj15bihcInNoYXBlXCIpO1EoaSxcImxlYWZsZXQtdm1sLXNoYXBlIFwiKyh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lfHxcIlwiKSksaS5jb29yZHNpemU9XCIxIDFcIix0Ll9wYXRoPXluKFwicGF0aFwiKSxpLmFwcGVuZENoaWxkKHQuX3BhdGgpLHRoaXMuX3VwZGF0ZVN0eWxlKHQpLHRoaXMuX2xheWVyc1tuKHQpXT10fSxfYWRkUGF0aDpmdW5jdGlvbih0KXt2YXIgaT10Ll9jb250YWluZXI7dGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGkpLHQub3B0aW9ucy5pbnRlcmFjdGl2ZSYmdC5hZGRJbnRlcmFjdGl2ZVRhcmdldChpKX0sX3JlbW92ZVBhdGg6ZnVuY3Rpb24odCl7dmFyIGk9dC5fY29udGFpbmVyO0soaSksdC5yZW1vdmVJbnRlcmFjdGl2ZVRhcmdldChpKSxkZWxldGUgdGhpcy5fbGF5ZXJzW24odCldfSxfdXBkYXRlU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGk9dC5fc3Ryb2tlLGU9dC5fZmlsbCxuPXQub3B0aW9ucyxvPXQuX2NvbnRhaW5lcjtvLnN0cm9rZWQ9ISFuLnN0cm9rZSxvLmZpbGxlZD0hIW4uZmlsbCxuLnN0cm9rZT8oaXx8KGk9dC5fc3Ryb2tlPXluKFwic3Ryb2tlXCIpKSxvLmFwcGVuZENoaWxkKGkpLGkud2VpZ2h0PW4ud2VpZ2h0K1wicHhcIixpLmNvbG9yPW4uY29sb3IsaS5vcGFjaXR5PW4ub3BhY2l0eSxuLmRhc2hBcnJheT9pLmRhc2hTdHlsZT1vaShuLmRhc2hBcnJheSk/bi5kYXNoQXJyYXkuam9pbihcIiBcIik6bi5kYXNoQXJyYXkucmVwbGFjZSgvKCAqLCAqKS9nLFwiIFwiKTppLmRhc2hTdHlsZT1cIlwiLGkuZW5kY2FwPW4ubGluZUNhcC5yZXBsYWNlKFwiYnV0dFwiLFwiZmxhdFwiKSxpLmpvaW5zdHlsZT1uLmxpbmVKb2luKTppJiYoby5yZW1vdmVDaGlsZChpKSx0Ll9zdHJva2U9bnVsbCksbi5maWxsPyhlfHwoZT10Ll9maWxsPXluKFwiZmlsbFwiKSksby5hcHBlbmRDaGlsZChlKSxlLmNvbG9yPW4uZmlsbENvbG9yfHxuLmNvbG9yLGUub3BhY2l0eT1uLmZpbGxPcGFjaXR5KTplJiYoby5yZW1vdmVDaGlsZChlKSx0Ll9maWxsPW51bGwpfSxfdXBkYXRlQ2lyY2xlOmZ1bmN0aW9uKHQpe3ZhciBpPXQuX3BvaW50LnJvdW5kKCksZT1NYXRoLnJvdW5kKHQuX3JhZGl1cyksbj1NYXRoLnJvdW5kKHQuX3JhZGl1c1l8fGUpO3RoaXMuX3NldFBhdGgodCx0Ll9lbXB0eSgpP1wiTTAgMFwiOlwiQUwgXCIraS54K1wiLFwiK2kueStcIiBcIitlK1wiLFwiK24rXCIgMCwyMzU5MjYwMFwiKX0sX3NldFBhdGg6ZnVuY3Rpb24odCxpKXt0Ll9wYXRoLnY9aX0sX2JyaW5nVG9Gcm9udDpmdW5jdGlvbih0KXtYKHQuX2NvbnRhaW5lcil9LF9icmluZ1RvQmFjazpmdW5jdGlvbih0KXtKKHQuX2NvbnRhaW5lcil9fSx3bj0kaT95bjpFLFBuPWduLmV4dGVuZCh7Z2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9Z24ucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybiB0Lnpvb21zdGFydD10aGlzLl9vblpvb21TdGFydCx0fSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcj13bihcInN2Z1wiKSx0aGlzLl9jb250YWluZXIuc2V0QXR0cmlidXRlKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIiksdGhpcy5fcm9vdEdyb3VwPXduKFwiZ1wiKSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm9vdEdyb3VwKX0sX2Rlc3Ryb3lDb250YWluZXI6ZnVuY3Rpb24oKXtLKHRoaXMuX2NvbnRhaW5lciksZnQodGhpcy5fY29udGFpbmVyKSxkZWxldGUgdGhpcy5fY29udGFpbmVyLGRlbGV0ZSB0aGlzLl9yb290R3JvdXAsZGVsZXRlIHRoaXMuX3N2Z1NpemV9LF9vblpvb21TdGFydDpmdW5jdGlvbigpe3RoaXMuX3VwZGF0ZSgpfSxfdXBkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX21hcC5fYW5pbWF0aW5nWm9vbXx8IXRoaXMuX2JvdW5kcyl7Z24ucHJvdG90eXBlLl91cGRhdGUuY2FsbCh0aGlzKTt2YXIgdD10aGlzLl9ib3VuZHMsaT10LmdldFNpemUoKSxlPXRoaXMuX2NvbnRhaW5lcjt0aGlzLl9zdmdTaXplJiZ0aGlzLl9zdmdTaXplLmVxdWFscyhpKXx8KHRoaXMuX3N2Z1NpemU9aSxlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsaS54KSxlLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGkueSkpLGF0KGUsdC5taW4pLGUuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLFt0Lm1pbi54LHQubWluLnksaS54LGkueV0uam9pbihcIiBcIikpLHRoaXMuZmlyZShcInVwZGF0ZVwiKX19LF9pbml0UGF0aDpmdW5jdGlvbih0KXt2YXIgaT10Ll9wYXRoPXduKFwicGF0aFwiKTt0Lm9wdGlvbnMuY2xhc3NOYW1lJiZRKGksdC5vcHRpb25zLmNsYXNzTmFtZSksdC5vcHRpb25zLmludGVyYWN0aXZlJiZRKGksXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuX3VwZGF0ZVN0eWxlKHQpLHRoaXMuX2xheWVyc1tuKHQpXT10fSxfYWRkUGF0aDpmdW5jdGlvbih0KXt0aGlzLl9yb290R3JvdXB8fHRoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl9yb290R3JvdXAuYXBwZW5kQ2hpbGQodC5fcGF0aCksdC5hZGRJbnRlcmFjdGl2ZVRhcmdldCh0Ll9wYXRoKX0sX3JlbW92ZVBhdGg6ZnVuY3Rpb24odCl7Syh0Ll9wYXRoKSx0LnJlbW92ZUludGVyYWN0aXZlVGFyZ2V0KHQuX3BhdGgpLGRlbGV0ZSB0aGlzLl9sYXllcnNbbih0KV19LF91cGRhdGVQYXRoOmZ1bmN0aW9uKHQpe3QuX3Byb2plY3QoKSx0Ll91cGRhdGUoKX0sX3VwZGF0ZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBpPXQuX3BhdGgsZT10Lm9wdGlvbnM7aSYmKGUuc3Ryb2tlPyhpLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLGUuY29sb3IpLGkuc2V0QXR0cmlidXRlKFwic3Ryb2tlLW9wYWNpdHlcIixlLm9wYWNpdHkpLGkuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsZS53ZWlnaHQpLGkuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIixlLmxpbmVDYXApLGkuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVqb2luXCIsZS5saW5lSm9pbiksZS5kYXNoQXJyYXk/aS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaGFycmF5XCIsZS5kYXNoQXJyYXkpOmkucmVtb3ZlQXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiKSxlLmRhc2hPZmZzZXQ/aS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaG9mZnNldFwiLGUuZGFzaE9mZnNldCk6aS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaG9mZnNldFwiKSk6aS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIixcIm5vbmVcIiksZS5maWxsPyhpLnNldEF0dHJpYnV0ZShcImZpbGxcIixlLmZpbGxDb2xvcnx8ZS5jb2xvciksaS5zZXRBdHRyaWJ1dGUoXCJmaWxsLW9wYWNpdHlcIixlLmZpbGxPcGFjaXR5KSxpLnNldEF0dHJpYnV0ZShcImZpbGwtcnVsZVwiLGUuZmlsbFJ1bGV8fFwiZXZlbm9kZFwiKSk6aS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsXCJub25lXCIpKX0sX3VwZGF0ZVBvbHk6ZnVuY3Rpb24odCxpKXt0aGlzLl9zZXRQYXRoKHQsayh0Ll9wYXJ0cyxpKSl9LF91cGRhdGVDaXJjbGU6ZnVuY3Rpb24odCl7dmFyIGk9dC5fcG9pbnQsZT1NYXRoLm1heChNYXRoLnJvdW5kKHQuX3JhZGl1cyksMSksbj1cImFcIitlK1wiLFwiKyhNYXRoLm1heChNYXRoLnJvdW5kKHQuX3JhZGl1c1kpLDEpfHxlKStcIiAwIDEsMCBcIixvPXQuX2VtcHR5KCk/XCJNMCAwXCI6XCJNXCIrKGkueC1lKStcIixcIitpLnkrbisyKmUrXCIsMCBcIituKzIqLWUrXCIsMCBcIjt0aGlzLl9zZXRQYXRoKHQsbyl9LF9zZXRQYXRoOmZ1bmN0aW9uKHQsaSl7dC5fcGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsaSl9LF9icmluZ1RvRnJvbnQ6ZnVuY3Rpb24odCl7WCh0Ll9wYXRoKX0sX2JyaW5nVG9CYWNrOmZ1bmN0aW9uKHQpe0oodC5fcGF0aCl9fSk7JGkmJlBuLmluY2x1ZGUoeG4pLGJlLmluY2x1ZGUoe2dldFJlbmRlcmVyOmZ1bmN0aW9uKHQpe3ZhciBpPXQub3B0aW9ucy5yZW5kZXJlcnx8dGhpcy5fZ2V0UGFuZVJlbmRlcmVyKHQub3B0aW9ucy5wYW5lKXx8dGhpcy5vcHRpb25zLnJlbmRlcmVyfHx0aGlzLl9yZW5kZXJlcjtyZXR1cm4gaXx8KGk9dGhpcy5fcmVuZGVyZXI9dGhpcy5fY3JlYXRlUmVuZGVyZXIoKSksdGhpcy5oYXNMYXllcihpKXx8dGhpcy5hZGRMYXllcihpKSxpfSxfZ2V0UGFuZVJlbmRlcmVyOmZ1bmN0aW9uKHQpe2lmKFwib3ZlcmxheVBhbmVcIj09PXR8fHZvaWQgMD09PXQpcmV0dXJuITE7dmFyIGk9dGhpcy5fcGFuZVJlbmRlcmVyc1t0XTtyZXR1cm4gdm9pZCAwPT09aSYmKGk9dGhpcy5fY3JlYXRlUmVuZGVyZXIoe3BhbmU6dH0pLHRoaXMuX3BhbmVSZW5kZXJlcnNbdF09aSksaX0sX2NyZWF0ZVJlbmRlcmVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMucHJlZmVyQ2FudmFzJiYkdCh0KXx8UXQodCl9fSk7dmFyIExuPW9uLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGkpe29uLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcyx0aGlzLl9ib3VuZHNUb0xhdExuZ3ModCksaSl9LHNldEJvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRMYXRMbmdzKHRoaXMuX2JvdW5kc1RvTGF0TG5ncyh0KSl9LF9ib3VuZHNUb0xhdExuZ3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9eih0KSxbdC5nZXRTb3V0aFdlc3QoKSx0LmdldE5vcnRoV2VzdCgpLHQuZ2V0Tm9ydGhFYXN0KCksdC5nZXRTb3V0aEVhc3QoKV19fSk7UG4uY3JlYXRlPXduLFBuLnBvaW50c1RvUGF0aD1rLHNuLmdlb21ldHJ5VG9MYXllcj1GdCxzbi5jb29yZHNUb0xhdExuZz1VdCxzbi5jb29yZHNUb0xhdExuZ3M9VnQsc24ubGF0TG5nVG9Db29yZHM9cXQsc24ubGF0TG5nc1RvQ29vcmRzPUd0LHNuLmdldEZlYXR1cmU9S3Qsc24uYXNGZWF0dXJlPVl0LGJlLm1lcmdlT3B0aW9ucyh7Ym94Wm9vbTohMH0pO3ZhciBibj1FZS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5fbWFwPXQsdGhpcy5fY29udGFpbmVyPXQuX2NvbnRhaW5lcix0aGlzLl9wYW5lPXQuX3BhbmVzLm92ZXJsYXlQYW5lLHRoaXMuX3Jlc2V0U3RhdGVUaW1lb3V0PTAsdC5vbihcInVubG9hZFwiLHRoaXMuX2Rlc3Ryb3ksdGhpcyl9LGFkZEhvb2tzOmZ1bmN0aW9uKCl7bXQodGhpcy5fY29udGFpbmVyLFwibW91c2Vkb3duXCIsdGhpcy5fb25Nb3VzZURvd24sdGhpcyl9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7ZnQodGhpcy5fY29udGFpbmVyLFwibW91c2Vkb3duXCIsdGhpcy5fb25Nb3VzZURvd24sdGhpcyl9LG1vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdmVkfSxfZGVzdHJveTpmdW5jdGlvbigpe0sodGhpcy5fcGFuZSksZGVsZXRlIHRoaXMuX3BhbmV9LF9yZXNldFN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRTdGF0ZVRpbWVvdXQ9MCx0aGlzLl9tb3ZlZD0hMX0sX2NsZWFyRGVmZXJyZWRSZXNldFN0YXRlOmZ1bmN0aW9uKCl7MCE9PXRoaXMuX3Jlc2V0U3RhdGVUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuX3Jlc2V0U3RhdGVUaW1lb3V0KSx0aGlzLl9yZXNldFN0YXRlVGltZW91dD0wKX0sX29uTW91c2VEb3duOmZ1bmN0aW9uKHQpe2lmKCF0LnNoaWZ0S2V5fHwxIT09dC53aGljaCYmMSE9PXQuYnV0dG9uKXJldHVybiExO3RoaXMuX2NsZWFyRGVmZXJyZWRSZXNldFN0YXRlKCksdGhpcy5fcmVzZXRTdGF0ZSgpLGZpKCksdXQoKSx0aGlzLl9zdGFydFBvaW50PXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KSxtdChkb2N1bWVudCx7Y29udGV4dG1lbnU6THQsbW91c2Vtb3ZlOnRoaXMuX29uTW91c2VNb3ZlLG1vdXNldXA6dGhpcy5fb25Nb3VzZVVwLGtleWRvd246dGhpcy5fb25LZXlEb3dufSx0aGlzKX0sX29uTW91c2VNb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuX21vdmVkfHwodGhpcy5fbW92ZWQ9ITAsdGhpcy5fYm94PUcoXCJkaXZcIixcImxlYWZsZXQtem9vbS1ib3hcIix0aGlzLl9jb250YWluZXIpLFEodGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jcm9zc2hhaXJcIiksdGhpcy5fbWFwLmZpcmUoXCJib3h6b29tc3RhcnRcIikpLHRoaXMuX3BvaW50PXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KTt2YXIgaT1uZXcgUCh0aGlzLl9wb2ludCx0aGlzLl9zdGFydFBvaW50KSxlPWkuZ2V0U2l6ZSgpO2F0KHRoaXMuX2JveCxpLm1pbiksdGhpcy5fYm94LnN0eWxlLndpZHRoPWUueCtcInB4XCIsdGhpcy5fYm94LnN0eWxlLmhlaWdodD1lLnkrXCJweFwifSxfZmluaXNoOmZ1bmN0aW9uKCl7dGhpcy5fbW92ZWQmJihLKHRoaXMuX2JveCksdHQodGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jcm9zc2hhaXJcIikpLGdpKCksbHQoKSxmdChkb2N1bWVudCx7Y29udGV4dG1lbnU6THQsbW91c2Vtb3ZlOnRoaXMuX29uTW91c2VNb3ZlLG1vdXNldXA6dGhpcy5fb25Nb3VzZVVwLGtleWRvd246dGhpcy5fb25LZXlEb3dufSx0aGlzKX0sX29uTW91c2VVcDpmdW5jdGlvbih0KXtpZigoMT09PXQud2hpY2h8fDE9PT10LmJ1dHRvbikmJih0aGlzLl9maW5pc2goKSx0aGlzLl9tb3ZlZCkpe3RoaXMuX2NsZWFyRGVmZXJyZWRSZXNldFN0YXRlKCksdGhpcy5fcmVzZXRTdGF0ZVRpbWVvdXQ9c2V0VGltZW91dChlKHRoaXMuX3Jlc2V0U3RhdGUsdGhpcyksMCk7dmFyIGk9bmV3IFQodGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXRMbmcodGhpcy5fc3RhcnRQb2ludCksdGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXRMbmcodGhpcy5fcG9pbnQpKTt0aGlzLl9tYXAuZml0Qm91bmRzKGkpLmZpcmUoXCJib3h6b29tZW5kXCIse2JveFpvb21Cb3VuZHM6aX0pfX0sX29uS2V5RG93bjpmdW5jdGlvbih0KXsyNz09PXQua2V5Q29kZSYmdGhpcy5fZmluaXNoKCl9fSk7YmUuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJib3hab29tXCIsYm4pLGJlLm1lcmdlT3B0aW9ucyh7ZG91YmxlQ2xpY2tab29tOiEwfSk7dmFyIFRuPUVlLmV4dGVuZCh7YWRkSG9va3M6ZnVuY3Rpb24oKXt0aGlzLl9tYXAub24oXCJkYmxjbGlja1wiLHRoaXMuX29uRG91YmxlQ2xpY2ssdGhpcyl9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7dGhpcy5fbWFwLm9mZihcImRibGNsaWNrXCIsdGhpcy5fb25Eb3VibGVDbGljayx0aGlzKX0sX29uRG91YmxlQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fbWFwLGU9aS5nZXRab29tKCksbj1pLm9wdGlvbnMuem9vbURlbHRhLG89dC5vcmlnaW5hbEV2ZW50LnNoaWZ0S2V5P2UtbjplK247XCJjZW50ZXJcIj09PWkub3B0aW9ucy5kb3VibGVDbGlja1pvb20/aS5zZXRab29tKG8pOmkuc2V0Wm9vbUFyb3VuZCh0LmNvbnRhaW5lclBvaW50LG8pfX0pO2JlLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwiZG91YmxlQ2xpY2tab29tXCIsVG4pLGJlLm1lcmdlT3B0aW9ucyh7ZHJhZ2dpbmc6ITAsaW5lcnRpYTohTWksaW5lcnRpYURlY2VsZXJhdGlvbjozNDAwLGluZXJ0aWFNYXhTcGVlZDoxLzAsZWFzZUxpbmVhcml0eTouMix3b3JsZENvcHlKdW1wOiExLG1heEJvdW5kc1Zpc2Nvc2l0eTowfSk7dmFyIHpuPUVlLmV4dGVuZCh7YWRkSG9va3M6ZnVuY3Rpb24oKXtpZighdGhpcy5fZHJhZ2dhYmxlKXt2YXIgdD10aGlzLl9tYXA7dGhpcy5fZHJhZ2dhYmxlPW5ldyBSZSh0Ll9tYXBQYW5lLHQuX2NvbnRhaW5lciksdGhpcy5fZHJhZ2dhYmxlLm9uKHtkcmFnc3RhcnQ6dGhpcy5fb25EcmFnU3RhcnQsZHJhZzp0aGlzLl9vbkRyYWcsZHJhZ2VuZDp0aGlzLl9vbkRyYWdFbmR9LHRoaXMpLHRoaXMuX2RyYWdnYWJsZS5vbihcInByZWRyYWdcIix0aGlzLl9vblByZURyYWdMaW1pdCx0aGlzKSx0Lm9wdGlvbnMud29ybGRDb3B5SnVtcCYmKHRoaXMuX2RyYWdnYWJsZS5vbihcInByZWRyYWdcIix0aGlzLl9vblByZURyYWdXcmFwLHRoaXMpLHQub24oXCJ6b29tZW5kXCIsdGhpcy5fb25ab29tRW5kLHRoaXMpLHQud2hlblJlYWR5KHRoaXMuX29uWm9vbUVuZCx0aGlzKSl9USh0aGlzLl9tYXAuX2NvbnRhaW5lcixcImxlYWZsZXQtZ3JhYiBsZWFmbGV0LXRvdWNoLWRyYWdcIiksdGhpcy5fZHJhZ2dhYmxlLmVuYWJsZSgpLHRoaXMuX3Bvc2l0aW9ucz1bXSx0aGlzLl90aW1lcz1bXX0scmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXt0dCh0aGlzLl9tYXAuX2NvbnRhaW5lcixcImxlYWZsZXQtZ3JhYlwiKSx0dCh0aGlzLl9tYXAuX2NvbnRhaW5lcixcImxlYWZsZXQtdG91Y2gtZHJhZ1wiKSx0aGlzLl9kcmFnZ2FibGUuZGlzYWJsZSgpfSxtb3ZlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcmFnZ2FibGUmJnRoaXMuX2RyYWdnYWJsZS5fbW92ZWR9LG1vdmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcmFnZ2FibGUmJnRoaXMuX2RyYWdnYWJsZS5fbW92aW5nfSxfb25EcmFnU3RhcnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXA7aWYodC5fc3RvcCgpLHRoaXMuX21hcC5vcHRpb25zLm1heEJvdW5kcyYmdGhpcy5fbWFwLm9wdGlvbnMubWF4Qm91bmRzVmlzY29zaXR5KXt2YXIgaT16KHRoaXMuX21hcC5vcHRpb25zLm1heEJvdW5kcyk7dGhpcy5fb2Zmc2V0TGltaXQ9Yih0aGlzLl9tYXAubGF0TG5nVG9Db250YWluZXJQb2ludChpLmdldE5vcnRoV2VzdCgpKS5tdWx0aXBseUJ5KC0xKSx0aGlzLl9tYXAubGF0TG5nVG9Db250YWluZXJQb2ludChpLmdldFNvdXRoRWFzdCgpKS5tdWx0aXBseUJ5KC0xKS5hZGQodGhpcy5fbWFwLmdldFNpemUoKSkpLHRoaXMuX3Zpc2Nvc2l0eT1NYXRoLm1pbigxLE1hdGgubWF4KDAsdGhpcy5fbWFwLm9wdGlvbnMubWF4Qm91bmRzVmlzY29zaXR5KSl9ZWxzZSB0aGlzLl9vZmZzZXRMaW1pdD1udWxsO3QuZmlyZShcIm1vdmVzdGFydFwiKS5maXJlKFwiZHJhZ3N0YXJ0XCIpLHQub3B0aW9ucy5pbmVydGlhJiYodGhpcy5fcG9zaXRpb25zPVtdLHRoaXMuX3RpbWVzPVtdKX0sX29uRHJhZzpmdW5jdGlvbih0KXtpZih0aGlzLl9tYXAub3B0aW9ucy5pbmVydGlhKXt2YXIgaT10aGlzLl9sYXN0VGltZT0rbmV3IERhdGUsZT10aGlzLl9sYXN0UG9zPXRoaXMuX2RyYWdnYWJsZS5fYWJzUG9zfHx0aGlzLl9kcmFnZ2FibGUuX25ld1Bvczt0aGlzLl9wb3NpdGlvbnMucHVzaChlKSx0aGlzLl90aW1lcy5wdXNoKGkpLHRoaXMuX3BydW5lUG9zaXRpb25zKGkpfXRoaXMuX21hcC5maXJlKFwibW92ZVwiLHQpLmZpcmUoXCJkcmFnXCIsdCl9LF9wcnVuZVBvc2l0aW9uczpmdW5jdGlvbih0KXtmb3IoO3RoaXMuX3Bvc2l0aW9ucy5sZW5ndGg+MSYmdC10aGlzLl90aW1lc1swXT41MDspdGhpcy5fcG9zaXRpb25zLnNoaWZ0KCksdGhpcy5fdGltZXMuc2hpZnQoKX0sX29uWm9vbUVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcC5nZXRTaXplKCkuZGl2aWRlQnkoMiksaT10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KFswLDBdKTt0aGlzLl9pbml0aWFsV29ybGRPZmZzZXQ9aS5zdWJ0cmFjdCh0KS54LHRoaXMuX3dvcmxkV2lkdGg9dGhpcy5fbWFwLmdldFBpeGVsV29ybGRCb3VuZHMoKS5nZXRTaXplKCkueH0sX3Zpc2NvdXNMaW1pdDpmdW5jdGlvbih0LGkpe3JldHVybiB0LSh0LWkpKnRoaXMuX3Zpc2Nvc2l0eX0sX29uUHJlRHJhZ0xpbWl0OmZ1bmN0aW9uKCl7aWYodGhpcy5fdmlzY29zaXR5JiZ0aGlzLl9vZmZzZXRMaW1pdCl7dmFyIHQ9dGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3Muc3VidHJhY3QodGhpcy5fZHJhZ2dhYmxlLl9zdGFydFBvcyksaT10aGlzLl9vZmZzZXRMaW1pdDt0Lng8aS5taW4ueCYmKHQueD10aGlzLl92aXNjb3VzTGltaXQodC54LGkubWluLngpKSx0Lnk8aS5taW4ueSYmKHQueT10aGlzLl92aXNjb3VzTGltaXQodC55LGkubWluLnkpKSx0Lng+aS5tYXgueCYmKHQueD10aGlzLl92aXNjb3VzTGltaXQodC54LGkubWF4LngpKSx0Lnk+aS5tYXgueSYmKHQueT10aGlzLl92aXNjb3VzTGltaXQodC55LGkubWF4LnkpKSx0aGlzLl9kcmFnZ2FibGUuX25ld1Bvcz10aGlzLl9kcmFnZ2FibGUuX3N0YXJ0UG9zLmFkZCh0KX19LF9vblByZURyYWdXcmFwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fd29ybGRXaWR0aCxpPU1hdGgucm91bmQodC8yKSxlPXRoaXMuX2luaXRpYWxXb3JsZE9mZnNldCxuPXRoaXMuX2RyYWdnYWJsZS5fbmV3UG9zLngsbz0obi1pK2UpJXQraS1lLHM9KG4raStlKSV0LWktZSxyPU1hdGguYWJzKG8rZSk8TWF0aC5hYnMocytlKT9vOnM7dGhpcy5fZHJhZ2dhYmxlLl9hYnNQb3M9dGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3MuY2xvbmUoKSx0aGlzLl9kcmFnZ2FibGUuX25ld1Bvcy54PXJ9LF9vbkRyYWdFbmQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fbWFwLGU9aS5vcHRpb25zLG49IWUuaW5lcnRpYXx8dGhpcy5fdGltZXMubGVuZ3RoPDI7aWYoaS5maXJlKFwiZHJhZ2VuZFwiLHQpLG4paS5maXJlKFwibW92ZWVuZFwiKTtlbHNle3RoaXMuX3BydW5lUG9zaXRpb25zKCtuZXcgRGF0ZSk7dmFyIG89dGhpcy5fbGFzdFBvcy5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbnNbMF0pLHM9KHRoaXMuX2xhc3RUaW1lLXRoaXMuX3RpbWVzWzBdKS8xZTMscj1lLmVhc2VMaW5lYXJpdHksYT1vLm11bHRpcGx5Qnkoci9zKSxoPWEuZGlzdGFuY2VUbyhbMCwwXSksdT1NYXRoLm1pbihlLmluZXJ0aWFNYXhTcGVlZCxoKSxsPWEubXVsdGlwbHlCeSh1L2gpLGM9dS8oZS5pbmVydGlhRGVjZWxlcmF0aW9uKnIpLF89bC5tdWx0aXBseUJ5KC1jLzIpLnJvdW5kKCk7Xy54fHxfLnk/KF89aS5fbGltaXRPZmZzZXQoXyxpLm9wdGlvbnMubWF4Qm91bmRzKSxmKGZ1bmN0aW9uKCl7aS5wYW5CeShfLHtkdXJhdGlvbjpjLGVhc2VMaW5lYXJpdHk6cixub01vdmVTdGFydDohMCxhbmltYXRlOiEwfSl9KSk6aS5maXJlKFwibW92ZWVuZFwiKX19fSk7YmUuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJkcmFnZ2luZ1wiLHpuKSxiZS5tZXJnZU9wdGlvbnMoe2tleWJvYXJkOiEwLGtleWJvYXJkUGFuRGVsdGE6ODB9KTt2YXIgTW49RWUuZXh0ZW5kKHtrZXlDb2Rlczp7bGVmdDpbMzddLHJpZ2h0OlszOV0sZG93bjpbNDBdLHVwOlszOF0sem9vbUluOlsxODcsMTA3LDYxLDE3MV0sem9vbU91dDpbMTg5LDEwOSw1NCwxNzNdfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuX21hcD10LHRoaXMuX3NldFBhbkRlbHRhKHQub3B0aW9ucy5rZXlib2FyZFBhbkRlbHRhKSx0aGlzLl9zZXRab29tRGVsdGEodC5vcHRpb25zLnpvb21EZWx0YSl9LGFkZEhvb2tzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLl9jb250YWluZXI7dC50YWJJbmRleDw9MCYmKHQudGFiSW5kZXg9XCIwXCIpLG10KHQse2ZvY3VzOnRoaXMuX29uRm9jdXMsYmx1cjp0aGlzLl9vbkJsdXIsbW91c2Vkb3duOnRoaXMuX29uTW91c2VEb3dufSx0aGlzKSx0aGlzLl9tYXAub24oe2ZvY3VzOnRoaXMuX2FkZEhvb2tzLGJsdXI6dGhpcy5fcmVtb3ZlSG9va3N9LHRoaXMpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUhvb2tzKCksZnQodGhpcy5fbWFwLl9jb250YWluZXIse2ZvY3VzOnRoaXMuX29uRm9jdXMsYmx1cjp0aGlzLl9vbkJsdXIsbW91c2Vkb3duOnRoaXMuX29uTW91c2VEb3dufSx0aGlzKSx0aGlzLl9tYXAub2ZmKHtmb2N1czp0aGlzLl9hZGRIb29rcyxibHVyOnRoaXMuX3JlbW92ZUhvb2tzfSx0aGlzKX0sX29uTW91c2VEb3duOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2ZvY3VzZWQpe3ZhciB0PWRvY3VtZW50LmJvZHksaT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZT10LnNjcm9sbFRvcHx8aS5zY3JvbGxUb3Asbj10LnNjcm9sbExlZnR8fGkuc2Nyb2xsTGVmdDt0aGlzLl9tYXAuX2NvbnRhaW5lci5mb2N1cygpLHdpbmRvdy5zY3JvbGxUbyhuLGUpfX0sX29uRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9mb2N1c2VkPSEwLHRoaXMuX21hcC5maXJlKFwiZm9jdXNcIil9LF9vbkJsdXI6ZnVuY3Rpb24oKXt0aGlzLl9mb2N1c2VkPSExLHRoaXMuX21hcC5maXJlKFwiYmx1clwiKX0sX3NldFBhbkRlbHRhOmZ1bmN0aW9uKHQpe3ZhciBpLGUsbj10aGlzLl9wYW5LZXlzPXt9LG89dGhpcy5rZXlDb2Rlcztmb3IoaT0wLGU9by5sZWZ0Lmxlbmd0aDtpPGU7aSsrKW5bby5sZWZ0W2ldXT1bLTEqdCwwXTtmb3IoaT0wLGU9by5yaWdodC5sZW5ndGg7aTxlO2krKyluW28ucmlnaHRbaV1dPVt0LDBdO2ZvcihpPTAsZT1vLmRvd24ubGVuZ3RoO2k8ZTtpKyspbltvLmRvd25baV1dPVswLHRdO2ZvcihpPTAsZT1vLnVwLmxlbmd0aDtpPGU7aSsrKW5bby51cFtpXV09WzAsLTEqdF19LF9zZXRab29tRGVsdGE6ZnVuY3Rpb24odCl7dmFyIGksZSxuPXRoaXMuX3pvb21LZXlzPXt9LG89dGhpcy5rZXlDb2Rlcztmb3IoaT0wLGU9by56b29tSW4ubGVuZ3RoO2k8ZTtpKyspbltvLnpvb21JbltpXV09dDtmb3IoaT0wLGU9by56b29tT3V0Lmxlbmd0aDtpPGU7aSsrKW5bby56b29tT3V0W2ldXT0tdH0sX2FkZEhvb2tzOmZ1bmN0aW9uKCl7bXQoZG9jdW1lbnQsXCJrZXlkb3duXCIsdGhpcy5fb25LZXlEb3duLHRoaXMpfSxfcmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXtmdChkb2N1bWVudCxcImtleWRvd25cIix0aGlzLl9vbktleURvd24sdGhpcyl9LF9vbktleURvd246ZnVuY3Rpb24odCl7aWYoISh0LmFsdEtleXx8dC5jdHJsS2V5fHx0Lm1ldGFLZXkpKXt2YXIgaSxlPXQua2V5Q29kZSxuPXRoaXMuX21hcDtpZihlIGluIHRoaXMuX3BhbktleXMpbi5fcGFuQW5pbSYmbi5fcGFuQW5pbS5faW5Qcm9ncmVzc3x8KGk9dGhpcy5fcGFuS2V5c1tlXSx0LnNoaWZ0S2V5JiYoaT13KGkpLm11bHRpcGx5QnkoMykpLG4ucGFuQnkoaSksbi5vcHRpb25zLm1heEJvdW5kcyYmbi5wYW5JbnNpZGVCb3VuZHMobi5vcHRpb25zLm1heEJvdW5kcykpO2Vsc2UgaWYoZSBpbiB0aGlzLl96b29tS2V5cyluLnNldFpvb20obi5nZXRab29tKCkrKHQuc2hpZnRLZXk/MzoxKSp0aGlzLl96b29tS2V5c1tlXSk7ZWxzZXtpZigyNyE9PWV8fCFuLl9wb3B1cHx8IW4uX3BvcHVwLm9wdGlvbnMuY2xvc2VPbkVzY2FwZUtleSlyZXR1cm47bi5jbG9zZVBvcHVwKCl9THQodCl9fX0pO2JlLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwia2V5Ym9hcmRcIixNbiksYmUubWVyZ2VPcHRpb25zKHtzY3JvbGxXaGVlbFpvb206ITAsd2hlZWxEZWJvdW5jZVRpbWU6NDAsd2hlZWxQeFBlclpvb21MZXZlbDo2MH0pO3ZhciBDbj1FZS5leHRlbmQoe2FkZEhvb2tzOmZ1bmN0aW9uKCl7bXQodGhpcy5fbWFwLl9jb250YWluZXIsXCJtb3VzZXdoZWVsXCIsdGhpcy5fb25XaGVlbFNjcm9sbCx0aGlzKSx0aGlzLl9kZWx0YT0wfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe2Z0KHRoaXMuX21hcC5fY29udGFpbmVyLFwibW91c2V3aGVlbFwiLHRoaXMuX29uV2hlZWxTY3JvbGwsdGhpcyl9LF9vbldoZWVsU2Nyb2xsOmZ1bmN0aW9uKHQpe3ZhciBpPVR0KHQpLG49dGhpcy5fbWFwLm9wdGlvbnMud2hlZWxEZWJvdW5jZVRpbWU7dGhpcy5fZGVsdGErPWksdGhpcy5fbGFzdE1vdXNlUG9zPXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KSx0aGlzLl9zdGFydFRpbWV8fCh0aGlzLl9zdGFydFRpbWU9K25ldyBEYXRlKTt2YXIgbz1NYXRoLm1heChuLSgrbmV3IERhdGUtdGhpcy5fc3RhcnRUaW1lKSwwKTtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpLHRoaXMuX3RpbWVyPXNldFRpbWVvdXQoZSh0aGlzLl9wZXJmb3JtWm9vbSx0aGlzKSxvKSxMdCh0KX0sX3BlcmZvcm1ab29tOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGk9dC5nZXRab29tKCksZT10aGlzLl9tYXAub3B0aW9ucy56b29tU25hcHx8MDt0Ll9zdG9wKCk7dmFyIG49dGhpcy5fZGVsdGEvKDQqdGhpcy5fbWFwLm9wdGlvbnMud2hlZWxQeFBlclpvb21MZXZlbCksbz00Kk1hdGgubG9nKDIvKDErTWF0aC5leHAoLU1hdGguYWJzKG4pKSkpL01hdGguTE4yLHM9ZT9NYXRoLmNlaWwoby9lKSplOm8scj10Ll9saW1pdFpvb20oaSsodGhpcy5fZGVsdGE+MD9zOi1zKSktaTt0aGlzLl9kZWx0YT0wLHRoaXMuX3N0YXJ0VGltZT1udWxsLHImJihcImNlbnRlclwiPT09dC5vcHRpb25zLnNjcm9sbFdoZWVsWm9vbT90LnNldFpvb20oaStyKTp0LnNldFpvb21Bcm91bmQodGhpcy5fbGFzdE1vdXNlUG9zLGkrcikpfX0pO2JlLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwic2Nyb2xsV2hlZWxab29tXCIsQ24pLGJlLm1lcmdlT3B0aW9ucyh7dGFwOiEwLHRhcFRvbGVyYW5jZToxNX0pO3ZhciBTbj1FZS5leHRlbmQoe2FkZEhvb2tzOmZ1bmN0aW9uKCl7bXQodGhpcy5fbWFwLl9jb250YWluZXIsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Eb3duLHRoaXMpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe2Z0KHRoaXMuX21hcC5fY29udGFpbmVyLFwidG91Y2hzdGFydFwiLHRoaXMuX29uRG93bix0aGlzKX0sX29uRG93bjpmdW5jdGlvbih0KXtpZih0LnRvdWNoZXMpe2lmKFB0KHQpLHRoaXMuX2ZpcmVDbGljaz0hMCx0LnRvdWNoZXMubGVuZ3RoPjEpcmV0dXJuIHRoaXMuX2ZpcmVDbGljaz0hMSx2b2lkIGNsZWFyVGltZW91dCh0aGlzLl9ob2xkVGltZW91dCk7dmFyIGk9dC50b3VjaGVzWzBdLG49aS50YXJnZXQ7dGhpcy5fc3RhcnRQb3M9dGhpcy5fbmV3UG9zPW5ldyB4KGkuY2xpZW50WCxpLmNsaWVudFkpLG4udGFnTmFtZSYmXCJhXCI9PT1uLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmUShuLFwibGVhZmxldC1hY3RpdmVcIiksdGhpcy5faG9sZFRpbWVvdXQ9c2V0VGltZW91dChlKGZ1bmN0aW9uKCl7dGhpcy5faXNUYXBWYWxpZCgpJiYodGhpcy5fZmlyZUNsaWNrPSExLHRoaXMuX29uVXAoKSx0aGlzLl9zaW11bGF0ZUV2ZW50KFwiY29udGV4dG1lbnVcIixpKSl9LHRoaXMpLDFlMyksdGhpcy5fc2ltdWxhdGVFdmVudChcIm1vdXNlZG93blwiLGkpLG10KGRvY3VtZW50LHt0b3VjaG1vdmU6dGhpcy5fb25Nb3ZlLHRvdWNoZW5kOnRoaXMuX29uVXB9LHRoaXMpfX0sX29uVXA6ZnVuY3Rpb24odCl7aWYoY2xlYXJUaW1lb3V0KHRoaXMuX2hvbGRUaW1lb3V0KSxmdChkb2N1bWVudCx7dG91Y2htb3ZlOnRoaXMuX29uTW92ZSx0b3VjaGVuZDp0aGlzLl9vblVwfSx0aGlzKSx0aGlzLl9maXJlQ2xpY2smJnQmJnQuY2hhbmdlZFRvdWNoZXMpe3ZhciBpPXQuY2hhbmdlZFRvdWNoZXNbMF0sZT1pLnRhcmdldDtlJiZlLnRhZ05hbWUmJlwiYVwiPT09ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnR0KGUsXCJsZWFmbGV0LWFjdGl2ZVwiKSx0aGlzLl9zaW11bGF0ZUV2ZW50KFwibW91c2V1cFwiLGkpLHRoaXMuX2lzVGFwVmFsaWQoKSYmdGhpcy5fc2ltdWxhdGVFdmVudChcImNsaWNrXCIsaSl9fSxfaXNUYXBWYWxpZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZXdQb3MuZGlzdGFuY2VUbyh0aGlzLl9zdGFydFBvcyk8PXRoaXMuX21hcC5vcHRpb25zLnRhcFRvbGVyYW5jZX0sX29uTW92ZTpmdW5jdGlvbih0KXt2YXIgaT10LnRvdWNoZXNbMF07dGhpcy5fbmV3UG9zPW5ldyB4KGkuY2xpZW50WCxpLmNsaWVudFkpLHRoaXMuX3NpbXVsYXRlRXZlbnQoXCJtb3VzZW1vdmVcIixpKX0sX3NpbXVsYXRlRXZlbnQ6ZnVuY3Rpb24odCxpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO2UuX3NpbXVsYXRlZD0hMCxpLnRhcmdldC5fc2ltdWxhdGVkQ2xpY2s9ITAsZS5pbml0TW91c2VFdmVudCh0LCEwLCEwLHdpbmRvdywxLGkuc2NyZWVuWCxpLnNjcmVlblksaS5jbGllbnRYLGkuY2xpZW50WSwhMSwhMSwhMSwhMSwwLG51bGwpLGkudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSl9fSk7cWkmJiFWaSYmYmUuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJ0YXBcIixTbiksYmUubWVyZ2VPcHRpb25zKHt0b3VjaFpvb206cWkmJiFNaSxib3VuY2VBdFpvb21MaW1pdHM6ITB9KTt2YXIgWm49RWUuZXh0ZW5kKHthZGRIb29rczpmdW5jdGlvbigpe1EodGhpcy5fbWFwLl9jb250YWluZXIsXCJsZWFmbGV0LXRvdWNoLXpvb21cIiksbXQodGhpcy5fbWFwLl9jb250YWluZXIsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaFN0YXJ0LHRoaXMpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe3R0KHRoaXMuX21hcC5fY29udGFpbmVyLFwibGVhZmxldC10b3VjaC16b29tXCIpLGZ0KHRoaXMuX21hcC5fY29udGFpbmVyLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2hTdGFydCx0aGlzKX0sX29uVG91Y2hTdGFydDpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9tYXA7aWYodC50b3VjaGVzJiYyPT09dC50b3VjaGVzLmxlbmd0aCYmIWkuX2FuaW1hdGluZ1pvb20mJiF0aGlzLl96b29taW5nKXt2YXIgZT1pLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQudG91Y2hlc1swXSksbj1pLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQudG91Y2hlc1sxXSk7dGhpcy5fY2VudGVyUG9pbnQ9aS5nZXRTaXplKCkuX2RpdmlkZUJ5KDIpLHRoaXMuX3N0YXJ0TGF0TG5nPWkuY29udGFpbmVyUG9pbnRUb0xhdExuZyh0aGlzLl9jZW50ZXJQb2ludCksXCJjZW50ZXJcIiE9PWkub3B0aW9ucy50b3VjaFpvb20mJih0aGlzLl9waW5jaFN0YXJ0TGF0TG5nPWkuY29udGFpbmVyUG9pbnRUb0xhdExuZyhlLmFkZChuKS5fZGl2aWRlQnkoMikpKSx0aGlzLl9zdGFydERpc3Q9ZS5kaXN0YW5jZVRvKG4pLHRoaXMuX3N0YXJ0Wm9vbT1pLmdldFpvb20oKSx0aGlzLl9tb3ZlZD0hMSx0aGlzLl96b29taW5nPSEwLGkuX3N0b3AoKSxtdChkb2N1bWVudCxcInRvdWNobW92ZVwiLHRoaXMuX29uVG91Y2hNb3ZlLHRoaXMpLG10KGRvY3VtZW50LFwidG91Y2hlbmRcIix0aGlzLl9vblRvdWNoRW5kLHRoaXMpLFB0KHQpfX0sX29uVG91Y2hNb3ZlOmZ1bmN0aW9uKHQpe2lmKHQudG91Y2hlcyYmMj09PXQudG91Y2hlcy5sZW5ndGgmJnRoaXMuX3pvb21pbmcpe3ZhciBpPXRoaXMuX21hcCxuPWkubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodC50b3VjaGVzWzBdKSxvPWkubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodC50b3VjaGVzWzFdKSxzPW4uZGlzdGFuY2VUbyhvKS90aGlzLl9zdGFydERpc3Q7aWYodGhpcy5fem9vbT1pLmdldFNjYWxlWm9vbShzLHRoaXMuX3N0YXJ0Wm9vbSksIWkub3B0aW9ucy5ib3VuY2VBdFpvb21MaW1pdHMmJih0aGlzLl96b29tPGkuZ2V0TWluWm9vbSgpJiZzPDF8fHRoaXMuX3pvb20+aS5nZXRNYXhab29tKCkmJnM+MSkmJih0aGlzLl96b29tPWkuX2xpbWl0Wm9vbSh0aGlzLl96b29tKSksXCJjZW50ZXJcIj09PWkub3B0aW9ucy50b3VjaFpvb20pe2lmKHRoaXMuX2NlbnRlcj10aGlzLl9zdGFydExhdExuZywxPT09cylyZXR1cm59ZWxzZXt2YXIgcj1uLl9hZGQobykuX2RpdmlkZUJ5KDIpLl9zdWJ0cmFjdCh0aGlzLl9jZW50ZXJQb2ludCk7aWYoMT09PXMmJjA9PT1yLngmJjA9PT1yLnkpcmV0dXJuO3RoaXMuX2NlbnRlcj1pLnVucHJvamVjdChpLnByb2plY3QodGhpcy5fcGluY2hTdGFydExhdExuZyx0aGlzLl96b29tKS5zdWJ0cmFjdChyKSx0aGlzLl96b29tKX10aGlzLl9tb3ZlZHx8KGkuX21vdmVTdGFydCghMCwhMSksdGhpcy5fbW92ZWQ9ITApLGcodGhpcy5fYW5pbVJlcXVlc3QpO3ZhciBhPWUoaS5fbW92ZSxpLHRoaXMuX2NlbnRlcix0aGlzLl96b29tLHtwaW5jaDohMCxyb3VuZDohMX0pO3RoaXMuX2FuaW1SZXF1ZXN0PWYoYSx0aGlzLCEwKSxQdCh0KX19LF9vblRvdWNoRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbW92ZWQmJnRoaXMuX3pvb21pbmc/KHRoaXMuX3pvb21pbmc9ITEsZyh0aGlzLl9hbmltUmVxdWVzdCksZnQoZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIix0aGlzLl9vblRvdWNoTW92ZSksZnQoZG9jdW1lbnQsXCJ0b3VjaGVuZFwiLHRoaXMuX29uVG91Y2hFbmQpLHRoaXMuX21hcC5vcHRpb25zLnpvb21BbmltYXRpb24/dGhpcy5fbWFwLl9hbmltYXRlWm9vbSh0aGlzLl9jZW50ZXIsdGhpcy5fbWFwLl9saW1pdFpvb20odGhpcy5fem9vbSksITAsdGhpcy5fbWFwLm9wdGlvbnMuem9vbVNuYXApOnRoaXMuX21hcC5fcmVzZXRWaWV3KHRoaXMuX2NlbnRlcix0aGlzLl9tYXAuX2xpbWl0Wm9vbSh0aGlzLl96b29tKSkpOnRoaXMuX3pvb21pbmc9ITF9fSk7YmUuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJ0b3VjaFpvb21cIixabiksYmUuQm94Wm9vbT1ibixiZS5Eb3VibGVDbGlja1pvb209VG4sYmUuRHJhZz16bixiZS5LZXlib2FyZD1NbixiZS5TY3JvbGxXaGVlbFpvb209Q24sYmUuVGFwPVNuLGJlLlRvdWNoWm9vbT1abixPYmplY3QuZnJlZXplPXRpLHQudmVyc2lvbj1cIjEuMy4zXCIsdC5Db250cm9sPVRlLHQuY29udHJvbD16ZSx0LkJyb3dzZXI9UWksdC5FdmVudGVkPWNpLHQuTWl4aW49QWUsdC5VdGlsPXVpLHQuQ2xhc3M9dix0LkhhbmRsZXI9RWUsdC5leHRlbmQ9aSx0LmJpbmQ9ZSx0LnN0YW1wPW4sdC5zZXRPcHRpb25zPWwsdC5Eb21FdmVudD1QZSx0LkRvbVV0aWw9dmUsdC5Qb3NBbmltYXRpb249TGUsdC5EcmFnZ2FibGU9UmUsdC5MaW5lVXRpbD1OZSx0LlBvbHlVdGlsPURlLHQuUG9pbnQ9eCx0LnBvaW50PXcsdC5Cb3VuZHM9UCx0LmJvdW5kcz1iLHQuVHJhbnNmb3JtYXRpb249Uyx0LnRyYW5zZm9ybWF0aW9uPVosdC5Qcm9qZWN0aW9uPUhlLHQuTGF0TG5nPU0sdC5sYXRMbmc9Qyx0LkxhdExuZ0JvdW5kcz1ULHQubGF0TG5nQm91bmRzPXosdC5DUlM9ZGksdC5HZW9KU09OPXNuLHQuZ2VvSlNPTj1YdCx0Lmdlb0pzb249YW4sdC5MYXllcj1xZSx0LkxheWVyR3JvdXA9R2UsdC5sYXllckdyb3VwPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyBHZSh0LGkpfSx0LkZlYXR1cmVHcm91cD1LZSx0LmZlYXR1cmVHcm91cD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEtlKHQpfSx0LkltYWdlT3ZlcmxheT1obix0LmltYWdlT3ZlcmxheT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIG5ldyBobih0LGksZSl9LHQuVmlkZW9PdmVybGF5PXVuLHQudmlkZW9PdmVybGF5PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gbmV3IHVuKHQsaSxlKX0sdC5EaXZPdmVybGF5PWxuLHQuUG9wdXA9Y24sdC5wb3B1cD1mdW5jdGlvbih0LGkpe3JldHVybiBuZXcgY24odCxpKX0sdC5Ub29sdGlwPV9uLHQudG9vbHRpcD1mdW5jdGlvbih0LGkpe3JldHVybiBuZXcgX24odCxpKX0sdC5JY29uPVllLHQuaWNvbj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFllKHQpfSx0LkRpdkljb249ZG4sdC5kaXZJY29uPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZG4odCl9LHQuTWFya2VyPSRlLHQubWFya2VyPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyAkZSh0LGkpfSx0LlRpbGVMYXllcj1tbix0LnRpbGVMYXllcj1KdCx0LkdyaWRMYXllcj1wbix0LmdyaWRMYXllcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHBuKHQpfSx0LlNWRz1Qbix0LnN2Zz1RdCx0LlJlbmRlcmVyPWduLHQuQ2FudmFzPXZuLHQuY2FudmFzPSR0LHQuUGF0aD1RZSx0LkNpcmNsZU1hcmtlcj10bix0LmNpcmNsZU1hcmtlcj1mdW5jdGlvbih0LGkpe3JldHVybiBuZXcgdG4odCxpKX0sdC5DaXJjbGU9ZW4sdC5jaXJjbGU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiBuZXcgZW4odCxpLGUpfSx0LlBvbHlsaW5lPW5uLHQucG9seWxpbmU9ZnVuY3Rpb24odCxpKXtyZXR1cm4gbmV3IG5uKHQsaSl9LHQuUG9seWdvbj1vbix0LnBvbHlnb249ZnVuY3Rpb24odCxpKXtyZXR1cm4gbmV3IG9uKHQsaSl9LHQuUmVjdGFuZ2xlPUxuLHQucmVjdGFuZ2xlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyBMbih0LGkpfSx0Lk1hcD1iZSx0Lm1hcD1mdW5jdGlvbih0LGkpe3JldHVybiBuZXcgYmUodCxpKX07dmFyIEVuPXdpbmRvdy5MO3Qubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuTD1Fbix0aGlzfSx3aW5kb3cuTD10fSk7XG52YXIgc3RhcnRfZGF0ZSA9IG51bGwsIGVuZF9kYXRlID0gbnVsbDtcbnZhciB0aW1lc3RhbXBfc3RhcnRfZGF0ZSA9IG51bGwsIHRpbWVzdGFtcF9lbmRfZGF0ZSA9IG51bGw7XG52YXIgJGlucHV0X3N0YXJ0X2RhdGUgPSBudWxsLCAkaW5wdXRfZW5kX2RhdGUgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXREYXRlQ2xhc3MoZGF0ZSwgc3RhcnQsIGVuZCl7XG4gICAgaWYoZW5kICE9IG51bGwgJiYgc3RhcnQgIT0gbnVsbCl7XG4gICAgICAgIGlmKGRhdGUgPiBzdGFydCAmJiBkYXRlIDwgZW5kKVxuICAgICAgICAgICAgcmV0dXJuIFsgdHJ1ZSwgXCJzZWpvdXJcIiwgXCJTw6lqb3VyXCIgXTtcbiAgICB9XG5cbiAgICBpZihkYXRlID09IHN0YXJ0KVxuICAgICAgICByZXR1cm4gWyB0cnVlLCBcInN0YXJ0XCIsIFwiRMOpYnV0IGRlIHZvdHJlIHPDqWpvdXJcIiBdO1xuICAgIGlmKGRhdGUgPT0gZW5kKVxuICAgICAgICByZXR1cm4gWyB0cnVlLCBcImVuZFwiLCBcIkZpbiBkZSB2b3RyZSBzw6lqb3VyXCIgXTtcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZGF0ZXBpY2tlcl9kcmF3X25iX25pZ2h0cygpe1xuICAgIHZhciAkZGF0ZXBpY2tlciA9IGpRdWVyeShcIiN1aS1kYXRlcGlja2VyLWRpdlwiKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHN0YXJ0X2RhdGUgIT0gbnVsbCAmJiBlbmRfZGF0ZSAhPSBudWxsKXtcbiAgICAgICAgICAgIHZhciAkcXR5X2RheXNfc3RheSA9IGpRdWVyeShcIjxkaXYgLz5cIiwgeyBjbGFzczogXCJ1aS1kYXRlcGlja2VyLXN0YXktZHVyYXRpb25cIiB9KTtcbiAgICAgICAgICAgIHZhciBxdHlfbmlnaHRzX3N0YXkgPSBnZXRfZGF5c19kaWZmZXJlbmNlKHRpbWVzdGFtcF9zdGFydF9kYXRlLCB0aW1lc3RhbXBfZW5kX2RhdGUpO1xuICAgICAgICAgICAgJHF0eV9kYXlzX3N0YXkudGV4dChxdHlfbmlnaHRzX3N0YXkgKyBcIiBuaWdodHMgc3RheVwiKTtcbiAgICAgICAgICAgICRxdHlfZGF5c19zdGF5LmFwcGVuZFRvKCRkYXRlcGlja2VyKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG52YXIgb3B0aW9uc19zdGFydF9kYXRlID0ge1xuICAgIHNob3dBbmltOiBmYWxzZSxcbiAgICBjb25zdHJhaW5JbnB1dDogdHJ1ZSxcbiAgICBudW1iZXJPZk1vbnRoczogMSxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgYmVmb3JlU2hvdzogZnVuY3Rpb24oaW5wdXQsIGRhdGVwaWNrZXIpe1xuICAgICAgICBkYXRlcGlja2VyX2RyYXdfbmJfbmlnaHRzKCk7XG4gICAgfSxcbiAgICBiZWZvcmVTaG93RGF5OiBmdW5jdGlvbihkYXRlKXtcbiAgICAgICAgLy8gMDogcHVibGlzaGVkXG4gICAgICAgIC8vIDE6IGNsYXNzXG4gICAgICAgIC8vIDI6IHRvb2x0aXBcbiAgICAgICAgdmFyIHRpbWVzdGFtcF9kYXRlID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBnZXREYXRlQ2xhc3ModGltZXN0YW1wX2RhdGUsIHRpbWVzdGFtcF9zdGFydF9kYXRlLCB0aW1lc3RhbXBfZW5kX2RhdGUpO1xuICAgICAgICBpZihyZXN1bHQgIT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgICAgIHJldHVybiBbdHJ1ZSwgXCJcIiwgXCJcIl07XG4gICAgICAgIC8vIHJldHVybiBbIHRydWUsIFwiY2hvY29sYXRlXCIsIFwiQ2hvY29sYXRlISBcIiBdO1xuICAgIH0sXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uKGRhdGVfc3RyaW5nLCBkYXRlcGlja2VyKXtcbiAgICAgICAgLy8gdGhpcyA9PiBpbnB1dFxuICAgICAgICBzdGFydF9kYXRlID0gJGlucHV0X3N0YXJ0X2RhdGUuZGF0ZXBpY2tlcihcImdldERhdGVcIik7XG4gICAgICAgIHRpbWVzdGFtcF9zdGFydF9kYXRlID0gc3RhcnRfZGF0ZS5nZXRUaW1lKCk7XG4gICAgfSxcbiAgICBvbkNsb3NlOiBmdW5jdGlvbigpe1xuICAgICAgICBpZihlbmRfZGF0ZSAhPSBudWxsKXtcbiAgICAgICAgICAgIGlmKHRpbWVzdGFtcF9zdGFydF9kYXRlID49IHRpbWVzdGFtcF9lbmRfZGF0ZSB8fCBlbmRfZGF0ZSA9PSBudWxsKXtcbiAgICAgICAgICAgICAgICAkaW5wdXRfZW5kX2RhdGUuZGF0ZXBpY2tlcihcInNldERhdGVcIiwgbnVsbCk7XG4gICAgICAgICAgICAgICAgZW5kX2RhdGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcF9lbmRfZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgJGlucHV0X2VuZF9kYXRlLmRhdGVwaWNrZXIoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihzdGFydF9kYXRlICE9IG51bGwgJiYgZW5kX2RhdGUgPT0gbnVsbClcbiAgICAgICAgICAgICRpbnB1dF9lbmRfZGF0ZS5kYXRlcGlja2VyKFwic2hvd1wiKTtcbiAgICB9XG59O1xudmFyIG9wdGlvbnNfZW5kX2RhdGUgPSB7XG4gICAgc2hvd0FuaW06IGZhbHNlLFxuICAgIGNvbnN0cmFpbklucHV0OiB0cnVlLFxuICAgIG51bWJlck9mTW9udGhzOiAxLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbihpbnB1dCwgZGF0ZXBpY2tlcil7XG4gICAgICAgIGRhdGVwaWNrZXJfZHJhd19uYl9uaWdodHMoKTtcbiAgICB9LFxuICAgIGJlZm9yZVNob3dEYXk6IGZ1bmN0aW9uKGRhdGUpe1xuICAgICAgICB2YXIgdGltZXN0YW1wX2RhdGUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGdldERhdGVDbGFzcyh0aW1lc3RhbXBfZGF0ZSwgdGltZXN0YW1wX3N0YXJ0X2RhdGUsIHRpbWVzdGFtcF9lbmRfZGF0ZSk7XG4gICAgICAgIGlmKHJlc3VsdCAhPSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICAgICAgcmV0dXJuIFsgdHJ1ZSwgXCJcIiwgXCJDaG9jb2xhdGUgIVwiIF07XG4gICAgfSxcbiAgICBvblNlbGVjdDogZnVuY3Rpb24oZGF0ZV9zdHJpbmcsIGRhdGVwaWNrZXIpe1xuICAgICAgICAvLyB0aGlzID0+IGlucHV0XG4gICAgICAgIGVuZF9kYXRlID0gJGlucHV0X2VuZF9kYXRlLmRhdGVwaWNrZXIoXCJnZXREYXRlXCIpO1xuICAgICAgICB0aW1lc3RhbXBfZW5kX2RhdGUgPSBlbmRfZGF0ZS5nZXRUaW1lKCk7XG4gICAgfSxcbiAgICBvbkNsb3NlOiBmdW5jdGlvbigpe1xuICAgICAgICBpZihlbmRfZGF0ZSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmKHRpbWVzdGFtcF9lbmRfZGF0ZSA8PSB0aW1lc3RhbXBfc3RhcnRfZGF0ZSB8fCBzdGFydF9kYXRlID09IG51bGwpe1xuICAgICAgICAgICAgJGlucHV0X3N0YXJ0X2RhdGUuZGF0ZXBpY2tlcihcInNldERhdGVcIiwgbnVsbCk7XG4gICAgICAgICAgICBzdGFydF9kYXRlID0gbnVsbDtcbiAgICAgICAgICAgIHRpbWVzdGFtcF9zdGFydF9kYXRlID0gbnVsbDtcbiAgICAgICAgICAgICRpbnB1dF9zdGFydF9kYXRlLmRhdGVwaWNrZXIoXCJzaG93XCIpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gJGlucHV0X3N0YXJ0X2RhdGUgPSBqUXVlcnkoXCIjc3RhcnQtZGF0ZVwiKTtcbi8vICRpbnB1dF9lbmRfZGF0ZSA9IGpRdWVyeShcIiNlbmQtZGF0ZVwiKTtcbi8vXG4vLyAkaW5wdXRfc3RhcnRfZGF0ZS5kYXRlcGlja2VyKG9wdGlvbnNfc3RhcnRfZGF0ZSk7XG4vLyAkaW5wdXRfZW5kX2RhdGUuZGF0ZXBpY2tlcihvcHRpb25zX2VuZF9kYXRlKTtcbi8vXG4vLyBmdW5jdGlvbiBnZXRfZGF5c19kaWZmZXJlbmNlKHN0YXJ0X2RhdGUsIGVuZF9kYXRlKXtcbi8vICAgICByZXR1cm4gTWF0aC5mbG9vcihlbmRfZGF0ZSAtIHN0YXJ0X2RhdGUpIC8gKDEwMDAqNjAqNjAqMjQpO1xuLy8gfVxuLyogUnVzc2lhbiAoVVRGLTgpIGluaXRpYWxpc2F0aW9uIGZvciB0aGUgalF1ZXJ5IFVJIGRhdGUgcGlja2VyIHBsdWdpbi4gKi9cbi8qIFdyaXR0ZW4gYnkgQW5kcmV3IFN0cm9tbm92IChzdHJvbW5vdkBnbWFpbC5jb20pLiAqL1xuKCBmdW5jdGlvbiggZmFjdG9yeSApIHtcbiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKCBbIFwiLi4vd2lkZ2V0cy9kYXRlcGlja2VyXCIgXSwgZmFjdG9yeSApO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoIGpRdWVyeS5kYXRlcGlja2VyICk7XG4gICAgfVxufSggZnVuY3Rpb24oIGRhdGVwaWNrZXIgKSB7XG5cbiAgICBkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1ID0ge1xuICAgICAgICBjbG9zZVRleHQ6IFwi0JfQsNC60YDRi9GC0YxcIixcbiAgICAgICAgcHJldlRleHQ6IFwiJiN4M0M70J/RgNC10LRcIixcbiAgICAgICAgbmV4dFRleHQ6IFwi0KHQu9C10LQmI3gzRTtcIixcbiAgICAgICAgY3VycmVudFRleHQ6IFwi0KHQtdCz0L7QtNC90Y9cIixcbiAgICAgICAgbW9udGhOYW1lczogWyBcItCv0L3QstCw0YDRjFwiLFwi0KTQtdCy0YDQsNC70YxcIixcItCc0LDRgNGCXCIsXCLQkNC/0YDQtdC70YxcIixcItCc0LDQuVwiLFwi0JjRjtC90YxcIixcbiAgICAgICAgICAgIFwi0JjRjtC70YxcIixcItCQ0LLQs9GD0YHRglwiLFwi0KHQtdC90YLRj9Cx0YDRjFwiLFwi0J7QutGC0Y/QsdGA0YxcIixcItCd0L7Rj9Cx0YDRjFwiLFwi0JTQtdC60LDQsdGA0YxcIiBdLFxuICAgICAgICBtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LJcIixcItCk0LXQslwiLFwi0JzQsNGAXCIsXCLQkNC/0YBcIixcItCc0LDQuVwiLFwi0JjRjtC9XCIsXG4gICAgICAgICAgICBcItCY0Y7Qu1wiLFwi0JDQstCzXCIsXCLQodC10L1cIixcItCe0LrRglwiLFwi0J3QvtGPXCIsXCLQlNC10LpcIiBdLFxuICAgICAgICBkYXlOYW1lczogWyBcItCy0L7RgdC60YDQtdGB0LXQvdGM0LVcIixcItC/0L7QvdC10LTQtdC70YzQvdC40LpcIixcItCy0YLQvtGA0L3QuNC6XCIsXCLRgdGA0LXQtNCwXCIsXCLRh9C10YLQstC10YDQs1wiLFwi0L/Rj9GC0L3QuNGG0LBcIixcItGB0YPQsdCx0L7RgtCwXCIgXSxcbiAgICAgICAgZGF5TmFtZXNTaG9ydDogWyBcItCy0YHQulwiLFwi0L/QvdC0XCIsXCLQstGC0YBcIixcItGB0YDQtFwiLFwi0YfRgtCyXCIsXCLQv9GC0L1cIixcItGB0LHRglwiIF0sXG4gICAgICAgIGRheU5hbWVzTWluOiBbIFwi0JLRgVwiLFwi0J/QvVwiLFwi0JLRglwiLFwi0KHRgFwiLFwi0KfRglwiLFwi0J/RglwiLFwi0KHQsVwiIF0sXG4gICAgICAgIHdlZWtIZWFkZXI6IFwi0J3QtdC0XCIsXG4gICAgICAgIGRhdGVGb3JtYXQ6IFwiZGQubW0ueXlcIixcbiAgICAgICAgZmlyc3REYXk6IDEsXG4gICAgICAgIGlzUlRMOiBmYWxzZSxcbiAgICAgICAgc2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSxcbiAgICAgICAgeWVhclN1ZmZpeDogXCJcIiB9O1xuICAgIGRhdGVwaWNrZXIuc2V0RGVmYXVsdHMoIGRhdGVwaWNrZXIucmVnaW9uYWwucnUgKTtcblxuICAgIHJldHVybiBkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1O1xuXG59ICkgKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgIGZ1bmN0aW9uIGNpdHlTZWFyY2goKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgZGF0YTogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwi0KfQtdGA0LrQsNGB0YtcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwi0KfQtdGA0L3QuNCz0L7QslwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCLQp9C10YDQvdC+0LLRhtGLXCIsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGdldFZhbHVlOiBcIm5hbWVcIlxuICAgICAgICB9O1xuXG4gICAgICAgICQoXCIjZmllbGQtY2l0eVwiKS5lYXN5QXV0b2NvbXBsZXRlKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGNpdHlTZWFyY2goKTtcblxuICAgIC8vICQoXCIjc3RhcnQtZGF0ZVwiKS5kYXRlcGlja2VyKHtcbiAgICAvLyAgICAgZGF0ZUZvcm1hdDogXCJkZCBNXCIsXG4gICAgLy8gICAgIG1pbkRhdGU6IDAsXG4gICAgLy8gICAgIG9uU2VsZWN0OiBmdW5jdGlvbihkYXRlVGV4dCwgaW5zdCl7XG4gICAgLy8gICAgICAgICB2YXIgZCA9ICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoaW5zdC5zZXR0aW5ncy5kYXRlRm9ybWF0LCBkYXRlVGV4dCk7XG4gICAgLy8gICAgICAgICBkLnNldERhdGUoZC5nZXREYXRlKCkrMSk7XG4gICAgLy8gICAgICAgICAkKFwiI2VuZC1kYXRlXCIpLnZhbCgkLmRhdGVwaWNrZXIuZm9ybWF0RGF0ZShpbnN0LnNldHRpbmdzLmRhdGVGb3JtYXQsIGQpKTtcbiAgICAvLyAgICAgfVxuICAgIC8vIH0pO1xuICAgIC8vICQoJyNlbmQtZGF0ZScpLmRhdGVwaWNrZXIoe1xuICAgIC8vICAgICBkYXRlRm9ybWF0OiBcImRkIE1cIixcbiAgICAvLyAgICAgbWluRGF0ZTogMVxuICAgIC8vIH0pO1xuXG4gICAgJChcIiNzdGFydC1kYXRlXCIpLmRhdGVwaWNrZXIoe1xuICAgICAgICBkYXRlRm9ybWF0OiBcImRkIE1cIixcbiAgICAgICAgbWluRGF0ZTogMCxcbiAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkdDIgPSAkKCcjZW5kLWRhdGUnKTtcbiAgICAgICAgICAgIHZhciBzdGFydERhdGUgPSAkKHRoaXMpLmRhdGVwaWNrZXIoJ2dldERhdGUnKTtcbiAgICAgICAgICAgIHZhciBtaW5EYXRlID0gJCh0aGlzKS5kYXRlcGlja2VyKCdnZXREYXRlJyk7XG4gICAgICAgICAgICB2YXIgZHQyRGF0ZSA9IGR0Mi5kYXRlcGlja2VyKCdnZXREYXRlJyk7XG5cbiAgICAgICAgICAgIHZhciBkYXRlRGlmZiA9IChkdDJEYXRlIC0gbWluRGF0ZSkgLyAoODY0MDAgKiAxMDAwKTtcblxuICAgICAgICAgICAgc3RhcnREYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSArIDMwKTtcblxuICAgICAgICAgICAgaWYgKGR0MkRhdGUgPT0gbnVsbCB8fCBkYXRlRGlmZiA8IDApIHtcbiAgICAgICAgICAgICAgICBkdDIuZGF0ZXBpY2tlcignc2V0RGF0ZScsIG1pbkRhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlRGlmZiA+IDMwKSB7XG4gICAgICAgICAgICAgICAgZHQyLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBzdGFydERhdGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB2YXIgbWF4RGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2Uoc3RhcnREYXRlKSk7XG4gICAgICAgICAgICAvLyBtYXhEYXRlLnNldERhdGUobWF4RGF0ZS5nZXREYXRlKCkgLSAxKTtcblxuICAgICAgICAgICAgdmFyIGRhdGUyID0gJCh0aGlzKS5kYXRlcGlja2VyKCdnZXREYXRlJyk7XG4gICAgICAgICAgICBkYXRlMi5zZXREYXRlKGRhdGUyLmdldERhdGUoKSArIDEpXG4gICAgICAgICAgICBkdDIuZGF0ZXBpY2tlcihcInNldERhdGVcIiwgZGF0ZTIpO1xuXG4gICAgICAgICAgICAvL3NldHMgZHQyIG1heERhdGUgdG8gdGhlIGxhc3QgZGF5IG9mIDMwIGRheXMgd2luZG93XG4gICAgICAgICAgICAvLyBkdDIuZGF0ZXBpY2tlcignb3B0aW9uJywgJ21heERhdGUnLCBzdGFydERhdGUpO1xuICAgICAgICAgICAgLy8gZHQyLmRhdGVwaWNrZXIoJ29wdGlvbicsICdtaW5EYXRlJywgc3RhcnREYXRlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJyNlbmQtZGF0ZScpLmRhdGVwaWNrZXIoe1xuICAgICAgICBkYXRlRm9ybWF0OiBcImRkIE1cIixcbiAgICAgICAgbWluRGF0ZTogJysxJ1xuICAgIH0pO1xuXG5cbiAgICAkKCcuc2ltcGxlLXNlbGVjdCcpLnNlbGVjdDIoe1xuICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTFcbiAgICB9KTtcblxuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcub2JqZWN0X19oZWFkZXItZ2FsbGVyeScsIHtcbiAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgfVxuICAgICAgICAvLyBub1N3aXBpbmc6IHRydWUsXG4gICAgICAgIC8vIHNob3J0U3dpcGVzOiB0cnVlLFxuICAgICAgICAvLyBsb25nU3dpcGVzOiB0cnVlLFxuICAgICAgICAvLyBsb25nU3dpcGVzUmF0aW86IDAsXG4gICAgICAgIC8vIGZvbGxvd0ZpbmdlcjogZmFsc2UsXG4gICAgICAgIC8vIGFsbG93VG91Y2hNb3ZlOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5nYWxsZXJ5LWNpdHktZ2FsbGVyeScsIHtcbiAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAzLFxuICAgICAgICBub1N3aXBpbmc6IGZhbHNlLFxuICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICBuZXh0RWw6ICcuZ2FsbGVyeS1jaXR5LWdhbGxlcnktbmV4dCcsXG4gICAgICAgICAgICBwcmV2RWw6ICcuZ2FsbGVyeS1jaXR5LWdhbGxlcnktcHJldicsXG4gICAgICAgIH0sXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgICAgICA0NzA6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgJCgnLm9iamVjdF9fdGFiJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwX2luZm8gPSAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3QnKS5maW5kKCcubG9jYXRpb25fX21hcCcpLFxuICAgICAgICAgICAgY29vcmRFID0gbWFwX2luZm8uYXR0cignZGF0YS1jb29yZEUnKSxcbiAgICAgICAgICAgIGNvb3JkTiA9IG1hcF9pbmZvLmF0dHIoJ2RhdGEtY29vcmROJyksXG4gICAgICAgICAgICBtYXBJZCA9IG1hcF9pbmZvLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgdmFyIG9wZW5FbCA9ICQoJy4nICsgJCh0aGlzKS5kYXRhKCdvcGVuJykpO1xuXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKG9wZW5FbCkuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZChvcGVuRWwpLmFkZENsYXNzKCdpcy1zaG93Jyk7XG5cbiAgICAgICAgaWYgKCQodGhpcykuZGF0YSgnb3BlbicpID09PSAndGFiLWdhbGxlcnknKSBpbml0R2FsbGVyeSgkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLmdhbGxlcnktdG9wJyksICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcuZ2FsbGVyeS10aHVtYnMnKSk7XG4gICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ29wZW4nKSA9PT0gJ3RhYi1sb2NhdGlvbicpIGluaXRNYXAoY29vcmRFLCBjb29yZE4sIG1hcElkKTtcblxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaW5pdEdhbGxlcnkoYSwgYikge1xuICAgICAgICB2YXIgZ2FsbGVyeVRodW1icyA9IG5ldyBTd2lwZXIoYiwge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMTAsXG4gICAgICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgICAgICAgIG5vU3dpcGluZzogZmFsc2UsXG4gICAgICAgICAgICB3YXRjaFNsaWRlc1Zpc2liaWxpdHk6IHRydWUsXG4gICAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBnYWxsZXJ5VG9wID0gbmV3IFN3aXBlcihhLCB7XG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDE0MCxcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aHVtYnM6IHtcbiAgICAgICAgICAgICAgICBzd2lwZXI6IGdhbGxlcnlUaHVtYnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbml0QWNjb3JkaW9uID0gZnVuY3Rpb24gKGl0ZW1zQ2xhc3MsIGhlYWRlckNsYXNzLCBib2R5Q2xhc3MpIHtcbiAgICAgICAgICAgIHZhciAkaXRlbXMgPSAkKGl0ZW1zQ2xhc3MpO1xuXG4gICAgICAgICAgICAkaXRlbXMuZmluZChoZWFkZXJDbGFzcykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRpdGVtID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICAkaXRlbXMubm90KCRpdGVtKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgICAgICRpdGVtcy5ub3QoJGl0ZW0pLmZpbmQoaGVhZGVyQ2xhc3MpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAgICAgJGl0ZW1zLm5vdCgkaXRlbSkuZmluZChib2R5Q2xhc3MpLnNsaWRlVXAoMjUwKTtcblxuXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2lzLW9wZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoYm9keUNsYXNzKS5zbGlkZVVwKDI1MCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoYm9keUNsYXNzKS5zbGlkZURvd24oMjUwKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGluaXRBY2NvcmRpb24oJy5vYmplY3QnLCAnLm9iamVjdF9fb3BlbicsICcub2JqZWN0X19ib2R5Jyk7XG4gICAgfSkoJCk7XG5cblxuICAgICQoJy5kcm9wLWNob2ljZV9faXRlbXMtLW11bHRpcGxlIC5kcm9wLWNob2ljZV9faXRlbSBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG5cbiAgICAgICAgdmFyICRjb3VudCA9IDAsXG4gICAgICAgICAgICAkcGFyZW50X2l0ZW0gPSAkKHRoaXMpLnBhcmVudHMoJy5kcm9wLWNob2ljZScpLFxuICAgICAgICAgICAgJGl0ZW0gPSAkKHRoaXMpLnBhcmVudHMoJy5kcm9wLWNob2ljZScpLFxuICAgICAgICAgICAgdGV4dCA9ICQodGhpcykudGV4dCgpO1xuXG5cbiAgICAgICAgJGl0ZW0uZmluZCgnLmlzLWFjdGl2ZScpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICRjb3VudCA9IGkgKyAxO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAkcGFyZW50X2l0ZW0ucHJldigpLmZpbmQoJy5maWVsZC1kcm9wX192YWx1ZScpLnRleHQoJHBhcmVudF9pdGVtLnByZXYoKS5kYXRhKCd0ZXh0JykpO1xuICAgICAgICAgICAgJHBhcmVudF9pdGVtLnByZXYoKS5maW5kKCcuZmllbGQtZHJvcF9fdmFsdWUnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgJHBhcmVudF9pdGVtLmZpbmQoJy5qcy1yZXNldCcpLnJlbW92ZUNsYXNzKCdpcy1jaGVja2VkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoJGNvdW50ID09PSAxKSB7XG4gICAgICAgICAgICB0ZXh0ID0gJGl0ZW0uZmluZCgnLmlzLWFjdGl2ZScpLnRleHQoKTtcbiAgICAgICAgICAgICRwYXJlbnRfaXRlbS5wcmV2KCkuZmluZCgnLmZpZWxkLWRyb3BfX3ZhbHVlJykudGV4dCh0ZXh0KTtcbiAgICAgICAgICAgICRwYXJlbnRfaXRlbS5wcmV2KCkuZmluZCgnLmZpZWxkLWRyb3BfX3ZhbHVlJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICRwYXJlbnRfaXRlbS5maW5kKCcuanMtcmVzZXQnKS5hZGRDbGFzcygnaXMtY2hlY2tlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHBhcmVudF9pdGVtLnByZXYoKS5maW5kKCcuZmllbGQtZHJvcF9fdmFsdWUnKS50ZXh0KCRjb3VudCArICcg0YTQuNC70YzRgtGA0LAnKTtcbiAgICAgICAgICAgICRwYXJlbnRfaXRlbS5wcmV2KCkuZmluZCgnLmZpZWxkLWRyb3BfX3ZhbHVlJykuY3NzKCdmb250LXN0eWxlJywgJ2l0YWxpYycpO1xuICAgICAgICAgICAgJHBhcmVudF9pdGVtLmZpbmQoJy5qcy1yZXNldCcpLmFkZENsYXNzKCdpcy1jaGVja2VkJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJ2JvZHknKS5kZWxlZ2F0ZSgnLmpzLXJlc2V0LmlzLWNoZWNrZWQnLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkcGFyZW50X2l0ZW0gPSAkKHRoaXMpLnBhcmVudHMoJy5kcm9wLWNob2ljZScpO1xuXG4gICAgICAgICRwYXJlbnRfaXRlbS5wcmV2KCkuZmluZCgnLmZpZWxkLWRyb3BfX3ZhbHVlJykudGV4dCgkcGFyZW50X2l0ZW0ucHJldigpLmRhdGEoJ3RleHQnKSk7XG4gICAgICAgICRwYXJlbnRfaXRlbS5wcmV2KCkuZmluZCgnLmZpZWxkLWRyb3BfX3ZhbHVlJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgJHBhcmVudF9pdGVtLmZpbmQoJy5kcm9wLWNob2ljZV9faXRlbSBidXR0b24nKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICRwYXJlbnRfaXRlbS5maW5kKCcuanMtcmVzZXQnKS5yZW1vdmVDbGFzcygnaXMtY2hlY2tlZCcpO1xuICAgIH0pO1xuXG5cbiAgICAkKFwiLmRyb3AtY2hvaWNlX19pdGVtcy0tc2luZ2xlIC5kcm9wLWNob2ljZV9faXRlbSBidXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAkKFwiLmRyb3AtY2hvaWNlX19pdGVtcy0tc2luZ2xlIC5kcm9wLWNob2ljZV9faXRlbSBidXR0b25cIikucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJy5maWVsZC1kcm9wLS1ob3VzaW5nJykuYXR0cignZGF0YS10ZXh0JywgJ9Ci0LjQvyDQttC40LvRjNGPJyk7XG4gICAgJCgnLmZpZWxkLWRyb3AtLXJhdGluZycpLmF0dHIoJ2RhdGEtdGV4dCcsICcwLTEwJyk7XG4gICAgJCgnLmZpZWxkLWRyb3AtLXdpc2hlcycpLmF0dHIoJ2RhdGEtdGV4dCcsICfQndC1INCy0YvQsdGA0LDQvdC+Jyk7XG4gICAgJCgnLmZpZWxkLWRyb3AtLWNvbWZvcnQnKS5hdHRyKCdkYXRhLXRleHQnLCAn0J3QtSDQstGL0LHRgNCw0L3QvicpO1xuXG4gICAgJCgnLmpzLW9wZW4tZmVlZGJhY2snKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcub2JqZWN0X19ib2R5LS0xJykuc2xpZGVEb3duKDI1MCk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0X19oZWFkZXInKS5uZXh0KCkub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDgwMCk7XG5cbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy5vYmplY3RfX3RhYicpLnJlbW92ZUNsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcub2JqZWN0X190YWItLWZlZWRiYWNrJykuYWRkQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy5vYmplY3RfX3RhYnMtY29udGVudCcpLnJlbW92ZUNsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcudGFiLWZlZWRiYWNrJykuYWRkQ2xhc3MoJ2lzLXNob3cnKTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtb3Blbi1nYWxsZXJ5JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkdGhpc1BhcmVudCA9ICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKTtcblxuICAgICAgICAkdGhpc1BhcmVudC5maW5kKCcub2JqZWN0X19ib2R5LS0xJykuc2xpZGVEb3duKDI1MCk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0X19oZWFkZXInKS5uZXh0KCkub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDgwMCk7XG5cbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNzY3KSB7XG4gICAgICAgICAgICAkdGhpc1BhcmVudC5maW5kKCcub2JqZWN0X190YWInKS5yZW1vdmVDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAgICAgJHRoaXNQYXJlbnQuZmluZCgnLm9iamVjdF9fdGFiLS1nYWxsZXJ5JykuYWRkQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgICAgICR0aGlzUGFyZW50LmZpbmQoJy5vYmplY3RfX3RhYnMtY29udGVudCcpLnJlbW92ZUNsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICAgICAkdGhpc1BhcmVudC5maW5kKCcudGFiLWdhbGxlcnknKS5hZGRDbGFzcygnaXMtc2hvdycpO1xuXG4gICAgICAgICAgICBpbml0R2FsbGVyeSgkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLmdhbGxlcnktdG9wJyksICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcuZ2FsbGVyeS10aHVtYnMnKSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICR0aGlzUGFyZW50LmZpbmQoJy5vYmplY3QnKS5hZGRDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgJHRoaXNQYXJlbnQuZmluZCgnLm9iamVjdF9fb3BlbicpLmFkZENsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAkdGhpc1BhcmVudC5maW5kKCcub2JqZWN0X190YWInKS5yZW1vdmVDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAgICAgJHRoaXNQYXJlbnQuZmluZCgnLm9iamVjdF9fdGFiLS1nYWxsZXJ5JykuYWRkQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgICAgICR0aGlzUGFyZW50LmZpbmQoJy5vYmplY3RfX3RhYnMtY29udGVudCcpLnJlbW92ZUNsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICAgICAkdGhpc1BhcmVudC5maW5kKCcudGFiLWdhbGxlcnknKS5yZW1vdmVDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAgICAgJHRoaXNQYXJlbnQuZmluZCgnLnRhYi1pbmZvcm1hdGlvbicpLmFkZENsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICAgICAkdGhpc1BhcmVudC5maW5kKCdbZGF0YS1vcGVuPVwidGFiLWluZm9ybWF0aW9uXCJdJykuYWRkQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0pO1xuXG4gICAgJCgnLmZpbHRlciAuYnRuLWRvbmUnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCgnLmZpbHRlcicpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LCA4MDApO1xuICAgIH0pO1xuXG4gICAgJCgnLm9iamVjdF9faGVhZGVyLWRlc2NyaXB0aW9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLm9iamVjdF9fYm9keS0tMScpLnNsaWRlRG93bigyNTApO1xuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQodGhpcykucGFyZW50cygnLm9iamVjdF9faGVhZGVyJykubmV4dCgpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LCA4MDApO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLm9iamVjdF9fdGFiJykucmVtb3ZlQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy5vYmplY3QnKS5hZGRDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLm9iamVjdF9fb3BlbicpLmFkZENsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcub2JqZWN0X190YWItLWdhbGxlcnknKS5hZGRDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLm9iamVjdF9fdGFicy1jb250ZW50JykucmVtb3ZlQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy50YWItZ2FsbGVyeScpLnJlbW92ZUNsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9iamVjdHNfX2l0ZW0nKS5maW5kKCcudGFiLWluZm9ybWF0aW9uJykuYWRkQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJ1tkYXRhLW9wZW49XCJ0YWItaW5mb3JtYXRpb25cIl0nKS5hZGRDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cblxuICAgICQoJy5qcy1vcGVuLXNtYXAnKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy5vYmplY3RfX2JvZHktLTEnKS5zbGlkZURvd24oMjUwKTtcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RfX2hlYWRlcicpLm5leHQoKS5vZmZzZXQoKS50b3BcbiAgICAgICAgfSwgODAwKTtcblxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLm9iamVjdF9fdGFiJykucmVtb3ZlQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy5vYmplY3RfX3RhYi0tbG9jYXRpb24nKS5hZGRDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykuZmluZCgnLm9iamVjdF9fdGFicy1jb250ZW50JykucmVtb3ZlQ2xhc3MoJ2lzLXNob3cnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLmZpbmQoJy50YWItbG9jYXRpb24nKS5hZGRDbGFzcygnaXMtc2hvdycpO1xuXG4gICAgICAgIHZhciBtYXBfaW5mbyA9ICQodGhpcykucGFyZW50cygnLm9iamVjdCcpLmZpbmQoJy5sb2NhdGlvbl9fbWFwJyksXG4gICAgICAgICAgICBjb29yZEUgPSBtYXBfaW5mby5hdHRyKCdkYXRhLWNvb3JkRScpLFxuICAgICAgICAgICAgY29vcmROID0gbWFwX2luZm8uYXR0cignZGF0YS1jb29yZE4nKSxcbiAgICAgICAgICAgIG1hcElkID0gbWFwX2luZm8uYXR0cignaWQnKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coY29vcmRFLCBjb29yZE4sIG1hcElkKTtcbiAgICAgICAgaW5pdE1hcChjb29yZEUsIGNvb3JkTiwgbWFwSWQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cblxuICAgICQoJyNsaWdodGdhbGxlcnknKS5saWdodEdhbGxlcnkoe1xuICAgICAgICBwYWdlcjogdHJ1ZVxuICAgIH0pO1xuXG5cbiAgICAkKCcub2JqZWN0X190YWItYnV0dG9uLS1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLm9iamVjdF9fYm9keScpLnNsaWRlVXAoMjUwKTtcbiAgICAgICAgJCgnLm9iamVjdCcpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19faXRlbScpLm9mZnNldCgpLnRvcCAtIDE1XG4gICAgICAgICAgICB9LCA4MDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJ2JvZHknKS5kZWxlZ2F0ZSgnLm9iamVjdF9fb3BlbicsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RzX19pdGVtJykub2Zmc2V0KCkudG9wIC0gMTVcbiAgICAgICAgfSwgODAwKTtcbiAgICB9KVxuXG4gICAgJCgnLnNob3ctbW9yZS1saXN0LWluZm8nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLmluZm9ybWF0aW9uJykuZmluZCgnLmluZm9ybWF0aW9uX19tb3JlLWxpc3QnKS5zbGlkZVRvZ2dsZSgyNTApO1xuICAgICAgICAvLyAkKCcuaW5mb3JtYXRpb25fX2l0ZW0nKS5zbGlkZVRvZ2dsZSgwKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaW5mb3JtYXRpb24nKS5maW5kKCcuaW5mb3JtYXRpb25fX3NoYWRvdycpLnNsaWRlVG9nZ2xlKDApO1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJy5zaG93LW1vcmUtZmVlZGJhY2snKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5mZWVkYmFja19faXRlbXMtLXRhYnMtLWhpZGUnKS5zbGlkZVRvZ2dsZSgyNTApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAkKCcucHJpY2VzLWNpdHlfX21vcmUnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAkKCcucHJpY2VzLWNpdHlfX2l0ZW0nKS5zaG93KDIwMCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJy5mYXFfX2NoYXJhY3RlcmlzdGljcycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICQoJy5mYXFfX2l0ZW1zLS1jaGFyYWN0ZXJpc3RpY3MgbGknKS5zaG93KDIwMCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkKCcuZmFxX19zZWFyY2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAkKCcuZmFxX19pdGVtcy0tc2VhcmNoIGxpJykuc2hvdygyMDApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJCgnLmZhcV9fbW9yZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICQoJy5mYXFfX2l0ZW1zLS1tb3JlIGxpJykuc2hvdygyMDApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cblxuICAgIHZhciBjaGVja19tYXAgPSBmYWxzZTtcblxuICAgICQoJy5idG4tc2hvdy1tYXAnKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLm9iamVjdHNfX21hcCcpLmZhZGVJbigzMDApO1xuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICAgIGlmICghY2hlY2tfbWFwKSB7XG4gICAgICAgICAgICBpbml0R2FsbGVyeTIoKTtcbiAgICAgICAgICAgIGluaXRNYXAyKCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJy5vYmplY3RzX19tYXAnKS5vZmZzZXQoKS50b3AgLSAxNVxuICAgICAgICB9LCA4MDApO1xuXG4gICAgICAgIGNoZWNrX21hcCA9IHRydWU7XG4gICAgfSk7XG5cbiAgICAkKCcuYnRuLXNob3ctbW9yZScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnaXMtb3BlbicpKSB7XG4gICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHRoaXMpLnBhcmVudHMoJy5vYmplY3RfX3RhYnMtY29udGVudHMnKS5wcmV2KCkub2Zmc2V0KCkudG9wXG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaW5pdEdhbGxlcnkyKCkge1xuICAgICAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcignLm9iamVjdF9faGVhZGVyLWdhbGxlcnktLW1hcCcsIHtcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbm9Td2lwaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3J0U3dpcGVzOiBmYWxzZSxcbiAgICAgICAgICAgIGxvbmdTd2lwZXM6IGZhbHNlLFxuICAgICAgICAgICAgbG9uZ1N3aXBlc1JhdGlvOiAwLFxuICAgICAgICAgICAgZm9sbG93RmluZ2VyOiBmYWxzZSxcbiAgICAgICAgICAgIGFsbG93VG91Y2hNb3ZlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkKCcub2JqZWN0c19fbWFwLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcub2JqZWN0c19fbWFwJykuZmFkZU91dCgxMDApO1xuICAgICAgICAkKCcub2JqZWN0c19fbWFwLWRlc2NyaXB0aW9uJykuc2hvdygyMDApO1xuICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1vcGVuLWZpbHRlcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmZpbHRlcl9fY2hhbmdlJykuaGlkZSgwKTtcbiAgICAgICAgJCgnLmZpbHRlcl9fb3BlbicpLnNsaWRlRG93bigzMDApO1xuICAgICAgICAkKCcuZmlsdGVyX19ib2R5LWNsb3NlJykuYWRkQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCgnLmZpbHRlcicpLmFkZENsYXNzKCdmaWx0ZXItb3BlbicpO1xuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0NTEpICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAkKCcuZmlsdGVyX19ib2R5LWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuZmlsdGVyX19jaGFuZ2UnKS5zaG93KDUwKTtcbiAgICAgICAgJCgnLmZpbHRlcl9fb3BlbicpLnNsaWRlVXAoMTAwKTtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZmlsdGVyJykucmVtb3ZlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCgnLmZpbHRlcicpLnJlbW92ZUNsYXNzKCdmaWx0ZXItb3BlbicpO1xuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0NTEpICQoJ2JvZHknKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyAkKCcuanMtb3Blbi1kYXRlcGlja2VyJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAkKCcub3ZlcmxheScpLmZhZGVJbigzMDApO1xuICAgIC8vIH0pO1xuXG4gICAgJCgnLmpzLW9wZW4tZ3Vlc3RzJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQoJy5maWx0ZXJfX2Nsb3NlJykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCgnLmZpbHRlcicpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQoJy5kcm9wLWd1ZXN0cywgLm92ZXJsYXknKS5mYWRlVG9nZ2xlKDMwMCk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG5cbiAgICAkKCcuanMtb3Blbi1ob3VzaW5nJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQoJy5maWx0ZXJfX2Nsb3NlJykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCgnLmZpbHRlcicpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQoJy5kcm9wLWNob2ljZS0taG91c2luZywgLm92ZXJsYXknKS5mYWRlVG9nZ2xlKDMwMCk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG5cbiAgICAkKCcuanMtb3Blbi1yYXRpbmcnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCgnLmZpbHRlcl9fY2xvc2UnKS50b2dnbGVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZmlsdGVyJykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCgnLmRyb3AtY2hvaWNlLS1yYXRpbmcsIC5vdmVybGF5JykuZmFkZVRvZ2dsZSgzMDApO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1vcGVuLXdpc2hlcycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZmlsdGVyX19jbG9zZScpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQoJy5maWx0ZXInKS50b2dnbGVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZHJvcC1jaG9pY2UtLXdpc2hlcywgLm92ZXJsYXknKS5mYWRlVG9nZ2xlKDMwMCk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLW9wZW4tY29tZm9ydCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZmlsdGVyX19jbG9zZScpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICQoJy5maWx0ZXInKS50b2dnbGVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZHJvcC1jaG9pY2UtLWNvbWZvcnQsIC5vdmVybGF5JykuZmFkZVRvZ2dsZSgzMDApO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJy5vYmplY3RzX19tYXAtZGVzY3JpcHRpb25fX2Nsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcub2JqZWN0c19fbWFwLWRlc2NyaXB0aW9uJykuaGlkZSgxMDApO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoJy5vdmVybGF5LCAuYnRuLWRvbmUsIC5maWx0ZXJfX2Nsb3NlLCAuZmlsdGVyX19vdmVybGF5JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuZmllbGQtZHJvcCwgLmZpbHRlcl9fY2xvc2UsIC5maWx0ZXInKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAkKCcuZHJvcC1ndWVzdHMsIC5kcm9wLWNob2ljZS0tY29tZm9ydCwgLmRyb3AtY2hvaWNlLS1ob3VzaW5nLCAuZHJvcC1jaG9pY2UtLXJhdGluZywgLmRyb3AtY2hvaWNlLS13aXNoZXMsIC5vdmVybGF5JykuZmFkZU91dCgzMDApO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuXG4gICAgJChcIiNzbGlkZXItcmFuZ2VcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IHRydWUsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAzMDAwLFxuICAgICAgICBzdGVwOiA1MCxcbiAgICAgICAgdmFsdWVzOiBbMCwgMzAwMF0sXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICAkKFwiLnN0YXJ0LXZhbFwiKS50ZXh0KHVpLnZhbHVlc1swXSk7XG4gICAgICAgICAgICAkKFwiLmVuZC12YWxcIikudGV4dCh1aS52YWx1ZXNbMV0pO1xuICAgICAgICAgICAgJChcIi5lbmQtdmFsXCIpLm5leHQoJ3NwYW4nKS50ZXh0KHVpLnZhbHVlc1sxXSA8IDMwMDAgPyAn0LPRgNC9JyA6ICfQs9GA0L0gKycpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwiLnN0YXJ0LXZhbFwiKS50ZXh0KCQoXCIjc2xpZGVyLXJhbmdlXCIpLnNsaWRlcihcInZhbHVlc1wiLCAwKSk7XG4gICAgJChcIi5lbmQtdmFsXCIpLnRleHQoJChcIiNzbGlkZXItcmFuZ2VcIikuc2xpZGVyKFwidmFsdWVzXCIsIDEpKTtcblxuICAgIGpRdWVyeShcImlucHV0I21pbkNvc3RcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgdmFsdWUxID0galF1ZXJ5KFwiaW5wdXQjbWluQ29zdFwiKS52YWwoKTtcbiAgICAgICAgdmFyIHZhbHVlMiA9IGpRdWVyeShcImlucHV0I21heENvc3RcIikudmFsKCk7XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlMSkgPiBwYXJzZUludCh2YWx1ZTIpKSB7XG4gICAgICAgICAgICB2YWx1ZTEgPSB2YWx1ZTI7XG4gICAgICAgICAgICBqUXVlcnkoXCJpbnB1dCNtaW5Db3N0XCIpLnZhbCh2YWx1ZTEpO1xuICAgICAgICB9XG4gICAgICAgIGpRdWVyeShcIiNzbGlkZXJcIikuc2xpZGVyKFwidmFsdWVzXCIsIDAsIHZhbHVlMSk7XG4gICAgfSk7XG5cblxuICAgIGpRdWVyeShcImlucHV0I21heENvc3RcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgdmFsdWUxID0galF1ZXJ5KFwiaW5wdXQjbWluQ29zdFwiKS52YWwoKTtcbiAgICAgICAgdmFyIHZhbHVlMiA9IGpRdWVyeShcImlucHV0I21heENvc3RcIikudmFsKCk7XG5cbiAgICAgICAgaWYgKHZhbHVlMiA+IDEwMDApIHtcbiAgICAgICAgICAgIHZhbHVlMiA9IDEwMDA7XG4gICAgICAgICAgICBqUXVlcnkoXCJpbnB1dCNtYXhDb3N0XCIpLnZhbCgxMDAwKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlMSkgPiBwYXJzZUludCh2YWx1ZTIpKSB7XG4gICAgICAgICAgICB2YWx1ZTIgPSB2YWx1ZTE7XG4gICAgICAgICAgICBqUXVlcnkoXCJpbnB1dCNtYXhDb3N0XCIpLnZhbCh2YWx1ZTIpO1xuICAgICAgICB9XG4gICAgICAgIGpRdWVyeShcIiNzbGlkZXItcmFuZ2VcIikuc2xpZGVyKFwidmFsdWVzXCIsIDEsIHZhbHVlMik7XG4gICAgfSk7XG5cblxuICAgIC8vbWFwXG4gICAgZnVuY3Rpb24gaW5pdE1hcChjb29yZEUsIGNvb3JkTiwgaWQpIHtcbiAgICAgICAgdmFyIGNvb3JFID0gY29vcmRFO1xuICAgICAgICB2YXIgY29vck4gPSBjb29yZE47XG5cblxuICAgICAgICB2YXIgbXltYXAgPSBMLm1hcChpZCkuc2V0VmlldyhbY29vckUsIGNvb3JOXSwgMTQpO1xuXG4gICAgICAgIEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaWJXRndZbTk0SWl3aVlTSTZJbU5wZWpZNE5YVnljVEEyZW1ZeWNYQm5kSFJxY21aM04zZ2lmUS5ySmNGSUcyMTRBcmlJU0xiQjZCNWF3Jywge1xuICAgICAgICAgICAgbWF4Wm9vbTogMTYsXG4gICAgICAgICAgICAvL2F0dHJpYnV0aW9uOiAnTWFwIGRhdGEgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9cIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICcgK1xuICAgICAgICAgICAgLy8nPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCAnICtcbiAgICAgICAgICAgIC8vJ0ltYWdlcnkgwqkgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vXCI+TWFwYm94PC9hPicsXG4gICAgICAgICAgICBpZDogJ21hcGJveC5zdHJlZXRzJ1xuICAgICAgICB9KS5hZGRUbyhteW1hcCk7XG5cbiAgICAgICAgdmFyIGdyZWVuSWNvbiA9IG5ldyBMLkljb24oe1xuICAgICAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vY2RuLnJhd2dpdC5jb20vcG9pbnRoaS9sZWFmbGV0LWNvbG9yLW1hcmtlcnMvbWFzdGVyL2ltZy9tYXJrZXItaWNvbi0yeC1ncmVlbi5wbmcnLFxuICAgICAgICAgICAgc2hhZG93VXJsOiAnaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuNy9pbWFnZXMvbWFya2VyLXNoYWRvdy5wbmcnLFxuICAgICAgICAgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuICAgICAgICAgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG4gICAgICAgICAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgICAgICAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuICAgICAgICB9KTtcblxuICAgICAgICBMLm1hcmtlcihbY29vckUsIGNvb3JOXSwge2ljb246IGdyZWVuSWNvbn0pLmFkZFRvKG15bWFwKTtcbiAgICB9XG5cbiAgICAvL21hcCBlbmRcblxuXG4gICAgLy9tYXAyXG4gICAgZnVuY3Rpb24gaW5pdE1hcDIoKSB7XG4gICAgICAgIHZhciBjb29yRSA9ICc0OC4zNTA2MzU4JztcbiAgICAgICAgdmFyIGNvb3JOID0gJzI0LjQzNTE2MzEnO1xuXG5cbiAgICAgICAgdmFyIG15bWFwID0gTC5tYXAoJ2xvY2F0aW9uLW1hcDInKS5zZXRWaWV3KFtjb29yRSwgY29vck5dLCAxNCk7XG5cbiAgICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pYldGd1ltOTRJaXdpWVNJNkltTnBlalk0TlhWeWNUQTJlbVl5Y1hCbmRIUnFjbVozTjNnaWZRLnJKY0ZJRzIxNEFyaUlTTGJCNkI1YXcnLCB7XG4gICAgICAgICAgICBtYXhab29tOiAxNixcbiAgICAgICAgICAgIC8vYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJyArXG4gICAgICAgICAgICAvLyc8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC9cIj5DQy1CWS1TQTwvYT4sICcgK1xuICAgICAgICAgICAgLy8nSW1hZ2VyeSDCqSA8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9cIj5NYXBib3g8L2E+JyxcbiAgICAgICAgICAgIGlkOiAnbWFwYm94LnN0cmVldHMnXG4gICAgICAgIH0pLmFkZFRvKG15bWFwKTtcblxuICAgICAgICB2YXIgZ3JlZW5JY29uID0gbmV3IEwuSWNvbih7XG4gICAgICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9jZG4ucmF3Z2l0LmNvbS9wb2ludGhpL2xlYWZsZXQtY29sb3ItbWFya2Vycy9tYXN0ZXIvaW1nL21hcmtlci1pY29uLTJ4LWdyZWVuLnBuZycsXG4gICAgICAgICAgICBzaGFkb3dVcmw6ICdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy43L2ltYWdlcy9tYXJrZXItc2hhZG93LnBuZycsXG4gICAgICAgICAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG4gICAgICAgICAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICAgICAgICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcbiAgICAgICAgICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIEwubWFya2VyKFtjb29yRSwgY29vck5dLCB7aWNvbjogZ3JlZW5JY29ufSkuYWRkVG8obXltYXApO1xuICAgIH1cblxuICAgIC8vbWFwMiBlbmRcblxuXG4gICAgdmFyICRndWVzdHMgPSAkKFwiI2d1ZXN0cy12YWx1ZVwiKTtcblxuICAgICQoJyNndWVzdC1wbHVzJykuY2xpY2soZnVuY3Rpb24gYWRkKCkge1xuICAgICAgICB2YXIgJGd1ZXN0cyA9ICQoXCIjZ3Vlc3RzLXZhbHVlXCIpO1xuICAgICAgICB2YXIgYSA9IHBhcnNlSW50KCRndWVzdHMudmFsKCkpO1xuXG4gICAgICAgIGErKztcbiAgICAgICAgJChcIiNndWVzdC1taW51c1wiKS5wcm9wKFwiZGlzYWJsZWRcIiwgIWEpO1xuICAgICAgICAkZ3Vlc3RzLnZhbChhKTtcblxuICAgICAgICB2YXIgdmFsX3N1bV8xID0gTnVtYmVyKCQoXCIjZ3Vlc3RzLXZhbHVlMlwiKS52YWwoKSk7XG4gICAgICAgIHZhciB2YWxfc3VtXzIgPSBOdW1iZXIoJChcIiNndWVzdHMtdmFsdWUzXCIpLnZhbCgpKTtcblxuICAgICAgICB2YXIgc3VtID0gYSArIHZhbF9zdW1fMSArIHZhbF9zdW1fMjtcbiAgICAgICAgJCgnLmZpZWxkLWRyb3BfX3ZhbHVlLS1ndWVzdHMnKS50ZXh0KHN1bSArICcg0LPQvtGB0YLQtdC5Jyk7XG5cbiAgICB9KTtcblxuICAgICQoXCIjZ3Vlc3QtbWludXNcIikucHJvcChcImRpc2FibGVkXCIsICEkKFwiI2d1ZXN0cy12YWx1ZVwiKS52YWwoKSk7XG5cbiAgICAkKCcjZ3Vlc3QtbWludXMnKS5jbGljayhmdW5jdGlvbiBzdWJzdCgpIHtcbiAgICAgICAgdmFyICRndWVzdHMgPSAkKFwiI2d1ZXN0cy12YWx1ZVwiKTtcbiAgICAgICAgdmFyIGIgPSBwYXJzZUludCgkZ3Vlc3RzLnZhbCgpKTtcblxuICAgICAgICBpZiAoYiA+PSAxKSB7XG4gICAgICAgICAgICBiLS07XG4gICAgICAgICAgICAkZ3Vlc3RzLnZhbChiKTtcblxuICAgICAgICAgICAgdmFyIHZhbF9zdW1fMSA9IE51bWJlcigkKFwiI2d1ZXN0cy12YWx1ZTJcIikudmFsKCkpO1xuICAgICAgICAgICAgdmFyIHZhbF9zdW1fMiA9IE51bWJlcigkKFwiI2d1ZXN0cy12YWx1ZTNcIikudmFsKCkpO1xuICAgICAgICAgICAgdmFyIHN1bSA9IGIgKyB2YWxfc3VtXzEgKyB2YWxfc3VtXzI7XG4gICAgICAgICAgICAkKCcuZmllbGQtZHJvcF9fdmFsdWUtLWd1ZXN0cycpLnRleHQoc3VtICsgJyDQs9C+0YHRgtC10LknKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIiNndWVzdC1taW51c1wiKS5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgdmFyICRndWVzdHMyID0gJChcIiNndWVzdHMtdmFsdWUyXCIpO1xuICAgICQoJyNndWVzdC1wbHVzMicpLmNsaWNrKGZ1bmN0aW9uIGFkZCgpIHtcbiAgICAgICAgdmFyICRndWVzdHMyID0gJChcIiNndWVzdHMtdmFsdWUyXCIpO1xuICAgICAgICB2YXIgYSA9IHBhcnNlSW50KCRndWVzdHMyLnZhbCgpKTtcblxuICAgICAgICBhKys7XG4gICAgICAgICQoXCIjZ3Vlc3QtbWludXMyXCIpLnByb3AoXCJkaXNhYmxlZFwiLCAhYSk7XG4gICAgICAgICRndWVzdHMyLnZhbChhKTtcblxuICAgICAgICB2YXIgdmFsX3N1bV8xID0gTnVtYmVyKCQoXCIjZ3Vlc3RzLXZhbHVlXCIpLnZhbCgpKTtcbiAgICAgICAgdmFyIHZhbF9zdW1fMiA9IE51bWJlcigkKFwiI2d1ZXN0cy12YWx1ZTNcIikudmFsKCkpO1xuICAgICAgICB2YXIgc3VtID0gYSArIHZhbF9zdW1fMSArIHZhbF9zdW1fMjtcbiAgICAgICAgJCgnLmZpZWxkLWRyb3BfX3ZhbHVlLS1ndWVzdHMnKS50ZXh0KHN1bSArICcg0LPQvtGB0YLQtdC5Jyk7XG4gICAgfSk7XG4gICAgJChcIiNndWVzdC1taW51czJcIikucHJvcChcImRpc2FibGVkXCIsICEkKFwiI2d1ZXN0cy12YWx1ZTJcIikudmFsKCkpO1xuICAgICQoJyNndWVzdC1taW51czInKS5jbGljayhmdW5jdGlvbiBzdWJzdCgpIHtcbiAgICAgICAgdmFyICRndWVzdHMgPSAkKFwiI2d1ZXN0cy12YWx1ZTJcIik7XG5cbiAgICAgICAgdmFyIGIgPSBwYXJzZUludCgkZ3Vlc3RzMi52YWwoKSk7XG4gICAgICAgIGlmIChiID49IDEpIHtcbiAgICAgICAgICAgIGItLTtcbiAgICAgICAgICAgICRndWVzdHMyLnZhbChiKTtcblxuXG4gICAgICAgICAgICB2YXIgdmFsX3N1bV8xID0gTnVtYmVyKCQoXCIjZ3Vlc3RzLXZhbHVlXCIpLnZhbCgpKTtcbiAgICAgICAgICAgIHZhciB2YWxfc3VtXzIgPSBOdW1iZXIoJChcIiNndWVzdHMtdmFsdWUzXCIpLnZhbCgpKTtcbiAgICAgICAgICAgIHZhciBzdW0gPSBiICsgdmFsX3N1bV8xICsgdmFsX3N1bV8yO1xuICAgICAgICAgICAgJCgnLmZpZWxkLWRyb3BfX3ZhbHVlLS1ndWVzdHMnKS50ZXh0KHN1bSArICcg0LPQvtGB0YLQtdC5Jyk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN1bSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIjZ3Vlc3QtbWludXMyXCIpLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyICRndWVzdHMzID0gJChcIiNndWVzdHMtdmFsdWUzXCIpO1xuICAgICQoJyNndWVzdC1wbHVzMycpLmNsaWNrKGZ1bmN0aW9uIGFkZCgpIHtcbiAgICAgICAgdmFyICRndWVzdHMzID0gJChcIiNndWVzdHMtdmFsdWUzXCIpO1xuICAgICAgICB2YXIgYSA9IHBhcnNlSW50KCRndWVzdHMzLnZhbCgpKTtcblxuICAgICAgICBhKys7XG4gICAgICAgICQoXCIjZ3Vlc3QtbWludXMzXCIpLnByb3AoXCJkaXNhYmxlZFwiLCAhYSk7XG4gICAgICAgICRndWVzdHMzLnZhbChhKTtcblxuICAgICAgICB2YXIgdmFsX3N1bV8xID0gTnVtYmVyKCQoXCIjZ3Vlc3RzLXZhbHVlXCIpLnZhbCgpKTtcbiAgICAgICAgdmFyIHZhbF9zdW1fMiA9IE51bWJlcigkKFwiI2d1ZXN0cy12YWx1ZTJcIikudmFsKCkpO1xuICAgICAgICB2YXIgc3VtID0gYSArIHZhbF9zdW1fMSArIHZhbF9zdW1fMjtcbiAgICAgICAgJCgnLmZpZWxkLWRyb3BfX3ZhbHVlLS1ndWVzdHMnKS50ZXh0KHN1bSArICcg0LPQvtGB0YLQtdC5Jyk7XG4gICAgfSk7XG4gICAgJChcIiNndWVzdC1taW51czNcIikucHJvcChcImRpc2FibGVkXCIsICEkKFwiI2d1ZXN0cy12YWx1ZTJcIikudmFsKCkpO1xuICAgICQoJyNndWVzdC1taW51czMnKS5jbGljayhmdW5jdGlvbiBzdWJzdCgpIHtcbiAgICAgICAgdmFyICRndWVzdHMzID0gJChcIiNndWVzdHMtdmFsdWUzXCIpO1xuXG4gICAgICAgIHZhciBiID0gcGFyc2VJbnQoJGd1ZXN0czMudmFsKCkpO1xuICAgICAgICBpZiAoYiA+PSAxKSB7XG4gICAgICAgICAgICBiLS07XG4gICAgICAgICAgICAkZ3Vlc3RzMy52YWwoYik7XG5cbiAgICAgICAgICAgIHZhciB2YWxfc3VtXzEgPSBOdW1iZXIoJChcIiNndWVzdHMtdmFsdWVcIikudmFsKCkpO1xuICAgICAgICAgICAgdmFyIHZhbF9zdW1fMiA9IE51bWJlcigkKFwiI2d1ZXN0cy12YWx1ZTJcIikudmFsKCkpO1xuICAgICAgICAgICAgdmFyIHN1bSA9IGIgKyB2YWxfc3VtXzEgKyB2YWxfc3VtXzI7XG4gICAgICAgICAgICAkKCcuZmllbGQtZHJvcF9fdmFsdWUtLWd1ZXN0cycpLnRleHQoc3VtICsgJyDQs9C+0YHRgtC10LknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIjZ3Vlc3QtbWludXMzXCIpLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbiAgICB2YXIgZGlkU2Nyb2xsLFxuICAgICAgICBsYXN0U2Nyb2xsVG9wID0gMCxcbiAgICAgICAgZGVsdGEgPSA1LFxuICAgICAgICBuYXZiYXJIZWlnaHQgPSAkKCcuZmlsdGVyJykub3V0ZXJIZWlnaHQoKTtcblxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ1MSAmJiAhJCgnLmZpbHRlcicpLmhhc0NsYXNzKCdmaWx0ZXItb3BlbicpKSBkaWRTY3JvbGwgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZGlkU2Nyb2xsKSB7XG4gICAgICAgICAgICBoYXNTY3JvbGxlZCgpO1xuICAgICAgICAgICAgZGlkU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LCAyNTApO1xuXG4gICAgZnVuY3Rpb24gaGFzU2Nyb2xsZWQoKSB7XG4gICAgICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgLy8gTWFrZSBzY3JvbGwgbW9yZSB0aGFuIGRlbHRhXG4gICAgICAgIGlmIChNYXRoLmFicyhsYXN0U2Nyb2xsVG9wIC0gc3QpIDw9IGRlbHRhKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIC8vIElmIHNjcm9sbGVkIGRvd24gYW5kIHBhc3QgdGhlIG5hdmJhciwgYWRkIGNsYXNzIC5uYXYtdXAuXG4gICAgICAgIGlmIChzdCA+IGxhc3RTY3JvbGxUb3AgJiYgc3QgPiBuYXZiYXJIZWlnaHQpIHtcbiAgICAgICAgICAgIC8vIFNjcm9sbCBEb3duXG4gICAgICAgICAgICAkKCcuZmlsdGVyJykucmVtb3ZlQ2xhc3MoJ25hdi1kb3duJykuYWRkQ2xhc3MoJ25hdi11cCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2Nyb2xsIFVwXG4gICAgICAgICAgICBpZiAoc3QgKyAkKHdpbmRvdykuaGVpZ2h0KCkgPCAkKGRvY3VtZW50KS5oZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgICQoJy5maWx0ZXInKS5yZW1vdmVDbGFzcygnbmF2LXVwJykuYWRkQ2xhc3MoJ25hdi1kb3duJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0U2Nyb2xsVG9wID0gc3Q7XG4gICAgfVxuXG59KTsiXSwiZmlsZSI6Im1haW4uanMifQ==
